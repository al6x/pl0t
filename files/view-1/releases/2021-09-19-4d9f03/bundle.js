!function(){"use strict";const t={blocks_limit:100,narrow_width:480,height_in_narrow_width_mode:200,parsers:{},blocks_for_file_extensions:{md:"text",markdown:"text",text:"text",txt:"text"},blocks:{},apps:{}};window.plot_config=t;const e={version:.1};function n(){}function r(t,e){for(const n in e)t[n]=e[n];return t}function s(t){return t()}function o(){return Object.create(null)}function i(t){t.forEach(s)}function l(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e}function c(t){return null==t?"":t}function u(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function f(t){t.parentNode.removeChild(t)}function h(t){return document.createElement(t)}function p(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function g(t){return document.createTextNode(t)}function m(){return g(" ")}function w(){return g("")}function b(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function $(t){return function(e){return e.preventDefault(),t.call(this,e)}}function y(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e){for(const n in e)y(t,n,e[n])}function _(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function k(t,e){t.value=null==e?"":e}function x(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function j(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}}let O,E;function z(){if(void 0===O){O=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){O=!0}}return O}window.plot_api=e;class S{constructor(t=null){this.a=t,this.e=this.n=null}m(t,e,n=null){this.e||(this.e=h(e.nodeName),this.t=e,this.h(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)d(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(f)}}function A(t){E=t}function C(){if(!E)throw new Error("Function called outside component initialization");return E}const q=[],M=[],R=[],B=[],L=Promise.resolve();let N=!1;function T(t){R.push(t)}function P(t){B.push(t)}let D=!1;const H=new Set;function F(){if(!D){D=!0;do{for(let t=0;t<q.length;t+=1){const e=q[t];A(e),U(e.$$)}for(A(null),q.length=0;M.length;)M.pop()();for(let t=0;t<R.length;t+=1){const e=R[t];H.has(e)||(H.add(e),e())}R.length=0}while(q.length);for(;B.length;)B.pop()();N=!1,D=!1,H.clear()}}function U(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(T)}}const I=new Set;let Z;function W(){Z={r:0,c:[],p:Z}}function V(){Z.r||i(Z.c),Z=Z.p}function J(t,e){t&&t.i&&(I.delete(t),t.i(e))}function K(t,e,n,r){if(t&&t.o){if(I.has(t))return;I.add(t),Z.c.push((()=>{I.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function X(t,e){const n=e.token={};function r(t,r,s,o){if(e.token!==n)return;e.resolved=o;let i=e.ctx;void 0!==s&&(i=i.slice(),i[s]=o);const l=t&&(e.current=t)(i);let a=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&(W(),K(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),V())})):e.block.d(1),l.c(),J(l,1),l.m(e.mount(),e.anchor),a=!0),e.block=l,e.blocks&&(e.blocks[r]=l),a&&F()}if((s=t)&&"object"==typeof s&&"function"==typeof s.then){const n=C();if(t.then((t=>{A(n),r(e.then,1,e.value,t),A(null)}),(t=>{if(A(n),r(e.catch,2,e.error,t),A(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var s}function G(t,e,n){const r=e.slice(),{resolved:s}=t;t.current===t.then&&(r[t.value]=s),t.current===t.catch&&(r[t.error]=s),t.block.p(r,n)}function Y(t,e){t.d(1),e.delete(t.key)}function Q(t,e){K(t,1,1,(()=>{e.delete(t.key)}))}function tt(t,e,n,r,s,o,i,l,a,c,u,d){let f=t.length,h=o.length,p=f;const g={};for(;p--;)g[t[p].key]=p;const m=[],w=new Map,b=new Map;for(p=h;p--;){const t=d(s,o,p),l=n(t);let a=i.get(l);a?r&&a.p(t,e):(a=c(l,t),a.c()),w.set(l,m[p]=a),l in g&&b.set(l,Math.abs(p-g[l]))}const $=new Set,y=new Set;function v(t){J(t,1),t.m(l,u),i.set(t.key,t),u=t.first,h--}for(;f&&h;){const e=m[h-1],n=t[f-1],r=e.key,s=n.key;e===n?(u=e.first,f--,h--):w.has(s)?!i.has(r)||$.has(r)?v(e):y.has(s)?f--:b.get(r)>b.get(s)?(y.add(r),v(e)):($.add(s),f--):(a(n,i),f--)}for(;f--;){const e=t[f];w.has(e.key)||a(e,i)}for(;h;)v(m[h-1]);return m}function et(t,e){const n={},r={},s={$$scope:1};let o=t.length;for(;o--;){const i=t[o],l=e[o];if(l){for(const t in i)t in l||(r[t]=1);for(const t in l)s[t]||(n[t]=l[t],s[t]=1);t[o]=l}else for(const t in i)s[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}function nt(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function rt(t){t&&t.c()}function st(t,e,n,r){const{fragment:o,on_mount:a,on_destroy:c,after_update:u}=t.$$;o&&o.m(e,n),r||T((()=>{const e=a.map(s).filter(l);c?c.push(...e):i(e),t.$$.on_mount=[]})),u.forEach(T)}function ot(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function it(t,e){-1===t.$$.dirty[0]&&(q.push(t),N||(N=!0,L.then(F)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function lt(t,e,r,s,l,a,c=[-1]){const u=E;A(t);const d=t.$$={fragment:null,ctx:null,props:a,update:n,not_equal:l,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:e.context||[]),callbacks:o(),dirty:c,skip_bound:!1};let h=!1;if(d.ctx=r?r(t,e.props||{},((e,n,...r)=>{const s=r.length?r[0]:n;return d.ctx&&l(d.ctx[e],d.ctx[e]=s)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](s),h&&it(t,e)),n})):[],d.update(),h=!0,i(d.before_update),d.fragment=!!s&&s(d.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);d.fragment&&d.fragment.l(t),t.forEach(f)}else d.fragment&&d.fragment.c();e.intro&&J(t.$$.fragment),st(t,e.target,e.anchor,e.customElement),F()}A(u)}class at{$destroy(){ot(this,1),this.$destroy=n}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}let ct="Deno"in window?window.Deno:void 0;const ut=null==ct,dt=new Map;function ft(t,e){if(!dt.has(t))try{const e=ut?(window.env||{})[t]:ct.env.get(t);dt.set(t,e)}catch(e){dt.set(t,void 0)}const n=dt.get(t);if(void 0===n){if(void 0!==e)return e;throw new Error(`env var '${t}' is not defined`)}return n}const ht=[];let pt,gt=0,mt=!1;function wt(){mt||(mt=!0,setTimeout((async()=>{for(;gt<ht.length;){let{name:t,test:e}=ht[gt];gt+=1;try{console.log(`  test | ${t}`);let n=e();n&&await n}catch(e){if(console.error(`  test | ${t} failed`),console.error(e),!ut)throw e}}mt=!1}),0))}try{pt=ft("test","").toLowerCase()}catch(t){pt="false"}let bt="all"==pt,$t=bt||"true"==pt;function yt(t,e){t=is_string(t)?t:t.name,ht.push({name:t,test:e}),($t||t.toLowerCase()==pt)&&wt()}function vt(t,e){for(const n in e)Object.defineProperty(t,n,{value:e[n],configurable:!1,writable:!0})}function _t(t){const e=[];let n=0;for(;;){const r=[];n<this.length&&e.push(r);for(let s=0;s<t;s++){if(!(n+s<this.length))return e;r.push(this[n+s])}n+=t}}function kt(){const t=this.replace(/^\s*\n|[\n\s]+$/,""),e=/^(\s+)/.parse(t);return 0==e.length?t:t.split("\n").map((t=>t.startsWith(e[0])?t.replace(e[0],""):t)).join("\n")}function xt(t=0){return 0==t?Math.round(this):Math.round((this+Number.EPSILON)*Math.pow(10,t))/Math.pow(10,t)}function jt(t){const e=t.match(this);return e?1==e.length?[]:e.slice(1,e.length):[]}function Ot(t){const e=t.match(this);return(null==e?void 0:e.groups)||{}}window.run_tests=wt,window.test=yt,window.slow_test=function(t,e){t=is_string(t)?t:t.name,ht.push({name:t,test:e}),(bt||t.toLowerCase()==pt)&&wt()},window.p=function(...t){if(ut)console.log(...t);else{const e=t.map((t=>function(t,e=!1){return ct&&is_object(t)?ct.inspect(t,{colors:e}):t}(t,!0)));t.length,console.log(...e)}},window.discard=function(t){},window.is_number=function(t){return"number"==typeof t&&Number.isFinite(t)},window.is_array=function(t){return Array.isArray(t)},window.is_string=function(t){return"string"==typeof t},window.is_boolean=function(t){return"boolean"==typeof t},window.is_object=function(t){return"object"==typeof t&&null!==t},window.is_function=function(t){return"function"==typeof t},window.is_promise=function(t){return"object"==typeof t&&null!==t&&"function"==typeof t.then},window.is_undefined=function(t){return void 0===t},window.set_timeout=function(t,e){return setTimeout(t,e)},window.clear_timeout=clearTimeout,window.set_interval=function(t,e,n=!1){return n&&t(),setInterval(t,e)},window.clear_timeout=clearTimeout,window.to_json=St,window.from_json=function(t,e){const n=JSON.parse(e);return"from_json_hook"in t?t.from_json_hook(n):n},window.ensure=function(t,e){if(void 0===t)throw new Error(`value${e?" "+e:""} not defined`);if(is_object(t)&&"is_error"in t){if(t.is_error)throw new Error(t.message||`value${e?" "+e:""} not found`);return t.value}return t},window.ensure_error=Ct,window.get_env=ft,window.is_prod=function(){return"prod"==ft("env","dev")},window.is_dev=function(){return"dev"==ft("env","dev")},window.is_test=function(){return"test"==ft("env","dev")},window.sleep=function(t){return new Promise((e=>setTimeout(e,t)))},Object.size=function(t){let e=0;for(let n in t)t.hasOwnProperty(n)&&e++;return e},Object.is_empty=function(t){for(let e in t)if(t.hasOwnProperty(e))return!1;return!0},Object.each=function(t,e){for(const n in t){if(!t.hasOwnProperty(n))continue;e(t[n],n)}},Object.map=function(t,e){const n={};for(const r in t){if(!t.hasOwnProperty(r))continue;const s=t[r];n[r]=e(s,r)}return n},Object.filter=function(t,e){const n={};for(const r in t){if(!t.hasOwnProperty(r))continue;const s=t[r];e(s,r)&&(n[r]=s)}return n},vt(Object.prototype,{is_equal:function(t){return At(this,t)},to_s:function(){return this.toString()},clone:function(){return Object.assign({},this)},to_success:function(){return{is_error:!1,value:this}}}),Array.fill=function(t,e){const n="function"==typeof e?e:()=>e,r=[];for(let e=0;e<t;e++)r.push(n(e));return r},Array.from_columns=function(t){const e=[],n=Object.keys(t);if(0==n.length)return e;const r=t[n[0]].length;for(const e of n)if(t[e].length!=r)throw new Error(`columns ${n[0]} and ${e} have different length`);for(let s=0;s<r;s++){const r={};for(const e of n){const n=t[e][s];null!=n&&(r[e]=n)}e.push(r)}return e},vt(Array.prototype,{add:function(t){this.push(t)},batch:_t,size:function(){return this.length},is_empty:function(){return 0==this.length},clone:function(){return[...this]},has(t){const e=t instanceof Function?t:e=>e==t;for(let t=0;t<this.length;t++){if(e(this[t],t))return!0}return!1},group_by(t){const e=new Hash;for(let n=0;n<this.length;n++){const r=this[n];e.getm(t(r,n),[]).push(r)}return e},i(t){const e=t instanceof Function?t:e=>e==t;for(let t=0;t<this.length;t++)if(e(this[t],t))return t},take:function(t){return this.slice(0,t)},filter_map(t){const e=[];for(let n=0;n<this.length;n++){const r=t(this[n],n);void 0!==r&&e.push(r)}return e},sample(t){return this.shuffle().take(t)},to_columns(t){const e=new Set,n={};for(const t of this)for(const n in t)t.hasOwnProperty(n)&&e.add(n);for(const n of t||[])e.delete(n);for(const t of e)n[t]=[];for(const t of this)for(const r of e)n[r].push(r in t?t[r]:void 0);return n},skip_undefined(){return this.filter_map((t=>t))},find(t){const e=t instanceof Function?t:e=>e==t;for(let t=0;t<this.length;t++){const n=this[t];if(e(n,t))return n}},first(t){const e=this.length;if(void 0===t){if(e<1)throw new Error("can't get first elements from empty list");return this[0]}if(e<t)throw new Error(`can't get first ${t} elements from array of length ${e}`);return this.slice(0,t)},last(t){const e=this.length;if(void 0===t){if(e<1)throw new Error("can't get last elements from empty array");return this[e-1]}if(e<t)throw new Error(`can't get last ${t} elements from array of length ${e}`);return this.slice(e-t,e)},lasti(t){const e=t instanceof Function?t:e=>e==t;for(let t=this.length-1;t>=0;t--)if(e(this[t],t))return t},max(t){return this[t?this.maxi(t):this.maxi()]},min(t){return this[t?this.mini(t):this.mini()]},maxi(t){if(0==this.length)throw new Error("can't find maxi for empty array");if(t){let e=t(this[0]),n=0;for(let r=0;r<this.length;r++){const s=t(this[r]);s>e&&(e=s,n=r)}return n}{let t=this[0],e=0;for(let n=0;n<this.length;n++){const r=this[n];r.compare(t)>0&&(t=r,e=n)}return e}},mini(t){if(0==this.length)throw new Error("can't find mini for empty array");if(t){let e=t(this[0]),n=0;for(let r=0;r<this.length;r++){const s=t(this[r]);s<e&&(e=s,n=r)}return n}{let t=this[0],e=0;for(let n=0;n<this.length;n++){const r=this[n];r.compare(t)<0&&(t=r,e=n)}return e}},median(t=!1){return this.quantile(.5,t)},mean(){let t=0;for(const e of this)t+=e;return t/this.length},quantile(t,e=!1){if(0==this.length)throw new Error("can't calculate quantile on empty array");const n=e?this:[...this].sort(((t,e)=>t-e)),r=(n.length-1)*t,s=Math.floor(r),o=r-s;return void 0!==n[s+1]?n[s]+o*(n[s+1]-n[s]):n[s]},each(t){this.forEach(t)},apply(t){return this.forEach(t),this},partition(t){const e=[],n=[],r=t instanceof Function?t:(e,n)=>t.includes(n);for(let t=0;t<this.length;t++){const s=this[t];r(s,t)?e.push(s):n.push(s)}return[e,n]},rev(){return[...this].reverse()},unique:function(t){const e=new Set,n=t||(t=>t);return this.filter((t=>{const r=n(t);return!e.has(r)&&(e.add(r),!0)}))},shuffle(t){null==t&&(t=()=>Math.random());const e=[...this];for(let n=e.length-1;n>0;n--){const r=Math.floor(t()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e},asc(t){if(t)return qt.call(this,t);return[...this].sort(((t,e)=>t.compare(e)))},sum(){let t=0;for(const e of this)t+=e;return t},to_set(){return new HSet(this)},to_hash(t){const e=new Hash;for(let n=0;n<this.length;n++){const r=this[n];e.set(t(r,n),r)}return e}}),yt(_t,(()=>{assert.equal([1,2,3].batch(2),[[1,2],[3]]),assert.equal([1,2].batch(2),[[1,2]]),assert.equal([1].batch(2),[[1]]),assert.equal([].batch(2),[])})),window.Hash=class t{constructor(e){is_undefined(e)?this.m=new Map:e instanceof Map?this.m=new Map(e):this.m=e instanceof t?new Map(e.m):new Map(Object.entries(e))}map(e){const n=new t;for(const[t,r]of this.m)n.set(t,e(r,t));return n}each(t){for(const[e,n]of this.m)t(n,e)}apply(t){for(const[e,n]of this.m)t(n,e);return this}set(t,e){this.m.set(t,e)}get(t,e){const n=this.m.get(t)||e;if(void 0===n)throw new Error(`key ${t} doesn't exist`);return n}getm(t,e){return this.has(t)||this.set(t,e),this.m.get(t)}size(){return this.m.size}is_empty(){return 0==this.m.size}values(){const t=[];for(const e of this.m.values())t.add(e);return t}keys(){const t=[];for(const e of this.m.keys())t.add(e);return t}filter(e){const n=new t;for(const t of this.m.keys()){const r=this.m.get(t);e(r,t)&&n.set(t,r)}return n}filter_map(e){const n=new t;for(const t of this.m.keys()){const r=e(this.m.get(t),t);void 0!==r&&n.set(t,r)}return n}entries(){const t=[];for(const[e,n]of this.m.entries())t.add([n,e]);return t}del(t){this.m.delete(t)}has(t){return this.m.has(t)}clone(){return new t(this)}to_a(){const t=[];for(const e of this.m)t.push(e);return t}to_json_hook(){const t={};for(const[e,n]of this.m)t[""+e]=n;return t}static from_json_hook(e){return new t(e)}},window.HSet=class t{constructor(e){if(is_undefined(e))this.s=new Set;else if(is_array(e))this.s=new Set(e);else{if(!(e instanceof t))throw"invalid usage";this.s=new Set(e.s)}}map(e){const n=new t;for(const t of this.s)n.add(e(t));return n}each(t){for(const e of this.s)t(e)}add(t){this.s.add(t)}size(){return this.s.size}is_empty(){return 0==this.s.size}to_a(){return Array.from(this.s)}del(t){this.s.delete(t)}has(t){return this.s.has(t)}clone(){return new t(this)}to_json_hook(){return this.to_a()}static from_json_hook(e){return new t(e)}},vt(String.prototype,{size:function(){return this.length},is_empty:function(){return""==this},clone:function(){return""+this},take:function(t){return this.slice(0,t)},to_error:function(){return{is_error:!0,message:this}},downcase:function(){return this.toLowerCase()},upcase:function(){return this.toUpperCase()},trim(){return this.replace(/^[\t\s\n]+|[\t\s\n]+$/g,"")},dedent:kt,last(t){const e=this.length;if(void 0===t){if(e<1)throw new Error("can't get last elements from empty string");return this[e-1]}if(e<t)throw new Error(`can't get last ${t} elements from string of length ${e}`);return this.slice(e-t,e)},ljust(t,e){return this.padEnd(t,e)},rjust(t,e){return this.padStart(t,e)},compare(t){return this.localeCompare(t)},split2(t){const e=this.split(t);if(2!=e.length)throw new Error(`expected to split in two, but found ${e.length} parts`);return e},split3(t){const e=this.split(t);if(3!=e.length)throw new Error(`expected to split in three, but found ${e.length} parts`);return e}}),yt("dedent",(()=>{assert.equal(kt.call("\n  a\n  b\n    c"),"a\nb\n  c")})),vt(Number.prototype,{round:xt,pow(t){return Math.pow(this,t)},div(t){return Math.floor(this/t)},rem(t){return this%t},div_rem(t){return[Math.floor(this/t),this%t]},pluralize(t){return 1==this?t:t+"s"},compare(t){return this-t},abs(){return Math.abs(this)}}),yt("round",(()=>{assert.equal(xt.call(.05860103881518906,2),.06)})),vt(Function.prototype,{to_safe:function(){const t=this;return function(...e){try{return{is_error:!1,value:t(...e)}}catch(t){return{is_error:!0,message:Ct(t).message}}}},debounce:function(t,e=!1){let n,r=this;return(...s)=>{e?(e=!1,r(...s)):(n&&clearTimeout(n),n=setTimeout((()=>r(...s)),t))}},once:function(t){let e,n=!1;return function(){return n||(e=t.apply(this,arguments),n=!0),e}}}),vt(RegExp.prototype,{parse:jt,parse_named:Ot,parse1:function(t){const e=this.parse(t);if(1!=e.length)throw new Error(`expected 1 match but found ${e.length}`);return e[0]},parse2:function(t){const e=this.parse(t);if(2!=e.length)throw new Error(`expected 2 matches but found ${e.length}`);return[e[0],e[1]]},parse3:function(t){const e=this.parse(t);if(3!=e.length)throw new Error(`expected 3 matches but found ${e.length}`);return[e[0],e[1],e[2]]}}),yt("parse",(()=>{assert.equal(jt.call(/.+ (\d+) (\d+)/,"a 22 45"),["22","45"]),assert.equal(jt.call(/[^;]+;/,"drop table; create table;"),[])})),yt("parseNamed",(()=>{assert.equal(Ot.call(/.+ (?<a>\d+) (?<b>\d+)/,"a 22 45"),{a:"22",b:"45"})}));const Et=function(t,e){const n=e?e instanceof Function?e():e:"Assertion error!";if(!t)throw new Error(n)};function zt(t){return is_array(t)?t.map(zt):is_object(t)?"to_json_hook"in t?t.to_json_hook():Object.assign({},...Object.entries(t).sort((([t],[e])=>t.localeCompare(e))).map((([t,e])=>({[t]:zt(e)})))):t}function St(t,e=!0){return e?JSON.stringify(zt(t),null,2):JSON.stringify(zt(t))}function At(t,e){return St(t)===St(e)}function Ct(t,e="Unknown error"){return is_object(t)&&t instanceof Error?(t.message||(t.message=e),t):new Error(""+(t||e))}function qt(t){if(0==this.length)return this;{const e=t,n=typeof t(this[0]);let r,s;if("number"==n)r=function(t,n){return e(t)-e(n)};else if("boolean"==n)r=function(t,n){return(e(t)?1:0)-(e(n)?1:0)};else{if("string"!=n)throw new Error(`invalid return type for 'by' '${n}'`);r=function(t,n){return e(t).localeCompare(e(n))}}return s=[...this],s.sort(r),s}}function Mt(t){let e,n;return{c(){e=h("pre"),n=g(t[1]),y(e,"class","text-xs text-gray-600 mt-4")},m(t,r){d(t,e,r),u(e,n)},p(t,e){2&e&&_(n,t[1])},d(t){t&&f(e)}}}function Rt(t){let e,r,s,o,i,l=t[1].length>0&&Mt(t);return{c(){e=h("div"),r=h("span"),r.textContent="Error",s=g(" -\n  "),o=g(t[0]),i=m(),l&&l.c(),y(r,"class","text-red-600 font-bold"),y(e,"class","Fail")},m(t,n){d(t,e,n),u(e,r),u(e,s),u(e,o),u(e,i),l&&l.m(e,null)},p(t,[n]){1&n&&_(o,t[0]),t[1].length>0?l?l.p(t,n):(l=Mt(t),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:n,o:n,d(t){t&&f(e),l&&l.d()}}}function Bt(t,e,n){let r,s,{error:o}=e;return t.$$set=t=>{"error"in t&&n(2,o=t.error)},t.$$.update=()=>{4&t.$$.dirty&&n(0,r=ensure_error(o).message),4&t.$$.dirty&&n(1,s=(o&&o instanceof Error?o.stack:"")||"")},[r,s,o]}Et.equal=(t,e,n)=>{if(!At(t,e)){const r=n?n instanceof Function?n():n:`Assertion error: ${St(t,!0)} != ${St(e,!0)}`;throw new Error(r)}},Et.fail=(t,e)=>{let n=!1;try{t()}catch(t){n=!0}if(!n){const t=e?e instanceof Function?e():e:"Assertion error: expected to fail but didn't";throw new Error(t)}},Et.aequal=(t,e,n,r)=>{r=r||.001;const s=(Math.abs(t)+Math.abs(e))/2*r;if(Math.abs(t-e)>s){const r=n?n instanceof Function?n():n:`Assertion error: ${St(t,!0)} != ${St(e,!0)}`;throw new Error(r)}},window.assert=Et,yt("sort_by",(()=>{assert.equal([{v:!0},{v:!1}].asc((({v:t})=>t)),[{v:!1},{v:!0}]),assert.equal([{v:"b"},{v:""},{v:"c"}].asc((({v:t})=>t)),[{v:""},{v:"b"},{v:"c"}])}));class Lt extends at{constructor(t){super(),lt(this,t,Bt,Rt,a,{error:2})}}function Nt(t){let e,r;return{c(){e=h("div"),r=g(t[0]),y(e,"class","animate-pulse text-gray-500")},m(t,n){d(t,e,n),u(e,r)},p(t,[e]){1&e&&_(r,t[0])},i:n,o:n,d(t){t&&f(e)}}}function Tt(t,e,n){let{text:r="Processing..."}=e;return discard(r),t.$$set=t=>{"text"in t&&n(0,r=t.text)},[r]}class Pt extends at{constructor(t){super(),lt(this,t,Tt,Nt,a,{text:0})}}class Dt{constructor(t){this.v=t}get(){return this.v}set(t){this.v=t}}function Ht(t){const e=/\.([a-z0-9]+)$/i.parse(t);return e.length>0?e[0]:void 0}function Ft(t){return/\//.test(t)?get_env("base_url")+t:t}async function Ut(t,e){if("parallel"==e){const e=t.map(Zt);for(const t of e)await t}else for(const e of t)await Zt(e)}const It={};async function Zt(t){if(!(t in It)){const e=Ft(t);if(t.endsWith(".js"))It[t]=function(t){return new Promise(((e,n)=>{const r=document.createElement("script");r.src=t,r.onerror=()=>{r.remove(),n(new Error(`Cannot load ${t}`))},r.onload=()=>{r.remove(),e()},document.body.append(r)}))}(e);else{if(!t.endsWith(".css"))throw new Error(`should be script or style url '${t}'`);It[t]=function(t){return new Promise(((e,n)=>{const r=document.createElement("link");r.rel="stylesheet",r.onerror=()=>{r.remove(),n(new Error(`Cannot load ${t}`))},r.onload=()=>{e()},r.href=t,document.head.appendChild(r)}))}(e)}}return It[t]}const Wt={};async function Vt(t){if(!(t in Wt)){Wt[t]=async function(){let e=await fetch(function(t,e={}){const n=[];for(const t in e){const r=e[t];null!=t&&null!=r&&n.push(`${encodeURIComponent(t)}=${encodeURIComponent(""+e[t])}`)}return n.length>0?`${t}${t.includes("?")?"&":"?"}${n.join("&")}`:t}(t,{clearcache:Math.random()}));if(404==e.status)throw new Error(`File '${t}' not found`);if(200!=e.status)throw new Error(`Can't load '${t}', response code ${e.status}`);return Kt(await e.text(),Ht(t),t)}()}return Wt[t]}async function Jt(t){if(void 0===t)throw new Error("nether data nor data url provided");return"object"==typeof t&&"url"in t?await Vt(t.url):t}async function Kt(e,n,r){if(n){const s=t.parsers[n];if(s)try{return await s(e)}catch(t){throw new Error(`can't parse '${r||n}', ${ensure_error(t).message}`)}}return e}async function Xt(t){const e=(await Yt()).load(t);if(null==e)throw new Error("YAML data is empty");return e}async function Gt(t){return(await Yt()).dump(t,{skipInvalid:!0,noRefs:!0})}async function Yt(){await Ut(["/vendor/js-yaml-4.1.0/js-yaml.min.js"],"serial");const t=window.jsyaml;if(!t)throw new Error("can't load 'js-yaml' library");return t}t.parsers.yml=Xt,t.parsers.yaml=Xt,t.parsers.json=async t=>JSON.parse(t),t.parsers.csv=async function(t){const{errors:e,data:n,meta:{fields:r}}=(await async function(){await Ut(["/vendor/papaparse-5.0.2/papaparse.min.js"],"serial");const t=window.Papa;if(!t)throw new Error("can't load 'papaparse' library");return t}()).parse(t,{header:!0,dynamicTyping:!0});if(e.lenght>0)throw new Error(ensure_error(e[0]).message);return{type:"csv_table",columns:r,rows:n}};const Qt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};test("escapeHtml",(()=>{var t;assert.equal(null==(t="<div>")?"":(""+t).replace(/[&<>'"]/g,(function(t){return Qt[t]})),"&lt;div&gt;")}));var te="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ee(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})})),e}function ne(t){var e={exports:{}};return t(e,e.exports),e.exports}var re=ne((function(t){function e(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}}t.exports={defaults:{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1},getDefaults:e,changeDefaults:function(e){t.exports.defaults=e}}}));const se=/[&<>"']/,oe=/[&<>"']/g,ie=/[<>"']|&(?!#?\w+;)/,le=/[<>"']|&(?!#?\w+;)/g,ae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ce=t=>ae[t];const ue=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function de(t){return t.replace(ue,((t,e)=>"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""))}const fe=/(^|[^\[])\^/g;const he=/[^\w:]/g,pe=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;const ge={},me=/^[^:]+:\/*[^/]*$/,we=/^([^:]+:)[\s\S]*$/,be=/^([^:]+:\/*[^/]*)[\s\S]*$/;function $e(t,e){ge[" "+t]||(me.test(t)?ge[" "+t]=t+"/":ge[" "+t]=ye(t,"/",!0));const n=-1===(t=ge[" "+t]).indexOf(":");return"//"===e.substring(0,2)?n?e:t.replace(we,"$1")+e:"/"===e.charAt(0)?n?e:t.replace(be,"$1")+e:t+e}function ye(t,e,n){const r=t.length;if(0===r)return"";let s=0;for(;s<r;){const o=t.charAt(r-s-1);if(o!==e||n){if(o===e||!n)break;s++}else s++}return t.substr(0,r-s)}var ve={escape:function(t,e){if(e){if(se.test(t))return t.replace(oe,ce)}else if(ie.test(t))return t.replace(le,ce);return t},unescape:de,edit:function(t,e){t=t.source||t,e=e||"";const n={replace:(e,r)=>(r=(r=r.source||r).replace(fe,"$1"),t=t.replace(e,r),n),getRegex:()=>new RegExp(t,e)};return n},cleanUrl:function(t,e,n){if(t){let t;try{t=decodeURIComponent(de(n)).replace(he,"").toLowerCase()}catch(t){return null}if(0===t.indexOf("javascript:")||0===t.indexOf("vbscript:")||0===t.indexOf("data:"))return null}e&&!pe.test(n)&&(n=$e(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(t){return null}return n},resolveUrl:$e,noopTest:{exec:function(){}},merge:function(t){let e,n,r=1;for(;r<arguments.length;r++)for(n in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},splitCells:function(t,e){const n=t.replace(/\|/g,((t,e,n)=>{let r=!1,s=e;for(;--s>=0&&"\\"===n[s];)r=!r;return r?"|":" |"})).split(/ \|/);let r=0;if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n},rtrim:ye,findClosingBracket:function(t,e){if(-1===t.indexOf(e[1]))return-1;const n=t.length;let r=0,s=0;for(;s<n;s++)if("\\"===t[s])s++;else if(t[s]===e[0])r++;else if(t[s]===e[1]&&(r--,r<0))return s;return-1},checkSanitizeDeprecation:function(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}};const{noopTest:_e,edit:ke,merge:xe}=ve,je={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:_e,table:_e,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};je.def=ke(je.def).replace("label",je._label).replace("title",je._title).getRegex(),je.bullet=/(?:[*+-]|\d{1,9}\.)/,je.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,je.item=ke(je.item,"gm").replace(/bull/g,je.bullet).getRegex(),je.list=ke(je.list).replace(/bull/g,je.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+je.def.source+")").getRegex(),je._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",je._comment=/<!--(?!-?>)[\s\S]*?-->/,je.html=ke(je.html,"i").replace("comment",je._comment).replace("tag",je._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),je.paragraph=ke(je._paragraph).replace("hr",je.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",je._tag).getRegex(),je.blockquote=ke(je.blockquote).replace("paragraph",je.paragraph).getRegex(),je.normal=xe({},je),je.gfm=xe({},je.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),je.gfm.nptable=ke(je.gfm.nptable).replace("hr",je.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",je._tag).getRegex(),je.gfm.table=ke(je.gfm.table).replace("hr",je.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",je._tag).getRegex(),je.pedantic=xe({},je.normal,{html:ke("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",je._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:_e,paragraph:ke(je.normal._paragraph).replace("hr",je.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",je.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const Oe={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:_e,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:_e,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/,_punctuation:"!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~"};Oe.em=ke(Oe.em).replace(/punctuation/g,Oe._punctuation).getRegex(),Oe._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,Oe._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,Oe._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,Oe.autolink=ke(Oe.autolink).replace("scheme",Oe._scheme).replace("email",Oe._email).getRegex(),Oe._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,Oe.tag=ke(Oe.tag).replace("comment",je._comment).replace("attribute",Oe._attribute).getRegex(),Oe._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Oe._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,Oe._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,Oe.link=ke(Oe.link).replace("label",Oe._label).replace("href",Oe._href).replace("title",Oe._title).getRegex(),Oe.reflink=ke(Oe.reflink).replace("label",Oe._label).getRegex(),Oe.normal=xe({},Oe),Oe.pedantic=xe({},Oe.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:ke(/^!?\[(label)\]\((.*?)\)/).replace("label",Oe._label).getRegex(),reflink:ke(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Oe._label).getRegex()}),Oe.gfm=xe({},Oe.normal,{escape:ke(Oe.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),Oe.gfm.url=ke(Oe.gfm.url,"i").replace("email",Oe.gfm._extended_email).getRegex(),Oe.breaks=xe({},Oe.gfm,{br:ke(Oe.br).replace("{2,}","*").getRegex(),text:ke(Oe.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var Ee={block:je,inline:Oe};const{defaults:ze}=re,{block:Se}=Ee,{rtrim:Ae,splitCells:Ce,escape:qe}=ve;var Me=class t{constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||ze,this.rules=Se.normal,this.options.pedantic?this.rules=Se.pedantic:this.options.gfm&&(this.rules=Se.gfm)}static get rules(){return Se}static lex(e,n){return new t(n).lex(e)}lex(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.token(t,!0)}token(t,e){let n,r,s,o,i,l,a,c,u,d,f,h,p,g,m,w;for(t=t.replace(/^ +$/gm,"");t;)if((s=this.rules.newline.exec(t))&&(t=t.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"})),s=this.rules.code.exec(t)){const e=this.tokens[this.tokens.length-1];t=t.substring(s[0].length),e&&"paragraph"===e.type?e.text+="\n"+s[0].trimRight():(s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?s:Ae(s,"\n")}))}else if(s=this.rules.fences.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"code",lang:s[2]?s[2].trim():s[2],text:s[3]||""});else if(s=this.rules.heading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});else if((s=this.rules.nptable.exec(t))&&(l={type:"table",header:Ce(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/\n$/,"").split("\n"):[]},l.header.length===l.align.length)){for(t=t.substring(s[0].length),f=0;f<l.align.length;f++)/^ *-+: *$/.test(l.align[f])?l.align[f]="right":/^ *:-+: *$/.test(l.align[f])?l.align[f]="center":/^ *:-+ *$/.test(l.align[f])?l.align[f]="left":l.align[f]=null;for(f=0;f<l.cells.length;f++)l.cells[f]=Ce(l.cells[f],l.header.length);this.tokens.push(l)}else if(s=this.rules.hr.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"hr"});else if(s=this.rules.blockquote.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,e),this.tokens.push({type:"blockquote_end"});else if(s=this.rules.list.exec(t)){for(t=t.substring(s[0].length),o=s[2],g=o.length>1,a={type:"list_start",ordered:g,start:g?+o:"",loose:!1},this.tokens.push(a),s=s[0].match(this.rules.item),c=[],n=!1,p=s.length,f=0;f<p;f++)l=s[f],d=l.length,l=l.replace(/^ *([*+-]|\d+\.) */,""),~l.indexOf("\n ")&&(d-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+d+"}","gm"),"")),f!==p-1&&(i=Se.bullet.exec(s[f+1])[0],(o.length>1?1===i.length:i.length>1||this.options.smartLists&&i!==o)&&(t=s.slice(f+1).join("\n")+t,f=p-1)),r=n||/\n\n(?!\s*$)/.test(l),f!==p-1&&(n="\n"===l.charAt(l.length-1),r||(r=n)),r&&(a.loose=!0),m=/^\[[ xX]\] /.test(l),w=void 0,m&&(w=" "!==l[1],l=l.replace(/^\[[ xX]\] +/,"")),u={type:"list_item_start",task:m,checked:w,loose:r},c.push(u),this.tokens.push(u),this.token(l,!1),this.tokens.push({type:"list_item_end"});if(a.loose)for(p=c.length,f=0;f<p;f++)c[f].loose=!0;this.tokens.push({type:"list_end"})}else if(s=this.rules.html.exec(t))t=t.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===s[1]||"script"===s[1]||"style"===s[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):qe(s[0]):s[0]});else if(e&&(s=this.rules.def.exec(t)))t=t.substring(s[0].length),s[3]&&(s[3]=s[3].substring(1,s[3].length-1)),h=s[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[h]||(this.tokens.links[h]={href:s[2],title:s[3]});else if((s=this.rules.table.exec(t))&&(l={type:"table",header:Ce(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/\n$/,"").split("\n"):[]},l.header.length===l.align.length)){for(t=t.substring(s[0].length),f=0;f<l.align.length;f++)/^ *-+: *$/.test(l.align[f])?l.align[f]="right":/^ *:-+: *$/.test(l.align[f])?l.align[f]="center":/^ *:-+ *$/.test(l.align[f])?l.align[f]="left":l.align[f]=null;for(f=0;f<l.cells.length;f++)l.cells[f]=Ce(l.cells[f].replace(/^ *\| *| *\| *$/g,""),l.header.length);this.tokens.push(l)}else if(s=this.rules.lheading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:"="===s[2].charAt(0)?1:2,text:s[1]});else if(e&&(s=this.rules.paragraph.exec(t)))t=t.substring(s[0].length),this.tokens.push({type:"paragraph",text:"\n"===s[1].charAt(s[1].length-1)?s[1].slice(0,-1):s[1]});else if(s=this.rules.text.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens}};const{defaults:Re}=re,{cleanUrl:Be,escape:Le}=ve;var Ne=class{constructor(t){this.options=t||Re}code(t,e,n){const r=(e||"").match(/\S*/)[0];if(this.options.highlight){const e=this.options.highlight(t,r);null!=e&&e!==t&&(n=!0,t=e)}return r?'<pre><code class="'+this.options.langPrefix+Le(r,!0)+'">'+(n?t:Le(t,!0))+"</code></pre>\n":"<pre><code>"+(n?t:Le(t,!0))+"</code></pre>"}blockquote(t){return"<blockquote>\n"+t+"</blockquote>\n"}html(t){return t}heading(t,e,n,r){return this.options.headerIds?"<h"+e+' id="'+this.options.headerPrefix+r.slug(n)+'">'+t+"</h"+e+">\n":"<h"+e+">"+t+"</h"+e+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(t,e,n){const r=e?"ol":"ul";return"<"+r+(e&&1!==n?' start="'+n+'"':"")+">\n"+t+"</"+r+">\n"}listitem(t){return"<li>"+t+"</li>\n"}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return"<p>"+t+"</p>\n"}table(t,e){return e&&(e="<tbody>"+e+"</tbody>"),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"}tablerow(t){return"<tr>\n"+t+"</tr>\n"}tablecell(t,e){const n=e.header?"th":"td";return(e.align?"<"+n+' align="'+e.align+'">':"<"+n+">")+t+"</"+n+">\n"}strong(t){return"<strong>"+t+"</strong>"}em(t){return"<em>"+t+"</em>"}codespan(t){return"<code>"+t+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return"<del>"+t+"</del>"}link(t,e,n){if(null===(t=Be(this.options.sanitize,this.options.baseUrl,t)))return n;let r='<a href="'+Le(t)+'"';return e&&(r+=' title="'+e+'"'),r+=">"+n+"</a>",r}image(t,e,n){if(null===(t=Be(this.options.sanitize,this.options.baseUrl,t)))return n;let r='<img src="'+t+'" alt="'+n+'"';return e&&(r+=' title="'+e+'"'),r+=this.options.xhtml?"/>":">",r}text(t){return t}},Te=class{constructor(){this.seen={}}slug(t){let e=t.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(e)){const t=e;do{this.seen[t]++,e=t+"-"+this.seen[t]}while(this.seen.hasOwnProperty(e))}return this.seen[e]=0,e}};const{defaults:Pe}=re,{inline:De}=Ee,{findClosingBracket:He,escape:Fe}=ve;var Ue=class t{constructor(t,e){if(this.options=e||Pe,this.links=t,this.rules=De.normal,this.options.renderer=this.options.renderer||new Ne,this.renderer=this.options.renderer,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=De.pedantic:this.options.gfm&&(this.options.breaks?this.rules=De.breaks:this.rules=De.gfm)}static get rules(){return De}static output(e,n,r){return new t(n,r).output(e)}output(e){let n,r,s,o,i,l,a="";for(;e;)if(i=this.rules.escape.exec(e))e=e.substring(i[0].length),a+=Fe(i[1]);else if(i=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(i[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(i[0])&&(this.inRawBlock=!1),e=e.substring(i[0].length),a+=this.renderer.html(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):Fe(i[0]):i[0]);else if(i=this.rules.link.exec(e)){const r=He(i[2],"()");if(r>-1){const t=(0===i[0].indexOf("!")?5:4)+i[1].length+r;i[2]=i[2].substring(0,r),i[0]=i[0].substring(0,t).trim(),i[3]=""}e=e.substring(i[0].length),this.inLink=!0,s=i[2],this.options.pedantic?(n=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s),n?(s=n[1],o=n[3]):o=""):o=i[3]?i[3].slice(1,-1):"",s=s.trim().replace(/^<([\s\S]*)>$/,"$1"),a+=this.outputLink(i,{href:t.escapes(s),title:t.escapes(o)}),this.inLink=!1}else if((i=this.rules.reflink.exec(e))||(i=this.rules.nolink.exec(e))){if(e=e.substring(i[0].length),n=(i[2]||i[1]).replace(/\s+/g," "),n=this.links[n.toLowerCase()],!n||!n.href){a+=i[0].charAt(0),e=i[0].substring(1)+e;continue}this.inLink=!0,a+=this.outputLink(i,n),this.inLink=!1}else if(i=this.rules.strong.exec(e))e=e.substring(i[0].length),a+=this.renderer.strong(this.output(i[4]||i[3]||i[2]||i[1]));else if(i=this.rules.em.exec(e))e=e.substring(i[0].length),a+=this.renderer.em(this.output(i[6]||i[5]||i[4]||i[3]||i[2]||i[1]));else if(i=this.rules.code.exec(e))e=e.substring(i[0].length),a+=this.renderer.codespan(Fe(i[2].trim(),!0));else if(i=this.rules.br.exec(e))e=e.substring(i[0].length),a+=this.renderer.br();else if(i=this.rules.del.exec(e))e=e.substring(i[0].length),a+=this.renderer.del(this.output(i[1]));else if(i=this.rules.autolink.exec(e))e=e.substring(i[0].length),"@"===i[2]?(r=Fe(this.mangle(i[1])),s="mailto:"+r):(r=Fe(i[1]),s=r),a+=this.renderer.link(s,null,r);else if(this.inLink||!(i=this.rules.url.exec(e))){if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.inRawBlock?a+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):Fe(i[0]):i[0]):a+=this.renderer.text(Fe(this.smartypants(i[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else{if("@"===i[2])r=Fe(i[0]),s="mailto:"+r;else{do{l=i[0],i[0]=this.rules._backpedal.exec(i[0])[0]}while(l!==i[0]);r=Fe(i[0]),s="www."===i[1]?"http://"+r:r}e=e.substring(i[0].length),a+=this.renderer.link(s,null,r)}return a}static escapes(e){return e?e.replace(t.rules._escapes,"$1"):e}outputLink(t,e){const n=e.href,r=e.title?Fe(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(n,r,this.output(t[1])):this.renderer.image(n,r,Fe(t[1]))}smartypants(t){return this.options.smartypants?t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):t}mangle(t){if(!this.options.mangle)return t;const e=t.length;let n,r="",s=0;for(;s<e;s++)n=t.charCodeAt(s),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}},Ie=class{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,e,n){return""+n}image(t,e,n){return""+n}br(){return""}};const{defaults:Ze}=re,{merge:We,unescape:Ve}=ve;var Je=class t{constructor(t){this.tokens=[],this.token=null,this.options=t||Ze,this.options.renderer=this.options.renderer||new Ne,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new Te}static parse(e,n){return new t(n).parse(e)}parse(t){this.inline=new Ue(t.links,this.options),this.inlineText=new Ue(t.links,We({},this.options,{renderer:new Ie})),this.tokens=t.reverse();let e="";for(;this.next();)e+=this.tok();return e}next(){return this.token=this.tokens.pop(),this.token}peek(){return this.tokens[this.tokens.length-1]||0}parseText(){let t=this.token.text;for(;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)}tok(){let t="";switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,Ve(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":{let e,n,r,s,o="";for(r="",e=0;e<this.token.header.length;e++)r+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(o+=this.renderer.tablerow(r),e=0;e<this.token.cells.length;e++){for(n=this.token.cells[e],r="",s=0;s<n.length;s++)r+=this.renderer.tablecell(this.inline.output(n[s]),{header:!1,align:this.token.align[s]});t+=this.renderer.tablerow(r)}return this.renderer.table(o,t)}case"blockquote_start":for(t="";"blockquote_end"!==this.next().type;)t+=this.tok();return this.renderer.blockquote(t);case"list_start":{t="";const e=this.token.ordered,n=this.token.start;for(;"list_end"!==this.next().type;)t+=this.tok();return this.renderer.list(t,e,n)}case"list_item_start":{t="";const e=this.token.loose,n=this.token.checked,r=this.token.task;if(this.token.task)if(e)if("text"===this.peek().type){const t=this.peek();t.text=this.renderer.checkbox(n)+" "+t.text}else this.tokens.push({type:"text",text:this.renderer.checkbox(n)});else t+=this.renderer.checkbox(n);for(;"list_item_end"!==this.next().type;)t+=e||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(t,r,n)}case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:{const t='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(t);console.log(t)}}}};const{merge:Ke,checkSanitizeDeprecation:Xe,escape:Ge}=ve,{getDefaults:Ye,changeDefaults:Qe,defaults:tn}=re;function en(t,e,n){if(null==t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(n||"function"==typeof e){n||(n=e,e=null),e=Ke({},en.defaults,e||{}),Xe(e);const r=e.highlight;let s,o,i=0;try{s=Me.lex(t,e)}catch(t){return n(t)}o=s.length;const l=function(t){if(t)return e.highlight=r,n(t);let o;try{o=Je.parse(s,e)}catch(e){t=e}return e.highlight=r,t?n(t):n(null,o)};if(!r||r.length<3)return l();if(delete e.highlight,!o)return l();for(;i<s.length;i++)!function(t){"code"!==t.type?--o||l():r(t.text,t.lang,(function(e,n){return e?l(e):null==n||n===t.text?--o||l():(t.text=n,t.escaped=!0,void(--o||l()))}))}(s[i])}else try{return e=Ke({},en.defaults,e||{}),Xe(e),Je.parse(Me.lex(t,e),e)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",(e||en.defaults).silent)return"<p>An error occurred:</p><pre>"+Ge(t.message+"",!0)+"</pre>";throw t}}en.options=en.setOptions=function(t){return Ke(en.defaults,t),Qe(en.defaults),en},en.getDefaults=Ye,en.defaults=tn,en.Parser=Je,en.parser=Je.parse,en.Renderer=Ne,en.TextRenderer=Ie,en.Lexer=Me,en.lexer=Me.lex,en.InlineLexer=Ue,en.inlineLexer=Ue.output,en.Slugger=Te,en.parse=en;var nn=en;let rn=!1;async function sn(t){await sleep(0);const e=new nn.Renderer;let n=0;const r=()=>`__special_katext_id_${n++}__`,s={};function o(t){return t.replace("&gt;",">").replace("&lt;",">").replace("&quot;","'")}function i(t){return t=(t=t.replace(/\$\$([\s\S]+?)\$\$/g,((t,e)=>{const n=r();return s[n]={type:"block",expression:o(e)},n}))).replace(/\$([^\n\s]+?)\$/g,((t,e)=>{const n=r();return s[n]={type:"inline",expression:o(e)},n}))}const l=e.listitem;e.listitem=function(t,e,n){return l(i(t),e,n)};const a=e.paragraph;e.paragraph=function(t){return a(i(t))};const c=e.tablecell;function u(t){nn.setOptions({renderer:e,highlight:t,pedantic:!1,gfm:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!0})}let d;if(e.tablecell=function(t,e){return c(i(t),e)},rn){const e=window.hljs;if(!e)throw new Error("can't load 'highlightjs' library for markdown");u(((t,n)=>{try{return n?e.highlight(t,{language:n}).value:t}catch(e){return t}})),d=nn(t.dedent())}else{let e=!1;if(u(((t,n)=>(n&&(e=!0),t))),d=nn(t.dedent()),e)return await Ut(["/vendor/highlight.js-11.0.1/default.min.css","/vendor/highlight.js-11.0.1/highlight.min.js"],"parallel"),rn=!0,sn(t)}return d.includes("__special_katext_id_")&&(await Ut(["/vendor/katex-0.11.1/katex.min.js"],"parallel"),Ut(["/vendor/katex-0.11.1/katex.css"],"parallel").catch((t=>console.warn(`can't load styles for KaTeX, ${ensure_error(t).message}`))),d=d.replace(/(__special_katext_id_\d+__)/g,((t,e)=>{let{type:n,expression:r}=s[e];return r=r.replace(/<br\/>/g,"\\\\"),window.katex.renderToString(r,{output:"html",displayMode:"block"==n,throwOnError:!1})}))),d}function on(t){let e,r,s=t[0].html+"";return{c(){r=w(),e=new S(r)},m(t,n){e.m(s,t,n),d(t,r,n)},p(t,n){1&n&&s!==(s=t[0].html+"")&&e.p(s)},i:n,o:n,d(t){t&&f(r),t&&e.d()}}}function ln(t){let e,n;return e=new Lt({props:{error:t[0].error}}),{c(){rt(e.$$.fragment)},m(t,r){st(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.error=t[0].error),e.$set(r)},i(t){n||(J(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){ot(e,t)}}}function an(t){let e,r;return e=new Pt({}),{c(){rt(e.$$.fragment)},m(t,n){st(e,t,n),r=!0},p:n,i(t){r||(J(e.$$.fragment,t),r=!0)},o(t){K(e.$$.fragment,t),r=!1},d(t){ot(e,t)}}}function cn(t){let e,n,r,s;const o=[an,ln,on],i=[];function l(t,e){return"empty"==t[0].state?0:"error"==t[0].state?1:2}return n=l(t),r=i[n]=o[n](t),{c(){e=h("div"),r.c(),y(e,"class","markdown")},m(t,r){d(t,e,r),i[n].m(e,null),s=!0},p(t,[s]){let a=n;n=l(t),n===a?i[n].p(t,s):(W(),K(i[a],1,1,(()=>{i[a]=null})),V(),r=i[n],r?r.p(t,s):(r=i[n]=o[n](t),r.c()),J(r,1),r.m(e,null))},i(t){s||(J(r),s=!0)},o(t){K(r),s=!1},d(t){t&&f(e),i[n].d()}}}function un(t,e,n){let{markdown:r}=e,s={state:"empty"};return t.$$set=t=>{"markdown"in t&&n(1,r=t.markdown)},t.$$.update=()=>{if(3&t.$$.dirty&&("empty"==s.state||s.markdown!=r)){const t=r;sn(r).then((e=>{n(0,s={state:"success",markdown:t,html:e})})).catch((e=>{const r=ensure_error(e,"Unknown error while processing markdown").message;n(0,s={state:"error",markdown:t,error:r})}))}},[s,r]}class dn extends at{constructor(t){super(),lt(this,t,un,cn,a,{markdown:1})}}function fn(t){let e,n,r,s,o,i,l;return{c(){e=h("a"),n=p("svg"),r=p("text"),s=g("PL0T"),o=p("text"),i=g("PL0T"),y(r,"class","svg_stroke svelte-x784r0"),y(r,"x","15"),y(r,"y","75"),y(o,"class","svgText"),y(o,"x","15"),y(o,"y","75"),y(n,"viewBox","0 0 200 100"),y(n,"class","svelte-x784r0"),y(e,"class",l=c(t[0]?"main":"")+" svelte-x784r0"),y(e,"href","http://pl0t.com"),y(e,"target","_blank")},m(t,l){d(t,e,l),u(e,n),u(n,r),u(r,s),u(n,o),u(o,i)},p(t,n){1&n&&l!==(l=c(t[0]?"main":"")+" svelte-x784r0")&&y(e,"class",l)},d(t){t&&f(e)}}}function hn(t){let e,r=t[1]&&fn(t);return{c(){r&&r.c(),e=w()},m(t,n){r&&r.m(t,n),d(t,e,n)},p(t,[n]){t[1]?r?r.p(t,n):(r=fn(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:n,o:n,d(t){r&&r.d(t),t&&f(e)}}}let pn=!0;function gn(t,e,n){let{is_main:r=!1}=e;r&&(pn=!1);let s=!1;return set_interval((()=>{n(1,s=pn||r)}),1e3),t.$$set=t=>{"is_main"in t&&n(0,r=t.is_main)},[r,s]}class mn extends at{constructor(t){super(),lt(this,t,gn,hn,a,{is_main:0})}}function wn(t,e,n){const r=t.slice();return r[1]=e[n],r}function bn(t){let e,n=t[0],r=[];for(let e=0;e<n.length;e+=1)r[e]=_n(wn(t,n,e));return{c(){e=h("div");for(let t=0;t<r.length;t+=1)r[t].c();y(e,"class","text-sm mt-1 mx-1")},m(t,n){d(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,s){if(1&s){let o;for(n=t[0],o=0;o<n.length;o+=1){const i=wn(t,n,o);r[o]?r[o].p(i,s):(r[o]=_n(i),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&f(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(r,t)}}}function $n(t){let e;return{c(){e=h("div"),e.textContent="unknown message type"},m(t,n){d(t,e,n)},p:n,d(t){t&&f(e)}}}function yn(t){let e,n,r,s,o=t[1].message+"";return{c(){e=h("div"),n=h("span"),n.textContent="error",r=m(),s=g(o),y(n,"class","bg-red-400 px-2 rounded")},m(t,o){d(t,e,o),u(e,n),u(e,r),u(e,s)},p(t,e){1&e&&o!==(o=t[1].message+"")&&_(s,o)},d(t){t&&f(e)}}}function vn(t){let e,n,r,s,o=t[1].message+"";return{c(){e=h("div"),n=h("span"),n.textContent="warn",r=m(),s=g(o),y(n,"class","bg-yellow-400 px-2 rounded")},m(t,o){d(t,e,o),u(e,n),u(e,r),u(e,s)},p(t,e){1&e&&o!==(o=t[1].message+"")&&_(s,o)},d(t){t&&f(e)}}}function _n(t){let e;function n(t,e){return"warn"==t[1].type?vn:"error"==t[1].type?yn:$n}let r=n(t),s=r(t);return{c(){s.c(),e=w()},m(t,n){s.m(t,n),d(t,e,n)},p(t,o){r===(r=n(t))&&s?s.p(t,o):(s.d(1),s=r(t),s&&(s.c(),s.m(e.parentNode,e)))},d(t){s.d(t),t&&f(e)}}}function kn(t){let e,r=t[0].length>0&&bn(t);return{c(){r&&r.c(),e=w()},m(t,n){r&&r.m(t,n),d(t,e,n)},p(t,[n]){t[0].length>0?r?r.p(t,n):(r=bn(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:n,o:n,d(t){r&&r.d(t),t&&f(e)}}}function xn(t,e,n){let{messages:r}=e;return t.$$set=t=>{"messages"in t&&n(0,r=t.messages)},[r]}class jn extends at{constructor(t){super(),lt(this,t,xn,kn,a,{messages:0})}}function On(t){return t.map((t=>"string"==typeof t?{type:"warn",message:t}:t)).unique((({message:t})=>t)).asc((({type:t,message:e})=>`${t} ${e}`))}function En(t){let e,r;return e=new Lt({props:{error:"Invalid image format"}}),{c(){rt(e.$$.fragment)},m(t,n){st(e,t,n),r=!0},p:n,i(t){r||(J(e.$$.fragment,t),r=!0)},o(t){K(e.$$.fragment,t),r=!1},d(t){ot(e,t)}}}function zn(t){let e,r,s;return{c(){e=h("img"),e.src!==(r="data:image/png;base64,"+t[1].base64)&&y(e,"src",r),y(e,"alt",s=t[0].id)},m(t,n){d(t,e,n)},p(t,n){2&n&&e.src!==(r="data:image/png;base64,"+t[1].base64)&&y(e,"src",r),1&n&&s!==(s=t[0].id)&&y(e,"alt",s)},i:n,o:n,d(t){t&&f(e)}}}function Sn(t){let e,r,s;return{c(){e=h("img"),e.src!==(r=t[1].url)&&y(e,"src",r),y(e,"alt",s=t[0].id)},m(t,n){d(t,e,n)},p(t,n){2&n&&e.src!==(r=t[1].url)&&y(e,"src",r),1&n&&s!==(s=t[0].id)&&y(e,"alt",s)},i:n,o:n,d(t){t&&f(e)}}}function An(t){let e,n,r,s;const o=[Sn,zn,En],i=[];function l(t,e){return"url"in t[1]?0:"base64"in t[1]?1:2}return n=l(t),r=i[n]=o[n](t),{c(){e=h("div"),r.c(),y(e,"class","ImageBlockContent")},m(t,r){d(t,e,r),i[n].m(e,null),s=!0},p(t,[s]){let a=n;n=l(t),n===a?i[n].p(t,s):(W(),K(i[a],1,1,(()=>{i[a]=null})),V(),r=i[n],r?r.p(t,s):(r=i[n]=o[n](t),r.c()),J(r,1),r.m(e,null))},i(t){s||(J(r),s=!0)},o(t){K(r),s=!1},d(t){t&&f(e),i[n].d()}}}const Cn={match_and_normalize:t=>{if(is_object(t)&&"image"in t)return t}};function qn(t,e,n){let r,{block:s}=e,{is_narrow:o}=e;return discard(o),t.$$set=t=>{"block"in t&&n(0,s=t.block),"is_narrow"in t&&n(2,o=t.is_narrow)},t.$$.update=()=>{1&t.$$.dirty&&n(1,r=s.image)},[s,r,o]}var Mn=Object.freeze({__proto__:null,default:class extends at{constructor(t){super(),lt(this,t,qn,An,a,{block:0,is_narrow:2})}},definition:Cn});function Rn(t){let e,n;return e=new Lt({props:{error:t[3]}}),{c(){rt(e.$$.fragment)},m(t,r){st(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.error=t[3]),e.$set(r)},i(t){n||(J(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){ot(e,t)}}}function Bn(t){let e,n;return e=new dn({props:{markdown:t[2]}}),{c(){rt(e.$$.fragment)},m(t,r){st(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.markdown=t[2]),e.$set(r)},i(t){n||(J(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){ot(e,t)}}}function Ln(t){let e,r;return e=new Pt({}),{c(){rt(e.$$.fragment)},m(t,n){st(e,t,n),r=!0},p:n,i(t){r||(J(e.$$.fragment,t),r=!0)},o(t){K(e.$$.fragment,t),r=!1},d(t){ot(e,t)}}}function Nn(t){let e,n,r,s={ctx:t,current:null,token:null,hasCatch:!0,pending:Ln,then:Bn,catch:Rn,value:2,error:3,blocks:[,,,]};return X(n=Jt(t[0].text),s),{c(){e=h("div"),s.block.c(),y(e,"class","TextBlockContent")},m(t,n){d(t,e,n),s.block.m(e,s.anchor=null),s.mount=()=>e,s.anchor=null,r=!0},p(e,[r]){t=e,s.ctx=t,1&r&&n!==(n=Jt(t[0].text))&&X(n,s)||G(s,t,r)},i(t){r||(J(s.block),r=!0)},o(t){for(let t=0;t<3;t+=1){K(s.blocks[t])}r=!1},d(t){t&&f(e),s.block.d(),s.token=null,s=null}}}const Tn={match_and_normalize:t=>is_string(t)?{text:t}:is_object(t)&&"text"in t?t:void 0};function Pn(t,e,n){let{block:r}=e,{is_narrow:s}=e;return discard(s),t.$$set=t=>{"block"in t&&n(0,r=t.block),"is_narrow"in t&&n(1,s=t.is_narrow)},[r,s]}var Dn=Object.freeze({__proto__:null,default:class extends at{constructor(t){super(),lt(this,t,Pn,Nn,a,{block:0,is_narrow:1})}},definition:Tn});const Hn=["width","height","config"];function Fn(t){for(const e in t)if(Hn.indexOf(e)<0)throw new Error(`invalid property '${e}'`);return mr("width",t.width,["number","undefined"]),mr("height",t.height,["number","undefined"]),t}const Un=["linear","linear-closed","step","step-before","step-after","basis","basis-open","basis-closed","cardinal","cardinal-open","cardinal-closed","bundle","monotone"];const In=["point","circle","line","area","bar","rect","rule","square","text","tick","trail"];function Zn(t){if(In.indexOf(t)<0)throw new Error(`invalid mark '${t}', available are ${In.join(", ")}`);return t}const Wn=["mark","color","size","point","interpolate","opacity","thickness","vega"];function Vn(t){for(const e in t)if(Wn.indexOf(e)<0)throw new Error(`unknown mark property '${e}', available are ${Wn.join(", ")}`);const{mark:e,color:n,size:r,point:s,interpolate:o,opacity:i,thickness:l,vega:a}=t;return mr("color",n,["string","undefined"]),mr("size",r,["number","undefined"]),mr("point",s,["boolean","undefined"]),o&&function(t){if(Un.indexOf(t)<0)throw new Error(`invalid interpolate '${t}', available are ${Un.join(", ")}`)}(o),mr("opacity",i,["number","undefined"]),mr("thickness",l,["number","undefined"]),mr("vega",a,["object","undefined"]),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({type:Zn(e)},void 0!==n?{color:n}:{}),void 0!==r?{size:r}:{}),void 0!==s?{point:s}:{}),void 0!==o?{interpolate:o}:{}),void 0!==i?{opacity:i}:{}),void 0!==l?{thickness:l}:{}),void 0!==a?a:{})}const Jn=["nominal","ordinal","quantitative","temporal"];const Kn=["linear","pow","sqrt","symlog","log","time","utc","ordinal","band","point","bin-ordinal","quantile","quantize","threshold"];const Xn=["count","valid","missing","distinct","sum","mean","average","variance","variancep","stdev","stdevp","stderr","median","q1","q3","ci0","ci1","min","max","argmin","argmax","product"];const Gn=["x","y","x2","y2","xError","yError","xError2","yError2","longitude","latitude","longitude2","latitude2","color","opacity","fillOpacity","strokeOpacity","shape","size","strokeWidth","text","tooltip","href","detail","key","order"];const Yn=["year","yearquarter","yearquartermonth","yearmonth","yearmonthdate","yearmonthdatehours","yearmonthdatehoursminutes","yearmonthdatehoursminutesseconds","quarter","quartermonth","month","monthdate","date","day","hours","hoursminutes","hoursminutesseconds","minutes","minutesseconds","seconds","secondsmilliseconds","milliseconds"];function Qn(t){if(Yn.indexOf(t)<0)throw new Error(`invalid time unit '${t}', available are ${Yn.join(", ")}`);return t}function tr(t){if(mr("bin",t,["string","number","boolean","undefined"]),"string"==typeof t&&"binned"!=t)throw new Error("bin should have type of \"boolean | number | 'binned'\"");return"boolean"==typeof t||"string"==typeof t?t:{base:t,maxbins:t}}const er=["calculate","as"];function nr(t){for(const e in t)if(er.indexOf(e)<0)throw new Error(`unknown calculate property '${e}', available are ${er.join(", ")}`);return t}const rr=["filter"];function sr(t){for(const e in t)if(rr.indexOf(e)<0)throw new Error(`unknown filter property '${e}', available are ${rr.join(", ")}`);return t}const or=["type","aggregate","legend","title","labels","time_unit","timeUnit","bin","zero","domain","range","scale","value","override_value","scheme","reverse","vega"];function ir(t){const e=[];for(const n in t)if(or.indexOf(n)<0){if(Gn.indexOf(n)<0)throw new Error(`unknown encoding property '${n}', available are ${Gn.join(", ")}, ${or.join(", ")}`);e.push(n)}if(0==e.length)throw new Error(`encoding channel not specified, please specify one of ${Gn.join(", ")}`);if(e.length>1)throw new Error(`only one channel allowed in the same encoding, leave only one of ${e.join(", ")}`);t.type&&function(t){if(Jn.indexOf(t)<0)throw new Error(`invalid field type '${t}', available are ${Jn.join(", ")}`)}(t.type),t.aggregate&&function(t){if(Xn.indexOf(t)<0)throw new Error(`invalid aggregate '${t}', available are ${Xn.join(", ")}`)}(t.aggregate),mr("legend",t.legend,["string","boolean","undefined"]),mr("title",t.title,["string","boolean","undefined"]),mr("labels",t.labels,["boolean","undefined"]),t.time_unit&&Qn(t.time_unit),t.timeUnit&&Qn(t.timeUnit),t.bin&&tr(t.bin),mr("zero",t.zero,["boolean","undefined"]),t.scale&&function(t){if(Kn.indexOf(t)<0)throw new Error(`invalid scale type '${t}', available are ${Kn.join(", ")}`)}(t.scale),t.domain&&t.domain.map((t=>(mr("scale domain",t,["number","string","boolean"]),t))),t.range&&function(t){"string"==typeof t?mr("scale range",t,["string"]):t.map((t=>(mr("scale domain",t,["number","string"]),t)))}(t.range),mr("scheme",t.scheme,["string","undefined"]),mr("reverse",t.reverse,["boolean","undefined"]),mr("vega",t.vega,["object","undefined"]);const{type:n,title:r,labels:s,aggregate:o,legend:i,timeUnit:l,time_unit:a,bin:c,zero:u,domain:d,range:f,scale:h,value:p,scheme:g,reverse:m,vega:w,override_value:b}=t,$=Gn.find((e=>e in t));if(!$)throw new Error(`Channel not found in ${JSON.stringify(t)}!`);const y=t[$],v=Object.assign(Object.assign(Object.assign({},void 0!==w&&"axis"in w?w.axis:{}),r&&"string"==typeof r?{title:r}:r?{}:{title:null}),void 0!==s?{labels:s}:{}),_=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},void 0!==w&&"scale"in w?w.scale:{}),void 0!==h?{type:h}:{}),void 0!==d?{nice:!1}:{}),void 0!==u?{zero:u}:{}),void 0!==d?{domain:d}:{}),void 0!==f?{range:f}:{}),void 0!==g?{scheme:g}:{}),void 0!==m?{reverse:m}:{});let k,x=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},void 0!==w?w:{}),""!==y?{field:y}:{}),{type:n||"quantitative"}),void 0!==o?{aggregate:o}:{}),void 0!==i?{legend:i}:{legend:!1}),void 0!==l?{timeUnit:l}:{}),void 0!==a?{timeUnit:a}:{}),Object.keys(v).length>0?{axis:v}:{}),Object.keys(_).length>0?{scale:_}:{}),void 0!==c?{bin:tr(c)}:{});if(p){const t=function(t,e,n){const r=t=>{if(void 0===t)throw new Error("encoding value shouldn't be undefined");return mr("encoding value",t,["number","string","boolean"]),t};if(Array.isArray(t)){if("condition"in n)throw new Error("Conditional value can't be used with condition!");if(2==t.length){const[e,s]=t;return[Object.assign(Object.assign({},n),{condition:{test:e,value:r(s)}}),void 0]}if(3==t.length){const[e,s,o]=t;return[Object.assign(Object.assign({},n),{value:r(o),condition:{test:e,value:r(s)}}),void 0]}throw new Error("encoding value should be a simple value or array with 2 ['datum.value > 0', 'green'] or 3 elements ['datum.value > 0', 1, -1]")}if(lr.indexOf(e)>=0){if(""!=n.field&&void 0!==n.field&&null!==n.field)throw new Error(`value on ${lr.join(", ")} channels cannot be used with 'field'`);const e=[{explicit_value:r(t)}];return[Object.assign(Object.assign({},n),{field:"explicit_value"}),e]}return[Object.assign(Object.assign({},n),{value:r(t)}),void 0]}(p,$,x);x=t[0],k=t[1]}return[$,x,k]}const lr=["x","y"];const ar=["concat"];function cr(t){for(const e in t)if(ar.indexOf(e)<0)throw new Error(`unknown concat property '${e}', available are ${ar.join(", ")}`);return t}function ur(t){const e=[];let n,r={},s=[],o=[],i={};const l=[],a=[];for(const c of t)if("string"==typeof c)e.push(Zn(c));else if("mark"in c)e.push(Vn(c));else if(Array.isArray(c))o=[...o,dr(c)];else if("calculate"in c)s.push(nr(c));else if("filter"in c)s.push(sr(c));else if("facet"in c||"row"in c||"column"in c)l.push(c);else if("concat"in c)a.push(cr(c));else if("height"in c||"width"in c||"config"in c)i=Object.assign(Object.assign({},i),Fn(c));else if(Gn.some((t=>t in c))){const[t,e,n]=ir(c);if(t in e)throw new Error(`Can't redefine channel ${t}!`);if(void 0!==n)throw new Error(`Explicit value for '${t}' allowed only inside of a layer`);r=Object.assign(Object.assign({},r),{[t]:e})}else{if(!("vega"in c))throw new Error(`unknown plot part ${JSON.stringify(c)}`);n=c.vega}if(e.length>1)throw new Error(`Multiple marks found ${e.join(", ")}`);const c=Object.assign(Object.assign(Object.assign({},s.length>0?{transform:s}:{}),i),n||{});function u(){return Object.assign(Object.assign(Object.assign({},e.length>0?{mark:e[0]}:{}),Object.keys(r).length>0?{encoding:r}:{}),o.length>0?{layer:o}:{})}if(l.length>0){if(a.length>0)throw new Error("concat can't be used with facet");return function(t,e,n){let r;for(const e of t)"facet"in e&&(r=e);if(r){if(t.length>1)throw new Error("Can't other facets with 'facet' keyword");return Object.assign(Object.assign(Object.assign({facet:{field:r.facet,type:r.type||"ordinal",header:{title:null}}},void 0!==r.columns?{columns:r.columns}:{}),{spec:e}),n)}{if(t.filter((t=>"row"in t)).length>1)throw new Error("Facet can't have more than one row");if(t.filter((t=>"column"in t)).length>1)throw new Error("Facet can't have more than one column");let r,s;for(const e of t)"row"in e&&(r=e),"column"in e&&(s=e);return Object.assign({facet:Object.assign(Object.assign({},r?{row:{field:r.row,type:r.type||"ordinal",header:{title:null}}}:{}),s?{column:{field:s.column,type:s.type||"ordinal",header:{title:null}}}:{}),spec:e},n)}}(l,u(),c)}if(a.length>0){if(a.length>1)throw new Error("there could be only one concat");if(l.length>0)throw new Error("concat can't be used with facet");if(e.length>0)throw new Error("top level mark can't be used with concat");if(Object.keys(r).length>0)throw new Error("top level encoding can't be used with concat");if(0==o.length)throw new Error("concat requires at least one layer");return Object.assign({["vertical"==a[0].concat?"vconcat":"hconcat"]:o},c)}return Object.assign(Object.assign({},u()),c)}function dr(t){const e=[],n=[];let r,s,o={},i={};for(const l of t)if("string"==typeof l)e.push(Zn(l));else if("mark"in l)e.push(Vn(l));else if("calculate"in l)n.push(nr(l));else if("filter"in l)n.push(sr(l));else if("height"in l||"width"in l)i=Object.assign(Object.assign({},i),Fn(l));else if(Gn.some((t=>t in l))){const[t,e,n]=ir(l);if(t in e)throw new Error(`Can't redefine channel ${t}!`);s=n,o=Object.assign(Object.assign({},o),{[t]:e})}else{if(!("vega"in l))throw new Error(`unknown plot layer part ${JSON.stringify(l)}`);r=l.vega}if(e.length>1)throw new Error(`Multiple marks found ${e.join(", ")}`);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n.length>0?{transform:n}:{}),e.length>0?{mark:e[0]}:{}),Object.keys(o).length>0?{encoding:o}:{}),i),s?{data:{values:s}}:{}),r||{})}function fr(t,e,n=!1){const r=n?pr:gr;if(t instanceof Array)return 0==t.length?[]:Array.isArray(t[0])?function(t,e){return t.map((t=>{const n={};for(let r=0;r<t.length;r++)r<e.length&&(n[e[r]]=t[r]);return n}))}(t,e||hr).map(r):t.map(r);{if(!(t instanceof Object))throw new Error("Arrays data expected to be an Object");const e=Object.keys(t);if(0==e.length)throw new Error("Empty arrays data!");const n=e[0],s=t[n].length;for(const r of e)if(t[r].length!=s)throw new Error(`Arrays data has arrays of different length ${r} - ${t[r].length} and ${n} - ${s}`);const o=[];for(let n=0;n<s;n++){const r={};for(const s of e)r[s]=t[s][n];o.push(r)}return o.map(r)}}const hr="abcdefghijklmnopqrstuvwxyz".split("");function pr(t){const e={};for(let n in t){const r=t[n];e[n]=null!==r?r:void 0}return e}function gr(t){const e={};for(let n in t){const r=t[n];null!=r&&(e[n]=r)}return e}function mr(t,e,n){if(n.indexOf(typeof e)<0)throw new Error(`invalid type for '${t}' allowed types ${n.join(", ")}`)}function wr(t){t.finalize()}async function br({chart:e,data:n,vega_options:r,is_narrow:s,suggested_width_px:o,vega_view:i,container_el:l}){if(await Ut(["/vendor/vega/vega-5.9.1.min.js","/vendor/vega/vega-lite-4.0.2.min.js","/vendor/vega/vega-embed-6.2.1.js"],"serial"),i&&wr(i),!l)return;function a(e){return void 0!==o&&s?function(t,e,n){return t.width&&t.width<e||(t=Object.assign(Object.assign({},t),{width:e})),t.height&&t.height<n||(t=Object.assign(Object.assign({},t),{height:n})),t}(e,o,t.height_in_narrow_width_mode):e}let c=a("vega_spec"in e?e.vega_spec:ur(e));n&&(c=Object.assign(Object.assign({},c),{data:{values:fr(n)}}));const u=Object.assign(Object.assign({},function({suggested_width_px:t}){return{autosize:{type:"fit",contains:"padding"},width:t}}({suggested_width_px:o})),c);r=Object.assign(Object.assign({},{}),r||{});return(await window.vegaEmbed(l,u,r)).view}function $r(t){let e,n;return e=new Lt({props:{error:t[2].error}}),{c(){rt(e.$$.fragment)},m(t,r){st(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.error=t[2].error),e.$set(r)},i(t){n||(J(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){ot(e,t)}}}function yr(t){let e,r;return e=new Pt({}),{c(){rt(e.$$.fragment)},m(t,n){st(e,t,n),r=!0},p:n,i(t){r||(J(e.$$.fragment,t),r=!0)},o(t){K(e.$$.fragment,t),r=!1},d(t){ot(e,t)}}}function vr(t){let e,n,r,s,o,i,l,a,c,p,g;const w=[yr,$r],$=[];function v(t,e){return"empty"==t[2].state?0:"error"==t[2].state?1:-1}return~(n=v(t))&&(r=$[n]=w[n](t)),{c(){e=h("div"),r&&r.c(),s=m(),o=h("div"),i=h("div"),a=m(),c=h("div"),x(i,"padding-right","0"),y(i,"class",l="success"==t[2].state?"":"invisible"),x(c,"height","0"),x(c,"width","100%"),T((()=>t[9].call(c))),y(e,"class","VegaChart")},m(r,l){d(r,e,l),~n&&$[n].m(e,null),u(e,s),u(e,o),u(o,i),t[8](i),u(e,a),u(e,c),p=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=h("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=z();let s;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=b(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{s=b(n.contentWindow,"resize",e)}),u(t,n),()=>{(r||s&&n.contentWindow)&&s(),f(n)}}(c,t[9].bind(c)),g=!0},p(t,[o]){let a=n;n=v(t),n===a?~n&&$[n].p(t,o):(r&&(W(),K($[a],1,1,(()=>{$[a]=null})),V()),~n?(r=$[n],r?r.p(t,o):(r=$[n]=w[n](t),r.c()),J(r,1),r.m(e,s)):r=null),(!g||4&o&&l!==(l="success"==t[2].state?"":"invisible"))&&y(i,"class",l)},i(t){g||(J(r),g=!0)},o(t){K(r),g=!1},d(r){r&&f(e),~n&&$[n].d(),t[8](null),p()}}}function _r(t,e,n){let{chart:r}=e,{data:s}=e,{vega_options:o}=e,{is_narrow:i=!1}=e,l={state:"empty"};const a=new Dt(void 0);let c,u,d;const f=(t=>{t!=d&&n(7,d=t)}).debounce(100,!0);var h;return h=()=>{a.get()&&wr(a.get())},C().$$.on_destroy.push(h),t.$$set=t=>{"chart"in t&&n(3,r=t.chart),"data"in t&&n(4,s=t.data),"vega_options"in t&&n(5,o=t.vega_options),"is_narrow"in t&&n(6,i=t.is_narrow)},t.$$.update=()=>{2&t.$$.dirty&&f(u),249&t.$$.dirty&&null!=d&&null!=c&&br({chart:r,data:s,vega_options:o,is_narrow:i,suggested_width_px:d,vega_view:a.get(),container_el:c}).then((t=>{a.set(t),n(2,l={state:"success"})})).catch((t=>{const e=ensure_error(t,"Unknown error while processing vega lite");n(2,l={state:"error",error:e})}))},[c,u,l,r,s,o,i,d,function(t){M[t?"unshift":"push"]((()=>{c=t,n(0,c)}))},function(){u=this.clientWidth,n(1,u)}]}class kr extends at{constructor(t){super(),lt(this,t,_r,vr,a,{chart:3,data:4,vega_options:5,is_narrow:6})}}function xr(t){let e,n;return e=new Lt({props:{error:t[4]}}),{c(){rt(e.$$.fragment)},m(t,r){st(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.error=t[4]),e.$set(r)},i(t){n||(J(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){ot(e,t)}}}function jr(t){let e,n;return e=new kr({props:{chart:t[1].chart,data:t[3],vega_options:t[1].vega_options,is_narrow:t[0]}}),{c(){rt(e.$$.fragment)},m(t,r){st(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.chart=t[1].chart),2&n&&(r.data=t[3]),2&n&&(r.vega_options=t[1].vega_options),1&n&&(r.is_narrow=t[0]),e.$set(r)},i(t){n||(J(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){ot(e,t)}}}function Or(t){let e,r;return e=new Pt({}),{c(){rt(e.$$.fragment)},m(t,n){st(e,t,n),r=!0},p:n,i(t){r||(J(e.$$.fragment,t),r=!0)},o(t){K(e.$$.fragment,t),r=!1},d(t){ot(e,t)}}}function Er(t){let e,n,r,s,o,i={ctx:t,current:null,token:null,hasCatch:!0,pending:Or,then:jr,catch:xr,value:3,error:4,blocks:[,,,]};return X(n=Jt(t[1].data),i),s=new mn({}),{c(){e=h("div"),i.block.c(),r=m(),rt(s.$$.fragment),y(e,"class","ChartBlockContent relative")},m(t,n){d(t,e,n),i.block.m(e,i.anchor=null),i.mount=()=>e,i.anchor=r,u(e,r),st(s,e,null),o=!0},p(e,[r]){t=e,i.ctx=t,2&r&&n!==(n=Jt(t[1].data))&&X(n,i)||G(i,t,r)},i(t){o||(J(i.block),J(s.$$.fragment,t),o=!0)},o(t){for(let t=0;t<3;t+=1){K(i.blocks[t])}K(s.$$.fragment,t),o=!1},d(t){t&&f(e),i.block.d(),i.token=null,i=null,ot(s)}}}const zr={match_and_normalize:t=>{if(is_object(t)&&"data"in t&&"chart"in t)return t}};function Sr(t,e,n){let{block:r}=e,{is_narrow:s}=e;discard(s);let o=r;return t.$$set=t=>{"block"in t&&n(2,r=t.block),"is_narrow"in t&&n(0,s=t.is_narrow)},t.$$.update=()=>{6&t.$$.dirty&&o.hash!=r.hash&&n(1,o=r)},[s,o,r]}var Ar=Object.freeze({__proto__:null,default:class extends at{constructor(t){super(),lt(this,t,Sr,Er,a,{block:2,is_narrow:0})}},definition:zr});function Cr(t){switch(t){case"left":return"text-left";case"center":return"text-center";case"right":return"text-right"}}function qr(t,e,n){const r=t.slice();return r[4]=e[n],r[6]=n,r}function Mr(t){let e;return{c(){e=g(t[1])},m(t,n){d(t,e,n)},p(t,n){2&n&&_(e,t[1])},d(t){t&&f(e)}}}function Rr(t){let e,n=[],r=new Map,s=t[2];const o=t=>t[6];for(let e=0;e<s.length;e+=1){let i=qr(t,s,e),l=o(i);r.set(l,n[e]=Lr(l,i))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=w()},m(t,r){for(let e=0;e<n.length;e+=1)n[e].m(t,r);d(t,e,r)},p(t,i){4&i&&(s=t[2],n=tt(n,i,o,1,t,s,r,e.parentNode,Y,Lr,e,qr))},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&f(e)}}}function Br(t){let e;return{c(){e=h("br")},m(t,n){d(t,e,n)},d(t){t&&f(e)}}}function Lr(t,e){let n,r,s,o=e[4]+"",i=e[6]<e[2].length-1&&Br();return{key:t,first:null,c(){n=g(o),r=m(),i&&i.c(),s=w(),this.first=n},m(t,e){d(t,n,e),d(t,r,e),i&&i.m(t,e),d(t,s,e)},p(t,r){e=t,4&r&&o!==(o=e[4]+"")&&_(n,o),e[6]<e[2].length-1?i||(i=Br(),i.c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null)},d(t){t&&f(n),t&&f(r),i&&i.d(t),t&&f(s)}}}function Nr(t){let e,r;function s(t,e){return void 0!==t[2]?Rr:void 0!==t[1]?Mr:void 0}let o=s(t),i=o&&o(t);return{c(){e=h("div"),i&&i.c(),y(e,"class",r=t[3]+" "+(t[0].wrap&&"text-wrap"))},m(t,n){d(t,e,n),i&&i.m(e,null)},p(t,[n]){o===(o=s(t))&&i?i.p(t,n):(i&&i.d(1),i=o&&o(t),i&&(i.c(),i.m(e,null))),1&n&&r!==(r=t[3]+" "+(t[0].wrap&&"text-wrap"))&&y(e,"class",r)},i:n,o:n,d(t){t&&f(e),i&&i.d()}}}function Tr(t,e,n){let r,{options:s}=e,{value:o}=e;const i=Cr(s.align||"left")+(s.small?" text-xs":"");return t.$$set=t=>{"options"in t&&n(0,s=t.options),"value"in t&&n(1,o=t.value)},t.$$.update=()=>{3&t.$$.dirty&&n(2,r=void 0!==o&&s.break?o.split(s.break):void 0)},[s,o,r,i]}var Pr=Object.freeze({__proto__:null,default:class extends at{constructor(t){super(),lt(this,t,Tr,Nr,a,{options:0,value:1})}},compatible_types:["number","boolean","string"],align:function(t,e){return t.align||"left"}});function Dr(t){let e,r,s=(t[0]?t[1]:t[2])+"";return{c(){e=h("div"),r=g(s),y(e,"class","text-center")},m(t,n){d(t,e,n),u(e,r)},p(t,[e]){1&e&&s!==(s=(t[0]?t[1]:t[2])+"")&&_(r,s)},i:n,o:n,d(t){t&&f(e)}}}function Hr(t,e,n){let{options:r}=e,{value:s}=e;const o=r.true||"✓",i=r.false||"✗";return t.$$set=t=>{"options"in t&&n(3,r=t.options),"value"in t&&n(0,s=t.value)},[s,o,i,r]}var Fr=Object.freeze({__proto__:null,default:class extends at{constructor(t){super(),lt(this,t,Hr,Dr,a,{options:3,value:0})}},compatible_types:["boolean"]});function Ur(t){let e,r;return{c(){e=h("div"),r=g(t[0]),y(e,"class",t[1])},m(t,n){d(t,e,n),u(e,r)},p(t,[e]){1&e&&_(r,t[0])},i:n,o:n,d(t){t&&f(e)}}}function Ir(t,e,n){let r,{options:s}=e,{value:o}=e;const i="round"in s?s.round:2,l=Cr(s.align||"right")+(s.small?" text-xs":"");return t.$$set=t=>{"options"in t&&n(2,s=t.options),"value"in t&&n(3,o=t.value)},t.$$.update=()=>{8&t.$$.dirty&&n(0,r=void 0===o?"":""+(void 0!==i?o.round(i):o))},[r,l,s,o]}var Zr=Object.freeze({__proto__:null,default:class extends at{constructor(t){super(),lt(this,t,Ir,Ur,a,{options:2,value:3})}},compatible_types:["number"],align:function(t,e){return t.align||"right"}});function Wr(t,e,n,r){const s=[],o=r.scale||"linear";function i(t,e){if("line"==r.type)return t.map(e);if("bar"==r.type)return t.map((t=>void 0===t?void 0:t.map(e)));throw new Error("invalid column type")}if(r.log_unit){"log"!=r.scale&&s.push(`column ${t} 'line.log_unit' could be used with log scale only`);const o=is_number(r.log_unit)?r.log_unit:1;function l(t){return t<0?t:(t*=o)<1?1:t}n=i(n,(t=>void 0===t?void 0:l(t))),e=[l(e[0]),l(e[1])]}let a,c,u;if("log"==o){if(e[0]<=0)return s.push(`column ${t}, 'domain' can't be negative for log scale`),{column:n.map((t=>{})),warnings:s,stats:void 0};let o=Math.max(...e.map((t=>Math.log(Math.abs(t)))));a=i(n,(e=>void 0===e?void 0:e>0?Math.log(e)/o:void s.push(`column ${t}, values can't be negative for log scale`))),r.ticks&&(c=r.ticks.filter_map((e=>e>0?Math.log(e)/o:void s.push(`column ${t}, ticks can't be negative for log scale`)))),u=[Math.log(e[0])/o,Math.log(e[1])/o]}else{if("linear"!=o)throw new Error(`unknown scale ${o}`);{let t=Math.max(...e.map((t=>Math.abs(t))));0==t&&(t=1),a=i(n,(e=>void 0===e?void 0:e/t)),r.ticks&&(c=r.ticks.map((e=>e/t))),u=[e[0]/t,e[1]/t]}}return{column:a,warnings:s,stats:{domain:e,ndomain:u,nticks:c,max_length:function(t){if("line"==r.type)return 1;if("bar"==r.type)return t.map((t=>void 0===t?0:t.length)).max();throw new Error("invalid column type")}(n)}}}const Vr={black:"#111827",grey:"#9CA3AF",red:"#B91C1C",yellow:"#FCD34D",green:"#047857",blue:"#1D4ED8",indigo:"#4338CA",purple:"#6D28D9",pink:"#BE185D",white:"white"};function Jr(t){return Vr[t]||t}function Kr(t,e,n){const r=t.slice();return r[12]=e[n],r}function Xr(t,e,n){const r=t.slice();return r[12]=e[n],r}function Gr(t,e,n){const r=t.slice();return r[12]=e[n],r}function Yr(t){let e;function n(t,e){return t[6]<=0?es:t[5]>=0?ts:Qr}let r=n(t),s=r(t);return{c(){s.c(),e=w()},m(t,n){s.m(t,n),d(t,e,n)},p(t,o){r===(r=n(t))&&s?s.p(t,o):(s.d(1),s=r(t),s&&(s.c(),s.m(e.parentNode,e)))},d(t){s.d(t),t&&f(e)}}}function Qr(t){let e,n,s,o,i=[],l=new Map,a=t[8];const c=t=>t[12];for(let e=0;e<a.length;e+=1){let n=Kr(t,a,e),r=c(n);l.set(r,i[e]=ns(r,n))}function h(t,e){return t[1]>0?ss:rs}let m=h(t),w=m(t),b=[t[10]],$={};for(let t=0;t<b.length;t+=1)$=r($,b[t]);return{c(){e=p("svg"),n=p("title"),s=g(t[7]);for(let t=0;t<i.length;t+=1)i[t].c();o=p("line"),w.c(),y(o,"x1","50"),y(o,"y1","5"),y(o,"x2","50"),y(o,"y2","95"),y(o,"stroke",t[3]),y(o,"stroke-width","1"),v(e,$)},m(t,r){d(t,e,r),u(e,n),u(n,s);for(let t=0;t<i.length;t+=1)i[t].m(e,null);u(e,o),w.m(e,null)},p(t,n){128&n&&_(s,t[7]),768&n&&(a=t[8],i=tt(i,n,c,1,t,a,l,e,Y,ns,o,Kr)),8&n&&y(o,"stroke",t[3]),m===(m=h(t))&&w?w.p(t,n):(w.d(1),w=m(t),w&&(w.c(),w.m(e,null))),v(e,$=et(b,[t[10]]))},d(t){t&&f(e);for(let t=0;t<i.length;t+=1)i[t].d();w.d()}}}function ts(t){let e,n,s,o,i,l,a=[],c=new Map,h=t[8];const m=t=>t[12];for(let e=0;e<h.length;e+=1){let n=Xr(t,h,e),r=m(n);c.set(r,a[e]=os(r,n))}let w=[t[10]],b={};for(let t=0;t<w.length;t+=1)b=r(b,w[t]);return{c(){e=p("svg"),n=p("title"),s=g(t[7]);for(let t=0;t<a.length;t+=1)a[t].c();o=p("rect"),y(o,"x","0"),y(o,"y","25"),y(o,"width",i=100*t[1]),y(o,"height","50"),y(o,"fill",l=t[4](t[0])),v(e,b)},m(t,r){d(t,e,r),u(e,n),u(n,s);for(let t=0;t<a.length;t+=1)a[t].m(e,null);u(e,o)},p(t,n){128&n&&_(s,t[7]),768&n&&(h=t[8],a=tt(a,n,m,1,t,h,c,e,Y,os,o,Xr)),2&n&&i!==(i=100*t[1])&&y(o,"width",i),17&n&&l!==(l=t[4](t[0]))&&y(o,"fill",l),v(e,b=et(w,[t[10]]))},d(t){t&&f(e);for(let t=0;t<a.length;t+=1)a[t].d()}}}function es(t){let e,n,s,o,i,l,a,c=[],h=new Map,m=t[8];const w=t=>t[12];for(let e=0;e<m.length;e+=1){let n=Gr(t,m,e),r=w(n);h.set(r,c[e]=is(r,n))}let b=[t[10]],$={};for(let t=0;t<b.length;t+=1)$=r($,b[t]);return{c(){e=p("svg"),n=p("title"),s=g(t[7]);for(let t=0;t<c.length;t+=1)c[t].c();o=p("rect"),y(o,"x",i=100- -100*t[1]),y(o,"y","25"),y(o,"width",l=-100*t[1]),y(o,"height","50"),y(o,"fill",a=t[4](t[0])),v(e,$)},m(t,r){d(t,e,r),u(e,n),u(n,s);for(let t=0;t<c.length;t+=1)c[t].m(e,null);u(e,o)},p(t,n){128&n&&_(s,t[7]),768&n&&(m=t[8],c=tt(c,n,w,1,t,m,h,e,Y,is,o,Gr)),2&n&&i!==(i=100- -100*t[1])&&y(o,"x",i),2&n&&l!==(l=-100*t[1])&&y(o,"width",l),17&n&&a!==(a=t[4](t[0]))&&y(o,"fill",a),v(e,$=et(b,[t[10]]))},d(t){t&&f(e);for(let t=0;t<c.length;t+=1)c[t].d()}}}function ns(t,e){let n,r,s;return{key:t,first:null,c(){n=p("line"),y(n,"x1",r=50+50*e[12]),y(n,"y1","5"),y(n,"x2",s=50+50*e[12]),y(n,"y2","25"),y(n,"stroke",e[9]),y(n,"stroke-width","1"),this.first=n},m(t,e){d(t,n,e)},p(t,o){e=t,256&o&&r!==(r=50+50*e[12])&&y(n,"x1",r),256&o&&s!==(s=50+50*e[12])&&y(n,"x2",s)},d(t){t&&f(n)}}}function rs(t){let e,n,r,s;return{c(){e=p("rect"),y(e,"x",n=50- -50*t[1]),y(e,"y","25"),y(e,"width",r=-50*t[1]),y(e,"height","50"),y(e,"fill",s=t[4](t[0]))},m(t,n){d(t,e,n)},p(t,o){2&o&&n!==(n=50- -50*t[1])&&y(e,"x",n),2&o&&r!==(r=-50*t[1])&&y(e,"width",r),17&o&&s!==(s=t[4](t[0]))&&y(e,"fill",s)},d(t){t&&f(e)}}}function ss(t){let e,n;return{c(){e=p("rect"),y(e,"x","50"),y(e,"y","25"),y(e,"width",n=50*t[1]),y(e,"height","50"),y(e,"fill",t[3])},m(t,n){d(t,e,n)},p(t,r){2&r&&n!==(n=50*t[1])&&y(e,"width",n),8&r&&y(e,"fill",t[3])},d(t){t&&f(e)}}}function os(t,e){let n,r,s;return{key:t,first:null,c(){n=p("line"),y(n,"x1",r=100*e[12]),y(n,"y1",5),y(n,"x2",s=100*e[12]),y(n,"y2","25"),y(n,"stroke",e[9]),y(n,"stroke-width","1"),this.first=n},m(t,e){d(t,n,e)},p(t,o){e=t,256&o&&r!==(r=100*e[12])&&y(n,"x1",r),256&o&&s!==(s=100*e[12])&&y(n,"x2",s)},d(t){t&&f(n)}}}function is(t,e){let n,r,s;return{key:t,first:null,c(){n=p("line"),y(n,"x1",r=100- -100*e[12]),y(n,"y1","5"),y(n,"x2",s=100- -100*e[12]),y(n,"y2","25"),y(n,"stroke",e[9]),y(n,"stroke-width","1"),this.first=n},m(t,e){d(t,n,e)},p(t,o){e=t,256&o&&r!==(r=100- -100*e[12])&&y(n,"x1",r),256&o&&s!==(s=100- -100*e[12])&&y(n,"x2",s)},d(t){t&&f(n)}}}function ls(t){let e,r=t[2]&&null!=t[1]&&Yr(t);return{c(){r&&r.c(),e=w()},m(t,n){r&&r.m(t,n),d(t,e,n)},p(t,[n]){t[2]&&null!=t[1]?r?r.p(t,n):(r=Yr(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:n,o:n,d(t){r&&r.d(t),t&&f(e)}}}const as=(t,e,n,r)=>Wr(t,e,n,r);function cs(t,e,n){let r,s,o,i,l,{options:a}=e,{value:c}=e,{converted:u}=e,{stats:d}=e;const f=Jr("grey");let h;return t.$$set=t=>{"options"in t&&n(11,a=t.options),"value"in t&&n(0,c=t.value),"converted"in t&&n(1,u=t.converted),"stats"in t&&n(2,d=t.stats)},t.$$.update=()=>{if(2048&t.$$.dirty&&n(3,r=Jr(a.color||"black")),2056&t.$$.dirty)if(a.colorfn){const t=Function("v",`return ${a.colorfn}`);n(4,h=e=>is_undefined(e)?r:Jr(t(e)))}else n(4,h=()=>r);4&t.$$.dirty&&n(5,[s,o]=d?d.ndomain:[0,0],s,(n(6,o),n(2,d))),2055&t.$$.dirty&&n(7,i=[void 0!==u?`value: ${c}`:"missing",((null==d?void 0:d.nticks)||[]).length>0?`, ticks: [${(a.ticks||[]).join(", ")}]`:"",d?`domain: [${d.domain[0]}, ${d.domain[1]}]`:"",`scale: ${a.scale||"linear"}`].join(", ")),4&t.$$.dirty&&n(8,l=(null==d?void 0:d.nticks)||[])},[c,u,d,r,h,s,o,i,l,f,{class:"plot-table-chart plot-line-format text-center",viewBox:"0 0 100 100",preserveAspectRatio:"none"},a]}var us=Object.freeze({__proto__:null,default:class extends at{constructor(t){super(),lt(this,t,cs,ls,a,{options:11,value:0,converted:1,stats:2})}},compatible_types:["number"],extra_values:({ticks:t})=>t||[],align:function(t,e){if(t.align)return t.align;if(e){const[t,n]=e.ndomain;return n<=0?"right":t>=0?"left":"center"}return"center"},convert_column:as});function ds(t){let e;return{c(){e=p("line"),y(e,"x1",t[0]),y(e,"y1",t[1]),y(e,"x2",t[2]),y(e,"y2",t[3]),y(e,"stroke",t[4]),y(e,"stroke-width",t[5])},m(t,n){d(t,e,n)},p(t,n){1&n&&y(e,"x1",t[0]),2&n&&y(e,"y1",t[1]),4&n&&y(e,"x2",t[2]),8&n&&y(e,"y2",t[3]),16&n&&y(e,"stroke",t[4]),32&n&&y(e,"stroke-width",t[5])},d(t){t&&f(e)}}}function fs(t){let e;return{c(){e=p("line"),y(e,"x1",t[1]),y(e,"y1",t[0]),y(e,"x2",t[3]),y(e,"y2",t[2]),y(e,"stroke",t[4]),y(e,"stroke-width",t[5])},m(t,n){d(t,e,n)},p(t,n){2&n&&y(e,"x1",t[1]),1&n&&y(e,"y1",t[0]),8&n&&y(e,"x2",t[3]),4&n&&y(e,"y2",t[2]),16&n&&y(e,"stroke",t[4]),32&n&&y(e,"stroke-width",t[5])},d(t){t&&f(e)}}}function hs(t){let e;function r(t,e){return t[6]?fs:ds}let s=r(t),o=s(t);return{c(){o.c(),e=w()},m(t,n){o.m(t,n),d(t,e,n)},p(t,[n]){s===(s=r(t))&&o?o.p(t,n):(o.d(1),o=s(t),o&&(o.c(),o.m(e.parentNode,e)))},i:n,o:n,d(t){o.d(t),t&&f(e)}}}function ps(t,e,n){let{x1:r}=e,{y1:s}=e,{x2:o}=e,{y2:i}=e,{stroke:l}=e,{stroke_width:a}=e,{switch_axis:c=!1}=e;return t.$$set=t=>{"x1"in t&&n(0,r=t.x1),"y1"in t&&n(1,s=t.y1),"x2"in t&&n(2,o=t.x2),"y2"in t&&n(3,i=t.y2),"stroke"in t&&n(4,l=t.stroke),"stroke_width"in t&&n(5,a=t.stroke_width),"switch_axis"in t&&n(6,c=t.switch_axis)},[r,s,o,i,l,a,c]}class gs extends at{constructor(t){super(),lt(this,t,ps,hs,a,{x1:0,y1:1,x2:2,y2:3,stroke:4,stroke_width:5,switch_axis:6})}}function ms(t){let e,n=t[5]&&bs(t);return{c(){e=p("rect"),n&&n.c(),y(e,"x",t[0]),y(e,"y",t[1]),y(e,"width",t[2]),y(e,"height",t[3]),y(e,"fill",t[4])},m(t,r){d(t,e,r),n&&n.m(e,null)},p(t,r){t[5]?n?n.p(t,r):(n=bs(t),n.c(),n.m(e,null)):n&&(n.d(1),n=null),1&r&&y(e,"x",t[0]),2&r&&y(e,"y",t[1]),4&r&&y(e,"width",t[2]),8&r&&y(e,"height",t[3]),16&r&&y(e,"fill",t[4])},d(t){t&&f(e),n&&n.d()}}}function ws(t){let e,n=t[5]&&$s(t);return{c(){e=p("rect"),n&&n.c(),y(e,"x",t[1]),y(e,"y",t[0]),y(e,"width",t[3]),y(e,"height",t[2]),y(e,"fill",t[4])},m(t,r){d(t,e,r),n&&n.m(e,null)},p(t,r){t[5]?n?n.p(t,r):(n=$s(t),n.c(),n.m(e,null)):n&&(n.d(1),n=null),2&r&&y(e,"x",t[1]),1&r&&y(e,"y",t[0]),8&r&&y(e,"width",t[3]),4&r&&y(e,"height",t[2]),16&r&&y(e,"fill",t[4])},d(t){t&&f(e),n&&n.d()}}}function bs(t){let e,n;return{c(){e=p("title"),n=g(t[5])},m(t,r){d(t,e,r),u(e,n)},p(t,e){32&e&&_(n,t[5])},d(t){t&&f(e)}}}function $s(t){let e,n;return{c(){e=p("title"),n=g(t[5])},m(t,r){d(t,e,r),u(e,n)},p(t,e){32&e&&_(n,t[5])},d(t){t&&f(e)}}}function ys(t){let e;function r(t,e){return t[6]?ws:ms}let s=r(t),o=s(t);return{c(){o.c(),e=w()},m(t,n){o.m(t,n),d(t,e,n)},p(t,[n]){s===(s=r(t))&&o?o.p(t,n):(o.d(1),o=s(t),o&&(o.c(),o.m(e.parentNode,e)))},i:n,o:n,d(t){o.d(t),t&&f(e)}}}function vs(t,e,n){let{x:r}=e,{y:s}=e,{width:o}=e,{height:i}=e,{fill:l}=e,{title:a}=e,{switch_axis:c=!1}=e;return t.$$set=t=>{"x"in t&&n(0,r=t.x),"y"in t&&n(1,s=t.y),"width"in t&&n(2,o=t.width),"height"in t&&n(3,i=t.height),"fill"in t&&n(4,l=t.fill),"title"in t&&n(5,a=t.title),"switch_axis"in t&&n(6,c=t.switch_axis)},[r,s,o,i,l,a,c]}class _s extends at{constructor(t){super(),lt(this,t,vs,ys,a,{x:0,y:1,width:2,height:3,fill:4,title:5,switch_axis:6})}}function ks(t,e,n){const r=t.slice();return r[26]=e[n],r[28]=n,r}function xs(t,e,n){const r=t.slice();return r[26]=e[n],r[28]=n,r}function js(t,e,n){const r=t.slice();return r[26]=e[n],r[28]=n,r}function Os(t,e,n){const r=t.slice();return r[26]=e[n],r[28]=n,r}function Es(t,e,n){const r=t.slice();return r[26]=e[n],r[28]=n,r}function zs(t,e,n){const r=t.slice();return r[26]=e[n],r[28]=n,r}function Ss(t){let e,n,r,s,o,i,l=[],a=new Map,c=[],h=new Map,m=t[1];const b=t=>t[28];for(let e=0;e<m.length;e+=1){let n=xs(t,m,e),r=b(n);a.set(r,l[e]=Rs(r,n))}let $=t[0]&&!t[2]&&Bs(t),v=t[11];const k=t=>t[28];for(let e=0;e<v.length;e+=1){let n=ks(t,v,e),r=k(n);h.set(r,c[e]=Ps(r,n))}return{c(){e=p("svg"),n=p("title"),r=g(t[15]);for(let t=0;t<l.length;t+=1)l[t].c();s=w(),$&&$.c(),o=w();for(let t=0;t<c.length;t+=1)c[t].c();y(e,"class",t[13]),y(e,"viewBox","0 0 100 100"),y(e,"preserveAspectRatio","none"),y(e,"transform",t[14])},m(t,a){d(t,e,a),u(e,n),u(n,r);for(let t=0;t<l.length;t+=1)l[t].m(e,null);u(e,s),$&&$.m(e,null),u(e,o);for(let t=0;t<c.length;t+=1)c[t].m(e,null);i=!0},p(t,n){(!i||32768&n[0])&&_(r,t[15]),65798&n[0]&&(m=t[1],W(),l=tt(l,n,b,1,t,m,a,e,Q,Rs,s,xs),V()),t[0]&&!t[2]?$?$.p(t,n):($=Bs(t),$.c(),$.m(e,o)):$&&($.d(1),$=null),7716&n[0]&&(v=t[11],W(),c=tt(c,n,k,1,t,v,h,e,Q,Ps,null,ks),V()),(!i||8192&n[0])&&y(e,"class",t[13]),(!i||16384&n[0])&&y(e,"transform",t[14])},i(t){if(!i){for(let t=0;t<m.length;t+=1)J(l[t]);for(let t=0;t<v.length;t+=1)J(c[t]);i=!0}},o(t){for(let t=0;t<l.length;t+=1)K(l[t]);for(let t=0;t<c.length;t+=1)K(c[t]);i=!1},d(t){t&&f(e);for(let t=0;t<l.length;t+=1)l[t].d();$&&$.d();for(let t=0;t<c.length;t+=1)c[t].d()}}}function As(t){let e,n,r,s,o,i,l=[],a=new Map,c=[],h=new Map,m=t[1];const b=t=>t[28];for(let e=0;e<m.length;e+=1){let n=Os(t,m,e),r=b(n);a.set(r,l[e]=Ds(r,n))}let $=t[0]&&!t[2]&&Hs(t),v=t[11];const k=t=>t[28];for(let e=0;e<v.length;e+=1){let n=js(t,v,e),r=k(n);h.set(r,c[e]=Us(r,n))}return{c(){e=p("svg"),n=p("title"),r=g(t[15]);for(let t=0;t<l.length;t+=1)l[t].c();s=w(),$&&$.c(),o=w();for(let t=0;t<c.length;t+=1)c[t].c();y(e,"class",t[13]),y(e,"viewBox","0 0 100 100"),y(e,"preserveAspectRatio","none"),y(e,"transform",t[14])},m(t,a){d(t,e,a),u(e,n),u(n,r);for(let t=0;t<l.length;t+=1)l[t].m(e,null);u(e,s),$&&$.m(e,null),u(e,o);for(let t=0;t<c.length;t+=1)c[t].m(e,null);i=!0},p(t,n){(!i||32768&n[0])&&_(r,t[15]),65798&n[0]&&(m=t[1],W(),l=tt(l,n,b,1,t,m,a,e,Q,Ds,s,Os),V()),t[0]&&!t[2]?$?$.p(t,n):($=Hs(t),$.c(),$.m(e,o)):$&&($.d(1),$=null),7716&n[0]&&(v=t[11],W(),c=tt(c,n,k,1,t,v,h,e,Q,Us,null,js),V()),(!i||8192&n[0])&&y(e,"class",t[13]),(!i||16384&n[0])&&y(e,"transform",t[14])},i(t){if(!i){for(let t=0;t<m.length;t+=1)J(l[t]);for(let t=0;t<v.length;t+=1)J(c[t]);i=!0}},o(t){for(let t=0;t<l.length;t+=1)K(l[t]);for(let t=0;t<c.length;t+=1)K(c[t]);i=!1},d(t){t&&f(e);for(let t=0;t<l.length;t+=1)l[t].d();$&&$.d();for(let t=0;t<c.length;t+=1)c[t].d()}}}function Cs(t){let e,n,r,s,o,i,l=[],a=new Map,c=[],h=new Map,m=t[1];const b=t=>t[28];for(let e=0;e<m.length;e+=1){let n=zs(t,m,e),r=b(n);a.set(r,l[e]=Is(r,n))}let $=t[0]&&!t[2]&&Zs(t),v=t[11];const k=t=>t[28];for(let e=0;e<v.length;e+=1){let n=Es(t,v,e),r=k(n);h.set(r,c[e]=Vs(r,n))}return{c(){e=p("svg"),n=p("title"),r=g(t[15]);for(let t=0;t<l.length;t+=1)l[t].c();s=w(),$&&$.c(),o=w();for(let t=0;t<c.length;t+=1)c[t].c();y(e,"class",t[13]),y(e,"viewBox","0 0 100 100"),y(e,"preserveAspectRatio","none"),y(e,"transform",t[14])},m(t,a){d(t,e,a),u(e,n),u(n,r);for(let t=0;t<l.length;t+=1)l[t].m(e,null);u(e,s),$&&$.m(e,null),u(e,o);for(let t=0;t<c.length;t+=1)c[t].m(e,null);i=!0},p(t,n){(!i||32768&n[0])&&_(r,t[15]),65798&n[0]&&(m=t[1],W(),l=tt(l,n,b,1,t,m,a,e,Q,Is,s,zs),V()),t[0]&&!t[2]?$?$.p(t,n):($=Zs(t),$.c(),$.m(e,o)):$&&($.d(1),$=null),7716&n[0]&&(v=t[11],W(),c=tt(c,n,k,1,t,v,h,e,Q,Vs,null,Es),V()),(!i||8192&n[0])&&y(e,"class",t[13]),(!i||16384&n[0])&&y(e,"transform",t[14])},i(t){if(!i){for(let t=0;t<m.length;t+=1)J(l[t]);for(let t=0;t<v.length;t+=1)J(c[t]);i=!0}},o(t){for(let t=0;t<l.length;t+=1)K(l[t]);for(let t=0;t<c.length;t+=1)K(c[t]);i=!1},d(t){t&&f(e);for(let t=0;t<l.length;t+=1)l[t].d();$&&$.d();for(let t=0;t<c.length;t+=1)c[t].d()}}}function qs(t){let e,r;return{c(){e=h("div"),r=g(t[7])},m(t,n){d(t,e,n),u(e,r)},p(t,e){128&e[0]&&_(r,t[7])},i:n,o:n,d(t){t&&f(e)}}}function Ms(t){let e,r,s;return{c(){e=p("svg"),r=p("title"),s=g(t[15]),y(e,"class",t[13])},m(t,n){d(t,e,n),u(e,r),u(r,s)},p(t,n){32768&n[0]&&_(s,t[15]),8192&n[0]&&y(e,"class",t[13])},i:n,o:n,d(t){t&&f(e)}}}function Rs(t,e){let n,r,s;return r=new gs({props:{x1:100-e[8],y1:50-50*e[26],x2:"100",y2:50-50*e[26],stroke:e[16],stroke_width:"1",switch_axis:e[2]}}),{key:t,first:null,c(){n=w(),rt(r.$$.fragment),this.first=n},m(t,e){d(t,n,e),st(r,t,e),s=!0},p(t,n){e=t;const s={};256&n[0]&&(s.x1=100-e[8]),2&n[0]&&(s.y1=50-50*e[26]),2&n[0]&&(s.y2=50-50*e[26]),4&n[0]&&(s.switch_axis=e[2]),r.$set(s)},i(t){s||(J(r.$$.fragment,t),s=!0)},o(t){K(r.$$.fragment,t),s=!1},d(t){t&&f(n),ot(r,t)}}}function Bs(t){let e,n,r;return{c(){e=p("line"),y(e,"x1","100"),y(e,"y1",n=50.5-50*t[3]),y(e,"x2","100"),y(e,"y2",r=49.5-50*t[4]),y(e,"stroke",t[16]),y(e,"stroke-width","1")},m(t,n){d(t,e,n)},p(t,s){8&s[0]&&n!==(n=50.5-50*t[3])&&y(e,"y1",n),16&s[0]&&r!==(r=49.5-50*t[4])&&y(e,"y2",r)},d(t){t&&f(e)}}}function Ls(t){let e,n,r,s;const o=[Ts,Ns],i=[];function l(t,e){return t[26]>0?0:1}return e=l(t),n=i[e]=o[e](t),{c(){n.c(),r=w()},m(t,n){i[e].m(t,n),d(t,r,n),s=!0},p(t,s){let a=e;e=l(t),e===a?i[e].p(t,s):(W(),K(i[a],1,1,(()=>{i[a]=null})),V(),n=i[e],n?n.p(t,s):(n=i[e]=o[e](t),n.c()),J(n,1),n.m(r.parentNode,r))},i(t){s||(J(n),s=!0)},o(t){K(n),s=!1},d(t){i[e].d(t),t&&f(r)}}}function Ns(t){let e,n;return e=new _s({props:{x:t[28]*(t[9]+(t[28]>0?t[10]:0)),y:"50",width:t[9],height:50*-t[26],fill:t[5](t[12][t[28]],t[28]),title:"Value: "+t[12][t[28]],switch_axis:t[2]}}),{c(){rt(e.$$.fragment)},m(t,r){st(e,t,r),n=!0},p(t,n){const r={};3584&n[0]&&(r.x=t[28]*(t[9]+(t[28]>0?t[10]:0))),512&n[0]&&(r.width=t[9]),2048&n[0]&&(r.height=50*-t[26]),6176&n[0]&&(r.fill=t[5](t[12][t[28]],t[28])),6144&n[0]&&(r.title="Value: "+t[12][t[28]]),4&n[0]&&(r.switch_axis=t[2]),e.$set(r)},i(t){n||(J(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){ot(e,t)}}}function Ts(t){let e,n;return e=new _s({props:{x:t[28]*(t[9]+(t[28]>0?t[10]:0)),y:50-50*t[26],width:t[9],height:50*t[26],fill:t[5](t[12][t[28]],t[28]),title:"Value: "+t[12][t[28]],switch_axis:t[2]}}),{c(){rt(e.$$.fragment)},m(t,r){st(e,t,r),n=!0},p(t,n){const r={};3584&n[0]&&(r.x=t[28]*(t[9]+(t[28]>0?t[10]:0))),2048&n[0]&&(r.y=50-50*t[26]),512&n[0]&&(r.width=t[9]),2048&n[0]&&(r.height=50*t[26]),6176&n[0]&&(r.fill=t[5](t[12][t[28]],t[28])),6144&n[0]&&(r.title="Value: "+t[12][t[28]]),4&n[0]&&(r.switch_axis=t[2]),e.$set(r)},i(t){n||(J(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){ot(e,t)}}}function Ps(t,e){let n,r,s,o=void 0!==e[26]&&Ls(e);return{key:t,first:null,c(){n=w(),o&&o.c(),r=w(),this.first=n},m(t,e){d(t,n,e),o&&o.m(t,e),d(t,r,e),s=!0},p(t,n){void 0!==(e=t)[26]?o?(o.p(e,n),2048&n[0]&&J(o,1)):(o=Ls(e),o.c(),J(o,1),o.m(r.parentNode,r)):o&&(W(),K(o,1,1,(()=>{o=null})),V())},i(t){s||(J(o),s=!0)},o(t){K(o),s=!1},d(t){t&&f(n),o&&o.d(t),t&&f(r)}}}function Ds(t,e){let n,r,s;return r=new gs({props:{x1:100-e[8],y1:100-100*e[26],x2:"100",y2:100-100*e[26],stroke:e[16],stroke_width:"1",switch_axis:e[2]}}),{key:t,first:null,c(){n=w(),rt(r.$$.fragment),this.first=n},m(t,e){d(t,n,e),st(r,t,e),s=!0},p(t,n){e=t;const s={};256&n[0]&&(s.x1=100-e[8]),2&n[0]&&(s.y1=100-100*e[26]),2&n[0]&&(s.y2=100-100*e[26]),4&n[0]&&(s.switch_axis=e[2]),r.$set(s)},i(t){s||(J(r.$$.fragment,t),s=!0)},o(t){K(r.$$.fragment,t),s=!1},d(t){t&&f(n),ot(r,t)}}}function Hs(t){let e;return{c(){e=p("line"),y(e,"x1","100"),y(e,"y1","-0.5"),y(e,"x2","100"),y(e,"y2","100.5"),y(e,"stroke",t[16]),y(e,"stroke-width","1")},m(t,n){d(t,e,n)},p:n,d(t){t&&f(e)}}}function Fs(t){let e,n;return e=new _s({props:{x:t[28]*(t[9]+(t[28]>0?t[10]:0)),y:100-100*t[26],width:t[9],height:100*t[26],fill:t[5](t[12][t[28]],t[28]),title:"Value: "+t[12][t[28]],switch_axis:t[2]}}),{c(){rt(e.$$.fragment)},m(t,r){st(e,t,r),n=!0},p(t,n){const r={};3584&n[0]&&(r.x=t[28]*(t[9]+(t[28]>0?t[10]:0))),2048&n[0]&&(r.y=100-100*t[26]),512&n[0]&&(r.width=t[9]),2048&n[0]&&(r.height=100*t[26]),6176&n[0]&&(r.fill=t[5](t[12][t[28]],t[28])),6144&n[0]&&(r.title="Value: "+t[12][t[28]]),4&n[0]&&(r.switch_axis=t[2]),e.$set(r)},i(t){n||(J(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){ot(e,t)}}}function Us(t,e){let n,r,s,o=void 0!==e[26]&&Fs(e);return{key:t,first:null,c(){n=w(),o&&o.c(),r=w(),this.first=n},m(t,e){d(t,n,e),o&&o.m(t,e),d(t,r,e),s=!0},p(t,n){void 0!==(e=t)[26]?o?(o.p(e,n),2048&n[0]&&J(o,1)):(o=Fs(e),o.c(),J(o,1),o.m(r.parentNode,r)):o&&(W(),K(o,1,1,(()=>{o=null})),V())},i(t){s||(J(o),s=!0)},o(t){K(o),s=!1},d(t){t&&f(n),o&&o.d(t),t&&f(r)}}}function Is(t,e){let n,r,s;return r=new gs({props:{x1:100-e[8],y1:100*-e[26],x2:"100",y2:100*-e[26],stroke:e[16],stroke_width:"1",switch_axis:e[2]}}),{key:t,first:null,c(){n=w(),rt(r.$$.fragment),this.first=n},m(t,e){d(t,n,e),st(r,t,e),s=!0},p(t,n){e=t;const s={};256&n[0]&&(s.x1=100-e[8]),2&n[0]&&(s.y1=100*-e[26]),2&n[0]&&(s.y2=100*-e[26]),4&n[0]&&(s.switch_axis=e[2]),r.$set(s)},i(t){s||(J(r.$$.fragment,t),s=!0)},o(t){K(r.$$.fragment,t),s=!1},d(t){t&&f(n),ot(r,t)}}}function Zs(t){let e;return{c(){e=p("line"),y(e,"x1","100"),y(e,"y1",-.5),y(e,"x2","100"),y(e,"y2",100.5),y(e,"stroke",t[16]),y(e,"stroke-width","1")},m(t,n){d(t,e,n)},p:n,d(t){t&&f(e)}}}function Ws(t){let e,n;return e=new _s({props:{x:t[28]*(t[9]+(t[28]>0?t[10]:0)),y:"0",width:t[9],height:100*-t[26],fill:t[5](t[12][t[28]],t[28]),title:"Value: "+t[12][t[28]],switch_axis:t[2]}}),{c(){rt(e.$$.fragment)},m(t,r){st(e,t,r),n=!0},p(t,n){const r={};3584&n[0]&&(r.x=t[28]*(t[9]+(t[28]>0?t[10]:0))),512&n[0]&&(r.width=t[9]),2048&n[0]&&(r.height=100*-t[26]),6176&n[0]&&(r.fill=t[5](t[12][t[28]],t[28])),6144&n[0]&&(r.title="Value: "+t[12][t[28]]),4&n[0]&&(r.switch_axis=t[2]),e.$set(r)},i(t){n||(J(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){ot(e,t)}}}function Vs(t,e){let n,r,s,o=void 0!==e[26]&&Ws(e);return{key:t,first:null,c(){n=w(),o&&o.c(),r=w(),this.first=n},m(t,e){d(t,n,e),o&&o.m(t,e),d(t,r,e),s=!0},p(t,n){void 0!==(e=t)[26]?o?(o.p(e,n),2048&n[0]&&J(o,1)):(o=Ws(e),o.c(),J(o,1),o.m(r.parentNode,r)):o&&(W(),K(o,1,1,(()=>{o=null})),V())},i(t){s||(J(o),s=!0)},o(t){K(o),s=!1},d(t){t&&f(n),o&&o.d(t),t&&f(r)}}}function Js(t){let e,n,r,s;const o=[Ms,qs,Cs,As,Ss],i=[];function l(t,e){return t[6]?t[6]&&t[7]?1:t[4]<=0?2:t[3]>=0?3:4:0}return e=l(t),n=i[e]=o[e](t),{c(){n.c(),r=w()},m(t,n){i[e].m(t,n),d(t,r,n),s=!0},p(t,s){let a=e;e=l(t),e===a?i[e].p(t,s):(W(),K(i[a],1,1,(()=>{i[a]=null})),V(),n=i[e],n?n.p(t,s):(n=i[e]=o[e](t),n.c()),J(n,1),n.m(r.parentNode,r))},i(t){s||(J(n),s=!0)},o(t){K(n),s=!1},d(t){i[e].d(t),t&&f(r)}}}const Ks=(t,e,n,r)=>Wr(t,e,n,r);function Xs(t,e,n){let r,s,o,i,{options:l}=e,{value:a}=e,{converted:c}=e,{stats:u}=e;const d=Jr("grey");let f,h,p=!1,g=0,m=0,w=0,b=[],$=[],y=!1,v=[],_=[],k=0,x=!1,j=0,O=0,E=0,z=0;return t.$$set=t=>{"options"in t&&n(17,l=t.options),"value"in t&&n(18,a=t.value),"converted"in t&&n(19,c=t.converted),"stats"in t&&n(20,u=t.stats)},t.$$.update=()=>{if(131072&t.$$.dirty[0]&&n(25,r=Jr(l.color||"black")),33685504&t.$$.dirty[0])if(l.colorfn){const t=Function("v","i",`return ${l.colorfn}`);n(5,f=(e,n)=>is_undefined(e)?r:Jr(t(e,n)))}else n(5,f=()=>r);if(33423391&t.$$.dirty[0])if(n(7,h=void 0),u&&c&&a){n(6,p=!0),n(22,k=u.max_length),n(3,j=u.ndomain[0]),n(4,O=u.ndomain[1]),n(23,E=u.domain[0]),n(24,z=u.domain[1]),n(0,y=!!u.nticks),y?(n(1,v=[...u.nticks||[]]),v.add([0,j].min()),v.add([0,O].max()),n(1,v=v.unique().asc()),n(21,_=[...l.ticks||[]]),_.add([0,E].min()),_.add([0,z].max()),n(21,_=_.unique().asc())):(n(1,v=[]),n(21,_=[])),n(2,x=!!is_boolean(l.horizontal)&&l.horizontal);const t=x&&"large"!=l.height,e=function(t,e,n){if(t>200)return"more than 200 bars not supported".to_error();const[r,s]=n?[10,3]:[5,3];let o=100;e&&(o-=r+s);const i=o/(t+.1*(t-1));return{tick_width:r,bar_width:i,space_width:.1*i}.to_success()}(k,y,t);e.is_error?n(7,h=e.message):(n(8,g=e.value.tick_width),n(9,m=e.value.bar_width),n(10,w=e.value.space_width),n(11,b=c),n(12,$=a))}else n(6,p=!1);131072&t.$$.dirty[0]&&n(13,s=`plot-table-chart plot-bar-format plot-bar-format-${l.height||"normal"} text-center`),4&t.$$.dirty[0]&&n(14,o=x?"scale(-1,1)":""),27918336&t.$$.dirty[0]&&n(15,i=void 0===c?"":[_.is_empty()?"":`ticks: [${_.join(", ")}]`,`domain: [${E}, ${z}]`,`scale: ${l.scale||"linear"}`].join(", "))},[y,v,x,j,O,f,p,h,g,m,w,b,$,s,o,i,d,l,a,c,u,_,k,E,z,r]}var Gs=Object.freeze({__proto__:null,default:class extends at{constructor(t){super(),lt(this,t,Xs,Js,a,{options:17,value:18,converted:19,stats:20},[-1,-1])}},compatible_types:["array"],extra_values:({ticks:t})=>t||[],convert_column:Ks});function Ys(t){let e,r;return{c(){e=h("div"),r=g(t[0]),y(e,"class",t[1])},m(t,n){d(t,e,n),u(e,r)},p(t,[e]){1&e&&_(r,t[0])},i:n,o:n,d(t){t&&f(e)}}}function Qs(t,e,n){let r,{options:s}=e,{value:o}=e;const i=Cr(s.align||"left")+(s.small?" text-xs":"");return t.$$set=t=>{"options"in t&&n(2,s=t.options),"value"in t&&n(3,o=t.value)},t.$$.update=()=>{8&t.$$.dirty&&n(0,r=null==o?"":""+o)},[r,i,s,o]}var to=Object.freeze({__proto__:null,default:class extends at{constructor(t){super(),lt(this,t,Qs,Ys,a,{options:2,value:3})}},compatible_types:[],align:function(t,e){return t.align||"left"}});const eo=t=>`<svg class="${t}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg>`;function no(t){let e,n=`<svg class="${"h-5 w-5 p-0.5 text-gray-900"}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>`;return{c(){e=h("a"),y(e,"class","inline-block"),y(e,"target","_blank"),y(e,"href",t[0])},m(t,r){d(t,e,r),e.innerHTML=n},p(t,n){1&n&&y(e,"href",t[0])},d(t){t&&f(e)}}}function ro(t){let e,r=t[0]&&no(t);return{c(){e=h("div"),r&&r.c(),y(e,"class","text-center")},m(t,n){d(t,e,n),r&&r.m(e,null)},p(t,[n]){t[0]?r?r.p(t,n):(r=no(t),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i:n,o:n,d(t){t&&f(e),r&&r.d()}}}function so(t,e,n){let{options:r}=e,{value:s}=e;return discard(r),t.$$set=t=>{"options"in t&&n(1,r=t.options),"value"in t&&n(0,s=t.value)},[s,r]}var oo=Object.freeze({__proto__:null,default:class extends at{constructor(t){super(),lt(this,t,so,ro,a,{options:1,value:0})}},compatible_types:["string"]});function io(t){let e,n,r;return{c(){e=h("img"),y(e,"class",n=t[1][1]+" block"),e.src!==(r=t[0])&&y(e,"src",r)},m(t,n){d(t,e,n)},p(t,s){2&s&&n!==(n=t[1][1]+" block")&&y(e,"class",n),1&s&&e.src!==(r=t[0])&&y(e,"src",r)},d(t){t&&f(e)}}}function lo(t){let e,r,s=t[0]&&io(t);return{c(){e=h("div"),s&&s.c(),y(e,"class",r=t[1][0]+" flex justify-center p-0.5")},m(t,n){d(t,e,n),s&&s.m(e,null)},p(t,[n]){t[0]?s?s.p(t,n):(s=io(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null),2&n&&r!==(r=t[1][0]+" flex justify-center p-0.5")&&y(e,"class",r)},i:n,o:n,d(t){t&&f(e),s&&s.d()}}}function ao(t,e,n){let r,{options:s}=e,{value:o}=e;return t.$$set=t=>{"options"in t&&n(2,s=t.options),"value"in t&&n(0,o=t.value)},t.$$.update=()=>{4&t.$$.dirty&&n(1,r=s.small?["h-12","max-h-12"]:["h-32","max-h-32"])},[o,r,s]}const co={string:Pr,boolean:Fr,number:Zr,unknown:to,line:us,bar:Gs,link:oo,image:Object.freeze({__proto__:null,default:class extends at{constructor(t){super(),lt(this,t,ao,lo,a,{options:2,value:0})}},compatible_types:["string"]})};function uo(t){return t in co?{is_error:!1,value:co[t]}:`no '${t}' format`.to_error()}const fo={string:function(t,e){return t.localeCompare(e)},number:function(t,e){return t-e},boolean:function(t,e){return t==e?0:t?1:-1},unknown:function(t,e){return(""+t).localeCompare(""+e)}};function ho(t,[e,n]){const r="desc"==n,s=ensure(t.find((({id:t})=>t==e))).type;if(!(s in fo))throw new Error(`no comparator for '${s}' type, please register one`);const o=fo[s];return r?function(t,n){const r=n[e],s=t[e];return void 0===r?void 0===s?0:-1:void 0===s?1:o(r,s)}:function(t,n){const r=t[e],s=n[e];return void 0===r?void 0===s?0:-1:void 0===s?1:o(r,s)}}function po(t,e,n){if(n.length>3)throw new Error("sort not supported for more than 3 columns");const[r,s,o]=n;if(null==r&&assert(null==s),null==s&&assert(null==o),0==e.length||null==r)return e;let i,l=ho(t,r),a=s?ho(t,s):void 0,c=o?ho(t,o):void 0;i=c?function(t,e){let n=l(t,e);return 0!=n?n:(n=a(t,e),0!=n?n:c(t,e))}:a?function(t,e){let n=l(t,e);return 0!=n?n:a(t,e)}:l;const u=[...e];return u.sort(i),u}function go(t,e,n){const r=[...e];for(const t of r)t._weights={},t._nweights={};for(const e in n){const{type:n,min_max:s}=ensure(t.find((({id:t})=>t==e)));let[o,i]=r.partition((t=>void 0!==t[e]));if(0==o.length){for(const t of r)t._weights[e]=0,t._nweights[e]=0;continue}if("number"==n){const t=typeof r[0][e];if("number"!=t)throw new Error(`wrong type for '${e}' column, wsort expects number but found '${t}'`);for(const t of o)t._weights[e]=t[e]}else{if(!(n in fo))throw new Error(`no comparator for '${n}' type, please register one`);const t=fo[n];o.sort(((n,r)=>t(n[e],r[e])));let r,s=0;for(let t=0;t<o.length;t++){const n=o[t];n[e]==r?s+=1:r=n[e],n._weights[e]=t-s}}{let t,r;if(s){if("number"!=n)throw new Error("can't use min_max for non number type");t=s[0],r=s[1]}else{const n=o.map((t=>t._weights[e]));t=Math.min(...n),r=Math.max(...n)}const i=(r+t)/2;let l=(r-t)/2;assert(l>=0),l=0==l?1:l;for(const t of o){let n=(t._weights[e]-i)/l;t._nweights[e]=n}}let l=o.map((t=>t._nweights[e])).median();for(const t of i)t._nweights[e]=l}for(const t of r){let e=0;for(const r in n)e+=n[r]*t._nweights[r];t._w=e}return r.sort(((t,e)=>t._w-e._w)).rev(),r}test("sort_table",(()=>{const t=[{id:"name",type:"string"},{id:"age",type:"number"}],e=[{name:"Artanis",age:200},{name:"Sarah",age:30},{name:"Jim",age:30},{name:"Amon",age:void 0}];let n=n=>po(t,e,n).map((({name:t})=>t));assert.equal(n([["name","asc"]]),["Amon","Artanis","Jim","Sarah"]),assert.equal(n([["age","asc"]])[0],"Amon"),assert.equal(n([["age","asc"],["name","asc"]]),["Amon","Jim","Sarah","Artanis"])})),test("wsort_table",(()=>{const t=(t,e,n)=>go(t,e,n).map((({id:t})=>t));{const e=[{id:"a",type:"number"},{id:"b",type:"number"}],n=[{id:"a",a:0,b:3},{id:"b",a:1,b:3},{id:"c",a:2,b:void 0},{id:"d",a:-2,b:200}];assert.equal(t(e,n,{a:1,b:-1}),["d","a","b","c"])}{const e=[{id:"a",type:"number"}],n=[{id:"a",a:0},{id:"b",a:1},{id:"c",a:void 0}];assert.equal(t(e,n,{a:1}),["a","c","b"])}{const t=go([{id:"a",type:"string"}],[{id:"a",a:"a"},{id:"b",a:"a"},{id:"c",a:"b"}],{a:1});assert.equal(t[2].id,"c"),assert.equal(t.map((t=>t._weights.a)),[0,0,1])}}));const mo=["<=","<","=","!=",">",">=","~"];function wo(t){return mo.includes(t)?t:"="}function bo({type:t},e){switch(t){case"string":return e;case"boolean":try{return["true","t","1"].includes(e.downcase())}catch(t){return}case"number":try{let t=parseFloat(e);return Number.isFinite(t)?t:void 0}catch(t){return}default:return e}}function $o(t){if(!Array.isArray(t))return!1;for(const e of t)if(void 0!==e&&"number"!=typeof e)return!1;return!0}const yo=["string","number","boolean","unknown"];function vo(t){switch(t){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"array":return"array";default:return"unknown"}}function _o(t,e){const n=[],r=function(t,e,n){let r=[];return r=fr(e,null==t?void 0:t.map((({id:t})=>t)),!0),r=r.map((t=>{for(const e in t)Array.isArray(t[e])&&(t[e]=t[e].map((t=>null===t?void 0:t)));return t})),r.each(((t,e)=>{t._i=e,t._converted={}})),r}(t.columns,e);if(0==r.length)return{columns:[],rows:[],messages:On(n)};let s=function(t,e,n){if(t)return t;const r=new HSet;for(let t=0;t<e.length;t++)for(const n in e[t])"_i"!=n&&"_converted"!=n&&r.add(n);return r.to_a().asc().map((t=>({id:t})))}(t.columns,r);if(t.alter_columns){const e=t.alter_columns.map((({id:t})=>t));s=[...t.alter_columns,...s.filter((({id:t})=>!e.includes(t)))]}const o=s.length;s.length!=o&&n.push("not unique column ids");let i=function(t,e,n){let r=t.map((t=>t.clone()));for(let t=0;t<e.length;t++){const s=e[t];for(const t of r){const{id:e,type:r}=t;if("_i"==e)continue;let o=s[e];if(void 0===o)continue;let i=typeof o;"object"==i&&(i=$o(o)?"array":"object"),i!=r&&(void 0===r?t.type=vo(i):"unknown"!=r&&yo.includes(r)&&(n.push(`wrong type for column '${e}', specified as '${r}' but '${typeof o}' found`),t.type="unknown"))}}return r.map((t=>Object.assign(Object.assign({},t),{type:t.type||"unknown"})))}(s,r,n),l=function(t,e){var n;const r=uo("unknown");if(r.is_error)throw"can't get 'unknown' formatter";let s=[];for(const o of t){const t=o.format||{type:"array"==o.type?"unknown":o.type},i=uo(t.type);i.is_error?(e.push(i.message),s.push([r.value,t])):i.value.compatible_types.includes(o.type)?s.push([i.value,t]):(e.push(`column ${o.id} has wrong format, format ${null===(n=o.format)||void 0===n?void 0:n.type} is not compatible with '${o.type}' type`),s.push([r.value,t]))}return s}(i,n);const a=function(t,e,n,r){const s={};for(let o=0;o<t.length;o++){const{id:i,type:l,domain:a}=t[o],[c,u]=e[o];if("number"!=l&&"array"!=l){a&&r.push(`non number column '${i}' can't have domain`);continue}const d=(c.extra_values?c.extra_values(u):[]).skip_undefined(),f=[];if("number"==l)for(const t of n){const e=t[i];void 0!==e&&f.add(e)}else{if("array"!=l)throw new Error("invalid ");for(const t of n){const e=t[i];if(void 0!==e)for(const t of e)void 0!==t&&f.add(t)}}if(f.push(...d),0==f.length){a&&(s[i]=a);continue}let h=f[0],p=f[0];for(const t of f)t>p?p=t:t<h&&(h=t);const g=a||[h,p];h<g[0]&&(r.push(`column ${i} 'domain' min value is greather than actual min ${h}`),g[0]=h),p>g[1]&&(r.push(`column ${i} 'line.domain' max value is smaller than actual max ${p}`),g[1]=p),s[i]=g}return s}(i,l,r,n);l=function(t,e,n,r){return n.map(((n,s)=>{const{id:o,type:i}=t[s],[l,a]=n;if("number"==a.type&&void 0===a.round)if("number"==i){if(e.every((t=>{const e=t[o];return void 0===e||Number.isInteger(e)})))return[l,Object.assign(Object.assign({},a),{round:0})]}else r.push(`column ${o} is non number and can't use number formatter`);return n}))}(i,r,l,n);const c=ko(i,r),u=function(t,e,n,r,s){const o={};for(let i=0;i<t.length;i++){const[{id:l},[a,c]]=[t[i],n[i]];if(a.convert_column){const t=r.map((t=>t[l])),n=e[l];if(n){const{column:e,warnings:i,stats:u}=a.convert_column(l,n,t,c);o[l]=u,i.forEach((t=>s.push(t)));for(let t=0;t<r.length;t++)r[t]._converted[l]=e[t]}}}return o}(i,a,l,r,n);return{columns:i.map(((t,e)=>({id:t.id,type:t.type,title:t.title,desc:t.desc,delimiter:t.delimiter,format:l[e][1],formatStats:u[t.id],formatter:l[e][0],widthP:c[e],domain:a[t.id]}))),rows:r,messages:On(n)}}function ko(t,e){let n;if(t.some((({width:t})=>null!=t)))n=t.map((({width:t})=>t||1));else{const r=new Hash;for(const n of e)for(const{id:e,type:s}of t){let t;if(void 0!==n[e]){if("string"==s)t=n[e].length;else if("number"==s)t=(""+n[e]).length;else{if("boolean"!=s)continue;t=1}r.getm(e,[]).push(t)}}const s=r.map((t=>t.quantile(.7))),o=s.values().is_empty()?1:s.values().median(),i=1.618,l=s.map((t=>t>o*i?i:t<o/i?1/i:1)),a=1;n=t.map((({id:t})=>l.get(t,a)))}return xo(n)}function xo(t){if(0==t.length)return[];const e=100/t.sum();let n=t.map((t=>(t*e).round()));for(;;){const t=n.sum();if(t>100)n[n.maxi()]-=1;else{if(!(t<100))break;n[n.mini()]+=1}}return n}function jo(t,e,n){return e=function(t,e,n){if(!n)return e;for(const{id:r,type:s}of t){const t=n[r];if(!t)continue;const[o,i]=t;if(void 0===i||""===i)continue;const l=Oo(s,[o,i]);e=e.filter((t=>l(t[r])))}return e}(t,e=function(t,e,n){if(!(n=n.trim()))return e;const r=n.downcase();return e.filter((e=>{for(const{id:n}of t)if((""+e[n]).downcase().includes(r))return!0;return!1}))}(t,e,n.filter),n.filters)}function Oo(t,[e,n]){switch(t){case"string":if("string"!=typeof n)throw new Error("string filter value expected");const t=n,r=n.downcase();switch(e){case"<=":return e=>void 0!==e&&e<=t;case"<":return e=>void 0!==e&&e<t;case"=":return e=>void 0!==e&&e==t;case"!=":return e=>void 0!==e&&e!=t;case">":return e=>void 0!==e&&e>t;case">=":return e=>void 0!==e&&e>=t;case"~":return t=>void 0!==t&&t.downcase().includes(r)}case"boolean":if("boolean"!=typeof n)throw new Error("boolean filter value expected");const s=n;switch(e){case"<=":return t=>void 0!==t&&t<=s;case"<":return t=>void 0!==t&&t<s;case"=":return t=>void 0!==t&&t==s;case"!=":return t=>void 0!==t&&t!=s;case">":return t=>void 0!==t&&t>s;case">=":return t=>void 0!==t&&t>=s;case"~":return t=>void 0!==t&&t==s}case"number":if("number"!=typeof n)throw new Error("number filter value expected");const o=n;switch(e){case"<=":return t=>void 0!==t&&t<=o;case"<":return t=>void 0!==t&&t<o;case"=":return t=>void 0!==t&&t==o;case"!=":return t=>void 0!==t&&t!=o;case">":return t=>void 0!==t&&t>o;case">=":return t=>void 0!==t&&t>=o;case"~":return t=>void 0!==t&&t==o}default:const i=""+n;switch(e){case"<=":return t=>void 0!==t&&""+t<=i;case"<":return t=>void 0!==t&&""+t<i;case"=":return t=>void 0!==t&&""+t==i;case"!=":return t=>void 0!==t&&""+t!=i;case">":return t=>void 0!==t&&""+t>i;case">=":return t=>void 0!==t&&""+t>=i;case"~":return t=>void 0!==t&&""+t==i}}throw new Error(`unknown filter ${t} ${e}`)}function Eo(t){return t.map((t=>{let e=Object.assign({},t);return delete e._i,delete e._converted,e}))}function zo(t){let e,n,r,s,o,i,l,a,c,p;return{c(){e=h("div"),n=h("span"),r=h("span"),r.textContent="w =",s=m(),o=h("input"),y(r,"class","w-5 inline-block"),y(o,"class","w-10 outline-none pl-1 text-xs border border-gray-200 focus:text-gray-900  svelte-1brt80c"),y(o,"type","number"),y(o,"step","0.1"),o.value=i=t[1].toFixed(1),y(n,"class",l=t[2]?"text-gray-900":"plot-table-controls-color"),y(e,"class",a=t[0]+" my-1 text-xs "+(!t[3]&&"invisible"))},m(i,l){d(i,e,l),u(e,n),u(n,r),u(n,s),u(n,o),c||(p=b(o,"change",t[5]),c=!0)},p(t,r){2&r&&i!==(i=t[1].toFixed(1))&&(o.value=i),4&r&&l!==(l=t[2]?"text-gray-900":"plot-table-controls-color")&&y(n,"class",l),9&r&&a!==(a=t[0]+" my-1 text-xs "+(!t[3]&&"invisible"))&&y(e,"class",a)},d(t){t&&f(e),c=!1,p()}}}function So(t){let e,r=t[4]&&zo(t);return{c(){r&&r.c(),e=w()},m(t,n){r&&r.m(t,n),d(t,e,n)},p(t,[n]){t[4]?r?r.p(t,n):(r=zo(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:n,o:n,d(t){r&&r.d(t),t&&f(e)}}}function Ao(t,e,n){let r,s,o,i,{column:l}=e,{align:a}=e,{state:c}=e;const u=(t=>{c.wsort&&n(6,c=Object.assign(Object.assign({},c),{wsort:Object.assign(Object.assign({},c.wsort),{[l.id]:t})}))}).debounce(200);return t.$$set=t=>{"column"in t&&n(7,l=t.column),"align"in t&&n(0,a=t.align),"state"in t&&n(6,c=t.state)},t.$$.update=()=>{192&t.$$.dirty&&n(1,r=(c.wsort||{})[l.id]||0),2&t.$$.dirty&&n(2,s=0!=r),128&t.$$.dirty&&n(3,o=!["image","link"].includes(l.format.type)&&!["unknown","array"].includes(l.type)),64&t.$$.dirty&&n(4,i=c.wsort)},[a,r,s,o,i,({target:{value:t}})=>{n(1,r=parseFloat(t)),u(r)},c,l]}test("normalize_table_options_slow",(()=>{const t=t=>t.map((({id:t,type:e})=>({id:t,type:e})));{const{columns:e,rows:n}=_o({},[["v",null]]);assert.equal(t(e),[{id:"a",type:"string"},{id:"b",type:"unknown"}]),assert.equal(Eo(n),[{a:"v"}])}{const{columns:e,rows:n}=_o({},[{k:"v",k2:null}]);assert.equal(t(e),[{id:"k",type:"string"},{id:"k2",type:"unknown"}]),assert.equal(Eo(n),[{k:"v"}])}{const{columns:e,rows:n}=_o({},[{k:"v"},{k:0}]);assert.equal(t(e),[{id:"k",type:"unknown"}]),assert.equal(Eo(n),[{k:"v"},{k:0}])}{const{columns:t}=_o({},[{v:1}]);assert.equal(t[0].format,{type:"number",round:0})}})),test("calculateColumnWidths",(()=>{assert.equal(ko([{id:"name",type:"string"},{id:"age",type:"number"}],[{name:"Jim Raynor",age:30},{name:"Kate",age:25}]),[62,38])})),test("weightsToPercents",(()=>{assert.equal(xo([2,2]),[50,50]),assert.equal(xo([3,3,3]).sort(),[33,33,34])}));class Co extends at{constructor(t){super(),lt(this,t,Ao,So,a,{column:7,align:0,state:6})}}function qo(t,e,n){const r=t.slice();return r[10]=e[n],r}function Mo(t){let e,n,r,s,o,l,a,c,p,g,w,$=[],v=new Map,_=mo;const k=t=>t[10];for(let e=0;e<_.length;e+=1){let n=qo(t,_,e),r=k(n);v.set(r,$[e]=Ro(r,n))}return{c(){e=h("div"),n=h("span"),r=h("select");for(let t=0;t<$.length;t+=1)$[t].c();o=m(),l=h("input"),y(r,"class","outline-none w-5 inline-block svelte-nsma8g"),y(l,"class","w-10 outline-none pl-1 text-xs border border-gray-200 focus:text-gray-900"),y(l,"type","text"),l.value=a=void 0===t[1][1]?"":""+t[1][1],y(n,"class",c=t[2]?"text-gray-900":"plot-table-controls-color"),y(e,"class",p=t[0]+" my-1 text-xs "+(!t[3]&&"invisible"))},m(s,i){d(s,e,i),u(e,n),u(n,r);for(let t=0;t<$.length;t+=1)$[t].m(r,null);j(r,t[1][0]),u(n,o),u(n,l),g||(w=[b(r,"change",t[5]),b(l,"keyup",t[6])],g=!0)},p(t,o){0&o&&(_=mo,$=tt($,o,k,1,t,_,v,r,Y,Ro,null,qo)),2&o&&s!==(s=t[1][0])&&j(r,t[1][0]),2&o&&a!==(a=void 0===t[1][1]?"":""+t[1][1])&&l.value!==a&&(l.value=a),4&o&&c!==(c=t[2]?"text-gray-900":"plot-table-controls-color")&&y(n,"class",c),9&o&&p!==(p=t[0]+" my-1 text-xs "+(!t[3]&&"invisible"))&&y(e,"class",p)},d(t){t&&f(e);for(let t=0;t<$.length;t+=1)$[t].d();g=!1,i(w)}}}function Ro(t,e){let n,r,s=e[10]+"";return{key:t,first:null,c(){n=h("option"),r=g(s),n.__value=e[10],n.value=n.__value,this.first=n},m(t,e){d(t,n,e),u(n,r)},p(t,n){e=t},d(t){t&&f(n)}}}function Bo(t){let e,r=t[4]&&Mo(t);return{c(){r&&r.c(),e=w()},m(t,n){r&&r.m(t,n),d(t,e,n)},p(t,[n]){t[4]?r?r.p(t,n):(r=Mo(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:n,o:n,d(t){r&&r.d(t),t&&f(e)}}}function Lo(t,e,n){let r,s,o,i,{column:l}=e,{align:a}=e,{state:c}=e;const u=(t=>{c.filters&&n(7,c=Object.assign(Object.assign({},c),{filters:Object.assign(Object.assign({},c.filters),{[l.id]:t})}))}).debounce(200);return t.$$set=t=>{"column"in t&&n(8,l=t.column),"align"in t&&n(0,a=t.align),"state"in t&&n(7,c=t.state)},t.$$.update=()=>{384&t.$$.dirty&&n(1,i=c.filters&&l.id in c.filters?c.filters[l.id]:["=",void 0]),2&t.$$.dirty&&n(2,r=null!=i[1]&&""!==i[1]),256&t.$$.dirty&&n(3,s=!["image","link"].includes(l.format.type)&&!["unknown","array"].includes(l.type)),128&t.$$.dirty&&n(4,o=c.filters)},[a,i,r,s,o,({target:{value:t}})=>{n(1,i=[wo(t),i[1]]),u(i)},({target:{value:t}})=>{n(1,i=[i[0],bo(l,t)]),u(i)},c,l]}class No extends at{constructor(t){super(),lt(this,t,Lo,Bo,a,{column:8,align:0,state:7})}}function To(t){let e,n,r,s,o,i,l,a,c,p,w,v,k,x,j,O,E,z,S,A=t[3].symbol+"";function C(e){t[12](e)}let q={column:t[1],align:"text-right"};function R(e){t[13](e)}void 0!==t[0]&&(q.state=t[0]),w=new Co({props:q}),M.push((()=>nt(w,"state",C)));let B={column:t[1],align:"text-right"};return void 0!==t[0]&&(B.state=t[0]),x=new No({props:B}),M.push((()=>nt(x,"state",R))),{c(){e=h("th"),n=h("a"),r=h("span"),s=g(A),i=m(),l=h("span"),a=g(t[2]),p=m(),rt(w.$$.fragment),k=m(),rt(x.$$.fragment),y(r,"class",o=t[3].klass+" mr-0.5"),y(n,"class","flex justify-between"),y(n,"href","#"),y(n,"title",c=t[1].desc),y(e,"class",O="text-right "+t[4])},m(o,c){d(o,e,c),u(e,n),u(n,r),u(r,s),u(n,i),u(n,l),u(l,a),u(e,p),st(w,e,null),u(e,k),st(x,e,null),E=!0,z||(S=b(n,"click",$(t[6])),z=!0)},p(t,i){(!E||8&i)&&A!==(A=t[3].symbol+"")&&_(s,A),(!E||8&i&&o!==(o=t[3].klass+" mr-0.5"))&&y(r,"class",o),(!E||4&i)&&_(a,t[2]),(!E||2&i&&c!==(c=t[1].desc))&&y(n,"title",c);const l={};2&i&&(l.column=t[1]),!v&&1&i&&(v=!0,l.state=t[0],P((()=>v=!1))),w.$set(l);const u={};2&i&&(u.column=t[1]),!j&&1&i&&(j=!0,u.state=t[0],P((()=>j=!1))),x.$set(u),(!E||16&i&&O!==(O="text-right "+t[4]))&&y(e,"class",O)},i(t){E||(J(w.$$.fragment,t),J(x.$$.fragment,t),E=!0)},o(t){K(w.$$.fragment,t),K(x.$$.fragment,t),E=!1},d(t){t&&f(e),ot(w),ot(x),z=!1,S()}}}function Po(t){let e,n,r,s,o,i,l,a,c,p,w,v,k,x,j,O,E,z,S,A,C,q,R=t[3].symbol+"",B=t[3].symbol+"";function L(e){t[10](e)}let N={column:t[1],align:"text-center"};function T(e){t[11](e)}void 0!==t[0]&&(N.state=t[0]),j=new Co({props:N}),M.push((()=>nt(j,"state",L)));let D={column:t[1],align:"text-center"};return void 0!==t[0]&&(D.state=t[0]),z=new No({props:D}),M.push((()=>nt(z,"state",T))),{c(){e=h("th"),n=h("a"),r=h("span"),s=g(R),o=m(),i=h("span"),l=g(t[2]),a=m(),c=h("span"),p=g(B),x=m(),rt(j.$$.fragment),E=m(),rt(z.$$.fragment),y(r,"class","invisible mr-0.5"),y(c,"class",w=t[3].klass+" ml-0.5"),y(c,"title",v=t[3].title),y(n,"class","flex justify-between"),y(n,"href","#"),y(n,"title",k=t[1].desc),y(e,"class",t[4])},m(f,h){d(f,e,h),u(e,n),u(n,r),u(r,s),u(n,o),u(n,i),u(i,l),u(n,a),u(n,c),u(c,p),u(e,x),st(j,e,null),u(e,E),st(z,e,null),A=!0,C||(q=b(n,"click",$(t[6])),C=!0)},p(t,r){(!A||8&r)&&R!==(R=t[3].symbol+"")&&_(s,R),(!A||4&r)&&_(l,t[2]),(!A||8&r)&&B!==(B=t[3].symbol+"")&&_(p,B),(!A||8&r&&w!==(w=t[3].klass+" ml-0.5"))&&y(c,"class",w),(!A||8&r&&v!==(v=t[3].title))&&y(c,"title",v),(!A||2&r&&k!==(k=t[1].desc))&&y(n,"title",k);const o={};2&r&&(o.column=t[1]),!O&&1&r&&(O=!0,o.state=t[0],P((()=>O=!1))),j.$set(o);const i={};2&r&&(i.column=t[1]),!S&&1&r&&(S=!0,i.state=t[0],P((()=>S=!1))),z.$set(i),(!A||16&r)&&y(e,"class",t[4])},i(t){A||(J(j.$$.fragment,t),J(z.$$.fragment,t),A=!0)},o(t){K(j.$$.fragment,t),K(z.$$.fragment,t),A=!1},d(t){t&&f(e),ot(j),ot(z),C=!1,q()}}}function Do(t){let e,n,r,s,o,i,l,a,c,p,w,v,k,x,j,O,E,z,S,A=t[3].symbol+"";function C(e){t[8](e)}let q={column:t[1],align:"text-left"};function R(e){t[9](e)}void 0!==t[0]&&(q.state=t[0]),v=new Co({props:q}),M.push((()=>nt(v,"state",C)));let B={column:t[1],align:"text-left"};return void 0!==t[0]&&(B.state=t[0]),j=new No({props:B}),M.push((()=>nt(j,"state",R))),{c(){e=h("th"),n=h("a"),r=h("span"),s=g(t[2]),o=m(),i=h("span"),l=g(A),w=m(),rt(v.$$.fragment),x=m(),rt(j.$$.fragment),y(i,"class",a=t[3].klass+" ml-0.5"),y(i,"title",c=t[3].title),y(n,"class","flex justify-between"),y(n,"href","#"),y(n,"title",p=t[1].desc),y(e,"class",t[4])},m(a,c){d(a,e,c),u(e,n),u(n,r),u(r,s),u(n,o),u(n,i),u(i,l),u(e,w),st(v,e,null),u(e,x),st(j,e,null),E=!0,z||(S=b(n,"click",$(t[6])),z=!0)},p(t,r){(!E||4&r)&&_(s,t[2]),(!E||8&r)&&A!==(A=t[3].symbol+"")&&_(l,A),(!E||8&r&&a!==(a=t[3].klass+" ml-0.5"))&&y(i,"class",a),(!E||8&r&&c!==(c=t[3].title))&&y(i,"title",c),(!E||2&r&&p!==(p=t[1].desc))&&y(n,"title",p);const o={};2&r&&(o.column=t[1]),!k&&1&r&&(k=!0,o.state=t[0],P((()=>k=!1))),v.$set(o);const u={};2&r&&(u.column=t[1]),!O&&1&r&&(O=!0,u.state=t[0],P((()=>O=!1))),j.$set(u),(!E||16&r)&&y(e,"class",t[4])},i(t){E||(J(v.$$.fragment,t),J(j.$$.fragment,t),E=!0)},o(t){K(v.$$.fragment,t),K(j.$$.fragment,t),E=!1},d(t){t&&f(e),ot(v),ot(j),z=!1,S()}}}function Ho(t){let e,n,r,s;const o=[Do,Po,To],i=[];return e=function(t,e){return"left"==t[5]?0:"center"==t[5]?1:2}(t),n=i[e]=o[e](t),{c(){n.c(),r=w()},m(t,n){i[e].m(t,n),d(t,r,n),s=!0},p(t,[e]){n.p(t,e)},i(t){s||(J(n),s=!0)},o(t){K(n),s=!1},d(t){i[e].d(t),t&&f(r)}}}function Fo(t,e,n){let r,s,o,{column:i}=e,{state:l}=e,{sortable:a}=e,c=i.id;const u=i.formatter.align,d=u?u(i.format,i.formatStats):"center";return t.$$set=t=>{"column"in t&&n(1,i=t.column),"state"in t&&n(0,l=t.state),"sortable"in t&&n(7,a=t.sortable)},t.$$.update=()=>{2&t.$$.dirty&&n(2,r=null==i.title?i.id:i.title),3&t.$$.dirty&&n(3,s=function(t,e){const n={symbol:"↓",klass:"invisible",title:""};if(e.wsort){const r=e.wsort[t.id],s="wsort: "+Object.entries(e.wsort).map((([t,e])=>`${t}: ${e}`)).join(", ");return void 0===r||0==r?n:r>=0?{symbol:"↑",klass:"text-gray-900",title:s}:{symbol:"↓",klass:"text-gray-900",title:s}}if(e.sort){let t;for(let n=0;n<e.sort.length;n++){const[r,s]=e.sort[n];r==c&&(t=[s,n])}if(!t)return n;const r="sort: "+e.sort.map((([t,e])=>`${t}: ${e}`)).join(", "),[s,o]=t,i="asc"==s?"↓":"↑";let l;if(0==o)l="text-gray-900";else if(1==o)l="text-gray-400";else{if(2!=o)throw new Error("color for more than 3 sort oders isn't supported");l="text-gray-300"}return{symbol:i,klass:l,title:r}}return n}(i,l)),2&t.$$.dirty&&n(4,o=i.delimiter?"plot-delimiter-right":"")},[l,i,r,s,o,d,function(t){if(a&&!["unknown","array"].includes(i.type))if(l.wsort){let e=l.wsort;t.metaKey?i.id in e?e[i.id]=-1*e[i.id]:e[i.id]=1:Object.size(e)>1?e={[c]:1}:i.id in e?e[i.id]=-1*e[i.id]:e={[c]:1},n(0,l=Object.assign(Object.assign({},l),{wsort:e}))}else{let e=l.sort||[];const r=e.i((([t,e])=>t==i.id));t.metaKey?is_undefined(r)?e.push([c,"asc"]):e[r][1]="asc"==e[r][1]?"desc":"asc":e.length>1||is_undefined(r)?e=[[c,"asc"]]:(assert(1==e.length),e[r][1]="asc"==e[r][1]?"desc":"asc"),n(0,l=Object.assign(Object.assign({},l),{sort:e}))}},a,function(t){l=t,n(0,l)},function(t){l=t,n(0,l)},function(t){l=t,n(0,l)},function(t){l=t,n(0,l)},function(t){l=t,n(0,l)},function(t){l=t,n(0,l)}]}class Uo extends at{constructor(t){super(),lt(this,t,Fo,Ho,a,{column:1,state:0,sortable:7})}}function Io(t,e,n){const r=t.slice();return r[4]=e[n],r}function Zo(t,e){let n,r,s,o;function i(t){e[3](t)}let l={column:e[4],sortable:e[2]};return void 0!==e[0]&&(l.state=e[0]),r=new Uo({props:l}),M.push((()=>nt(r,"state",i))),{key:t,first:null,c(){n=w(),rt(r.$$.fragment),this.first=n},m(t,e){d(t,n,e),st(r,t,e),o=!0},p(t,n){e=t;const o={};2&n&&(o.column=e[4]),4&n&&(o.sortable=e[2]),!s&&1&n&&(s=!0,o.state=e[0],P((()=>s=!1))),r.$set(o)},i(t){o||(J(r.$$.fragment,t),o=!0)},o(t){K(r.$$.fragment,t),o=!1},d(t){t&&f(n),ot(r,t)}}}function Wo(t){let e,n,r=[],s=new Map,o=t[1];const i=t=>t[4].id;for(let e=0;e<o.length;e+=1){let n=Io(t,o,e),l=i(n);s.set(l,r[e]=Zo(l,n))}return{c(){e=h("tr");for(let t=0;t<r.length;t+=1)r[t].c()},m(t,s){d(t,e,s);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,[n]){7&n&&(o=t[1],W(),r=tt(r,n,i,1,t,o,s,e,Q,Zo,null,Io),V())},i(t){if(!n){for(let t=0;t<o.length;t+=1)J(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)K(r[t]);n=!1},d(t){t&&f(e);for(let t=0;t<r.length;t+=1)r[t].d()}}}function Vo(t,e,n){let{columns:r}=e,{state:s}=e,{sortable:o}=e;return t.$$set=t=>{"columns"in t&&n(1,r=t.columns),"state"in t&&n(0,s=t.state),"sortable"in t&&n(2,o=t.sortable)},[s,r,o,function(t){s=t,n(0,s)}]}class Jo extends at{constructor(t){super(),lt(this,t,Vo,Wo,a,{columns:1,state:0,sortable:2})}}function Ko(t,e,n){const r=t.slice();return r[4]=e[n],r[6]=n,r}function Xo(t){let e,n,r;var s=t[4].formatter.default;function o(t){return{props:{options:t[4].format,value:t[1][t[4].id]}}}return s&&(e=new s(o(t))),{c(){e&&rt(e.$$.fragment),n=w()},m(t,s){e&&st(e,t,s),d(t,n,s),r=!0},p(t,r){const i={};if(1&r&&(i.options=t[4].format),3&r&&(i.value=t[1][t[4].id]),s!==(s=t[4].formatter.default)){if(e){W();const t=e;K(t.$$.fragment,1,0,(()=>{ot(t,1)})),V()}s?(e=new s(o(t)),rt(e.$$.fragment),J(e.$$.fragment,1),st(e,n.parentNode,n)):e=null}else s&&e.$set(i)},i(t){r||(e&&J(e.$$.fragment,t),r=!0)},o(t){e&&K(e.$$.fragment,t),r=!1},d(t){t&&f(n),e&&ot(e,t)}}}function Go(t){let e,n,r;var s=t[4].formatter.default;function o(t){return{props:{options:t[4].format,value:t[1][t[4].id],converted:t[1]._converted[t[4].id],stats:t[4].formatStats}}}return s&&(e=new s(o(t))),{c(){e&&rt(e.$$.fragment),n=w()},m(t,s){e&&st(e,t,s),d(t,n,s),r=!0},p(t,r){const i={};if(1&r&&(i.options=t[4].format),3&r&&(i.value=t[1][t[4].id]),3&r&&(i.converted=t[1]._converted[t[4].id]),1&r&&(i.stats=t[4].formatStats),s!==(s=t[4].formatter.default)){if(e){W();const t=e;K(t.$$.fragment,1,0,(()=>{ot(t,1)})),V()}s?(e=new s(o(t)),rt(e.$$.fragment),J(e.$$.fragment,1),st(e,n.parentNode,n)):e=null}else s&&e.$set(i)},i(t){r||(e&&J(e.$$.fragment,t),r=!0)},o(t){e&&K(e.$$.fragment,t),r=!1},d(t){t&&f(n),e&&ot(e,t)}}}function Yo(t,e){let n,r,s,o,i,l;const a=[Go,Xo],c=[];function p(t,e){return"_converted"in t[1]&&t[4].id in t[1]._converted?0:1}return r=p(e),s=c[r]=a[r](e),{key:t,first:null,c(){n=h("td"),s.c(),o=m(),y(n,"class",i=e[4].delimiter?"plot-delimiter-right":""),this.first=n},m(t,e){d(t,n,e),c[r].m(n,null),u(n,o),l=!0},p(t,u){let d=r;r=p(e=t),r===d?c[r].p(e,u):(W(),K(c[d],1,1,(()=>{c[d]=null})),V(),s=c[r],s?s.p(e,u):(s=c[r]=a[r](e),s.c()),J(s,1),s.m(n,o)),(!l||1&u&&i!==(i=e[4].delimiter?"plot-delimiter-right":""))&&y(n,"class",i)},i(t){l||(J(s),l=!0)},o(t){K(s),l=!1},d(t){t&&f(n),c[r].d()}}}function Qo(t){let e,n,r,s,o,i=[],a=new Map,c=t[0];const u=t=>t[4].id;for(let e=0;e<c.length;e+=1){let n=Ko(t,c,e),r=u(n);a.set(r,i[e]=Yo(r,n))}return{c(){e=h("tr");for(let t=0;t<i.length;t+=1)i[t].c();y(e,"class",n=t[2]?"bg-gray-100":"")},m(n,a){d(n,e,a);for(let t=0;t<i.length;t+=1)i[t].m(e,null);r=!0,s||(o=b(e,"click",(function(){l(t[3])&&t[3].apply(this,arguments)})),s=!0)},p(s,[o]){t=s,3&o&&(c=t[0],W(),i=tt(i,o,u,1,t,c,a,e,Q,Yo,null,Ko),V()),(!r||4&o&&n!==(n=t[2]?"bg-gray-100":""))&&y(e,"class",n)},i(t){if(!r){for(let t=0;t<c.length;t+=1)J(i[t]);r=!0}},o(t){for(let t=0;t<i.length;t+=1)K(i[t]);r=!1},d(t){t&&f(e);for(let t=0;t<i.length;t+=1)i[t].d();s=!1,o()}}}function ti(t,e,n){let{columns:r}=e,{row:s}=e,{selected:o}=e,{onSelect:i}=e;return t.$$set=t=>{"columns"in t&&n(0,r=t.columns),"row"in t&&n(1,s=t.row),"selected"in t&&n(2,o=t.selected),"onSelect"in t&&n(3,i=t.onSelect)},[r,s,o,i]}class ei extends at{constructor(t){super(),lt(this,t,ti,Qo,a,{columns:0,row:1,selected:2,onSelect:3})}}function ni(t){let e,r,s,o,l,a,p,w,$,v,_,x,j,O=eo(ri(!!t[0].filters))+"";return{c(){e=h("div"),r=h("div"),s=m(),o=h("div"),l=h("input"),a=m(),p=h("button"),w=g("W"),v=m(),_=h("button"),y(r,"class","flex items-center"),y(l,"class","rounded border border-gray-300 text-sm outline-none py-1 px-1 leading-4"),y(l,"type","text"),y(l,"placeholder","Filter"),y(p,"class",$=c(si(!!t[0].wsort))+" svelte-1y842rg"),y(p,"title",t[4]),y(_,"class","focus:outline-none"),y(o,"class","flex items-center space-x-2"),y(e,"class","flex items-center justify-between my-1")},m(n,i){d(n,e,i),u(e,r),u(e,s),u(e,o),u(o,l),k(l,t[1]),u(o,a),u(o,p),u(p,w),u(o,v),u(o,_),_.innerHTML=O,x||(j=[b(l,"input",t[5]),b(l,"keyup",t[2]),b(p,"click",t[3]),b(_,"click",t[6])],x=!0)},p(t,[e]){2&e&&l.value!==t[1]&&k(l,t[1]),1&e&&$!==($=c(si(!!t[0].wsort))+" svelte-1y842rg")&&y(p,"class",$),1&e&&O!==(O=eo(ri(!!t[0].filters))+"")&&(_.innerHTML=O)},i:n,o:n,d(t){t&&f(e),x=!1,i(j)}}}function ri(t){return`h-5 w-5 p-0.5 border border-white rounded ${t?"text-gray-900":"plot-table-controls-color"}`}function si(t){return`letter_button focus:outline-none border border-white rounded ${t?"text-gray-900":"plot-table-controls-color"}`}function oi(t,e,n){let{state:r}=e,s=r.filter;const o=(()=>{n(0,r=Object.assign(Object.assign({},r),{filter:s}))}).debounce(200);const i=['Weighted sorting. "Smart", weighted, ranked sorting, instead of normal sorting.',"It works similar to how humans compare products with many attributes, to find the best one.","Example: find countries with highest salaries, lowest taxes and lowest real estate prices - ordinary sorting would be useless, while weighted sorting would sort the countries in a 'smart' way, similar to how human would do.","Missing values threated as average, like if we don't have tax rate for country, we guess that it probably should be somewhat average. For non number comparable elements sort rank used as weight. ifferent range of values for different columns normalised into [-1..1] range as 'nw = (w - median(w)) / 0.9-quantile(variance(w))*1.11' and limiting min/max outliers by [-1..1].",'- Undefined values threated as average\n- Rank for same values should be the same, like ["a", "a", "b"] should be [0, 0, 1], not [0, 1, 2]\n- Different range of values for different columns normalised into [-1..1] range as\n      nw = (w - median(w)) / 0.9-quantile(variance(w))*1.11 and limiting min/max outliers by [-1..1].'].join("\n\n");return t.$$set=t=>{"state"in t&&n(0,r=t.state)},[r,s,o,function(){n(0,r=r.wsort?Object.assign(Object.assign({},r),{wsort:void 0,sort:void 0}):Object.assign(Object.assign({},r),{wsort:{},sort:void 0}))},i,function(){s=this.value,n(1,s)},()=>n(0,r={...r,filters:r.filters?void 0:{}})]}class ii extends at{constructor(t){super(),lt(this,t,oi,ni,a,{state:0})}}function li(t,e,n){const r=t.slice();return r[18]=e[n],r}function ai(t,e,n){const r=t.slice();return r[21]=e[n],r}function ci(t){let e,n,r=t[0].desc+"";return{c(){e=h("div"),n=g(r),y(e,"class","mb-2")},m(t,r){d(t,e,r),u(e,n)},p(t,e){1&e&&r!==(r=t[0].desc+"")&&_(n,r)},d(t){t&&f(e)}}}function ui(t){let e,n,r,s,o,i,l,a,c,p,g,w,$,v,_,k,x,j=[],O=new Map,E=[],z=new Map,S=t[3];const A=t=>t[21].id;for(let e=0;e<S.length;e+=1){let n=ai(t,S,e),r=A(n);O.set(r,j[e]=fi(r,n))}function C(e){t[14](e)}let q={};function R(e){t[15](e)}void 0!==t[2]&&(q.state=t[2]),i=new ii({props:q}),M.push((()=>nt(i,"state",C)));let B={columns:t[3],sortable:t[7]};void 0!==t[2]&&(B.state=t[2]),g=new Jo({props:B}),M.push((()=>nt(g,"state",R)));let L=t[8];const N=t=>t[18]._i;for(let e=0;e<L.length;e+=1){let n=li(t,L,e),r=N(n);z.set(r,E[e]=hi(r,n))}return{c(){e=h("table"),n=h("colgroup");for(let t=0;t<j.length;t+=1)j[t].c();r=m(),s=h("tr"),o=h("td"),rt(i.$$.fragment),p=m(),rt(g.$$.fragment),$=m();for(let t=0;t<E.length;t+=1)E[t].c();y(o,"colspan",a=t[3].length),y(s,"class",c="plot-table-toolbar "+(!t[9]&&"hidden")),y(e,"class",v="plot-table font-mono "+("full"==t[0].width?"w-full":""))},m(l,a){d(l,e,a),u(e,n);for(let t=0;t<j.length;t+=1)j[t].m(n,null);u(e,r),u(e,s),u(s,o),st(i,o,null),u(e,p),st(g,e,null),u(e,$);for(let t=0;t<E.length;t+=1)E[t].m(e,null);_=!0,k||(x=b(e,"click",t[17]),k=!0)},p(t,r){8&r&&(S=t[3],j=tt(j,r,A,1,t,S,O,n,Y,fi,null,ai));const u={};!l&&4&r&&(l=!0,u.state=t[2],P((()=>l=!1))),i.$set(u),(!_||8&r&&a!==(a=t[3].length))&&y(o,"colspan",a),(!_||512&r&&c!==(c="plot-table-toolbar "+(!t[9]&&"hidden")))&&y(s,"class",c);const d={};8&r&&(d.columns=t[3]),128&r&&(d.sortable=t[7]),!w&&4&r&&(w=!0,d.state=t[2],P((()=>w=!1))),g.$set(d),1320&r&&(L=t[8],W(),E=tt(E,r,N,1,t,L,z,e,Q,hi,null,li),V()),(!_||1&r&&v!==(v="plot-table font-mono "+("full"==t[0].width?"w-full":"")))&&y(e,"class",v)},i(t){if(!_){J(i.$$.fragment,t),J(g.$$.fragment,t);for(let t=0;t<L.length;t+=1)J(E[t]);_=!0}},o(t){K(i.$$.fragment,t),K(g.$$.fragment,t);for(let t=0;t<E.length;t+=1)K(E[t]);_=!1},d(t){t&&f(e);for(let t=0;t<j.length;t+=1)j[t].d();ot(i),ot(g);for(let t=0;t<E.length;t+=1)E[t].d();k=!1,x()}}}function di(t){let e;return{c(){e=h("div"),e.innerHTML="<div>Table is empty</div>",y(e,"class","text-gray-400 h-8 flex items-center")},m(t,n){d(t,e,n)},p:n,i:n,o:n,d(t){t&&f(e)}}}function fi(t,e){let n;return{key:t,first:null,c(){n=h("col"),x(n,"width",e[21].widthP+"%"),this.first=n},m(t,e){d(t,n,e)},p(t,r){e=t,8&r&&x(n,"width",e[21].widthP+"%")},d(t){t&&f(n)}}}function hi(t,e){let n,r,s;function o(...t){return e[16](e[18],...t)}return r=new ei({props:{columns:e[3],row:e[18],selected:e[5].has(e[18]._i),onSelect:o}}),{key:t,first:null,c(){n=w(),rt(r.$$.fragment),this.first=n},m(t,e){d(t,n,e),st(r,t,e),s=!0},p(t,n){e=t;const s={};8&n&&(s.columns=e[3]),256&n&&(s.row=e[18]),288&n&&(s.selected=e[5].has(e[18]._i)),256&n&&(s.onSelect=o),r.$set(s)},i(t){s||(J(r.$$.fragment,t),s=!0)},o(t){K(r.$$.fragment,t),s=!1},d(t){t&&f(n),ot(r,t)}}}function pi(t){let e,n,r,s,o,i,l={ctx:t,current:null,token:null,hasCatch:!1,pending:wi,then:mi,catch:gi,value:1};X(r=Gt({...t[2],selected:t[5]}),l);let a={ctx:t,current:null,token:null,hasCatch:!1,pending:yi,then:$i,catch:bi,value:1};return X(i=Gt(t[3]),a),{c(){e=h("div"),e.textContent="Debug:",n=m(),l.block.c(),s=m(),o=w(),a.block.c(),y(e,"class","mt-3")},m(t,r){d(t,e,r),d(t,n,r),l.block.m(t,l.anchor=r),l.mount=()=>s.parentNode,l.anchor=s,d(t,s,r),d(t,o,r),a.block.m(t,a.anchor=r),a.mount=()=>o.parentNode,a.anchor=o},p(e,n){t=e,l.ctx=t,36&n&&r!==(r=Gt({...t[2],selected:t[5]}))&&X(r,l)||G(l,t,n),a.ctx=t,8&n&&i!==(i=Gt(t[3]))&&X(i,a)||G(a,t,n)},d(t){t&&f(e),t&&f(n),l.block.d(t),l.token=null,l=null,t&&f(s),t&&f(o),a.block.d(t),a.token=null,a=null}}}function gi(t){return{c:n,m:n,p:n,d:n}}function mi(t){let e,n;return{c(){e=h("textarea"),y(e,"class","block focus:outline-none rounded border border-gray-200 text-xs overflow-scroll mt-4"),e.readOnly=!0,x(e,"resize","none"),x(e,"width","30rem"),x(e,"height","5rem"),e.value=n=t[1]},m(t,n){d(t,e,n)},p(t,r){36&r&&n!==(n=t[1])&&(e.value=n)},d(t){t&&f(e)}}}function wi(t){let e;return{c(){e=g("Waiting...")},m(t,n){d(t,e,n)},p:n,d(t){t&&f(e)}}}function bi(t){return{c:n,m:n,p:n,d:n}}function $i(t){let e,n;return{c(){e=h("textarea"),y(e,"class","block focus:outline-none rounded border border-gray-200 text-xs overflow-scroll mt-4"),e.readOnly=!0,x(e,"resize","none"),x(e,"width","30rem"),x(e,"height","10rem"),e.value=n=t[1]},m(t,n){d(t,e,n)},p(t,r){8&r&&n!==(n=t[1])&&(e.value=n)},d(t){t&&f(e)}}}function yi(t){let e;return{c(){e=g("Waiting...")},m(t,n){d(t,e,n)},p:n,d(t){t&&f(e)}}}function vi(t){let e,n,r,s,o,i,l,a,c,u=t[0].desc&&ci(t);const h=[di,ui],p=[];function g(t,e){return 16&e&&(n=!!t[4].is_empty()),n?0:1}r=g(t,-1),s=p[r]=h[r](t),i=new jn({props:{messages:t[6]}});let b=t[0].debug&&pi(t);return{c(){u&&u.c(),e=m(),s.c(),o=m(),rt(i.$$.fragment),l=m(),b&&b.c(),a=w()},m(t,n){u&&u.m(t,n),d(t,e,n),p[r].m(t,n),d(t,o,n),st(i,t,n),d(t,l,n),b&&b.m(t,n),d(t,a,n),c=!0},p(t,[n]){t[0].desc?u?u.p(t,n):(u=ci(t),u.c(),u.m(e.parentNode,e)):u&&(u.d(1),u=null);let l=r;r=g(t,n),r===l?p[r].p(t,n):(W(),K(p[l],1,1,(()=>{p[l]=null})),V(),s=p[r],s?s.p(t,n):(s=p[r]=h[r](t),s.c()),J(s,1),s.m(o.parentNode,o));const c={};64&n&&(c.messages=t[6]),i.$set(c),t[0].debug?b?b.p(t,n):(b=pi(t),b.c(),b.m(a.parentNode,a)):b&&(b.d(1),b=null)},i(t){c||(J(s),J(i.$$.fragment,t),c=!0)},o(t){K(s),K(i.$$.fragment,t),c=!1},d(t){u&&u.d(t),t&&f(e),p[r].d(t),t&&f(o),ot(i,t),t&&f(l),b&&b.d(t),t&&f(a)}}}function _i(t,e,n){let r,s,o,i,l,a,c,u,{options:d}=e,{data:f}=e,h={filter:d.filter||"",sort:d.sort,wsort:d.wsort,show_controls:!0,show_toolbar:0!=d.show_toolbar},p=!1,g=new Set(d.selected||[]);function m(t,e){!function(t,e,n,r){const s=new Set(n);if(t.metaKey)s.has(e)?s.delete(e):s.add(e);else{const t=s.has(e)&&1==s.size;s.clear(),t||s.add(e)}r(s)}(t,e,g,(t=>n(5,g=t)))}return t.$$set=t=>{"options"in t&&n(0,d=t.options),"data"in t&&n(1,f=t.data)},t.$$.update=()=>{3&t.$$.dirty&&n(12,r=_o(d,f)),4096&t.$$.dirty&&n(3,s=r.columns),4096&t.$$.dirty&&n(4,o=r.rows),4096&t.$$.dirty&&n(6,i=r.messages),2057&t.$$.dirty&&(p||(n(2,h.filters=function(t,e){if(!e)return;const n={};for(const r of t){const t=e[r.id];if(!t)continue;const s=bo(r,""+t[1]);void 0!==s&&(n[r.id]=[wo(t[0]),s])}return n}(s,d.filters),h),n(11,p=!0))),1&t.$$.dirty&&n(7,l=0!=d.sortable),28&t.$$.dirty&&n(13,a=jo(s,o,h)),8204&t.$$.dirty&&n(8,c=function(t,e,{sort:n,wsort:r}){return n&&!n.is_empty()?po(t,e,n):r&&!Object.is_empty(r)?go(t,e,r):e}(s,a,h)),4&t.$$.dirty&&n(9,u=h.show_toolbar&&(h.show_controls||h.sort||h.wsort||h.filter||h.filters))},[d,f,h,s,o,g,i,l,c,u,m,p,r,a,function(t){h=t,n(2,h),n(11,p),n(3,s),n(0,d),n(12,r),n(1,f)},function(t){h=t,n(2,h),n(11,p),n(3,s),n(0,d),n(12,r),n(1,f)},(t,e)=>m(e,t._i),()=>n(2,h={...h,show_controls:!0})]}class ki extends at{constructor(t){super(),lt(this,t,_i,vi,a,{options:0,data:1})}}function xi(t){let e,n;return e=new Lt({props:{error:t[3]}}),{c(){rt(e.$$.fragment)},m(t,r){st(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.error=t[3]),e.$set(r)},i(t){n||(J(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){ot(e,t)}}}function ji(t){let e,n;return e=new ki({props:{options:t[0].table||{},data:t[2]}}),{c(){rt(e.$$.fragment)},m(t,r){st(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.options=t[0].table||{}),1&n&&(r.data=t[2]),e.$set(r)},i(t){n||(J(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){ot(e,t)}}}function Oi(t){let e,r;return e=new Pt({}),{c(){rt(e.$$.fragment)},m(t,n){st(e,t,n),r=!0},p:n,i(t){r||(J(e.$$.fragment,t),r=!0)},o(t){K(e.$$.fragment,t),r=!1},d(t){ot(e,t)}}}function Ei(t){let e,n,r,s,o,i={ctx:t,current:null,token:null,hasCatch:!0,pending:Oi,then:ji,catch:xi,value:2,error:3,blocks:[,,,]};return X(n=Jt(t[0].data),i),s=new mn({}),{c(){e=h("div"),i.block.c(),r=m(),rt(s.$$.fragment),y(e,"class","TableBlockContent relative")},m(t,n){d(t,e,n),i.block.m(e,i.anchor=null),i.mount=()=>e,i.anchor=r,u(e,r),st(s,e,null),o=!0},p(e,[r]){t=e,i.ctx=t,1&r&&n!==(n=Jt(t[0].data))&&X(n,i)||G(i,t,r)},i(t){o||(J(i.block),J(s.$$.fragment,t),o=!0)},o(t){for(let t=0;t<3;t+=1){K(i.blocks[t])}K(s.$$.fragment,t),o=!1},d(t){t&&f(e),i.block.d(),i.token=null,i=null,ot(s)}}}const zi={match_and_normalize:t=>{return is_object(t)&&"table"in t?is_array(t.table)?{data:t.table,table:{}}:t:is_array(t)?{data:t,table:{}}:(e=t)&&"object"==typeof e&&"csv_table"==e.type?function(t){const e=[];for(const n of t.columns){let r="unknown";for(const e of t.rows){const t=e[n];if(null!=t){r=typeof t;break}}e.push(r)}const n=t.columns.map(((t,n)=>({id:t,type:e[n]})));return{data:t.rows,table:{columns:n}}}(t):void 0;var e}};function Si(t,e,n){let{block:r}=e,{is_narrow:s}=e;return discard(s),t.$$set=t=>{"block"in t&&n(0,r=t.block),"is_narrow"in t&&n(1,s=t.is_narrow)},[r,s]}var Ai=Object.freeze({__proto__:null,default:class extends at{constructor(t){super(),lt(this,t,Si,Ei,a,{block:0,is_narrow:1})}},definition:zi});function Ci(e,n){if(null!=e){if(is_object(e)){const n=e;if(n.block){if(!is_array(n.block)||2!=n.block.length)throw"invalid block, it should be `block: [block_name, 0.1]`";const e=n.block[0],{definition:r,default:s}=t.blocks[e],o=r.match_and_normalize(n);if(!o)throw`Data not matching '${e}' block`;return{name:e,klass:s,ndata:o}}for(const e in t.blocks){const{definition:r,default:s}=t.blocks[e],o=r.match_and_normalize(n);if(o)return{name:e,klass:s,ndata:o}}}if(n){const r=t.blocks_for_file_extensions[n],s=t.blocks[r];if(s){const{definition:t,default:o}=s,i=t.match_and_normalize(e);if(!i)throw`Data not matching '${r}' block, registered for extension ${n}`;return{name:r,klass:o,ndata:i}}}if(is_array(e)){const n="table",{definition:r,default:s}=t.blocks[n],o=r.match_and_normalize(e);if(!o)throw"internal error, data not matching table block";return{name:n,klass:s,ndata:o}}if(is_string(e)){const n="table",{definition:r,default:s}=t.blocks[n],o=r.match_and_normalize(e);if(!o)throw"internal error, data not matching text block";return{name:n,klass:s,ndata:o}}}}t.blocks.image=Mn,t.blocks.text=Dn,t.blocks.chart=Ar,t.blocks.table=Ai;class qi{constructor(t,e=[],n={}){this.component=t,this.ids=e,this.data=n}with(t){if(t instanceof Error)return this.with({exception:t.message||"unknown error",stack:t.stack||""});if(is_string(t)||is_number(t))return new qi(this.component,[...this.ids,""+t],Object.assign({},this.data));{let e=new qi(this.component,[...this.ids],Object.assign({},this.data)),n=t;for(const t in n){let r=n[t];"id"==t?e.ids.push(""+r):"ids"==t?e.ids.push(...is_array(r)?r.map((t=>""+t)):[""+r]):e.data[t]=r}return e}}message(t){Mi(this.with(t))}debug(t){this.message({debug:t})}info(t){this.message({info:t})}warn(t){this.message({warn:t})}error(t){t instanceof Error?this.with(t).message({error:t.message||"unknown error"}):this.message({error:t})}logfn(t){null!=t&&(is_string(t)?this.info(t):t(this))}}function Mi(t){let e="",n="";for(const r of["debug","info","warn","error"])if(r in t.data){e=r,n=""+(t.data[r]||"invalid log message type");break}if(""==e)return void Mi(t.with({warn:"invalid log message, no level"}));let r=function(t){const e=4;return t.take(e).downcase().padStart(e," ")+" | "}(t.component)+function(t){const e=7;return t.map((t=>t.take(e).downcase().padEnd(e," ")+" ")).join(", ")}(t.ids)+function(t,e){const n=/(\{[a-zA-Z0-9_]+\})/g;return t.replace(n,((t,n)=>{let r;const s=n.substring(1,n.length-1);return r=s in e?e[s]:s,(""+r).replace(/\n/g," ")}))}(n,t.data)+(s=t.data,Object.is_empty(s)?"":" | "+St(s));var s;if("debug"==e||"info"==e?console.log("  "+r):"warn"==e?console.warn("W "+r):"error"==e&&console.error("E "+r),"stack"in t.data){let e=""+(t.data.stack||"can't get stack");console.error("\n"+e)}}function Ri(t){let e,n,r=t[1].title+"";return{c(){e=h("div"),n=g(r),y(e,"class","plot-title")},m(t,r){d(t,e,r),u(e,n)},p(t,e){2&e&&r!==(r=t[1].title+"")&&_(n,r)},d(t){t&&f(e)}}}function Bi(t){let e,n;return e=new dn({props:{markdown:t[1].desc}}),{c(){rt(e.$$.fragment)},m(t,r){st(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.markdown=t[1].desc),e.$set(r)},i(t){n||(J(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){ot(e,t)}}}function Li(t){let e,n,r,s,o,i,l,a,c,p=t[1].title&&Ri(t),g=t[1].desc&&Bi(t);var w=t[2];function b(t){return{props:{block:t[1],is_narrow:!1}}}return w&&(o=new w(b(t))),l=new mn({props:{is_main:!0}}),{c(){e=h("div"),p&&p.c(),n=m(),g&&g.c(),r=m(),s=h("div"),o&&rt(o.$$.fragment),i=m(),rt(l.$$.fragment),y(s,"class","content"),y(e,"class",a="plot-single plot-single-"+t[0]+" plot-style-"+t[3])},m(t,a){d(t,e,a),p&&p.m(e,null),u(e,n),g&&g.m(e,null),u(e,r),u(e,s),o&&st(o,s,null),u(e,i),st(l,e,null),c=!0},p(t,[i]){t[1].title?p?p.p(t,i):(p=Ri(t),p.c(),p.m(e,n)):p&&(p.d(1),p=null),t[1].desc?g?(g.p(t,i),2&i&&J(g,1)):(g=Bi(t),g.c(),J(g,1),g.m(e,r)):g&&(W(),K(g,1,1,(()=>{g=null})),V());const l={};if(2&i&&(l.block=t[1]),w!==(w=t[2])){if(o){W();const t=o;K(t.$$.fragment,1,0,(()=>{ot(t,1)})),V()}w?(o=new w(b(t)),rt(o.$$.fragment),J(o.$$.fragment,1),st(o,s,null)):o=null}else w&&o.$set(l);(!c||9&i&&a!==(a="plot-single plot-single-"+t[0]+" plot-style-"+t[3]))&&y(e,"class",a)},i(t){c||(J(g),o&&J(o.$$.fragment,t),J(l.$$.fragment,t),c=!0)},o(t){K(g),o&&K(o.$$.fragment,t),K(l.$$.fragment,t),c=!1},d(t){t&&f(e),p&&p.d(),g&&g.d(),o&&ot(o),ot(l)}}}function Ni(t,e,n){let r,{default_title:s}=e,{block_name:o}=e,{data:i}=e,{block_impl:l}=e;return t.$$set=t=>{"default_title"in t&&n(4,s=t.default_title),"block_name"in t&&n(0,o=t.block_name),"data"in t&&n(1,i=t.data),"block_impl"in t&&n(2,l=t.block_impl)},t.$$.update=()=>{18&t.$$.dirty&&(document.title=is_object(i)&&i.title||"id"in i&&""+i.id||s||"PLOT"),2&t.$$.dirty&&n(3,r=i.style||"normal")},[o,i,l,r,s]}class Ti extends at{constructor(t){super(),lt(this,t,Ni,Li,a,{default_title:4,block_name:0,data:1,block_impl:2})}}var Pi=ee(Object.freeze({__proto__:null,default:{}})),Di=ne((function(t,e){var n;t.exports=n=n||function(t,e){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==te&&te.crypto&&(n=te.crypto),!n)try{n=Pi}catch(t){}var r=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),o={},i=o.lib={},l=i.Base={extend:function(t){var e=s(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=i.WordArray=l.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,s=t.sigBytes;if(this.clamp(),r%4)for(var o=0;o<s;o++){var i=n[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=i<<24-(r+o)%4*8}else for(var l=0;l<s;l+=4)e[r+l>>>2]=n[l>>>2];return this.sigBytes+=s,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=l.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(r());return new a.init(e,t)}}),c=o.enc={},u=c.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],s=0;s<n;s++){var o=e[s>>>2]>>>24-s%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new a.init(n,e/2)}},d=c.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],s=0;s<n;s++){var o=e[s>>>2]>>>24-s%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new a.init(n,e)}},f=c.Utf8={stringify:function(t){try{return decodeURIComponent(escape(d.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return d.parse(unescape(encodeURIComponent(t)))}},h=i.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=f.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n,r=this._data,s=r.words,o=r.sigBytes,i=this.blockSize,l=o/(4*i),c=(l=e?t.ceil(l):t.max((0|l)-this._minBufferSize,0))*i,u=t.min(4*c,o);if(c){for(var d=0;d<c;d+=i)this._doProcessBlock(s,d);n=s.splice(0,c),r.sigBytes-=u}return new a.init(n,u)},clone:function(){var t=l.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});i.Hasher=h.extend({cfg:l.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new p.HMAC.init(t,n).finalize(e)}}});var p=o.algo={};return o}(Math)})),Hi=ne((function(t,e){var n;t.exports=(n=Di,function(t){var e=n,r=e.lib,s=r.WordArray,o=r.Hasher,i=e.algo,l=[];!function(){for(var e=0;e<64;e++)l[e]=4294967296*t.abs(t.sin(e+1))|0}();var a=i.MD5=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var r=e+n,s=t[r];t[r]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}var o=this._hash.words,i=t[e+0],a=t[e+1],h=t[e+2],p=t[e+3],g=t[e+4],m=t[e+5],w=t[e+6],b=t[e+7],$=t[e+8],y=t[e+9],v=t[e+10],_=t[e+11],k=t[e+12],x=t[e+13],j=t[e+14],O=t[e+15],E=o[0],z=o[1],S=o[2],A=o[3];E=c(E,z,S,A,i,7,l[0]),A=c(A,E,z,S,a,12,l[1]),S=c(S,A,E,z,h,17,l[2]),z=c(z,S,A,E,p,22,l[3]),E=c(E,z,S,A,g,7,l[4]),A=c(A,E,z,S,m,12,l[5]),S=c(S,A,E,z,w,17,l[6]),z=c(z,S,A,E,b,22,l[7]),E=c(E,z,S,A,$,7,l[8]),A=c(A,E,z,S,y,12,l[9]),S=c(S,A,E,z,v,17,l[10]),z=c(z,S,A,E,_,22,l[11]),E=c(E,z,S,A,k,7,l[12]),A=c(A,E,z,S,x,12,l[13]),S=c(S,A,E,z,j,17,l[14]),E=u(E,z=c(z,S,A,E,O,22,l[15]),S,A,a,5,l[16]),A=u(A,E,z,S,w,9,l[17]),S=u(S,A,E,z,_,14,l[18]),z=u(z,S,A,E,i,20,l[19]),E=u(E,z,S,A,m,5,l[20]),A=u(A,E,z,S,v,9,l[21]),S=u(S,A,E,z,O,14,l[22]),z=u(z,S,A,E,g,20,l[23]),E=u(E,z,S,A,y,5,l[24]),A=u(A,E,z,S,j,9,l[25]),S=u(S,A,E,z,p,14,l[26]),z=u(z,S,A,E,$,20,l[27]),E=u(E,z,S,A,x,5,l[28]),A=u(A,E,z,S,h,9,l[29]),S=u(S,A,E,z,b,14,l[30]),E=d(E,z=u(z,S,A,E,k,20,l[31]),S,A,m,4,l[32]),A=d(A,E,z,S,$,11,l[33]),S=d(S,A,E,z,_,16,l[34]),z=d(z,S,A,E,j,23,l[35]),E=d(E,z,S,A,a,4,l[36]),A=d(A,E,z,S,g,11,l[37]),S=d(S,A,E,z,b,16,l[38]),z=d(z,S,A,E,v,23,l[39]),E=d(E,z,S,A,x,4,l[40]),A=d(A,E,z,S,i,11,l[41]),S=d(S,A,E,z,p,16,l[42]),z=d(z,S,A,E,w,23,l[43]),E=d(E,z,S,A,y,4,l[44]),A=d(A,E,z,S,k,11,l[45]),S=d(S,A,E,z,O,16,l[46]),E=f(E,z=d(z,S,A,E,h,23,l[47]),S,A,i,6,l[48]),A=f(A,E,z,S,b,10,l[49]),S=f(S,A,E,z,j,15,l[50]),z=f(z,S,A,E,m,21,l[51]),E=f(E,z,S,A,k,6,l[52]),A=f(A,E,z,S,p,10,l[53]),S=f(S,A,E,z,v,15,l[54]),z=f(z,S,A,E,a,21,l[55]),E=f(E,z,S,A,$,6,l[56]),A=f(A,E,z,S,O,10,l[57]),S=f(S,A,E,z,w,15,l[58]),z=f(z,S,A,E,x,21,l[59]),E=f(E,z,S,A,g,6,l[60]),A=f(A,E,z,S,_,10,l[61]),S=f(S,A,E,z,h,15,l[62]),z=f(z,S,A,E,y,21,l[63]),o[0]=o[0]+E|0,o[1]=o[1]+z|0,o[2]=o[2]+S|0,o[3]=o[3]+A|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,s=8*e.sigBytes;n[s>>>5]|=128<<24-s%32;var o=t.floor(r/4294967296),i=r;n[15+(s+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(s+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(n.length+1),this._process();for(var l=this._hash,a=l.words,c=0;c<4;c++){var u=a[c];a[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return l},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});function c(t,e,n,r,s,o,i){var l=t+(e&n|~e&r)+s+i;return(l<<o|l>>>32-o)+e}function u(t,e,n,r,s,o,i){var l=t+(e&r|n&~r)+s+i;return(l<<o|l>>>32-o)+e}function d(t,e,n,r,s,o,i){var l=t+(e^n^r)+s+i;return(l<<o|l>>>32-o)+e}function f(t,e,n,r,s,o,i){var l=t+(n^(e|~r))+s+i;return(l<<o|l>>>32-o)+e}e.MD5=o._createHelper(a),e.HmacMD5=o._createHmacHelper(a)}(Math),n.MD5)})),Fi=ne((function(t,e){var n;t.exports=(n=Di,function(t){var e=n,r=e.lib,s=r.WordArray,o=r.Hasher,i=e.algo,l=[],a=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var r=2,s=0;s<64;)e(r)&&(s<8&&(l[s]=n(t.pow(r,.5))),a[s]=n(t.pow(r,1/3)),s++),r++}();var c=[],u=i.SHA256=o.extend({_doReset:function(){this._hash=new s.init(l.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],s=n[1],o=n[2],i=n[3],l=n[4],u=n[5],d=n[6],f=n[7],h=0;h<64;h++){if(h<16)c[h]=0|t[e+h];else{var p=c[h-15],g=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,m=c[h-2],w=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;c[h]=g+c[h-7]+w+c[h-16]}var b=r&s^r&o^s&o,$=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),y=f+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&u^~l&d)+a[h]+c[h];f=d,d=u,u=l,l=i+y|0,i=o,o=s,s=r,r=y+($+b)|0}n[0]=n[0]+r|0,n[1]=n[1]+s|0,n[2]=n[2]+o|0,n[3]=n[3]+i|0,n[4]=n[4]+l|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+f|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,s=8*e.sigBytes;return n[s>>>5]|=128<<24-s%32,n[14+(s+64>>>9<<4)]=t.floor(r/4294967296),n[15+(s+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=o._createHelper(u),e.HmacSHA256=o._createHmacHelper(u)}(Math),n.SHA256)}));function Ui(t,e="md5",n="base58"){let r;if("number"==typeof t&&(t=""+t),"md5"==e)r=Hi(t);else{if("sha256"!=e)throw"unknown hash algo";r=Fi(t)}if("base58"==n)return function(t,e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"){var n,r,s,o,i=[],l="";for(n in t)for(r=0,l+=(s=t[n])||l.length^n?"":1;r in i||s;)s=(o=(o=i[r])?256*o+s:s)/58|0,i[r]=o%58,r++;for(;r--;)l+=e[i[r]];return l}(function(t){var e,n,r=t.words.length,s=new Uint8Array(r<<2),o=0;for(n=0;n<r;n++)e=t.words[n],s[o++]=e>>24,s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=255&e;return s}(r));throw"unknown encoding"}function Ii(t){let e,n,r,s,o,l,a,c,p,$,v,k=(t[2].block.title||t[2].block.id)+"";function x(t,e){return t[1]?Vi:Wi}let j=x(t),O=j(t),E=!t[1]&&Ji(t);return{c(){e=h("div"),n=g(k),r=m(),s=h("button"),O.c(),a=m(),E&&E.c(),c=w(),y(s,"class","\n          plot-ec\n          absolute top-0 right-0\n          plot-page-controls-color focus:outline-none\n        "),y(s,"title",o=t[1]?"Expand":"Collapse"),y(e,"class","\n        plot-title font-bold\n        relative cursor-pointer\n      "),y(e,"title",l=t[1]?"Click to Expand":"Click to collapse")},m(o,i){d(o,e,i),u(e,n),u(e,r),u(e,s),O.m(s,null),d(o,a,i),E&&E.m(o,i),d(o,c,i),p=!0,$||(v=[b(s,"click",t[3]),b(e,"click",t[3])],$=!0)},p(t,r){(!p||4&r)&&k!==(k=(t[2].block.title||t[2].block.id)+"")&&_(n,k),j===(j=x(t))&&O?O.p(t,r):(O.d(1),O=j(t),O&&(O.c(),O.m(s,null))),(!p||2&r&&o!==(o=t[1]?"Expand":"Collapse"))&&y(s,"title",o),(!p||2&r&&l!==(l=t[1]?"Click to Expand":"Click to collapse"))&&y(e,"title",l),t[1]?E&&(W(),K(E,1,1,(()=>{E=null})),V()):E?(E.p(t,r),2&r&&J(E,1)):(E=Ji(t),E.c(),J(E,1),E.m(c.parentNode,c))},i(t){p||(J(E),p=!0)},o(t){K(E),p=!1},d(t){t&&f(e),O.d(),t&&f(a),E&&E.d(t),t&&f(c),$=!1,i(v)}}}function Zi(t){let e,n;return e=new Lt({props:{error:t[2].message}}),{c(){rt(e.$$.fragment)},m(t,r){st(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.error=t[2].message),e.$set(r)},i(t){n||(J(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){ot(e,t)}}}function Wi(t){let e,r=`<svg class="${"h-5 w-5 p-0.5"}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>`;let s;return{c(){s=w(),e=new S(s)},m(t,n){e.m(r,t,n),d(t,s,n)},p:n,d(t){t&&f(s),t&&e.d()}}}function Vi(t){let e,r=`<svg class="${"h-5 w-5 p-0.5"}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>`;let s;return{c(){s=w(),e=new S(s)},m(t,n){e.m(r,t,n),d(t,s,n)},p:n,d(t){t&&f(s),t&&e.d()}}}function Ji(t){let e,n,r,s,o,i=t[2].block.desc&&Ki(t);var l=t[2].klass;function a(t){return{props:{block:t[2].ndata,is_narrow:!1}}}return l&&(r=new l(a(t))),{c(){e=h("div"),i&&i.c(),n=m(),r&&rt(r.$$.fragment),s=w(),y(e,"class","plot-desc")},m(t,l){d(t,e,l),i&&i.m(e,null),d(t,n,l),r&&st(r,t,l),d(t,s,l),o=!0},p(t,n){t[2].block.desc?i?(i.p(t,n),4&n&&J(i,1)):(i=Ki(t),i.c(),J(i,1),i.m(e,null)):i&&(W(),K(i,1,1,(()=>{i=null})),V());const o={};if(4&n&&(o.block=t[2].ndata),l!==(l=t[2].klass)){if(r){W();const t=r;K(t.$$.fragment,1,0,(()=>{ot(t,1)})),V()}l?(r=new l(a(t)),rt(r.$$.fragment),J(r.$$.fragment,1),st(r,s.parentNode,s)):r=null}else l&&r.$set(o)},i(t){o||(J(i),r&&J(r.$$.fragment,t),o=!0)},o(t){K(i),r&&K(r.$$.fragment,t),o=!1},d(t){t&&f(e),i&&i.d(),t&&f(n),t&&f(s),r&&ot(r,t)}}}function Ki(t){let e,n;return e=new dn({props:{markdown:t[2].block.desc}}),{c(){rt(e.$$.fragment)},m(t,r){st(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.markdown=t[2].block.desc),e.$set(r)},i(t){n||(J(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){ot(e,t)}}}function Xi(t){let e,n,r,s,o;const i=[Zi,Ii],l=[];function a(t,e){return t[2].is_error?0:1}return n=a(t),r=l[n]=i[n](t),{c(){e=h("div"),r.c(),y(e,"id",s="block_"+t[0].id),y(e,"class","plot-block-container")},m(t,r){d(t,e,r),l[n].m(e,null),o=!0},p(t,[c]){let u=n;n=a(t),n===u?l[n].p(t,c):(W(),K(l[u],1,1,(()=>{l[u]=null})),V(),r=l[n],r?r.p(t,c):(r=l[n]=i[n](t),r.c()),J(r,1),r.m(e,null)),(!o||1&c&&s!==(s="block_"+t[0].id))&&y(e,"id",s)},i(t){o||(J(r),o=!0)},o(t){K(r),o=!1},d(t){t&&f(e),l[n].d()}}}function Gi(t,e,n){let r,{block:s}=e,{is_collapsed:o}=e,{switch_collapsed:i}=e;return t.$$set=t=>{"block"in t&&n(0,s=t.block),"is_collapsed"in t&&n(1,o=t.is_collapsed),"switch_collapsed"in t&&n(4,i=t.switch_collapsed)},t.$$.update=()=>{if(1&t.$$.dirty)if(s.is_error)n(2,r=s);else{const t=Ci.to_safe()(s.value,void 0);if(t.is_error)n(2,r=t);else if(t.value){const{name:e,klass:o,ndata:i}=t.value;n(2,r={is_error:!1,block:s.value,ndata:i,block_name:e,klass:o})}else n(2,r={is_error:!0,message:"Can't find block definition"})}},[s,o,r,function(t){t.preventDefault(),t.stopPropagation(),i(s.id)},i]}test(Ui,(()=>{assert.equal(Ui("some"),"UTqN8G7jWovoR1rVejd8M")}));class Yi extends at{constructor(t){super(),lt(this,t,Gi,Xi,a,{block:0,is_collapsed:1,switch_collapsed:4})}}function Qi(t,e,n){const r=t.slice();return r[9]=e[n],r}function tl(t){let e,n,r=t[0].title+"";return{c(){e=h("div"),n=g(r),y(e,"class","plot-title")},m(t,r){d(t,e,r),u(e,n)},p(t,e){1&e&&r!==(r=t[0].title+"")&&_(n,r)},d(t){t&&f(e)}}}function el(t){let e,n,r;return n=new dn({props:{markdown:t[0].desc}}),{c(){e=h("div"),rt(n.$$.fragment),y(e,"class","plot-desc")},m(t,s){d(t,e,s),st(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.markdown=t[0].desc),n.$set(r)},i(t){r||(J(n.$$.fragment,t),r=!0)},o(t){K(n.$$.fragment,t),r=!1},d(t){t&&f(e),ot(n)}}}function nl(t,e){let n,r,s;return r=new Yi({props:{block:e[9],is_collapsed:e[1].collapsed[e[9].id],switch_collapsed:e[5]}}),{key:t,first:null,c(){n=w(),rt(r.$$.fragment),this.first=n},m(t,e){d(t,n,e),st(r,t,e),s=!0},p(t,n){e=t;const s={};4&n&&(s.block=e[9]),6&n&&(s.is_collapsed=e[1].collapsed[e[9].id]),r.$set(s)},i(t){s||(J(r.$$.fragment,t),s=!0)},o(t){K(r.$$.fragment,t),s=!1},d(t){t&&f(n),ot(r,t)}}}function rl(t){let e,n,r,s,o,i,l,a,c,p,g,w,$=[],v=new Map,_=t[0].title&&tl(t),k=t[0].desc&&el(t),x=t[2];const j=t=>t[9].id;for(let e=0;e<x.length;e+=1){let n=Qi(t,x,e),r=j(n);v.set(r,$[e]=nl(r,n))}return i=new jn({props:{messages:t[3]}}),a=new mn({props:{is_main:!0}}),{c(){e=h("div"),_&&_.c(),n=m(),k&&k.c(),r=m(),s=h("div");for(let t=0;t<$.length;t+=1)$[t].c();o=m(),rt(i.$$.fragment),l=m(),rt(a.$$.fragment),y(s,"class","blocks"),y(e,"class",c="plot-page plot-style-"+t[4])},m(c,f){d(c,e,f),_&&_.m(e,null),u(e,n),k&&k.m(e,null),u(e,r),u(e,s);for(let t=0;t<$.length;t+=1)$[t].m(s,null);u(e,o),st(i,e,null),u(e,l),st(a,e,null),p=!0,g||(w=b(e,"click",t[8]),g=!0)},p(t,[o]){t[0].title?_?_.p(t,o):(_=tl(t),_.c(),_.m(e,n)):_&&(_.d(1),_=null),t[0].desc?k?(k.p(t,o),1&o&&J(k,1)):(k=el(t),k.c(),J(k,1),k.m(e,r)):k&&(W(),K(k,1,1,(()=>{k=null})),V()),38&o&&(x=t[2],W(),$=tt($,o,j,1,t,x,v,s,Q,nl,null,Qi),V());const l={};8&o&&(l.messages=t[3]),i.$set(l),(!p||16&o&&c!==(c="plot-page plot-style-"+t[4]))&&y(e,"class",c)},i(t){if(!p){J(k);for(let t=0;t<x.length;t+=1)J($[t]);J(i.$$.fragment,t),J(a.$$.fragment,t),p=!0}},o(t){K(k);for(let t=0;t<$.length;t+=1)K($[t]);K(i.$$.fragment,t),K(a.$$.fragment,t),p=!1},d(t){t&&f(e),_&&_.d(),k&&k.d();for(let t=0;t<$.length;t+=1)$[t].d();ot(i),ot(a),g=!1,w()}}}const sl={match_and_normalize:t=>{if(is_object(t)&&"page"in t)return t}};function ol(t,e,n){let r,s,o,i,{default_title:l}=e,{data:a}=e,c={collapsed:{},show_controls:!1};return t.$$set=t=>{"default_title"in t&&n(6,l=t.default_title),"data"in t&&n(0,a=t.data)},t.$$.update=()=>{1&t.$$.dirty&&n(7,r=function(t){const e=[],n=new Set;for(let r=0;r<t.length;r++){const s=t[r];if(!is_object(s)){e.add({is_error:!0,id:`error_${r}`,message:"Invalid block data"});continue}const o=s.hash||Ui(to_json(s),"md5").take(4);let i=void 0!==s.id&&""+s.id||s.title&&Ui(s.title,"md5")||o;n.has(i)?e.add({is_error:!0,id:`error_${r}`,message:`Duplicate block id '${i}'`}):(n.add(i),e.push({id:i,is_error:!1,value:Object.assign(Object.assign({},s),{id:i,hash:o})}))}return{blocks:e,messages:On([])}}(a.page)),128&t.$$.dirty&&n(2,s=r.blocks),128&t.$$.dirty&&n(3,o=r.messages),65&t.$$.dirty&&(document.title=a.title||"id"in a&&""+a.id||l||"PLOT"),1&t.$$.dirty&&n(4,i=a.style||"normal")},[a,c,s,o,i,function(t){t in c.collapsed?delete c.collapsed[t]:n(1,c.collapsed[t]=!0,c),n(1,c=Object.assign({},c))},l,r,()=>n(1,c={...c,show_controls:!0})]}var il=Object.freeze({__proto__:null,default:class extends at{constructor(t){super(),lt(this,t,ol,rl,a,{default_title:6,data:0})}},definition:sl});t.apps.page=il;const ll=new qi("plot");e.run=async function(e){try{let n,r,s,o=document.getElementById("data");if(e&&"data"in e)n=e.data;else if(o){r=o.getAttribute("type"),r&&"{type}"!=r||(r="yaml");const t=o.innerHTML;n=await Kt(t,r)}else{const t=function(){const t=new URLSearchParams(window.location.search).get("data_url");if(t)return t;{let t=window.location.pathname;t.startsWith("/")||(t+="/");const e=/:([^:]+)$/i;return t.replace(e,"")}}();s=t.split("/").last().replace(/\.[^\.]+$/,""),r=Ht(t),n=await Vt(t)}await async function(t){if(is_object(t)&&t.css){const e=t.css;is_string(e)?function(t){const e=document.createElement("style");e.textContent=t,document.head.append(e)}(e):is_object(e)&&"url"in e?await Ut([e.url],"parallel"):ll.warn("invalid customcss format")}}(n);const i=Ci(n,r);if(i)document.body.classList.add("plot-single-body"),new Ti({target:document.body,props:{default_title:s,block_name:i.name,data:i.ndata,block_impl:i.klass}});else{const e=function(e){if(null==e)return;if(is_object(e)){const n=e;if(n.app){if(!is_array(n.app)||2!=n.app.length)throw"invalid app, it should be `app: [app_name, 0.1]`";const e=n.app[0],{definition:r,default:s}=t.apps[e],o=r.match_and_normalize(n);if(!o)throw`Data not matching '${e}' app`;return{name:e,klass:s,ndata:o}}for(const e in t.apps){const{definition:r,default:s}=t.apps[e],o=r.match_and_normalize(n);if(o)return{name:e,klass:s,ndata:o}}}}(n);if(!e)throw"can't find block or app";document.body.classList.add(`plot-${e.name}-body`),new e.klass({target:document.body,props:{default_title:s,data:e.ndata}})}}catch(t){console.error(t),new Lt({target:document.body,props:{error:t}})}};const al=window.on_plot_loaded;al&&al()}();
