!function(){"use strict";const t={blocks_limit:100,narrow_width:480,height_in_narrow_width_mode:200,parsers:{},blocks_for_file_extensions:{md:"text",markdown:"text",text:"text",txt:"text"},blocks:{},apps:{}};window.plot_config=t;const e={version:.1};function n(){}function r(t){return t()}function s(){return Object.create(null)}function o(t){t.forEach(r)}function i(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e}function a(t){return null==t?"":t}function c(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function h(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function p(t){return document.createTextNode(t)}function g(){return p(" ")}function m(){return p("")}function w(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function b(t){return function(e){return e.preventDefault(),t.call(this,e)}}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function v(t,e){t.value=null==e?"":e}function _(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function k(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}}let x,j;function O(){if(void 0===x){x=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){x=!0}}return x}window.plot_api=e;class E{constructor(t=null){this.a=t,this.e=this.n=null}m(t,e,n=null){this.e||(this.e=f(e.nodeName),this.t=e,this.h(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)u(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(d)}}function z(t){j=t}function S(){if(!j)throw new Error("Function called outside component initialization");return j}const A=[],q=[],C=[],M=[],R=Promise.resolve();let B=!1;function L(t){C.push(t)}function N(t){M.push(t)}let T=!1;const P=new Set;function H(){if(!T){T=!0;do{for(let t=0;t<A.length;t+=1){const e=A[t];z(e),F(e.$$)}for(z(null),A.length=0;q.length;)q.pop()();for(let t=0;t<C.length;t+=1){const e=C[t];P.has(e)||(P.add(e),e())}C.length=0}while(A.length);for(;M.length;)M.pop()();B=!1,T=!1,P.clear()}}function F(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(L)}}const U=new Set;let D;function I(){D={r:0,c:[],p:D}}function Z(){D.r||o(D.c),D=D.p}function W(t,e){t&&t.i&&(U.delete(t),t.i(e))}function V(t,e,n,r){if(t&&t.o){if(U.has(t))return;U.add(t),D.c.push((()=>{U.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function J(t,e){const n=e.token={};function r(t,r,s,o){if(e.token!==n)return;e.resolved=o;let i=e.ctx;void 0!==s&&(i=i.slice(),i[s]=o);const l=t&&(e.current=t)(i);let a=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&(I(),V(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),Z())})):e.block.d(1),l.c(),W(l,1),l.m(e.mount(),e.anchor),a=!0),e.block=l,e.blocks&&(e.blocks[r]=l),a&&H()}if((s=t)&&"object"==typeof s&&"function"==typeof s.then){const n=S();if(t.then((t=>{z(n),r(e.then,1,e.value,t),z(null)}),(t=>{if(z(n),r(e.catch,2,e.error,t),z(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var s}function K(t,e,n){const r=e.slice(),{resolved:s}=t;t.current===t.then&&(r[t.value]=s),t.current===t.catch&&(r[t.error]=s),t.block.p(r,n)}function X(t,e){t.d(1),e.delete(t.key)}function G(t,e){V(t,1,1,(()=>{e.delete(t.key)}))}function Y(t,e,n,r,s,o,i,l,a,c,u,d){let f=t.length,h=o.length,p=f;const g={};for(;p--;)g[t[p].key]=p;const m=[],w=new Map,b=new Map;for(p=h;p--;){const t=d(s,o,p),l=n(t);let a=i.get(l);a?r&&a.p(t,e):(a=c(l,t),a.c()),w.set(l,m[p]=a),l in g&&b.set(l,Math.abs(p-g[l]))}const $=new Set,y=new Set;function v(t){W(t,1),t.m(l,u),i.set(t.key,t),u=t.first,h--}for(;f&&h;){const e=m[h-1],n=t[f-1],r=e.key,s=n.key;e===n?(u=e.first,f--,h--):w.has(s)?!i.has(r)||$.has(r)?v(e):y.has(s)?f--:b.get(r)>b.get(s)?(y.add(r),v(e)):($.add(s),f--):(a(n,i),f--)}for(;f--;){const e=t[f];w.has(e.key)||a(e,i)}for(;h;)v(m[h-1]);return m}function Q(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function tt(t){t&&t.c()}function et(t,e,n,s){const{fragment:l,on_mount:a,on_destroy:c,after_update:u}=t.$$;l&&l.m(e,n),s||L((()=>{const e=a.map(r).filter(i);c?c.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(L)}function nt(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function rt(t,e){-1===t.$$.dirty[0]&&(A.push(t),B||(B=!0,R.then(H)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function st(t,e,r,i,l,a,c=[-1]){const u=j;z(t);const f=t.$$={fragment:null,ctx:null,props:a,update:n,not_equal:l,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:e.context||[]),callbacks:s(),dirty:c,skip_bound:!1};let h=!1;if(f.ctx=r?r(t,e.props||{},((e,n,...r)=>{const s=r.length?r[0]:n;return f.ctx&&l(f.ctx[e],f.ctx[e]=s)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](s),h&&rt(t,e)),n})):[],f.update(),h=!0,o(f.before_update),f.fragment=!!i&&i(f.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);f.fragment&&f.fragment.l(t),t.forEach(d)}else f.fragment&&f.fragment.c();e.intro&&W(t.$$.fragment),et(t,e.target,e.anchor,e.customElement),H()}z(u)}class ot{$destroy(){nt(this,1),this.$destroy=n}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}let it="Deno"in window?window.Deno:void 0;const lt=null==it,at=new Map;function ct(t,e){if(!at.has(t))try{const e=lt?(window.env||{})[t]:it.env.get(t);at.set(t,e)}catch(e){at.set(t,void 0)}const n=at.get(t);if(void 0===n){if(void 0!==e)return e;throw new Error(`env var '${t}' is not defined`)}return n}const ut=[];let dt,ft=0,ht=!1;function pt(){ht||(ht=!0,setTimeout((async()=>{for(;ft<ut.length;){let{name:t,test:e}=ut[ft];ft+=1;try{console.log(`  test | ${t}`);let n=e();n&&await n}catch(e){if(console.error(`  test | ${t} failed`),console.error(e),!lt)throw e}}ht=!1}),0))}try{dt=ct("test","").toLowerCase()}catch(t){dt="false"}let gt="all"==dt,mt=gt||"true"==dt;function wt(t,e){t=is_string(t)?t:t.name,ut.push({name:t,test:e}),(mt||t.toLowerCase()==dt)&&pt()}function bt(t,e){for(const n in e)Object.defineProperty(t,n,{value:e[n],configurable:!1,writable:!0})}function $t(t){const e=[];let n=0;for(;;){const r=[];n<this.length&&e.push(r);for(let s=0;s<t;s++){if(!(n+s<this.length))return e;r.push(this[n+s])}n+=t}}function yt(){const t=this.replace(/^\s*\n|[\n\s]+$/,""),e=/^(\s+)/.parse(t);return 0==e.length?t:t.split("\n").map((t=>t.startsWith(e[0])?t.replace(e[0],""):t)).join("\n")}function vt(t=0){return 0==t?Math.round(this):Math.round((this+Number.EPSILON)*Math.pow(10,t))/Math.pow(10,t)}function _t(t){const e=t.match(this);return e?1==e.length?[]:e.slice(1,e.length):[]}function kt(t){const e=t.match(this);return(null==e?void 0:e.groups)||{}}window.run_tests=pt,window.test=wt,window.slow_test=function(t,e){t=is_string(t)?t:t.name,ut.push({name:t,test:e}),(gt||t.toLowerCase()==dt)&&pt()},window.p=function(...t){if(lt)console.log(...t);else{const e=t.map((t=>function(t,e=!1){return it&&is_object(t)?it.inspect(t,{colors:e}):t}(t,!0)));t.length,console.log(...e)}},window.discard=function(t){},window.is_number=function(t){return"number"==typeof t&&Number.isFinite(t)},window.is_array=function(t){return Array.isArray(t)},window.is_string=function(t){return"string"==typeof t},window.is_boolean=function(t){return"boolean"==typeof t},window.is_object=function(t){return"object"==typeof t&&null!==t},window.is_function=function(t){return"function"==typeof t},window.is_promise=function(t){return"object"==typeof t&&null!==t&&"function"==typeof t.then},window.is_undefined=function(t){return void 0===t},window.set_timeout=function(t,e){return setTimeout(t,e)},window.clear_timeout=clearTimeout,window.set_interval=function(t,e,n=!1){return n&&t(),setInterval(t,e)},window.clear_timeout=clearTimeout,window.to_json=Ot,window.from_json=function(t,e){const n=JSON.parse(e);return"from_json_hook"in t?t.from_json_hook(n):n},window.ensure=function(t,e){if(void 0===t)throw new Error(`value${e?" "+e:""} not defined`);if(is_object(t)&&"is_error"in t){if(t.is_error)throw new Error(t.message||`value${e?" "+e:""} not found`);return t.value}return t},window.ensure_error=zt,window.get_env=ct,window.is_prod=function(){return"prod"==ct("env","dev")},window.is_dev=function(){return"dev"==ct("env","dev")},window.is_test=function(){return"test"==ct("env","dev")},window.sleep=function(t){return new Promise((e=>setTimeout(e,t)))},Object.size=function(t){let e=0;for(let n in t)t.hasOwnProperty(n)&&e++;return e},Object.is_empty=function(t){for(let e in t)if(t.hasOwnProperty(e))return!1;return!0},Object.each=function(t,e){for(const n in t){if(!t.hasOwnProperty(n))continue;e(t[n],n)}},Object.map=function(t,e){const n={};for(const r in t){if(!t.hasOwnProperty(r))continue;const s=t[r];n[r]=e(s,r)}return n},Object.filter=function(t,e){const n={};for(const r in t){if(!t.hasOwnProperty(r))continue;const s=t[r];e(s,r)&&(n[r]=s)}return n},bt(Object.prototype,{is_equal:function(t){return Et(this,t)},to_s:function(){return this.toString()},clone:function(){return Object.assign({},this)},to_success:function(){return{is_error:!1,value:this}}}),Array.fill=function(t,e){const n="function"==typeof e?e:()=>e,r=[];for(let e=0;e<t;e++)r.push(n(e));return r},Array.from_columns=function(t){const e=[],n=Object.keys(t);if(0==n.length)return e;const r=t[n[0]].length;for(const e of n)if(t[e].length!=r)throw new Error(`columns ${n[0]} and ${e} have different length`);for(let s=0;s<r;s++){const r={};for(const e of n){const n=t[e][s];null!=n&&(r[e]=n)}e.push(r)}return e},bt(Array.prototype,{add:function(t){this.push(t)},batch:$t,size:function(){return this.length},is_empty:function(){return 0==this.length},clone:function(){return[...this]},has(t){const e=t instanceof Function?t:e=>e==t;for(let t=0;t<this.length;t++){if(e(this[t],t))return!0}return!1},group_by(t){const e=new Hash;for(let n=0;n<this.length;n++){const r=this[n];e.getm(t(r,n),[]).push(r)}return e},i(t){const e=t instanceof Function?t:e=>e==t;for(let t=0;t<this.length;t++)if(e(this[t],t))return t},take:function(t){return this.slice(0,t)},filter_map(t){const e=[];for(let n=0;n<this.length;n++){const r=t(this[n],n);void 0!==r&&e.push(r)}return e},sample(t){return this.shuffle().take(t)},to_columns(t){const e=new Set,n={};for(const t of this)for(const n in t)t.hasOwnProperty(n)&&e.add(n);for(const n of t||[])e.delete(n);for(const t of e)n[t]=[];for(const t of this)for(const r of e)n[r].push(r in t?t[r]:void 0);return n},skip_undefined(){return this.filter_map((t=>t))},find(t){const e=t instanceof Function?t:e=>e==t;for(let t=0;t<this.length;t++){const n=this[t];if(e(n,t))return n}},first(t){const e=this.length;if(void 0===t){if(e<1)throw new Error("can't get first elements from empty list");return this[0]}if(e<t)throw new Error(`can't get first ${t} elements from array of length ${e}`);return this.slice(0,t)},last(t){const e=this.length;if(void 0===t){if(e<1)throw new Error("can't get last elements from empty array");return this[e-1]}if(e<t)throw new Error(`can't get last ${t} elements from array of length ${e}`);return this.slice(e-t,e)},lasti(t){const e=t instanceof Function?t:e=>e==t;for(let t=this.length-1;t>=0;t--)if(e(this[t],t))return t},max(t){return this[t?this.maxi(t):this.maxi()]},min(t){return this[t?this.mini(t):this.mini()]},maxi(t){if(0==this.length)throw new Error("can't find maxi for empty array");if(t){let e=t(this[0]),n=0;for(let r=0;r<this.length;r++){const s=t(this[r]);s>e&&(e=s,n=r)}return n}{let t=this[0],e=0;for(let n=0;n<this.length;n++){const r=this[n];r.compare(t)>0&&(t=r,e=n)}return e}},mini(t){if(0==this.length)throw new Error("can't find mini for empty array");if(t){let e=t(this[0]),n=0;for(let r=0;r<this.length;r++){const s=t(this[r]);s<e&&(e=s,n=r)}return n}{let t=this[0],e=0;for(let n=0;n<this.length;n++){const r=this[n];r.compare(t)<0&&(t=r,e=n)}return e}},median(t=!1){return this.quantile(.5,t)},mean(){let t=0;for(const e of this)t+=e;return t/this.length},quantile(t,e=!1){if(0==this.length)throw new Error("can't calculate quantile on empty array");const n=e?this:[...this].sort(((t,e)=>t-e)),r=(n.length-1)*t,s=Math.floor(r),o=r-s;return void 0!==n[s+1]?n[s]+o*(n[s+1]-n[s]):n[s]},each(t){this.forEach(t)},apply(t){return this.forEach(t),this},partition(t){const e=[],n=[],r=t instanceof Function?t:(e,n)=>t.includes(n);for(let t=0;t<this.length;t++){const s=this[t];r(s,t)?e.push(s):n.push(s)}return[e,n]},rev(){return[...this].reverse()},unique:function(t){const e=new Set,n=t||(t=>t);return this.filter((t=>{const r=n(t);return!e.has(r)&&(e.add(r),!0)}))},shuffle(t){null==t&&(t=()=>Math.random());const e=[...this];for(let n=e.length-1;n>0;n--){const r=Math.floor(t()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e},asc(t){if(t)return St.call(this,t);return[...this].sort(((t,e)=>t.compare(e)))},sum(){let t=0;for(const e of this)t+=e;return t},to_set(){return new HSet(this)},to_hash(t){const e=new Hash;for(let n=0;n<this.length;n++){const r=this[n];e.set(t(r,n),r)}return e}}),wt($t,(()=>{assert.equal([1,2,3].batch(2),[[1,2],[3]]),assert.equal([1,2].batch(2),[[1,2]]),assert.equal([1].batch(2),[[1]]),assert.equal([].batch(2),[])})),window.Hash=class t{constructor(e){is_undefined(e)?this.m=new Map:e instanceof Map?this.m=new Map(e):this.m=e instanceof t?new Map(e.m):new Map(Object.entries(e))}map(e){const n=new t;for(const[t,r]of this.m)n.set(t,e(r,t));return n}each(t){for(const[e,n]of this.m)t(n,e)}apply(t){for(const[e,n]of this.m)t(n,e);return this}set(t,e){this.m.set(t,e)}get(t,e){const n=this.m.get(t)||e;if(void 0===n)throw new Error(`key ${t} doesn't exist`);return n}getm(t,e){return this.has(t)||this.set(t,e),this.m.get(t)}size(){return this.m.size}is_empty(){return 0==this.m.size}values(){const t=[];for(const e of this.m.values())t.add(e);return t}keys(){const t=[];for(const e of this.m.keys())t.add(e);return t}filter(e){const n=new t;for(const t of this.m.keys()){const r=this.m.get(t);e(r,t)&&n.set(t,r)}return n}filter_map(e){const n=new t;for(const t of this.m.keys()){const r=e(this.m.get(t),t);void 0!==r&&n.set(t,r)}return n}entries(){const t=[];for(const[e,n]of this.m.entries())t.add([n,e]);return t}del(t){this.m.delete(t)}has(t){return this.m.has(t)}clone(){return new t(this)}to_a(){const t=[];for(const e of this.m)t.push(e);return t}to_json_hook(){const t={};for(const[e,n]of this.m)t[""+e]=n;return t}static from_json_hook(e){return new t(e)}},window.HSet=class t{constructor(e){if(is_undefined(e))this.s=new Set;else if(is_array(e))this.s=new Set(e);else{if(!(e instanceof t))throw"invalid usage";this.s=new Set(e.s)}}map(e){const n=new t;for(const t of this.s)n.add(e(t));return n}each(t){for(const e of this.s)t(e)}add(t){this.s.add(t)}size(){return this.s.size}is_empty(){return 0==this.s.size}to_a(){return Array.from(this.s)}del(t){this.s.delete(t)}has(t){return this.s.has(t)}clone(){return new t(this)}to_json_hook(){return this.to_a()}static from_json_hook(e){return new t(e)}},bt(String.prototype,{size:function(){return this.length},is_empty:function(){return""==this},clone:function(){return""+this},take:function(t){return this.slice(0,t)},to_error:function(){return{is_error:!0,message:this}},downcase:function(){return this.toLowerCase()},upcase:function(){return this.toUpperCase()},trim(){return this.replace(/^[\t\s\n]+|[\t\s\n]+$/g,"")},dedent:yt,last(t){const e=this.length;if(void 0===t){if(e<1)throw new Error("can't get last elements from empty string");return this[e-1]}if(e<t)throw new Error(`can't get last ${t} elements from string of length ${e}`);return this.slice(e-t,e)},ljust(t,e){return this.padEnd(t,e)},rjust(t,e){return this.padStart(t,e)},compare(t){return this.localeCompare(t)},split2(t){const e=this.split(t);if(2!=e.length)throw new Error(`expected to split in two, but found ${e.length} parts`);return e},split3(t){const e=this.split(t);if(3!=e.length)throw new Error(`expected to split in three, but found ${e.length} parts`);return e}}),wt("dedent",(()=>{assert.equal(yt.call("\n  a\n  b\n    c"),"a\nb\n  c")})),bt(Number.prototype,{round:vt,pow(t){return Math.pow(this,t)},div(t){return Math.floor(this/t)},rem(t){return this%t},div_rem(t){return[Math.floor(this/t),this%t]},pluralize(t){return 1==this?t:t+"s"},compare(t){return this-t},abs(){return Math.abs(this)}}),wt("round",(()=>{assert.equal(vt.call(.05860103881518906,2),.06)})),bt(Function.prototype,{to_safe:function(){const t=this;return function(...e){try{return{is_error:!1,value:t(...e)}}catch(t){return{is_error:!0,message:zt(t).message}}}},debounce:function(t,e=!1){let n,r=this;return(...s)=>{e?(e=!1,r(...s)):(n&&clearTimeout(n),n=setTimeout((()=>r(...s)),t))}},once:function(t){let e,n=!1;return function(){return n||(e=t.apply(this,arguments),n=!0),e}}}),bt(RegExp.prototype,{parse:_t,parse_named:kt,parse1:function(t){const e=this.parse(t);if(1!=e.length)throw new Error(`expected 1 match but found ${e.length}`);return e[0]},parse2:function(t){const e=this.parse(t);if(2!=e.length)throw new Error(`expected 2 matches but found ${e.length}`);return[e[0],e[1]]},parse3:function(t){const e=this.parse(t);if(3!=e.length)throw new Error(`expected 3 matches but found ${e.length}`);return[e[0],e[1],e[2]]}}),wt("parse",(()=>{assert.equal(_t.call(/.+ (\d+) (\d+)/,"a 22 45"),["22","45"]),assert.equal(_t.call(/[^;]+;/,"drop table; create table;"),[])})),wt("parseNamed",(()=>{assert.equal(kt.call(/.+ (?<a>\d+) (?<b>\d+)/,"a 22 45"),{a:"22",b:"45"})}));const xt=function(t,e){const n=e?e instanceof Function?e():e:"Assertion error!";if(!t)throw new Error(n)};function jt(t){return is_array(t)?t.map(jt):is_object(t)?"to_json_hook"in t?t.to_json_hook():Object.assign({},...Object.entries(t).sort((([t],[e])=>t.localeCompare(e))).map((([t,e])=>({[t]:jt(e)})))):t}function Ot(t,e=!0){return e?JSON.stringify(jt(t),null,2):JSON.stringify(jt(t))}function Et(t,e){return Ot(t)===Ot(e)}function zt(t,e="Unknown error"){return is_object(t)&&t instanceof Error?(t.message||(t.message=e),t):new Error(""+(t||e))}function St(t){if(0==this.length)return this;{const e=t,n=typeof t(this[0]);let r,s;if("number"==n)r=function(t,n){return e(t)-e(n)};else if("boolean"==n)r=function(t,n){return(e(t)?1:0)-(e(n)?1:0)};else{if("string"!=n)throw new Error(`invalid return type for 'by' '${n}'`);r=function(t,n){return e(t).localeCompare(e(n))}}return s=[...this],s.sort(r),s}}function At(t){let e,n;return{c(){e=f("pre"),n=p(t[1]),$(e,"class","text-xs text-gray-600 mt-4")},m(t,r){u(t,e,r),c(e,n)},p(t,e){2&e&&y(n,t[1])},d(t){t&&d(e)}}}function qt(t){let e,r,s,o,i,l=t[1].length>0&&At(t);return{c(){e=f("div"),r=f("span"),r.textContent="Error",s=p(" -\n  "),o=p(t[0]),i=g(),l&&l.c(),$(r,"class","text-red-600 font-bold"),$(e,"class","Fail")},m(t,n){u(t,e,n),c(e,r),c(e,s),c(e,o),c(e,i),l&&l.m(e,null)},p(t,[n]){1&n&&y(o,t[0]),t[1].length>0?l?l.p(t,n):(l=At(t),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i:n,o:n,d(t){t&&d(e),l&&l.d()}}}function Ct(t,e,n){let r,s,{error:o}=e;return t.$$set=t=>{"error"in t&&n(2,o=t.error)},t.$$.update=()=>{4&t.$$.dirty&&n(0,r=ensure_error(o).message),4&t.$$.dirty&&n(1,s=(o&&o instanceof Error?o.stack:"")||"")},[r,s,o]}xt.equal=(t,e,n)=>{if(!Et(t,e)){const r=n?n instanceof Function?n():n:`Assertion error: ${Ot(t,!0)} != ${Ot(e,!0)}`;throw new Error(r)}},xt.fail=(t,e)=>{let n=!1;try{t()}catch(t){n=!0}if(!n){const t=e?e instanceof Function?e():e:"Assertion error: expected to fail but didn't";throw new Error(t)}},xt.aequal=(t,e,n,r)=>{r=r||.001;const s=(Math.abs(t)+Math.abs(e))/2*r;if(Math.abs(t-e)>s){const r=n?n instanceof Function?n():n:`Assertion error: ${Ot(t,!0)} != ${Ot(e,!0)}`;throw new Error(r)}},window.assert=xt,wt("sort_by",(()=>{assert.equal([{v:!0},{v:!1}].asc((({v:t})=>t)),[{v:!1},{v:!0}]),assert.equal([{v:"b"},{v:""},{v:"c"}].asc((({v:t})=>t)),[{v:""},{v:"b"},{v:"c"}])}));class Mt extends ot{constructor(t){super(),st(this,t,Ct,qt,l,{error:2})}}function Rt(t){let e,r;return{c(){e=f("div"),r=p(t[0]),$(e,"class","animate-pulse text-gray-500")},m(t,n){u(t,e,n),c(e,r)},p(t,[e]){1&e&&y(r,t[0])},i:n,o:n,d(t){t&&d(e)}}}function Bt(t,e,n){let{text:r="Processing..."}=e;return discard(r),t.$$set=t=>{"text"in t&&n(0,r=t.text)},[r]}class Lt extends ot{constructor(t){super(),st(this,t,Bt,Rt,l,{text:0})}}class Nt{constructor(t){this.v=t}get(){return this.v}set(t){this.v=t}}function Tt(t){const e=/\.([a-z0-9]+)$/i.parse(t);return e.length>0?e[0]:void 0}function Pt(t){return/\//.test(t)?get_env("base_url")+t:t}async function Ht(t,e){if("parallel"==e){const e=t.map(Ut);for(const t of e)await t}else for(const e of t)await Ut(e)}const Ft={};async function Ut(t){if(!(t in Ft)){const e=Pt(t);if(t.endsWith(".js"))Ft[t]=function(t){return new Promise(((e,n)=>{const r=document.createElement("script");r.src=t,r.onerror=()=>{r.remove(),n(new Error(`Cannot load ${t}`))},r.onload=()=>{r.remove(),e()},document.body.append(r)}))}(e);else{if(!t.endsWith(".css"))throw new Error(`should be script or style url '${t}'`);Ft[t]=function(t){return new Promise(((e,n)=>{const r=document.createElement("link");r.rel="stylesheet",r.onerror=()=>{r.remove(),n(new Error(`Cannot load ${t}`))},r.onload=()=>{e()},r.href=t,document.head.appendChild(r)}))}(e)}}return Ft[t]}const Dt={};async function It(t){if(!(t in Dt)){Dt[t]=async function(){let e=await fetch(function(t,e={}){const n=[];for(const t in e){const r=e[t];null!=t&&null!=r&&n.push(`${encodeURIComponent(t)}=${encodeURIComponent(""+e[t])}`)}return n.length>0?`${t}${t.includes("?")?"&":"?"}${n.join("&")}`:t}(t,{clearcache:Math.random()}));if(404==e.status)throw new Error(`File '${t}' not found`);if(200!=e.status)throw new Error(`Can't load '${t}', response code ${e.status}`);return Wt(await e.text(),Tt(t),t)}()}return Dt[t]}async function Zt(t){if(void 0===t)throw new Error("nether data nor data url provided");return"object"==typeof t&&"url"in t?await It(t.url):t}async function Wt(e,n,r){if(n){const s=t.parsers[n];if(s)try{return await s(e)}catch(t){throw new Error(`can't parse '${r||n}', ${ensure_error(t).message}`)}}return e}async function Vt(t){const e=(await Kt()).load(t);if(null==e)throw new Error("YAML data is empty");return e}async function Jt(t){return(await Kt()).dump(t,{skipInvalid:!0,noRefs:!0})}async function Kt(){await Ht(["/vendor/js-yaml-4.1.0/js-yaml.min.js"],"serial");const t=window.jsyaml;if(!t)throw new Error("can't load 'js-yaml' library");return t}t.parsers.yml=Vt,t.parsers.yaml=Vt,t.parsers.json=async t=>JSON.parse(t),t.parsers.csv=async function(t){const{errors:e,data:n,meta:{fields:r}}=(await async function(){await Ht(["/vendor/papaparse-5.0.2/papaparse.min.js"],"serial");const t=window.Papa;if(!t)throw new Error("can't load 'papaparse' library");return t}()).parse(t,{header:!0,dynamicTyping:!0});if(e.lenght>0)throw new Error(ensure_error(e[0]).message);return{type:"csv_table",columns:r,rows:n}};const Xt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};test("escapeHtml",(()=>{var t;assert.equal(null==(t="<div>")?"":(""+t).replace(/[&<>'"]/g,(function(t){return Xt[t]})),"&lt;div&gt;")}));var Gt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Yt(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})})),e}function Qt(t){var e={exports:{}};return t(e,e.exports),e.exports}var te=Qt((function(t){function e(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}}t.exports={defaults:{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1},getDefaults:e,changeDefaults:function(e){t.exports.defaults=e}}}));const ee=/[&<>"']/,ne=/[&<>"']/g,re=/[<>"']|&(?!#?\w+;)/,se=/[<>"']|&(?!#?\w+;)/g,oe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ie=t=>oe[t];const le=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function ae(t){return t.replace(le,((t,e)=>"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""))}const ce=/(^|[^\[])\^/g;const ue=/[^\w:]/g,de=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;const fe={},he=/^[^:]+:\/*[^/]*$/,pe=/^([^:]+:)[\s\S]*$/,ge=/^([^:]+:\/*[^/]*)[\s\S]*$/;function me(t,e){fe[" "+t]||(he.test(t)?fe[" "+t]=t+"/":fe[" "+t]=we(t,"/",!0));const n=-1===(t=fe[" "+t]).indexOf(":");return"//"===e.substring(0,2)?n?e:t.replace(pe,"$1")+e:"/"===e.charAt(0)?n?e:t.replace(ge,"$1")+e:t+e}function we(t,e,n){const r=t.length;if(0===r)return"";let s=0;for(;s<r;){const o=t.charAt(r-s-1);if(o!==e||n){if(o===e||!n)break;s++}else s++}return t.substr(0,r-s)}var be={escape:function(t,e){if(e){if(ee.test(t))return t.replace(ne,ie)}else if(re.test(t))return t.replace(se,ie);return t},unescape:ae,edit:function(t,e){t=t.source||t,e=e||"";const n={replace:(e,r)=>(r=(r=r.source||r).replace(ce,"$1"),t=t.replace(e,r),n),getRegex:()=>new RegExp(t,e)};return n},cleanUrl:function(t,e,n){if(t){let t;try{t=decodeURIComponent(ae(n)).replace(ue,"").toLowerCase()}catch(t){return null}if(0===t.indexOf("javascript:")||0===t.indexOf("vbscript:")||0===t.indexOf("data:"))return null}e&&!de.test(n)&&(n=me(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(t){return null}return n},resolveUrl:me,noopTest:{exec:function(){}},merge:function(t){let e,n,r=1;for(;r<arguments.length;r++)for(n in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},splitCells:function(t,e){const n=t.replace(/\|/g,((t,e,n)=>{let r=!1,s=e;for(;--s>=0&&"\\"===n[s];)r=!r;return r?"|":" |"})).split(/ \|/);let r=0;if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n},rtrim:we,findClosingBracket:function(t,e){if(-1===t.indexOf(e[1]))return-1;const n=t.length;let r=0,s=0;for(;s<n;s++)if("\\"===t[s])s++;else if(t[s]===e[0])r++;else if(t[s]===e[1]&&(r--,r<0))return s;return-1},checkSanitizeDeprecation:function(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}};const{noopTest:$e,edit:ye,merge:ve}=be,_e={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:$e,table:$e,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};_e.def=ye(_e.def).replace("label",_e._label).replace("title",_e._title).getRegex(),_e.bullet=/(?:[*+-]|\d{1,9}\.)/,_e.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,_e.item=ye(_e.item,"gm").replace(/bull/g,_e.bullet).getRegex(),_e.list=ye(_e.list).replace(/bull/g,_e.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+_e.def.source+")").getRegex(),_e._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",_e._comment=/<!--(?!-?>)[\s\S]*?-->/,_e.html=ye(_e.html,"i").replace("comment",_e._comment).replace("tag",_e._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),_e.paragraph=ye(_e._paragraph).replace("hr",_e.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",_e._tag).getRegex(),_e.blockquote=ye(_e.blockquote).replace("paragraph",_e.paragraph).getRegex(),_e.normal=ve({},_e),_e.gfm=ve({},_e.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),_e.gfm.nptable=ye(_e.gfm.nptable).replace("hr",_e.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",_e._tag).getRegex(),_e.gfm.table=ye(_e.gfm.table).replace("hr",_e.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",_e._tag).getRegex(),_e.pedantic=ve({},_e.normal,{html:ye("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",_e._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:$e,paragraph:ye(_e.normal._paragraph).replace("hr",_e.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",_e.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const ke={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:$e,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:$e,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/,_punctuation:"!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~"};ke.em=ye(ke.em).replace(/punctuation/g,ke._punctuation).getRegex(),ke._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,ke._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,ke._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,ke.autolink=ye(ke.autolink).replace("scheme",ke._scheme).replace("email",ke._email).getRegex(),ke._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,ke.tag=ye(ke.tag).replace("comment",_e._comment).replace("attribute",ke._attribute).getRegex(),ke._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ke._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,ke._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,ke.link=ye(ke.link).replace("label",ke._label).replace("href",ke._href).replace("title",ke._title).getRegex(),ke.reflink=ye(ke.reflink).replace("label",ke._label).getRegex(),ke.normal=ve({},ke),ke.pedantic=ve({},ke.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:ye(/^!?\[(label)\]\((.*?)\)/).replace("label",ke._label).getRegex(),reflink:ye(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ke._label).getRegex()}),ke.gfm=ve({},ke.normal,{escape:ye(ke.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),ke.gfm.url=ye(ke.gfm.url,"i").replace("email",ke.gfm._extended_email).getRegex(),ke.breaks=ve({},ke.gfm,{br:ye(ke.br).replace("{2,}","*").getRegex(),text:ye(ke.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var xe={block:_e,inline:ke};const{defaults:je}=te,{block:Oe}=xe,{rtrim:Ee,splitCells:ze,escape:Se}=be;var Ae=class t{constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||je,this.rules=Oe.normal,this.options.pedantic?this.rules=Oe.pedantic:this.options.gfm&&(this.rules=Oe.gfm)}static get rules(){return Oe}static lex(e,n){return new t(n).lex(e)}lex(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.token(t,!0)}token(t,e){let n,r,s,o,i,l,a,c,u,d,f,h,p,g,m,w;for(t=t.replace(/^ +$/gm,"");t;)if((s=this.rules.newline.exec(t))&&(t=t.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"})),s=this.rules.code.exec(t)){const e=this.tokens[this.tokens.length-1];t=t.substring(s[0].length),e&&"paragraph"===e.type?e.text+="\n"+s[0].trimRight():(s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?s:Ee(s,"\n")}))}else if(s=this.rules.fences.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"code",lang:s[2]?s[2].trim():s[2],text:s[3]||""});else if(s=this.rules.heading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});else if((s=this.rules.nptable.exec(t))&&(l={type:"table",header:ze(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/\n$/,"").split("\n"):[]},l.header.length===l.align.length)){for(t=t.substring(s[0].length),f=0;f<l.align.length;f++)/^ *-+: *$/.test(l.align[f])?l.align[f]="right":/^ *:-+: *$/.test(l.align[f])?l.align[f]="center":/^ *:-+ *$/.test(l.align[f])?l.align[f]="left":l.align[f]=null;for(f=0;f<l.cells.length;f++)l.cells[f]=ze(l.cells[f],l.header.length);this.tokens.push(l)}else if(s=this.rules.hr.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"hr"});else if(s=this.rules.blockquote.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,e),this.tokens.push({type:"blockquote_end"});else if(s=this.rules.list.exec(t)){for(t=t.substring(s[0].length),o=s[2],g=o.length>1,a={type:"list_start",ordered:g,start:g?+o:"",loose:!1},this.tokens.push(a),s=s[0].match(this.rules.item),c=[],n=!1,p=s.length,f=0;f<p;f++)l=s[f],d=l.length,l=l.replace(/^ *([*+-]|\d+\.) */,""),~l.indexOf("\n ")&&(d-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+d+"}","gm"),"")),f!==p-1&&(i=Oe.bullet.exec(s[f+1])[0],(o.length>1?1===i.length:i.length>1||this.options.smartLists&&i!==o)&&(t=s.slice(f+1).join("\n")+t,f=p-1)),r=n||/\n\n(?!\s*$)/.test(l),f!==p-1&&(n="\n"===l.charAt(l.length-1),r||(r=n)),r&&(a.loose=!0),m=/^\[[ xX]\] /.test(l),w=void 0,m&&(w=" "!==l[1],l=l.replace(/^\[[ xX]\] +/,"")),u={type:"list_item_start",task:m,checked:w,loose:r},c.push(u),this.tokens.push(u),this.token(l,!1),this.tokens.push({type:"list_item_end"});if(a.loose)for(p=c.length,f=0;f<p;f++)c[f].loose=!0;this.tokens.push({type:"list_end"})}else if(s=this.rules.html.exec(t))t=t.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===s[1]||"script"===s[1]||"style"===s[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):Se(s[0]):s[0]});else if(e&&(s=this.rules.def.exec(t)))t=t.substring(s[0].length),s[3]&&(s[3]=s[3].substring(1,s[3].length-1)),h=s[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[h]||(this.tokens.links[h]={href:s[2],title:s[3]});else if((s=this.rules.table.exec(t))&&(l={type:"table",header:ze(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/\n$/,"").split("\n"):[]},l.header.length===l.align.length)){for(t=t.substring(s[0].length),f=0;f<l.align.length;f++)/^ *-+: *$/.test(l.align[f])?l.align[f]="right":/^ *:-+: *$/.test(l.align[f])?l.align[f]="center":/^ *:-+ *$/.test(l.align[f])?l.align[f]="left":l.align[f]=null;for(f=0;f<l.cells.length;f++)l.cells[f]=ze(l.cells[f].replace(/^ *\| *| *\| *$/g,""),l.header.length);this.tokens.push(l)}else if(s=this.rules.lheading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:"="===s[2].charAt(0)?1:2,text:s[1]});else if(e&&(s=this.rules.paragraph.exec(t)))t=t.substring(s[0].length),this.tokens.push({type:"paragraph",text:"\n"===s[1].charAt(s[1].length-1)?s[1].slice(0,-1):s[1]});else if(s=this.rules.text.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens}};const{defaults:qe}=te,{cleanUrl:Ce,escape:Me}=be;var Re=class{constructor(t){this.options=t||qe}code(t,e,n){const r=(e||"").match(/\S*/)[0];if(this.options.highlight){const e=this.options.highlight(t,r);null!=e&&e!==t&&(n=!0,t=e)}return r?'<pre><code class="'+this.options.langPrefix+Me(r,!0)+'">'+(n?t:Me(t,!0))+"</code></pre>\n":"<pre><code>"+(n?t:Me(t,!0))+"</code></pre>"}blockquote(t){return"<blockquote>\n"+t+"</blockquote>\n"}html(t){return t}heading(t,e,n,r){return this.options.headerIds?"<h"+e+' id="'+this.options.headerPrefix+r.slug(n)+'">'+t+"</h"+e+">\n":"<h"+e+">"+t+"</h"+e+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(t,e,n){const r=e?"ol":"ul";return"<"+r+(e&&1!==n?' start="'+n+'"':"")+">\n"+t+"</"+r+">\n"}listitem(t){return"<li>"+t+"</li>\n"}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return"<p>"+t+"</p>\n"}table(t,e){return e&&(e="<tbody>"+e+"</tbody>"),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"}tablerow(t){return"<tr>\n"+t+"</tr>\n"}tablecell(t,e){const n=e.header?"th":"td";return(e.align?"<"+n+' align="'+e.align+'">':"<"+n+">")+t+"</"+n+">\n"}strong(t){return"<strong>"+t+"</strong>"}em(t){return"<em>"+t+"</em>"}codespan(t){return"<code>"+t+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return"<del>"+t+"</del>"}link(t,e,n){if(null===(t=Ce(this.options.sanitize,this.options.baseUrl,t)))return n;let r='<a href="'+Me(t)+'"';return e&&(r+=' title="'+e+'"'),r+=">"+n+"</a>",r}image(t,e,n){if(null===(t=Ce(this.options.sanitize,this.options.baseUrl,t)))return n;let r='<img src="'+t+'" alt="'+n+'"';return e&&(r+=' title="'+e+'"'),r+=this.options.xhtml?"/>":">",r}text(t){return t}},Be=class{constructor(){this.seen={}}slug(t){let e=t.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(e)){const t=e;do{this.seen[t]++,e=t+"-"+this.seen[t]}while(this.seen.hasOwnProperty(e))}return this.seen[e]=0,e}};const{defaults:Le}=te,{inline:Ne}=xe,{findClosingBracket:Te,escape:Pe}=be;var He=class t{constructor(t,e){if(this.options=e||Le,this.links=t,this.rules=Ne.normal,this.options.renderer=this.options.renderer||new Re,this.renderer=this.options.renderer,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=Ne.pedantic:this.options.gfm&&(this.options.breaks?this.rules=Ne.breaks:this.rules=Ne.gfm)}static get rules(){return Ne}static output(e,n,r){return new t(n,r).output(e)}output(e){let n,r,s,o,i,l,a="";for(;e;)if(i=this.rules.escape.exec(e))e=e.substring(i[0].length),a+=Pe(i[1]);else if(i=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(i[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(i[0])&&(this.inRawBlock=!1),e=e.substring(i[0].length),a+=this.renderer.html(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):Pe(i[0]):i[0]);else if(i=this.rules.link.exec(e)){const r=Te(i[2],"()");if(r>-1){const t=(0===i[0].indexOf("!")?5:4)+i[1].length+r;i[2]=i[2].substring(0,r),i[0]=i[0].substring(0,t).trim(),i[3]=""}e=e.substring(i[0].length),this.inLink=!0,s=i[2],this.options.pedantic?(n=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s),n?(s=n[1],o=n[3]):o=""):o=i[3]?i[3].slice(1,-1):"",s=s.trim().replace(/^<([\s\S]*)>$/,"$1"),a+=this.outputLink(i,{href:t.escapes(s),title:t.escapes(o)}),this.inLink=!1}else if((i=this.rules.reflink.exec(e))||(i=this.rules.nolink.exec(e))){if(e=e.substring(i[0].length),n=(i[2]||i[1]).replace(/\s+/g," "),n=this.links[n.toLowerCase()],!n||!n.href){a+=i[0].charAt(0),e=i[0].substring(1)+e;continue}this.inLink=!0,a+=this.outputLink(i,n),this.inLink=!1}else if(i=this.rules.strong.exec(e))e=e.substring(i[0].length),a+=this.renderer.strong(this.output(i[4]||i[3]||i[2]||i[1]));else if(i=this.rules.em.exec(e))e=e.substring(i[0].length),a+=this.renderer.em(this.output(i[6]||i[5]||i[4]||i[3]||i[2]||i[1]));else if(i=this.rules.code.exec(e))e=e.substring(i[0].length),a+=this.renderer.codespan(Pe(i[2].trim(),!0));else if(i=this.rules.br.exec(e))e=e.substring(i[0].length),a+=this.renderer.br();else if(i=this.rules.del.exec(e))e=e.substring(i[0].length),a+=this.renderer.del(this.output(i[1]));else if(i=this.rules.autolink.exec(e))e=e.substring(i[0].length),"@"===i[2]?(r=Pe(this.mangle(i[1])),s="mailto:"+r):(r=Pe(i[1]),s=r),a+=this.renderer.link(s,null,r);else if(this.inLink||!(i=this.rules.url.exec(e))){if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.inRawBlock?a+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):Pe(i[0]):i[0]):a+=this.renderer.text(Pe(this.smartypants(i[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else{if("@"===i[2])r=Pe(i[0]),s="mailto:"+r;else{do{l=i[0],i[0]=this.rules._backpedal.exec(i[0])[0]}while(l!==i[0]);r=Pe(i[0]),s="www."===i[1]?"http://"+r:r}e=e.substring(i[0].length),a+=this.renderer.link(s,null,r)}return a}static escapes(e){return e?e.replace(t.rules._escapes,"$1"):e}outputLink(t,e){const n=e.href,r=e.title?Pe(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(n,r,this.output(t[1])):this.renderer.image(n,r,Pe(t[1]))}smartypants(t){return this.options.smartypants?t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):t}mangle(t){if(!this.options.mangle)return t;const e=t.length;let n,r="",s=0;for(;s<e;s++)n=t.charCodeAt(s),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}},Fe=class{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,e,n){return""+n}image(t,e,n){return""+n}br(){return""}};const{defaults:Ue}=te,{merge:De,unescape:Ie}=be;var Ze=class t{constructor(t){this.tokens=[],this.token=null,this.options=t||Ue,this.options.renderer=this.options.renderer||new Re,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new Be}static parse(e,n){return new t(n).parse(e)}parse(t){this.inline=new He(t.links,this.options),this.inlineText=new He(t.links,De({},this.options,{renderer:new Fe})),this.tokens=t.reverse();let e="";for(;this.next();)e+=this.tok();return e}next(){return this.token=this.tokens.pop(),this.token}peek(){return this.tokens[this.tokens.length-1]||0}parseText(){let t=this.token.text;for(;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)}tok(){let t="";switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,Ie(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":{let e,n,r,s,o="";for(r="",e=0;e<this.token.header.length;e++)r+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(o+=this.renderer.tablerow(r),e=0;e<this.token.cells.length;e++){for(n=this.token.cells[e],r="",s=0;s<n.length;s++)r+=this.renderer.tablecell(this.inline.output(n[s]),{header:!1,align:this.token.align[s]});t+=this.renderer.tablerow(r)}return this.renderer.table(o,t)}case"blockquote_start":for(t="";"blockquote_end"!==this.next().type;)t+=this.tok();return this.renderer.blockquote(t);case"list_start":{t="";const e=this.token.ordered,n=this.token.start;for(;"list_end"!==this.next().type;)t+=this.tok();return this.renderer.list(t,e,n)}case"list_item_start":{t="";const e=this.token.loose,n=this.token.checked,r=this.token.task;if(this.token.task)if(e)if("text"===this.peek().type){const t=this.peek();t.text=this.renderer.checkbox(n)+" "+t.text}else this.tokens.push({type:"text",text:this.renderer.checkbox(n)});else t+=this.renderer.checkbox(n);for(;"list_item_end"!==this.next().type;)t+=e||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(t,r,n)}case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:{const t='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(t);console.log(t)}}}};const{merge:We,checkSanitizeDeprecation:Ve,escape:Je}=be,{getDefaults:Ke,changeDefaults:Xe,defaults:Ge}=te;function Ye(t,e,n){if(null==t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(n||"function"==typeof e){n||(n=e,e=null),e=We({},Ye.defaults,e||{}),Ve(e);const r=e.highlight;let s,o,i=0;try{s=Ae.lex(t,e)}catch(t){return n(t)}o=s.length;const l=function(t){if(t)return e.highlight=r,n(t);let o;try{o=Ze.parse(s,e)}catch(e){t=e}return e.highlight=r,t?n(t):n(null,o)};if(!r||r.length<3)return l();if(delete e.highlight,!o)return l();for(;i<s.length;i++)!function(t){"code"!==t.type?--o||l():r(t.text,t.lang,(function(e,n){return e?l(e):null==n||n===t.text?--o||l():(t.text=n,t.escaped=!0,void(--o||l()))}))}(s[i])}else try{return e=We({},Ye.defaults,e||{}),Ve(e),Ze.parse(Ae.lex(t,e),e)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",(e||Ye.defaults).silent)return"<p>An error occurred:</p><pre>"+Je(t.message+"",!0)+"</pre>";throw t}}Ye.options=Ye.setOptions=function(t){return We(Ye.defaults,t),Xe(Ye.defaults),Ye},Ye.getDefaults=Ke,Ye.defaults=Ge,Ye.Parser=Ze,Ye.parser=Ze.parse,Ye.Renderer=Re,Ye.TextRenderer=Fe,Ye.Lexer=Ae,Ye.lexer=Ae.lex,Ye.InlineLexer=He,Ye.inlineLexer=He.output,Ye.Slugger=Be,Ye.parse=Ye;var Qe=Ye;let tn=!1;async function en(t){await sleep(0);const e=new Qe.Renderer;let n=0;const r=()=>`__special_katext_id_${n++}__`,s={};function o(t){return t.replace("&gt;",">").replace("&lt;",">").replace("&quot;","'")}function i(t){return t=(t=t.replace(/\$\$([\s\S]+?)\$\$/g,((t,e)=>{const n=r();return s[n]={type:"block",expression:o(e)},n}))).replace(/\$([^\n\s]+?)\$/g,((t,e)=>{const n=r();return s[n]={type:"inline",expression:o(e)},n}))}const l=e.listitem;e.listitem=function(t,e,n){return l(i(t),e,n)};const a=e.paragraph;e.paragraph=function(t){return a(i(t))};const c=e.tablecell;function u(t){Qe.setOptions({renderer:e,highlight:t,pedantic:!1,gfm:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!0})}let d;if(e.tablecell=function(t,e){return c(i(t),e)},tn){const e=window.hljs;if(!e)throw new Error("can't load 'highlightjs' library for markdown");u(((t,n)=>{try{return n?e.highlight(t,{language:n}).value:t}catch(e){return t}})),d=Qe(t.dedent())}else{let e=!1;if(u(((t,n)=>(n&&(e=!0),t))),d=Qe(t.dedent()),e)return await Ht(["/vendor/highlight.js-11.0.1/default.min.css","/vendor/highlight.js-11.0.1/highlight.min.js"],"parallel"),tn=!0,en(t)}return d.includes("__special_katext_id_")&&(await Ht(["/vendor/katex-0.11.1/katex.min.js"],"parallel"),Ht(["/vendor/katex-0.11.1/katex.css"],"parallel").catch((t=>console.warn(`can't load styles for KaTeX, ${ensure_error(t).message}`))),d=d.replace(/(__special_katext_id_\d+__)/g,((t,e)=>{let{type:n,expression:r}=s[e];return r=r.replace(/<br\/>/g,"\\\\"),window.katex.renderToString(r,{output:"html",displayMode:"block"==n,throwOnError:!1})}))),d}function nn(t){let e,r,s=t[0].html+"";return{c(){r=m(),e=new E(r)},m(t,n){e.m(s,t,n),u(t,r,n)},p(t,n){1&n&&s!==(s=t[0].html+"")&&e.p(s)},i:n,o:n,d(t){t&&d(r),t&&e.d()}}}function rn(t){let e,n;return e=new Mt({props:{error:t[0].error}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.error=t[0].error),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){V(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function sn(t){let e,r;return e=new Lt({}),{c(){tt(e.$$.fragment)},m(t,n){et(e,t,n),r=!0},p:n,i(t){r||(W(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){nt(e,t)}}}function on(t){let e,n,r,s;const o=[sn,rn,nn],i=[];function l(t,e){return"empty"==t[0].state?0:"error"==t[0].state?1:2}return n=l(t),r=i[n]=o[n](t),{c(){e=f("div"),r.c(),$(e,"class","markdown")},m(t,r){u(t,e,r),i[n].m(e,null),s=!0},p(t,[s]){let a=n;n=l(t),n===a?i[n].p(t,s):(I(),V(i[a],1,1,(()=>{i[a]=null})),Z(),r=i[n],r?r.p(t,s):(r=i[n]=o[n](t),r.c()),W(r,1),r.m(e,null))},i(t){s||(W(r),s=!0)},o(t){V(r),s=!1},d(t){t&&d(e),i[n].d()}}}function ln(t,e,n){let{markdown:r}=e,s={state:"empty"};return t.$$set=t=>{"markdown"in t&&n(1,r=t.markdown)},t.$$.update=()=>{if(3&t.$$.dirty&&("empty"==s.state||s.markdown!=r)){const t=r;en(r).then((e=>{n(0,s={state:"success",markdown:t,html:e})})).catch((e=>{const r=ensure_error(e,"Unknown error while processing markdown").message;n(0,s={state:"error",markdown:t,error:r})}))}},[s,r]}class an extends ot{constructor(t){super(),st(this,t,ln,on,l,{markdown:1})}}function cn(t){let e,n,r,s,o,i,l;return{c(){e=f("a"),n=h("svg"),r=h("text"),s=p("PL0T"),o=h("text"),i=p("PL0T"),$(r,"class","svg_stroke svelte-x784r0"),$(r,"x","15"),$(r,"y","75"),$(o,"class","svgText"),$(o,"x","15"),$(o,"y","75"),$(n,"viewBox","0 0 200 100"),$(n,"class","svelte-x784r0"),$(e,"class",l=a(t[0]?"main":"")+" svelte-x784r0"),$(e,"href","http://pl0t.com"),$(e,"target","_blank")},m(t,l){u(t,e,l),c(e,n),c(n,r),c(r,s),c(n,o),c(o,i)},p(t,n){1&n&&l!==(l=a(t[0]?"main":"")+" svelte-x784r0")&&$(e,"class",l)},d(t){t&&d(e)}}}function un(t){let e,r=t[1]&&cn(t);return{c(){r&&r.c(),e=m()},m(t,n){r&&r.m(t,n),u(t,e,n)},p(t,[n]){t[1]?r?r.p(t,n):(r=cn(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:n,o:n,d(t){r&&r.d(t),t&&d(e)}}}let dn=!0;function fn(t,e,n){let{is_main:r=!1}=e;r&&(dn=!1);let s=!1;return set_interval((()=>{n(1,s=dn||r)}),1e3),t.$$set=t=>{"is_main"in t&&n(0,r=t.is_main)},[r,s]}class hn extends ot{constructor(t){super(),st(this,t,fn,un,l,{is_main:0})}}function pn(t,e,n){const r=t.slice();return r[1]=e[n],r}function gn(t){let e,n=t[0],r=[];for(let e=0;e<n.length;e+=1)r[e]=$n(pn(t,n,e));return{c(){e=f("div");for(let t=0;t<r.length;t+=1)r[t].c();$(e,"class","text-sm mt-1 mx-1")},m(t,n){u(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,s){if(1&s){let o;for(n=t[0],o=0;o<n.length;o+=1){const i=pn(t,n,o);r[o]?r[o].p(i,s):(r[o]=$n(i),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&d(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(r,t)}}}function mn(t){let e;return{c(){e=f("div"),e.textContent="unknown message type"},m(t,n){u(t,e,n)},p:n,d(t){t&&d(e)}}}function wn(t){let e,n,r,s,o=t[1].message+"";return{c(){e=f("div"),n=f("span"),n.textContent="error",r=g(),s=p(o),$(n,"class","bg-red-400 px-2 rounded")},m(t,o){u(t,e,o),c(e,n),c(e,r),c(e,s)},p(t,e){1&e&&o!==(o=t[1].message+"")&&y(s,o)},d(t){t&&d(e)}}}function bn(t){let e,n,r,s,o=t[1].message+"";return{c(){e=f("div"),n=f("span"),n.textContent="warn",r=g(),s=p(o),$(n,"class","bg-yellow-400 px-2 rounded")},m(t,o){u(t,e,o),c(e,n),c(e,r),c(e,s)},p(t,e){1&e&&o!==(o=t[1].message+"")&&y(s,o)},d(t){t&&d(e)}}}function $n(t){let e;function n(t,e){return"warn"==t[1].type?bn:"error"==t[1].type?wn:mn}let r=n(t),s=r(t);return{c(){s.c(),e=m()},m(t,n){s.m(t,n),u(t,e,n)},p(t,o){r===(r=n(t))&&s?s.p(t,o):(s.d(1),s=r(t),s&&(s.c(),s.m(e.parentNode,e)))},d(t){s.d(t),t&&d(e)}}}function yn(t){let e,r=t[0].length>0&&gn(t);return{c(){r&&r.c(),e=m()},m(t,n){r&&r.m(t,n),u(t,e,n)},p(t,[n]){t[0].length>0?r?r.p(t,n):(r=gn(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:n,o:n,d(t){r&&r.d(t),t&&d(e)}}}function vn(t,e,n){let{messages:r}=e;return t.$$set=t=>{"messages"in t&&n(0,r=t.messages)},[r]}class _n extends ot{constructor(t){super(),st(this,t,vn,yn,l,{messages:0})}}function kn(t){return t.map((t=>"string"==typeof t?{type:"warn",message:t}:t)).unique((({message:t})=>t)).asc((({type:t,message:e})=>`${t} ${e}`))}function xn(t){let e,r;return e=new Mt({props:{error:"Invalid image format"}}),{c(){tt(e.$$.fragment)},m(t,n){et(e,t,n),r=!0},p:n,i(t){r||(W(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){nt(e,t)}}}function jn(t){let e,r,s;return{c(){e=f("img"),e.src!==(r="data:image/png;base64,"+t[1].base64)&&$(e,"src",r),$(e,"alt",s=t[0].id)},m(t,n){u(t,e,n)},p(t,n){2&n&&e.src!==(r="data:image/png;base64,"+t[1].base64)&&$(e,"src",r),1&n&&s!==(s=t[0].id)&&$(e,"alt",s)},i:n,o:n,d(t){t&&d(e)}}}function On(t){let e,r,s;return{c(){e=f("img"),e.src!==(r=t[1].url)&&$(e,"src",r),$(e,"alt",s=t[0].id)},m(t,n){u(t,e,n)},p(t,n){2&n&&e.src!==(r=t[1].url)&&$(e,"src",r),1&n&&s!==(s=t[0].id)&&$(e,"alt",s)},i:n,o:n,d(t){t&&d(e)}}}function En(t){let e,n,r,s;const o=[On,jn,xn],i=[];function l(t,e){return"url"in t[1]?0:"base64"in t[1]?1:2}return n=l(t),r=i[n]=o[n](t),{c(){e=f("div"),r.c(),$(e,"class","ImageBlockContent")},m(t,r){u(t,e,r),i[n].m(e,null),s=!0},p(t,[s]){let a=n;n=l(t),n===a?i[n].p(t,s):(I(),V(i[a],1,1,(()=>{i[a]=null})),Z(),r=i[n],r?r.p(t,s):(r=i[n]=o[n](t),r.c()),W(r,1),r.m(e,null))},i(t){s||(W(r),s=!0)},o(t){V(r),s=!1},d(t){t&&d(e),i[n].d()}}}const zn={match_and_normalize:t=>{if(is_object(t)&&"image"in t)return t}};function Sn(t,e,n){let r,{block:s}=e,{is_narrow:o}=e;return discard(o),t.$$set=t=>{"block"in t&&n(0,s=t.block),"is_narrow"in t&&n(2,o=t.is_narrow)},t.$$.update=()=>{1&t.$$.dirty&&n(1,r=s.image)},[s,r,o]}var An=Object.freeze({__proto__:null,default:class extends ot{constructor(t){super(),st(this,t,Sn,En,l,{block:0,is_narrow:2})}},definition:zn});function qn(t){let e,n;return e=new Mt({props:{error:t[3]}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.error=t[3]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){V(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function Cn(t){let e,n;return e=new an({props:{markdown:t[2]}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.markdown=t[2]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){V(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function Mn(t){let e,r;return e=new Lt({}),{c(){tt(e.$$.fragment)},m(t,n){et(e,t,n),r=!0},p:n,i(t){r||(W(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){nt(e,t)}}}function Rn(t){let e,n,r,s={ctx:t,current:null,token:null,hasCatch:!0,pending:Mn,then:Cn,catch:qn,value:2,error:3,blocks:[,,,]};return J(n=Zt(t[0].text),s),{c(){e=f("div"),s.block.c(),$(e,"class","TextBlockContent")},m(t,n){u(t,e,n),s.block.m(e,s.anchor=null),s.mount=()=>e,s.anchor=null,r=!0},p(e,[r]){t=e,s.ctx=t,1&r&&n!==(n=Zt(t[0].text))&&J(n,s)||K(s,t,r)},i(t){r||(W(s.block),r=!0)},o(t){for(let t=0;t<3;t+=1){V(s.blocks[t])}r=!1},d(t){t&&d(e),s.block.d(),s.token=null,s=null}}}const Bn={match_and_normalize:t=>is_string(t)?{text:t}:is_object(t)&&"text"in t?t:void 0};function Ln(t,e,n){let{block:r}=e,{is_narrow:s}=e;return discard(s),t.$$set=t=>{"block"in t&&n(0,r=t.block),"is_narrow"in t&&n(1,s=t.is_narrow)},[r,s]}var Nn=Object.freeze({__proto__:null,default:class extends ot{constructor(t){super(),st(this,t,Ln,Rn,l,{block:0,is_narrow:1})}},definition:Bn});const Tn=["width","height","config"];function Pn(t){for(const e in t)if(Tn.indexOf(e)<0)throw new Error(`invalid property '${e}'`);return hr("width",t.width,["number","undefined"]),hr("height",t.height,["number","undefined"]),t}const Hn=["linear","linear-closed","step","step-before","step-after","basis","basis-open","basis-closed","cardinal","cardinal-open","cardinal-closed","bundle","monotone"];const Fn=["point","circle","line","area","bar","rect","rule","square","text","tick","trail"];function Un(t){if(Fn.indexOf(t)<0)throw new Error(`invalid mark '${t}', available are ${Fn.join(", ")}`);return t}const Dn=["mark","color","size","point","interpolate","opacity","thickness","vega"];function In(t){for(const e in t)if(Dn.indexOf(e)<0)throw new Error(`unknown mark property '${e}', available are ${Dn.join(", ")}`);const{mark:e,color:n,size:r,point:s,interpolate:o,opacity:i,thickness:l,vega:a}=t;return hr("color",n,["string","undefined"]),hr("size",r,["number","undefined"]),hr("point",s,["boolean","undefined"]),o&&function(t){if(Hn.indexOf(t)<0)throw new Error(`invalid interpolate '${t}', available are ${Hn.join(", ")}`)}(o),hr("opacity",i,["number","undefined"]),hr("thickness",l,["number","undefined"]),hr("vega",a,["object","undefined"]),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({type:Un(e)},void 0!==n?{color:n}:{}),void 0!==r?{size:r}:{}),void 0!==s?{point:s}:{}),void 0!==o?{interpolate:o}:{}),void 0!==i?{opacity:i}:{}),void 0!==l?{thickness:l}:{}),void 0!==a?a:{})}const Zn=["nominal","ordinal","quantitative","temporal"];const Wn=["linear","pow","sqrt","symlog","log","time","utc","ordinal","band","point","bin-ordinal","quantile","quantize","threshold"];const Vn=["count","valid","missing","distinct","sum","mean","average","variance","variancep","stdev","stdevp","stderr","median","q1","q3","ci0","ci1","min","max","argmin","argmax","product"];const Jn=["x","y","x2","y2","xError","yError","xError2","yError2","longitude","latitude","longitude2","latitude2","color","opacity","fillOpacity","strokeOpacity","shape","size","strokeWidth","text","tooltip","href","detail","key","order"];const Kn=["year","yearquarter","yearquartermonth","yearmonth","yearmonthdate","yearmonthdatehours","yearmonthdatehoursminutes","yearmonthdatehoursminutesseconds","quarter","quartermonth","month","monthdate","date","day","hours","hoursminutes","hoursminutesseconds","minutes","minutesseconds","seconds","secondsmilliseconds","milliseconds"];function Xn(t){if(Kn.indexOf(t)<0)throw new Error(`invalid time unit '${t}', available are ${Kn.join(", ")}`);return t}function Gn(t){if(hr("bin",t,["string","number","boolean","undefined"]),"string"==typeof t&&"binned"!=t)throw new Error("bin should have type of \"boolean | number | 'binned'\"");return"boolean"==typeof t||"string"==typeof t?t:{base:t,maxbins:t}}const Yn=["calculate","as"];function Qn(t){for(const e in t)if(Yn.indexOf(e)<0)throw new Error(`unknown calculate property '${e}', available are ${Yn.join(", ")}`);return t}const tr=["filter"];function er(t){for(const e in t)if(tr.indexOf(e)<0)throw new Error(`unknown filter property '${e}', available are ${tr.join(", ")}`);return t}const nr=["type","aggregate","legend","title","labels","time_unit","timeUnit","bin","zero","domain","range","scale","value","override_value","scheme","reverse","vega"];function rr(t){const e=[];for(const n in t)if(nr.indexOf(n)<0){if(Jn.indexOf(n)<0)throw new Error(`unknown encoding property '${n}', available are ${Jn.join(", ")}, ${nr.join(", ")}`);e.push(n)}if(0==e.length)throw new Error(`encoding channel not specified, please specify one of ${Jn.join(", ")}`);if(e.length>1)throw new Error(`only one channel allowed in the same encoding, leave only one of ${e.join(", ")}`);t.type&&function(t){if(Zn.indexOf(t)<0)throw new Error(`invalid field type '${t}', available are ${Zn.join(", ")}`)}(t.type),t.aggregate&&function(t){if(Vn.indexOf(t)<0)throw new Error(`invalid aggregate '${t}', available are ${Vn.join(", ")}`)}(t.aggregate),hr("legend",t.legend,["string","boolean","undefined"]),hr("title",t.title,["string","boolean","undefined"]),hr("labels",t.labels,["boolean","undefined"]),t.time_unit&&Xn(t.time_unit),t.timeUnit&&Xn(t.timeUnit),t.bin&&Gn(t.bin),hr("zero",t.zero,["boolean","undefined"]),t.scale&&function(t){if(Wn.indexOf(t)<0)throw new Error(`invalid scale type '${t}', available are ${Wn.join(", ")}`)}(t.scale),t.domain&&t.domain.map((t=>(hr("scale domain",t,["number","string","boolean"]),t))),t.range&&function(t){"string"==typeof t?hr("scale range",t,["string"]):t.map((t=>(hr("scale domain",t,["number","string"]),t)))}(t.range),hr("scheme",t.scheme,["string","undefined"]),hr("reverse",t.reverse,["boolean","undefined"]),hr("vega",t.vega,["object","undefined"]);const{type:n,title:r,labels:s,aggregate:o,legend:i,timeUnit:l,time_unit:a,bin:c,zero:u,domain:d,range:f,scale:h,value:p,scheme:g,reverse:m,vega:w,override_value:b}=t,$=Jn.find((e=>e in t));if(!$)throw new Error(`Channel not found in ${JSON.stringify(t)}!`);const y=t[$],v=Object.assign(Object.assign(Object.assign({},void 0!==w&&"axis"in w?w.axis:{}),r&&"string"==typeof r?{title:r}:r?{}:{title:null}),void 0!==s?{labels:s}:{}),_=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},void 0!==w&&"scale"in w?w.scale:{}),void 0!==h?{type:h}:{}),void 0!==d?{nice:!1}:{}),void 0!==u?{zero:u}:{}),void 0!==d?{domain:d}:{}),void 0!==f?{range:f}:{}),void 0!==g?{scheme:g}:{}),void 0!==m?{reverse:m}:{});let k,x=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},void 0!==w?w:{}),""!==y?{field:y}:{}),{type:n||"quantitative"}),void 0!==o?{aggregate:o}:{}),void 0!==i?{legend:i}:{legend:!1}),void 0!==l?{timeUnit:l}:{}),void 0!==a?{timeUnit:a}:{}),Object.keys(v).length>0?{axis:v}:{}),Object.keys(_).length>0?{scale:_}:{}),void 0!==c?{bin:Gn(c)}:{});if(p){const t=function(t,e,n){const r=t=>{if(void 0===t)throw new Error("encoding value shouldn't be undefined");return hr("encoding value",t,["number","string","boolean"]),t};if(Array.isArray(t)){if("condition"in n)throw new Error("Conditional value can't be used with condition!");if(2==t.length){const[e,s]=t;return[Object.assign(Object.assign({},n),{condition:{test:e,value:r(s)}}),void 0]}if(3==t.length){const[e,s,o]=t;return[Object.assign(Object.assign({},n),{value:r(o),condition:{test:e,value:r(s)}}),void 0]}throw new Error("encoding value should be a simple value or array with 2 ['datum.value > 0', 'green'] or 3 elements ['datum.value > 0', 1, -1]")}if(sr.indexOf(e)>=0){if(""!=n.field&&void 0!==n.field&&null!==n.field)throw new Error(`value on ${sr.join(", ")} channels cannot be used with 'field'`);const e=[{explicit_value:r(t)}];return[Object.assign(Object.assign({},n),{field:"explicit_value"}),e]}return[Object.assign(Object.assign({},n),{value:r(t)}),void 0]}(p,$,x);x=t[0],k=t[1]}return[$,x,k]}const sr=["x","y"];const or=["concat"];function ir(t){for(const e in t)if(or.indexOf(e)<0)throw new Error(`unknown concat property '${e}', available are ${or.join(", ")}`);return t}function lr(t){const e=[];let n,r={},s=[],o=[],i={};const l=[],a=[];for(const c of t)if("string"==typeof c)e.push(Un(c));else if("mark"in c)e.push(In(c));else if(Array.isArray(c))o=[...o,ar(c)];else if("calculate"in c)s.push(Qn(c));else if("filter"in c)s.push(er(c));else if("facet"in c||"row"in c||"column"in c)l.push(c);else if("concat"in c)a.push(ir(c));else if("height"in c||"width"in c||"config"in c)i=Object.assign(Object.assign({},i),Pn(c));else if(Jn.some((t=>t in c))){const[t,e,n]=rr(c);if(t in e)throw new Error(`Can't redefine channel ${t}!`);if(void 0!==n)throw new Error(`Explicit value for '${t}' allowed only inside of a layer`);r=Object.assign(Object.assign({},r),{[t]:e})}else{if(!("vega"in c))throw new Error(`unknown plot part ${JSON.stringify(c)}`);n=c.vega}if(e.length>1)throw new Error(`Multiple marks found ${e.join(", ")}`);const c=Object.assign(Object.assign(Object.assign({},s.length>0?{transform:s}:{}),i),n||{});function u(){return Object.assign(Object.assign(Object.assign({},e.length>0?{mark:e[0]}:{}),Object.keys(r).length>0?{encoding:r}:{}),o.length>0?{layer:o}:{})}if(l.length>0){if(a.length>0)throw new Error("concat can't be used with facet");return function(t,e,n){let r;for(const e of t)"facet"in e&&(r=e);if(r){if(t.length>1)throw new Error("Can't other facets with 'facet' keyword");return Object.assign(Object.assign(Object.assign({facet:{field:r.facet,type:r.type||"ordinal",header:{title:null}}},void 0!==r.columns?{columns:r.columns}:{}),{spec:e}),n)}{if(t.filter((t=>"row"in t)).length>1)throw new Error("Facet can't have more than one row");if(t.filter((t=>"column"in t)).length>1)throw new Error("Facet can't have more than one column");let r,s;for(const e of t)"row"in e&&(r=e),"column"in e&&(s=e);return Object.assign({facet:Object.assign(Object.assign({},r?{row:{field:r.row,type:r.type||"ordinal",header:{title:null}}}:{}),s?{column:{field:s.column,type:s.type||"ordinal",header:{title:null}}}:{}),spec:e},n)}}(l,u(),c)}if(a.length>0){if(a.length>1)throw new Error("there could be only one concat");if(l.length>0)throw new Error("concat can't be used with facet");if(e.length>0)throw new Error("top level mark can't be used with concat");if(Object.keys(r).length>0)throw new Error("top level encoding can't be used with concat");if(0==o.length)throw new Error("concat requires at least one layer");return Object.assign({["vertical"==a[0].concat?"vconcat":"hconcat"]:o},c)}return Object.assign(Object.assign({},u()),c)}function ar(t){const e=[],n=[];let r,s,o={},i={};for(const l of t)if("string"==typeof l)e.push(Un(l));else if("mark"in l)e.push(In(l));else if("calculate"in l)n.push(Qn(l));else if("filter"in l)n.push(er(l));else if("height"in l||"width"in l)i=Object.assign(Object.assign({},i),Pn(l));else if(Jn.some((t=>t in l))){const[t,e,n]=rr(l);if(t in e)throw new Error(`Can't redefine channel ${t}!`);s=n,o=Object.assign(Object.assign({},o),{[t]:e})}else{if(!("vega"in l))throw new Error(`unknown plot layer part ${JSON.stringify(l)}`);r=l.vega}if(e.length>1)throw new Error(`Multiple marks found ${e.join(", ")}`);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n.length>0?{transform:n}:{}),e.length>0?{mark:e[0]}:{}),Object.keys(o).length>0?{encoding:o}:{}),i),s?{data:{values:s}}:{}),r||{})}function cr(t,e,n=!1){const r=n?dr:fr;if(t instanceof Array)return 0==t.length?[]:Array.isArray(t[0])?function(t,e){return t.map((t=>{const n={};for(let r=0;r<t.length;r++)r<e.length&&(n[e[r]]=t[r]);return n}))}(t,e||ur).map(r):t.map(r);{if(!(t instanceof Object))throw new Error("Arrays data expected to be an Object");const e=Object.keys(t);if(0==e.length)throw new Error("Empty arrays data!");const n=e[0],s=t[n].length;for(const r of e)if(t[r].length!=s)throw new Error(`Arrays data has arrays of different length ${r} - ${t[r].length} and ${n} - ${s}`);const o=[];for(let n=0;n<s;n++){const r={};for(const s of e)r[s]=t[s][n];o.push(r)}return o.map(r)}}const ur="abcdefghijklmnopqrstuvwxyz".split("");function dr(t){const e={};for(let n in t){const r=t[n];e[n]=null!==r?r:void 0}return e}function fr(t){const e={};for(let n in t){const r=t[n];null!=r&&(e[n]=r)}return e}function hr(t,e,n){if(n.indexOf(typeof e)<0)throw new Error(`invalid type for '${t}' allowed types ${n.join(", ")}`)}function pr(t){t.finalize()}async function gr({chart:e,data:n,vega_options:r,is_narrow:s,suggested_width_px:o,vega_view:i,container_el:l}){if(await Ht(["/vendor/vega/vega-5.9.1.min.js","/vendor/vega/vega-lite-4.0.2.min.js","/vendor/vega/vega-embed-6.2.1.js"],"serial"),i&&pr(i),!l)return;function a(e){return void 0!==o&&s?function(t,e,n){return t.width&&t.width<e||(t=Object.assign(Object.assign({},t),{width:e})),t.height&&t.height<n||(t=Object.assign(Object.assign({},t),{height:n})),t}(e,o,t.height_in_narrow_width_mode):e}let c=a("vega_spec"in e?e.vega_spec:lr(e));n&&(c=Object.assign(Object.assign({},c),{data:{values:cr(n)}}));const u=Object.assign(Object.assign({},function({suggested_width_px:t}){return{autosize:{type:"fit",contains:"padding"},width:t}}({suggested_width_px:o})),c);r=Object.assign(Object.assign({},{}),r||{});return(await window.vegaEmbed(l,u,r)).view}function mr(t){let e,n;return e=new Mt({props:{error:t[2].error}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.error=t[2].error),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){V(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function wr(t){let e,r;return e=new Lt({}),{c(){tt(e.$$.fragment)},m(t,n){et(e,t,n),r=!0},p:n,i(t){r||(W(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){nt(e,t)}}}function br(t){let e,n,r,s,o,i,l,a,h,p,m;const b=[wr,mr],y=[];function v(t,e){return"empty"==t[2].state?0:"error"==t[2].state?1:-1}return~(n=v(t))&&(r=y[n]=b[n](t)),{c(){e=f("div"),r&&r.c(),s=g(),o=f("div"),i=f("div"),a=g(),h=f("div"),_(i,"padding-right","0"),$(i,"class",l="success"==t[2].state?"":"invisible"),_(h,"height","0"),_(h,"width","100%"),L((()=>t[9].call(h))),$(e,"class","VegaChart")},m(r,l){u(r,e,l),~n&&y[n].m(e,null),c(e,s),c(e,o),c(o,i),t[8](i),c(e,a),c(e,h),p=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=f("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=O();let s;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=w(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{s=w(n.contentWindow,"resize",e)}),c(t,n),()=>{(r||s&&n.contentWindow)&&s(),d(n)}}(h,t[9].bind(h)),m=!0},p(t,[o]){let a=n;n=v(t),n===a?~n&&y[n].p(t,o):(r&&(I(),V(y[a],1,1,(()=>{y[a]=null})),Z()),~n?(r=y[n],r?r.p(t,o):(r=y[n]=b[n](t),r.c()),W(r,1),r.m(e,s)):r=null),(!m||4&o&&l!==(l="success"==t[2].state?"":"invisible"))&&$(i,"class",l)},i(t){m||(W(r),m=!0)},o(t){V(r),m=!1},d(r){r&&d(e),~n&&y[n].d(),t[8](null),p()}}}function $r(t,e,n){let{chart:r}=e,{data:s}=e,{vega_options:o}=e,{is_narrow:i=!1}=e,l={state:"empty"};const a=new Nt(void 0);let c,u,d;const f=(t=>{t!=d&&n(7,d=t)}).debounce(100,!0);var h;return h=()=>{a.get()&&pr(a.get())},S().$$.on_destroy.push(h),t.$$set=t=>{"chart"in t&&n(3,r=t.chart),"data"in t&&n(4,s=t.data),"vega_options"in t&&n(5,o=t.vega_options),"is_narrow"in t&&n(6,i=t.is_narrow)},t.$$.update=()=>{2&t.$$.dirty&&f(u),249&t.$$.dirty&&null!=d&&null!=c&&gr({chart:r,data:s,vega_options:o,is_narrow:i,suggested_width_px:d,vega_view:a.get(),container_el:c}).then((t=>{a.set(t),n(2,l={state:"success"})})).catch((t=>{const e=ensure_error(t,"Unknown error while processing vega lite");n(2,l={state:"error",error:e})}))},[c,u,l,r,s,o,i,d,function(t){q[t?"unshift":"push"]((()=>{c=t,n(0,c)}))},function(){u=this.clientWidth,n(1,u)}]}class yr extends ot{constructor(t){super(),st(this,t,$r,br,l,{chart:3,data:4,vega_options:5,is_narrow:6})}}function vr(t){let e,n;return e=new Mt({props:{error:t[4]}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.error=t[4]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){V(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function _r(t){let e,n;return e=new yr({props:{chart:t[1].chart,data:t[3],vega_options:t[1].vega_options,is_narrow:t[0]}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.chart=t[1].chart),2&n&&(r.data=t[3]),2&n&&(r.vega_options=t[1].vega_options),1&n&&(r.is_narrow=t[0]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){V(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function kr(t){let e,r;return e=new Lt({}),{c(){tt(e.$$.fragment)},m(t,n){et(e,t,n),r=!0},p:n,i(t){r||(W(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){nt(e,t)}}}function xr(t){let e,n,r,s,o,i={ctx:t,current:null,token:null,hasCatch:!0,pending:kr,then:_r,catch:vr,value:3,error:4,blocks:[,,,]};return J(n=Zt(t[1].data),i),s=new hn({}),{c(){e=f("div"),i.block.c(),r=g(),tt(s.$$.fragment),$(e,"class","ChartBlockContent relative")},m(t,n){u(t,e,n),i.block.m(e,i.anchor=null),i.mount=()=>e,i.anchor=r,c(e,r),et(s,e,null),o=!0},p(e,[r]){t=e,i.ctx=t,2&r&&n!==(n=Zt(t[1].data))&&J(n,i)||K(i,t,r)},i(t){o||(W(i.block),W(s.$$.fragment,t),o=!0)},o(t){for(let t=0;t<3;t+=1){V(i.blocks[t])}V(s.$$.fragment,t),o=!1},d(t){t&&d(e),i.block.d(),i.token=null,i=null,nt(s)}}}const jr={match_and_normalize:t=>{if(is_object(t)&&"data"in t&&"chart"in t)return t}};function Or(t,e,n){let{block:r}=e,{is_narrow:s}=e;discard(s);let o=r;return t.$$set=t=>{"block"in t&&n(2,r=t.block),"is_narrow"in t&&n(0,s=t.is_narrow)},t.$$.update=()=>{6&t.$$.dirty&&o.hash!=r.hash&&n(1,o=r)},[s,o,r]}var Er=Object.freeze({__proto__:null,default:class extends ot{constructor(t){super(),st(this,t,Or,xr,l,{block:2,is_narrow:0})}},definition:jr});function zr(t){switch(t){case"left":return"text-left";case"center":return"text-center";case"right":return"text-right"}}function Sr(t,e,n){const r=t.slice();return r[4]=e[n],r[6]=n,r}function Ar(t){let e;return{c(){e=p(t[1])},m(t,n){u(t,e,n)},p(t,n){2&n&&y(e,t[1])},d(t){t&&d(e)}}}function qr(t){let e,n=[],r=new Map,s=t[2];const o=t=>t[6];for(let e=0;e<s.length;e+=1){let i=Sr(t,s,e),l=o(i);r.set(l,n[e]=Mr(l,i))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=m()},m(t,r){for(let e=0;e<n.length;e+=1)n[e].m(t,r);u(t,e,r)},p(t,i){4&i&&(s=t[2],n=Y(n,i,o,1,t,s,r,e.parentNode,X,Mr,e,Sr))},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&d(e)}}}function Cr(t){let e;return{c(){e=f("br")},m(t,n){u(t,e,n)},d(t){t&&d(e)}}}function Mr(t,e){let n,r,s,o=e[4]+"",i=e[6]<e[2].length-1&&Cr();return{key:t,first:null,c(){n=p(o),r=g(),i&&i.c(),s=m(),this.first=n},m(t,e){u(t,n,e),u(t,r,e),i&&i.m(t,e),u(t,s,e)},p(t,r){e=t,4&r&&o!==(o=e[4]+"")&&y(n,o),e[6]<e[2].length-1?i||(i=Cr(),i.c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null)},d(t){t&&d(n),t&&d(r),i&&i.d(t),t&&d(s)}}}function Rr(t){let e,r;function s(t,e){return void 0!==t[2]?qr:void 0!==t[1]?Ar:void 0}let o=s(t),i=o&&o(t);return{c(){e=f("div"),i&&i.c(),$(e,"class",r=t[3]+" "+(t[0].wrap&&"text-wrap"))},m(t,n){u(t,e,n),i&&i.m(e,null)},p(t,[n]){o===(o=s(t))&&i?i.p(t,n):(i&&i.d(1),i=o&&o(t),i&&(i.c(),i.m(e,null))),1&n&&r!==(r=t[3]+" "+(t[0].wrap&&"text-wrap"))&&$(e,"class",r)},i:n,o:n,d(t){t&&d(e),i&&i.d()}}}function Br(t,e,n){let r,{options:s}=e,{value:o}=e;const i=zr(s.align||"left")+(s.small?" text-xs":"");return t.$$set=t=>{"options"in t&&n(0,s=t.options),"value"in t&&n(1,o=t.value)},t.$$.update=()=>{3&t.$$.dirty&&n(2,r=void 0!==o&&s.break?o.split(s.break):void 0)},[s,o,r,i]}var Lr=Object.freeze({__proto__:null,default:class extends ot{constructor(t){super(),st(this,t,Br,Rr,l,{options:0,value:1})}},compatible_types:["number","boolean","string"],align:function(t,e){return t.align||"left"}});function Nr(t){let e,r,s=(t[0]?t[1]:t[2])+"";return{c(){e=f("div"),r=p(s),$(e,"class","text-center")},m(t,n){u(t,e,n),c(e,r)},p(t,[e]){1&e&&s!==(s=(t[0]?t[1]:t[2])+"")&&y(r,s)},i:n,o:n,d(t){t&&d(e)}}}function Tr(t,e,n){let{options:r}=e,{value:s}=e;const o=r.true||"✓",i=r.false||"✗";return t.$$set=t=>{"options"in t&&n(3,r=t.options),"value"in t&&n(0,s=t.value)},[s,o,i,r]}var Pr=Object.freeze({__proto__:null,default:class extends ot{constructor(t){super(),st(this,t,Tr,Nr,l,{options:3,value:0})}},compatible_types:["boolean"]});function Hr(t){let e,r;return{c(){e=f("div"),r=p(t[0]),$(e,"class",t[1])},m(t,n){u(t,e,n),c(e,r)},p(t,[e]){1&e&&y(r,t[0])},i:n,o:n,d(t){t&&d(e)}}}function Fr(t,e,n){let r,{options:s}=e,{value:o}=e;const i="round"in s?s.round:2,l=zr(s.align||"right")+(s.small?" text-xs":"");return t.$$set=t=>{"options"in t&&n(2,s=t.options),"value"in t&&n(3,o=t.value)},t.$$.update=()=>{8&t.$$.dirty&&n(0,r=void 0===o?"":""+(void 0!==i?o.round(i):o))},[r,l,s,o]}var Ur=Object.freeze({__proto__:null,default:class extends ot{constructor(t){super(),st(this,t,Fr,Hr,l,{options:2,value:3})}},compatible_types:["number"],align:function(t,e){return t.align||"right"}});function Dr(t,e,n,r){const s=[],o=r.scale||"linear";function i(t,e){if("line"==r.type)return t.map(e);if("bar"==r.type)return t.map((t=>void 0===t?void 0:t.map(e)));throw new Error("invalid column type")}if(r.log_unit){"log"!=r.scale&&s.push(`column ${t} 'line.log_unit' could be used with log scale only`);const o=is_number(r.log_unit)?r.log_unit:1;function l(t){return t<0?t:(t*=o)<1?1:t}n=i(n,(t=>void 0===t?void 0:l(t))),e=[l(e[0]),l(e[1])]}let a,c,u;if("log"==o){if(e[0]<=0)return s.push(`column ${t}, 'domain' can't be negative for log scale`),{column:n.map((t=>{})),warnings:s,stats:void 0};let o=Math.max(...e.map((t=>Math.log(Math.abs(t)))));a=i(n,(e=>void 0===e?void 0:e>0?Math.log(e)/o:void s.push(`column ${t}, values can't be negative for log scale`))),r.ticks&&(c=r.ticks.filter_map((e=>e>0?Math.log(e)/o:void s.push(`column ${t}, ticks can't be negative for log scale`)))),u=[Math.log(e[0])/o,Math.log(e[1])/o]}else{if("linear"!=o)throw new Error(`unknown scale ${o}`);{let t=Math.max(...e.map((t=>Math.abs(t))));0==t&&(t=1),a=i(n,(e=>void 0===e?void 0:e/t)),r.ticks&&(c=r.ticks.map((e=>e/t))),u=[e[0]/t,e[1]/t]}}return{column:a,warnings:s,stats:{domain:e,ndomain:u,nticks:c,max_length:function(t){if("line"==r.type)return 1;if("bar"==r.type)return t.map((t=>void 0===t?0:t.length)).max();throw new Error("invalid column type")}(n)}}}function Ir(t,e,n){const r=t.slice();return r[8]=e[n],r}function Zr(t,e,n){const r=t.slice();return r[8]=e[n],r}function Wr(t,e,n){const r=t.slice();return r[8]=e[n],r}function Vr(t){let e;function n(t,e){return t[3]<=0?Xr:t[2]>=0?Kr:Jr}let r=n(t),s=r(t);return{c(){s.c(),e=m()},m(t,n){s.m(t,n),u(t,e,n)},p(t,o){r===(r=n(t))&&s?s.p(t,o):(s.d(1),s=r(t),s&&(s.c(),s.m(e.parentNode,e)))},d(t){s.d(t),t&&d(e)}}}function Jr(t){let e,n,r,s,o=[],i=new Map,l=t[5];const a=t=>t[8];for(let e=0;e<l.length;e+=1){let n=Ir(t,l,e),r=a(n);i.set(r,o[e]=Gr(r,n))}function f(t,e){return t[0]>0?Qr:Yr}let g=f(t),m=g(t);return{c(){e=h("svg"),n=h("title"),r=p(t[4]);for(let t=0;t<o.length;t+=1)o[t].c();s=h("line"),m.c(),$(s,"x1","50%"),$(s,"y1","5%"),$(s,"x2","50%"),$(s,"y2","95%"),$(s,"stroke",ss),$(s,"stroke-width","1"),$(e,"class","plot-table-chart plot-line-format text-center")},m(t,i){u(t,e,i),c(e,n),c(n,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);c(e,s),m.m(e,null)},p(t,n){16&n&&y(r,t[4]),32&n&&(l=t[5],o=Y(o,n,a,1,t,l,i,e,X,Gr,s,Ir)),g===(g=f(t))&&m?m.p(t,n):(m.d(1),m=g(t),m&&(m.c(),m.m(e,null)))},d(t){t&&d(e);for(let t=0;t<o.length;t+=1)o[t].d();m.d()}}}function Kr(t){let e,n,r,s,o,i=[],l=new Map,a=t[5];const f=t=>t[8];for(let e=0;e<a.length;e+=1){let n=Zr(t,a,e),r=f(n);l.set(r,i[e]=ts(r,n))}return{c(){e=h("svg"),n=h("title"),r=p(t[4]);for(let t=0;t<i.length;t+=1)i[t].c();s=h("rect"),$(s,"x","0%"),$(s,"y","25%"),$(s,"width",o=100*t[0]+"%"),$(s,"height","50%"),$(s,"fill",ss),$(e,"class","plot-table-chart plot-line-format text-center")},m(t,o){u(t,e,o),c(e,n),c(n,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);c(e,s)},p(t,n){16&n&&y(r,t[4]),32&n&&(a=t[5],i=Y(i,n,f,1,t,a,l,e,X,ts,s,Zr)),1&n&&o!==(o=100*t[0]+"%")&&$(s,"width",o)},d(t){t&&d(e);for(let t=0;t<i.length;t+=1)i[t].d()}}}function Xr(t){let e,n,r,s,o,i,l=[],a=new Map,f=t[5];const g=t=>t[8];for(let e=0;e<f.length;e+=1){let n=Wr(t,f,e),r=g(n);a.set(r,l[e]=es(r,n))}return{c(){e=h("svg"),n=h("title"),r=p(t[4]);for(let t=0;t<l.length;t+=1)l[t].c();s=h("rect"),$(s,"x",o=100- -100*t[0]+"%"),$(s,"y","25%"),$(s,"width",i=-100*t[0]+"%"),$(s,"height","50%"),$(s,"fill",ss),$(e,"class","plot-table-chart plot-line-format text-center")},m(t,o){u(t,e,o),c(e,n),c(n,r);for(let t=0;t<l.length;t+=1)l[t].m(e,null);c(e,s)},p(t,n){16&n&&y(r,t[4]),32&n&&(f=t[5],l=Y(l,n,g,1,t,f,a,e,X,es,s,Wr)),1&n&&o!==(o=100- -100*t[0]+"%")&&$(s,"x",o),1&n&&i!==(i=-100*t[0]+"%")&&$(s,"width",i)},d(t){t&&d(e);for(let t=0;t<l.length;t+=1)l[t].d()}}}function Gr(t,e){let n,r,s;return{key:t,first:null,c(){n=h("line"),$(n,"x1",r=50+50*e[8]+"%"),$(n,"y1","5%"),$(n,"x2",s=50+50*e[8]+"%"),$(n,"y2","25%"),$(n,"stroke",os),$(n,"stroke-width","1"),this.first=n},m(t,e){u(t,n,e)},p(t,o){e=t,32&o&&r!==(r=50+50*e[8]+"%")&&$(n,"x1",r),32&o&&s!==(s=50+50*e[8]+"%")&&$(n,"x2",s)},d(t){t&&d(n)}}}function Yr(t){let e,n,r;return{c(){e=h("rect"),$(e,"x",n=50- -50*t[0]+"%"),$(e,"y","25%"),$(e,"width",r=-50*t[0]+"%"),$(e,"height","50%"),$(e,"fill",ss)},m(t,n){u(t,e,n)},p(t,s){1&s&&n!==(n=50- -50*t[0]+"%")&&$(e,"x",n),1&s&&r!==(r=-50*t[0]+"%")&&$(e,"width",r)},d(t){t&&d(e)}}}function Qr(t){let e,n;return{c(){e=h("rect"),$(e,"x","50%"),$(e,"y","25%"),$(e,"width",n=50*t[0]+"%"),$(e,"height","50%"),$(e,"fill",ss)},m(t,n){u(t,e,n)},p(t,r){1&r&&n!==(n=50*t[0]+"%")&&$(e,"width",n)},d(t){t&&d(e)}}}function ts(t,e){let n,r,s;return{key:t,first:null,c(){n=h("line"),$(n,"x1",r=100*e[8]+"%"),$(n,"y1","5%"),$(n,"x2",s=100*e[8]+"%"),$(n,"y2","25%"),$(n,"stroke",os),$(n,"stroke-width","1"),this.first=n},m(t,e){u(t,n,e)},p(t,o){e=t,32&o&&r!==(r=100*e[8]+"%")&&$(n,"x1",r),32&o&&s!==(s=100*e[8]+"%")&&$(n,"x2",s)},d(t){t&&d(n)}}}function es(t,e){let n,r,s;return{key:t,first:null,c(){n=h("line"),$(n,"x1",r=100- -100*e[8]+"%"),$(n,"y1","5%"),$(n,"x2",s=100- -100*e[8]+"%"),$(n,"y2","25%"),$(n,"stroke",os),$(n,"stroke-width","1"),this.first=n},m(t,e){u(t,n,e)},p(t,o){e=t,32&o&&r!==(r=100- -100*e[8]+"%")&&$(n,"x1",r),32&o&&s!==(s=100- -100*e[8]+"%")&&$(n,"x2",s)},d(t){t&&d(n)}}}function ns(t){let e,r=t[1]&&null!=t[0]&&Vr(t);return{c(){r&&r.c(),e=m()},m(t,n){r&&r.m(t,n),u(t,e,n)},p(t,[n]){t[1]&&null!=t[0]?r?r.p(t,n):(r=Vr(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:n,o:n,d(t){r&&r.d(t),t&&d(e)}}}const rs=(t,e,n,r)=>Dr(t,e,n,r),ss="#111827",os="#9CA3AF";function is(t,e,n){let r,s,o,i,{options:l}=e,{value:a}=e,{converted:c}=e,{stats:u}=e;return t.$$set=t=>{"options"in t&&n(6,l=t.options),"value"in t&&n(7,a=t.value),"converted"in t&&n(0,c=t.converted),"stats"in t&&n(1,u=t.stats)},t.$$.update=()=>{2&t.$$.dirty&&n(2,[r,s]=u?u.ndomain:[0,0],r,(n(3,s),n(1,u))),195&t.$$.dirty&&n(4,o=[void 0!==c?`value: ${a}`:"missing",((null==u?void 0:u.nticks)||[]).length>0?`, ticks: [${(l.ticks||[]).join(", ")}]`:"",u?`domain: [${u.domain[0]}, ${u.domain[1]}]`:"",`scale: ${l.scale||"linear"}`].join(", ")),2&t.$$.dirty&&n(5,i=(null==u?void 0:u.nticks)||[])},[c,u,r,s,o,i,l,a]}var ls=Object.freeze({__proto__:null,default:class extends ot{constructor(t){super(),st(this,t,is,ns,l,{options:6,value:7,converted:0,stats:1})}},compatible_types:["number"],extra_values:({ticks:t})=>t||[],align:function(t,e){if(t.align)return t.align;if(e){const[t,n]=e.ndomain;return n<=0?"right":t>=0?"left":"center"}return"center"},convert_column:rs});function as(t){let e;return{c(){e=h("line"),$(e,"x1",t[0]),$(e,"y1",t[1]),$(e,"x2",t[2]),$(e,"y2",t[3]),$(e,"stroke",t[4]),$(e,"stroke-width",t[5])},m(t,n){u(t,e,n)},p(t,n){1&n&&$(e,"x1",t[0]),2&n&&$(e,"y1",t[1]),4&n&&$(e,"x2",t[2]),8&n&&$(e,"y2",t[3]),16&n&&$(e,"stroke",t[4]),32&n&&$(e,"stroke-width",t[5])},d(t){t&&d(e)}}}function cs(t){let e;return{c(){e=h("line"),$(e,"x1",t[1]),$(e,"y1",t[0]),$(e,"x2",t[3]),$(e,"y2",t[2]),$(e,"stroke",t[4]),$(e,"stroke-width",t[5])},m(t,n){u(t,e,n)},p(t,n){2&n&&$(e,"x1",t[1]),1&n&&$(e,"y1",t[0]),8&n&&$(e,"x2",t[3]),4&n&&$(e,"y2",t[2]),16&n&&$(e,"stroke",t[4]),32&n&&$(e,"stroke-width",t[5])},d(t){t&&d(e)}}}function us(t){let e;function r(t,e){return t[6]?cs:as}let s=r(t),o=s(t);return{c(){o.c(),e=m()},m(t,n){o.m(t,n),u(t,e,n)},p(t,[n]){s===(s=r(t))&&o?o.p(t,n):(o.d(1),o=s(t),o&&(o.c(),o.m(e.parentNode,e)))},i:n,o:n,d(t){o.d(t),t&&d(e)}}}function ds(t,e,n){let{x1:r}=e,{y1:s}=e,{x2:o}=e,{y2:i}=e,{stroke:l}=e,{stroke_width:a}=e,{switch_axis:c=!1}=e;return t.$$set=t=>{"x1"in t&&n(0,r=t.x1),"y1"in t&&n(1,s=t.y1),"x2"in t&&n(2,o=t.x2),"y2"in t&&n(3,i=t.y2),"stroke"in t&&n(4,l=t.stroke),"stroke_width"in t&&n(5,a=t.stroke_width),"switch_axis"in t&&n(6,c=t.switch_axis)},[r,s,o,i,l,a,c]}class fs extends ot{constructor(t){super(),st(this,t,ds,us,l,{x1:0,y1:1,x2:2,y2:3,stroke:4,stroke_width:5,switch_axis:6})}}function hs(t){let e,n=t[5]&&gs(t);return{c(){e=h("rect"),n&&n.c(),$(e,"x",t[0]),$(e,"y",t[1]),$(e,"width",t[2]),$(e,"height",t[3]),$(e,"fill",t[4])},m(t,r){u(t,e,r),n&&n.m(e,null)},p(t,r){t[5]?n?n.p(t,r):(n=gs(t),n.c(),n.m(e,null)):n&&(n.d(1),n=null),1&r&&$(e,"x",t[0]),2&r&&$(e,"y",t[1]),4&r&&$(e,"width",t[2]),8&r&&$(e,"height",t[3]),16&r&&$(e,"fill",t[4])},d(t){t&&d(e),n&&n.d()}}}function ps(t){let e,n=t[5]&&ms(t);return{c(){e=h("rect"),n&&n.c(),$(e,"x",t[1]),$(e,"y",t[0]),$(e,"width",t[3]),$(e,"height",t[2]),$(e,"fill",t[4])},m(t,r){u(t,e,r),n&&n.m(e,null)},p(t,r){t[5]?n?n.p(t,r):(n=ms(t),n.c(),n.m(e,null)):n&&(n.d(1),n=null),2&r&&$(e,"x",t[1]),1&r&&$(e,"y",t[0]),8&r&&$(e,"width",t[3]),4&r&&$(e,"height",t[2]),16&r&&$(e,"fill",t[4])},d(t){t&&d(e),n&&n.d()}}}function gs(t){let e,n;return{c(){e=h("title"),n=p(t[5])},m(t,r){u(t,e,r),c(e,n)},p(t,e){32&e&&y(n,t[5])},d(t){t&&d(e)}}}function ms(t){let e,n;return{c(){e=h("title"),n=p(t[5])},m(t,r){u(t,e,r),c(e,n)},p(t,e){32&e&&y(n,t[5])},d(t){t&&d(e)}}}function ws(t){let e;function r(t,e){return t[6]?ps:hs}let s=r(t),o=s(t);return{c(){o.c(),e=m()},m(t,n){o.m(t,n),u(t,e,n)},p(t,[n]){s===(s=r(t))&&o?o.p(t,n):(o.d(1),o=s(t),o&&(o.c(),o.m(e.parentNode,e)))},i:n,o:n,d(t){o.d(t),t&&d(e)}}}function bs(t,e,n){let{x:r}=e,{y:s}=e,{width:o}=e,{height:i}=e,{fill:l}=e,{title:a}=e,{switch_axis:c=!1}=e;return t.$$set=t=>{"x"in t&&n(0,r=t.x),"y"in t&&n(1,s=t.y),"width"in t&&n(2,o=t.width),"height"in t&&n(3,i=t.height),"fill"in t&&n(4,l=t.fill),"title"in t&&n(5,a=t.title),"switch_axis"in t&&n(6,c=t.switch_axis)},[r,s,o,i,l,a,c]}class $s extends ot{constructor(t){super(),st(this,t,bs,ws,l,{x:0,y:1,width:2,height:3,fill:4,title:5,switch_axis:6})}}function ys(t,e,n){const r=t.slice();return r[23]=e[n],r[25]=n,r}function vs(t,e,n){const r=t.slice();return r[23]=e[n],r[25]=n,r}function _s(t,e,n){const r=t.slice();return r[23]=e[n],r[25]=n,r}function ks(t,e,n){const r=t.slice();return r[23]=e[n],r[25]=n,r}function xs(t,e,n){const r=t.slice();return r[23]=e[n],r[25]=n,r}function js(t,e,n){const r=t.slice();return r[23]=e[n],r[25]=n,r}function Os(t){let e,n,r,s,o,i,l,a=[],f=new Map,g=[],w=new Map,b=t[1];const v=t=>t[25];for(let e=0;e<b.length;e+=1){let n=vs(t,b,e),r=v(n);f.set(r,a[e]=qs(r,n))}let _=t[0]&&!t[3]&&Cs(t);i=new fs({props:{x1:0,y1:50,x2:t[2]*(t[9]+t[10])-t[10],y2:50,stroke:Vs,stroke_width:"1",switch_axis:t[3]}});let k=t[11];const x=t=>t[25];for(let e=0;e<k.length;e+=1){let n=ys(t,k,e),r=x(n);w.set(r,g[e]=Ls(r,n))}return{c(){e=h("svg"),n=h("title"),r=p(t[15]);for(let t=0;t<a.length;t+=1)a[t].c();s=m(),_&&_.c(),o=m(),tt(i.$$.fragment);for(let t=0;t<g.length;t+=1)g[t].c();$(e,"class",t[13]),$(e,"viewBox","0 0 100 100"),$(e,"preserveAspectRatio","none"),$(e,"transform",t[14])},m(t,d){u(t,e,d),c(e,n),c(n,r);for(let t=0;t<a.length;t+=1)a[t].m(e,null);c(e,s),_&&_.m(e,null),c(e,o),et(i,e,null);for(let t=0;t<g.length;t+=1)g[t].m(e,null);l=!0},p(t,n){(!l||32768&n)&&y(r,t[15]),266&n&&(b=t[1],I(),a=Y(a,n,v,1,t,b,f,e,G,qs,s,vs),Z()),t[0]&&!t[3]?_?_.p(t,n):(_=Cs(t),_.c(),_.m(e,o)):_&&(_.d(1),_=null);const c={};1540&n&&(c.x2=t[2]*(t[9]+t[10])-t[10]),8&n&&(c.switch_axis=t[3]),i.$set(c),7688&n&&(k=t[11],I(),g=Y(g,n,x,1,t,k,w,e,G,Ls,null,ys),Z()),(!l||8192&n)&&$(e,"class",t[13]),(!l||16384&n)&&$(e,"transform",t[14])},i(t){if(!l){for(let t=0;t<b.length;t+=1)W(a[t]);W(i.$$.fragment,t);for(let t=0;t<k.length;t+=1)W(g[t]);l=!0}},o(t){for(let t=0;t<a.length;t+=1)V(a[t]);V(i.$$.fragment,t);for(let t=0;t<g.length;t+=1)V(g[t]);l=!1},d(t){t&&d(e);for(let t=0;t<a.length;t+=1)a[t].d();_&&_.d(),nt(i);for(let t=0;t<g.length;t+=1)g[t].d()}}}function Es(t){let e,n,r,s,o,i,l,a=[],f=new Map,g=[],w=new Map,b=t[1];const v=t=>t[25];for(let e=0;e<b.length;e+=1){let n=ks(t,b,e),r=v(n);f.set(r,a[e]=Ns(r,n))}let _=t[0]&&!t[3]&&Ts();i=new fs({props:{x1:0,y1:100,x2:t[2]*(t[9]+t[10])-t[10],y2:100,stroke:Vs,stroke_width:1,switch_axis:t[3]}});let k=t[11];const x=t=>t[25];for(let e=0;e<k.length;e+=1){let n=_s(t,k,e),r=x(n);w.set(r,g[e]=Hs(r,n))}return{c(){e=h("svg"),n=h("title"),r=p(t[15]);for(let t=0;t<a.length;t+=1)a[t].c();s=m(),_&&_.c(),o=m(),tt(i.$$.fragment);for(let t=0;t<g.length;t+=1)g[t].c();$(e,"class",t[13]),$(e,"viewBox","0 0 100 100"),$(e,"preserveAspectRatio","none"),$(e,"transform",t[14])},m(t,d){u(t,e,d),c(e,n),c(n,r);for(let t=0;t<a.length;t+=1)a[t].m(e,null);c(e,s),_&&_.m(e,null),c(e,o),et(i,e,null);for(let t=0;t<g.length;t+=1)g[t].m(e,null);l=!0},p(t,n){(!l||32768&n)&&y(r,t[15]),266&n&&(b=t[1],I(),a=Y(a,n,v,1,t,b,f,e,G,Ns,s,ks),Z()),t[0]&&!t[3]?_?_.p(t,n):(_=Ts(),_.c(),_.m(e,o)):_&&(_.d(1),_=null);const c={};1540&n&&(c.x2=t[2]*(t[9]+t[10])-t[10]),8&n&&(c.switch_axis=t[3]),i.$set(c),7688&n&&(k=t[11],I(),g=Y(g,n,x,1,t,k,w,e,G,Hs,null,_s),Z()),(!l||8192&n)&&$(e,"class",t[13]),(!l||16384&n)&&$(e,"transform",t[14])},i(t){if(!l){for(let t=0;t<b.length;t+=1)W(a[t]);W(i.$$.fragment,t);for(let t=0;t<k.length;t+=1)W(g[t]);l=!0}},o(t){for(let t=0;t<a.length;t+=1)V(a[t]);V(i.$$.fragment,t);for(let t=0;t<g.length;t+=1)V(g[t]);l=!1},d(t){t&&d(e);for(let t=0;t<a.length;t+=1)a[t].d();_&&_.d(),nt(i);for(let t=0;t<g.length;t+=1)g[t].d()}}}function zs(t){let e,n,r,s,o,i,l,a=[],f=new Map,g=[],w=new Map,b=t[1];const v=t=>t[25];for(let e=0;e<b.length;e+=1){let n=js(t,b,e),r=v(n);f.set(r,a[e]=Fs(r,n))}let _=t[0]&&!t[3]&&Us();i=new fs({props:{x1:0,y1:0,x2:t[2]*(t[9]+t[10])-t[10],y2:0,stroke:Vs,stroke_width:1,switch_axis:t[3]}});let k=t[11];const x=t=>t[25];for(let e=0;e<k.length;e+=1){let n=xs(t,k,e),r=x(n);w.set(r,g[e]=Is(r,n))}return{c(){e=h("svg"),n=h("title"),r=p(t[15]);for(let t=0;t<a.length;t+=1)a[t].c();s=m(),_&&_.c(),o=m(),tt(i.$$.fragment);for(let t=0;t<g.length;t+=1)g[t].c();$(e,"class",t[13]),$(e,"viewBox","0 0 100 100"),$(e,"preserveAspectRatio","none"),$(e,"transform",t[14])},m(t,d){u(t,e,d),c(e,n),c(n,r);for(let t=0;t<a.length;t+=1)a[t].m(e,null);c(e,s),_&&_.m(e,null),c(e,o),et(i,e,null);for(let t=0;t<g.length;t+=1)g[t].m(e,null);l=!0},p(t,n){(!l||32768&n)&&y(r,t[15]),266&n&&(b=t[1],I(),a=Y(a,n,v,1,t,b,f,e,G,Fs,s,js),Z()),t[0]&&!t[3]?_?_.p(t,n):(_=Us(),_.c(),_.m(e,o)):_&&(_.d(1),_=null);const c={};1540&n&&(c.x2=t[2]*(t[9]+t[10])-t[10]),8&n&&(c.switch_axis=t[3]),i.$set(c),7688&n&&(k=t[11],I(),g=Y(g,n,x,1,t,k,w,e,G,Is,null,xs),Z()),(!l||8192&n)&&$(e,"class",t[13]),(!l||16384&n)&&$(e,"transform",t[14])},i(t){if(!l){for(let t=0;t<b.length;t+=1)W(a[t]);W(i.$$.fragment,t);for(let t=0;t<k.length;t+=1)W(g[t]);l=!0}},o(t){for(let t=0;t<a.length;t+=1)V(a[t]);V(i.$$.fragment,t);for(let t=0;t<g.length;t+=1)V(g[t]);l=!1},d(t){t&&d(e);for(let t=0;t<a.length;t+=1)a[t].d();_&&_.d(),nt(i);for(let t=0;t<g.length;t+=1)g[t].d()}}}function Ss(t){let e,r;return{c(){e=f("div"),r=p(t[7])},m(t,n){u(t,e,n),c(e,r)},p(t,e){128&e&&y(r,t[7])},i:n,o:n,d(t){t&&d(e)}}}function As(t){let e,r,s;return{c(){e=h("svg"),r=h("title"),s=p(t[15]),$(e,"class",t[13])},m(t,n){u(t,e,n),c(e,r),c(r,s)},p(t,n){32768&n&&y(s,t[15]),8192&n&&$(e,"class",t[13])},i:n,o:n,d(t){t&&d(e)}}}function qs(t,e){let n,r,s;return r=new fs({props:{x1:100-e[8],y1:50-50*e[23],x2:100,y2:50-50*e[23],stroke:Js,stroke_width:1,switch_axis:e[3]}}),{key:t,first:null,c(){n=m(),tt(r.$$.fragment),this.first=n},m(t,e){u(t,n,e),et(r,t,e),s=!0},p(t,n){e=t;const s={};256&n&&(s.x1=100-e[8]),2&n&&(s.y1=50-50*e[23]),2&n&&(s.y2=50-50*e[23]),8&n&&(s.switch_axis=e[3]),r.$set(s)},i(t){s||(W(r.$$.fragment,t),s=!0)},o(t){V(r.$$.fragment,t),s=!1},d(t){t&&d(n),nt(r,t)}}}function Cs(t){let e,n,r;return{c(){e=h("line"),$(e,"x1",100),$(e,"y1",n=49.5-50*t[4]),$(e,"x2",100),$(e,"y2",r=50.5-50*t[5]),$(e,"stroke",Js),$(e,"stroke-width",1)},m(t,n){u(t,e,n)},p(t,s){16&s&&n!==(n=49.5-50*t[4])&&$(e,"y1",n),32&s&&r!==(r=50.5-50*t[5])&&$(e,"y2",r)},d(t){t&&d(e)}}}function Ms(t){let e,n,r,s;const o=[Bs,Rs],i=[];function l(t,e){return t[23]>0?0:1}return e=l(t),n=i[e]=o[e](t),{c(){n.c(),r=m()},m(t,n){i[e].m(t,n),u(t,r,n),s=!0},p(t,s){let a=e;e=l(t),e===a?i[e].p(t,s):(I(),V(i[a],1,1,(()=>{i[a]=null})),Z(),n=i[e],n?n.p(t,s):(n=i[e]=o[e](t),n.c()),W(n,1),n.m(r.parentNode,r))},i(t){s||(W(n),s=!0)},o(t){V(n),s=!1},d(t){i[e].d(t),t&&d(r)}}}function Rs(t){let e,n;return e=new $s({props:{x:t[25]*(t[9]+(t[25]>0?t[10]:0)),y:50,width:t[9],height:50*-t[23],fill:Vs,title:"Value: "+t[12][t[25]],switch_axis:t[3]}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};3584&n&&(r.x=t[25]*(t[9]+(t[25]>0?t[10]:0))),512&n&&(r.width=t[9]),2048&n&&(r.height=50*-t[23]),6144&n&&(r.title="Value: "+t[12][t[25]]),8&n&&(r.switch_axis=t[3]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){V(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function Bs(t){let e,n;return e=new $s({props:{x:t[25]*(t[9]+(t[25]>0?t[10]:0)),y:50-50*t[23],width:t[9],height:50*t[23],fill:Vs,title:"Value: "+t[12][t[25]],switch_axis:t[3]}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};3584&n&&(r.x=t[25]*(t[9]+(t[25]>0?t[10]:0))),2048&n&&(r.y=50-50*t[23]),512&n&&(r.width=t[9]),2048&n&&(r.height=50*t[23]),6144&n&&(r.title="Value: "+t[12][t[25]]),8&n&&(r.switch_axis=t[3]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){V(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function Ls(t,e){let n,r,s,o=void 0!==e[23]&&Ms(e);return{key:t,first:null,c(){n=m(),o&&o.c(),r=m(),this.first=n},m(t,e){u(t,n,e),o&&o.m(t,e),u(t,r,e),s=!0},p(t,n){void 0!==(e=t)[23]?o?(o.p(e,n),2048&n&&W(o,1)):(o=Ms(e),o.c(),W(o,1),o.m(r.parentNode,r)):o&&(I(),V(o,1,1,(()=>{o=null})),Z())},i(t){s||(W(o),s=!0)},o(t){V(o),s=!1},d(t){t&&d(n),o&&o.d(t),t&&d(r)}}}function Ns(t,e){let n,r,s;return r=new fs({props:{x1:100-e[8],y1:100-100*e[23],x2:100,y2:100-100*e[23],stroke:Js,stroke_width:1,switch_axis:e[3]}}),{key:t,first:null,c(){n=m(),tt(r.$$.fragment),this.first=n},m(t,e){u(t,n,e),et(r,t,e),s=!0},p(t,n){e=t;const s={};256&n&&(s.x1=100-e[8]),2&n&&(s.y1=100-100*e[23]),2&n&&(s.y2=100-100*e[23]),8&n&&(s.switch_axis=e[3]),r.$set(s)},i(t){s||(W(r.$$.fragment,t),s=!0)},o(t){V(r.$$.fragment,t),s=!1},d(t){t&&d(n),nt(r,t)}}}function Ts(t){let e,r;return{c(){e=p("y axis\n        "),r=h("line"),$(r,"x1",100),$(r,"y1",-.5),$(r,"x2",100),$(r,"y2",100.5),$(r,"stroke",Js),$(r,"stroke-width",1)},m(t,n){u(t,e,n),u(t,r,n)},p:n,d(t){t&&d(e),t&&d(r)}}}function Ps(t){let e,n;return e=new $s({props:{x:t[25]*(t[9]+(t[25]>0?t[10]:0)),y:100-100*t[23],width:t[9],height:100*t[23],fill:Vs,title:"Value: "+t[12][t[25]],switch_axis:t[3]}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};3584&n&&(r.x=t[25]*(t[9]+(t[25]>0?t[10]:0))),2048&n&&(r.y=100-100*t[23]),512&n&&(r.width=t[9]),2048&n&&(r.height=100*t[23]),6144&n&&(r.title="Value: "+t[12][t[25]]),8&n&&(r.switch_axis=t[3]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){V(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function Hs(t,e){let n,r,s,o=void 0!==e[23]&&Ps(e);return{key:t,first:null,c(){n=m(),o&&o.c(),r=m(),this.first=n},m(t,e){u(t,n,e),o&&o.m(t,e),u(t,r,e),s=!0},p(t,n){void 0!==(e=t)[23]?o?(o.p(e,n),2048&n&&W(o,1)):(o=Ps(e),o.c(),W(o,1),o.m(r.parentNode,r)):o&&(I(),V(o,1,1,(()=>{o=null})),Z())},i(t){s||(W(o),s=!0)},o(t){V(o),s=!1},d(t){t&&d(n),o&&o.d(t),t&&d(r)}}}function Fs(t,e){let n,r,s;return r=new fs({props:{x1:100-e[8],y1:100*-e[23],x2:100,y2:100*-e[23],stroke:Js,stroke_width:1,switch_axis:e[3]}}),{key:t,first:null,c(){n=m(),tt(r.$$.fragment),this.first=n},m(t,e){u(t,n,e),et(r,t,e),s=!0},p(t,n){e=t;const s={};256&n&&(s.x1=100-e[8]),2&n&&(s.y1=100*-e[23]),2&n&&(s.y2=100*-e[23]),8&n&&(s.switch_axis=e[3]),r.$set(s)},i(t){s||(W(r.$$.fragment,t),s=!0)},o(t){V(r.$$.fragment,t),s=!1},d(t){t&&d(n),nt(r,t)}}}function Us(t){let e;return{c(){e=h("line"),$(e,"x1",100),$(e,"y1",-.5),$(e,"x2",100),$(e,"y2",100.5),$(e,"stroke",Js),$(e,"stroke-width",1)},m(t,n){u(t,e,n)},p:n,d(t){t&&d(e)}}}function Ds(t){let e,n;return e=new $s({props:{x:t[25]*(t[9]+(t[25]>0?t[10]:0)),y:"0",width:t[9],height:100*-t[23],fill:Vs,title:"Value: "+t[12][t[25]],switch_axis:t[3]}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};3584&n&&(r.x=t[25]*(t[9]+(t[25]>0?t[10]:0))),512&n&&(r.width=t[9]),2048&n&&(r.height=100*-t[23]),6144&n&&(r.title="Value: "+t[12][t[25]]),8&n&&(r.switch_axis=t[3]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){V(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function Is(t,e){let n,r,s,o=void 0!==e[23]&&Ds(e);return{key:t,first:null,c(){n=m(),o&&o.c(),r=m(),this.first=n},m(t,e){u(t,n,e),o&&o.m(t,e),u(t,r,e),s=!0},p(t,n){void 0!==(e=t)[23]?o?(o.p(e,n),2048&n&&W(o,1)):(o=Ds(e),o.c(),W(o,1),o.m(r.parentNode,r)):o&&(I(),V(o,1,1,(()=>{o=null})),Z())},i(t){s||(W(o),s=!0)},o(t){V(o),s=!1},d(t){t&&d(n),o&&o.d(t),t&&d(r)}}}function Zs(t){let e,n,r,s;const o=[As,Ss,zs,Es,Os],i=[];function l(t,e){return t[6]?t[6]&&t[7]?1:t[5]<=0?2:t[4]>=0?3:4:0}return e=l(t),n=i[e]=o[e](t),{c(){n.c(),r=m()},m(t,n){i[e].m(t,n),u(t,r,n),s=!0},p(t,[s]){let a=e;e=l(t),e===a?i[e].p(t,s):(I(),V(i[a],1,1,(()=>{i[a]=null})),Z(),n=i[e],n?n.p(t,s):(n=i[e]=o[e](t),n.c()),W(n,1),n.m(r.parentNode,r))},i(t){s||(W(n),s=!0)},o(t){V(n),s=!1},d(t){i[e].d(t),t&&d(r)}}}const Ws=(t,e,n,r)=>Dr(t,e,n,r),Vs="#111827",Js="#9CA3AF";function Ks(t,e,n){let r,s,o,i,{options:l}=e,{value:a}=e,{converted:c}=e,{stats:u}=e,d=!1,f=0,h=0,p=0,g=[],m=[],w=!1,b=[],$=[],y=0,v=!1,_=0,k=0,x=0,j=0;return t.$$set=t=>{"options"in t&&n(16,l=t.options),"value"in t&&n(17,a=t.value),"converted"in t&&n(18,c=t.converted),"stats"in t&&n(19,u=t.stats)},t.$$.update=()=>{if(8323135&t.$$.dirty)if(n(7,i=void 0),u&&c&&a){n(6,d=!0),n(2,y=u.max_length),n(4,_=u.ndomain[0]),n(5,k=u.ndomain[1]),n(21,x=u.domain[0]),n(22,j=u.domain[1]),n(0,w=!!u.nticks),w?(n(1,b=[...u.nticks||[]]),b.add([0,_].min()),b.add([0,k].max()),n(1,b=b.unique().asc()),n(20,$=[...l.ticks||[]]),$.add([0,x].min()),$.add([0,j].max()),n(20,$=$.unique().asc())):(n(1,b=[]),n(20,$=[])),n(3,v=!!is_boolean(l.horizontal)&&l.horizontal);const t=v&&"large"!=l.height,e=function(t,e,n){if(t>200)return"more than 200 bars not supported".to_error();const[r,s]=n?[15,3]:[5,3];let o=100;e&&(o-=r+s);const i=o/(t+.1*(t-1));return{tick_width:r,bar_width:i,space_width:.1*i}.to_success()}(y,w,t);e.is_error?n(7,i=e.message):(n(8,f=e.value.tick_width),n(9,h=e.value.bar_width),n(10,p=e.value.space_width),n(11,g=c),n(12,m=a))}else n(6,d=!1);65536&t.$$.dirty&&n(13,r=`plot-table-chart plot-bar-format plot-bar-format-${l.height||"normal"} text-center`),8&t.$$.dirty&&n(14,s=v?"scale(-1,1)":""),7667712&t.$$.dirty&&n(15,o=void 0===c?"":[$.is_empty()?"":`ticks: [${$.join(", ")}]`,`domain: [${x}, ${j}]`,`scale: ${l.scale||"linear"}`].join(", "))},[w,b,y,v,_,k,d,i,f,h,p,g,m,r,s,o,l,a,c,u,$,x,j]}var Xs=Object.freeze({__proto__:null,default:class extends ot{constructor(t){super(),st(this,t,Ks,Zs,l,{options:16,value:17,converted:18,stats:19})}},compatible_types:["array"],extra_values:({ticks:t})=>t||[],convert_column:Ws});function Gs(t){let e,r;return{c(){e=f("div"),r=p(t[0]),$(e,"class",t[1])},m(t,n){u(t,e,n),c(e,r)},p(t,[e]){1&e&&y(r,t[0])},i:n,o:n,d(t){t&&d(e)}}}function Ys(t,e,n){let r,{options:s}=e,{value:o}=e;const i=zr(s.align||"left")+(s.small?" text-xs":"");return t.$$set=t=>{"options"in t&&n(2,s=t.options),"value"in t&&n(3,o=t.value)},t.$$.update=()=>{8&t.$$.dirty&&n(0,r=null==o?"":""+o)},[r,i,s,o]}var Qs=Object.freeze({__proto__:null,default:class extends ot{constructor(t){super(),st(this,t,Ys,Gs,l,{options:2,value:3})}},compatible_types:[],align:function(t,e){return t.align||"left"}});const to=t=>`<svg class="${t}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg>`;function eo(t){let e,n=`<svg class="${"h-5 w-5 p-0.5 text-gray-900"}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>`;return{c(){e=f("a"),$(e,"class","inline-block"),$(e,"target","_blank"),$(e,"href",t[0])},m(t,r){u(t,e,r),e.innerHTML=n},p(t,n){1&n&&$(e,"href",t[0])},d(t){t&&d(e)}}}function no(t){let e,r=t[0]&&eo(t);return{c(){e=f("div"),r&&r.c(),$(e,"class","text-center")},m(t,n){u(t,e,n),r&&r.m(e,null)},p(t,[n]){t[0]?r?r.p(t,n):(r=eo(t),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i:n,o:n,d(t){t&&d(e),r&&r.d()}}}function ro(t,e,n){let{options:r}=e,{value:s}=e;return discard(r),t.$$set=t=>{"options"in t&&n(1,r=t.options),"value"in t&&n(0,s=t.value)},[s,r]}var so=Object.freeze({__proto__:null,default:class extends ot{constructor(t){super(),st(this,t,ro,no,l,{options:1,value:0})}},compatible_types:["string"]});function oo(t){let e,n,r;return{c(){e=f("img"),$(e,"class",n=t[1][1]+" block"),e.src!==(r=t[0])&&$(e,"src",r)},m(t,n){u(t,e,n)},p(t,s){2&s&&n!==(n=t[1][1]+" block")&&$(e,"class",n),1&s&&e.src!==(r=t[0])&&$(e,"src",r)},d(t){t&&d(e)}}}function io(t){let e,r,s=t[0]&&oo(t);return{c(){e=f("div"),s&&s.c(),$(e,"class",r=t[1][0]+" flex justify-center p-0.5")},m(t,n){u(t,e,n),s&&s.m(e,null)},p(t,[n]){t[0]?s?s.p(t,n):(s=oo(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null),2&n&&r!==(r=t[1][0]+" flex justify-center p-0.5")&&$(e,"class",r)},i:n,o:n,d(t){t&&d(e),s&&s.d()}}}function lo(t,e,n){let r,{options:s}=e,{value:o}=e;return t.$$set=t=>{"options"in t&&n(2,s=t.options),"value"in t&&n(0,o=t.value)},t.$$.update=()=>{4&t.$$.dirty&&n(1,r=s.small?["h-12","max-h-12"]:["h-32","max-h-32"])},[o,r,s]}const ao={string:Lr,boolean:Pr,number:Ur,unknown:Qs,line:ls,bar:Xs,link:so,image:Object.freeze({__proto__:null,default:class extends ot{constructor(t){super(),st(this,t,lo,io,l,{options:2,value:0})}},compatible_types:["string"]})};function co(t){return t in ao?{is_error:!1,value:ao[t]}:`no '${t}' format`.to_error()}const uo={string:function(t,e){return t.localeCompare(e)},number:function(t,e){return t-e},boolean:function(t,e){return t==e?0:t?1:-1},unknown:function(t,e){return(""+t).localeCompare(""+e)}};function fo(t,[e,n]){const r="desc"==n,s=ensure(t.find((({id:t})=>t==e))).type;if(!(s in uo))throw new Error(`no comparator for '${s}' type, please register one`);const o=uo[s];return r?function(t,n){const r=n[e],s=t[e];return void 0===r?void 0===s?0:-1:void 0===s?1:o(r,s)}:function(t,n){const r=t[e],s=n[e];return void 0===r?void 0===s?0:-1:void 0===s?1:o(r,s)}}function ho(t,e,n){if(n.length>3)throw new Error("sort not supported for more than 3 columns");const[r,s,o]=n;if(null==r&&assert(null==s),null==s&&assert(null==o),0==e.length||null==r)return e;let i,l=fo(t,r),a=s?fo(t,s):void 0,c=o?fo(t,o):void 0;i=c?function(t,e){let n=l(t,e);return 0!=n?n:(n=a(t,e),0!=n?n:c(t,e))}:a?function(t,e){let n=l(t,e);return 0!=n?n:a(t,e)}:l;const u=[...e];return u.sort(i),u}function po(t,e,n){const r=[...e];for(const t of r)t._weights={},t._nweights={};for(const e in n){const{type:n,min_max:s}=ensure(t.find((({id:t})=>t==e)));let[o,i]=r.partition((t=>void 0!==t[e]));if(0==o.length){for(const t of r)t._weights[e]=0,t._nweights[e]=0;continue}if("number"==n){const t=typeof r[0][e];if("number"!=t)throw new Error(`wrong type for '${e}' column, wsort expects number but found '${t}'`);for(const t of o)t._weights[e]=t[e]}else{if(!(n in uo))throw new Error(`no comparator for '${n}' type, please register one`);const t=uo[n];o.sort(((n,r)=>t(n[e],r[e])));let r,s=0;for(let t=0;t<o.length;t++){const n=o[t];n[e]==r?s+=1:r=n[e],n._weights[e]=t-s}}{let t,r;if(s){if("number"!=n)throw new Error("can't use min_max for non number type");t=s[0],r=s[1]}else{const n=o.map((t=>t._weights[e]));t=Math.min(...n),r=Math.max(...n)}const i=(r+t)/2;let l=(r-t)/2;assert(l>=0),l=0==l?1:l;for(const t of o){let n=(t._weights[e]-i)/l;t._nweights[e]=n}}let l=o.map((t=>t._nweights[e])).median();for(const t of i)t._nweights[e]=l}for(const t of r){let e=0;for(const r in n)e+=n[r]*t._nweights[r];t._w=e}return r.sort(((t,e)=>t._w-e._w)).rev(),r}test("sort_table",(()=>{const t=[{id:"name",type:"string"},{id:"age",type:"number"}],e=[{name:"Artanis",age:200},{name:"Sarah",age:30},{name:"Jim",age:30},{name:"Amon",age:void 0}];let n=n=>ho(t,e,n).map((({name:t})=>t));assert.equal(n([["name","asc"]]),["Amon","Artanis","Jim","Sarah"]),assert.equal(n([["age","asc"]])[0],"Amon"),assert.equal(n([["age","asc"],["name","asc"]]),["Amon","Jim","Sarah","Artanis"])})),test("wsort_table",(()=>{const t=(t,e,n)=>po(t,e,n).map((({id:t})=>t));{const e=[{id:"a",type:"number"},{id:"b",type:"number"}],n=[{id:"a",a:0,b:3},{id:"b",a:1,b:3},{id:"c",a:2,b:void 0},{id:"d",a:-2,b:200}];assert.equal(t(e,n,{a:1,b:-1}),["d","a","b","c"])}{const e=[{id:"a",type:"number"}],n=[{id:"a",a:0},{id:"b",a:1},{id:"c",a:void 0}];assert.equal(t(e,n,{a:1}),["a","c","b"])}{const t=po([{id:"a",type:"string"}],[{id:"a",a:"a"},{id:"b",a:"a"},{id:"c",a:"b"}],{a:1});assert.equal(t[2].id,"c"),assert.equal(t.map((t=>t._weights.a)),[0,0,1])}}));const go=["<=","<","=","!=",">",">=","~"];function mo(t){return go.includes(t)?t:"="}function wo({type:t},e){switch(t){case"string":return e;case"boolean":try{return["true","t","1"].includes(e.downcase())}catch(t){return}case"number":try{let t=parseFloat(e);return Number.isFinite(t)?t:void 0}catch(t){return}default:return e}}function bo(t){if(!Array.isArray(t))return!1;for(const e of t)if(void 0!==e&&"number"!=typeof e)return!1;return!0}const $o=["string","number","boolean","unknown"];function yo(t){switch(t){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"array":return"array";default:return"unknown"}}function vo(t,e){const n=[],r=function(t,e,n){let r=[];return r=cr(e,null==t?void 0:t.map((({id:t})=>t)),!0),r=r.map((t=>{for(const e in t)Array.isArray(t[e])&&(t[e]=t[e].map((t=>null===t?void 0:t)));return t})),r.each(((t,e)=>{t._i=e,t._converted={}})),r}(t.columns,e);if(0==r.length)return{columns:[],rows:[],messages:kn(n)};let s=function(t,e,n){if(t)return t;const r=new HSet;for(let t=0;t<e.length;t++)for(const n in e[t])"_i"!=n&&"_converted"!=n&&r.add(n);return r.to_a().asc().map((t=>({id:t})))}(t.columns,r);if(t.alter_columns){const e=t.alter_columns.map((({id:t})=>t));s=[...t.alter_columns,...s.filter((({id:t})=>!e.includes(t)))]}const o=s.length;s.length!=o&&n.push("not unique column ids");let i=function(t,e,n){let r=t.map((t=>t.clone()));for(let t=0;t<e.length;t++){const s=e[t];for(const t of r){const{id:e,type:r}=t;if("_i"==e)continue;let o=s[e];if(void 0===o)continue;let i=typeof o;"object"==i&&(i=bo(o)?"array":"object"),i!=r&&(void 0===r?t.type=yo(i):"unknown"!=r&&$o.includes(r)&&(n.push(`wrong type for column '${e}', specified as '${r}' but '${typeof o}' found`),t.type="unknown"))}}return r.map((t=>Object.assign(Object.assign({},t),{type:t.type||"unknown"})))}(s,r,n),l=function(t,e){var n;const r=co("unknown");if(r.is_error)throw"can't get 'unknown' formatter";let s=[];for(const o of t){const t=o.format||{type:"array"==o.type?"unknown":o.type},i=co(t.type);i.is_error?(e.push(i.message),s.push([r.value,t])):i.value.compatible_types.includes(o.type)?s.push([i.value,t]):(e.push(`column ${o.id} has wrong format, format ${null===(n=o.format)||void 0===n?void 0:n.type} is not compatible with '${o.type}' type`),s.push([r.value,t]))}return s}(i,n);const a=function(t,e,n,r){const s={};for(let o=0;o<t.length;o++){const{id:i,type:l,domain:a}=t[o],[c,u]=e[o];if("number"!=l&&"array"!=l){a&&r.push(`non number column '${i}' can't have domain`);continue}const d=(c.extra_values?c.extra_values(u):[]).skip_undefined(),f=[];if("number"==l)for(const t of n){const e=t[i];void 0!==e&&f.add(e)}else{if("array"!=l)throw new Error("invalid ");for(const t of n){const e=t[i];if(void 0!==e)for(const t of e)void 0!==t&&f.add(t)}}if(f.push(...d),0==f.length){a&&(s[i]=a);continue}let h=f[0],p=f[0];for(const t of f)t>p?p=t:t<h&&(h=t);const g=a||[h,p];h<g[0]&&(r.push(`column ${i} 'domain' min value is greather than actual min ${h}`),g[0]=h),p>g[1]&&(r.push(`column ${i} 'line.domain' max value is smaller than actual max ${p}`),g[1]=p),s[i]=g}return s}(i,l,r,n);l=function(t,e,n,r){return n.map(((n,s)=>{const{id:o,type:i}=t[s],[l,a]=n;if("number"==a.type&&void 0===a.round)if("number"==i){if(e.every((t=>{const e=t[o];return void 0===e||Number.isInteger(e)})))return[l,Object.assign(Object.assign({},a),{round:0})]}else r.push(`column ${o} is non number and can't use number formatter`);return n}))}(i,r,l,n);const c=_o(i,r),u=function(t,e,n,r,s){const o={};for(let i=0;i<t.length;i++){const[{id:l},[a,c]]=[t[i],n[i]];if(a.convert_column){const t=r.map((t=>t[l])),n=e[l];if(n){const{column:e,warnings:i,stats:u}=a.convert_column(l,n,t,c);o[l]=u,i.forEach((t=>s.push(t)));for(let t=0;t<r.length;t++)r[t]._converted[l]=e[t]}}}return o}(i,a,l,r,n);return{columns:i.map(((t,e)=>({id:t.id,type:t.type,title:t.title,desc:t.desc,delimiter:t.delimiter,format:l[e][1],formatStats:u[t.id],formatter:l[e][0],widthP:c[e],domain:a[t.id]}))),rows:r,messages:kn(n)}}function _o(t,e){let n;if(t.some((({width:t})=>null!=t)))n=t.map((({width:t})=>t||1));else{const r=new Hash;for(const n of e)for(const{id:e,type:s}of t){let t;if(void 0!==n[e]){if("string"==s)t=n[e].length;else if("number"==s)t=(""+n[e]).length;else{if("boolean"!=s)continue;t=1}r.getm(e,[]).push(t)}}const s=r.map((t=>t.quantile(.7))),o=s.values().is_empty()?1:s.values().median(),i=1.618,l=s.map((t=>t>o*i?i:t<o/i?1/i:1)),a=1;n=t.map((({id:t})=>l.get(t,a)))}return ko(n)}function ko(t){if(0==t.length)return[];const e=100/t.sum();let n=t.map((t=>(t*e).round()));for(;;){const t=n.sum();if(t>100)n[n.maxi()]-=1;else{if(!(t<100))break;n[n.mini()]+=1}}return n}function xo(t,e,n){return e=function(t,e,n){if(!n)return e;for(const{id:r,type:s}of t){const t=n[r];if(!t)continue;const[o,i]=t;if(void 0===i||""===i)continue;const l=jo(s,[o,i]);e=e.filter((t=>l(t[r])))}return e}(t,e=function(t,e,n){if(!(n=n.trim()))return e;const r=n.downcase();return e.filter((e=>{for(const{id:n}of t)if((""+e[n]).downcase().includes(r))return!0;return!1}))}(t,e,n.filter),n.filters)}function jo(t,[e,n]){switch(t){case"string":if("string"!=typeof n)throw new Error("string filter value expected");const t=n,r=n.downcase();switch(e){case"<=":return e=>void 0!==e&&e<=t;case"<":return e=>void 0!==e&&e<t;case"=":return e=>void 0!==e&&e==t;case"!=":return e=>void 0!==e&&e!=t;case">":return e=>void 0!==e&&e>t;case">=":return e=>void 0!==e&&e>=t;case"~":return t=>void 0!==t&&t.downcase().includes(r)}case"boolean":if("boolean"!=typeof n)throw new Error("boolean filter value expected");const s=n;switch(e){case"<=":return t=>void 0!==t&&t<=s;case"<":return t=>void 0!==t&&t<s;case"=":return t=>void 0!==t&&t==s;case"!=":return t=>void 0!==t&&t!=s;case">":return t=>void 0!==t&&t>s;case">=":return t=>void 0!==t&&t>=s;case"~":return t=>void 0!==t&&t==s}case"number":if("number"!=typeof n)throw new Error("number filter value expected");const o=n;switch(e){case"<=":return t=>void 0!==t&&t<=o;case"<":return t=>void 0!==t&&t<o;case"=":return t=>void 0!==t&&t==o;case"!=":return t=>void 0!==t&&t!=o;case">":return t=>void 0!==t&&t>o;case">=":return t=>void 0!==t&&t>=o;case"~":return t=>void 0!==t&&t==o}default:const i=""+n;switch(e){case"<=":return t=>void 0!==t&&""+t<=i;case"<":return t=>void 0!==t&&""+t<i;case"=":return t=>void 0!==t&&""+t==i;case"!=":return t=>void 0!==t&&""+t!=i;case">":return t=>void 0!==t&&""+t>i;case">=":return t=>void 0!==t&&""+t>=i;case"~":return t=>void 0!==t&&""+t==i}}throw new Error(`unknown filter ${t} ${e}`)}function Oo(t){return t.map((t=>{let e=Object.assign({},t);return delete e._i,delete e._converted,e}))}function Eo(t){let e,n,r,s,o,i,l,a,h,p;return{c(){e=f("div"),n=f("span"),r=f("span"),r.textContent="w =",s=g(),o=f("input"),$(r,"class","w-5 inline-block"),$(o,"class","w-10 outline-none pl-1 text-xs border border-gray-200 focus:text-gray-900  svelte-1brt80c"),$(o,"type","number"),$(o,"step","0.1"),o.value=i=t[1].toFixed(1),$(n,"class",l=t[2]?"text-gray-900":"plot-table-controls-color"),$(e,"class",a=t[0]+" my-1 text-xs "+(!t[3]&&"invisible"))},m(i,l){u(i,e,l),c(e,n),c(n,r),c(n,s),c(n,o),h||(p=w(o,"change",t[5]),h=!0)},p(t,r){2&r&&i!==(i=t[1].toFixed(1))&&(o.value=i),4&r&&l!==(l=t[2]?"text-gray-900":"plot-table-controls-color")&&$(n,"class",l),9&r&&a!==(a=t[0]+" my-1 text-xs "+(!t[3]&&"invisible"))&&$(e,"class",a)},d(t){t&&d(e),h=!1,p()}}}function zo(t){let e,r=t[4]&&Eo(t);return{c(){r&&r.c(),e=m()},m(t,n){r&&r.m(t,n),u(t,e,n)},p(t,[n]){t[4]?r?r.p(t,n):(r=Eo(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:n,o:n,d(t){r&&r.d(t),t&&d(e)}}}function So(t,e,n){let r,s,o,i,{column:l}=e,{align:a}=e,{state:c}=e;const u=(t=>{c.wsort&&n(6,c=Object.assign(Object.assign({},c),{wsort:Object.assign(Object.assign({},c.wsort),{[l.id]:t})}))}).debounce(200);return t.$$set=t=>{"column"in t&&n(7,l=t.column),"align"in t&&n(0,a=t.align),"state"in t&&n(6,c=t.state)},t.$$.update=()=>{192&t.$$.dirty&&n(1,r=(c.wsort||{})[l.id]||0),2&t.$$.dirty&&n(2,s=0!=r),128&t.$$.dirty&&n(3,o=!["image","link"].includes(l.format.type)&&!["unknown","array"].includes(l.type)),64&t.$$.dirty&&n(4,i=c.wsort)},[a,r,s,o,i,({target:{value:t}})=>{n(1,r=parseFloat(t)),u(r)},c,l]}test("normalize_table_options_slow",(()=>{const t=t=>t.map((({id:t,type:e})=>({id:t,type:e})));{const{columns:e,rows:n}=vo({},[["v",null]]);assert.equal(t(e),[{id:"a",type:"string"},{id:"b",type:"unknown"}]),assert.equal(Oo(n),[{a:"v"}])}{const{columns:e,rows:n}=vo({},[{k:"v",k2:null}]);assert.equal(t(e),[{id:"k",type:"string"},{id:"k2",type:"unknown"}]),assert.equal(Oo(n),[{k:"v"}])}{const{columns:e,rows:n}=vo({},[{k:"v"},{k:0}]);assert.equal(t(e),[{id:"k",type:"unknown"}]),assert.equal(Oo(n),[{k:"v"},{k:0}])}{const{columns:t}=vo({},[{v:1}]);assert.equal(t[0].format,{type:"number",round:0})}})),test("calculateColumnWidths",(()=>{assert.equal(_o([{id:"name",type:"string"},{id:"age",type:"number"}],[{name:"Jim Raynor",age:30},{name:"Kate",age:25}]),[62,38])})),test("weightsToPercents",(()=>{assert.equal(ko([2,2]),[50,50]),assert.equal(ko([3,3,3]).sort(),[33,33,34])}));class Ao extends ot{constructor(t){super(),st(this,t,So,zo,l,{column:7,align:0,state:6})}}function qo(t,e,n){const r=t.slice();return r[10]=e[n],r}function Co(t){let e,n,r,s,i,l,a,h,p,m,b,y=[],v=new Map,_=go;const x=t=>t[10];for(let e=0;e<_.length;e+=1){let n=qo(t,_,e),r=x(n);v.set(r,y[e]=Mo(r,n))}return{c(){e=f("div"),n=f("span"),r=f("select");for(let t=0;t<y.length;t+=1)y[t].c();i=g(),l=f("input"),$(r,"class","outline-none w-5 inline-block svelte-nsma8g"),$(l,"class","w-10 outline-none pl-1 text-xs border border-gray-200 focus:text-gray-900"),$(l,"type","text"),l.value=a=void 0===t[1][1]?"":""+t[1][1],$(n,"class",h=t[2]?"text-gray-900":"plot-table-controls-color"),$(e,"class",p=t[0]+" my-1 text-xs "+(!t[3]&&"invisible"))},m(s,o){u(s,e,o),c(e,n),c(n,r);for(let t=0;t<y.length;t+=1)y[t].m(r,null);k(r,t[1][0]),c(n,i),c(n,l),m||(b=[w(r,"change",t[5]),w(l,"keyup",t[6])],m=!0)},p(t,o){0&o&&(_=go,y=Y(y,o,x,1,t,_,v,r,X,Mo,null,qo)),2&o&&s!==(s=t[1][0])&&k(r,t[1][0]),2&o&&a!==(a=void 0===t[1][1]?"":""+t[1][1])&&l.value!==a&&(l.value=a),4&o&&h!==(h=t[2]?"text-gray-900":"plot-table-controls-color")&&$(n,"class",h),9&o&&p!==(p=t[0]+" my-1 text-xs "+(!t[3]&&"invisible"))&&$(e,"class",p)},d(t){t&&d(e);for(let t=0;t<y.length;t+=1)y[t].d();m=!1,o(b)}}}function Mo(t,e){let n,r,s=e[10]+"";return{key:t,first:null,c(){n=f("option"),r=p(s),n.__value=e[10],n.value=n.__value,this.first=n},m(t,e){u(t,n,e),c(n,r)},p(t,n){e=t},d(t){t&&d(n)}}}function Ro(t){let e,r=t[4]&&Co(t);return{c(){r&&r.c(),e=m()},m(t,n){r&&r.m(t,n),u(t,e,n)},p(t,[n]){t[4]?r?r.p(t,n):(r=Co(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:n,o:n,d(t){r&&r.d(t),t&&d(e)}}}function Bo(t,e,n){let r,s,o,i,{column:l}=e,{align:a}=e,{state:c}=e;const u=(t=>{c.filters&&n(7,c=Object.assign(Object.assign({},c),{filters:Object.assign(Object.assign({},c.filters),{[l.id]:t})}))}).debounce(200);return t.$$set=t=>{"column"in t&&n(8,l=t.column),"align"in t&&n(0,a=t.align),"state"in t&&n(7,c=t.state)},t.$$.update=()=>{384&t.$$.dirty&&n(1,i=c.filters&&l.id in c.filters?c.filters[l.id]:["=",void 0]),2&t.$$.dirty&&n(2,r=null!=i[1]&&""!==i[1]),256&t.$$.dirty&&n(3,s=!["image","link"].includes(l.format.type)&&!["unknown","array"].includes(l.type)),128&t.$$.dirty&&n(4,o=c.filters)},[a,i,r,s,o,({target:{value:t}})=>{n(1,i=[mo(t),i[1]]),u(i)},({target:{value:t}})=>{n(1,i=[i[0],wo(l,t)]),u(i)},c,l]}class Lo extends ot{constructor(t){super(),st(this,t,Bo,Ro,l,{column:8,align:0,state:7})}}function No(t){let e,n,r,s,o,i,l,a,h,m,v,_,k,x,j,O,E,z,S,A=t[3].symbol+"";function C(e){t[12](e)}let M={column:t[1],align:"text-right"};function R(e){t[13](e)}void 0!==t[0]&&(M.state=t[0]),v=new Ao({props:M}),q.push((()=>Q(v,"state",C)));let B={column:t[1],align:"text-right"};return void 0!==t[0]&&(B.state=t[0]),x=new Lo({props:B}),q.push((()=>Q(x,"state",R))),{c(){e=f("th"),n=f("a"),r=f("span"),s=p(A),i=g(),l=f("span"),a=p(t[2]),m=g(),tt(v.$$.fragment),k=g(),tt(x.$$.fragment),$(r,"class",o=t[3].klass+" mr-0.5"),$(n,"class","flex justify-between"),$(n,"href","#"),$(n,"title",h=t[1].desc),$(e,"class",O="text-right "+t[4])},m(o,d){u(o,e,d),c(e,n),c(n,r),c(r,s),c(n,i),c(n,l),c(l,a),c(e,m),et(v,e,null),c(e,k),et(x,e,null),E=!0,z||(S=w(n,"click",b(t[6])),z=!0)},p(t,i){(!E||8&i)&&A!==(A=t[3].symbol+"")&&y(s,A),(!E||8&i&&o!==(o=t[3].klass+" mr-0.5"))&&$(r,"class",o),(!E||4&i)&&y(a,t[2]),(!E||2&i&&h!==(h=t[1].desc))&&$(n,"title",h);const l={};2&i&&(l.column=t[1]),!_&&1&i&&(_=!0,l.state=t[0],N((()=>_=!1))),v.$set(l);const c={};2&i&&(c.column=t[1]),!j&&1&i&&(j=!0,c.state=t[0],N((()=>j=!1))),x.$set(c),(!E||16&i&&O!==(O="text-right "+t[4]))&&$(e,"class",O)},i(t){E||(W(v.$$.fragment,t),W(x.$$.fragment,t),E=!0)},o(t){V(v.$$.fragment,t),V(x.$$.fragment,t),E=!1},d(t){t&&d(e),nt(v),nt(x),z=!1,S()}}}function To(t){let e,n,r,s,o,i,l,a,h,m,v,_,k,x,j,O,E,z,S,A,C,M,R=t[3].symbol+"",B=t[3].symbol+"";function L(e){t[10](e)}let T={column:t[1],align:"text-center"};function P(e){t[11](e)}void 0!==t[0]&&(T.state=t[0]),j=new Ao({props:T}),q.push((()=>Q(j,"state",L)));let H={column:t[1],align:"text-center"};return void 0!==t[0]&&(H.state=t[0]),z=new Lo({props:H}),q.push((()=>Q(z,"state",P))),{c(){e=f("th"),n=f("a"),r=f("span"),s=p(R),o=g(),i=f("span"),l=p(t[2]),a=g(),h=f("span"),m=p(B),x=g(),tt(j.$$.fragment),E=g(),tt(z.$$.fragment),$(r,"class","invisible mr-0.5"),$(h,"class",v=t[3].klass+" ml-0.5"),$(h,"title",_=t[3].title),$(n,"class","flex justify-between"),$(n,"href","#"),$(n,"title",k=t[1].desc),$(e,"class",t[4])},m(d,f){u(d,e,f),c(e,n),c(n,r),c(r,s),c(n,o),c(n,i),c(i,l),c(n,a),c(n,h),c(h,m),c(e,x),et(j,e,null),c(e,E),et(z,e,null),A=!0,C||(M=w(n,"click",b(t[6])),C=!0)},p(t,r){(!A||8&r)&&R!==(R=t[3].symbol+"")&&y(s,R),(!A||4&r)&&y(l,t[2]),(!A||8&r)&&B!==(B=t[3].symbol+"")&&y(m,B),(!A||8&r&&v!==(v=t[3].klass+" ml-0.5"))&&$(h,"class",v),(!A||8&r&&_!==(_=t[3].title))&&$(h,"title",_),(!A||2&r&&k!==(k=t[1].desc))&&$(n,"title",k);const o={};2&r&&(o.column=t[1]),!O&&1&r&&(O=!0,o.state=t[0],N((()=>O=!1))),j.$set(o);const i={};2&r&&(i.column=t[1]),!S&&1&r&&(S=!0,i.state=t[0],N((()=>S=!1))),z.$set(i),(!A||16&r)&&$(e,"class",t[4])},i(t){A||(W(j.$$.fragment,t),W(z.$$.fragment,t),A=!0)},o(t){V(j.$$.fragment,t),V(z.$$.fragment,t),A=!1},d(t){t&&d(e),nt(j),nt(z),C=!1,M()}}}function Po(t){let e,n,r,s,o,i,l,a,h,m,v,_,k,x,j,O,E,z,S,A=t[3].symbol+"";function C(e){t[8](e)}let M={column:t[1],align:"text-left"};function R(e){t[9](e)}void 0!==t[0]&&(M.state=t[0]),_=new Ao({props:M}),q.push((()=>Q(_,"state",C)));let B={column:t[1],align:"text-left"};return void 0!==t[0]&&(B.state=t[0]),j=new Lo({props:B}),q.push((()=>Q(j,"state",R))),{c(){e=f("th"),n=f("a"),r=f("span"),s=p(t[2]),o=g(),i=f("span"),l=p(A),v=g(),tt(_.$$.fragment),x=g(),tt(j.$$.fragment),$(i,"class",a=t[3].klass+" ml-0.5"),$(i,"title",h=t[3].title),$(n,"class","flex justify-between"),$(n,"href","#"),$(n,"title",m=t[1].desc),$(e,"class",t[4])},m(a,d){u(a,e,d),c(e,n),c(n,r),c(r,s),c(n,o),c(n,i),c(i,l),c(e,v),et(_,e,null),c(e,x),et(j,e,null),E=!0,z||(S=w(n,"click",b(t[6])),z=!0)},p(t,r){(!E||4&r)&&y(s,t[2]),(!E||8&r)&&A!==(A=t[3].symbol+"")&&y(l,A),(!E||8&r&&a!==(a=t[3].klass+" ml-0.5"))&&$(i,"class",a),(!E||8&r&&h!==(h=t[3].title))&&$(i,"title",h),(!E||2&r&&m!==(m=t[1].desc))&&$(n,"title",m);const o={};2&r&&(o.column=t[1]),!k&&1&r&&(k=!0,o.state=t[0],N((()=>k=!1))),_.$set(o);const c={};2&r&&(c.column=t[1]),!O&&1&r&&(O=!0,c.state=t[0],N((()=>O=!1))),j.$set(c),(!E||16&r)&&$(e,"class",t[4])},i(t){E||(W(_.$$.fragment,t),W(j.$$.fragment,t),E=!0)},o(t){V(_.$$.fragment,t),V(j.$$.fragment,t),E=!1},d(t){t&&d(e),nt(_),nt(j),z=!1,S()}}}function Ho(t){let e,n,r,s;const o=[Po,To,No],i=[];return e=function(t,e){return"left"==t[5]?0:"center"==t[5]?1:2}(t),n=i[e]=o[e](t),{c(){n.c(),r=m()},m(t,n){i[e].m(t,n),u(t,r,n),s=!0},p(t,[e]){n.p(t,e)},i(t){s||(W(n),s=!0)},o(t){V(n),s=!1},d(t){i[e].d(t),t&&d(r)}}}function Fo(t,e,n){let r,s,o,{column:i}=e,{state:l}=e,{sortable:a}=e,c=i.id;const u=i.formatter.align,d=u?u(i.format,i.formatStats):"center";return t.$$set=t=>{"column"in t&&n(1,i=t.column),"state"in t&&n(0,l=t.state),"sortable"in t&&n(7,a=t.sortable)},t.$$.update=()=>{2&t.$$.dirty&&n(2,r=null==i.title?i.id:i.title),3&t.$$.dirty&&n(3,s=function(t,e){const n={symbol:"↓",klass:"invisible",title:""};if(e.wsort){const r=e.wsort[t.id],s="wsort: "+Object.entries(e.wsort).map((([t,e])=>`${t}: ${e}`)).join(", ");return void 0===r||0==r?n:r>=0?{symbol:"↑",klass:"text-gray-900",title:s}:{symbol:"↓",klass:"text-gray-900",title:s}}if(e.sort){let t;for(let n=0;n<e.sort.length;n++){const[r,s]=e.sort[n];r==c&&(t=[s,n])}if(!t)return n;const r="sort: "+e.sort.map((([t,e])=>`${t}: ${e}`)).join(", "),[s,o]=t,i="asc"==s?"↓":"↑";let l;if(0==o)l="text-gray-900";else if(1==o)l="text-gray-400";else{if(2!=o)throw new Error("color for more than 3 sort oders isn't supported");l="text-gray-300"}return{symbol:i,klass:l,title:r}}return n}(i,l)),2&t.$$.dirty&&n(4,o=i.delimiter?"plot-delimiter-right":"")},[l,i,r,s,o,d,function(t){if(a&&!["unknown","array"].includes(i.type))if(l.wsort){let e=l.wsort;t.metaKey?i.id in e?e[i.id]=-1*e[i.id]:e[i.id]=1:Object.size(e)>1?e={[c]:1}:i.id in e?e[i.id]=-1*e[i.id]:e={[c]:1},n(0,l=Object.assign(Object.assign({},l),{wsort:e}))}else{let e=l.sort||[];const r=e.i((([t,e])=>t==i.id));t.metaKey?is_undefined(r)?e.push([c,"asc"]):e[r][1]="asc"==e[r][1]?"desc":"asc":e.length>1||is_undefined(r)?e=[[c,"asc"]]:(assert(1==e.length),e[r][1]="asc"==e[r][1]?"desc":"asc"),n(0,l=Object.assign(Object.assign({},l),{sort:e}))}},a,function(t){l=t,n(0,l)},function(t){l=t,n(0,l)},function(t){l=t,n(0,l)},function(t){l=t,n(0,l)},function(t){l=t,n(0,l)},function(t){l=t,n(0,l)}]}class Uo extends ot{constructor(t){super(),st(this,t,Fo,Ho,l,{column:1,state:0,sortable:7})}}function Do(t,e,n){const r=t.slice();return r[4]=e[n],r}function Io(t,e){let n,r,s,o;function i(t){e[3](t)}let l={column:e[4],sortable:e[2]};return void 0!==e[0]&&(l.state=e[0]),r=new Uo({props:l}),q.push((()=>Q(r,"state",i))),{key:t,first:null,c(){n=m(),tt(r.$$.fragment),this.first=n},m(t,e){u(t,n,e),et(r,t,e),o=!0},p(t,n){e=t;const o={};2&n&&(o.column=e[4]),4&n&&(o.sortable=e[2]),!s&&1&n&&(s=!0,o.state=e[0],N((()=>s=!1))),r.$set(o)},i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){V(r.$$.fragment,t),o=!1},d(t){t&&d(n),nt(r,t)}}}function Zo(t){let e,n,r=[],s=new Map,o=t[1];const i=t=>t[4].id;for(let e=0;e<o.length;e+=1){let n=Do(t,o,e),l=i(n);s.set(l,r[e]=Io(l,n))}return{c(){e=f("tr");for(let t=0;t<r.length;t+=1)r[t].c()},m(t,s){u(t,e,s);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,[n]){7&n&&(o=t[1],I(),r=Y(r,n,i,1,t,o,s,e,G,Io,null,Do),Z())},i(t){if(!n){for(let t=0;t<o.length;t+=1)W(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)V(r[t]);n=!1},d(t){t&&d(e);for(let t=0;t<r.length;t+=1)r[t].d()}}}function Wo(t,e,n){let{columns:r}=e,{state:s}=e,{sortable:o}=e;return t.$$set=t=>{"columns"in t&&n(1,r=t.columns),"state"in t&&n(0,s=t.state),"sortable"in t&&n(2,o=t.sortable)},[s,r,o,function(t){s=t,n(0,s)}]}class Vo extends ot{constructor(t){super(),st(this,t,Wo,Zo,l,{columns:1,state:0,sortable:2})}}function Jo(t,e,n){const r=t.slice();return r[4]=e[n],r[6]=n,r}function Ko(t){let e,n,r;var s=t[4].formatter.default;function o(t){return{props:{options:t[4].format,value:t[1][t[4].id]}}}return s&&(e=new s(o(t))),{c(){e&&tt(e.$$.fragment),n=m()},m(t,s){e&&et(e,t,s),u(t,n,s),r=!0},p(t,r){const i={};if(1&r&&(i.options=t[4].format),3&r&&(i.value=t[1][t[4].id]),s!==(s=t[4].formatter.default)){if(e){I();const t=e;V(t.$$.fragment,1,0,(()=>{nt(t,1)})),Z()}s?(e=new s(o(t)),tt(e.$$.fragment),W(e.$$.fragment,1),et(e,n.parentNode,n)):e=null}else s&&e.$set(i)},i(t){r||(e&&W(e.$$.fragment,t),r=!0)},o(t){e&&V(e.$$.fragment,t),r=!1},d(t){t&&d(n),e&&nt(e,t)}}}function Xo(t){let e,n,r;var s=t[4].formatter.default;function o(t){return{props:{options:t[4].format,value:t[1][t[4].id],converted:t[1]._converted[t[4].id],stats:t[4].formatStats}}}return s&&(e=new s(o(t))),{c(){e&&tt(e.$$.fragment),n=m()},m(t,s){e&&et(e,t,s),u(t,n,s),r=!0},p(t,r){const i={};if(1&r&&(i.options=t[4].format),3&r&&(i.value=t[1][t[4].id]),3&r&&(i.converted=t[1]._converted[t[4].id]),1&r&&(i.stats=t[4].formatStats),s!==(s=t[4].formatter.default)){if(e){I();const t=e;V(t.$$.fragment,1,0,(()=>{nt(t,1)})),Z()}s?(e=new s(o(t)),tt(e.$$.fragment),W(e.$$.fragment,1),et(e,n.parentNode,n)):e=null}else s&&e.$set(i)},i(t){r||(e&&W(e.$$.fragment,t),r=!0)},o(t){e&&V(e.$$.fragment,t),r=!1},d(t){t&&d(n),e&&nt(e,t)}}}function Go(t,e){let n,r,s,o,i,l;const a=[Xo,Ko],h=[];function p(t,e){return"_converted"in t[1]&&t[4].id in t[1]._converted?0:1}return r=p(e),s=h[r]=a[r](e),{key:t,first:null,c(){n=f("td"),s.c(),o=g(),$(n,"class",i=e[4].delimiter?"plot-delimiter-right":""),this.first=n},m(t,e){u(t,n,e),h[r].m(n,null),c(n,o),l=!0},p(t,c){let u=r;r=p(e=t),r===u?h[r].p(e,c):(I(),V(h[u],1,1,(()=>{h[u]=null})),Z(),s=h[r],s?s.p(e,c):(s=h[r]=a[r](e),s.c()),W(s,1),s.m(n,o)),(!l||1&c&&i!==(i=e[4].delimiter?"plot-delimiter-right":""))&&$(n,"class",i)},i(t){l||(W(s),l=!0)},o(t){V(s),l=!1},d(t){t&&d(n),h[r].d()}}}function Yo(t){let e,n,r,s,o,l=[],a=new Map,c=t[0];const h=t=>t[4].id;for(let e=0;e<c.length;e+=1){let n=Jo(t,c,e),r=h(n);a.set(r,l[e]=Go(r,n))}return{c(){e=f("tr");for(let t=0;t<l.length;t+=1)l[t].c();$(e,"class",n=t[2]?"bg-gray-100":"")},m(n,a){u(n,e,a);for(let t=0;t<l.length;t+=1)l[t].m(e,null);r=!0,s||(o=w(e,"click",(function(){i(t[3])&&t[3].apply(this,arguments)})),s=!0)},p(s,[o]){t=s,3&o&&(c=t[0],I(),l=Y(l,o,h,1,t,c,a,e,G,Go,null,Jo),Z()),(!r||4&o&&n!==(n=t[2]?"bg-gray-100":""))&&$(e,"class",n)},i(t){if(!r){for(let t=0;t<c.length;t+=1)W(l[t]);r=!0}},o(t){for(let t=0;t<l.length;t+=1)V(l[t]);r=!1},d(t){t&&d(e);for(let t=0;t<l.length;t+=1)l[t].d();s=!1,o()}}}function Qo(t,e,n){let{columns:r}=e,{row:s}=e,{selected:o}=e,{onSelect:i}=e;return t.$$set=t=>{"columns"in t&&n(0,r=t.columns),"row"in t&&n(1,s=t.row),"selected"in t&&n(2,o=t.selected),"onSelect"in t&&n(3,i=t.onSelect)},[r,s,o,i]}class ti extends ot{constructor(t){super(),st(this,t,Qo,Yo,l,{columns:0,row:1,selected:2,onSelect:3})}}function ei(t){let e,r,s,i,l,h,m,b,y,_,k,x,j,O=to(ni(!!t[0].filters))+"";return{c(){e=f("div"),r=f("div"),s=g(),i=f("div"),l=f("input"),h=g(),m=f("button"),b=p("W"),_=g(),k=f("button"),$(r,"class","flex items-center"),$(l,"class","rounded border border-gray-300 text-sm outline-none py-1 px-1 leading-4"),$(l,"type","text"),$(l,"placeholder","Filter"),$(m,"class",y=a(ri(!!t[0].wsort))+" svelte-1y842rg"),$(m,"title",t[4]),$(k,"class","focus:outline-none"),$(i,"class","flex items-center space-x-2"),$(e,"class","flex items-center justify-between my-1")},m(n,o){u(n,e,o),c(e,r),c(e,s),c(e,i),c(i,l),v(l,t[1]),c(i,h),c(i,m),c(m,b),c(i,_),c(i,k),k.innerHTML=O,x||(j=[w(l,"input",t[5]),w(l,"keyup",t[2]),w(m,"click",t[3]),w(k,"click",t[6])],x=!0)},p(t,[e]){2&e&&l.value!==t[1]&&v(l,t[1]),1&e&&y!==(y=a(ri(!!t[0].wsort))+" svelte-1y842rg")&&$(m,"class",y),1&e&&O!==(O=to(ni(!!t[0].filters))+"")&&(k.innerHTML=O)},i:n,o:n,d(t){t&&d(e),x=!1,o(j)}}}function ni(t){return`h-5 w-5 p-0.5 border border-white rounded ${t?"text-gray-900":"plot-table-controls-color"}`}function ri(t){return`letter_button focus:outline-none border border-white rounded ${t?"text-gray-900":"plot-table-controls-color"}`}function si(t,e,n){let{state:r}=e,s=r.filter;const o=(()=>{n(0,r=Object.assign(Object.assign({},r),{filter:s}))}).debounce(200);const i=['Weighted sorting. "Smart", weighted, ranked sorting, instead of normal sorting.',"It works similar to how humans compare products with many attributes, to find the best one.","Example: find countries with highest salaries, lowest taxes and lowest real estate prices - ordinary sorting would be useless, while weighted sorting would sort the countries in a 'smart' way, similar to how human would do.","Missing values threated as average, like if we don't have tax rate for country, we guess that it probably should be somewhat average. For non number comparable elements sort rank used as weight. ifferent range of values for different columns normalised into [-1..1] range as 'nw = (w - median(w)) / 0.9-quantile(variance(w))*1.11' and limiting min/max outliers by [-1..1].",'- Undefined values threated as average\n- Rank for same values should be the same, like ["a", "a", "b"] should be [0, 0, 1], not [0, 1, 2]\n- Different range of values for different columns normalised into [-1..1] range as\n      nw = (w - median(w)) / 0.9-quantile(variance(w))*1.11 and limiting min/max outliers by [-1..1].'].join("\n\n");return t.$$set=t=>{"state"in t&&n(0,r=t.state)},[r,s,o,function(){n(0,r=r.wsort?Object.assign(Object.assign({},r),{wsort:void 0,sort:void 0}):Object.assign(Object.assign({},r),{wsort:{},sort:void 0}))},i,function(){s=this.value,n(1,s)},()=>n(0,r={...r,filters:r.filters?void 0:{}})]}class oi extends ot{constructor(t){super(),st(this,t,si,ei,l,{state:0})}}function ii(t,e,n){const r=t.slice();return r[18]=e[n],r}function li(t,e,n){const r=t.slice();return r[21]=e[n],r}function ai(t){let e,n,r=t[0].desc+"";return{c(){e=f("div"),n=p(r),$(e,"class","mb-2")},m(t,r){u(t,e,r),c(e,n)},p(t,e){1&e&&r!==(r=t[0].desc+"")&&y(n,r)},d(t){t&&d(e)}}}function ci(t){let e,n,r,s,o,i,l,a,h,p,m,b,y,v,_,k,x,j=[],O=new Map,E=[],z=new Map,S=t[3];const A=t=>t[21].id;for(let e=0;e<S.length;e+=1){let n=li(t,S,e),r=A(n);O.set(r,j[e]=di(r,n))}function C(e){t[14](e)}let M={};function R(e){t[15](e)}void 0!==t[2]&&(M.state=t[2]),i=new oi({props:M}),q.push((()=>Q(i,"state",C)));let B={columns:t[3],sortable:t[7]};void 0!==t[2]&&(B.state=t[2]),m=new Vo({props:B}),q.push((()=>Q(m,"state",R)));let L=t[8];const T=t=>t[18]._i;for(let e=0;e<L.length;e+=1){let n=ii(t,L,e),r=T(n);z.set(r,E[e]=fi(r,n))}return{c(){e=f("table"),n=f("colgroup");for(let t=0;t<j.length;t+=1)j[t].c();r=g(),s=f("tr"),o=f("td"),tt(i.$$.fragment),p=g(),tt(m.$$.fragment),y=g();for(let t=0;t<E.length;t+=1)E[t].c();$(o,"colspan",a=t[3].length),$(s,"class",h="plot-table-toolbar "+(!t[9]&&"hidden")),$(e,"class",v="plot-table font-mono "+("full"==t[0].width?"w-full":""))},m(l,a){u(l,e,a),c(e,n);for(let t=0;t<j.length;t+=1)j[t].m(n,null);c(e,r),c(e,s),c(s,o),et(i,o,null),c(e,p),et(m,e,null),c(e,y);for(let t=0;t<E.length;t+=1)E[t].m(e,null);_=!0,k||(x=w(e,"click",t[17]),k=!0)},p(t,r){8&r&&(S=t[3],j=Y(j,r,A,1,t,S,O,n,X,di,null,li));const c={};!l&&4&r&&(l=!0,c.state=t[2],N((()=>l=!1))),i.$set(c),(!_||8&r&&a!==(a=t[3].length))&&$(o,"colspan",a),(!_||512&r&&h!==(h="plot-table-toolbar "+(!t[9]&&"hidden")))&&$(s,"class",h);const u={};8&r&&(u.columns=t[3]),128&r&&(u.sortable=t[7]),!b&&4&r&&(b=!0,u.state=t[2],N((()=>b=!1))),m.$set(u),1320&r&&(L=t[8],I(),E=Y(E,r,T,1,t,L,z,e,G,fi,null,ii),Z()),(!_||1&r&&v!==(v="plot-table font-mono "+("full"==t[0].width?"w-full":"")))&&$(e,"class",v)},i(t){if(!_){W(i.$$.fragment,t),W(m.$$.fragment,t);for(let t=0;t<L.length;t+=1)W(E[t]);_=!0}},o(t){V(i.$$.fragment,t),V(m.$$.fragment,t);for(let t=0;t<E.length;t+=1)V(E[t]);_=!1},d(t){t&&d(e);for(let t=0;t<j.length;t+=1)j[t].d();nt(i),nt(m);for(let t=0;t<E.length;t+=1)E[t].d();k=!1,x()}}}function ui(t){let e;return{c(){e=f("div"),e.innerHTML="<div>Table is empty</div>",$(e,"class","text-gray-400 h-8 flex items-center")},m(t,n){u(t,e,n)},p:n,i:n,o:n,d(t){t&&d(e)}}}function di(t,e){let n;return{key:t,first:null,c(){n=f("col"),_(n,"width",e[21].widthP+"%"),this.first=n},m(t,e){u(t,n,e)},p(t,r){e=t,8&r&&_(n,"width",e[21].widthP+"%")},d(t){t&&d(n)}}}function fi(t,e){let n,r,s;function o(...t){return e[16](e[18],...t)}return r=new ti({props:{columns:e[3],row:e[18],selected:e[5].has(e[18]._i),onSelect:o}}),{key:t,first:null,c(){n=m(),tt(r.$$.fragment),this.first=n},m(t,e){u(t,n,e),et(r,t,e),s=!0},p(t,n){e=t;const s={};8&n&&(s.columns=e[3]),256&n&&(s.row=e[18]),288&n&&(s.selected=e[5].has(e[18]._i)),256&n&&(s.onSelect=o),r.$set(s)},i(t){s||(W(r.$$.fragment,t),s=!0)},o(t){V(r.$$.fragment,t),s=!1},d(t){t&&d(n),nt(r,t)}}}function hi(t){let e,n,r,s,o,i,l={ctx:t,current:null,token:null,hasCatch:!1,pending:mi,then:gi,catch:pi,value:1};J(r=Jt({...t[2],selected:t[5]}),l);let a={ctx:t,current:null,token:null,hasCatch:!1,pending:$i,then:bi,catch:wi,value:1};return J(i=Jt(t[3]),a),{c(){e=f("div"),e.textContent="Debug:",n=g(),l.block.c(),s=g(),o=m(),a.block.c(),$(e,"class","mt-3")},m(t,r){u(t,e,r),u(t,n,r),l.block.m(t,l.anchor=r),l.mount=()=>s.parentNode,l.anchor=s,u(t,s,r),u(t,o,r),a.block.m(t,a.anchor=r),a.mount=()=>o.parentNode,a.anchor=o},p(e,n){t=e,l.ctx=t,36&n&&r!==(r=Jt({...t[2],selected:t[5]}))&&J(r,l)||K(l,t,n),a.ctx=t,8&n&&i!==(i=Jt(t[3]))&&J(i,a)||K(a,t,n)},d(t){t&&d(e),t&&d(n),l.block.d(t),l.token=null,l=null,t&&d(s),t&&d(o),a.block.d(t),a.token=null,a=null}}}function pi(t){return{c:n,m:n,p:n,d:n}}function gi(t){let e,n;return{c(){e=f("textarea"),$(e,"class","block focus:outline-none rounded border border-gray-200 text-xs overflow-scroll mt-4"),e.readOnly=!0,_(e,"resize","none"),_(e,"width","30rem"),_(e,"height","5rem"),e.value=n=t[1]},m(t,n){u(t,e,n)},p(t,r){36&r&&n!==(n=t[1])&&(e.value=n)},d(t){t&&d(e)}}}function mi(t){let e;return{c(){e=p("Waiting...")},m(t,n){u(t,e,n)},p:n,d(t){t&&d(e)}}}function wi(t){return{c:n,m:n,p:n,d:n}}function bi(t){let e,n;return{c(){e=f("textarea"),$(e,"class","block focus:outline-none rounded border border-gray-200 text-xs overflow-scroll mt-4"),e.readOnly=!0,_(e,"resize","none"),_(e,"width","30rem"),_(e,"height","10rem"),e.value=n=t[1]},m(t,n){u(t,e,n)},p(t,r){8&r&&n!==(n=t[1])&&(e.value=n)},d(t){t&&d(e)}}}function $i(t){let e;return{c(){e=p("Waiting...")},m(t,n){u(t,e,n)},p:n,d(t){t&&d(e)}}}function yi(t){let e,n,r,s,o,i,l,a,c,f=t[0].desc&&ai(t);const h=[ui,ci],p=[];function w(t,e){return 16&e&&(n=!!t[4].is_empty()),n?0:1}r=w(t,-1),s=p[r]=h[r](t),i=new _n({props:{messages:t[6]}});let b=t[0].debug&&hi(t);return{c(){f&&f.c(),e=g(),s.c(),o=g(),tt(i.$$.fragment),l=g(),b&&b.c(),a=m()},m(t,n){f&&f.m(t,n),u(t,e,n),p[r].m(t,n),u(t,o,n),et(i,t,n),u(t,l,n),b&&b.m(t,n),u(t,a,n),c=!0},p(t,[n]){t[0].desc?f?f.p(t,n):(f=ai(t),f.c(),f.m(e.parentNode,e)):f&&(f.d(1),f=null);let l=r;r=w(t,n),r===l?p[r].p(t,n):(I(),V(p[l],1,1,(()=>{p[l]=null})),Z(),s=p[r],s?s.p(t,n):(s=p[r]=h[r](t),s.c()),W(s,1),s.m(o.parentNode,o));const c={};64&n&&(c.messages=t[6]),i.$set(c),t[0].debug?b?b.p(t,n):(b=hi(t),b.c(),b.m(a.parentNode,a)):b&&(b.d(1),b=null)},i(t){c||(W(s),W(i.$$.fragment,t),c=!0)},o(t){V(s),V(i.$$.fragment,t),c=!1},d(t){f&&f.d(t),t&&d(e),p[r].d(t),t&&d(o),nt(i,t),t&&d(l),b&&b.d(t),t&&d(a)}}}function vi(t,e,n){let r,s,o,i,l,a,c,u,{options:d}=e,{data:f}=e,h={filter:d.filter||"",sort:d.sort,wsort:d.wsort,show_controls:!0,show_toolbar:0!=d.show_toolbar},p=!1,g=new Set(d.selected||[]);function m(t,e){!function(t,e,n,r){const s=new Set(n);if(t.metaKey)s.has(e)?s.delete(e):s.add(e);else{const t=s.has(e)&&1==s.size;s.clear(),t||s.add(e)}r(s)}(t,e,g,(t=>n(5,g=t)))}return t.$$set=t=>{"options"in t&&n(0,d=t.options),"data"in t&&n(1,f=t.data)},t.$$.update=()=>{3&t.$$.dirty&&n(12,r=vo(d,f)),4096&t.$$.dirty&&n(3,s=r.columns),4096&t.$$.dirty&&n(4,o=r.rows),4096&t.$$.dirty&&n(6,i=r.messages),2057&t.$$.dirty&&(p||(n(2,h.filters=function(t,e){if(!e)return;const n={};for(const r of t){const t=e[r.id];if(!t)continue;const s=wo(r,""+t[1]);void 0!==s&&(n[r.id]=[mo(t[0]),s])}return n}(s,d.filters),h),n(11,p=!0))),1&t.$$.dirty&&n(7,l=0!=d.sortable),28&t.$$.dirty&&n(13,a=xo(s,o,h)),8204&t.$$.dirty&&n(8,c=function(t,e,{sort:n,wsort:r}){return n&&!n.is_empty()?ho(t,e,n):r&&!Object.is_empty(r)?po(t,e,r):e}(s,a,h)),4&t.$$.dirty&&n(9,u=h.show_toolbar&&(h.show_controls||h.sort||h.wsort||h.filter||h.filters))},[d,f,h,s,o,g,i,l,c,u,m,p,r,a,function(t){h=t,n(2,h),n(11,p),n(3,s),n(0,d),n(12,r),n(1,f)},function(t){h=t,n(2,h),n(11,p),n(3,s),n(0,d),n(12,r),n(1,f)},(t,e)=>m(e,t._i),()=>n(2,h={...h,show_controls:!0})]}class _i extends ot{constructor(t){super(),st(this,t,vi,yi,l,{options:0,data:1})}}function ki(t){let e,n;return e=new Mt({props:{error:t[3]}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.error=t[3]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){V(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function xi(t){let e,n;return e=new _i({props:{options:t[0].table||{},data:t[2]}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.options=t[0].table||{}),1&n&&(r.data=t[2]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){V(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function ji(t){let e,r;return e=new Lt({}),{c(){tt(e.$$.fragment)},m(t,n){et(e,t,n),r=!0},p:n,i(t){r||(W(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){nt(e,t)}}}function Oi(t){let e,n,r,s,o,i={ctx:t,current:null,token:null,hasCatch:!0,pending:ji,then:xi,catch:ki,value:2,error:3,blocks:[,,,]};return J(n=Zt(t[0].data),i),s=new hn({}),{c(){e=f("div"),i.block.c(),r=g(),tt(s.$$.fragment),$(e,"class","TableBlockContent relative")},m(t,n){u(t,e,n),i.block.m(e,i.anchor=null),i.mount=()=>e,i.anchor=r,c(e,r),et(s,e,null),o=!0},p(e,[r]){t=e,i.ctx=t,1&r&&n!==(n=Zt(t[0].data))&&J(n,i)||K(i,t,r)},i(t){o||(W(i.block),W(s.$$.fragment,t),o=!0)},o(t){for(let t=0;t<3;t+=1){V(i.blocks[t])}V(s.$$.fragment,t),o=!1},d(t){t&&d(e),i.block.d(),i.token=null,i=null,nt(s)}}}const Ei={match_and_normalize:t=>{return is_object(t)&&"table"in t?is_array(t.table)?{data:t.table,table:{}}:t:is_array(t)?{data:t,table:{}}:(e=t)&&"object"==typeof e&&"csv_table"==e.type?function(t){const e=[];for(const n of t.columns){let r="unknown";for(const e of t.rows){const t=e[n];if(null!=t){r=typeof t;break}}e.push(r)}const n=t.columns.map(((t,n)=>({id:t,type:e[n]})));return{data:t.rows,table:{columns:n}}}(t):void 0;var e}};function zi(t,e,n){let{block:r}=e,{is_narrow:s}=e;return discard(s),t.$$set=t=>{"block"in t&&n(0,r=t.block),"is_narrow"in t&&n(1,s=t.is_narrow)},[r,s]}var Si=Object.freeze({__proto__:null,default:class extends ot{constructor(t){super(),st(this,t,zi,Oi,l,{block:0,is_narrow:1})}},definition:Ei});function Ai(e,n){if(null!=e){if(is_object(e)){const n=e;if(n.block){if(!is_array(n.block)||2!=n.block.length)throw"invalid block, it should be `block: [block_name, 0.1]`";const e=n.block[0],{definition:r,default:s}=t.blocks[e],o=r.match_and_normalize(n);if(!o)throw`Data not matching '${e}' block`;return{name:e,klass:s,ndata:o}}for(const e in t.blocks){const{definition:r,default:s}=t.blocks[e],o=r.match_and_normalize(n);if(o)return{name:e,klass:s,ndata:o}}}if(n){const r=t.blocks_for_file_extensions[n],s=t.blocks[r];if(s){const{definition:t,default:o}=s,i=t.match_and_normalize(e);if(!i)throw`Data not matching '${r}' block, registered for extension ${n}`;return{name:r,klass:o,ndata:i}}}if(is_array(e)){const n="table",{definition:r,default:s}=t.blocks[n],o=r.match_and_normalize(e);if(!o)throw"internal error, data not matching table block";return{name:n,klass:s,ndata:o}}if(is_string(e)){const n="table",{definition:r,default:s}=t.blocks[n],o=r.match_and_normalize(e);if(!o)throw"internal error, data not matching text block";return{name:n,klass:s,ndata:o}}}}t.blocks.image=An,t.blocks.text=Nn,t.blocks.chart=Er,t.blocks.table=Si;class qi{constructor(t,e=[],n={}){this.component=t,this.ids=e,this.data=n}with(t){if(t instanceof Error)return this.with({exception:t.message||"unknown error",stack:t.stack||""});if(is_string(t)||is_number(t))return new qi(this.component,[...this.ids,""+t],Object.assign({},this.data));{let e=new qi(this.component,[...this.ids],Object.assign({},this.data)),n=t;for(const t in n){let r=n[t];"id"==t?e.ids.push(""+r):"ids"==t?e.ids.push(...is_array(r)?r.map((t=>""+t)):[""+r]):e.data[t]=r}return e}}message(t){Ci(this.with(t))}debug(t){this.message({debug:t})}info(t){this.message({info:t})}warn(t){this.message({warn:t})}error(t){t instanceof Error?this.with(t).message({error:t.message||"unknown error"}):this.message({error:t})}logfn(t){null!=t&&(is_string(t)?this.info(t):t(this))}}function Ci(t){let e="",n="";for(const r of["debug","info","warn","error"])if(r in t.data){e=r,n=""+(t.data[r]||"invalid log message type");break}if(""==e)return void Ci(t.with({warn:"invalid log message, no level"}));let r=function(t){const e=4;return t.take(e).downcase().padStart(e," ")+" | "}(t.component)+function(t){const e=7;return t.map((t=>t.take(e).downcase().padEnd(e," ")+" ")).join(", ")}(t.ids)+function(t,e){const n=/(\{[a-zA-Z0-9_]+\})/g;return t.replace(n,((t,n)=>{let r;const s=n.substring(1,n.length-1);return r=s in e?e[s]:s,(""+r).replace(/\n/g," ")}))}(n,t.data)+(s=t.data,Object.is_empty(s)?"":" | "+Ot(s));var s;if("debug"==e||"info"==e?console.log("  "+r):"warn"==e?console.warn("W "+r):"error"==e&&console.error("E "+r),"stack"in t.data){let e=""+(t.data.stack||"can't get stack");console.error("\n"+e)}}function Mi(t){let e,n,r=t[1].title+"";return{c(){e=f("div"),n=p(r),$(e,"class","plot-title")},m(t,r){u(t,e,r),c(e,n)},p(t,e){2&e&&r!==(r=t[1].title+"")&&y(n,r)},d(t){t&&d(e)}}}function Ri(t){let e,n;return e=new an({props:{markdown:t[1].desc}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.markdown=t[1].desc),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){V(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function Bi(t){let e,n,r,s,o,i,l,a,h,p=t[1].title&&Mi(t),m=t[1].desc&&Ri(t);var w=t[2];function b(t){return{props:{block:t[1],is_narrow:!1}}}return w&&(o=new w(b(t))),l=new hn({props:{is_main:!0}}),{c(){e=f("div"),p&&p.c(),n=g(),m&&m.c(),r=g(),s=f("div"),o&&tt(o.$$.fragment),i=g(),tt(l.$$.fragment),$(s,"class","content"),$(e,"class",a="plot-single plot-single-"+t[0]+" plot-style-"+t[3])},m(t,a){u(t,e,a),p&&p.m(e,null),c(e,n),m&&m.m(e,null),c(e,r),c(e,s),o&&et(o,s,null),c(e,i),et(l,e,null),h=!0},p(t,[i]){t[1].title?p?p.p(t,i):(p=Mi(t),p.c(),p.m(e,n)):p&&(p.d(1),p=null),t[1].desc?m?(m.p(t,i),2&i&&W(m,1)):(m=Ri(t),m.c(),W(m,1),m.m(e,r)):m&&(I(),V(m,1,1,(()=>{m=null})),Z());const l={};if(2&i&&(l.block=t[1]),w!==(w=t[2])){if(o){I();const t=o;V(t.$$.fragment,1,0,(()=>{nt(t,1)})),Z()}w?(o=new w(b(t)),tt(o.$$.fragment),W(o.$$.fragment,1),et(o,s,null)):o=null}else w&&o.$set(l);(!h||9&i&&a!==(a="plot-single plot-single-"+t[0]+" plot-style-"+t[3]))&&$(e,"class",a)},i(t){h||(W(m),o&&W(o.$$.fragment,t),W(l.$$.fragment,t),h=!0)},o(t){V(m),o&&V(o.$$.fragment,t),V(l.$$.fragment,t),h=!1},d(t){t&&d(e),p&&p.d(),m&&m.d(),o&&nt(o),nt(l)}}}function Li(t,e,n){let r,{default_title:s}=e,{block_name:o}=e,{data:i}=e,{block_impl:l}=e;return t.$$set=t=>{"default_title"in t&&n(4,s=t.default_title),"block_name"in t&&n(0,o=t.block_name),"data"in t&&n(1,i=t.data),"block_impl"in t&&n(2,l=t.block_impl)},t.$$.update=()=>{18&t.$$.dirty&&(document.title=is_object(i)&&i.title||"id"in i&&""+i.id||s||"PLOT"),2&t.$$.dirty&&n(3,r=i.style||"normal")},[o,i,l,r,s]}class Ni extends ot{constructor(t){super(),st(this,t,Li,Bi,l,{default_title:4,block_name:0,data:1,block_impl:2})}}var Ti=Yt(Object.freeze({__proto__:null,default:{}})),Pi=Qt((function(t,e){var n;t.exports=n=n||function(t,e){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==Gt&&Gt.crypto&&(n=Gt.crypto),!n)try{n=Ti}catch(t){}var r=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),o={},i=o.lib={},l=i.Base={extend:function(t){var e=s(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=i.WordArray=l.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,s=t.sigBytes;if(this.clamp(),r%4)for(var o=0;o<s;o++){var i=n[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=i<<24-(r+o)%4*8}else for(var l=0;l<s;l+=4)e[r+l>>>2]=n[l>>>2];return this.sigBytes+=s,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=l.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(r());return new a.init(e,t)}}),c=o.enc={},u=c.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],s=0;s<n;s++){var o=e[s>>>2]>>>24-s%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new a.init(n,e/2)}},d=c.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],s=0;s<n;s++){var o=e[s>>>2]>>>24-s%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new a.init(n,e)}},f=c.Utf8={stringify:function(t){try{return decodeURIComponent(escape(d.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return d.parse(unescape(encodeURIComponent(t)))}},h=i.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=f.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n,r=this._data,s=r.words,o=r.sigBytes,i=this.blockSize,l=o/(4*i),c=(l=e?t.ceil(l):t.max((0|l)-this._minBufferSize,0))*i,u=t.min(4*c,o);if(c){for(var d=0;d<c;d+=i)this._doProcessBlock(s,d);n=s.splice(0,c),r.sigBytes-=u}return new a.init(n,u)},clone:function(){var t=l.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});i.Hasher=h.extend({cfg:l.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new p.HMAC.init(t,n).finalize(e)}}});var p=o.algo={};return o}(Math)})),Hi=Qt((function(t,e){var n;t.exports=(n=Pi,function(t){var e=n,r=e.lib,s=r.WordArray,o=r.Hasher,i=e.algo,l=[];!function(){for(var e=0;e<64;e++)l[e]=4294967296*t.abs(t.sin(e+1))|0}();var a=i.MD5=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var r=e+n,s=t[r];t[r]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}var o=this._hash.words,i=t[e+0],a=t[e+1],h=t[e+2],p=t[e+3],g=t[e+4],m=t[e+5],w=t[e+6],b=t[e+7],$=t[e+8],y=t[e+9],v=t[e+10],_=t[e+11],k=t[e+12],x=t[e+13],j=t[e+14],O=t[e+15],E=o[0],z=o[1],S=o[2],A=o[3];E=c(E,z,S,A,i,7,l[0]),A=c(A,E,z,S,a,12,l[1]),S=c(S,A,E,z,h,17,l[2]),z=c(z,S,A,E,p,22,l[3]),E=c(E,z,S,A,g,7,l[4]),A=c(A,E,z,S,m,12,l[5]),S=c(S,A,E,z,w,17,l[6]),z=c(z,S,A,E,b,22,l[7]),E=c(E,z,S,A,$,7,l[8]),A=c(A,E,z,S,y,12,l[9]),S=c(S,A,E,z,v,17,l[10]),z=c(z,S,A,E,_,22,l[11]),E=c(E,z,S,A,k,7,l[12]),A=c(A,E,z,S,x,12,l[13]),S=c(S,A,E,z,j,17,l[14]),E=u(E,z=c(z,S,A,E,O,22,l[15]),S,A,a,5,l[16]),A=u(A,E,z,S,w,9,l[17]),S=u(S,A,E,z,_,14,l[18]),z=u(z,S,A,E,i,20,l[19]),E=u(E,z,S,A,m,5,l[20]),A=u(A,E,z,S,v,9,l[21]),S=u(S,A,E,z,O,14,l[22]),z=u(z,S,A,E,g,20,l[23]),E=u(E,z,S,A,y,5,l[24]),A=u(A,E,z,S,j,9,l[25]),S=u(S,A,E,z,p,14,l[26]),z=u(z,S,A,E,$,20,l[27]),E=u(E,z,S,A,x,5,l[28]),A=u(A,E,z,S,h,9,l[29]),S=u(S,A,E,z,b,14,l[30]),E=d(E,z=u(z,S,A,E,k,20,l[31]),S,A,m,4,l[32]),A=d(A,E,z,S,$,11,l[33]),S=d(S,A,E,z,_,16,l[34]),z=d(z,S,A,E,j,23,l[35]),E=d(E,z,S,A,a,4,l[36]),A=d(A,E,z,S,g,11,l[37]),S=d(S,A,E,z,b,16,l[38]),z=d(z,S,A,E,v,23,l[39]),E=d(E,z,S,A,x,4,l[40]),A=d(A,E,z,S,i,11,l[41]),S=d(S,A,E,z,p,16,l[42]),z=d(z,S,A,E,w,23,l[43]),E=d(E,z,S,A,y,4,l[44]),A=d(A,E,z,S,k,11,l[45]),S=d(S,A,E,z,O,16,l[46]),E=f(E,z=d(z,S,A,E,h,23,l[47]),S,A,i,6,l[48]),A=f(A,E,z,S,b,10,l[49]),S=f(S,A,E,z,j,15,l[50]),z=f(z,S,A,E,m,21,l[51]),E=f(E,z,S,A,k,6,l[52]),A=f(A,E,z,S,p,10,l[53]),S=f(S,A,E,z,v,15,l[54]),z=f(z,S,A,E,a,21,l[55]),E=f(E,z,S,A,$,6,l[56]),A=f(A,E,z,S,O,10,l[57]),S=f(S,A,E,z,w,15,l[58]),z=f(z,S,A,E,x,21,l[59]),E=f(E,z,S,A,g,6,l[60]),A=f(A,E,z,S,_,10,l[61]),S=f(S,A,E,z,h,15,l[62]),z=f(z,S,A,E,y,21,l[63]),o[0]=o[0]+E|0,o[1]=o[1]+z|0,o[2]=o[2]+S|0,o[3]=o[3]+A|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,s=8*e.sigBytes;n[s>>>5]|=128<<24-s%32;var o=t.floor(r/4294967296),i=r;n[15+(s+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(s+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(n.length+1),this._process();for(var l=this._hash,a=l.words,c=0;c<4;c++){var u=a[c];a[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return l},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});function c(t,e,n,r,s,o,i){var l=t+(e&n|~e&r)+s+i;return(l<<o|l>>>32-o)+e}function u(t,e,n,r,s,o,i){var l=t+(e&r|n&~r)+s+i;return(l<<o|l>>>32-o)+e}function d(t,e,n,r,s,o,i){var l=t+(e^n^r)+s+i;return(l<<o|l>>>32-o)+e}function f(t,e,n,r,s,o,i){var l=t+(n^(e|~r))+s+i;return(l<<o|l>>>32-o)+e}e.MD5=o._createHelper(a),e.HmacMD5=o._createHmacHelper(a)}(Math),n.MD5)})),Fi=Qt((function(t,e){var n;t.exports=(n=Pi,function(t){var e=n,r=e.lib,s=r.WordArray,o=r.Hasher,i=e.algo,l=[],a=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var r=2,s=0;s<64;)e(r)&&(s<8&&(l[s]=n(t.pow(r,.5))),a[s]=n(t.pow(r,1/3)),s++),r++}();var c=[],u=i.SHA256=o.extend({_doReset:function(){this._hash=new s.init(l.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],s=n[1],o=n[2],i=n[3],l=n[4],u=n[5],d=n[6],f=n[7],h=0;h<64;h++){if(h<16)c[h]=0|t[e+h];else{var p=c[h-15],g=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,m=c[h-2],w=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;c[h]=g+c[h-7]+w+c[h-16]}var b=r&s^r&o^s&o,$=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),y=f+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&u^~l&d)+a[h]+c[h];f=d,d=u,u=l,l=i+y|0,i=o,o=s,s=r,r=y+($+b)|0}n[0]=n[0]+r|0,n[1]=n[1]+s|0,n[2]=n[2]+o|0,n[3]=n[3]+i|0,n[4]=n[4]+l|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+f|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,s=8*e.sigBytes;return n[s>>>5]|=128<<24-s%32,n[14+(s+64>>>9<<4)]=t.floor(r/4294967296),n[15+(s+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=o._createHelper(u),e.HmacSHA256=o._createHmacHelper(u)}(Math),n.SHA256)}));function Ui(t,e="md5",n="base58"){let r;if("number"==typeof t&&(t=""+t),"md5"==e)r=Hi(t);else{if("sha256"!=e)throw"unknown hash algo";r=Fi(t)}if("base58"==n)return function(t,e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"){var n,r,s,o,i=[],l="";for(n in t)for(r=0,l+=(s=t[n])||l.length^n?"":1;r in i||s;)s=(o=(o=i[r])?256*o+s:s)/58|0,i[r]=o%58,r++;for(;r--;)l+=e[i[r]];return l}(function(t){var e,n,r=t.words.length,s=new Uint8Array(r<<2),o=0;for(n=0;n<r;n++)e=t.words[n],s[o++]=e>>24,s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=255&e;return s}(r));throw"unknown encoding"}function Di(t){let e,n,r,s,i,l,a,h,b,v,_,k=(t[2].block.title||t[2].block.id)+"";function x(t,e){return t[1]?Wi:Zi}let j=x(t),O=j(t),E=!t[1]&&Vi(t);return{c(){e=f("div"),n=p(k),r=g(),s=f("button"),O.c(),a=g(),E&&E.c(),h=m(),$(s,"class","\n          plot-ec\n          absolute top-0 right-0\n          plot-page-controls-color focus:outline-none\n        "),$(s,"title",i=t[1]?"Expand":"Collapse"),$(e,"class","\n        plot-title font-bold\n        relative cursor-pointer\n      "),$(e,"title",l=t[1]?"Click to Expand":"Click to collapse")},m(o,i){u(o,e,i),c(e,n),c(e,r),c(e,s),O.m(s,null),u(o,a,i),E&&E.m(o,i),u(o,h,i),b=!0,v||(_=[w(s,"click",t[3]),w(e,"click",t[3])],v=!0)},p(t,r){(!b||4&r)&&k!==(k=(t[2].block.title||t[2].block.id)+"")&&y(n,k),j===(j=x(t))&&O?O.p(t,r):(O.d(1),O=j(t),O&&(O.c(),O.m(s,null))),(!b||2&r&&i!==(i=t[1]?"Expand":"Collapse"))&&$(s,"title",i),(!b||2&r&&l!==(l=t[1]?"Click to Expand":"Click to collapse"))&&$(e,"title",l),t[1]?E&&(I(),V(E,1,1,(()=>{E=null})),Z()):E?(E.p(t,r),2&r&&W(E,1)):(E=Vi(t),E.c(),W(E,1),E.m(h.parentNode,h))},i(t){b||(W(E),b=!0)},o(t){V(E),b=!1},d(t){t&&d(e),O.d(),t&&d(a),E&&E.d(t),t&&d(h),v=!1,o(_)}}}function Ii(t){let e,n;return e=new Mt({props:{error:t[2].message}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.error=t[2].message),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){V(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function Zi(t){let e,r=`<svg class="${"h-5 w-5 p-0.5"}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>`;let s;return{c(){s=m(),e=new E(s)},m(t,n){e.m(r,t,n),u(t,s,n)},p:n,d(t){t&&d(s),t&&e.d()}}}function Wi(t){let e,r=`<svg class="${"h-5 w-5 p-0.5"}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>`;let s;return{c(){s=m(),e=new E(s)},m(t,n){e.m(r,t,n),u(t,s,n)},p:n,d(t){t&&d(s),t&&e.d()}}}function Vi(t){let e,n,r,s,o,i=t[2].block.desc&&Ji(t);var l=t[2].klass;function a(t){return{props:{block:t[2].ndata,is_narrow:!1}}}return l&&(r=new l(a(t))),{c(){e=f("div"),i&&i.c(),n=g(),r&&tt(r.$$.fragment),s=m(),$(e,"class","plot-desc")},m(t,l){u(t,e,l),i&&i.m(e,null),u(t,n,l),r&&et(r,t,l),u(t,s,l),o=!0},p(t,n){t[2].block.desc?i?(i.p(t,n),4&n&&W(i,1)):(i=Ji(t),i.c(),W(i,1),i.m(e,null)):i&&(I(),V(i,1,1,(()=>{i=null})),Z());const o={};if(4&n&&(o.block=t[2].ndata),l!==(l=t[2].klass)){if(r){I();const t=r;V(t.$$.fragment,1,0,(()=>{nt(t,1)})),Z()}l?(r=new l(a(t)),tt(r.$$.fragment),W(r.$$.fragment,1),et(r,s.parentNode,s)):r=null}else l&&r.$set(o)},i(t){o||(W(i),r&&W(r.$$.fragment,t),o=!0)},o(t){V(i),r&&V(r.$$.fragment,t),o=!1},d(t){t&&d(e),i&&i.d(),t&&d(n),t&&d(s),r&&nt(r,t)}}}function Ji(t){let e,n;return e=new an({props:{markdown:t[2].block.desc}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.markdown=t[2].block.desc),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){V(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function Ki(t){let e,n,r,s,o;const i=[Ii,Di],l=[];function a(t,e){return t[2].is_error?0:1}return n=a(t),r=l[n]=i[n](t),{c(){e=f("div"),r.c(),$(e,"id",s="block_"+t[0].id),$(e,"class","plot-block-container")},m(t,r){u(t,e,r),l[n].m(e,null),o=!0},p(t,[c]){let u=n;n=a(t),n===u?l[n].p(t,c):(I(),V(l[u],1,1,(()=>{l[u]=null})),Z(),r=l[n],r?r.p(t,c):(r=l[n]=i[n](t),r.c()),W(r,1),r.m(e,null)),(!o||1&c&&s!==(s="block_"+t[0].id))&&$(e,"id",s)},i(t){o||(W(r),o=!0)},o(t){V(r),o=!1},d(t){t&&d(e),l[n].d()}}}function Xi(t,e,n){let r,{block:s}=e,{is_collapsed:o}=e,{switch_collapsed:i}=e;return t.$$set=t=>{"block"in t&&n(0,s=t.block),"is_collapsed"in t&&n(1,o=t.is_collapsed),"switch_collapsed"in t&&n(4,i=t.switch_collapsed)},t.$$.update=()=>{if(1&t.$$.dirty)if(s.is_error)n(2,r=s);else{const t=Ai.to_safe()(s.value,void 0);if(t.is_error)n(2,r=t);else if(t.value){const{name:e,klass:o,ndata:i}=t.value;n(2,r={is_error:!1,block:s.value,ndata:i,block_name:e,klass:o})}else n(2,r={is_error:!0,message:"Can't find block definition"})}},[s,o,r,function(t){t.preventDefault(),t.stopPropagation(),i(s.id)},i]}test(Ui,(()=>{assert.equal(Ui("some"),"UTqN8G7jWovoR1rVejd8M")}));class Gi extends ot{constructor(t){super(),st(this,t,Xi,Ki,l,{block:0,is_collapsed:1,switch_collapsed:4})}}function Yi(t,e,n){const r=t.slice();return r[9]=e[n],r}function Qi(t){let e,n,r=t[0].title+"";return{c(){e=f("div"),n=p(r),$(e,"class","plot-title")},m(t,r){u(t,e,r),c(e,n)},p(t,e){1&e&&r!==(r=t[0].title+"")&&y(n,r)},d(t){t&&d(e)}}}function tl(t){let e,n,r;return n=new an({props:{markdown:t[0].desc}}),{c(){e=f("div"),tt(n.$$.fragment),$(e,"class","plot-desc")},m(t,s){u(t,e,s),et(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.markdown=t[0].desc),n.$set(r)},i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){V(n.$$.fragment,t),r=!1},d(t){t&&d(e),nt(n)}}}function el(t,e){let n,r,s;return r=new Gi({props:{block:e[9],is_collapsed:e[1].collapsed[e[9].id],switch_collapsed:e[5]}}),{key:t,first:null,c(){n=m(),tt(r.$$.fragment),this.first=n},m(t,e){u(t,n,e),et(r,t,e),s=!0},p(t,n){e=t;const s={};4&n&&(s.block=e[9]),6&n&&(s.is_collapsed=e[1].collapsed[e[9].id]),r.$set(s)},i(t){s||(W(r.$$.fragment,t),s=!0)},o(t){V(r.$$.fragment,t),s=!1},d(t){t&&d(n),nt(r,t)}}}function nl(t){let e,n,r,s,o,i,l,a,h,p,m,b,y=[],v=new Map,_=t[0].title&&Qi(t),k=t[0].desc&&tl(t),x=t[2];const j=t=>t[9].id;for(let e=0;e<x.length;e+=1){let n=Yi(t,x,e),r=j(n);v.set(r,y[e]=el(r,n))}return i=new _n({props:{messages:t[3]}}),a=new hn({props:{is_main:!0}}),{c(){e=f("div"),_&&_.c(),n=g(),k&&k.c(),r=g(),s=f("div");for(let t=0;t<y.length;t+=1)y[t].c();o=g(),tt(i.$$.fragment),l=g(),tt(a.$$.fragment),$(s,"class","blocks"),$(e,"class",h="plot-page plot-style-"+t[4])},m(d,f){u(d,e,f),_&&_.m(e,null),c(e,n),k&&k.m(e,null),c(e,r),c(e,s);for(let t=0;t<y.length;t+=1)y[t].m(s,null);c(e,o),et(i,e,null),c(e,l),et(a,e,null),p=!0,m||(b=w(e,"click",t[8]),m=!0)},p(t,[o]){t[0].title?_?_.p(t,o):(_=Qi(t),_.c(),_.m(e,n)):_&&(_.d(1),_=null),t[0].desc?k?(k.p(t,o),1&o&&W(k,1)):(k=tl(t),k.c(),W(k,1),k.m(e,r)):k&&(I(),V(k,1,1,(()=>{k=null})),Z()),38&o&&(x=t[2],I(),y=Y(y,o,j,1,t,x,v,s,G,el,null,Yi),Z());const l={};8&o&&(l.messages=t[3]),i.$set(l),(!p||16&o&&h!==(h="plot-page plot-style-"+t[4]))&&$(e,"class",h)},i(t){if(!p){W(k);for(let t=0;t<x.length;t+=1)W(y[t]);W(i.$$.fragment,t),W(a.$$.fragment,t),p=!0}},o(t){V(k);for(let t=0;t<y.length;t+=1)V(y[t]);V(i.$$.fragment,t),V(a.$$.fragment,t),p=!1},d(t){t&&d(e),_&&_.d(),k&&k.d();for(let t=0;t<y.length;t+=1)y[t].d();nt(i),nt(a),m=!1,b()}}}const rl={match_and_normalize:t=>{if(is_object(t)&&"page"in t)return t}};function sl(t,e,n){let r,s,o,i,{default_title:l}=e,{data:a}=e,c={collapsed:{},show_controls:!1};return t.$$set=t=>{"default_title"in t&&n(6,l=t.default_title),"data"in t&&n(0,a=t.data)},t.$$.update=()=>{1&t.$$.dirty&&n(7,r=function(t){const e=[],n=new Set;for(let r=0;r<t.length;r++){const s=t[r];if(!is_object(s)){e.add({is_error:!0,id:`error_${r}`,message:"Invalid block data"});continue}const o=s.hash||Ui(to_json(s),"md5").take(4);let i=void 0!==s.id&&""+s.id||s.title&&Ui(s.title,"md5")||o;n.has(i)?e.add({is_error:!0,id:`error_${r}`,message:`Duplicate block id '${i}'`}):(n.add(i),e.push({id:i,is_error:!1,value:Object.assign(Object.assign({},s),{id:i,hash:o})}))}return{blocks:e,messages:kn([])}}(a.page)),128&t.$$.dirty&&n(2,s=r.blocks),128&t.$$.dirty&&n(3,o=r.messages),65&t.$$.dirty&&(document.title=a.title||"id"in a&&""+a.id||l||"PLOT"),1&t.$$.dirty&&n(4,i=a.style||"normal")},[a,c,s,o,i,function(t){t in c.collapsed?delete c.collapsed[t]:n(1,c.collapsed[t]=!0,c),n(1,c=Object.assign({},c))},l,r,()=>n(1,c={...c,show_controls:!0})]}var ol=Object.freeze({__proto__:null,default:class extends ot{constructor(t){super(),st(this,t,sl,nl,l,{default_title:6,data:0})}},definition:rl});t.apps.page=ol;const il=new qi("plot");e.run=async function(e){try{let n,r,s,o=document.getElementById("data");if(e&&"data"in e)n=e.data;else if(o){r=o.getAttribute("type"),r&&"{type}"!=r||(r="yaml");const t=o.innerHTML;n=await Wt(t,r)}else{const t=function(){const t=new URLSearchParams(window.location.search).get("data_url");if(t)return t;{let t=window.location.pathname;t.startsWith("/")||(t+="/");const e=/:([^:]+)$/i;return t.replace(e,"")}}();s=t.split("/").last().replace(/\.[^\.]+$/,""),r=Tt(t),n=await It(t)}await async function(t){if(is_object(t)&&t.css){const e=t.css;is_string(e)?function(t){const e=document.createElement("style");e.textContent=t,document.head.append(e)}(e):is_object(e)&&"url"in e?await Ht([e.url],"parallel"):il.warn("invalid customcss format")}}(n);const i=Ai(n,r);if(i)document.body.classList.add("plot-single-body"),new Ni({target:document.body,props:{default_title:s,block_name:i.name,data:i.ndata,block_impl:i.klass}});else{const e=function(e){if(null==e)return;if(is_object(e)){const n=e;if(n.app){if(!is_array(n.app)||2!=n.app.length)throw"invalid app, it should be `app: [app_name, 0.1]`";const e=n.app[0],{definition:r,default:s}=t.apps[e],o=r.match_and_normalize(n);if(!o)throw`Data not matching '${e}' app`;return{name:e,klass:s,ndata:o}}for(const e in t.apps){const{definition:r,default:s}=t.apps[e],o=r.match_and_normalize(n);if(o)return{name:e,klass:s,ndata:o}}}}(n);if(!e)throw"can't find block or app";document.body.classList.add(`plot-${e.name}-body`),new e.klass({target:document.body,props:{default_title:s,data:e.ndata}})}}catch(t){console.error(t),new Mt({target:document.body,props:{error:t}})}};const ll=window.on_plot_loaded;ll&&ll()}();
