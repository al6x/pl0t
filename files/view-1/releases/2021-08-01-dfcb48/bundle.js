!function(){"use strict";const t={blocks_limit:100,narrow_width:480,height_in_narrow_width_mode:200,parsers:{},blocks_for_file_extensions:{md:"text",markdown:"text",text:"text",txt:"text"},blocks:{},apps:{}};window.plot_config=t;const e={version:.1};function n(){}function r(t){return t()}function s(){return Object.create(null)}function o(t){t.forEach(r)}function i(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e}function l(t){return null==t?"":t}function c(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function h(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function p(t){return document.createTextNode(t)}function g(){return p(" ")}function m(){return p("")}function w(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function b(t){return function(e){return e.preventDefault(),t.call(this,e)}}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function y(t,e){t.value=null==e?"":e}function _(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function k(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}}let x,j;function O(){if(void 0===x){x=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){x=!0}}return x}window.plot_api=e;class E{constructor(t=null){this.a=t,this.e=this.n=null}m(t,e,n=null){this.e||(this.e=f(e.nodeName),this.t=e,this.h(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)u(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(d)}}function z(t){j=t}function S(){if(!j)throw new Error("Function called outside component initialization");return j}const A=[],C=[],q=[],M=[],T=Promise.resolve();let P=!1;function R(t){q.push(t)}function L(t){M.push(t)}let B=!1;const N=new Set;function U(){if(!B){B=!0;do{for(let t=0;t<A.length;t+=1){const e=A[t];z(e),D(e.$$)}for(z(null),A.length=0;C.length;)C.pop()();for(let t=0;t<q.length;t+=1){const e=q[t];N.has(e)||(N.add(e),e())}q.length=0}while(A.length);for(;M.length;)M.pop()();P=!1,B=!1,N.clear()}}function D(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(R)}}const F=new Set;let H;function I(){H={r:0,c:[],p:H}}function Z(){H.r||o(H.c),H=H.p}function W(t,e){t&&t.i&&(F.delete(t),t.i(e))}function J(t,e,n,r){if(t&&t.o){if(F.has(t))return;F.add(t),H.c.push((()=>{F.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function V(t,e){const n=e.token={};function r(t,r,s,o){if(e.token!==n)return;e.resolved=o;let i=e.ctx;void 0!==s&&(i=i.slice(),i[s]=o);const a=t&&(e.current=t)(i);let l=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&(I(),J(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),Z())})):e.block.d(1),a.c(),W(a,1),a.m(e.mount(),e.anchor),l=!0),e.block=a,e.blocks&&(e.blocks[r]=a),l&&U()}if((s=t)&&"object"==typeof s&&"function"==typeof s.then){const n=S();if(t.then((t=>{z(n),r(e.then,1,e.value,t),z(null)}),(t=>{if(z(n),r(e.catch,2,e.error,t),z(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var s}function K(t,e,n){const r=e.slice(),{resolved:s}=t;t.current===t.then&&(r[t.value]=s),t.current===t.catch&&(r[t.error]=s),t.block.p(r,n)}function X(t,e){t.d(1),e.delete(t.key)}function G(t,e){J(t,1,1,(()=>{e.delete(t.key)}))}function Y(t,e,n,r,s,o,i,a,l,c,u,d){let f=t.length,h=o.length,p=f;const g={};for(;p--;)g[t[p].key]=p;const m=[],w=new Map,b=new Map;for(p=h;p--;){const t=d(s,o,p),a=n(t);let l=i.get(a);l?r&&l.p(t,e):(l=c(a,t),l.c()),w.set(a,m[p]=l),a in g&&b.set(a,Math.abs(p-g[a]))}const $=new Set,v=new Set;function y(t){W(t,1),t.m(a,u),i.set(t.key,t),u=t.first,h--}for(;f&&h;){const e=m[h-1],n=t[f-1],r=e.key,s=n.key;e===n?(u=e.first,f--,h--):w.has(s)?!i.has(r)||$.has(r)?y(e):v.has(s)?f--:b.get(r)>b.get(s)?(v.add(r),y(e)):($.add(s),f--):(l(n,i),f--)}for(;f--;){const e=t[f];w.has(e.key)||l(e,i)}for(;h;)y(m[h-1]);return m}function Q(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function tt(t){t&&t.c()}function et(t,e,n,s){const{fragment:a,on_mount:l,on_destroy:c,after_update:u}=t.$$;a&&a.m(e,n),s||R((()=>{const e=l.map(r).filter(i);c?c.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(R)}function nt(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function rt(t,e){-1===t.$$.dirty[0]&&(A.push(t),P||(P=!0,T.then(U)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function st(t,e,r,i,a,l,c=[-1]){const u=j;z(t);const f=t.$$={fragment:null,ctx:null,props:l,update:n,not_equal:a,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:e.context||[]),callbacks:s(),dirty:c,skip_bound:!1};let h=!1;if(f.ctx=r?r(t,e.props||{},((e,n,...r)=>{const s=r.length?r[0]:n;return f.ctx&&a(f.ctx[e],f.ctx[e]=s)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](s),h&&rt(t,e)),n})):[],f.update(),h=!0,o(f.before_update),f.fragment=!!i&&i(f.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);f.fragment&&f.fragment.l(t),t.forEach(d)}else f.fragment&&f.fragment.c();e.intro&&W(t.$$.fragment),et(t,e.target,e.anchor,e.customElement),U()}z(u)}class ot{$destroy(){nt(this,1),this.$destroy=n}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}let it="Deno"in window?window.Deno:void 0;const at=null==it,lt=new Map;function ct(t,e){if(!lt.has(t))try{const e=at?(window.env||{})[t]:it.env.get(t);lt.set(t,e)}catch(e){lt.set(t,void 0)}const n=lt.get(t);if(void 0===n){if(void 0!==e)return e;throw new Error(`env var '${t}' is not defined`)}return n}const ut=[];let dt,ft=0,ht=!1;function pt(){ht||(ht=!0,setTimeout((async()=>{for(;ft<ut.length;){let{name:t,test:e}=ut[ft];ft+=1;try{console.log(`  test | ${t}`);let n=e();n&&await n}catch(e){if(console.error(`  test | ${t} failed`),console.error(e),!at)throw e}}ht=!1}),0))}try{dt=ct("test","").toLowerCase()}catch(t){dt="false"}let gt="all"==dt,mt=gt||"true"==dt;function wt(t,e){t=is_string(t)?t:t.name,ut.push({name:t,test:e}),(mt||t.toLowerCase()==dt)&&pt()}function bt(t,e){for(const n in e)Object.defineProperty(t,n,{value:e[n],configurable:!1,writable:!0})}function $t(t){const e=[];let n=0;for(;;){const r=[];n<this.length&&e.push(r);for(let s=0;s<t;s++){if(!(n+s<this.length))return e;r.push(this[n+s])}n+=t}}function vt(){const t=this.replace(/^\s*\n|[\n\s]+$/,""),e=/^(\s+)/.parse(t);return 0==e.length?t:t.split("\n").map((t=>t.startsWith(e[0])?t.replace(e[0],""):t)).join("\n")}function yt(t=0){return 0==t?Math.round(this):Math.round((this+Number.EPSILON)*Math.pow(10,t))/Math.pow(10,t)}function _t(t){const e=t.match(this);return e?1==e.length?[]:e.slice(1,e.length):[]}function kt(t){const e=t.match(this);return(null==e?void 0:e.groups)||{}}window.run_tests=pt,window.test=wt,window.slow_test=function(t,e){t=is_string(t)?t:t.name,ut.push({name:t,test:e}),(gt||t.toLowerCase()==dt)&&pt()},window.p=function(...t){if(at)console.log(...t);else{const e=t.map((t=>function(t,e=!1){return it&&is_object(t)?it.inspect(t,{colors:e}):t}(t,!0)));t.length,console.log(...e)}},window.discard=function(t){},window.is_number=function(t){return"number"==typeof t&&Number.isFinite(t)},window.is_array=function(t){return Array.isArray(t)},window.is_string=function(t){return"string"==typeof t},window.is_object=function(t){return"object"==typeof t&&null!==t},window.is_function=function(t){return"function"==typeof t},window.is_undefined=function(t){return void 0===t},window.set_timeout=function(t,e){return setTimeout(t,e)},window.clear_timeout=clearTimeout,window.set_interval=function(t,e,n=!1){return n&&t(),setInterval(t,e)},window.clear_timeout=clearTimeout,window.to_json=Ot,window.from_json=function(t){return JSON.parse(t)},window.ensure=function(t,e){if(void 0===t)throw new Error(`value${e?" "+e:""} not defined`);if(is_object(t)&&"is_error"in t){if(t.is_error)throw new Error(t.message||`value${e?" "+e:""} not found`);return t.value}return t},window.ensure_error=zt,window.get_env=ct,window.is_prod=function(){return"prod"==ct("env","dev")},window.is_dev=function(){return"dev"==ct("env","dev")},window.is_test=function(){return"test"==ct("env","dev")},window.sleep=function(t){return new Promise((e=>setTimeout(e,t)))},Object.size=function(t){let e=0;for(let n in t)t.hasOwnProperty(n)&&e++;return e},Object.is_empty=function(t){for(let e in t)if(t.hasOwnProperty(e))return!1;return!0},Object.each=function(t,e){for(const n in t){if(!t.hasOwnProperty(n))continue;e(t[n],n)}},Object.map=function(t,e){const n={};for(const r in t){if(!t.hasOwnProperty(r))continue;const s=t[r];n[r]=e(s,r)}return n},bt(Object.prototype,{is_equal:function(t){return Et(this,t)},to_s:function(){return""+this},clone:function(){return Object.assign({},this)},to_success:function(){return{is_error:!1,value:this}}}),Array.fill=function(t,e){const n="function"==typeof e?e:()=>e,r=[];for(let e=0;e<t;e++)r.push(n(e));return r},bt(Array.prototype,{add:function(t){this.push(t)},batch:$t,size:function(){return this.length},is_empty:function(){return 0==this.length},clone:function(){return[...this]},has(t){const e=t instanceof Function?t:e=>e==t;for(let t=0;t<this.length;t++){if(e(this[t],t))return!0}return!1},group_by(t){const e=new Map;for(let n=0;n<this.length;n++){const r=this[n],s=t(r,n);let o=e.get(s);o||(o=[],e.set(s,o)),o.push(r)}return e},i(t){const e=t instanceof Function?t:e=>e==t;for(let t=0;t<this.length;t++)if(e(this[t],t))return t},take:function(t){return this.slice(0,t)},filter_map(t){const e=[];for(let n=0;n<this.length;n++){const r=t(this[n],n);void 0!==r&&e.push(r)}return e},skip_undefined(){return this.filter_map((t=>t))},find(t){const e=t instanceof Function?t:e=>e==t;for(let t=0;t<this.length;t++){const n=this[t];if(e(n,t))return n}},first(t){const e=this.length;if(void 0===t){if(e<1)throw new Error("can't get first elements from empty list");return this[0]}if(e<t)throw new Error(`can't get first ${t} elements from array of length ${e}`);return this.slice(0,t)},last(t){const e=this.length;if(void 0===t){if(e<1)throw new Error("can't get last elements from empty array");return this[e-1]}if(e<t)throw new Error(`can't get last ${t} elements from array of length ${e}`);return this.slice(e-t,e)},lasti(t){const e=t instanceof Function?t:e=>e==t;for(let t=this.length-1;t>=0;t--)if(e(this[t],t))return t},maxi(t){if(0==this.length)throw new Error("can't find maxi for empty array");if(t=t||(t=>t),0==this.length)return-1;let e=t(this[0]),n=0;for(let r=1;r<this.length;r++){let s=t(this[r]);s>e&&(e=s,n=r)}return n},median(t=!1){return this.quantile(.5,t)},mean(){let t=0;for(const e of this)t+=e;return t/this.length},mini(t){if(0==this.length)throw new Error("can't find mini for empty array");if(t=t||(t=>t),0==this.length)return-1;let e=t(this[0]),n=0;for(let r=1;r<this.length;r++){let s=t(this[r]);s<e&&(e=s,n=r)}return n},quantile(t,e=!1){const n=e?this:[...this].sort(((t,e)=>t-e)),r=(n.length-1)*t,s=Math.floor(r),o=r-s;return void 0!==n[s+1]?n[s]+o*(n[s+1]-n[s]):n[s]},each(t){this.forEach(t)},partition(t){const e=[],n=[],r=t instanceof Function?t:(e,n)=>t.includes(n);for(let t=0;t<this.length;t++){const s=this[t];r(s,t)?e.push(s):n.push(s)}return[e,n]},rev(){return[...this].reverse()},unique:function(t){const e=new Set,n=t||(t=>t);return this.filter((t=>{const r=n(t);return!e.has(r)&&(e.add(r),!0)}))},shuffle(t){null==t&&(t=()=>Math.random());const e=[...this];for(let n=e.length-1;n>0;n--){const r=Math.floor(t()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e},sort_by:function(t){if(0==this.length)return this;{const e=t,n=typeof t(this[0]);let r,s;if("number"==n)r=function(t,n){return e(t)-e(n)};else if("boolean"==n)r=function(t,n){return(e(t)?1:0)-(e(n)?1:0)};else{if("string"!=n)throw new Error(`invalid return type for 'by' '${n}'`);r=function(t,n){return e(t).localeCompare(e(n))}}return s=[...this],s.sort(r),s}},sum(){let t=0;for(const e of this)t+=e;return t}}),wt($t,(()=>{assert.equal([1,2,3].batch(2),[[1,2],[3]]),assert.equal([1,2].batch(2),[[1,2]]),assert.equal([1].batch(2),[[1]]),assert.equal([].batch(2),[])})),window.Hash=class t{constructor(e){if(is_undefined(e))this.m=new Map;else if(e instanceof Map)this.m=new Map(e);else{if(!(e instanceof t))throw"invalid usage";this.m=new Map(e.m)}}map(e){const n=new t;for(const[t,r]of this.m)n.set(t,e(r,t));return n}each(t){for(const[e,n]of this.m)t(n,e)}set(t,e){this.m.set(t,e)}get(t){return this.m.get(t)}size(){return this.m.size}is_empty(){return 0==this.m.size}values(){const t=[];for(const e of this.m.values())t.add(e);return t}keys(){const t=[];for(const e of this.m.keys())t.add(e);return t}entries(){const t=[];for(const[e,n]of this.m.entries())t.add([n,e]);return t}del(t){this.m.delete(t)}has(t){return this.m.has(t)}clone(){return new t(this)}to_json_hook(){const t={};for(const[e,n]of this.m)t[""+e]=n;return t}toJSON(){return this.to_json_hook()}},bt(String.prototype,{size:function(){return this.length},is_empty:function(){return""==this},clone:function(){return""+this},take:function(t){return this.slice(0,t)},to_error:function(){return{is_error:!0,message:this}},downcase:function(){return this.toLowerCase()},upcase:function(){return this.toUpperCase()},trim(){return this.replace(/^[\t\s\n]+|[\t\s\n]+$/g,"")},dedent:vt,last(t){const e=this.length;if(void 0===t){if(e<1)throw new Error("can't get last elements from empty string");return this[e-1]}if(e<t)throw new Error(`can't get last ${t} elements from string of length ${e}`);return this.slice(e-t,e)}}),wt("dedent",(()=>{assert.equal(vt.call("\n  a\n  b\n    c"),"a\nb\n  c")})),bt(Number.prototype,{round:yt,pow(t){return Math.pow(this,t)}}),wt("round",(()=>{assert.equal(yt.call(.05860103881518906,2),.06)})),bt(Function.prototype,{to_safe:function(){const t=this;return function(...e){try{return{is_error:!1,value:t(...e)}}catch(t){return{is_error:!0,message:zt(t).message}}}},debounce:function(t,e=!1){let n,r=this;return(...s)=>{e?(e=!1,r(...s)):(n&&clearTimeout(n),n=setTimeout((()=>r(...s)),t))}},once:function(t){let e,n=!1;return function(){return n||(e=t.apply(this,arguments),n=!0),e}}}),bt(RegExp.prototype,{parse:_t,parse_named:kt,parse1:function(t){const e=this.parse(t);if(1!=e.length)throw new Error(`expected 1 match but found ${e.length}`);return e[0]},parse2:function(t){const e=this.parse(t);if(2!=e.length)throw new Error(`expected 2 matches but found ${e.length}`);return[e[0],e[1]]},parse3:function(t){const e=this.parse(t);if(3!=e.length)throw new Error(`expected 3 matches but found ${e.length}`);return[e[0],e[1],e[2]]}}),wt("parse",(()=>{assert.equal(_t.call(/.+ (\d+) (\d+)/,"a 22 45"),["22","45"]),assert.equal(_t.call(/[^;]+;/,"drop table; create table;"),[])})),wt("parseNamed",(()=>{assert.equal(kt.call(/.+ (?<a>\d+) (?<b>\d+)/,"a 22 45"),{a:"22",b:"45"})}));const xt=function(t,e){const n=e?e instanceof Function?e():e:"Assertion error!";if(!t)throw new Error(n)};function jt(t){return is_array(t)?t.map(jt):is_object(t)?"dump"in t?jt(t.to_json_hook()):Object.assign({},...Object.entries(t).sort((([t],[e])=>t.localeCompare(e))).map((([t,e])=>({[t]:jt(e)})))):t}function Ot(t,e=!0){return e?JSON.stringify(jt(t),null,2):JSON.stringify(jt(t))}function Et(t,e){return Ot(t)===Ot(e)}function zt(t,e="Unknown error"){return is_object(t)&&t instanceof Error?(t.message||(t.message=e),t):new Error(""+(t||e))}function St(t){let e,n;return{c(){e=f("pre"),n=p(t[1]),$(e,"class","text-xs text-gray-600 mt-4")},m(t,r){u(t,e,r),c(e,n)},p(t,e){2&e&&v(n,t[1])},d(t){t&&d(e)}}}function At(t){let e,r,s,o,i,a=t[1].length>0&&St(t);return{c(){e=f("div"),r=f("span"),r.textContent="Error",s=p(" -\n  "),o=p(t[0]),i=g(),a&&a.c(),$(r,"class","text-red-600 font-bold"),$(e,"class","Fail")},m(t,n){u(t,e,n),c(e,r),c(e,s),c(e,o),c(e,i),a&&a.m(e,null)},p(t,[n]){1&n&&v(o,t[0]),t[1].length>0?a?a.p(t,n):(a=St(t),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i:n,o:n,d(t){t&&d(e),a&&a.d()}}}function Ct(t,e,n){let r,s,{error:o}=e;return t.$$set=t=>{"error"in t&&n(2,o=t.error)},t.$$.update=()=>{4&t.$$.dirty&&n(0,r=ensure_error(o).message),4&t.$$.dirty&&n(1,s=(o&&o instanceof Error?o.stack:"")||"")},[r,s,o]}xt.equal=(t,e,n)=>{if(!Et(t,e)){const r=n?n instanceof Function?n():n:`Assertion error: ${Ot(t,!0)} != ${Ot(e,!0)}`;throw new Error(r)}},xt.fail=(t,e)=>{let n=!1;try{t()}catch(t){n=!0}if(!n){const t=e?e instanceof Function?e():e:"Assertion error: expected to fail but didn't";throw new Error(t)}},xt.aequal=(t,e,n,r)=>{r=r||.001;const s=(Math.abs(t)+Math.abs(e))/2*r;if(Math.abs(t-e)>s){const r=n?n instanceof Function?n():n:`Assertion error: ${Ot(t,!0)} != ${Ot(e,!0)}`;throw new Error(r)}},window.assert=xt,wt("sort_by",(()=>{assert.equal([{v:!0},{v:!1}].sort_by((({v:t})=>t)),[{v:!1},{v:!0}]),assert.equal([{v:"b"},{v:""},{v:"c"}].sort_by((({v:t})=>t)),[{v:""},{v:"b"},{v:"c"}])})),Promise.prototype.to_json_hook=function(){return"Promise"},Promise.prototype.toJSON=Promise.prototype.to_json_hook,Object.defineProperty(Promise.prototype,"cmap",{configurable:!1,enumerable:!1}),Error.prototype.to_json_hook=function(){return{message:this.message,stack:this.stack}},Error.prototype.to_json=Error.prototype.to_json_hook,Map.prototype.to_json_hook=function(){const t={};for(const[e,n]of this)t[e]=n;return t},Map.prototype.toJSON=Map.prototype.to_json_hook;class qt extends ot{constructor(t){super(),st(this,t,Ct,At,a,{error:2})}}function Mt(t){let e,r;return{c(){e=f("div"),r=p(t[0]),$(e,"class","animate-pulse text-gray-500")},m(t,n){u(t,e,n),c(e,r)},p(t,[e]){1&e&&v(r,t[0])},i:n,o:n,d(t){t&&d(e)}}}function Tt(t,e,n){let{text:r="Processing..."}=e;return discard(r),t.$$set=t=>{"text"in t&&n(0,r=t.text)},[r]}class Pt extends ot{constructor(t){super(),st(this,t,Tt,Mt,a,{text:0})}}class Rt{constructor(t){this.v=t}get(){return this.v}set(t){this.v=t}}function Lt(t){const e=/\.([a-z0-9]+)$/i.parse(t);return e.length>0?e[0]:void 0}function Bt(t){return/\//.test(t)?get_env("base_url")+t:t}async function Nt(t,e){if("parallel"==e){const e=t.map(Dt);for(const t of e)await t}else for(const e of t)await Dt(e)}const Ut={};async function Dt(t){if(!(t in Ut)){const e=Bt(t);if(t.endsWith(".js"))Ut[t]=function(t){return new Promise(((e,n)=>{const r=document.createElement("script");r.src=t,r.onerror=()=>{r.remove(),n(new Error(`Cannot load ${t}`))},r.onload=()=>{r.remove(),e()},document.body.append(r)}))}(e);else{if(!t.endsWith(".css"))throw new Error(`should be script or style url '${t}'`);Ut[t]=function(t){return new Promise(((e,n)=>{const r=document.createElement("link");r.rel="stylesheet",r.onerror=()=>{r.remove(),n(new Error(`Cannot load ${t}`))},r.onload=()=>{e()},r.href=t,document.head.appendChild(r)}))}(e)}}return Ut[t]}const Ft={};async function Ht(t){if(!(t in Ft)){Ft[t]=async function(){let e=await fetch(function(t,e={}){const n=[];for(const t in e){const r=e[t];null!=t&&null!=r&&n.push(`${encodeURIComponent(t)}=${encodeURIComponent(""+e[t])}`)}return n.length>0?`${t}${t.includes("?")?"&":"?"}${n.join("&")}`:t}(t,{clearcache:Math.random()}));if(404==e.status)throw new Error(`File '${t}' not found`);if(200!=e.status)throw new Error(`Can't load '${t}', response code ${e.status}`);return Zt(await e.text(),Lt(t),t)}()}return Ft[t]}async function It(t){if(void 0===t)throw new Error("nether data nor data url provided");return"object"==typeof t&&"url"in t?await Ht(t.url):t}async function Zt(e,n,r){if(n){const s=t.parsers[n];if(s)try{return await s(e)}catch(t){throw new Error(`can't parse '${r||n}', ${ensure_error(t).message}`)}}return e}async function Wt(t){const e=(await Vt()).load(t);if(null==e)throw new Error("YAML data is empty");return e}async function Jt(t){return(await Vt()).dump(t,{skipInvalid:!0,noRefs:!0})}async function Vt(){await Nt(["/vendor/js-yaml-4.1.0/js-yaml.min.js"],"serial");const t=window.jsyaml;if(!t)throw new Error("can't load 'js-yaml' library");return t}t.parsers.yml=Wt,t.parsers.yaml=Wt,t.parsers.json=async t=>JSON.parse(t),t.parsers.csv=async function(t){const{errors:e,data:n,meta:{fields:r}}=(await async function(){await Nt(["/vendor/papaparse-5.0.2/papaparse.min.js"],"serial");const t=window.Papa;if(!t)throw new Error("can't load 'papaparse' library");return t}()).parse(t,{header:!0,dynamicTyping:!0});if(e.lenght>0)throw new Error(ensure_error(e[0]).message);return{type:"csv_table",columns:r,rows:n}};const Kt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};test("escapeHtml",(()=>{var t;assert.equal(null==(t="<div>")?"":(""+t).replace(/[&<>'"]/g,(function(t){return Kt[t]})),"&lt;div&gt;")}));var Xt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Gt(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})})),e}function Yt(t){var e={exports:{}};return t(e,e.exports),e.exports}var Qt=Yt((function(t){function e(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}}t.exports={defaults:{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1},getDefaults:e,changeDefaults:function(e){t.exports.defaults=e}}}));const te=/[&<>"']/,ee=/[&<>"']/g,ne=/[<>"']|&(?!#?\w+;)/,re=/[<>"']|&(?!#?\w+;)/g,se={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},oe=t=>se[t];const ie=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function ae(t){return t.replace(ie,((t,e)=>"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""))}const le=/(^|[^\[])\^/g;const ce=/[^\w:]/g,ue=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;const de={},fe=/^[^:]+:\/*[^/]*$/,he=/^([^:]+:)[\s\S]*$/,pe=/^([^:]+:\/*[^/]*)[\s\S]*$/;function ge(t,e){de[" "+t]||(fe.test(t)?de[" "+t]=t+"/":de[" "+t]=me(t,"/",!0));const n=-1===(t=de[" "+t]).indexOf(":");return"//"===e.substring(0,2)?n?e:t.replace(he,"$1")+e:"/"===e.charAt(0)?n?e:t.replace(pe,"$1")+e:t+e}function me(t,e,n){const r=t.length;if(0===r)return"";let s=0;for(;s<r;){const o=t.charAt(r-s-1);if(o!==e||n){if(o===e||!n)break;s++}else s++}return t.substr(0,r-s)}var we={escape:function(t,e){if(e){if(te.test(t))return t.replace(ee,oe)}else if(ne.test(t))return t.replace(re,oe);return t},unescape:ae,edit:function(t,e){t=t.source||t,e=e||"";const n={replace:(e,r)=>(r=(r=r.source||r).replace(le,"$1"),t=t.replace(e,r),n),getRegex:()=>new RegExp(t,e)};return n},cleanUrl:function(t,e,n){if(t){let t;try{t=decodeURIComponent(ae(n)).replace(ce,"").toLowerCase()}catch(t){return null}if(0===t.indexOf("javascript:")||0===t.indexOf("vbscript:")||0===t.indexOf("data:"))return null}e&&!ue.test(n)&&(n=ge(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(t){return null}return n},resolveUrl:ge,noopTest:{exec:function(){}},merge:function(t){let e,n,r=1;for(;r<arguments.length;r++)for(n in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},splitCells:function(t,e){const n=t.replace(/\|/g,((t,e,n)=>{let r=!1,s=e;for(;--s>=0&&"\\"===n[s];)r=!r;return r?"|":" |"})).split(/ \|/);let r=0;if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n},rtrim:me,findClosingBracket:function(t,e){if(-1===t.indexOf(e[1]))return-1;const n=t.length;let r=0,s=0;for(;s<n;s++)if("\\"===t[s])s++;else if(t[s]===e[0])r++;else if(t[s]===e[1]&&(r--,r<0))return s;return-1},checkSanitizeDeprecation:function(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}};const{noopTest:be,edit:$e,merge:ve}=we,ye={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:be,table:be,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};ye.def=$e(ye.def).replace("label",ye._label).replace("title",ye._title).getRegex(),ye.bullet=/(?:[*+-]|\d{1,9}\.)/,ye.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,ye.item=$e(ye.item,"gm").replace(/bull/g,ye.bullet).getRegex(),ye.list=$e(ye.list).replace(/bull/g,ye.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+ye.def.source+")").getRegex(),ye._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ye._comment=/<!--(?!-?>)[\s\S]*?-->/,ye.html=$e(ye.html,"i").replace("comment",ye._comment).replace("tag",ye._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ye.paragraph=$e(ye._paragraph).replace("hr",ye.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",ye._tag).getRegex(),ye.blockquote=$e(ye.blockquote).replace("paragraph",ye.paragraph).getRegex(),ye.normal=ve({},ye),ye.gfm=ve({},ye.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),ye.gfm.nptable=$e(ye.gfm.nptable).replace("hr",ye.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",ye._tag).getRegex(),ye.gfm.table=$e(ye.gfm.table).replace("hr",ye.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",ye._tag).getRegex(),ye.pedantic=ve({},ye.normal,{html:$e("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",ye._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:be,paragraph:$e(ye.normal._paragraph).replace("hr",ye.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",ye.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const _e={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:be,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:be,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/,_punctuation:"!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~"};_e.em=$e(_e.em).replace(/punctuation/g,_e._punctuation).getRegex(),_e._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,_e._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,_e._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,_e.autolink=$e(_e.autolink).replace("scheme",_e._scheme).replace("email",_e._email).getRegex(),_e._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,_e.tag=$e(_e.tag).replace("comment",ye._comment).replace("attribute",_e._attribute).getRegex(),_e._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,_e._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,_e._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,_e.link=$e(_e.link).replace("label",_e._label).replace("href",_e._href).replace("title",_e._title).getRegex(),_e.reflink=$e(_e.reflink).replace("label",_e._label).getRegex(),_e.normal=ve({},_e),_e.pedantic=ve({},_e.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:$e(/^!?\[(label)\]\((.*?)\)/).replace("label",_e._label).getRegex(),reflink:$e(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",_e._label).getRegex()}),_e.gfm=ve({},_e.normal,{escape:$e(_e.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),_e.gfm.url=$e(_e.gfm.url,"i").replace("email",_e.gfm._extended_email).getRegex(),_e.breaks=ve({},_e.gfm,{br:$e(_e.br).replace("{2,}","*").getRegex(),text:$e(_e.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var ke={block:ye,inline:_e};const{defaults:xe}=Qt,{block:je}=ke,{rtrim:Oe,splitCells:Ee,escape:ze}=we;var Se=class t{constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||xe,this.rules=je.normal,this.options.pedantic?this.rules=je.pedantic:this.options.gfm&&(this.rules=je.gfm)}static get rules(){return je}static lex(e,n){return new t(n).lex(e)}lex(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.token(t,!0)}token(t,e){let n,r,s,o,i,a,l,c,u,d,f,h,p,g,m,w;for(t=t.replace(/^ +$/gm,"");t;)if((s=this.rules.newline.exec(t))&&(t=t.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"})),s=this.rules.code.exec(t)){const e=this.tokens[this.tokens.length-1];t=t.substring(s[0].length),e&&"paragraph"===e.type?e.text+="\n"+s[0].trimRight():(s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?s:Oe(s,"\n")}))}else if(s=this.rules.fences.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"code",lang:s[2]?s[2].trim():s[2],text:s[3]||""});else if(s=this.rules.heading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});else if((s=this.rules.nptable.exec(t))&&(a={type:"table",header:Ee(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/\n$/,"").split("\n"):[]},a.header.length===a.align.length)){for(t=t.substring(s[0].length),f=0;f<a.align.length;f++)/^ *-+: *$/.test(a.align[f])?a.align[f]="right":/^ *:-+: *$/.test(a.align[f])?a.align[f]="center":/^ *:-+ *$/.test(a.align[f])?a.align[f]="left":a.align[f]=null;for(f=0;f<a.cells.length;f++)a.cells[f]=Ee(a.cells[f],a.header.length);this.tokens.push(a)}else if(s=this.rules.hr.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"hr"});else if(s=this.rules.blockquote.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,e),this.tokens.push({type:"blockquote_end"});else if(s=this.rules.list.exec(t)){for(t=t.substring(s[0].length),o=s[2],g=o.length>1,l={type:"list_start",ordered:g,start:g?+o:"",loose:!1},this.tokens.push(l),s=s[0].match(this.rules.item),c=[],n=!1,p=s.length,f=0;f<p;f++)a=s[f],d=a.length,a=a.replace(/^ *([*+-]|\d+\.) */,""),~a.indexOf("\n ")&&(d-=a.length,a=this.options.pedantic?a.replace(/^ {1,4}/gm,""):a.replace(new RegExp("^ {1,"+d+"}","gm"),"")),f!==p-1&&(i=je.bullet.exec(s[f+1])[0],(o.length>1?1===i.length:i.length>1||this.options.smartLists&&i!==o)&&(t=s.slice(f+1).join("\n")+t,f=p-1)),r=n||/\n\n(?!\s*$)/.test(a),f!==p-1&&(n="\n"===a.charAt(a.length-1),r||(r=n)),r&&(l.loose=!0),m=/^\[[ xX]\] /.test(a),w=void 0,m&&(w=" "!==a[1],a=a.replace(/^\[[ xX]\] +/,"")),u={type:"list_item_start",task:m,checked:w,loose:r},c.push(u),this.tokens.push(u),this.token(a,!1),this.tokens.push({type:"list_item_end"});if(l.loose)for(p=c.length,f=0;f<p;f++)c[f].loose=!0;this.tokens.push({type:"list_end"})}else if(s=this.rules.html.exec(t))t=t.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===s[1]||"script"===s[1]||"style"===s[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):ze(s[0]):s[0]});else if(e&&(s=this.rules.def.exec(t)))t=t.substring(s[0].length),s[3]&&(s[3]=s[3].substring(1,s[3].length-1)),h=s[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[h]||(this.tokens.links[h]={href:s[2],title:s[3]});else if((s=this.rules.table.exec(t))&&(a={type:"table",header:Ee(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/\n$/,"").split("\n"):[]},a.header.length===a.align.length)){for(t=t.substring(s[0].length),f=0;f<a.align.length;f++)/^ *-+: *$/.test(a.align[f])?a.align[f]="right":/^ *:-+: *$/.test(a.align[f])?a.align[f]="center":/^ *:-+ *$/.test(a.align[f])?a.align[f]="left":a.align[f]=null;for(f=0;f<a.cells.length;f++)a.cells[f]=Ee(a.cells[f].replace(/^ *\| *| *\| *$/g,""),a.header.length);this.tokens.push(a)}else if(s=this.rules.lheading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:"="===s[2].charAt(0)?1:2,text:s[1]});else if(e&&(s=this.rules.paragraph.exec(t)))t=t.substring(s[0].length),this.tokens.push({type:"paragraph",text:"\n"===s[1].charAt(s[1].length-1)?s[1].slice(0,-1):s[1]});else if(s=this.rules.text.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens}};const{defaults:Ae}=Qt,{cleanUrl:Ce,escape:qe}=we;var Me=class{constructor(t){this.options=t||Ae}code(t,e,n){const r=(e||"").match(/\S*/)[0];if(this.options.highlight){const e=this.options.highlight(t,r);null!=e&&e!==t&&(n=!0,t=e)}return r?'<pre><code class="'+this.options.langPrefix+qe(r,!0)+'">'+(n?t:qe(t,!0))+"</code></pre>\n":"<pre><code>"+(n?t:qe(t,!0))+"</code></pre>"}blockquote(t){return"<blockquote>\n"+t+"</blockquote>\n"}html(t){return t}heading(t,e,n,r){return this.options.headerIds?"<h"+e+' id="'+this.options.headerPrefix+r.slug(n)+'">'+t+"</h"+e+">\n":"<h"+e+">"+t+"</h"+e+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(t,e,n){const r=e?"ol":"ul";return"<"+r+(e&&1!==n?' start="'+n+'"':"")+">\n"+t+"</"+r+">\n"}listitem(t){return"<li>"+t+"</li>\n"}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return"<p>"+t+"</p>\n"}table(t,e){return e&&(e="<tbody>"+e+"</tbody>"),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"}tablerow(t){return"<tr>\n"+t+"</tr>\n"}tablecell(t,e){const n=e.header?"th":"td";return(e.align?"<"+n+' align="'+e.align+'">':"<"+n+">")+t+"</"+n+">\n"}strong(t){return"<strong>"+t+"</strong>"}em(t){return"<em>"+t+"</em>"}codespan(t){return"<code>"+t+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return"<del>"+t+"</del>"}link(t,e,n){if(null===(t=Ce(this.options.sanitize,this.options.baseUrl,t)))return n;let r='<a href="'+qe(t)+'"';return e&&(r+=' title="'+e+'"'),r+=">"+n+"</a>",r}image(t,e,n){if(null===(t=Ce(this.options.sanitize,this.options.baseUrl,t)))return n;let r='<img src="'+t+'" alt="'+n+'"';return e&&(r+=' title="'+e+'"'),r+=this.options.xhtml?"/>":">",r}text(t){return t}},Te=class{constructor(){this.seen={}}slug(t){let e=t.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(e)){const t=e;do{this.seen[t]++,e=t+"-"+this.seen[t]}while(this.seen.hasOwnProperty(e))}return this.seen[e]=0,e}};const{defaults:Pe}=Qt,{inline:Re}=ke,{findClosingBracket:Le,escape:Be}=we;var Ne=class t{constructor(t,e){if(this.options=e||Pe,this.links=t,this.rules=Re.normal,this.options.renderer=this.options.renderer||new Me,this.renderer=this.options.renderer,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=Re.pedantic:this.options.gfm&&(this.options.breaks?this.rules=Re.breaks:this.rules=Re.gfm)}static get rules(){return Re}static output(e,n,r){return new t(n,r).output(e)}output(e){let n,r,s,o,i,a,l="";for(;e;)if(i=this.rules.escape.exec(e))e=e.substring(i[0].length),l+=Be(i[1]);else if(i=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(i[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(i[0])&&(this.inRawBlock=!1),e=e.substring(i[0].length),l+=this.renderer.html(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):Be(i[0]):i[0]);else if(i=this.rules.link.exec(e)){const r=Le(i[2],"()");if(r>-1){const t=(0===i[0].indexOf("!")?5:4)+i[1].length+r;i[2]=i[2].substring(0,r),i[0]=i[0].substring(0,t).trim(),i[3]=""}e=e.substring(i[0].length),this.inLink=!0,s=i[2],this.options.pedantic?(n=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s),n?(s=n[1],o=n[3]):o=""):o=i[3]?i[3].slice(1,-1):"",s=s.trim().replace(/^<([\s\S]*)>$/,"$1"),l+=this.outputLink(i,{href:t.escapes(s),title:t.escapes(o)}),this.inLink=!1}else if((i=this.rules.reflink.exec(e))||(i=this.rules.nolink.exec(e))){if(e=e.substring(i[0].length),n=(i[2]||i[1]).replace(/\s+/g," "),n=this.links[n.toLowerCase()],!n||!n.href){l+=i[0].charAt(0),e=i[0].substring(1)+e;continue}this.inLink=!0,l+=this.outputLink(i,n),this.inLink=!1}else if(i=this.rules.strong.exec(e))e=e.substring(i[0].length),l+=this.renderer.strong(this.output(i[4]||i[3]||i[2]||i[1]));else if(i=this.rules.em.exec(e))e=e.substring(i[0].length),l+=this.renderer.em(this.output(i[6]||i[5]||i[4]||i[3]||i[2]||i[1]));else if(i=this.rules.code.exec(e))e=e.substring(i[0].length),l+=this.renderer.codespan(Be(i[2].trim(),!0));else if(i=this.rules.br.exec(e))e=e.substring(i[0].length),l+=this.renderer.br();else if(i=this.rules.del.exec(e))e=e.substring(i[0].length),l+=this.renderer.del(this.output(i[1]));else if(i=this.rules.autolink.exec(e))e=e.substring(i[0].length),"@"===i[2]?(r=Be(this.mangle(i[1])),s="mailto:"+r):(r=Be(i[1]),s=r),l+=this.renderer.link(s,null,r);else if(this.inLink||!(i=this.rules.url.exec(e))){if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.inRawBlock?l+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):Be(i[0]):i[0]):l+=this.renderer.text(Be(this.smartypants(i[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else{if("@"===i[2])r=Be(i[0]),s="mailto:"+r;else{do{a=i[0],i[0]=this.rules._backpedal.exec(i[0])[0]}while(a!==i[0]);r=Be(i[0]),s="www."===i[1]?"http://"+r:r}e=e.substring(i[0].length),l+=this.renderer.link(s,null,r)}return l}static escapes(e){return e?e.replace(t.rules._escapes,"$1"):e}outputLink(t,e){const n=e.href,r=e.title?Be(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(n,r,this.output(t[1])):this.renderer.image(n,r,Be(t[1]))}smartypants(t){return this.options.smartypants?t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):t}mangle(t){if(!this.options.mangle)return t;const e=t.length;let n,r="",s=0;for(;s<e;s++)n=t.charCodeAt(s),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}},Ue=class{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,e,n){return""+n}image(t,e,n){return""+n}br(){return""}};const{defaults:De}=Qt,{merge:Fe,unescape:He}=we;var Ie=class t{constructor(t){this.tokens=[],this.token=null,this.options=t||De,this.options.renderer=this.options.renderer||new Me,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new Te}static parse(e,n){return new t(n).parse(e)}parse(t){this.inline=new Ne(t.links,this.options),this.inlineText=new Ne(t.links,Fe({},this.options,{renderer:new Ue})),this.tokens=t.reverse();let e="";for(;this.next();)e+=this.tok();return e}next(){return this.token=this.tokens.pop(),this.token}peek(){return this.tokens[this.tokens.length-1]||0}parseText(){let t=this.token.text;for(;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)}tok(){let t="";switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,He(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":{let e,n,r,s,o="";for(r="",e=0;e<this.token.header.length;e++)r+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(o+=this.renderer.tablerow(r),e=0;e<this.token.cells.length;e++){for(n=this.token.cells[e],r="",s=0;s<n.length;s++)r+=this.renderer.tablecell(this.inline.output(n[s]),{header:!1,align:this.token.align[s]});t+=this.renderer.tablerow(r)}return this.renderer.table(o,t)}case"blockquote_start":for(t="";"blockquote_end"!==this.next().type;)t+=this.tok();return this.renderer.blockquote(t);case"list_start":{t="";const e=this.token.ordered,n=this.token.start;for(;"list_end"!==this.next().type;)t+=this.tok();return this.renderer.list(t,e,n)}case"list_item_start":{t="";const e=this.token.loose,n=this.token.checked,r=this.token.task;if(this.token.task)if(e)if("text"===this.peek().type){const t=this.peek();t.text=this.renderer.checkbox(n)+" "+t.text}else this.tokens.push({type:"text",text:this.renderer.checkbox(n)});else t+=this.renderer.checkbox(n);for(;"list_item_end"!==this.next().type;)t+=e||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(t,r,n)}case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:{const t='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(t);console.log(t)}}}};const{merge:Ze,checkSanitizeDeprecation:We,escape:Je}=we,{getDefaults:Ve,changeDefaults:Ke,defaults:Xe}=Qt;function Ge(t,e,n){if(null==t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(n||"function"==typeof e){n||(n=e,e=null),e=Ze({},Ge.defaults,e||{}),We(e);const r=e.highlight;let s,o,i=0;try{s=Se.lex(t,e)}catch(t){return n(t)}o=s.length;const a=function(t){if(t)return e.highlight=r,n(t);let o;try{o=Ie.parse(s,e)}catch(e){t=e}return e.highlight=r,t?n(t):n(null,o)};if(!r||r.length<3)return a();if(delete e.highlight,!o)return a();for(;i<s.length;i++)!function(t){"code"!==t.type?--o||a():r(t.text,t.lang,(function(e,n){return e?a(e):null==n||n===t.text?--o||a():(t.text=n,t.escaped=!0,void(--o||a()))}))}(s[i])}else try{return e=Ze({},Ge.defaults,e||{}),We(e),Ie.parse(Se.lex(t,e),e)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",(e||Ge.defaults).silent)return"<p>An error occurred:</p><pre>"+Je(t.message+"",!0)+"</pre>";throw t}}Ge.options=Ge.setOptions=function(t){return Ze(Ge.defaults,t),Ke(Ge.defaults),Ge},Ge.getDefaults=Ve,Ge.defaults=Xe,Ge.Parser=Ie,Ge.parser=Ie.parse,Ge.Renderer=Me,Ge.TextRenderer=Ue,Ge.Lexer=Se,Ge.lexer=Se.lex,Ge.InlineLexer=Ne,Ge.inlineLexer=Ne.output,Ge.Slugger=Te,Ge.parse=Ge;var Ye=Ge;let Qe=!1;async function tn(t){await sleep(0);const e=new Ye.Renderer;let n=0;const r=()=>`__special_katext_id_${n++}__`,s={};function o(t){return t.replace("&gt;",">").replace("&lt;",">").replace("&quot;","'")}function i(t){return t=(t=t.replace(/\$\$([\s\S]+?)\$\$/g,((t,e)=>{const n=r();return s[n]={type:"block",expression:o(e)},n}))).replace(/\$([^\n\s]+?)\$/g,((t,e)=>{const n=r();return s[n]={type:"inline",expression:o(e)},n}))}const a=e.listitem;e.listitem=function(t,e,n){return a(i(t),e,n)};const l=e.paragraph;e.paragraph=function(t){return l(i(t))};const c=e.tablecell;function u(t){Ye.setOptions({renderer:e,highlight:t,pedantic:!1,gfm:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!0})}let d;if(e.tablecell=function(t,e){return c(i(t),e)},Qe){const e=window.hljs;if(!e)throw new Error("can't load 'highlightjs' library for markdown");u(((t,n)=>{try{return n?e.highlight(t,{language:n}).value:t}catch(e){return t}})),d=Ye(t.dedent())}else{let e=!1;if(u(((t,n)=>(n&&(e=!0),t))),d=Ye(t.dedent()),e)return await Nt(["/vendor/highlight.js-11.0.1/default.min.css","/vendor/highlight.js-11.0.1/highlight.min.js"],"parallel"),Qe=!0,tn(t)}return d.includes("__special_katext_id_")&&(await Nt(["/vendor/katex-0.11.1/katex.min.js"],"parallel"),Nt(["/vendor/katex-0.11.1/katex.css"],"parallel").catch((t=>console.warn(`can't load styles for KaTeX, ${ensure_error(t).message}`))),d=d.replace(/(__special_katext_id_\d+__)/g,((t,e)=>{let{type:n,expression:r}=s[e];return r=r.replace(/<br\/>/g,"\\\\"),window.katex.renderToString(r,{output:"html",displayMode:"block"==n,throwOnError:!1})}))),d}function en(t){let e,r,s=t[0].html+"";return{c(){r=m(),e=new E(r)},m(t,n){e.m(s,t,n),u(t,r,n)},p(t,n){1&n&&s!==(s=t[0].html+"")&&e.p(s)},i:n,o:n,d(t){t&&d(r),t&&e.d()}}}function nn(t){let e,n;return e=new qt({props:{error:t[0].error}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.error=t[0].error),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function rn(t){let e,r;return e=new Pt({}),{c(){tt(e.$$.fragment)},m(t,n){et(e,t,n),r=!0},p:n,i(t){r||(W(e.$$.fragment,t),r=!0)},o(t){J(e.$$.fragment,t),r=!1},d(t){nt(e,t)}}}function sn(t){let e,n,r,s;const o=[rn,nn,en],i=[];function a(t,e){return"empty"==t[0].state?0:"error"==t[0].state?1:2}return n=a(t),r=i[n]=o[n](t),{c(){e=f("div"),r.c(),$(e,"class","markdown")},m(t,r){u(t,e,r),i[n].m(e,null),s=!0},p(t,[s]){let l=n;n=a(t),n===l?i[n].p(t,s):(I(),J(i[l],1,1,(()=>{i[l]=null})),Z(),r=i[n],r?r.p(t,s):(r=i[n]=o[n](t),r.c()),W(r,1),r.m(e,null))},i(t){s||(W(r),s=!0)},o(t){J(r),s=!1},d(t){t&&d(e),i[n].d()}}}function on(t,e,n){let{markdown:r}=e,s={state:"empty"};return t.$$set=t=>{"markdown"in t&&n(1,r=t.markdown)},t.$$.update=()=>{if(3&t.$$.dirty&&("empty"==s.state||s.markdown!=r)){const t=r;tn(r).then((e=>{n(0,s={state:"success",markdown:t,html:e})})).catch((e=>{const r=ensure_error(e,"Unknown error while processing markdown").message;n(0,s={state:"error",markdown:t,error:r})}))}},[s,r]}class an extends ot{constructor(t){super(),st(this,t,on,sn,a,{markdown:1})}}function ln(t){let e,n,r,s,o,i,a;return{c(){e=f("a"),n=h("svg"),r=h("text"),s=p("PL0T"),o=h("text"),i=p("PL0T"),$(r,"class","svg_stroke svelte-x784r0"),$(r,"x","15"),$(r,"y","75"),$(o,"class","svgText"),$(o,"x","15"),$(o,"y","75"),$(n,"viewBox","0 0 200 100"),$(n,"class","svelte-x784r0"),$(e,"class",a=l(t[0]?"main":"")+" svelte-x784r0"),$(e,"href","http://pl0t.com"),$(e,"target","_blank")},m(t,a){u(t,e,a),c(e,n),c(n,r),c(r,s),c(n,o),c(o,i)},p(t,n){1&n&&a!==(a=l(t[0]?"main":"")+" svelte-x784r0")&&$(e,"class",a)},d(t){t&&d(e)}}}function cn(t){let e,r=t[1]&&ln(t);return{c(){r&&r.c(),e=m()},m(t,n){r&&r.m(t,n),u(t,e,n)},p(t,[n]){t[1]?r?r.p(t,n):(r=ln(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:n,o:n,d(t){r&&r.d(t),t&&d(e)}}}let un=!0;function dn(t,e,n){let{is_main:r=!1}=e;r&&(un=!1);let s=!1;return set_interval((()=>{n(1,s=un||r)}),1e3),t.$$set=t=>{"is_main"in t&&n(0,r=t.is_main)},[r,s]}class fn extends ot{constructor(t){super(),st(this,t,dn,cn,a,{is_main:0})}}function hn(t,e,n){const r=t.slice();return r[1]=e[n],r}function pn(t){let e,n=t[0],r=[];for(let e=0;e<n.length;e+=1)r[e]=bn(hn(t,n,e));return{c(){e=f("div");for(let t=0;t<r.length;t+=1)r[t].c();$(e,"class","text-sm mt-1 mx-1")},m(t,n){u(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,s){if(1&s){let o;for(n=t[0],o=0;o<n.length;o+=1){const i=hn(t,n,o);r[o]?r[o].p(i,s):(r[o]=bn(i),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&d(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(r,t)}}}function gn(t){let e;return{c(){e=f("div"),e.textContent="unknown message type"},m(t,n){u(t,e,n)},p:n,d(t){t&&d(e)}}}function mn(t){let e,n,r,s,o=t[1].message+"";return{c(){e=f("div"),n=f("span"),n.textContent="error",r=g(),s=p(o),$(n,"class","bg-red-400 px-2 rounded")},m(t,o){u(t,e,o),c(e,n),c(e,r),c(e,s)},p(t,e){1&e&&o!==(o=t[1].message+"")&&v(s,o)},d(t){t&&d(e)}}}function wn(t){let e,n,r,s,o=t[1].message+"";return{c(){e=f("div"),n=f("span"),n.textContent="warn",r=g(),s=p(o),$(n,"class","bg-yellow-400 px-2 rounded")},m(t,o){u(t,e,o),c(e,n),c(e,r),c(e,s)},p(t,e){1&e&&o!==(o=t[1].message+"")&&v(s,o)},d(t){t&&d(e)}}}function bn(t){let e;function n(t,e){return"warn"==t[1].type?wn:"error"==t[1].type?mn:gn}let r=n(t),s=r(t);return{c(){s.c(),e=m()},m(t,n){s.m(t,n),u(t,e,n)},p(t,o){r===(r=n(t))&&s?s.p(t,o):(s.d(1),s=r(t),s&&(s.c(),s.m(e.parentNode,e)))},d(t){s.d(t),t&&d(e)}}}function $n(t){let e,r=t[0].length>0&&pn(t);return{c(){r&&r.c(),e=m()},m(t,n){r&&r.m(t,n),u(t,e,n)},p(t,[n]){t[0].length>0?r?r.p(t,n):(r=pn(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:n,o:n,d(t){r&&r.d(t),t&&d(e)}}}function vn(t,e,n){let{messages:r}=e;return t.$$set=t=>{"messages"in t&&n(0,r=t.messages)},[r]}class yn extends ot{constructor(t){super(),st(this,t,vn,$n,a,{messages:0})}}function _n(t){return t.map((t=>"string"==typeof t?{type:"warn",message:t}:t)).unique((({message:t})=>t)).sort_by((({type:t,message:e})=>`${t} ${e}`))}function kn(t){let e,r;return e=new qt({props:{error:"Invalid image format"}}),{c(){tt(e.$$.fragment)},m(t,n){et(e,t,n),r=!0},p:n,i(t){r||(W(e.$$.fragment,t),r=!0)},o(t){J(e.$$.fragment,t),r=!1},d(t){nt(e,t)}}}function xn(t){let e,r,s;return{c(){e=f("img"),e.src!==(r="data:image/png;base64,"+t[1].base64)&&$(e,"src",r),$(e,"alt",s=t[0].id)},m(t,n){u(t,e,n)},p(t,n){2&n&&e.src!==(r="data:image/png;base64,"+t[1].base64)&&$(e,"src",r),1&n&&s!==(s=t[0].id)&&$(e,"alt",s)},i:n,o:n,d(t){t&&d(e)}}}function jn(t){let e,r,s;return{c(){e=f("img"),e.src!==(r=t[1].url)&&$(e,"src",r),$(e,"alt",s=t[0].id)},m(t,n){u(t,e,n)},p(t,n){2&n&&e.src!==(r=t[1].url)&&$(e,"src",r),1&n&&s!==(s=t[0].id)&&$(e,"alt",s)},i:n,o:n,d(t){t&&d(e)}}}function On(t){let e,n,r,s;const o=[jn,xn,kn],i=[];function a(t,e){return"url"in t[1]?0:"base64"in t[1]?1:2}return n=a(t),r=i[n]=o[n](t),{c(){e=f("div"),r.c(),$(e,"class","ImageBlockContent")},m(t,r){u(t,e,r),i[n].m(e,null),s=!0},p(t,[s]){let l=n;n=a(t),n===l?i[n].p(t,s):(I(),J(i[l],1,1,(()=>{i[l]=null})),Z(),r=i[n],r?r.p(t,s):(r=i[n]=o[n](t),r.c()),W(r,1),r.m(e,null))},i(t){s||(W(r),s=!0)},o(t){J(r),s=!1},d(t){t&&d(e),i[n].d()}}}const En={match_and_normalize:t=>{if(is_object(t)&&"image"in t)return t}};function zn(t,e,n){let r,{block:s}=e,{is_narrow:o}=e;return discard(o),t.$$set=t=>{"block"in t&&n(0,s=t.block),"is_narrow"in t&&n(2,o=t.is_narrow)},t.$$.update=()=>{1&t.$$.dirty&&n(1,r=s.image)},[s,r,o]}var Sn=Object.freeze({__proto__:null,default:class extends ot{constructor(t){super(),st(this,t,zn,On,a,{block:0,is_narrow:2})}},definition:En});function An(t){let e,n;return e=new qt({props:{error:t[3]}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.error=t[3]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function Cn(t){let e,n;return e=new an({props:{markdown:t[2]}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.markdown=t[2]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function qn(t){let e,r;return e=new Pt({}),{c(){tt(e.$$.fragment)},m(t,n){et(e,t,n),r=!0},p:n,i(t){r||(W(e.$$.fragment,t),r=!0)},o(t){J(e.$$.fragment,t),r=!1},d(t){nt(e,t)}}}function Mn(t){let e,n,r,s={ctx:t,current:null,token:null,hasCatch:!0,pending:qn,then:Cn,catch:An,value:2,error:3,blocks:[,,,]};return V(n=It(t[0].text),s),{c(){e=f("div"),s.block.c(),$(e,"class","TextBlockContent")},m(t,n){u(t,e,n),s.block.m(e,s.anchor=null),s.mount=()=>e,s.anchor=null,r=!0},p(e,[r]){t=e,s.ctx=t,1&r&&n!==(n=It(t[0].text))&&V(n,s)||K(s,t,r)},i(t){r||(W(s.block),r=!0)},o(t){for(let t=0;t<3;t+=1){J(s.blocks[t])}r=!1},d(t){t&&d(e),s.block.d(),s.token=null,s=null}}}const Tn={match_and_normalize:t=>is_string(t)?{text:t}:is_object(t)&&"text"in t?t:void 0};function Pn(t,e,n){let{block:r}=e,{is_narrow:s}=e;return discard(s),t.$$set=t=>{"block"in t&&n(0,r=t.block),"is_narrow"in t&&n(1,s=t.is_narrow)},[r,s]}var Rn=Object.freeze({__proto__:null,default:class extends ot{constructor(t){super(),st(this,t,Pn,Mn,a,{block:0,is_narrow:1})}},definition:Tn});const Ln=["width","height","config"];function Bn(t){for(const e in t)if(Ln.indexOf(e)<0)throw new Error(`invalid property '${e}'`);return fr("width",t.width,["number","undefined"]),fr("height",t.height,["number","undefined"]),t}const Nn=["linear","linear-closed","step","step-before","step-after","basis","basis-open","basis-closed","cardinal","cardinal-open","cardinal-closed","bundle","monotone"];const Un=["point","circle","line","area","bar","rect","rule","square","text","tick","trail"];function Dn(t){if(Un.indexOf(t)<0)throw new Error(`invalid mark '${t}', available are ${Un.join(", ")}`);return t}const Fn=["mark","color","size","point","interpolate","opacity","thickness","vega"];function Hn(t){for(const e in t)if(Fn.indexOf(e)<0)throw new Error(`unknown mark property '${e}', available are ${Fn.join(", ")}`);const{mark:e,color:n,size:r,point:s,interpolate:o,opacity:i,thickness:a,vega:l}=t;return fr("color",n,["string","undefined"]),fr("size",r,["number","undefined"]),fr("point",s,["boolean","undefined"]),o&&function(t){if(Nn.indexOf(t)<0)throw new Error(`invalid interpolate '${t}', available are ${Nn.join(", ")}`)}(o),fr("opacity",i,["number","undefined"]),fr("thickness",a,["number","undefined"]),fr("vega",l,["object","undefined"]),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({type:Dn(e)},void 0!==n?{color:n}:{}),void 0!==r?{size:r}:{}),void 0!==s?{point:s}:{}),void 0!==o?{interpolate:o}:{}),void 0!==i?{opacity:i}:{}),void 0!==a?{thickness:a}:{}),void 0!==l?l:{})}const In=["nominal","ordinal","quantitative","temporal"];const Zn=["linear","pow","sqrt","symlog","log","time","utc","ordinal","band","point","bin-ordinal","quantile","quantize","threshold"];const Wn=["count","valid","missing","distinct","sum","mean","average","variance","variancep","stdev","stdevp","stderr","median","q1","q3","ci0","ci1","min","max","argmin","argmax","product"];const Jn=["x","y","x2","y2","xError","yError","xError2","yError2","longitude","latitude","longitude2","latitude2","color","opacity","fillOpacity","strokeOpacity","shape","size","strokeWidth","text","tooltip","href","detail","key","order"];const Vn=["year","yearquarter","yearquartermonth","yearmonth","yearmonthdate","yearmonthdatehours","yearmonthdatehoursminutes","yearmonthdatehoursminutesseconds","quarter","quartermonth","month","monthdate","date","day","hours","hoursminutes","hoursminutesseconds","minutes","minutesseconds","seconds","secondsmilliseconds","milliseconds"];function Kn(t){if(Vn.indexOf(t)<0)throw new Error(`invalid time unit '${t}', available are ${Vn.join(", ")}`);return t}function Xn(t){if(fr("bin",t,["string","number","boolean","undefined"]),"string"==typeof t&&"binned"!=t)throw new Error("bin should have type of \"boolean | number | 'binned'\"");return"boolean"==typeof t||"string"==typeof t?t:{base:t,maxbins:t}}const Gn=["calculate","as"];function Yn(t){for(const e in t)if(Gn.indexOf(e)<0)throw new Error(`unknown calculate property '${e}', available are ${Gn.join(", ")}`);return t}const Qn=["filter"];function tr(t){for(const e in t)if(Qn.indexOf(e)<0)throw new Error(`unknown filter property '${e}', available are ${Qn.join(", ")}`);return t}const er=["type","aggregate","legend","title","labels","time_unit","timeUnit","bin","zero","domain","range","scale","value","override_value","scheme","reverse","vega"];function nr(t){const e=[];for(const n in t)if(er.indexOf(n)<0){if(Jn.indexOf(n)<0)throw new Error(`unknown encoding property '${n}', available are ${Jn.join(", ")}, ${er.join(", ")}`);e.push(n)}if(0==e.length)throw new Error(`encoding channel not specified, please specify one of ${Jn.join(", ")}`);if(e.length>1)throw new Error(`only one channel allowed in the same encoding, leave only one of ${e.join(", ")}`);t.type&&function(t){if(In.indexOf(t)<0)throw new Error(`invalid field type '${t}', available are ${In.join(", ")}`)}(t.type),t.aggregate&&function(t){if(Wn.indexOf(t)<0)throw new Error(`invalid aggregate '${t}', available are ${Wn.join(", ")}`)}(t.aggregate),fr("legend",t.legend,["string","boolean","undefined"]),fr("title",t.title,["string","boolean","undefined"]),fr("labels",t.labels,["boolean","undefined"]),t.time_unit&&Kn(t.time_unit),t.timeUnit&&Kn(t.timeUnit),t.bin&&Xn(t.bin),fr("zero",t.zero,["boolean","undefined"]),t.scale&&function(t){if(Zn.indexOf(t)<0)throw new Error(`invalid scale type '${t}', available are ${Zn.join(", ")}`)}(t.scale),t.domain&&t.domain.map((t=>(fr("scale domain",t,["number","string","boolean"]),t))),t.range&&function(t){"string"==typeof t?fr("scale range",t,["string"]):t.map((t=>(fr("scale domain",t,["number","string"]),t)))}(t.range),fr("scheme",t.scheme,["string","undefined"]),fr("reverse",t.reverse,["boolean","undefined"]),fr("vega",t.vega,["object","undefined"]);const{type:n,title:r,labels:s,aggregate:o,legend:i,timeUnit:a,time_unit:l,bin:c,zero:u,domain:d,range:f,scale:h,value:p,scheme:g,reverse:m,vega:w,override_value:b}=t,$=Jn.find((e=>e in t));if(!$)throw new Error(`Channel not found in ${JSON.stringify(t)}!`);const v=t[$],y=Object.assign(Object.assign(Object.assign({},void 0!==w&&"axis"in w?w.axis:{}),r&&"string"==typeof r?{title:r}:r?{}:{title:null}),void 0!==s?{labels:s}:{}),_=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},void 0!==w&&"scale"in w?w.scale:{}),void 0!==h?{type:h}:{}),void 0!==d?{nice:!1}:{}),void 0!==u?{zero:u}:{}),void 0!==d?{domain:d}:{}),void 0!==f?{range:f}:{}),void 0!==g?{scheme:g}:{}),void 0!==m?{reverse:m}:{});let k,x=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},void 0!==w?w:{}),""!==v?{field:v}:{}),{type:n||"quantitative"}),void 0!==o?{aggregate:o}:{}),void 0!==i?{legend:i}:{legend:!1}),void 0!==a?{timeUnit:a}:{}),void 0!==l?{timeUnit:l}:{}),Object.keys(y).length>0?{axis:y}:{}),Object.keys(_).length>0?{scale:_}:{}),void 0!==c?{bin:Xn(c)}:{});if(p){const t=function(t,e,n){const r=t=>{if(void 0===t)throw new Error("encoding value shouldn't be undefined");return fr("encoding value",t,["number","string","boolean"]),t};if(Array.isArray(t)){if("condition"in n)throw new Error("Conditional value can't be used with condition!");if(2==t.length){const[e,s]=t;return[Object.assign(Object.assign({},n),{condition:{test:e,value:r(s)}}),void 0]}if(3==t.length){const[e,s,o]=t;return[Object.assign(Object.assign({},n),{value:r(o),condition:{test:e,value:r(s)}}),void 0]}throw new Error("encoding value should be a simple value or array with 2 ['datum.value > 0', 'green'] or 3 elements ['datum.value > 0', 1, -1]")}if(rr.indexOf(e)>=0){if(""!=n.field&&void 0!==n.field&&null!==n.field)throw new Error(`value on ${rr.join(", ")} channels cannot be used with 'field'`);const e=[{explicit_value:r(t)}];return[Object.assign(Object.assign({},n),{field:"explicit_value"}),e]}return[Object.assign(Object.assign({},n),{value:r(t)}),void 0]}(p,$,x);x=t[0],k=t[1]}return[$,x,k]}const rr=["x","y"];const sr=["concat"];function or(t){for(const e in t)if(sr.indexOf(e)<0)throw new Error(`unknown concat property '${e}', available are ${sr.join(", ")}`);return t}function ir(t){const e=[];let n,r={},s=[],o=[],i={};const a=[],l=[];for(const c of t)if("string"==typeof c)e.push(Dn(c));else if("mark"in c)e.push(Hn(c));else if(Array.isArray(c))o=[...o,ar(c)];else if("calculate"in c)s.push(Yn(c));else if("filter"in c)s.push(tr(c));else if("facet"in c||"row"in c||"column"in c)a.push(c);else if("concat"in c)l.push(or(c));else if("height"in c||"width"in c||"config"in c)i=Object.assign(Object.assign({},i),Bn(c));else if(Jn.some((t=>t in c))){const[t,e,n]=nr(c);if(t in e)throw new Error(`Can't redefine channel ${t}!`);if(void 0!==n)throw new Error(`Explicit value for '${t}' allowed only inside of a layer`);r=Object.assign(Object.assign({},r),{[t]:e})}else{if(!("vega"in c))throw new Error(`unknown plot part ${JSON.stringify(c)}`);n=c.vega}if(e.length>1)throw new Error(`Multiple marks found ${e.join(", ")}`);const c=Object.assign(Object.assign(Object.assign({},s.length>0?{transform:s}:{}),i),n||{});function u(){return Object.assign(Object.assign(Object.assign({},e.length>0?{mark:e[0]}:{}),Object.keys(r).length>0?{encoding:r}:{}),o.length>0?{layer:o}:{})}if(a.length>0){if(l.length>0)throw new Error("concat can't be used with facet");return function(t,e,n){let r;for(const e of t)"facet"in e&&(r=e);if(r){if(t.length>1)throw new Error("Can't other facets with 'facet' keyword");return Object.assign(Object.assign(Object.assign({facet:{field:r.facet,type:r.type||"ordinal",header:{title:null}}},void 0!==r.columns?{columns:r.columns}:{}),{spec:e}),n)}{if(t.filter((t=>"row"in t)).length>1)throw new Error("Facet can't have more than one row");if(t.filter((t=>"column"in t)).length>1)throw new Error("Facet can't have more than one column");let r,s;for(const e of t)"row"in e&&(r=e),"column"in e&&(s=e);return Object.assign({facet:Object.assign(Object.assign({},r?{row:{field:r.row,type:r.type||"ordinal",header:{title:null}}}:{}),s?{column:{field:s.column,type:s.type||"ordinal",header:{title:null}}}:{}),spec:e},n)}}(a,u(),c)}if(l.length>0){if(l.length>1)throw new Error("there could be only one concat");if(a.length>0)throw new Error("concat can't be used with facet");if(e.length>0)throw new Error("top level mark can't be used with concat");if(Object.keys(r).length>0)throw new Error("top level encoding can't be used with concat");if(0==o.length)throw new Error("concat requires at least one layer");return Object.assign({["vertical"==l[0].concat?"vconcat":"hconcat"]:o},c)}return Object.assign(Object.assign({},u()),c)}function ar(t){const e=[],n=[];let r,s,o={},i={};for(const a of t)if("string"==typeof a)e.push(Dn(a));else if("mark"in a)e.push(Hn(a));else if("calculate"in a)n.push(Yn(a));else if("filter"in a)n.push(tr(a));else if("height"in a||"width"in a)i=Object.assign(Object.assign({},i),Bn(a));else if(Jn.some((t=>t in a))){const[t,e,n]=nr(a);if(t in e)throw new Error(`Can't redefine channel ${t}!`);s=n,o=Object.assign(Object.assign({},o),{[t]:e})}else{if(!("vega"in a))throw new Error(`unknown plot layer part ${JSON.stringify(a)}`);r=a.vega}if(e.length>1)throw new Error(`Multiple marks found ${e.join(", ")}`);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n.length>0?{transform:n}:{}),e.length>0?{mark:e[0]}:{}),Object.keys(o).length>0?{encoding:o}:{}),i),s?{data:{values:s}}:{}),r||{})}function lr(t,e,n=!1){const r=n?ur:dr;if(t instanceof Array)return 0==t.length?[]:Array.isArray(t[0])?function(t,e){return t.map((t=>{const n={};for(let r=0;r<t.length;r++){if(!(r<e.length))throw new Error("there are more values in row than columns");n[e[r]]=t[r]}return n}))}(t,e||cr).map(r):t.map(r);{if(!(t instanceof Object))throw new Error("Arrays data expected to be an Object");const e=Object.keys(t);if(0==e.length)throw new Error("Empty arrays data!");const n=e[0],s=t[n].length;for(const r of e)if(t[r].length!=s)throw new Error(`Arrays data has arrays of different length ${r} - ${t[r].length} and ${n} - ${s}`);const o=[];for(let n=0;n<s;n++){const r={};for(const s of e)r[s]=t[s][n];o.push(r)}return o.map(r)}}const cr="abcdefghijklmnopqrstuvwxyz".split("");function ur(t){const e={};for(let n in t){const r=t[n];e[n]=null!==r?r:void 0}return e}function dr(t){const e={};for(let n in t){const r=t[n];null!=r&&(e[n]=r)}return e}function fr(t,e,n){if(n.indexOf(typeof e)<0)throw new Error(`invalid type for '${t}' allowed types ${n.join(", ")}`)}function hr(t){t.finalize()}async function pr({chart:e,data:n,vega_options:r,is_narrow:s,suggested_width_px:o,vega_view:i,container_el:a}){if(await Nt(["/vendor/vega/vega-5.9.1.js","/vendor/vega/vega-lite-4.0.2.js","/vendor/vega/vega-embed-6.2.1.js"],"serial"),i&&hr(i),!a)return;function l(e){return void 0!==o&&s?function(t,e,n){return t.width&&t.width<e||(t=Object.assign(Object.assign({},t),{width:e})),t.height&&t.height<n||(t=Object.assign(Object.assign({},t),{height:n})),t}(e,o,t.height_in_narrow_width_mode):e}let c=l("vega_spec"in e?e.vega_spec:ir(e));n&&(c=Object.assign(Object.assign({},c),{data:{values:lr(n)}})),r=r||{};return(await window.vegaEmbed(a,Object.assign(Object.assign({},function({suggested_width_px:t}){return{autosize:{type:"fit",contains:"padding"},width:t}}({suggested_width_px:o})),c),Object.assign(Object.assign({},{}),r))).view}function gr(t){let e,n;return e=new qt({props:{error:t[2].error}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.error=t[2].error),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function mr(t){let e,r;return e=new Pt({}),{c(){tt(e.$$.fragment)},m(t,n){et(e,t,n),r=!0},p:n,i(t){r||(W(e.$$.fragment,t),r=!0)},o(t){J(e.$$.fragment,t),r=!1},d(t){nt(e,t)}}}function wr(t){let e,n,r,s,o,i,a,l,h,p,m;const b=[mr,gr],v=[];function y(t,e){return"empty"==t[2].state?0:"error"==t[2].state?1:-1}return~(n=y(t))&&(r=v[n]=b[n](t)),{c(){e=f("div"),r&&r.c(),s=g(),o=f("div"),i=f("div"),l=g(),h=f("div"),_(i,"padding-right","0"),$(i,"class",a="success"==t[2].state?"":"invisible"),_(h,"height","0"),_(h,"width","100%"),R((()=>t[9].call(h))),$(e,"class","VegaChart")},m(r,a){u(r,e,a),~n&&v[n].m(e,null),c(e,s),c(e,o),c(o,i),t[8](i),c(e,l),c(e,h),p=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=f("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=O();let s;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=w(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{s=w(n.contentWindow,"resize",e)}),c(t,n),()=>{(r||s&&n.contentWindow)&&s(),d(n)}}(h,t[9].bind(h)),m=!0},p(t,[o]){let l=n;n=y(t),n===l?~n&&v[n].p(t,o):(r&&(I(),J(v[l],1,1,(()=>{v[l]=null})),Z()),~n?(r=v[n],r?r.p(t,o):(r=v[n]=b[n](t),r.c()),W(r,1),r.m(e,s)):r=null),(!m||4&o&&a!==(a="success"==t[2].state?"":"invisible"))&&$(i,"class",a)},i(t){m||(W(r),m=!0)},o(t){J(r),m=!1},d(r){r&&d(e),~n&&v[n].d(),t[8](null),p()}}}function br(t,e,n){let{chart:r}=e,{data:s}=e,{vega_options:o}=e,{is_narrow:i=!1}=e,a={state:"empty"};const l=new Rt(void 0);let c,u,d;const f=(t=>{t!=d&&n(7,d=t)}).debounce(100,!0);var h;return h=()=>{l.get()&&hr(l.get())},S().$$.on_destroy.push(h),t.$$set=t=>{"chart"in t&&n(3,r=t.chart),"data"in t&&n(4,s=t.data),"vega_options"in t&&n(5,o=t.vega_options),"is_narrow"in t&&n(6,i=t.is_narrow)},t.$$.update=()=>{2&t.$$.dirty&&f(u),249&t.$$.dirty&&null!=d&&null!=c&&pr({chart:r,data:s,vega_options:o,is_narrow:i,suggested_width_px:d,vega_view:l.get(),container_el:c}).then((t=>{l.set(t),n(2,a={state:"success"})})).catch((t=>{const e=ensure_error(t,"Unknown error while processing vega lite");n(2,a={state:"error",error:e})}))},[c,u,a,r,s,o,i,d,function(t){C[t?"unshift":"push"]((()=>{c=t,n(0,c)}))},function(){u=this.clientWidth,n(1,u)}]}class $r extends ot{constructor(t){super(),st(this,t,br,wr,a,{chart:3,data:4,vega_options:5,is_narrow:6})}}function vr(t){let e,n;return e=new qt({props:{error:t[4]}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.error=t[4]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function yr(t){let e,n;return e=new $r({props:{chart:t[1].chart,data:t[3],vega_options:t[1].vega_options,is_narrow:t[0]}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.chart=t[1].chart),2&n&&(r.data=t[3]),2&n&&(r.vega_options=t[1].vega_options),1&n&&(r.is_narrow=t[0]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function _r(t){let e,r;return e=new Pt({}),{c(){tt(e.$$.fragment)},m(t,n){et(e,t,n),r=!0},p:n,i(t){r||(W(e.$$.fragment,t),r=!0)},o(t){J(e.$$.fragment,t),r=!1},d(t){nt(e,t)}}}function kr(t){let e,n,r,s,o,i={ctx:t,current:null,token:null,hasCatch:!0,pending:_r,then:yr,catch:vr,value:3,error:4,blocks:[,,,]};return V(n=It(t[1].data),i),s=new fn({}),{c(){e=f("div"),i.block.c(),r=g(),tt(s.$$.fragment),$(e,"class","ChartBlockContent relative")},m(t,n){u(t,e,n),i.block.m(e,i.anchor=null),i.mount=()=>e,i.anchor=r,c(e,r),et(s,e,null),o=!0},p(e,[r]){t=e,i.ctx=t,2&r&&n!==(n=It(t[1].data))&&V(n,i)||K(i,t,r)},i(t){o||(W(i.block),W(s.$$.fragment,t),o=!0)},o(t){for(let t=0;t<3;t+=1){J(i.blocks[t])}J(s.$$.fragment,t),o=!1},d(t){t&&d(e),i.block.d(),i.token=null,i=null,nt(s)}}}const xr={match_and_normalize:t=>{if(is_object(t)&&"data"in t&&"chart"in t)return t}};function jr(t,e,n){let{block:r}=e,{is_narrow:s}=e;discard(s);let o=r;return t.$$set=t=>{"block"in t&&n(2,r=t.block),"is_narrow"in t&&n(0,s=t.is_narrow)},t.$$.update=()=>{6&t.$$.dirty&&o.hash!=r.hash&&n(1,o=r)},[s,o,r]}var Or=Object.freeze({__proto__:null,default:class extends ot{constructor(t){super(),st(this,t,jr,kr,a,{block:2,is_narrow:0})}},definition:xr});function Er(t){switch(t){case"left":return"text-left";case"center":return"text-center";case"right":return"text-right"}}function zr(t,e,n){const r=t.slice();return r[4]=e[n],r[6]=n,r}function Sr(t){let e;return{c(){e=p(t[1])},m(t,n){u(t,e,n)},p(t,n){2&n&&v(e,t[1])},d(t){t&&d(e)}}}function Ar(t){let e,n=[],r=new Map,s=t[2];const o=t=>t[6];for(let e=0;e<s.length;e+=1){let i=zr(t,s,e),a=o(i);r.set(a,n[e]=qr(a,i))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=m()},m(t,r){for(let e=0;e<n.length;e+=1)n[e].m(t,r);u(t,e,r)},p(t,i){4&i&&(s=t[2],n=Y(n,i,o,1,t,s,r,e.parentNode,X,qr,e,zr))},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&d(e)}}}function Cr(t){let e;return{c(){e=f("br")},m(t,n){u(t,e,n)},d(t){t&&d(e)}}}function qr(t,e){let n,r,s,o=e[4]+"",i=e[6]<e[2].length-1&&Cr();return{key:t,first:null,c(){n=p(o),r=g(),i&&i.c(),s=m(),this.first=n},m(t,e){u(t,n,e),u(t,r,e),i&&i.m(t,e),u(t,s,e)},p(t,r){e=t,4&r&&o!==(o=e[4]+"")&&v(n,o),e[6]<e[2].length-1?i||(i=Cr(),i.c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null)},d(t){t&&d(n),t&&d(r),i&&i.d(t),t&&d(s)}}}function Mr(t){let e,r;function s(t,e){return void 0!==t[2]?Ar:void 0!==t[1]?Sr:void 0}let o=s(t),i=o&&o(t);return{c(){e=f("div"),i&&i.c(),$(e,"class",r=t[3]+" "+(t[0].wrap&&"text-wrap"))},m(t,n){u(t,e,n),i&&i.m(e,null)},p(t,[n]){o===(o=s(t))&&i?i.p(t,n):(i&&i.d(1),i=o&&o(t),i&&(i.c(),i.m(e,null))),1&n&&r!==(r=t[3]+" "+(t[0].wrap&&"text-wrap"))&&$(e,"class",r)},i:n,o:n,d(t){t&&d(e),i&&i.d()}}}function Tr(t,e,n){let r,{options:s}=e,{value:o}=e;const i=Er(s.align||"left")+(s.small?" text-xs":"");return t.$$set=t=>{"options"in t&&n(0,s=t.options),"value"in t&&n(1,o=t.value)},t.$$.update=()=>{3&t.$$.dirty&&n(2,r=void 0!==o&&s.break?o.split(s.break):void 0)},[s,o,r,i]}var Pr=Object.freeze({__proto__:null,default:class extends ot{constructor(t){super(),st(this,t,Tr,Mr,a,{options:0,value:1})}},compatibleTypes:["number","boolean","string"],align:function(t,e){return t.align||"left"}});function Rr(t){let e,r,s=(t[0]?t[1]:t[2])+"";return{c(){e=f("div"),r=p(s),$(e,"class","text-center")},m(t,n){u(t,e,n),c(e,r)},p(t,[e]){1&e&&s!==(s=(t[0]?t[1]:t[2])+"")&&v(r,s)},i:n,o:n,d(t){t&&d(e)}}}function Lr(t,e,n){let{options:r}=e,{value:s}=e;const o=r.true||"✓",i=r.false||"✗";return t.$$set=t=>{"options"in t&&n(3,r=t.options),"value"in t&&n(0,s=t.value)},[s,o,i,r]}var Br=Object.freeze({__proto__:null,default:class extends ot{constructor(t){super(),st(this,t,Lr,Rr,a,{options:3,value:0})}},compatibleTypes:["boolean"]});function Nr(t){let e,r;return{c(){e=f("div"),r=p(t[0]),$(e,"class",t[1])},m(t,n){u(t,e,n),c(e,r)},p(t,[e]){1&e&&v(r,t[0])},i:n,o:n,d(t){t&&d(e)}}}function Ur(t,e,n){let r,{options:s}=e,{value:o}=e;const i="round"in s?s.round:2,a=Er(s.align||"right")+(s.small?" text-xs":"");return t.$$set=t=>{"options"in t&&n(2,s=t.options),"value"in t&&n(3,o=t.value)},t.$$.update=()=>{8&t.$$.dirty&&n(0,r=void 0===o?"":""+(void 0!==i?o.round(i):o))},[r,a,s,o]}var Dr=Object.freeze({__proto__:null,default:class extends ot{constructor(t){super(),st(this,t,Ur,Nr,a,{options:2,value:3})}},compatibleTypes:["number"],align:function(t,e){return t.align||"right"}});function Fr(t,e,n){const r=t.slice();return r[7]=e[n],r}function Hr(t,e,n){const r=t.slice();return r[7]=e[n],r}function Ir(t,e,n){const r=t.slice();return r[7]=e[n],r}function Zr(t){let e,n,r;return{c(){e=h("svg"),n=h("title"),r=p(t[4]),$(e,"class","plot-line-format text-center")},m(t,s){u(t,e,s),c(e,n),c(n,r)},p(t,e){16&e&&v(r,t[4])},d(t){t&&d(e)}}}function Wr(t){let e;function n(t,e){return t[3]<=0?Kr:t[2]>=0?Vr:Jr}let r=n(t),s=r(t);return{c(){s.c(),e=m()},m(t,n){s.m(t,n),u(t,e,n)},p(t,o){r===(r=n(t))&&s?s.p(t,o):(s.d(1),s=r(t),s&&(s.c(),s.m(e.parentNode,e)))},d(t){s.d(t),t&&d(e)}}}function Jr(t){let e,n,r,s,o=[],i=new Map,a=t[1].nticks;const l=t=>t[7];for(let e=0;e<a.length;e+=1){let n=Fr(t,a,e),r=l(n);i.set(r,o[e]=Yr(r,n))}function f(t,e){return t[0]>0?ts:Qr}let g=f(t),m=g(t);return{c(){e=h("svg"),n=h("title"),r=p(t[4]);for(let t=0;t<o.length;t+=1)o[t].c();s=h("line"),m.c(),$(s,"x1","50%"),$(s,"y1","5%"),$(s,"x2","50%"),$(s,"y2","95%"),$(s,"stroke",is),$(s,"stroke-width","1"),$(e,"class","plot-line-format text-center")},m(t,i){u(t,e,i),c(e,n),c(n,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);c(e,s),m.m(e,null)},p(t,n){16&n&&v(r,t[4]),2&n&&(a=t[1].nticks,o=Y(o,n,l,1,t,a,i,e,X,Yr,s,Fr)),g===(g=f(t))&&m?m.p(t,n):(m.d(1),m=g(t),m&&(m.c(),m.m(e,null)))},d(t){t&&d(e);for(let t=0;t<o.length;t+=1)o[t].d();m.d()}}}function Vr(t){let e,n,r,s,o,i=[],a=new Map,l=t[1].nticks;const f=t=>t[7];for(let e=0;e<l.length;e+=1){let n=Hr(t,l,e),r=f(n);a.set(r,i[e]=es(r,n))}return{c(){e=h("svg"),n=h("title"),r=p(t[4]);for(let t=0;t<i.length;t+=1)i[t].c();s=h("rect"),$(s,"x","0%"),$(s,"y","25%"),$(s,"width",o=100*t[0]+"%"),$(s,"height","50%"),$(s,"fill",os),$(e,"class","plot-line-format text-center")},m(t,o){u(t,e,o),c(e,n),c(n,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);c(e,s)},p(t,n){16&n&&v(r,t[4]),2&n&&(l=t[1].nticks,i=Y(i,n,f,1,t,l,a,e,X,es,s,Hr)),1&n&&o!==(o=100*t[0]+"%")&&$(s,"width",o)},d(t){t&&d(e);for(let t=0;t<i.length;t+=1)i[t].d()}}}function Kr(t){let e,n,r,s,o,i,a=[],l=new Map,f=t[1].nticks;const g=t=>t[7];for(let e=0;e<f.length;e+=1){let n=Ir(t,f,e),r=g(n);l.set(r,a[e]=ns(r,n))}return{c(){e=h("svg"),n=h("title"),r=p(t[4]);for(let t=0;t<a.length;t+=1)a[t].c();s=h("rect"),$(s,"x",o=100- -100*t[0]+"%"),$(s,"y","25%"),$(s,"width",i=-100*t[0]+"%"),$(s,"height","50%"),$(s,"fill",os),$(e,"class","plot-line-format text-center")},m(t,o){u(t,e,o),c(e,n),c(n,r);for(let t=0;t<a.length;t+=1)a[t].m(e,null);c(e,s)},p(t,n){16&n&&v(r,t[4]),2&n&&(f=t[1].nticks,a=Y(a,n,g,1,t,f,l,e,X,ns,s,Ir)),1&n&&o!==(o=100- -100*t[0]+"%")&&$(s,"x",o),1&n&&i!==(i=-100*t[0]+"%")&&$(s,"width",i)},d(t){t&&d(e);for(let t=0;t<a.length;t+=1)a[t].d()}}}function Xr(t){let e,n,r;return{c(){e=h("line"),$(e,"x1",n=50- -50*t[7]+"%"),$(e,"y1","5%"),$(e,"x2",r=50- -50*t[7]+"%"),$(e,"y2","25%"),$(e,"stroke",is),$(e,"stroke-width","1")},m(t,n){u(t,e,n)},p(t,s){2&s&&n!==(n=50- -50*t[7]+"%")&&$(e,"x1",n),2&s&&r!==(r=50- -50*t[7]+"%")&&$(e,"x2",r)},d(t){t&&d(e)}}}function Gr(t){let e,n,r;return{c(){e=h("line"),$(e,"x1",n=50+50*t[7]+"%"),$(e,"y1","5%"),$(e,"x2",r=50+50*t[7]+"%"),$(e,"y2","25%"),$(e,"stroke",is),$(e,"stroke-width","1")},m(t,n){u(t,e,n)},p(t,s){2&s&&n!==(n=50+50*t[7]+"%")&&$(e,"x1",n),2&s&&r!==(r=50+50*t[7]+"%")&&$(e,"x2",r)},d(t){t&&d(e)}}}function Yr(t,e){let n,r;function s(t,e){return t[7]>0?Gr:Xr}let o=s(e),i=o(e);return{key:t,first:null,c(){n=m(),i.c(),r=m(),this.first=n},m(t,e){u(t,n,e),i.m(t,e),u(t,r,e)},p(t,n){o===(o=s(e=t))&&i?i.p(e,n):(i.d(1),i=o(e),i&&(i.c(),i.m(r.parentNode,r)))},d(t){t&&d(n),i.d(t),t&&d(r)}}}function Qr(t){let e,n,r;return{c(){e=h("rect"),$(e,"x",n=50- -50*t[0]+"%"),$(e,"y","25%"),$(e,"width",r=-50*t[0]+"%"),$(e,"height","50%"),$(e,"fill",os)},m(t,n){u(t,e,n)},p(t,s){1&s&&n!==(n=50- -50*t[0]+"%")&&$(e,"x",n),1&s&&r!==(r=-50*t[0]+"%")&&$(e,"width",r)},d(t){t&&d(e)}}}function ts(t){let e,n;return{c(){e=h("rect"),$(e,"x","50%"),$(e,"y","25%"),$(e,"width",n=50*t[0]+"%"),$(e,"height","50%"),$(e,"fill",os)},m(t,n){u(t,e,n)},p(t,r){1&r&&n!==(n=50*t[0]+"%")&&$(e,"width",n)},d(t){t&&d(e)}}}function es(t,e){let n,r,s;return{key:t,first:null,c(){n=h("line"),$(n,"x1",r=100*e[7]+"%"),$(n,"y1","5%"),$(n,"x2",s=100*e[7]+"%"),$(n,"y2","25%"),$(n,"stroke",is),$(n,"stroke-width","1"),this.first=n},m(t,e){u(t,n,e)},p(t,o){e=t,2&o&&r!==(r=100*e[7]+"%")&&$(n,"x1",r),2&o&&s!==(s=100*e[7]+"%")&&$(n,"x2",s)},d(t){t&&d(n)}}}function ns(t,e){let n,r,s;return{key:t,first:null,c(){n=h("line"),$(n,"x1",r=100- -100*e[7]+"%"),$(n,"y1","5%"),$(n,"x2",s=100- -100*e[7]+"%"),$(n,"y2","25%"),$(n,"stroke",is),$(n,"stroke-width","1"),this.first=n},m(t,e){u(t,n,e)},p(t,o){e=t,2&o&&r!==(r=100- -100*e[7]+"%")&&$(n,"x1",r),2&o&&s!==(s=100- -100*e[7]+"%")&&$(n,"x2",s)},d(t){t&&d(n)}}}function rs(t){let e;function r(t,e){return t[1]&&null!=t[0]?Wr:Zr}let s=r(t),o=s(t);return{c(){o.c(),e=m()},m(t,n){o.m(t,n),u(t,e,n)},p(t,[n]){s===(s=r(t))&&o?o.p(t,n):(o.d(1),o=s(t),o&&(o.c(),o.m(e.parentNode,e)))},i:n,o:n,d(t){o.d(t),t&&d(e)}}}const ss=(t,e,n,r)=>{const s=[],o=r.scale||"linear";if(r.log_unit){"log"!=r.scale&&s.push(`column ${t} 'line.log_unit' could be used with log scale only`);const o=is_number(r.log_unit)?r.log_unit:1;function i(t){return t<0?t:(t*=o)<1?1:t}n=n.map((t=>void 0===t?void 0:i(t))),e=[i(e[0]),i(e[1])]}let a,l,c=[];if("log"==o){if(e[0]<=0)return s.push(`column ${t}, 'line.domain' can't be negative for log scale`),{column:n.map((t=>{})),warnings:s,stats:void 0};let o=Math.max(...e.map((t=>Math.log(Math.abs(t)))));c=n.map((e=>void 0===e?void 0:e>0?Math.log(e)/o:void s.push(`column ${t}, values can't be negative for log scale`))),a=(r.ticks||[]).filter_map((e=>e>0?Math.log(e)/o:void s.push(`column ${t}, ticks can't be negative for log scale`))),l=[Math.log(e[0])/o,Math.log(e[1])/o]}else{if("linear"!=o)throw new Error(`unknown scale ${o}`);{let t=Math.max(...e.map((t=>Math.abs(t))));0==t&&(t=1),c=n.map((e=>void 0===e?void 0:e/t)),a=(r.ticks||[]).map((e=>e/t)),l=[e[0]/t,e[1]/t]}}return{column:c,warnings:s,stats:{domain:e,ndomain:l,nticks:a}}},os="#111827",is="#111827";function as(t,e,n){let r,s,o,{options:i}=e,{value:a}=e,{converted:l}=e,{stats:c}=e;return t.$$set=t=>{"options"in t&&n(5,i=t.options),"value"in t&&n(6,a=t.value),"converted"in t&&n(0,l=t.converted),"stats"in t&&n(1,c=t.stats)},t.$$.update=()=>{2&t.$$.dirty&&n(2,[r,s]=c?c.ndomain:[0,0],r,(n(3,s),n(1,c))),99&t.$$.dirty&&n(4,o=[void 0!==l?`value: ${a}`:"missing",((null==c?void 0:c.nticks)||[]).length>0?`, ticks: [${(i.ticks||[]).join(", ")}]`:"",c?`domain: [${c.domain[0]}, ${c.domain[1]}]`:"",`scale: ${i.scale||"linear"}`].join(", "))},[l,c,r,s,o,i,a]}var ls=Object.freeze({__proto__:null,default:class extends ot{constructor(t){super(),st(this,t,as,rs,a,{options:5,value:6,converted:0,stats:1})}},compatibleTypes:["number"],extraValues:({ticks:t})=>t||[],align:function(t,e){if(t.align)return t.align;if(e){const[t,n]=e.ndomain;return n<=0?"right":t>=0?"left":"center"}return"center"},convertColumn:ss});function cs(t){let e,r;return{c(){e=f("div"),r=p(t[0]),$(e,"class",t[1])},m(t,n){u(t,e,n),c(e,r)},p(t,[e]){1&e&&v(r,t[0])},i:n,o:n,d(t){t&&d(e)}}}function us(t,e,n){let r,{options:s}=e,{value:o}=e;const i=Er(s.align||"left")+(s.small?" text-xs":"");return t.$$set=t=>{"options"in t&&n(2,s=t.options),"value"in t&&n(3,o=t.value)},t.$$.update=()=>{8&t.$$.dirty&&n(0,r=null==o?"":""+o)},[r,i,s,o]}var ds=Object.freeze({__proto__:null,default:class extends ot{constructor(t){super(),st(this,t,us,cs,a,{options:2,value:3})}},compatibleTypes:[],align:function(t,e){return t.align||"left"}});const fs=t=>`<svg class="${t}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg>`;function hs(t){let e,n=`<svg class="${"h-5 w-5 p-0.5 text-gray-900"}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>`;return{c(){e=f("a"),$(e,"class","inline-block"),$(e,"target","_blank"),$(e,"href",t[0])},m(t,r){u(t,e,r),e.innerHTML=n},p(t,n){1&n&&$(e,"href",t[0])},d(t){t&&d(e)}}}function ps(t){let e,r=t[0]&&hs(t);return{c(){e=f("div"),r&&r.c(),$(e,"class","text-center")},m(t,n){u(t,e,n),r&&r.m(e,null)},p(t,[n]){t[0]?r?r.p(t,n):(r=hs(t),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i:n,o:n,d(t){t&&d(e),r&&r.d()}}}function gs(t,e,n){let{options:r}=e,{value:s}=e;return discard(r),t.$$set=t=>{"options"in t&&n(1,r=t.options),"value"in t&&n(0,s=t.value)},[s,r]}var ms=Object.freeze({__proto__:null,default:class extends ot{constructor(t){super(),st(this,t,gs,ps,a,{options:1,value:0})}},compatibleTypes:["string"]});function ws(t){let e,n,r;return{c(){e=f("img"),$(e,"class",n=t[1][1]+" block"),e.src!==(r=t[0])&&$(e,"src",r)},m(t,n){u(t,e,n)},p(t,s){2&s&&n!==(n=t[1][1]+" block")&&$(e,"class",n),1&s&&e.src!==(r=t[0])&&$(e,"src",r)},d(t){t&&d(e)}}}function bs(t){let e,r,s=t[0]&&ws(t);return{c(){e=f("div"),s&&s.c(),$(e,"class",r=t[1][0]+" flex justify-center p-0.5")},m(t,n){u(t,e,n),s&&s.m(e,null)},p(t,[n]){t[0]?s?s.p(t,n):(s=ws(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null),2&n&&r!==(r=t[1][0]+" flex justify-center p-0.5")&&$(e,"class",r)},i:n,o:n,d(t){t&&d(e),s&&s.d()}}}function $s(t,e,n){let r,{options:s}=e,{value:o}=e;return t.$$set=t=>{"options"in t&&n(2,s=t.options),"value"in t&&n(0,o=t.value)},t.$$.update=()=>{4&t.$$.dirty&&n(1,r=s.small?["h-12","max-h-12"]:["h-32","max-h-32"])},[o,r,s]}const vs={string:Pr,boolean:Br,number:Dr,unknown:ds,line:ls,link:ms,image:Object.freeze({__proto__:null,default:class extends ot{constructor(t){super(),st(this,t,$s,bs,a,{options:2,value:0})}},compatibleTypes:["string"]})};function ys(t){return t in vs?{is_error:!1,value:vs[t]}:`no '${t}' format`.to_error()}const _s={string:function(t,e){return t.localeCompare(e)},number:function(t,e){return t-e},boolean:function(t,e){return t==e?0:t?1:-1},unknown:function(t,e){return(""+t).localeCompare(""+e)}};function ks(t,[e,n]){const r="desc"==n,s=ensure(t.find((({id:t})=>t==e))).type;if(!(s in _s))throw new Error(`no comparator for '${s}' type, please register one`);const o=_s[s];return r?function(t,n){const r=n[e],s=t[e];return void 0===r?void 0===s?0:-1:void 0===s?1:o(r,s)}:function(t,n){const r=t[e],s=n[e];return void 0===r?void 0===s?0:-1:void 0===s?1:o(r,s)}}function xs(t,e,n){if(n.length>3)throw new Error("sort not supported for more than 3 columns");const[r,s,o]=n;if(null==r&&assert(null==s),null==s&&assert(null==o),0==e.length||null==r)return e;let i,a=ks(t,r),l=s?ks(t,s):void 0,c=o?ks(t,o):void 0;i=c?function(t,e){let n=a(t,e);return 0!=n?n:(n=l(t,e),0!=n?n:c(t,e))}:l?function(t,e){let n=a(t,e);return 0!=n?n:l(t,e)}:a;const u=[...e];return u.sort(i),u}function js(t,e,n){const r=[...e];for(const t of r)t._weights={},t._nweights={};for(const e in n){const{type:n,min_max:s}=ensure(t.find((({id:t})=>t==e)));let[o,i]=r.partition((t=>void 0!==t[e]));if(0==o.length){for(const t of r)t._weights[e]=0,t._nweights[e]=0;continue}if("number"==n){const t=typeof r[0][e];if("number"!=t)throw new Error(`wrong type for '${e}' column, wsort expects number but found '${t}'`);for(const t of o)t._weights[e]=t[e]}else{if(!(n in _s))throw new Error(`no comparator for '${n}' type, please register one`);const t=_s[n];o.sort(((n,r)=>t(n[e],r[e])));let r,s=0;for(let t=0;t<o.length;t++){const n=o[t];n[e]==r?s+=1:r=n[e],n._weights[e]=t-s}}{let t,r;if(s){if("number"!=n)throw new Error("can't use min_max for non number type");t=s[0],r=s[1]}else{const n=o.map((t=>t._weights[e]));t=Math.min(...n),r=Math.max(...n)}const i=(r+t)/2;let a=(r-t)/2;assert(a>=0),a=0==a?1:a;for(const t of o){let n=(t._weights[e]-i)/a;t._nweights[e]=n}}let a=o.map((t=>t._nweights[e])).median();for(const t of i)t._nweights[e]=a}for(const t of r){let e=0;for(const r in n)e+=n[r]*t._nweights[r];t._w=e}return r.sort(((t,e)=>t._w-e._w)).rev(),r}test("sortTable",(()=>{const t=[{id:"name",type:"string"},{id:"age",type:"number"}],e=[{name:"Artanis",age:200},{name:"Sarah",age:30},{name:"Jim",age:30},{name:"Amon",age:void 0}];let n=n=>xs(t,e,n).map((({name:t})=>t));assert.equal(n([["name","asc"]]),["Amon","Artanis","Jim","Sarah"]),assert.equal(n([["age","asc"]])[0],"Amon"),assert.equal(n([["age","asc"],["name","asc"]]),["Amon","Jim","Sarah","Artanis"])})),test("wsortTable",(()=>{const t=(t,e,n)=>js(t,e,n).map((({id:t})=>t));{const e=[{id:"a",type:"number"},{id:"b",type:"number"}],n=[{id:"a",a:0,b:3},{id:"b",a:1,b:3},{id:"c",a:2,b:void 0},{id:"d",a:-2,b:200}];assert.equal(t(e,n,{a:1,b:-1}),["c","b","a","d"])}{const e=[{id:"a",type:"number"}],n=[{id:"a",a:0},{id:"b",a:1},{id:"c",a:void 0}];assert.equal(t(e,n,{a:1}),["b","c","a"])}{const t=js([{id:"a",type:"string"}],[{id:"a",a:"a"},{id:"b",a:"a"},{id:"c",a:"b"}],{a:1});assert.equal(t[0].id,"c"),assert.equal(t.map((t=>t._weights.a)),[1,0,0])}}));const Os=["<=","<","=","!=",">",">=","~"];function Es(t){return Os.includes(t)?t:"="}function zs({type:t},e){switch(t){case"string":return e;case"boolean":try{return["true","t","1"].includes(e.downcase())}catch(t){return}case"number":try{let t=parseFloat(e);return Number.isFinite(t)?t:void 0}catch(t){return}default:return e}}const Ss=["string","number","boolean","unknown"];function As(t){switch(typeof t){case"boolean":return"boolean";case"number":return"number";case"string":return"string";default:return"unknown"}}function Cs(t,e){const n=[],r=function(t,e,n){let r=[];return r=lr(e,null==t?void 0:t.map((({id:t})=>t)),!0),r.each(((t,e)=>{t._i=e,t._converted={}})),r}(t.columns,e);if(0==r.length)return n.push("table is empty"),{columns:[],rows:[],messages:_n(n)};let s=function(t,e,n){if(t)return t;const r=new Map,s=new Set;for(let t=0;t<e.length;t++){const o=e[t];for(const t in o){if("_i"==t||"_converted"==t)continue;let e=o[t];if(is_undefined(e))s.add(t);else{let s=typeof e;"object"==s?(n.push(`unknown type for column '${t}' - '${s}'`),r.set(t,"unknown")):r.has(t)?r.get(t)!=s&&(n.push(`unstable types for column '${t}', ${[r.get(t),s].sort().join(", ")}`),r.set(t,"unknown")):r.set(t,s)}}}for(const t of s)r.has(t)||r.set(t,"unknown");return Array.from(r,(([t,e])=>({id:t,type:e}))).sort_by((({id:t})=>t))}(t.columns,r,n);if(t.alter_columns){const e=t.alter_columns.map((({id:t})=>t));s=[...t.alter_columns,...s.filter((({id:t})=>!e.includes(t)))]}const o=s.length;s.length!=o&&n.push("not unique column ids");let i=function(t,e,n){let r=t.map((t=>t.clone()));for(let t=0;t<e.length;t++){const s=e[t];for(const t of r){const{id:e,type:r}=t;if("_i"==e)continue;let o=s[e];void 0!==o&&(typeof o!=r&&(void 0===r?t.type=As(o):"unknown"!=r&&Ss.includes(r)&&(n.push(`wrong type for column '${e}', specified as '${r}' but '${typeof o}' found`),t.type="unknown")))}}return r.map((t=>Object.assign(Object.assign({},t),{type:t.type||"unknown"})))}(s,r,n),a=function(t,e){const n=ys("unknown");if(n.is_error)throw"can't get 'unknown' formatter";let r=[];for(const s of t){const t=s.format||{type:s.type},o=ys(t.type);o.is_error?(e.push(o.message),r.push([n.value,t])):o.value.compatibleTypes.includes(s.type)?r.push([o.value,t]):(e.push(`column ${s.id} has wrong format, format ${s.format} is not compatible with '${s.type}' type`),r.push([n.value,t]))}return r}(i,n);const l=function(t,e,n,r){const s={};for(let o=0;o<t.length;o++){const{id:i,type:a,domain:l}=t[o],[c,u]=e[o];if("number"!=a){l&&r.push(`non number column '${i}' can't have domain`);continue}const d=(c.extraValues?c.extraValues(u):[]).skip_undefined(),f=n.filter_map((t=>t[i]));if(f.push(...d),0==f.length){l&&(s[i]=l);continue}let h=f[0],p=f[0];for(const t of f)t>p?p=t:t<h&&(h=t);const g=l||[h,p];h<g[0]&&(r.push(`column ${i} 'domain' min value is greather than actual min ${h}`),g[0]=h),p>g[1]&&(r.push(`column ${i} 'line.domain' max value is smaller than actual max ${p}`),g[1]=p),s[i]=g}return s}(i,a,r,n);a=function(t,e,n,r){return n.map(((n,s)=>{const{id:o,type:i}=t[s],[a,l]=n;if("number"==l.type&&void 0===l.round)if("number"==i){if(e.every((t=>{const e=t[o];return void 0===e||Number.isInteger(e)})))return[a,Object.assign(Object.assign({},l),{round:0})]}else r.push(`column ${o} is non number and can't use number formatter`);return n}))}(i,r,a,n);const c=qs(i,r),u=function(t,e,n,r,s){const o={};for(let i=0;i<t.length;i++){const[{id:a},[l,c]]=[t[i],n[i]];if(l.convertColumn){const t=r.map((t=>t[a])),n=e[a];if(n){const{column:e,warnings:i,stats:u}=l.convertColumn(a,n,t,c);o[a]=u,i.forEach((t=>s.push(t)));for(let t=0;t<r.length;t++)r[t]._converted[a]=e[t]}}}return o}(i,l,a,r,n);return{columns:i.map(((t,e)=>({id:t.id,type:t.type,title:t.title,desc:t.desc,delimiter:t.delimiter,format:a[e][1],formatStats:u[t.id],formatter:a[e][0],widthP:c[e],domain:l[t.id]}))),rows:r,messages:_n(n)}}function qs(t,e){let n;if(t.some((({width:t})=>null!=t)))n=t.map((({width:t})=>t||1));else{const r=new Hash;for(const n of e)for(const{id:e,type:s}of t){let t;if(void 0===n[e])continue;if("string"==s)t=n[e].length;else if("number"==s)t=(""+n[e]).length;else{if("boolean"!=s)continue;t=1}let o=r.get(e);is_undefined(o)&&(o=[],r.set(e,o)),o.push(t)}const s=r.map((t=>t.quantile(.7))),o=s.values().median(),i=1.618,a=s.map((t=>t>o*i?i:t<o/i?1/i:1)),l=1;n=t.map((({id:t})=>a.get(t)||l))}return Ms(n)}function Ms(t){if(0==t.length)return[];const e=100/t.sum();let n=t.map((t=>(t*e).round()));for(;;){const t=n.sum();if(t>100)n[n.maxi()]-=1;else{if(!(t<100))break;n[n.mini()]+=1}}return n}function Ts(t,e,n){return e=function(t,e,n){if(!n)return e;for(const{id:r,type:s}of t){const t=n[r];if(!t)continue;const[o,i]=t;if(void 0===i||""===i)continue;const a=Ps(s,[o,i]);e=e.filter((t=>a(t[r])))}return e}(t,e=function(t,e,n){if(!(n=n.trim()))return e;const r=n.downcase();return e.filter((e=>{for(const{id:n}of t)if((""+e[n]).downcase().includes(r))return!0;return!1}))}(t,e,n.filter),n.filters)}function Ps(t,[e,n]){switch(t){case"string":if("string"!=typeof n)throw new Error("string filter value expected");const t=n,r=n.downcase();switch(e){case"<=":return e=>void 0!==e&&e<=t;case"<":return e=>void 0!==e&&e<t;case"=":return e=>void 0!==e&&e==t;case"!=":return e=>void 0!==e&&e!=t;case">":return e=>void 0!==e&&e>t;case">=":return e=>void 0!==e&&e>=t;case"~":return t=>void 0!==t&&t.downcase().includes(r)}case"boolean":if("boolean"!=typeof n)throw new Error("boolean filter value expected");const s=n;switch(e){case"<=":return t=>void 0!==t&&t<=s;case"<":return t=>void 0!==t&&t<s;case"=":return t=>void 0!==t&&t==s;case"!=":return t=>void 0!==t&&t!=s;case">":return t=>void 0!==t&&t>s;case">=":return t=>void 0!==t&&t>=s;case"~":return t=>void 0!==t&&t==s}case"number":if("number"!=typeof n)throw new Error("number filter value expected");const o=n;switch(e){case"<=":return t=>void 0!==t&&t<=o;case"<":return t=>void 0!==t&&t<o;case"=":return t=>void 0!==t&&t==o;case"!=":return t=>void 0!==t&&t!=o;case">":return t=>void 0!==t&&t>o;case">=":return t=>void 0!==t&&t>=o;case"~":return t=>void 0!==t&&t==o}default:const i=""+n;switch(e){case"<=":return t=>void 0!==t&&""+t<=i;case"<":return t=>void 0!==t&&""+t<i;case"=":return t=>void 0!==t&&""+t==i;case"!=":return t=>void 0!==t&&""+t!=i;case">":return t=>void 0!==t&&""+t>i;case">=":return t=>void 0!==t&&""+t>=i;case"~":return t=>void 0!==t&&""+t==i}}throw new Error(`unknown filter ${t} ${e}`)}function Rs(t){return t.map((t=>{let e=Object.assign({},t);return delete e._i,delete e._converted,e}))}function Ls(t){let e,n,r,s,o,i,a,l,h,p;return{c(){e=f("div"),n=f("span"),r=f("span"),r.textContent="w =",s=g(),o=f("input"),$(r,"class","w-5 inline-block"),$(o,"class","w-10 outline-none pl-1 text-xs border border-gray-200 focus:text-gray-900  svelte-1brt80c"),$(o,"type","number"),$(o,"step","0.1"),o.value=i=t[1].toFixed(1),$(n,"class",a=t[2]?"text-gray-900":"plot-table-controls-color"),$(e,"class",l=t[0]+" my-1 text-xs "+(!t[3]&&"invisible"))},m(i,a){u(i,e,a),c(e,n),c(n,r),c(n,s),c(n,o),h||(p=w(o,"change",t[5]),h=!0)},p(t,r){2&r&&i!==(i=t[1].toFixed(1))&&(o.value=i),4&r&&a!==(a=t[2]?"text-gray-900":"plot-table-controls-color")&&$(n,"class",a),9&r&&l!==(l=t[0]+" my-1 text-xs "+(!t[3]&&"invisible"))&&$(e,"class",l)},d(t){t&&d(e),h=!1,p()}}}function Bs(t){let e,r=!t[4]&&Ls(t);return{c(){r&&r.c(),e=m()},m(t,n){r&&r.m(t,n),u(t,e,n)},p(t,[n]){t[4]?r&&(r.d(1),r=null):r?r.p(t,n):(r=Ls(t),r.c(),r.m(e.parentNode,e))},i:n,o:n,d(t){r&&r.d(t),t&&d(e)}}}function Ns(t,e,n){let r,s,o,i,{column:a}=e,{align:l}=e,{state:c}=e;const u=(t=>{c.wsort&&n(6,c=Object.assign(Object.assign({},c),{wsort:Object.assign(Object.assign({},c.wsort),{[a.id]:t})}))}).debounce(200);return t.$$set=t=>{"column"in t&&n(7,a=t.column),"align"in t&&n(0,l=t.align),"state"in t&&n(6,c=t.state)},t.$$.update=()=>{192&t.$$.dirty&&n(1,r=(c.wsort||{})[a.id]||0),2&t.$$.dirty&&n(2,s=0!=r),68&t.$$.dirty&&n(3,o=c.show_controls||s),192&t.$$.dirty&&n(4,i=!c.wsort||["image","link"].includes(a.format.type))},[l,r,s,o,i,({target:{value:t}})=>{n(1,r=parseFloat(t)),u(r)},c,a]}test("normalize_table_options_slow",(()=>{const t=t=>t.map((({id:t,type:e})=>({id:t,type:e})));{const{columns:e,rows:n}=Cs({},[["v",null]]);assert.equal(t(e),[{id:"a",type:"string"},{id:"b",type:"unknown"}]),assert.equal(Rs(n),[{a:"v"}])}{const{columns:e,rows:n}=Cs({},[{k:"v",k2:null}]);assert.equal(t(e),[{id:"k",type:"string"},{id:"k2",type:"unknown"}]),assert.equal(Rs(n),[{k:"v"}])}{const{columns:e,rows:n}=Cs({},[{k:"v"},{k:0}]);assert.equal(t(e),[{id:"k",type:"unknown"}]),assert.equal(Rs(n),[{k:"v"},{k:0}])}{const{columns:t}=Cs({},[{v:1}]);assert.equal(t[0].format,{type:"number",round:0})}})),test("calculateColumnWidths",(()=>{assert.equal(qs([{id:"name",type:"string"},{id:"age",type:"number"}],[{name:"Jim Raynor",age:30},{name:"Kate",age:25}]),[62,38])})),test("weightsToPercents",(()=>{assert.equal(Ms([2,2]),[50,50]),assert.equal(Ms([3,3,3]).sort(),[33,33,34])}));class Us extends ot{constructor(t){super(),st(this,t,Ns,Bs,a,{column:7,align:0,state:6})}}function Ds(t,e,n){const r=t.slice();return r[10]=e[n],r}function Fs(t){let e,n,r,s,i,a,l,h,p,m,b,v=[],y=new Map,_=Os;const x=t=>t[10];for(let e=0;e<_.length;e+=1){let n=Ds(t,_,e),r=x(n);y.set(r,v[e]=Hs(r,n))}return{c(){e=f("div"),n=f("span"),r=f("select");for(let t=0;t<v.length;t+=1)v[t].c();i=g(),a=f("input"),$(r,"class","outline-none w-5 inline-block svelte-nsma8g"),$(a,"class","w-10 outline-none pl-1 text-xs border border-gray-200 focus:text-gray-900"),$(a,"type","text"),a.value=l=void 0===t[2][1]?"":""+t[2][1],$(n,"class",h=t[3]?"text-gray-900":"plot-table-controls-color"),$(e,"class",p=t[1]+" my-1 text-xs "+(!t[4]&&"invisible"))},m(s,o){u(s,e,o),c(e,n),c(n,r);for(let t=0;t<v.length;t+=1)v[t].m(r,null);k(r,t[2][0]),c(n,i),c(n,a),m||(b=[w(r,"change",t[6]),w(a,"keyup",t[7])],m=!0)},p(t,o){0&o&&(_=Os,v=Y(v,o,x,1,t,_,y,r,X,Hs,null,Ds)),4&o&&s!==(s=t[2][0])&&k(r,t[2][0]),4&o&&l!==(l=void 0===t[2][1]?"":""+t[2][1])&&a.value!==l&&(a.value=l),8&o&&h!==(h=t[3]?"text-gray-900":"plot-table-controls-color")&&$(n,"class",h),18&o&&p!==(p=t[1]+" my-1 text-xs "+(!t[4]&&"invisible"))&&$(e,"class",p)},d(t){t&&d(e);for(let t=0;t<v.length;t+=1)v[t].d();m=!1,o(b)}}}function Hs(t,e){let n,r,s=e[10]+"";return{key:t,first:null,c(){n=f("option"),r=p(s),n.__value=e[10],n.value=n.__value,this.first=n},m(t,e){u(t,n,e),c(n,r)},p(t,n){e=t},d(t){t&&d(n)}}}function Is(t){let e,r=t[0].filters&&!t[5]&&Fs(t);return{c(){r&&r.c(),e=m()},m(t,n){r&&r.m(t,n),u(t,e,n)},p(t,[n]){t[0].filters&&!t[5]?r?r.p(t,n):(r=Fs(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:n,o:n,d(t){r&&r.d(t),t&&d(e)}}}function Zs(t,e,n){let r,s,o,i,{column:a}=e,{align:l}=e,{state:c}=e;const u=(t=>{c.filters&&n(0,c=Object.assign(Object.assign({},c),{filters:Object.assign(Object.assign({},c.filters),{[a.id]:t})}))}).debounce(200);return t.$$set=t=>{"column"in t&&n(8,a=t.column),"align"in t&&n(1,l=t.align),"state"in t&&n(0,c=t.state)},t.$$.update=()=>{257&t.$$.dirty&&n(2,i=c.filters&&a.id in c.filters?c.filters[a.id]:["=",void 0]),4&t.$$.dirty&&n(3,r=null!=i[1]&&""!==i[1]),9&t.$$.dirty&&n(4,s=r||c.show_controls),257&t.$$.dirty&&n(5,o=c.wsort&&["image","link"].includes(a.format.type))},[c,l,i,r,s,o,({target:{value:t}})=>{n(2,i=[Es(t),i[1]]),u(i)},({target:{value:t}})=>{n(2,i=[i[0],zs(a,t)]),u(i)},a]}class Ws extends ot{constructor(t){super(),st(this,t,Zs,Is,a,{column:8,align:1,state:0})}}function Js(t){let e,n,r,s,o,i,a,l,h,m,y,k,x,j,O,E,z,S,A,q=t[3].symbol+"";function M(e){t[12](e)}let T={column:t[1],align:"text-right"};function P(e){t[13](e)}void 0!==t[0]&&(T.state=t[0]),y=new Us({props:T}),C.push((()=>Q(y,"state",M)));let R={column:t[1],align:"text-right"};return void 0!==t[0]&&(R.state=t[0]),j=new Ws({props:R}),C.push((()=>Q(j,"state",P))),{c(){e=f("th"),n=f("a"),r=f("span"),s=p(q),i=g(),a=f("span"),l=p(t[2]),m=g(),tt(y.$$.fragment),x=g(),tt(j.$$.fragment),$(r,"class",o=t[3].klass+" mr-0.5"),$(n,"class","flex justify-between"),$(n,"href","#"),$(n,"title",h=t[1].desc),$(e,"class",E="text-right "+t[4]),_(e,"width",t[1].widthP+"%")},m(o,d){u(o,e,d),c(e,n),c(n,r),c(r,s),c(n,i),c(n,a),c(a,l),c(e,m),et(y,e,null),c(e,x),et(j,e,null),z=!0,S||(A=w(n,"click",b(t[6])),S=!0)},p(t,i){(!z||8&i)&&q!==(q=t[3].symbol+"")&&v(s,q),(!z||8&i&&o!==(o=t[3].klass+" mr-0.5"))&&$(r,"class",o),(!z||4&i)&&v(l,t[2]),(!z||2&i&&h!==(h=t[1].desc))&&$(n,"title",h);const a={};2&i&&(a.column=t[1]),!k&&1&i&&(k=!0,a.state=t[0],L((()=>k=!1))),y.$set(a);const c={};2&i&&(c.column=t[1]),!O&&1&i&&(O=!0,c.state=t[0],L((()=>O=!1))),j.$set(c),(!z||16&i&&E!==(E="text-right "+t[4]))&&$(e,"class",E),(!z||2&i)&&_(e,"width",t[1].widthP+"%")},i(t){z||(W(y.$$.fragment,t),W(j.$$.fragment,t),z=!0)},o(t){J(y.$$.fragment,t),J(j.$$.fragment,t),z=!1},d(t){t&&d(e),nt(y),nt(j),S=!1,A()}}}function Vs(t){let e,n,r,s,o,i,a,l,h,m,y,k,x,j,O,E,z,S,A,q,M,T,P=t[3].symbol+"",R=t[3].symbol+"";function B(e){t[10](e)}let N={column:t[1],align:"text-center"};function U(e){t[11](e)}void 0!==t[0]&&(N.state=t[0]),O=new Us({props:N}),C.push((()=>Q(O,"state",B)));let D={column:t[1],align:"text-center"};return void 0!==t[0]&&(D.state=t[0]),S=new Ws({props:D}),C.push((()=>Q(S,"state",U))),{c(){e=f("th"),n=f("a"),r=f("span"),s=p(P),o=g(),i=f("span"),a=p(t[2]),l=g(),h=f("span"),m=p(R),j=g(),tt(O.$$.fragment),z=g(),tt(S.$$.fragment),$(r,"class","invisible mr-0.5"),$(h,"class",y=t[3].klass+" ml-0.5"),$(h,"title",k=t[3].title),$(n,"class","flex justify-between"),$(n,"href","#"),$(n,"title",x=t[1].desc),$(e,"class",t[4]),_(e,"width",t[1].widthP+"%")},m(d,f){u(d,e,f),c(e,n),c(n,r),c(r,s),c(n,o),c(n,i),c(i,a),c(n,l),c(n,h),c(h,m),c(e,j),et(O,e,null),c(e,z),et(S,e,null),q=!0,M||(T=w(n,"click",b(t[6])),M=!0)},p(t,r){(!q||8&r)&&P!==(P=t[3].symbol+"")&&v(s,P),(!q||4&r)&&v(a,t[2]),(!q||8&r)&&R!==(R=t[3].symbol+"")&&v(m,R),(!q||8&r&&y!==(y=t[3].klass+" ml-0.5"))&&$(h,"class",y),(!q||8&r&&k!==(k=t[3].title))&&$(h,"title",k),(!q||2&r&&x!==(x=t[1].desc))&&$(n,"title",x);const o={};2&r&&(o.column=t[1]),!E&&1&r&&(E=!0,o.state=t[0],L((()=>E=!1))),O.$set(o);const i={};2&r&&(i.column=t[1]),!A&&1&r&&(A=!0,i.state=t[0],L((()=>A=!1))),S.$set(i),(!q||16&r)&&$(e,"class",t[4]),(!q||2&r)&&_(e,"width",t[1].widthP+"%")},i(t){q||(W(O.$$.fragment,t),W(S.$$.fragment,t),q=!0)},o(t){J(O.$$.fragment,t),J(S.$$.fragment,t),q=!1},d(t){t&&d(e),nt(O),nt(S),M=!1,T()}}}function Ks(t){let e,n,r,s,o,i,a,l,h,m,y,k,x,j,O,E,z,S,A,q=t[3].symbol+"";function M(e){t[8](e)}let T={column:t[1],align:"text-left"};function P(e){t[9](e)}void 0!==t[0]&&(T.state=t[0]),k=new Us({props:T}),C.push((()=>Q(k,"state",M)));let R={column:t[1],align:"text-left"};return void 0!==t[0]&&(R.state=t[0]),O=new Ws({props:R}),C.push((()=>Q(O,"state",P))),{c(){e=f("th"),n=f("a"),r=f("span"),s=p(t[2]),o=g(),i=f("span"),a=p(q),y=g(),tt(k.$$.fragment),j=g(),tt(O.$$.fragment),$(i,"class",l=t[3].klass+" ml-0.5"),$(i,"title",h=t[3].title),$(n,"class","flex justify-between"),$(n,"href","#"),$(n,"title",m=t[1].desc),$(e,"class",t[4]),_(e,"width",t[1].widthP+"%")},m(l,d){u(l,e,d),c(e,n),c(n,r),c(r,s),c(n,o),c(n,i),c(i,a),c(e,y),et(k,e,null),c(e,j),et(O,e,null),z=!0,S||(A=w(n,"click",b(t[6])),S=!0)},p(t,r){(!z||4&r)&&v(s,t[2]),(!z||8&r)&&q!==(q=t[3].symbol+"")&&v(a,q),(!z||8&r&&l!==(l=t[3].klass+" ml-0.5"))&&$(i,"class",l),(!z||8&r&&h!==(h=t[3].title))&&$(i,"title",h),(!z||2&r&&m!==(m=t[1].desc))&&$(n,"title",m);const o={};2&r&&(o.column=t[1]),!x&&1&r&&(x=!0,o.state=t[0],L((()=>x=!1))),k.$set(o);const c={};2&r&&(c.column=t[1]),!E&&1&r&&(E=!0,c.state=t[0],L((()=>E=!1))),O.$set(c),(!z||16&r)&&$(e,"class",t[4]),(!z||2&r)&&_(e,"width",t[1].widthP+"%")},i(t){z||(W(k.$$.fragment,t),W(O.$$.fragment,t),z=!0)},o(t){J(k.$$.fragment,t),J(O.$$.fragment,t),z=!1},d(t){t&&d(e),nt(k),nt(O),S=!1,A()}}}function Xs(t){let e,n,r,s;const o=[Ks,Vs,Js],i=[];return e=function(t,e){return"left"==t[5]?0:"center"==t[5]?1:2}(t),n=i[e]=o[e](t),{c(){n.c(),r=m()},m(t,n){i[e].m(t,n),u(t,r,n),s=!0},p(t,[e]){n.p(t,e)},i(t){s||(W(n),s=!0)},o(t){J(n),s=!1},d(t){i[e].d(t),t&&d(r)}}}function Gs(t,e,n){let r,s,o,{column:i}=e,{state:a}=e,{sortable:l}=e,c=i.id;const u=i.formatter.align,d=u?u(i.format,i.formatStats):"center";return t.$$set=t=>{"column"in t&&n(1,i=t.column),"state"in t&&n(0,a=t.state),"sortable"in t&&n(7,l=t.sortable)},t.$$.update=()=>{2&t.$$.dirty&&n(2,r=null==i.title?i.id:i.title),3&t.$$.dirty&&n(3,s=function(t,e){const n={symbol:"↓",klass:"invisible",title:""};if(e.wsort){const r=e.wsort[t.id],s="wsort: "+Object.entries(e.wsort).map((([t,e])=>`${t}: ${e}`)).join(", ");return void 0===r||0==r?n:r>=0?{symbol:"↑",klass:"text-gray-900",title:s}:{symbol:"↓",klass:"text-gray-900",title:s}}if(e.sort){let t;for(let n=0;n<e.sort.length;n++){const[r,s]=e.sort[n];r==c&&(t=[s,n])}if(!t)return n;const r="sort: "+e.sort.map((([t,e])=>`${t}: ${e}`)).join(", "),[s,o]=t,i="asc"==s?"↓":"↑";let a;if(0==o)a="text-gray-900";else if(1==o)a="text-gray-400";else{if(2!=o)throw new Error("color for more than 3 sort oders isn't supported");a="text-gray-300"}return{symbol:i,klass:a,title:r}}return n}(i,a)),2&t.$$.dirty&&n(4,o=i.delimiter?"plot-delimiter-right":"")},[a,i,r,s,o,d,function(t){if(l)if(a.wsort){let e=a.wsort;t.metaKey?i.id in e?e[i.id]=-1*e[i.id]:e[i.id]=1:Object.size(e)>1?e={[c]:1}:i.id in e?e[i.id]=-1*e[i.id]:e={[c]:1},n(0,a=Object.assign(Object.assign({},a),{wsort:e}))}else{let e=a.sort||[];const r=e.i((([t,e])=>t==i.id));t.metaKey?is_undefined(r)?e.push([c,"asc"]):e[r][1]="asc"==e[r][1]?"desc":"asc":e.length>1||is_undefined(r)?e=[[c,"asc"]]:(assert(1==e.length),e[r][1]="asc"==e[r][1]?"desc":"asc"),n(0,a=Object.assign(Object.assign({},a),{sort:e}))}},l,function(t){a=t,n(0,a)},function(t){a=t,n(0,a)},function(t){a=t,n(0,a)},function(t){a=t,n(0,a)},function(t){a=t,n(0,a)},function(t){a=t,n(0,a)}]}class Ys extends ot{constructor(t){super(),st(this,t,Gs,Xs,a,{column:1,state:0,sortable:7})}}function Qs(t,e,n){const r=t.slice();return r[4]=e[n],r}function to(t,e){let n,r,s,o;function i(t){e[3](t)}let a={column:e[4],sortable:e[2]};return void 0!==e[0]&&(a.state=e[0]),r=new Ys({props:a}),C.push((()=>Q(r,"state",i))),{key:t,first:null,c(){n=m(),tt(r.$$.fragment),this.first=n},m(t,e){u(t,n,e),et(r,t,e),o=!0},p(t,n){e=t;const o={};2&n&&(o.column=e[4]),4&n&&(o.sortable=e[2]),!s&&1&n&&(s=!0,o.state=e[0],L((()=>s=!1))),r.$set(o)},i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){J(r.$$.fragment,t),o=!1},d(t){t&&d(n),nt(r,t)}}}function eo(t){let e,n,r=[],s=new Map,o=t[1];const i=t=>t[4].id;for(let e=0;e<o.length;e+=1){let n=Qs(t,o,e),a=i(n);s.set(a,r[e]=to(a,n))}return{c(){e=f("tr");for(let t=0;t<r.length;t+=1)r[t].c()},m(t,s){u(t,e,s);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,[n]){7&n&&(o=t[1],I(),r=Y(r,n,i,1,t,o,s,e,G,to,null,Qs),Z())},i(t){if(!n){for(let t=0;t<o.length;t+=1)W(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)J(r[t]);n=!1},d(t){t&&d(e);for(let t=0;t<r.length;t+=1)r[t].d()}}}function no(t,e,n){let{columns:r}=e,{state:s}=e,{sortable:o}=e;return t.$$set=t=>{"columns"in t&&n(1,r=t.columns),"state"in t&&n(0,s=t.state),"sortable"in t&&n(2,o=t.sortable)},[s,r,o,function(t){s=t,n(0,s)}]}class ro extends ot{constructor(t){super(),st(this,t,no,eo,a,{columns:1,state:0,sortable:2})}}function so(t,e,n){const r=t.slice();return r[4]=e[n],r[6]=n,r}function oo(t){let e,n,r;var s=t[4].formatter.default;function o(t){return{props:{options:t[4].format,value:t[1][t[4].id]}}}return s&&(e=new s(o(t))),{c(){e&&tt(e.$$.fragment),n=m()},m(t,s){e&&et(e,t,s),u(t,n,s),r=!0},p(t,r){const i={};if(1&r&&(i.options=t[4].format),3&r&&(i.value=t[1][t[4].id]),s!==(s=t[4].formatter.default)){if(e){I();const t=e;J(t.$$.fragment,1,0,(()=>{nt(t,1)})),Z()}s?(e=new s(o(t)),tt(e.$$.fragment),W(e.$$.fragment,1),et(e,n.parentNode,n)):e=null}else s&&e.$set(i)},i(t){r||(e&&W(e.$$.fragment,t),r=!0)},o(t){e&&J(e.$$.fragment,t),r=!1},d(t){t&&d(n),e&&nt(e,t)}}}function io(t){let e,n,r;var s=t[4].formatter.default;function o(t){return{props:{options:t[4].format,value:t[1][t[4].id],converted:t[1]._converted[t[4].id],stats:t[4].formatStats}}}return s&&(e=new s(o(t))),{c(){e&&tt(e.$$.fragment),n=m()},m(t,s){e&&et(e,t,s),u(t,n,s),r=!0},p(t,r){const i={};if(1&r&&(i.options=t[4].format),3&r&&(i.value=t[1][t[4].id]),3&r&&(i.converted=t[1]._converted[t[4].id]),1&r&&(i.stats=t[4].formatStats),s!==(s=t[4].formatter.default)){if(e){I();const t=e;J(t.$$.fragment,1,0,(()=>{nt(t,1)})),Z()}s?(e=new s(o(t)),tt(e.$$.fragment),W(e.$$.fragment,1),et(e,n.parentNode,n)):e=null}else s&&e.$set(i)},i(t){r||(e&&W(e.$$.fragment,t),r=!0)},o(t){e&&J(e.$$.fragment,t),r=!1},d(t){t&&d(n),e&&nt(e,t)}}}function ao(t,e){let n,r,s,o,i,a;const l=[io,oo],h=[];function p(t,e){return"_converted"in t[1]&&t[4].id in t[1]._converted?0:1}return r=p(e),s=h[r]=l[r](e),{key:t,first:null,c(){n=f("td"),s.c(),o=g(),$(n,"class",i=e[4].delimiter?"plot-delimiter-right":""),this.first=n},m(t,e){u(t,n,e),h[r].m(n,null),c(n,o),a=!0},p(t,c){let u=r;r=p(e=t),r===u?h[r].p(e,c):(I(),J(h[u],1,1,(()=>{h[u]=null})),Z(),s=h[r],s?s.p(e,c):(s=h[r]=l[r](e),s.c()),W(s,1),s.m(n,o)),(!a||1&c&&i!==(i=e[4].delimiter?"plot-delimiter-right":""))&&$(n,"class",i)},i(t){a||(W(s),a=!0)},o(t){J(s),a=!1},d(t){t&&d(n),h[r].d()}}}function lo(t){let e,n,r,s,o,a=[],l=new Map,c=t[0];const h=t=>t[4].id;for(let e=0;e<c.length;e+=1){let n=so(t,c,e),r=h(n);l.set(r,a[e]=ao(r,n))}return{c(){e=f("tr");for(let t=0;t<a.length;t+=1)a[t].c();$(e,"class",n=t[2]?"bg-gray-100":"")},m(n,l){u(n,e,l);for(let t=0;t<a.length;t+=1)a[t].m(e,null);r=!0,s||(o=w(e,"click",(function(){i(t[3])&&t[3].apply(this,arguments)})),s=!0)},p(s,[o]){t=s,3&o&&(c=t[0],I(),a=Y(a,o,h,1,t,c,l,e,G,ao,null,so),Z()),(!r||4&o&&n!==(n=t[2]?"bg-gray-100":""))&&$(e,"class",n)},i(t){if(!r){for(let t=0;t<c.length;t+=1)W(a[t]);r=!0}},o(t){for(let t=0;t<a.length;t+=1)J(a[t]);r=!1},d(t){t&&d(e);for(let t=0;t<a.length;t+=1)a[t].d();s=!1,o()}}}function co(t,e,n){let{columns:r}=e,{row:s}=e,{selected:o}=e,{onSelect:i}=e;return t.$$set=t=>{"columns"in t&&n(0,r=t.columns),"row"in t&&n(1,s=t.row),"selected"in t&&n(2,o=t.selected),"onSelect"in t&&n(3,i=t.onSelect)},[r,s,o,i]}class uo extends ot{constructor(t){super(),st(this,t,co,lo,a,{columns:0,row:1,selected:2,onSelect:3})}}function fo(t){let e,r,s,i,a,h,m,b,v,_,k,x,j,O=fs(ho(!!t[0].filters))+"";return{c(){e=f("div"),r=f("div"),s=g(),i=f("div"),a=f("input"),h=g(),m=f("button"),b=p("W"),_=g(),k=f("button"),$(r,"class","flex items-center"),$(a,"class","rounded border border-gray-300 text-sm outline-none py-1 px-1 leading-4"),$(a,"type","text"),$(a,"placeholder","Filter"),$(m,"class",v=l(po(!!t[0].wsort))+" svelte-1y842rg"),$(m,"title",t[4]),$(k,"class","focus:outline-none"),$(i,"class","flex items-center space-x-2"),$(e,"class","flex items-center justify-between my-1")},m(n,o){u(n,e,o),c(e,r),c(e,s),c(e,i),c(i,a),y(a,t[1]),c(i,h),c(i,m),c(m,b),c(i,_),c(i,k),k.innerHTML=O,x||(j=[w(a,"input",t[5]),w(a,"keyup",t[2]),w(m,"click",t[3]),w(k,"click",t[6])],x=!0)},p(t,[e]){2&e&&a.value!==t[1]&&y(a,t[1]),1&e&&v!==(v=l(po(!!t[0].wsort))+" svelte-1y842rg")&&$(m,"class",v),1&e&&O!==(O=fs(ho(!!t[0].filters))+"")&&(k.innerHTML=O)},i:n,o:n,d(t){t&&d(e),x=!1,o(j)}}}function ho(t){return`h-5 w-5 p-0.5 border border-white rounded ${t?"text-gray-900":"plot-table-controls-color"}`}function po(t){return`letter_button focus:outline-none border border-white rounded ${t?"text-gray-900":"plot-table-controls-color"}`}function go(t,e,n){let{state:r}=e,s=r.filter;const o=(()=>{n(0,r=Object.assign(Object.assign({},r),{filter:s}))}).debounce(200);const i=['Weighted sorting. "Smart", weighted, ranked sorting, instead of normal sorting.',"It works similar to how humans compare products with many attributes, to find the best one.","Example: find countries with highest salaries, lowest taxes and lowest real estate prices - ordinary sorting would be useless, while weighted sorting would sort the countries in a 'smart' way, similar to how human would do.","Missing values threated as average, like if we don't have tax rate for country, we guess that it probably should be somewhat average. For non number comparable elements sort rank used as weight. ifferent range of values for different columns normalised into [-1..1] range as 'nw = (w - median(w)) / 0.9-quantile(variance(w))*1.11' and limiting min/max outliers by [-1..1].",'- Undefined values threated as average\n- Rank for same values should be the same, like ["a", "a", "b"] should be [0, 0, 1], not [0, 1, 2]\n- Different range of values for different columns normalised into [-1..1] range as\n      nw = (w - median(w)) / 0.9-quantile(variance(w))*1.11 and limiting min/max outliers by [-1..1].'].join("\n\n");return t.$$set=t=>{"state"in t&&n(0,r=t.state)},[r,s,o,function(){n(0,r=r.wsort?Object.assign(Object.assign({},r),{wsort:void 0,sort:void 0}):Object.assign(Object.assign({},r),{wsort:{},sort:void 0}))},i,function(){s=this.value,n(1,s)},()=>n(0,r={...r,filters:r.filters?void 0:{}})]}class mo extends ot{constructor(t){super(),st(this,t,go,fo,a,{state:0})}}function wo(t,e,n){const r=t.slice();return r[18]=e[n],r}function bo(t){let e,n,r=t[0].desc+"";return{c(){e=f("div"),n=p(r)},m(t,r){u(t,e,r),c(e,n)},p(t,e){1&e&&r!==(r=t[0].desc+"")&&v(n,r)},d(t){t&&d(e)}}}function $o(t,e){let n,r,s;function o(...t){return e[16](e[18],...t)}return r=new uo({props:{columns:e[3],row:e[18],selected:e[4].has(e[18]._i),onSelect:o}}),{key:t,first:null,c(){n=m(),tt(r.$$.fragment),this.first=n},m(t,e){u(t,n,e),et(r,t,e),s=!0},p(t,n){e=t;const s={};8&n&&(s.columns=e[3]),128&n&&(s.row=e[18]),144&n&&(s.selected=e[4].has(e[18]._i)),128&n&&(s.onSelect=o),r.$set(s)},i(t){s||(W(r.$$.fragment,t),s=!0)},o(t){J(r.$$.fragment,t),s=!1},d(t){t&&d(n),nt(r,t)}}}function vo(t){let e,n,r,s,o,i,a={ctx:t,current:null,token:null,hasCatch:!1,pending:ko,then:_o,catch:yo,value:1};V(r=Jt({...t[2],selected:t[4]}),a);let l={ctx:t,current:null,token:null,hasCatch:!1,pending:Oo,then:jo,catch:xo,value:1};return V(i=Jt(t[3]),l),{c(){e=f("div"),e.textContent="Debug:",n=g(),a.block.c(),s=g(),o=m(),l.block.c(),$(e,"class","mt-3")},m(t,r){u(t,e,r),u(t,n,r),a.block.m(t,a.anchor=r),a.mount=()=>s.parentNode,a.anchor=s,u(t,s,r),u(t,o,r),l.block.m(t,l.anchor=r),l.mount=()=>o.parentNode,l.anchor=o},p(e,n){t=e,a.ctx=t,20&n&&r!==(r=Jt({...t[2],selected:t[4]}))&&V(r,a)||K(a,t,n),l.ctx=t,8&n&&i!==(i=Jt(t[3]))&&V(i,l)||K(l,t,n)},d(t){t&&d(e),t&&d(n),a.block.d(t),a.token=null,a=null,t&&d(s),t&&d(o),l.block.d(t),l.token=null,l=null}}}function yo(t){return{c:n,m:n,p:n,d:n}}function _o(t){let e,n;return{c(){e=f("textarea"),$(e,"class","block focus:outline-none rounded border border-gray-200 text-xs overflow-scroll mt-4"),e.readOnly=!0,_(e,"resize","none"),_(e,"width","30rem"),_(e,"height","5rem"),e.value=n=t[1]},m(t,n){u(t,e,n)},p(t,r){20&r&&n!==(n=t[1])&&(e.value=n)},d(t){t&&d(e)}}}function ko(t){let e;return{c(){e=p("Waiting...")},m(t,n){u(t,e,n)},p:n,d(t){t&&d(e)}}}function xo(t){return{c:n,m:n,p:n,d:n}}function jo(t){let e,n;return{c(){e=f("textarea"),$(e,"class","block focus:outline-none rounded border border-gray-200 text-xs overflow-scroll mt-4"),e.readOnly=!0,_(e,"resize","none"),_(e,"width","30rem"),_(e,"height","10rem"),e.value=n=t[1]},m(t,n){u(t,e,n)},p(t,r){8&r&&n!==(n=t[1])&&(e.value=n)},d(t){t&&d(e)}}}function Oo(t){let e;return{c(){e=p("Waiting...")},m(t,n){u(t,e,n)},p:n,d(t){t&&d(e)}}}function Eo(t){let e,n,r,s,o,i,a,l,h,p,b,v,y,_,k,x,j,O,E,z=[],S=new Map,A=t[0].desc&&bo(t);function q(e){t[14](e)}let M={};function T(e){t[15](e)}void 0!==t[2]&&(M.state=t[2]),o=new mo({props:M}),C.push((()=>Q(o,"state",q)));let P={columns:t[3],sortable:t[6]};void 0!==t[2]&&(P.state=t[2]),p=new ro({props:P}),C.push((()=>Q(p,"state",T)));let R=t[7];const B=t=>t[18]._i;for(let e=0;e<R.length;e+=1){let n=wo(t,R,e),r=B(n);S.set(r,z[e]=$o(r,n))}_=new yn({props:{messages:t[5]}});let N=t[0].debug&&vo(t);return{c(){A&&A.c(),e=g(),n=f("table"),r=f("tr"),s=f("td"),tt(o.$$.fragment),h=g(),tt(p.$$.fragment),v=g();for(let t=0;t<z.length;t+=1)z[t].c();y=g(),tt(_.$$.fragment),k=g(),N&&N.c(),x=m(),$(s,"colspan",a=t[3].length),$(r,"class",l="plot-table-toolbar "+(!t[8]&&"hidden")),$(n,"class","plot-table font-mono")},m(i,a){A&&A.m(i,a),u(i,e,a),u(i,n,a),c(n,r),c(r,s),et(o,s,null),c(n,h),et(p,n,null),c(n,v);for(let t=0;t<z.length;t+=1)z[t].m(n,null);u(i,y,a),et(_,i,a),u(i,k,a),N&&N.m(i,a),u(i,x,a),j=!0,O||(E=w(n,"click",t[17]),O=!0)},p(t,[c]){t[0].desc?A?A.p(t,c):(A=bo(t),A.c(),A.m(e.parentNode,e)):A&&(A.d(1),A=null);const u={};!i&&4&c&&(i=!0,u.state=t[2],L((()=>i=!1))),o.$set(u),(!j||8&c&&a!==(a=t[3].length))&&$(s,"colspan",a),(!j||256&c&&l!==(l="plot-table-toolbar "+(!t[8]&&"hidden")))&&$(r,"class",l);const d={};8&c&&(d.columns=t[3]),64&c&&(d.sortable=t[6]),!b&&4&c&&(b=!0,d.state=t[2],L((()=>b=!1))),p.$set(d),664&c&&(R=t[7],I(),z=Y(z,c,B,1,t,R,S,n,G,$o,null,wo),Z());const f={};32&c&&(f.messages=t[5]),_.$set(f),t[0].debug?N?N.p(t,c):(N=vo(t),N.c(),N.m(x.parentNode,x)):N&&(N.d(1),N=null)},i(t){if(!j){W(o.$$.fragment,t),W(p.$$.fragment,t);for(let t=0;t<R.length;t+=1)W(z[t]);W(_.$$.fragment,t),j=!0}},o(t){J(o.$$.fragment,t),J(p.$$.fragment,t);for(let t=0;t<z.length;t+=1)J(z[t]);J(_.$$.fragment,t),j=!1},d(t){A&&A.d(t),t&&d(e),t&&d(n),nt(o),nt(p);for(let t=0;t<z.length;t+=1)z[t].d();t&&d(y),nt(_,t),t&&d(k),N&&N.d(t),t&&d(x),O=!1,E()}}}function zo(t,e,n){let r,s,o,i,a,l,c,u,{options:d}=e,{data:f}=e,h={filter:d.filter||"",sort:d.sort,wsort:d.wsort,show_controls:!!d.show_controls},p=!1,g=new Set(d.selected||[]);function m(t,e){!function(t,e,n,r){const s=new Set(n);if(t.metaKey)s.has(e)?s.delete(e):s.add(e);else{const t=s.has(e)&&1==s.size;s.clear(),t||s.add(e)}r(s)}(t,e,g,(t=>n(4,g=t)))}return t.$$set=t=>{"options"in t&&n(0,d=t.options),"data"in t&&n(1,f=t.data)},t.$$.update=()=>{3&t.$$.dirty&&n(11,r=Cs(d,f)),2048&t.$$.dirty&&n(3,s=r.columns),2048&t.$$.dirty&&n(12,o=r.rows),2048&t.$$.dirty&&n(5,i=r.messages),1033&t.$$.dirty&&(p||(n(2,h.filters=function(t,e){if(!e)return;const n={};for(const r of t){const t=e[r.id];if(!t)continue;const s=zs(r,""+t[1]);void 0!==s&&(n[r.id]=[Es(t[0]),s])}return n}(s,d.filters),h),n(10,p=!0))),1&t.$$.dirty&&n(6,a=0!=d.sortable),4108&t.$$.dirty&&n(13,l=Ts(s,o,h)),8204&t.$$.dirty&&n(7,c=function(t,e,{sort:n,wsort:r}){return n&&!n.is_empty()?xs(t,e,n):r&&!Object.is_empty(r)?js(t,e,r):e}(s,l,h)),4&t.$$.dirty&&n(8,u=h.show_controls||h.sort||h.wsort||h.filter||h.filters)},[d,f,h,s,g,i,a,c,u,m,p,r,o,l,function(t){h=t,n(2,h),n(10,p),n(3,s),n(0,d),n(11,r),n(1,f)},function(t){h=t,n(2,h),n(10,p),n(3,s),n(0,d),n(11,r),n(1,f)},(t,e)=>m(e,t._i),()=>n(2,h={...h,show_controls:!0})]}class So extends ot{constructor(t){super(),st(this,t,zo,Eo,a,{options:0,data:1})}}function Ao(t){let e,n;return e=new qt({props:{error:t[3]}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.error=t[3]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function Co(t){let e,n;return e=new So({props:{options:t[0].table||{},data:t[2]}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.options=t[0].table||{}),1&n&&(r.data=t[2]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function qo(t){let e,r;return e=new Pt({}),{c(){tt(e.$$.fragment)},m(t,n){et(e,t,n),r=!0},p:n,i(t){r||(W(e.$$.fragment,t),r=!0)},o(t){J(e.$$.fragment,t),r=!1},d(t){nt(e,t)}}}function Mo(t){let e,n,r,s,o,i={ctx:t,current:null,token:null,hasCatch:!0,pending:qo,then:Co,catch:Ao,value:2,error:3,blocks:[,,,]};return V(n=It(t[0].data),i),s=new fn({}),{c(){e=f("div"),i.block.c(),r=g(),tt(s.$$.fragment),$(e,"class","TableBlockContent relative")},m(t,n){u(t,e,n),i.block.m(e,i.anchor=null),i.mount=()=>e,i.anchor=r,c(e,r),et(s,e,null),o=!0},p(e,[r]){t=e,i.ctx=t,1&r&&n!==(n=It(t[0].data))&&V(n,i)||K(i,t,r)},i(t){o||(W(i.block),W(s.$$.fragment,t),o=!0)},o(t){for(let t=0;t<3;t+=1){J(i.blocks[t])}J(s.$$.fragment,t),o=!1},d(t){t&&d(e),i.block.d(),i.token=null,i=null,nt(s)}}}const To={match_and_normalize:t=>{return is_object(t)&&"table"in t?is_array(t.table)?{data:t.table,table:{}}:t:is_array(t)?{data:t,table:{}}:(e=t)&&"object"==typeof e&&"csv_table"==e.type?function(t){const e=[];for(const n of t.columns){let r="unknown";for(const e of t.rows){const t=e[n];if(null!=t){r=typeof t;break}}e.push(r)}const n=t.columns.map(((t,n)=>({id:t,type:e[n]})));return{data:t.rows,table:{columns:n}}}(t):void 0;var e}};function Po(t,e,n){let{block:r}=e,{is_narrow:s}=e;return discard(s),t.$$set=t=>{"block"in t&&n(0,r=t.block),"is_narrow"in t&&n(1,s=t.is_narrow)},[r,s]}var Ro=Object.freeze({__proto__:null,default:class extends ot{constructor(t){super(),st(this,t,Po,Mo,a,{block:0,is_narrow:1})}},definition:To});function Lo(e,n){if(null!=e){if(is_object(e)){const n=e;if(n.block){if(!is_array(n.block)||2!=n.block.length)throw"invalid block, it should be `block: [block_name, 0.1]`";const e=n.block[0],{definition:r,default:s}=t.blocks[e],o=r.match_and_normalize(n);if(!o)throw`Data not matching '${e}' block`;return{name:e,klass:s,ndata:o}}for(const e in t.blocks){const{definition:r,default:s}=t.blocks[e],o=r.match_and_normalize(n);if(o)return{name:e,klass:s,ndata:o}}}if(n){const r=t.blocks_for_file_extensions[n],s=t.blocks[r];if(s){const{definition:t,default:o}=s,i=t.match_and_normalize(e);if(!i)throw`Data not matching '${r}' block, registered for extension ${n}`;return{name:r,klass:o,ndata:i}}}if(is_array(e)){const n="table",{definition:r,default:s}=t.blocks[n],o=r.match_and_normalize(e);if(!o)throw"internal error, data not matching table block";return{name:n,klass:s,ndata:o}}if(is_string(e)){const n="table",{definition:r,default:s}=t.blocks[n],o=r.match_and_normalize(e);if(!o)throw"internal error, data not matching text block";return{name:n,klass:s,ndata:o}}}}t.blocks.image=Sn,t.blocks.text=Rn,t.blocks.chart=Or,t.blocks.table=Ro;class Bo{constructor(t,e=[],n={}){this.component=t,this.ids=e,this.data=n}with(t){if(t instanceof Error)return this.with({exception:t.message||"unknown error",stack:t.stack||""});if(is_string(t)||is_number(t))return new Bo(this.component,[...this.ids,""+t],Object.assign({},this.data));{let e=new Bo(this.component,[...this.ids],Object.assign({},this.data)),n=t;for(const t in n){let r=n[t];"id"==t?e.ids.push(""+r):"ids"==t?e.ids.push(...is_array(r)?r.map((t=>""+t)):[""+r]):e.data[t]=r}return e}}message(t){No(this.with(t))}debug(t){this.message({debug:t})}info(t){this.message({info:t})}warn(t){this.message({warn:t})}error(t){t instanceof Error?this.with(t).message({error:t.message||"unknown error"}):this.message({error:t})}logfn(t){null!=t&&(is_string(t)?this.info(t):t(this))}}function No(t){let e="",n="";for(const r of["debug","info","warn","error"])if(r in t.data){e=r,n=""+(t.data[r]||"invalid log message type");break}if(""==e)return void No(t.with({warn:"invalid log message, no level"}));let r=function(t){const e=4;return t.take(e).downcase().padStart(e," ")+" | "}(t.component)+function(t){const e=7;return t.map((t=>t.take(e).downcase().padEnd(e," ")+" ")).join(", ")}(t.ids)+function(t,e){const n=/(\{[a-zA-Z0-9_]+\})/g;return t.replace(n,((t,n)=>{let r;const s=n.substring(1,n.length-1);return r=s in e?e[s]:s,(""+r).replace(/\n/g," ")}))}(n,t.data)+(s=t.data,Object.is_empty(s)?"":" | "+Ot(s));var s;if("debug"==e||"info"==e?console.log("  "+r):"warn"==e?console.warn("W "+r):"error"==e&&console.error("E "+r),"stack"in t.data){let e=""+(t.data.stack||"can't get stack");console.error("\n"+e)}}function Uo(t){let e,n,r=t[1].title+"";return{c(){e=f("div"),n=p(r),$(e,"class","plot-title")},m(t,r){u(t,e,r),c(e,n)},p(t,e){2&e&&r!==(r=t[1].title+"")&&v(n,r)},d(t){t&&d(e)}}}function Do(t){let e,n;return e=new an({props:{markdown:t[1].desc}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.markdown=t[1].desc),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function Fo(t){let e,n,r,s,o,i,a,l,h,p=t[1].title&&Uo(t),m=t[1].desc&&Do(t);var w=t[2];function b(t){return{props:{block:t[1],is_narrow:!1}}}return w&&(o=new w(b(t))),a=new fn({props:{is_main:!0}}),{c(){e=f("div"),p&&p.c(),n=g(),m&&m.c(),r=g(),s=f("div"),o&&tt(o.$$.fragment),i=g(),tt(a.$$.fragment),$(s,"class","content"),$(e,"class",l="plot-single plot-single-"+t[0]+" plot-style-"+t[3])},m(t,l){u(t,e,l),p&&p.m(e,null),c(e,n),m&&m.m(e,null),c(e,r),c(e,s),o&&et(o,s,null),c(e,i),et(a,e,null),h=!0},p(t,[i]){t[1].title?p?p.p(t,i):(p=Uo(t),p.c(),p.m(e,n)):p&&(p.d(1),p=null),t[1].desc?m?(m.p(t,i),2&i&&W(m,1)):(m=Do(t),m.c(),W(m,1),m.m(e,r)):m&&(I(),J(m,1,1,(()=>{m=null})),Z());const a={};if(2&i&&(a.block=t[1]),w!==(w=t[2])){if(o){I();const t=o;J(t.$$.fragment,1,0,(()=>{nt(t,1)})),Z()}w?(o=new w(b(t)),tt(o.$$.fragment),W(o.$$.fragment,1),et(o,s,null)):o=null}else w&&o.$set(a);(!h||9&i&&l!==(l="plot-single plot-single-"+t[0]+" plot-style-"+t[3]))&&$(e,"class",l)},i(t){h||(W(m),o&&W(o.$$.fragment,t),W(a.$$.fragment,t),h=!0)},o(t){J(m),o&&J(o.$$.fragment,t),J(a.$$.fragment,t),h=!1},d(t){t&&d(e),p&&p.d(),m&&m.d(),o&&nt(o),nt(a)}}}function Ho(t,e,n){let r,{default_title:s}=e,{block_name:o}=e,{data:i}=e,{block_impl:a}=e;return t.$$set=t=>{"default_title"in t&&n(4,s=t.default_title),"block_name"in t&&n(0,o=t.block_name),"data"in t&&n(1,i=t.data),"block_impl"in t&&n(2,a=t.block_impl)},t.$$.update=()=>{18&t.$$.dirty&&(document.title=is_object(i)&&i.title||"id"in i&&""+i.id||s||"PLOT"),2&t.$$.dirty&&n(3,r=i.style||"normal")},[o,i,a,r,s]}class Io extends ot{constructor(t){super(),st(this,t,Ho,Fo,a,{default_title:4,block_name:0,data:1,block_impl:2})}}var Zo=Gt(Object.freeze({__proto__:null,default:{}})),Wo=Yt((function(t,e){var n;t.exports=n=n||function(t,e){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==Xt&&Xt.crypto&&(n=Xt.crypto),!n)try{n=Zo}catch(t){}var r=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),o={},i=o.lib={},a=i.Base={extend:function(t){var e=s(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},l=i.WordArray=a.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,s=t.sigBytes;if(this.clamp(),r%4)for(var o=0;o<s;o++){var i=n[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=i<<24-(r+o)%4*8}else for(var a=0;a<s;a+=4)e[r+a>>>2]=n[a>>>2];return this.sigBytes+=s,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=a.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(r());return new l.init(e,t)}}),c=o.enc={},u=c.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],s=0;s<n;s++){var o=e[s>>>2]>>>24-s%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new l.init(n,e/2)}},d=c.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],s=0;s<n;s++){var o=e[s>>>2]>>>24-s%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new l.init(n,e)}},f=c.Utf8={stringify:function(t){try{return decodeURIComponent(escape(d.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return d.parse(unescape(encodeURIComponent(t)))}},h=i.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=f.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n,r=this._data,s=r.words,o=r.sigBytes,i=this.blockSize,a=o/(4*i),c=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*i,u=t.min(4*c,o);if(c){for(var d=0;d<c;d+=i)this._doProcessBlock(s,d);n=s.splice(0,c),r.sigBytes-=u}return new l.init(n,u)},clone:function(){var t=a.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});i.Hasher=h.extend({cfg:a.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new p.HMAC.init(t,n).finalize(e)}}});var p=o.algo={};return o}(Math)})),Jo=Yt((function(t,e){var n;t.exports=(n=Wo,function(t){var e=n,r=e.lib,s=r.WordArray,o=r.Hasher,i=e.algo,a=[];!function(){for(var e=0;e<64;e++)a[e]=4294967296*t.abs(t.sin(e+1))|0}();var l=i.MD5=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var r=e+n,s=t[r];t[r]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}var o=this._hash.words,i=t[e+0],l=t[e+1],h=t[e+2],p=t[e+3],g=t[e+4],m=t[e+5],w=t[e+6],b=t[e+7],$=t[e+8],v=t[e+9],y=t[e+10],_=t[e+11],k=t[e+12],x=t[e+13],j=t[e+14],O=t[e+15],E=o[0],z=o[1],S=o[2],A=o[3];E=c(E,z,S,A,i,7,a[0]),A=c(A,E,z,S,l,12,a[1]),S=c(S,A,E,z,h,17,a[2]),z=c(z,S,A,E,p,22,a[3]),E=c(E,z,S,A,g,7,a[4]),A=c(A,E,z,S,m,12,a[5]),S=c(S,A,E,z,w,17,a[6]),z=c(z,S,A,E,b,22,a[7]),E=c(E,z,S,A,$,7,a[8]),A=c(A,E,z,S,v,12,a[9]),S=c(S,A,E,z,y,17,a[10]),z=c(z,S,A,E,_,22,a[11]),E=c(E,z,S,A,k,7,a[12]),A=c(A,E,z,S,x,12,a[13]),S=c(S,A,E,z,j,17,a[14]),E=u(E,z=c(z,S,A,E,O,22,a[15]),S,A,l,5,a[16]),A=u(A,E,z,S,w,9,a[17]),S=u(S,A,E,z,_,14,a[18]),z=u(z,S,A,E,i,20,a[19]),E=u(E,z,S,A,m,5,a[20]),A=u(A,E,z,S,y,9,a[21]),S=u(S,A,E,z,O,14,a[22]),z=u(z,S,A,E,g,20,a[23]),E=u(E,z,S,A,v,5,a[24]),A=u(A,E,z,S,j,9,a[25]),S=u(S,A,E,z,p,14,a[26]),z=u(z,S,A,E,$,20,a[27]),E=u(E,z,S,A,x,5,a[28]),A=u(A,E,z,S,h,9,a[29]),S=u(S,A,E,z,b,14,a[30]),E=d(E,z=u(z,S,A,E,k,20,a[31]),S,A,m,4,a[32]),A=d(A,E,z,S,$,11,a[33]),S=d(S,A,E,z,_,16,a[34]),z=d(z,S,A,E,j,23,a[35]),E=d(E,z,S,A,l,4,a[36]),A=d(A,E,z,S,g,11,a[37]),S=d(S,A,E,z,b,16,a[38]),z=d(z,S,A,E,y,23,a[39]),E=d(E,z,S,A,x,4,a[40]),A=d(A,E,z,S,i,11,a[41]),S=d(S,A,E,z,p,16,a[42]),z=d(z,S,A,E,w,23,a[43]),E=d(E,z,S,A,v,4,a[44]),A=d(A,E,z,S,k,11,a[45]),S=d(S,A,E,z,O,16,a[46]),E=f(E,z=d(z,S,A,E,h,23,a[47]),S,A,i,6,a[48]),A=f(A,E,z,S,b,10,a[49]),S=f(S,A,E,z,j,15,a[50]),z=f(z,S,A,E,m,21,a[51]),E=f(E,z,S,A,k,6,a[52]),A=f(A,E,z,S,p,10,a[53]),S=f(S,A,E,z,y,15,a[54]),z=f(z,S,A,E,l,21,a[55]),E=f(E,z,S,A,$,6,a[56]),A=f(A,E,z,S,O,10,a[57]),S=f(S,A,E,z,w,15,a[58]),z=f(z,S,A,E,x,21,a[59]),E=f(E,z,S,A,g,6,a[60]),A=f(A,E,z,S,_,10,a[61]),S=f(S,A,E,z,h,15,a[62]),z=f(z,S,A,E,v,21,a[63]),o[0]=o[0]+E|0,o[1]=o[1]+z|0,o[2]=o[2]+S|0,o[3]=o[3]+A|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,s=8*e.sigBytes;n[s>>>5]|=128<<24-s%32;var o=t.floor(r/4294967296),i=r;n[15+(s+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(s+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,l=a.words,c=0;c<4;c++){var u=l[c];l[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return a},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});function c(t,e,n,r,s,o,i){var a=t+(e&n|~e&r)+s+i;return(a<<o|a>>>32-o)+e}function u(t,e,n,r,s,o,i){var a=t+(e&r|n&~r)+s+i;return(a<<o|a>>>32-o)+e}function d(t,e,n,r,s,o,i){var a=t+(e^n^r)+s+i;return(a<<o|a>>>32-o)+e}function f(t,e,n,r,s,o,i){var a=t+(n^(e|~r))+s+i;return(a<<o|a>>>32-o)+e}e.MD5=o._createHelper(l),e.HmacMD5=o._createHmacHelper(l)}(Math),n.MD5)})),Vo=Yt((function(t,e){var n;t.exports=(n=Wo,function(t){var e=n,r=e.lib,s=r.WordArray,o=r.Hasher,i=e.algo,a=[],l=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var r=2,s=0;s<64;)e(r)&&(s<8&&(a[s]=n(t.pow(r,.5))),l[s]=n(t.pow(r,1/3)),s++),r++}();var c=[],u=i.SHA256=o.extend({_doReset:function(){this._hash=new s.init(a.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],s=n[1],o=n[2],i=n[3],a=n[4],u=n[5],d=n[6],f=n[7],h=0;h<64;h++){if(h<16)c[h]=0|t[e+h];else{var p=c[h-15],g=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,m=c[h-2],w=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;c[h]=g+c[h-7]+w+c[h-16]}var b=r&s^r&o^s&o,$=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),v=f+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&d)+l[h]+c[h];f=d,d=u,u=a,a=i+v|0,i=o,o=s,s=r,r=v+($+b)|0}n[0]=n[0]+r|0,n[1]=n[1]+s|0,n[2]=n[2]+o|0,n[3]=n[3]+i|0,n[4]=n[4]+a|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+f|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,s=8*e.sigBytes;return n[s>>>5]|=128<<24-s%32,n[14+(s+64>>>9<<4)]=t.floor(r/4294967296),n[15+(s+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=o._createHelper(u),e.HmacSHA256=o._createHmacHelper(u)}(Math),n.SHA256)}));function Ko(t,e="md5",n="base58"){let r;if("number"==typeof t&&(t=""+t),"md5"==e)r=Jo(t);else{if("sha256"!=e)throw"unknown hash algo";r=Vo(t)}if("base58"==n)return function(t,e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"){var n,r,s,o,i=[],a="";for(n in t)for(r=0,a+=(s=t[n])||a.length^n?"":1;r in i||s;)s=(o=(o=i[r])?256*o+s:s)/58|0,i[r]=o%58,r++;for(;r--;)a+=e[i[r]];return a}(function(t){var e,n,r=t.words.length,s=new Uint8Array(r<<2),o=0;for(n=0;n<r;n++)e=t.words[n],s[o++]=e>>24,s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=255&e;return s}(r));throw"unknown encoding"}function Xo(t){let e,n,r,s,i,a,l,h,b,y,_,k=(t[2].block.title||t[2].block.id)+"";function x(t,e){return t[1]?Qo:Yo}let j=x(t),O=j(t),E=!t[1]&&ti(t);return{c(){e=f("div"),n=p(k),r=g(),s=f("button"),O.c(),l=g(),E&&E.c(),h=m(),$(s,"class","\n          plot-ec\n          absolute top-0 right-0\n          plot-page-controls-color focus:outline-none\n        "),$(s,"title",i=t[1]?"Expand":"Collapse"),$(e,"class","\n        plot-title font-bold\n        relative cursor-pointer\n      "),$(e,"title",a=t[1]?"Click to Expand":"Click to collapse")},m(o,i){u(o,e,i),c(e,n),c(e,r),c(e,s),O.m(s,null),u(o,l,i),E&&E.m(o,i),u(o,h,i),b=!0,y||(_=[w(s,"click",t[3]),w(e,"click",t[3])],y=!0)},p(t,r){(!b||4&r)&&k!==(k=(t[2].block.title||t[2].block.id)+"")&&v(n,k),j===(j=x(t))&&O?O.p(t,r):(O.d(1),O=j(t),O&&(O.c(),O.m(s,null))),(!b||2&r&&i!==(i=t[1]?"Expand":"Collapse"))&&$(s,"title",i),(!b||2&r&&a!==(a=t[1]?"Click to Expand":"Click to collapse"))&&$(e,"title",a),t[1]?E&&(I(),J(E,1,1,(()=>{E=null})),Z()):E?(E.p(t,r),2&r&&W(E,1)):(E=ti(t),E.c(),W(E,1),E.m(h.parentNode,h))},i(t){b||(W(E),b=!0)},o(t){J(E),b=!1},d(t){t&&d(e),O.d(),t&&d(l),E&&E.d(t),t&&d(h),y=!1,o(_)}}}function Go(t){let e,n;return e=new qt({props:{error:t[2].message}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.error=t[2].message),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function Yo(t){let e,r=`<svg class="${"h-5 w-5 p-0.5"}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>`;let s;return{c(){s=m(),e=new E(s)},m(t,n){e.m(r,t,n),u(t,s,n)},p:n,d(t){t&&d(s),t&&e.d()}}}function Qo(t){let e,r=`<svg class="${"h-5 w-5 p-0.5"}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>`;let s;return{c(){s=m(),e=new E(s)},m(t,n){e.m(r,t,n),u(t,s,n)},p:n,d(t){t&&d(s),t&&e.d()}}}function ti(t){let e,n,r,s,o,i=t[2].block.desc&&ei(t);var a=t[2].klass;function l(t){return{props:{block:t[2].ndata,is_narrow:!1}}}return a&&(r=new a(l(t))),{c(){e=f("div"),i&&i.c(),n=g(),r&&tt(r.$$.fragment),s=m(),$(e,"class","plot-desc")},m(t,a){u(t,e,a),i&&i.m(e,null),u(t,n,a),r&&et(r,t,a),u(t,s,a),o=!0},p(t,n){t[2].block.desc?i?(i.p(t,n),4&n&&W(i,1)):(i=ei(t),i.c(),W(i,1),i.m(e,null)):i&&(I(),J(i,1,1,(()=>{i=null})),Z());const o={};if(4&n&&(o.block=t[2].ndata),a!==(a=t[2].klass)){if(r){I();const t=r;J(t.$$.fragment,1,0,(()=>{nt(t,1)})),Z()}a?(r=new a(l(t)),tt(r.$$.fragment),W(r.$$.fragment,1),et(r,s.parentNode,s)):r=null}else a&&r.$set(o)},i(t){o||(W(i),r&&W(r.$$.fragment,t),o=!0)},o(t){J(i),r&&J(r.$$.fragment,t),o=!1},d(t){t&&d(e),i&&i.d(),t&&d(n),t&&d(s),r&&nt(r,t)}}}function ei(t){let e,n;return e=new an({props:{markdown:t[2].block.desc}}),{c(){tt(e.$$.fragment)},m(t,r){et(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.markdown=t[2].block.desc),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function ni(t){let e,n,r,s,o;const i=[Go,Xo],a=[];function l(t,e){return t[2].is_error?0:1}return n=l(t),r=a[n]=i[n](t),{c(){e=f("div"),r.c(),$(e,"id",s="block_"+t[0].id),$(e,"class","plot-block-container")},m(t,r){u(t,e,r),a[n].m(e,null),o=!0},p(t,[c]){let u=n;n=l(t),n===u?a[n].p(t,c):(I(),J(a[u],1,1,(()=>{a[u]=null})),Z(),r=a[n],r?r.p(t,c):(r=a[n]=i[n](t),r.c()),W(r,1),r.m(e,null)),(!o||1&c&&s!==(s="block_"+t[0].id))&&$(e,"id",s)},i(t){o||(W(r),o=!0)},o(t){J(r),o=!1},d(t){t&&d(e),a[n].d()}}}function ri(t,e,n){let r,{block:s}=e,{is_collapsed:o}=e,{switch_collapsed:i}=e;return t.$$set=t=>{"block"in t&&n(0,s=t.block),"is_collapsed"in t&&n(1,o=t.is_collapsed),"switch_collapsed"in t&&n(4,i=t.switch_collapsed)},t.$$.update=()=>{if(1&t.$$.dirty)if(s.is_error)n(2,r=s);else{const t=Lo.to_safe()(s.value,void 0);if(t.is_error)n(2,r=t);else if(t.value){const{name:e,klass:o,ndata:i}=t.value;n(2,r={is_error:!1,block:s.value,ndata:i,block_name:e,klass:o})}else n(2,r={is_error:!0,message:"Can't find block definition"})}},[s,o,r,function(t){t.preventDefault(),t.stopPropagation(),i(s.id)},i]}test(Ko,(()=>{assert.equal(Ko("some"),"UTqN8G7jWovoR1rVejd8M")}));class si extends ot{constructor(t){super(),st(this,t,ri,ni,a,{block:0,is_collapsed:1,switch_collapsed:4})}}function oi(t,e,n){const r=t.slice();return r[9]=e[n],r}function ii(t){let e,n,r=t[0].title+"";return{c(){e=f("div"),n=p(r),$(e,"class","plot-title")},m(t,r){u(t,e,r),c(e,n)},p(t,e){1&e&&r!==(r=t[0].title+"")&&v(n,r)},d(t){t&&d(e)}}}function ai(t){let e,n,r;return n=new an({props:{markdown:t[0].desc}}),{c(){e=f("div"),tt(n.$$.fragment),$(e,"class","plot-desc")},m(t,s){u(t,e,s),et(n,e,null),r=!0},p(t,e){const r={};1&e&&(r.markdown=t[0].desc),n.$set(r)},i(t){r||(W(n.$$.fragment,t),r=!0)},o(t){J(n.$$.fragment,t),r=!1},d(t){t&&d(e),nt(n)}}}function li(t,e){let n,r,s;return r=new si({props:{block:e[9],is_collapsed:e[1].collapsed[e[9].id],switch_collapsed:e[5]}}),{key:t,first:null,c(){n=m(),tt(r.$$.fragment),this.first=n},m(t,e){u(t,n,e),et(r,t,e),s=!0},p(t,n){e=t;const s={};4&n&&(s.block=e[9]),6&n&&(s.is_collapsed=e[1].collapsed[e[9].id]),r.$set(s)},i(t){s||(W(r.$$.fragment,t),s=!0)},o(t){J(r.$$.fragment,t),s=!1},d(t){t&&d(n),nt(r,t)}}}function ci(t){let e,n,r,s,o,i,a,l,h,p,m,b,v=[],y=new Map,_=t[0].title&&ii(t),k=t[0].desc&&ai(t),x=t[2];const j=t=>t[9].id;for(let e=0;e<x.length;e+=1){let n=oi(t,x,e),r=j(n);y.set(r,v[e]=li(r,n))}return i=new yn({props:{messages:t[3]}}),l=new fn({props:{is_main:!0}}),{c(){e=f("div"),_&&_.c(),n=g(),k&&k.c(),r=g(),s=f("div");for(let t=0;t<v.length;t+=1)v[t].c();o=g(),tt(i.$$.fragment),a=g(),tt(l.$$.fragment),$(s,"class","blocks"),$(e,"class",h="plot-page plot-style-"+t[4])},m(d,f){u(d,e,f),_&&_.m(e,null),c(e,n),k&&k.m(e,null),c(e,r),c(e,s);for(let t=0;t<v.length;t+=1)v[t].m(s,null);c(e,o),et(i,e,null),c(e,a),et(l,e,null),p=!0,m||(b=w(e,"click",t[8]),m=!0)},p(t,[o]){t[0].title?_?_.p(t,o):(_=ii(t),_.c(),_.m(e,n)):_&&(_.d(1),_=null),t[0].desc?k?(k.p(t,o),1&o&&W(k,1)):(k=ai(t),k.c(),W(k,1),k.m(e,r)):k&&(I(),J(k,1,1,(()=>{k=null})),Z()),38&o&&(x=t[2],I(),v=Y(v,o,j,1,t,x,y,s,G,li,null,oi),Z());const a={};8&o&&(a.messages=t[3]),i.$set(a),(!p||16&o&&h!==(h="plot-page plot-style-"+t[4]))&&$(e,"class",h)},i(t){if(!p){W(k);for(let t=0;t<x.length;t+=1)W(v[t]);W(i.$$.fragment,t),W(l.$$.fragment,t),p=!0}},o(t){J(k);for(let t=0;t<v.length;t+=1)J(v[t]);J(i.$$.fragment,t),J(l.$$.fragment,t),p=!1},d(t){t&&d(e),_&&_.d(),k&&k.d();for(let t=0;t<v.length;t+=1)v[t].d();nt(i),nt(l),m=!1,b()}}}const ui={match_and_normalize:t=>{if(is_object(t)&&"page"in t)return t}};function di(t,e,n){let r,s,o,i,{default_title:a}=e,{data:l}=e,c={collapsed:{},show_controls:!1};return t.$$set=t=>{"default_title"in t&&n(6,a=t.default_title),"data"in t&&n(0,l=t.data)},t.$$.update=()=>{1&t.$$.dirty&&n(7,r=function(t){const e=[],n=new Set;for(let r=0;r<t.length;r++){const s=t[r];if(!is_object(s)){e.add({is_error:!0,id:`error_${r}`,message:"Invalid block data"});continue}const o=s.hash||Ko(to_json(s),"md5").take(4);let i=void 0!==s.id&&""+s.id||s.title&&Ko(s.title,"md5")||o;n.has(i)?e.add({is_error:!0,id:`error_${r}`,message:`Duplicate block id '${i}'`}):(n.add(i),e.push({id:i,is_error:!1,value:Object.assign(Object.assign({},s),{id:i,hash:o})}))}return{blocks:e,messages:_n([])}}(l.page)),128&t.$$.dirty&&n(2,s=r.blocks),128&t.$$.dirty&&n(3,o=r.messages),65&t.$$.dirty&&(document.title=l.title||"id"in l&&""+l.id||a||"PLOT"),1&t.$$.dirty&&n(4,i=l.style||"normal")},[l,c,s,o,i,function(t){t in c.collapsed?delete c.collapsed[t]:n(1,c.collapsed[t]=!0,c),n(1,c=Object.assign({},c))},a,r,()=>n(1,c={...c,show_controls:!0})]}var fi=Object.freeze({__proto__:null,default:class extends ot{constructor(t){super(),st(this,t,di,ci,a,{default_title:6,data:0})}},definition:ui});t.apps.page=fi;const hi=new Bo("plot");e.run=async function(e){try{let n,r,s,o=document.getElementById("data");if(e&&"data"in e)n=e.data;else if(o){if(r=o.getAttribute("type"),!r)throw"can't get data type on data script with id 'data'";const t=o.innerHTML;n=await Zt(t,r)}else{const t=function(){const t=new URLSearchParams(window.location.search).get("data_url");if(t)return t;{let t=window.location.pathname;t.startsWith("/")||(t+="/");const e=/:([^:]+)$/i;return t.replace(e,"")}}();s=t.split("/").last().replace(/\.[^\.]+$/,""),r=Lt(t),n=await Ht(t)}await async function(t){if(is_object(t)&&t.css){const e=t.css;is_string(e)?function(t){const e=document.createElement("style");e.textContent=t,document.head.append(e)}(e):is_object(e)&&"url"in e?await Nt([e.url],"parallel"):hi.warn("invalid customcss format")}}(n);const i=Lo(n,r);if(i)document.body.classList.add("plot-single-body"),new Io({target:document.body,props:{default_title:s,block_name:i.name,data:i.ndata,block_impl:i.klass}});else{const e=function(e){if(null==e)return;if(is_object(e)){const n=e;if(n.app){if(!is_array(n.app)||2!=n.app.length)throw"invalid app, it should be `app: [app_name, 0.1]`";const e=n.app[0],{definition:r,default:s}=t.apps[e],o=r.match_and_normalize(n);if(!o)throw`Data not matching '${e}' app`;return{name:e,klass:s,ndata:o}}for(const e in t.apps){const{definition:r,default:s}=t.apps[e],o=r.match_and_normalize(n);if(o)return{name:e,klass:s,ndata:o}}}}(n);if(!e)throw"can't find block or app";document.body.classList.add(`plot-${e.name}-body`),new e.klass({target:document.body,props:{default_title:s,data:e.ndata}})}}catch(t){console.error(t),new qt({target:document.body,props:{error:t}})}};const pi=window.on_plot_loaded;pi&&pi()}();
