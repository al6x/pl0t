!function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function r(t){return"function"==typeof t}function s(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function i(t,n){t.appendChild(n)}function l(t,n,e){t.insertBefore(n,e||null)}function a(t){t.parentNode.removeChild(t)}function c(t){return document.createElement(t)}function u(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function m(){return f("")}function p(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function h(t){return function(n){return n.preventDefault(),t.call(this,n)}}function g(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function w(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function $(t,n){t.value=null==n?"":n}function y(t,n,e,o){t.style.setProperty(n,e,o?"important":"")}let v;function b(t){v=t}function x(){if(!v)throw new Error("Function called outside component initialization");return v}const k=[],_=[],M=[],q=[],j=Promise.resolve();let E=!1;function S(t){M.push(t)}function O(t){q.push(t)}let A=!1;const N=new Set;function C(){if(!A){A=!0;do{for(let t=0;t<k.length;t+=1){const n=k[t];b(n),T(n.$$)}for(b(null),k.length=0;_.length;)_.pop()();for(let t=0;t<M.length;t+=1){const n=M[t];N.has(n)||(N.add(n),n())}M.length=0}while(k.length);for(;q.length;)q.pop()();E=!1,A=!1,N.clear()}}function T(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(S)}}const J=new Set;let F;function L(){F={r:0,c:[],p:F}}function z(){F.r||o(F.c),F=F.p}function P(t,n){t&&t.i&&(J.delete(t),t.i(n))}function I(t,n,e,o){if(t&&t.o){if(J.has(t))return;J.add(t),F.c.push((()=>{J.delete(t),o&&(e&&t.d(1),o())})),t.o(n)}}function D(t,n){const e=n.token={};function o(t,o,r,s){if(n.token!==e)return;n.resolved=s;let i=n.ctx;void 0!==r&&(i=i.slice(),i[r]=s);const l=t&&(n.current=t)(i);let a=!1;n.block&&(n.blocks?n.blocks.forEach(((t,e)=>{e!==o&&t&&(L(),I(t,1,1,(()=>{n.blocks[e]===t&&(n.blocks[e]=null)})),z())})):n.block.d(1),l.c(),P(l,1),l.m(n.mount(),n.anchor),a=!0),n.block=l,n.blocks&&(n.blocks[o]=l),a&&C()}if((r=t)&&"object"==typeof r&&"function"==typeof r.then){const e=x();if(t.then((t=>{b(e),o(n.then,1,n.value,t),b(null)}),(t=>{if(b(e),o(n.catch,2,n.error,t),b(null),!n.hasCatch)throw t})),n.current!==n.pending)return o(n.pending,0),!0}else{if(n.current!==n.then)return o(n.then,1,n.value,t),!0;n.resolved=t}var r}function R(t,n){t.d(1),n.delete(t.key)}function B(t,n){I(t,1,1,(()=>{n.delete(t.key)}))}function W(t,n,e,o,r,s,i,l,a,c,u,f){let d=t.length,m=s.length,p=d;const h={};for(;p--;)h[t[p].key]=p;const g=[],w=new Map,$=new Map;for(p=m;p--;){const t=f(r,s,p),l=e(t);let a=i.get(l);a?o&&a.p(t,n):(a=c(l,t),a.c()),w.set(l,g[p]=a),l in h&&$.set(l,Math.abs(p-h[l]))}const y=new Set,v=new Set;function b(t){P(t,1),t.m(l,u),i.set(t.key,t),u=t.first,m--}for(;d&&m;){const n=g[m-1],e=t[d-1],o=n.key,r=e.key;n===e?(u=n.first,d--,m--):w.has(r)?!i.has(o)||y.has(o)?b(n):v.has(r)?d--:$.get(o)>$.get(r)?(v.add(o),b(n)):(y.add(r),d--):(a(e,i),d--)}for(;d--;){const n=t[d];w.has(n.key)||a(n,i)}for(;m;)b(g[m-1]);return g}function K(t,n,e){const o=t.$$.props[n];void 0!==o&&(t.$$.bound[o]=e,e(t.$$.ctx[o]))}function U(t){t&&t.c()}function H(t,e,s,i){const{fragment:l,on_mount:a,on_destroy:c,after_update:u}=t.$$;l&&l.m(e,s),i||S((()=>{const e=a.map(n).filter(r);c?c.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(S)}function G(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function Q(t,n){-1===t.$$.dirty[0]&&(k.push(t),E||(E=!0,j.then(C)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function V(n,r,s,i,l,c,u=[-1]){const f=v;b(n);const d=n.$$={fragment:null,ctx:null,props:c,update:t,not_equal:l,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:r.context||[]),callbacks:e(),dirty:u,skip_bound:!1};let m=!1;if(d.ctx=s?s(n,r.props||{},((t,e,...o)=>{const r=o.length?o[0]:e;return d.ctx&&l(d.ctx[t],d.ctx[t]=r)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](r),m&&Q(n,t)),e})):[],d.update(),m=!0,o(d.before_update),d.fragment=!!i&&i(d.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);d.fragment&&d.fragment.l(t),t.forEach(a)}else d.fragment&&d.fragment.c();r.intro&&P(n.$$.fragment),H(n,r.target,r.anchor,r.customElement),C()}b(f)}class X{$destroy(){G(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Y=new Map;let Z="Deno"in window?window.Deno:void 0;function tt(t){return t&&t.toJSON?t.toJSON():t}const nt=[];let et,ot=0,rt=!1;function st(){rt||(rt=!0,setTimeout((async()=>{for(;ot<nt.length;){let{name:t,test:n}=nt[ot];ot+=1;try{console.log(`  test | ${t}`);let e=n();e&&await e}catch(n){if(console.error(`  test | ${t} failed`),console.error(n),null!=Z)throw n}}rt=!1}),0))}window.runTests=st;try{et=(function(t,n){if(!Y.has(t))try{Y.set(t,Deno.env.get(t))}catch(n){Y.set(t,void 0)}const e=Y.get(t)||n;if(null==e)throw new Error(`env var '${t}' is not defined`);return e}("test")||"").toLowerCase()}catch(t){et="false"}let it="all"==et||"true"==et;function lt(t,n){nt.push({name:t,test:n}),(it||t.toLowerCase()==et)&&st()}const at=function(t,n){const e=n?n instanceof Function?n():n:"Assertion error!";if(!t)throw new Error(e)};function ct(t){return null===t||"object"!=typeof t?t:Array.isArray(t)?t.map(ct):"toJSON"in t?ct(t.toJSON()):Object.assign({},...Object.entries(t).sort((([t],[n])=>t.localeCompare(n))).map((([t,n])=>({[t]:ct(n)}))))}function ut(t,n=!0){return n?JSON.stringify(ct(t),null,2):JSON.stringify(ct(t))}function ft(t,n){return null===(t=n(t))||"object"!=typeof t?t:"map"in t?t.map((t=>ft(t,n))):Object.assign({},...Object.entries(t).map((([t,e])=>({[t]:ft(e,n)}))))}function dt(t,n){const e=n.match(t);return e?1==e.length?[]:e.slice(1,e.length):[]}function mt(t,n){if(t instanceof Array)for(let e=0;e<t.length;e++)n(t[e],e);else if(t instanceof Map)for(const[e,o]of t)n(o,e);else for(const e in t)t.hasOwnProperty(e)&&n(t[e],e)}function pt(t,n){const e=n instanceof Function?n:t=>t==n;if(t instanceof Array)for(let n=0;n<t.length;n++){if(e(t[n],n))return t[n];for(const n in t)if(t.hasOwnProperty(n)&&e(t[n],n))return t[n]}}function ht(t,n){if(n=n||(t=>t),0==t.length)return-1;let e=n(t[0]),o=0;for(let r=1;r<t.length;r++){let s=n(t[r]);s<e&&(e=s,o=r)}return o}function gt(t,n){if(n=n||(t=>t),0==t.length)return-1;let e=n(t[0]),o=0;for(let r=1;r<t.length;r++){let s=n(t[r]);s>e&&(e=s,o=r)}return o}function wt(t,n=!1){return $t(t,.5,n)}function $t(t,n,e=!1){const o=e?t:[...t].sort(((t,n)=>t-n)),r=(o.length-1)*n,s=Math.floor(r),i=r-s;return void 0!==o[s+1]?o[s]+i*(o[s+1]-o[s]):o[s]}function yt(t,n){const e=[];let o=0;for(;;){const r=[];o<t.length&&e.push(r);for(let s=0;s<n;s++){if(!(o+s<t.length))return e;r.push(t[o+s])}o+=n}}function vt(t,n){if(t instanceof Array){const e=new Array,o=new Array,r=n instanceof Function?n:(t,e)=>n.includes(e);return mt(t,((t,n)=>r(t,n)?e.push(t):o.push(t))),[e,o]}{const e={},o={},r=n instanceof Function?n:(t,e)=>n.includes(e);return mt(t,((t,n)=>r(t,n)?e[n]=t:o[n]=t)),[e,o]}}function bt(t,n,e=!1){if(0==t.length)return t;{const o=typeof n(t[0]);let r,s;if("number"==o)r=function(t,e){return n(t)-n(e)};else if("boolean"==o)r=function(t,e){return(n(t)?1:0)-(n(e)?1:0)};else{if("string"!=o)throw new Error(`invalid return type for 'by' '${o}'`);r=function(t,e){return n(t).localeCompare(n(e))}}return s=[...t],s.sort(r),e&&s.reverse(),s}}function xt(t,n){if(t instanceof Array){const e=[];return mt(t,((t,o)=>{const r=n(t,o);!1!==r&&e.push(r)})),e}if(t instanceof Map){const e=new Map;return mt(t,((t,o)=>{const r=n(t,o);!1!==r&&e.set(o,r)})),e}{const e={};return mt(t,((t,o)=>{const r=n(t,o);!1!==r&&(e[o]=r)})),e}}function kt(t,n){if("object"==typeof t&&"found"in t){if(t.found)return t.value;throw new Error(t.message||`value${n?" "+n:""} not found`)}if("string"==typeof t){if(""==t)throw new Error(`string value${n?" "+n:""} not found`);return t}if(void 0===t)throw new Error(`value${n?" "+n:""} not defined`);return t}function _t(t,n,e){return mt(t,((t,o)=>n=e(n,t,o))),n}function Mt(t){return _t(t,0,((t,n)=>t+n))}function qt(t,n){if(t instanceof Array)return t.map(n);if(t instanceof Map){const e=new Map;return mt(t,((t,o)=>e.set(o,n(t,o)))),e}{const e={};return mt(t,((t,o)=>e[o]=n(t,o))),e}}function jt(t,n=0){return 0==n?Math.round(t):Math.round((t+Number.EPSILON)*Math.pow(10,n))/Math.pow(10,n)}function Et(t){switch(t){case"left":return"text-left";case"center":return"text-center";case"right":return"text-right"}}function St(n){let e,o;return{c(){e=c("div"),o=f(n[0]),g(e,"class",n[1])},m(t,n){l(t,e,n),i(e,o)},p(t,[n]){1&n&&w(o,t[0])},i:t,o:t,d(t){t&&a(e)}}}at.equal=(t,n,e)=>{if(!function(t,n){return ut(t)===ut(n)}(t,n)){const o=e?e instanceof Function?e():e:`Assertion error: ${ut(t,!0)} != ${ut(n,!0)}`;throw new Error(o)}},at.fail=(t,n)=>{let e=!1;try{t()}catch(t){e=!0}if(!e){const t=n?n instanceof Function?n():n:"Assertion error: expected to fail but didn't";throw new Error(t)}},at.approxEqual=(t,n,e,o)=>{o=o||.001;const r=(Math.abs(t)+Math.abs(n))/2*o;if(Math.abs(t-n)>r){const o=e?e instanceof Function?e():e:`Assertion error: ${ut(t,!0)} != ${ut(n,!0)}`;throw new Error(o)}},lt("deepMap",(()=>{class t{constructor(t){this.v=t}toJSON(){return this.v}}const n=new t([1,2]);at.equal(ft(n,tt),[1,2]);const e=new t([n,3]);at.equal(ft(e,tt),[[1,2],3])})),Promise.prototype.toJSON=function(){return"Promise"},Object.defineProperty(Promise.prototype,"cmap",{configurable:!1,enumerable:!1}),lt("parse",(()=>{at.equal(dt(/.+ (\d+) (\d+)/,"a 22 45"),["22","45"]),at.equal(dt(/[^;]+;/,"drop table; create table;"),[])})),lt("parseNamed",(()=>{at.equal(function(t,n){const e=n.match(t);return(null==e?void 0:e.groups)||{}}(/.+ (?<a>\d+) (?<b>\d+)/,"a 22 45"),{a:"22",b:"45"})})),lt("dedent",(()=>{at.equal(function(t){const n=dt(/^(\s+)/,t=t.replace(/^\n*/,""));return 0==n.length?t:t.replace(new RegExp("^\\s{"+n[0].length+"}","gm"),"")}("\n  a\n  b\n    c"),"a\nb\n  c")})),lt("groupByN",(()=>{at.equal(yt([1,2,3],2),[[1,2],[3]]),at.equal(yt([1,2],2),[[1,2]]),at.equal(yt([1],2),[[1]]),at.equal(yt([],2),[])})),lt("sortBy",(()=>{at.equal(bt([{v:!0},{v:!1}],(({v:t})=>t)),[{v:!1},{v:!0}]),at.equal(bt([{v:"b"},{v:""},{v:"c"}],(({v:t})=>t)),[{v:""},{v:"b"},{v:"c"}])})),lt("pick",(()=>{var t;at.equal((t=["a"],vt({a:1,b:2},((n,e)=>t.includes(e)))[0]),{a:1})})),lt("round",(()=>{at.equal(jt(.05860103881518906,2),.06)})),Error.prototype.toJSON=function(){return{message:this.message,stack:this.stack}},Map.prototype.toJSON=function(){return _t(this,{},((t,n,e)=>(t[e]=n,t)))};function Ot(t,n,e){let o,{options:r}=n,{value:s}=n;const i=Et(r.align||"left")+(r.small?" text-xs":"");return t.$$set=t=>{"options"in t&&e(2,r=t.options),"value"in t&&e(3,s=t.value)},t.$$.update=()=>{8&t.$$.dirty&&e(0,o=null==s?"":s)},[o,i,r,s]}var At=Object.freeze({__proto__:null,default:class extends X{constructor(t){super(),V(this,t,Ot,St,s,{options:2,value:3})}},compatibleTypes:["number","boolean","string"],align:function(t){return t.align||"left"}});function Nt(n){let e,o,r=(n[0]?n[2]:n[3])+"";return{c(){e=c("div"),o=f(r),g(e,"class",n[1])},m(t,n){l(t,e,n),i(e,o)},p(t,[n]){1&n&&r!==(r=(t[0]?t[2]:t[3])+"")&&w(o,r)},i:t,o:t,d(t){t&&a(e)}}}function Ct(t,n,e){let{options:o}=n,{value:r}=n;const s=Et(o.align||"center"),i=o.true||"✓",l=o.false||"";return t.$$set=t=>{"options"in t&&e(4,o=t.options),"value"in t&&e(0,r=t.value)},[r,s,i,l,o]}var Tt=Object.freeze({__proto__:null,default:class extends X{constructor(t){super(),V(this,t,Ct,Nt,s,{options:4,value:0})}},compatibleTypes:["boolean"],align:function(t){return t.align||"center"}});function Jt(n){let e,o;return{c(){e=c("div"),o=f(n[0]),g(e,"class",n[1])},m(t,n){l(t,e,n),i(e,o)},p(t,[n]){1&n&&w(o,t[0])},i:t,o:t,d(t){t&&a(e)}}}function Ft(t,n,e){let o,{options:r}=n,{value:s}=n;const i="round"in r?r.round:2,l=Et(r.align||"right")+(r.small?" text-xs":"");return t.$$set=t=>{"options"in t&&e(2,r=t.options),"value"in t&&e(3,s=t.value)},t.$$.update=()=>{8&t.$$.dirty&&e(0,o=void 0===s?"":""+(void 0!==i?s.toFixed(i):s))},[o,l,r,s]}var Lt=Object.freeze({__proto__:null,default:class extends X{constructor(t){super(),V(this,t,Ft,Jt,s,{options:2,value:3})}},compatibleTypes:["number"],align:function(t){return t.align||"right"}});function zt(t,n,e){const o=t.slice();return o[7]=n[e],o}function Pt(t,n,e){const o=t.slice();return o[7]=n[e],o}function It(t,n,e){const o=t.slice();return o[7]=n[e],o}function Dt(t){let n,e,o;return{c(){n=u("svg"),e=u("title"),o=f(t[4]),g(n,"class","plot-line-format text-center")},m(t,r){l(t,n,r),i(n,e),i(e,o)},p(t,n){16&n&&w(o,t[4])},d(t){t&&a(n)}}}function Rt(t){let n;function e(t,n){return t[3]<=0?Kt:t[2]>=0?Wt:Bt}let o=e(t),r=o(t);return{c(){r.c(),n=m()},m(t,e){r.m(t,e),l(t,n,e)},p(t,s){o===(o=e(t))&&r?r.p(t,s):(r.d(1),r=o(t),r&&(r.c(),r.m(n.parentNode,n)))},d(t){r.d(t),t&&a(n)}}}function Bt(t){let n,e,o,r,s=[],c=new Map,d=t[1].nticks;const m=t=>t[7];for(let n=0;n<d.length;n+=1){let e=zt(t,d,n),o=m(e);c.set(o,s[n]=Gt(o,e))}function p(t,n){return t[0]>0?Vt:Qt}let h=p(t),$=h(t);return{c(){n=u("svg"),e=u("title"),o=f(t[4]);for(let t=0;t<s.length;t+=1)s[t].c();r=u("line"),$.c(),g(r,"x1","50%"),g(r,"y1","5%"),g(r,"x2","50%"),g(r,"y2","95%"),g(r,"stroke",en),g(r,"stroke-width","1"),g(n,"class","plot-line-format text-center")},m(t,a){l(t,n,a),i(n,e),i(e,o);for(let t=0;t<s.length;t+=1)s[t].m(n,null);i(n,r),$.m(n,null)},p(t,e){16&e&&w(o,t[4]),2&e&&(d=t[1].nticks,s=W(s,e,m,1,t,d,c,n,R,Gt,r,zt)),h===(h=p(t))&&$?$.p(t,e):($.d(1),$=h(t),$&&($.c(),$.m(n,null)))},d(t){t&&a(n);for(let t=0;t<s.length;t+=1)s[t].d();$.d()}}}function Wt(t){let n,e,o,r,s,c=[],d=new Map,m=t[1].nticks;const p=t=>t[7];for(let n=0;n<m.length;n+=1){let e=Pt(t,m,n),o=p(e);d.set(o,c[n]=Xt(o,e))}return{c(){n=u("svg"),e=u("title"),o=f(t[4]);for(let t=0;t<c.length;t+=1)c[t].c();r=u("rect"),g(r,"x","0%"),g(r,"y","25%"),g(r,"width",s=100*t[0]+"%"),g(r,"height","50%"),g(r,"fill",nn),g(n,"class","plot-line-format text-center")},m(t,s){l(t,n,s),i(n,e),i(e,o);for(let t=0;t<c.length;t+=1)c[t].m(n,null);i(n,r)},p(t,e){16&e&&w(o,t[4]),2&e&&(m=t[1].nticks,c=W(c,e,p,1,t,m,d,n,R,Xt,r,Pt)),1&e&&s!==(s=100*t[0]+"%")&&g(r,"width",s)},d(t){t&&a(n);for(let t=0;t<c.length;t+=1)c[t].d()}}}function Kt(t){let n,e,o,r,s,c,d=[],m=new Map,p=t[1].nticks;const h=t=>t[7];for(let n=0;n<p.length;n+=1){let e=It(t,p,n),o=h(e);m.set(o,d[n]=Yt(o,e))}return{c(){n=u("svg"),e=u("title"),o=f(t[4]);for(let t=0;t<d.length;t+=1)d[t].c();r=u("rect"),g(r,"x",s=100- -100*t[0]+"%"),g(r,"y","25%"),g(r,"width",c=-100*t[0]+"%"),g(r,"height","50%"),g(r,"fill",nn),g(n,"class","plot-line-format text-center")},m(t,s){l(t,n,s),i(n,e),i(e,o);for(let t=0;t<d.length;t+=1)d[t].m(n,null);i(n,r)},p(t,e){16&e&&w(o,t[4]),2&e&&(p=t[1].nticks,d=W(d,e,h,1,t,p,m,n,R,Yt,r,It)),1&e&&s!==(s=100- -100*t[0]+"%")&&g(r,"x",s),1&e&&c!==(c=-100*t[0]+"%")&&g(r,"width",c)},d(t){t&&a(n);for(let t=0;t<d.length;t+=1)d[t].d()}}}function Ut(t){let n,e,o;return{c(){n=u("line"),g(n,"x1",e=50- -50*t[7]+"%"),g(n,"y1","5%"),g(n,"x2",o=50- -50*t[7]+"%"),g(n,"y2","25%"),g(n,"stroke",en),g(n,"stroke-width","1")},m(t,e){l(t,n,e)},p(t,r){2&r&&e!==(e=50- -50*t[7]+"%")&&g(n,"x1",e),2&r&&o!==(o=50- -50*t[7]+"%")&&g(n,"x2",o)},d(t){t&&a(n)}}}function Ht(t){let n,e,o;return{c(){n=u("line"),g(n,"x1",e=50+50*t[7]+"%"),g(n,"y1","5%"),g(n,"x2",o=50+50*t[7]+"%"),g(n,"y2","25%"),g(n,"stroke",en),g(n,"stroke-width","1")},m(t,e){l(t,n,e)},p(t,r){2&r&&e!==(e=50+50*t[7]+"%")&&g(n,"x1",e),2&r&&o!==(o=50+50*t[7]+"%")&&g(n,"x2",o)},d(t){t&&a(n)}}}function Gt(t,n){let e,o;function r(t,n){return t[7]>0?Ht:Ut}let s=r(n),i=s(n);return{key:t,first:null,c(){e=m(),i.c(),o=m(),this.first=e},m(t,n){l(t,e,n),i.m(t,n),l(t,o,n)},p(t,e){s===(s=r(n=t))&&i?i.p(n,e):(i.d(1),i=s(n),i&&(i.c(),i.m(o.parentNode,o)))},d(t){t&&a(e),i.d(t),t&&a(o)}}}function Qt(t){let n,e,o;return{c(){n=u("rect"),g(n,"x",e=50- -50*t[0]+"%"),g(n,"y","25%"),g(n,"width",o=-50*t[0]+"%"),g(n,"height","50%"),g(n,"fill",nn)},m(t,e){l(t,n,e)},p(t,r){1&r&&e!==(e=50- -50*t[0]+"%")&&g(n,"x",e),1&r&&o!==(o=-50*t[0]+"%")&&g(n,"width",o)},d(t){t&&a(n)}}}function Vt(t){let n,e;return{c(){n=u("rect"),g(n,"x","50%"),g(n,"y","25%"),g(n,"width",e=50*t[0]+"%"),g(n,"height","50%"),g(n,"fill",nn)},m(t,e){l(t,n,e)},p(t,o){1&o&&e!==(e=50*t[0]+"%")&&g(n,"width",e)},d(t){t&&a(n)}}}function Xt(t,n){let e,o,r;return{key:t,first:null,c(){e=u("line"),g(e,"x1",o=100*n[7]+"%"),g(e,"y1","5%"),g(e,"x2",r=100*n[7]+"%"),g(e,"y2","25%"),g(e,"stroke",en),g(e,"stroke-width","1"),this.first=e},m(t,n){l(t,e,n)},p(t,s){n=t,2&s&&o!==(o=100*n[7]+"%")&&g(e,"x1",o),2&s&&r!==(r=100*n[7]+"%")&&g(e,"x2",r)},d(t){t&&a(e)}}}function Yt(t,n){let e,o,r;return{key:t,first:null,c(){e=u("line"),g(e,"x1",o=100- -100*n[7]+"%"),g(e,"y1","5%"),g(e,"x2",r=100- -100*n[7]+"%"),g(e,"y2","25%"),g(e,"stroke",en),g(e,"stroke-width","1"),this.first=e},m(t,n){l(t,e,n)},p(t,s){n=t,2&s&&o!==(o=100- -100*n[7]+"%")&&g(e,"x1",o),2&s&&r!==(r=100- -100*n[7]+"%")&&g(e,"x2",r)},d(t){t&&a(e)}}}function Zt(n){let e;function o(t,n){return t[1]&&null!=t[0]?Rt:Dt}let r=o(n),s=r(n);return{c(){s.c(),e=m()},m(t,n){s.m(t,n),l(t,e,n)},p(t,[n]){r===(r=o(t))&&s?s.p(t,n):(s.d(1),s=r(t),s&&(s.c(),s.m(e.parentNode,e)))},i:t,o:t,d(t){s.d(t),t&&a(e)}}}const tn=(t,n,e)=>{const o=new Set,r=e.scale||"linear";e.log_unit&&("log"!=e.scale&&o.add(`column ${t} 'line.log_unit' could be used only with log scale`),n=n.map((t=>void 0!==t&&t>=0&&t<1?1:t)));const s=xt(n,(t=>void 0!==t&&t));if(0==s.length)return{column:n,warnings:[],stats:void 0};let i;{let n=s[0],r=s[0];for(const t of[...s,...e.ticks||[]])t>r&&(r=t),t<n&&(n=t);e.domain?(i=e.domain,n<i[0]&&(o.add(`column ${t} 'line.domain' min value is greather than actual min ${n}`),i=[n,r]),r>i[1]&&(o.add(`column ${t} 'line.domain' max value is smaller than actual max ${r}`),i=[n,r])):i=[n,r]}let l,a,c=[];if("log"==r){if(i[0]<=0)return o.add(`column ${t}, 'line.domain' can't be negative for log scale`),{column:n.map((t=>{})),warnings:Array.from(o).sort(),stats:void 0};let r=Math.max(...i.map((t=>Math.log(Math.abs(t)))));c=n.map((n=>void 0===n?void 0:n>0?Math.log(n)/r:void o.add(`column ${t}, values can't be negative for log scale`))),l=xt(e.ticks||[],(n=>n>0?Math.log(n)/r:(o.add(`column ${t}, ticks can't be negative for log scale`),!1))),a=[Math.log(i[0])/r,Math.log(i[1])/r]}else{if("linear"!=r)throw new Error(`unknown scale ${r}`);{let t=Math.max(...i.map((t=>Math.abs(t))));0==t&&(t=1),c=n.map((n=>void 0===n?void 0:n/t)),l=(e.ticks||[]).map((n=>n/t)),a=i}}return{column:c,warnings:Array.from(o).sort(),stats:{nticks:l,ndomain:a}}},nn="#111827",en="#111827";function on(t,n,e){let o,r,s,{options:i}=n,{value:l}=n,{converted:a}=n,{stats:c}=n;return t.$$set=t=>{"options"in t&&e(5,i=t.options),"value"in t&&e(6,l=t.value),"converted"in t&&e(0,a=t.converted),"stats"in t&&e(1,c=t.stats)},t.$$.update=()=>{2&t.$$.dirty&&e(2,[o,r]=(null==c?void 0:c.ndomain)||[0,0],o,(e(3,r),e(1,c))),99&t.$$.dirty&&e(4,s=void 0!==a?`value: ${l}`+(((null==c?void 0:c.nticks)||[]).length>0?`, ticks: ${(i.ticks||[]).join(", ")}`:"")+`, scale: ${i.scale}`:"missing")},[a,c,o,r,s,i,l]}var rn=Object.freeze({__proto__:null,default:class extends X{constructor(t){super(),V(this,t,on,Zt,s,{options:5,value:6,converted:0,stats:1})}},compatibleTypes:["number"],align:function(t){return t.align||"center"},convertColumn:tn});function sn(n){let e,o;return{c(){e=c("div"),o=f(n[0]),g(e,"class",n[1])},m(t,n){l(t,e,n),i(e,o)},p(t,[n]){1&n&&w(o,t[0])},i:t,o:t,d(t){t&&a(e)}}}function ln(t,n,e){let o,{options:r}=n,{value:s}=n;const i=Et(r.align||"left")+(r.small?" text-xs":"");return t.$$set=t=>{"options"in t&&e(2,r=t.options),"value"in t&&e(3,s=t.value)},t.$$.update=()=>{8&t.$$.dirty&&e(0,o=null==s?"":""+s)},[o,i,r,s]}const an={string:At,boolean:Tt,number:Lt,unknown:Object.freeze({__proto__:null,default:class extends X{constructor(t){super(),V(this,t,ln,sn,s,{options:2,value:3})}},compatibleTypes:[],align:function(t){return t.align||"left"}}),line:rn};function cn(t){return t in an?{isError:!1,value:an[t]}:{isError:!0,message:`no '${t}' format`}}const un=["string","number","boolean","unknown"];function fn(t){let{columns:n,alter_columns:e,rows:o}=t;const r=t._i||!1;if(0==o.length)return{columns:[],formatStats:{},rows:[],formats:[],messages:[]};const s=new Set;if("version"in t){if(1!=t.version)return s.add(`options.version ${t.version} is wrong, the current software has 1 version, update options.version or use software of same version`),{columns:[],formatStats:{},rows:[],formats:[],messages:[]}}else s.add("version is missing, please specify version as 1");const i=[];for(let t=0;t<o.length;t++){const e=o[t];if(Array.isArray(e)){const o={_i:t};if(n)for(let t=0;t<n.length&&t<e.length;t++)o[n[t].id]=e[t];else for(let t=0;t<dn.length&&t<e.length;t++)o[dn[t]]=e[t];i.push(o)}else i.push(Object.assign(Object.assign({},e),{_i:t}))}for(let t=0;t<i.length;t++){const n=i[t];for(const t in n)null===n[t]&&(n[t]=void 0)}if(!n){const t=new Map,e=new Set;for(let n=0;n<i.length;n++){const o=i[n];for(const n in o){if("_i"==n)continue;let r=o[n];if(void 0===r)e.add(n);else{let e=typeof r;"object"==e?(s.add(`unknown type for column '${n}' - '${e}'`),t.set(n,"unknown")):t.has(n)?t.get(n)!=e&&(s.add(`unstable types for column '${n}', ${[t.get(n),e].sort().join(", ")}`),t.set(n,"unknown")):t.set(n,e)}}}for(const n of e)t.has(n)||t.set(n,"unknown");n=bt(Array.from(t,(([t,n])=>({id:t,type:n}))),(({id:t})=>t))}if(e){const t=e.map((({id:t})=>t));n=[...e,...n.filter((({id:n})=>!t.includes(n)))]}const l=new Map;for(const t of n){const{id:n}=t;l.has(n)&&(s.add(`not unique column id '${n}'`),t.id=n+l.get(n)),l.set(n,(l.get(n)||0)+1)}n=[...n];for(let t=0;t<i.length;t++){const e=i[t];for(const t of n){const{id:n,type:o}=t;if("_i"==n)continue;let r=e[n];if(void 0===r)continue;typeof r!=o&&"unknown"!=o&&un.includes(o)&&(s.add(`wrong type for column '${n}', specified as '${o}' but '${typeof r}' found`),t.type="unknown")}}for(const{id:t,min_max:e,type:o}of n){if(!e)continue;if("number"!=o){s.add(`wrong min_max on column '${t}' it can't be specified for non integer type '${o}'`);continue}const[n,r]=e;n>r&&s.add(`wrong min_max on column '${t}' min should not be greather than max`);for(const e of i){const o=e[t];null!=o&&(o<n&&s.add(`wrong min_max on column '${t}' column contains values lover than '${n}'`),o>r&&s.add(`wrong min_max on column '${t}' column contains values greater than '${n}'`))}}r&&n.unshift({id:"_i",type:"number"});const a=cn("unknown");if(a.isError)throw"can't get 'unknown' formatter";let c=[];for(const t of n){const n=t.format||{type:t.type},e=cn(n.type);e.isError?(s.add(e.message),c.push([a.value,n])):e.value.compatibleTypes.includes(t.type)?c.push([e.value,n]):(s.add(`column ${t.id} has wrong format, format ${t.format} is not compatible with '${t.type}' type`),c.push([a.value,n]))}const u={};for(let t=0;t<n.length;t++){const[{id:e},[o,r]]=[n[t],c[t]];if(o.convertColumn){const t=i.map((t=>t[e])),{column:n,warnings:l,stats:a}=o.convertColumn(e,t,r);u[e]=a,l.forEach((t=>s.add(t)));for(let t=0;t<i.length;t++){const o=i[t];o._converted||(o._converted={}),o._converted[e]=n[t]}}}for(let t=0;t<c.length;t++){const[e,o]=c[t],{id:r}=n[t];"number"==o.type&&void 0===o.round&&(i.every((t=>{const n=t[r];return void 0===n||Number.isInteger(n)})),c[t][1]=Object.assign(Object.assign({},o),{round:0}))}return{columns:n,formatStats:u,rows:i,formats:c,messages:Array.from(s).sort().map((t=>({type:"warn",message:t})))}}const dn="abcdefghijklmnopqrstuvwxyz".split("");function mn(t,n){let e;if(t.some((({width:t})=>null!=t)))e=t.map((({width:t})=>t||1));else{const o=new Map;for(const e of n)for(const{id:n,type:r}of t){let t;if(void 0===e[n])continue;if("string"==r)t=e[n].length;else if("number"==r)t=(""+e[n]).length;else{if("boolean"!=r)continue;t=1}let s=o.get(n);null==s&&(s=[],o.set(n,s)),s.push(t)}const r=qt(o,(t=>$t(t,.7))),s=wt(_t(r,[],((t,n)=>(t.push(n),t)))),i=1.618,l=qt(r,(t=>t>s*i?i:t<s/i?1/i:1)),a=1;e=t.map((({id:t})=>l.get(t)||a))}return pn(e)}function pn(t){const n=100/Mt(t);let e=t.map((t=>jt(t*n)));for(;;){const t=Mt(e);if(t>100)e[gt(e)]-=1;else{if(!(t<100))break;e[ht(e)]+=1}}return e}function hn(t,n,e){if(!(e=function(t){return t.replace(/^[\t\s\n]+|[\t\s\n]+$/g,"")}(e)))return n;const o=/^([^=\s]+)=(.+)$/i;if(o.test(e)){const[t,r]=function(t,n){const e=dt(t,n);if(2!=e.length)throw new Error(`expected 2 matches but found ${e.length}`);return[e[0],e[1]]}(o,e),s=r.toLowerCase();return n.filter((n=>(""+n[t]).toLowerCase().includes(s)))}{const o=e.toLowerCase();return n.filter((n=>{for(const{id:e}of t)if((""+n[e]).toLowerCase().includes(o))return!0;return!1}))}}lt("normalizeInputsSlow",(()=>{{const{columns:t,rows:n}=fn({rows:[["v",null]]});at.equal(t,[{id:"a",type:"string"},{id:"b",type:"unknown"}]),at.equal(n,[{a:"v",b:void 0,_i:0}])}{const{columns:t,rows:n}=fn({rows:[{k:"v",k2:null}]});at.equal(t,[{id:"k",type:"string"},{id:"k2",type:"unknown"}]),at.equal(n,[{k:"v",k2:void 0,_i:0}])}{const{columns:t,rows:n}=fn({rows:[{k:"v"},{k:0}]});at.equal(t,[{id:"k",type:"unknown"}]),at.equal(n,[{k:"v",_i:0},{k:0,_i:1}])}{const{formats:t}=fn({rows:[{v:1}]});at.equal(t[0][1],{type:"number",round:0})}})),lt("calculateColumnWidths",(()=>{at.equal(mn([{id:"name",type:"string"},{id:"age",type:"number"}],[{name:"Jim Raynor",age:30},{name:"Kate",age:25}]),[62,38])})),lt("weightsToPercents",(()=>{at.equal(pn([2,2]),[50,50]),at.equal(pn([3,3,3]).sort(),[33,33,34])}));const gn={string:function(t,n){return t.localeCompare(n)},number:function(t,n){return t-n},boolean:function(t,n){return t==n?0:t?1:-1},unknown:function(t,n){return(""+t).localeCompare(""+n)}};function wn(t,[n,e]){const o="desc"==e,r=kt(pt(t,(({id:t})=>t==n))).type;if(!(r in gn))throw new Error(`no comparator for '${r}' type, please register one`);const s=gn[r];return o?function(t,e){const o=e[n],r=t[n];return void 0===o?void 0===r?0:-1:void 0===r?1:s(o,r)}:function(t,e){const o=t[n],r=e[n];return void 0===o?void 0===r?0:-1:void 0===r?1:s(o,r)}}function $n(t,n,e){if(e.length>3)throw new Error("sort not supported for more than 3 columns");const[o,r,s]=e;if(null==o&&at(null==r),null==r&&at(null==s),0==n.length||null==o)return n;let i,l=wn(t,o),a=r?wn(t,r):void 0,c=s?wn(t,s):void 0;i=c?function(t,n){let e=l(t,n);return 0!=e?e:(e=a(t,n),0!=e?e:c(t,n))}:a?function(t,n){let e=l(t,n);return 0!=e?e:a(t,n)}:l;const u=[...n];return u.sort(i),u}function yn(t,n,e){n=[...n];for(const t of n)t._weights={},t._nweights={};for(const[o,r]of e){const{type:e,min_max:s}=kt(pt(t,(({id:t})=>t==o)));let[i,l]=vt(n,(t=>void 0!==t[o]));if(0==i.length){for(const t of n)t._weights[o]=0,t._nweights[o]=0;continue}if("number"==e){const t=typeof n[0][o];if("number"!=t)throw new Error(`wrong type for '${o}' column, wsort expects number but found '${t}'`);for(const t of i)t._weights[o]=t[o]}else{if(!(e in gn))throw new Error(`no comparator for '${e}' type, please register one`);const t=gn[e];i.sort(((n,e)=>t(n[o],e[o])));let n,r=0;for(let t=0;t<i.length;t++){const e=i[t];e[o]==n?r+=1:n=e[o],e._weights[o]=t-r}}{let t,n;if(s){if("number"!=e)throw new Error("can't use min_max for non number type");t=s[0],n=s[1]}else{const e=i.map((t=>t._weights[o]));t=Math.min(...e),n=Math.max(...e)}const r=(n+t)/2;let l=(n-t)/2;at(l>=0),l=0==l?1:l;for(const t of i){let n=(t._weights[o]-r)/l;t._nweights[o]=n}}let a=wt(i.map((t=>t._nweights[o])));for(const t of l)t._nweights[o]=a;if("desc"==r)for(const t of n)t._nweights[o]=-1*t._nweights[o]}for(const t of n){let n=0;for(const[o,r]of e)n+=t._nweights[o];t._w=n}return n.sort(((t,n)=>t._w-n._w)),n}function vn(t){let n,e,o,r,s,u,m,$,v,b,x=t[2].symbol+"";return{c(){n=c("th"),e=c("a"),o=c("span"),r=f(x),u=d(),m=c("span"),$=f(t[1]),g(o,"class",s=t[2].klass),g(e,"class","flex justify-between"),g(e,"href","#"),y(n,"width",t[0]+"%"),g(n,"class","text-right")},m(s,a){l(s,n,a),i(n,e),i(e,o),i(o,r),i(e,u),i(e,m),i(m,$),v||(b=p(e,"click",h(t[4])),v=!0)},p(t,e){4&e&&x!==(x=t[2].symbol+"")&&w(r,x),4&e&&s!==(s=t[2].klass)&&g(o,"class",s),2&e&&w($,t[1]),1&e&&y(n,"width",t[0]+"%")},d(t){t&&a(n),v=!1,b()}}}function bn(t){let n,e,o,r,s,u,m,$,v,b,x,k,_,M=t[2].symbol+"",q=t[2].symbol+"";return{c(){n=c("th"),e=c("a"),o=c("span"),r=f(M),s=d(),u=c("span"),m=f(t[1]),$=d(),v=c("span"),b=f(q),g(o,"class","invisible"),g(v,"class",x=t[2].klass),g(e,"class","flex justify-between"),g(e,"href","#"),y(n,"width",t[0]+"%")},m(a,c){l(a,n,c),i(n,e),i(e,o),i(o,r),i(e,s),i(e,u),i(u,m),i(e,$),i(e,v),i(v,b),k||(_=p(e,"click",h(t[4])),k=!0)},p(t,e){4&e&&M!==(M=t[2].symbol+"")&&w(r,M),2&e&&w(m,t[1]),4&e&&q!==(q=t[2].symbol+"")&&w(b,q),4&e&&x!==(x=t[2].klass)&&g(v,"class",x),1&e&&y(n,"width",t[0]+"%")},d(t){t&&a(n),k=!1,_()}}}function xn(t){let n,e,o,r,s,u,m,$,v,b,x=t[2].symbol+"";return{c(){n=c("th"),e=c("a"),o=c("span"),r=f(t[1]),s=d(),u=c("span"),m=f(x),g(u,"class",$=t[2].klass),g(e,"class","flex justify-between"),g(e,"href","#"),y(n,"width",t[0]+"%")},m(a,c){l(a,n,c),i(n,e),i(e,o),i(o,r),i(e,s),i(e,u),i(u,m),v||(b=p(e,"click",h(t[4])),v=!0)},p(t,e){2&e&&w(r,t[1]),4&e&&x!==(x=t[2].symbol+"")&&w(m,x),4&e&&$!==($=t[2].klass)&&g(u,"class",$),1&e&&y(n,"width",t[0]+"%")},d(t){t&&a(n),v=!1,b()}}}function kn(n){let e;let o=function(t,n){return"left"==t[3]?xn:"center"==t[3]?bn:vn}(n)(n);return{c(){o.c(),e=m()},m(t,n){o.m(t,n),l(t,e,n)},p(t,[n]){o.p(t,n)},i:t,o:t,d(t){o.d(t),t&&a(e)}}}function _n(t,n,e){let o,r,s,{column:i}=n,{format:l}=n,{width:a}=n,{state:c}=n,u=i.id;const f=l[0].align(l[1]);return t.$$set=t=>{"column"in t&&e(6,i=t.column),"format"in t&&e(7,l=t.format),"width"in t&&e(0,a=t.width),"state"in t&&e(5,c=t.state)},t.$$.update=()=>{64&t.$$.dirty&&e(1,o=i.title||i.id),32&t.$$.dirty&&e(8,r=function(t){for(let n=0;n<t.length;n++){const[e,o]=t[n];if(e==u)return[o,n]}}(c.order)),288&t.$$.dirty&&e(2,s=function(t,n,e){if(!t)return{symbol:"↓",klass:"invisible"};if(n){const[n,e]=t;return{symbol:"asc"==n?"↓":"↑",klass:"text-gray-400"}}{const[n,e]=t,o="asc"==n?"↓":"↑";let r;if(0==e)r="";else if(1==e)r="text-gray-400";else{if(2!=e)throw new Error("color for more than 3 sort oders isn't supported");r="text-gray-300"}return{symbol:o,klass:r}}}(r,c.wsort,c.order.length))},[a,o,s,f,function(t){if(c.sortable)if(t.metaKey)e(5,c.order=r?c.order.map((([t,n])=>[t,t==u?"asc"==n?"desc":"asc":n])):[...c.order,[u,"asc"]],c);else{let t;t=c.order.length>1?"asc":r&&"asc"==r[0]?"desc":"asc",e(5,c.order=[[u,t]],c)}},c,i,l,r]}lt("sortTable",(()=>{const t=[{id:"name",type:"string"},{id:"age",type:"number"}],n=[{name:"Artanis",age:200},{name:"Sarah",age:30},{name:"Jim",age:30},{name:"Amon",age:void 0}];let e=e=>$n(t,n,e).map((({name:t})=>t));at.equal(e([["name","asc"]]),["Amon","Artanis","Jim","Sarah"]),at.equal(e([["age","asc"]])[0],"Amon"),at.equal(e([["age","asc"],["name","asc"]]),["Amon","Jim","Sarah","Artanis"])})),lt("wsortTable",(()=>{let t=(t,n,e)=>yn(t,n,e).map((({id:t})=>t));at.equal(t([{id:"a",type:"number"},{id:"b",type:"number"}],[{id:"a",a:0,b:3},{id:"b",a:1,b:3},{id:"c",a:2,b:void 0},{id:"d",a:-2,b:200}],[["a","asc"],["b","desc"]]),["d","a","b","c"]);at.equal(t([{id:"a",type:"number"}],[{id:"a",a:0},{id:"b",a:1},{id:"c",a:void 0}],[["a","asc"]]),["a","c","b"]);{const t=yn([{id:"a",type:"string"}],[{id:"a",a:"a"},{id:"b",a:"a"},{id:"c",a:"b"}],[["a","asc"]]);at.equal(t[2].id,"c"),at.equal(t.map((t=>t._weights.a)),[0,0,1])}}));class Mn extends X{constructor(t){super(),V(this,t,_n,kn,s,{column:6,format:7,width:0,state:5})}}function qn(t,n,e){const o=t.slice();return o[5]=n[e],o[7]=e,o}function jn(t){let n,e,o;function r(n){t[4](n)}let s={column:t[5],format:t[2][t[7]],width:t[3][t[7]]};return void 0!==t[0]&&(s.state=t[0]),n=new Mn({props:s}),_.push((()=>K(n,"state",r))),{c(){U(n.$$.fragment)},m(t,e){H(n,t,e),o=!0},p(t,o){const r={};2&o&&(r.column=t[5]),6&o&&(r.format=t[2][t[7]]),10&o&&(r.width=t[3][t[7]]),!e&&1&o&&(e=!0,r.state=t[0],O((()=>e=!1))),n.$set(r)},i(t){o||(P(n.$$.fragment,t),o=!0)},o(t){I(n.$$.fragment,t),o=!1},d(t){G(n,t)}}}function En(n){let e;return{c(){e=c("th"),y(e,"width",n[3][n[7]]+"%")},m(t,n){l(t,e,n)},p(t,n){10&n&&y(e,"width",t[3][t[7]]+"%")},i:t,o:t,d(t){t&&a(e)}}}function Sn(t,n){let e,o,r,s,i;const c=[En,jn],u=[];function f(t,n){return"_i"==t[5].id?0:1}return o=f(n),r=u[o]=c[o](n),{key:t,first:null,c(){e=m(),r.c(),s=m(),this.first=e},m(t,n){l(t,e,n),u[o].m(t,n),l(t,s,n),i=!0},p(t,e){let i=o;o=f(n=t),o===i?u[o].p(n,e):(L(),I(u[i],1,1,(()=>{u[i]=null})),z(),r=u[o],r?r.p(n,e):(r=u[o]=c[o](n),r.c()),P(r,1),r.m(s.parentNode,s))},i(t){i||(P(r),i=!0)},o(t){I(r),i=!1},d(t){t&&a(e),u[o].d(t),t&&a(s)}}}function On(t){let n,e,o=[],r=new Map,s=t[1];const i=t=>t[5].id;for(let n=0;n<s.length;n+=1){let e=qn(t,s,n),l=i(e);r.set(l,o[n]=Sn(l,e))}return{c(){n=c("tr");for(let t=0;t<o.length;t+=1)o[t].c()},m(t,r){l(t,n,r);for(let t=0;t<o.length;t+=1)o[t].m(n,null);e=!0},p(t,[e]){15&e&&(s=t[1],L(),o=W(o,e,i,1,t,s,r,n,B,Sn,null,qn),z())},i(t){if(!e){for(let t=0;t<s.length;t+=1)P(o[t]);e=!0}},o(t){for(let t=0;t<o.length;t+=1)I(o[t]);e=!1},d(t){t&&a(n);for(let t=0;t<o.length;t+=1)o[t].d()}}}function An(t,n,e){let{columns:o}=n,{formats:r}=n,{widths:s}=n,{state:i}=n;return t.$$set=t=>{"columns"in t&&e(1,o=t.columns),"formats"in t&&e(2,r=t.formats),"widths"in t&&e(3,s=t.widths),"state"in t&&e(0,i=t.state)},[i,o,r,s,function(t){i=t,e(0,i)}]}class Nn extends X{constructor(t){super(),V(this,t,An,On,s,{columns:1,formats:2,widths:3,state:0})}}function Cn(t,n,e){const o=t.slice();return o[6]=n[e],o[8]=e,o}function Tn(t){let n,e,o,r,s;const u=[Ln,Fn],f=[];function m(t,n){return"_converted"in t[3]&&t[6].id in t[3]._converted?0:1}return e=m(t),o=f[e]=u[e](t),{c(){n=c("td"),o.c(),r=d()},m(t,o){l(t,n,o),f[e].m(n,null),i(n,r),s=!0},p(t,s){let i=e;e=m(t),e===i?f[e].p(t,s):(L(),I(f[i],1,1,(()=>{f[i]=null})),z(),o=f[e],o?o.p(t,s):(o=f[e]=u[e](t),o.c()),P(o,1),o.m(n,r))},i(t){s||(P(o),s=!0)},o(t){I(o),s=!1},d(t){t&&a(n),f[e].d()}}}function Jn(n){let e,o,r=n[3]._i+1+"";return{c(){e=c("td"),o=f(r),g(e,"class","text-right")},m(t,n){l(t,e,n),i(e,o)},p(t,n){8&n&&r!==(r=t[3]._i+1+"")&&w(o,r)},i:t,o:t,d(t){t&&a(e)}}}function Fn(t){let n,e,o;var r=t[1][t[8]][0].default;function s(t){return{props:{options:t[1][t[8]][1],value:t[3][t[6].id]}}}return r&&(n=new r(s(t))),{c(){n&&U(n.$$.fragment),e=m()},m(t,r){n&&H(n,t,r),l(t,e,r),o=!0},p(t,o){const i={};if(3&o&&(i.options=t[1][t[8]][1]),9&o&&(i.value=t[3][t[6].id]),r!==(r=t[1][t[8]][0].default)){if(n){L();const t=n;I(t.$$.fragment,1,0,(()=>{G(t,1)})),z()}r?(n=new r(s(t)),U(n.$$.fragment),P(n.$$.fragment,1),H(n,e.parentNode,e)):n=null}else r&&n.$set(i)},i(t){o||(n&&P(n.$$.fragment,t),o=!0)},o(t){n&&I(n.$$.fragment,t),o=!1},d(t){t&&a(e),n&&G(n,t)}}}function Ln(t){let n,e,o;var r=t[1][t[8]][0].default;function s(t){return{props:{options:t[1][t[8]][1],value:t[3][t[6].id],converted:t[3]._converted[t[6].id],stats:t[2][t[6].id]}}}return r&&(n=new r(s(t))),{c(){n&&U(n.$$.fragment),e=m()},m(t,r){n&&H(n,t,r),l(t,e,r),o=!0},p(t,o){const i={};if(3&o&&(i.options=t[1][t[8]][1]),9&o&&(i.value=t[3][t[6].id]),9&o&&(i.converted=t[3]._converted[t[6].id]),5&o&&(i.stats=t[2][t[6].id]),r!==(r=t[1][t[8]][0].default)){if(n){L();const t=n;I(t.$$.fragment,1,0,(()=>{G(t,1)})),z()}r?(n=new r(s(t)),U(n.$$.fragment),P(n.$$.fragment,1),H(n,e.parentNode,e)):n=null}else r&&n.$set(i)},i(t){o||(n&&P(n.$$.fragment,t),o=!0)},o(t){n&&I(n.$$.fragment,t),o=!1},d(t){t&&a(e),n&&G(n,t)}}}function zn(t,n){let e,o,r,s,i;const c=[Jn,Tn],u=[];function f(t,n){return"_i"==t[6].id?0:1}return o=f(n),r=u[o]=c[o](n),{key:t,first:null,c(){e=m(),r.c(),s=m(),this.first=e},m(t,n){l(t,e,n),u[o].m(t,n),l(t,s,n),i=!0},p(t,e){let i=o;o=f(n=t),o===i?u[o].p(n,e):(L(),I(u[i],1,1,(()=>{u[i]=null})),z(),r=u[o],r?r.p(n,e):(r=u[o]=c[o](n),r.c()),P(r,1),r.m(s.parentNode,s))},i(t){i||(P(r),i=!0)},o(t){I(r),i=!1},d(t){t&&a(e),u[o].d(t),t&&a(s)}}}function Pn(t){let n,e,o,s,i,u=[],f=new Map,d=t[0];const m=t=>t[6].id;for(let n=0;n<d.length;n+=1){let e=Cn(t,d,n),o=m(e);f.set(o,u[n]=zn(o,e))}return{c(){n=c("tr");for(let t=0;t<u.length;t+=1)u[t].c();g(n,"class",e=t[4]?"bg-gray-100":"")},m(e,a){l(e,n,a);for(let t=0;t<u.length;t+=1)u[t].m(n,null);o=!0,s||(i=p(n,"click",(function(){r(t[5])&&t[5].apply(this,arguments)})),s=!0)},p(r,[s]){t=r,15&s&&(d=t[0],L(),u=W(u,s,m,1,t,d,f,n,B,zn,null,Cn),z()),(!o||16&s&&e!==(e=t[4]?"bg-gray-100":""))&&g(n,"class",e)},i(t){if(!o){for(let t=0;t<d.length;t+=1)P(u[t]);o=!0}},o(t){for(let t=0;t<u.length;t+=1)I(u[t]);o=!1},d(t){t&&a(n);for(let t=0;t<u.length;t+=1)u[t].d();s=!1,i()}}}function In(t,n,e){let{columns:o}=n,{formats:r}=n,{formatStats:s}=n,{row:i}=n,{selected:l}=n,{onSelect:a}=n;return t.$$set=t=>{"columns"in t&&e(0,o=t.columns),"formats"in t&&e(1,r=t.formats),"formatStats"in t&&e(2,s=t.formatStats),"row"in t&&e(3,i=t.row),"selected"in t&&e(4,l=t.selected),"onSelect"in t&&e(5,a=t.onSelect)},[o,r,s,i,l,a]}class Dn extends X{constructor(t){super(),V(this,t,In,Pn,s,{columns:0,formats:1,formatStats:2,row:3,selected:4,onSelect:5})}}function Rn(n){let e,r,s,u,m,h,w,y,v,b,x,k,_=`<svg class="${"h-4 w-4 text-gray-900"}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg>`;let M,q;return{c(){e=c("div"),r=c("div"),s=d(),u=c("div"),m=c("input"),w=d(),y=c("button"),v=f("W"),x=d(),k=c("button"),g(r,"class","flex items-center"),g(m,"class",h=n[2]+" rounded border border-gray-300 text-sm outline-none py-1 px-1 leading-4"),g(m,"type","text"),g(m,"placeholder","Filter"),g(y,"class",b=n[2]+" focus:outline-none rounded border text-sm font-bold px-1 "+(n[0].wsort?"bg-gray-900 border-gray-900 text-white":"border-gray-300 text-gray-900")),g(y,"title",n[4]),g(k,"class","focus:outline-none"),g(u,"class","flex items-center space-x-2"),g(e,"class","flex items-center justify-between my-1 mx-1")},m(t,o){l(t,e,o),i(e,r),i(e,s),i(e,u),i(u,m),$(m,n[1]),i(u,w),i(u,y),i(y,v),i(u,x),i(u,k),k.innerHTML=_,M||(q=[p(m,"input",n[5]),p(m,"keyup",n[3]),p(y,"click",n[6]),p(k,"click",n[7])],M=!0)},p(t,[n]){4&n&&h!==(h=t[2]+" rounded border border-gray-300 text-sm outline-none py-1 px-1 leading-4")&&g(m,"class",h),2&n&&m.value!==t[1]&&$(m,t[1]),5&n&&b!==(b=t[2]+" focus:outline-none rounded border text-sm font-bold px-1 "+(t[0].wsort?"bg-gray-900 border-gray-900 text-white":"border-gray-300 text-gray-900"))&&g(y,"class",b)},i:t,o:t,d(t){t&&a(e),M=!1,o(q)}}}function Bn(t,n,e){let o,{state:r}=n,s=r.query;const i=function(t,n){let e;return(...o)=>{e&&clearTimeout(e),e=setTimeout((()=>t(...o)),n)}}((()=>{e(0,r.query=s,r)}),200),l=['Weighted sorting. "Smart", weighted, ranked sorting, instead of normal sorting.',"It works similar to how humans compare products with many attributes, to find the best one.","Example: find countries with highest salaries, lowest taxes and lowest real estate prices - ordinary sorting would be useless, while weighted sorting would sort the countries in a 'smart' way, similar to how human would do.","Missing values threated as average, like if we don't have tax rate for country, we guess that it probably should be somewhat average. For non number comparable elements sort rank used as weight. ifferent range of values for different columns normalised into [-1..1] range as 'nw = (w - median(w)) / 0.9-quantile(variance(w))*1.11' and limiting min/max outliers by [-1..1].",'- Undefined values threated as average\n- Rank for same values should be the same, like ["a", "a", "b"] should be [0, 0, 1], not [0, 1, 2]\n- Different range of values for different columns normalised into [-1..1] range as\n      nw = (w - median(w)) / 0.9-quantile(variance(w))*1.11 and limiting min/max outliers by [-1..1].'].join("\n\n");return t.$$set=t=>{"state"in t&&e(0,r=t.state)},t.$$.update=()=>{1&t.$$.dirty&&e(2,o=r.show_json?"invisible":"")},[r,s,o,i,l,function(){s=this.value,e(1,s)},()=>e(0,r.wsort=!r.wsort,r),()=>e(0,r.show_json=!r.show_json,r)]}class Wn extends X{constructor(t){super(),V(this,t,Bn,Rn,s,{state:0})}}function Kn(t,n,e){const o=t.slice();return o[1]=n[e],o}function Un(t){let n,e=t[0],o=[];for(let n=0;n<e.length;n+=1)o[n]=Vn(Kn(t,e,n));return{c(){n=c("div");for(let t=0;t<o.length;t+=1)o[t].c();g(n,"class","text-sm mt-1 mx-1")},m(t,e){l(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null)},p(t,r){if(1&r){let s;for(e=t[0],s=0;s<e.length;s+=1){const i=Kn(t,e,s);o[s]?o[s].p(i,r):(o[s]=Vn(i),o[s].c(),o[s].m(n,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=e.length}},d(t){t&&a(n),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(o,t)}}}function Hn(n){let e;return{c(){e=c("div"),e.textContent="unknown message type"},m(t,n){l(t,e,n)},p:t,d(t){t&&a(e)}}}function Gn(t){let n,e,o,r,s=t[1].message+"";return{c(){n=c("div"),e=c("span"),e.textContent="error",o=d(),r=f(s),g(e,"class","bg-red-400 px-2 rounded")},m(t,s){l(t,n,s),i(n,e),i(n,o),i(n,r)},p(t,n){1&n&&s!==(s=t[1].message+"")&&w(r,s)},d(t){t&&a(n)}}}function Qn(t){let n,e,o,r,s=t[1].message+"";return{c(){n=c("div"),e=c("span"),e.textContent="warn",o=d(),r=f(s),g(e,"class","bg-yellow-400 px-2 rounded")},m(t,s){l(t,n,s),i(n,e),i(n,o),i(n,r)},p(t,n){1&n&&s!==(s=t[1].message+"")&&w(r,s)},d(t){t&&a(n)}}}function Vn(t){let n;function e(t,n){return"warn"==t[1].type?Qn:"error"==t[1].type?Gn:Hn}let o=e(t),r=o(t);return{c(){r.c(),n=m()},m(t,e){r.m(t,e),l(t,n,e)},p(t,s){o===(o=e(t))&&r?r.p(t,s):(r.d(1),r=o(t),r&&(r.c(),r.m(n.parentNode,n)))},d(t){r.d(t),t&&a(n)}}}function Xn(n){let e,o=n[0].length>0&&Un(n);return{c(){o&&o.c(),e=m()},m(t,n){o&&o.m(t,n),l(t,e,n)},p(t,[n]){t[0].length>0?o?o.p(t,n):(o=Un(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},i:t,o:t,d(t){o&&o.d(t),t&&a(e)}}}function Yn(t,n,e){let{messages:o}=n;return t.$$set=t=>{"messages"in t&&e(0,o=t.messages)},[o]}class Zn extends X{constructor(t){super(),V(this,t,Yn,Xn,s,{messages:0})}}function te(t,n,e){const o=t.slice();return o[17]=n[e],o}function ne(t,n){let e,o,r;function s(...t){return n[14](n[17],...t)}return o=new Dn({props:{columns:n[5],formats:n[8],formatStats:n[6],row:n[17],selected:n[2].has(n[17]._i),onSelect:s}}),{key:t,first:null,c(){e=m(),U(o.$$.fragment),this.first=e},m(t,n){l(t,e,n),H(o,t,n),r=!0},p(t,e){n=t;const r={};16&e&&(r.row=n[17]),20&e&&(r.selected=n[2].has(n[17]._i)),16&e&&(r.onSelect=s),o.$set(r)},i(t){r||(P(o.$$.fragment,t),r=!0)},o(t){I(o.$$.fragment,t),r=!1},d(t){t&&a(e),G(o,t)}}}function ee(t){let n,e,o;return{c(){n=c("div"),e=c("textarea"),g(e,"class","w-full h-full focus:outline-none"),e.readOnly=!0,y(e,"resize","none"),e.value=o=ut(t[0]),g(n,"class","plot-table-json rounded border border-gray-200 text-xs overflow-scroll")},m(t,o){l(t,n,o),i(n,e)},p(t,n){1&n&&o!==(o=ut(t[0]))&&(e.value=o)},d(t){t&&a(n)}}}function oe(t){let n,e,o,r,s,u,f,m,h,w,$,y,v,b,x,k,M=[],q=new Map;function j(n){t[12](n)}let E={};function S(n){t[13](n)}void 0!==t[1]&&(E.state=t[1]),r=new Wn({props:E}),_.push((()=>K(r,"state",j)));let A={columns:t[5],formats:t[8],widths:t[9]};void 0!==t[1]&&(A.state=t[1]),m=new Nn({props:A}),_.push((()=>K(m,"state",S)));let N=t[4];const C=t=>t[17]._i;for(let n=0;n<N.length;n+=1){let e=te(t,N,n),o=C(e);q.set(o,M[n]=ne(o,e))}let T=t[1].show_json&&ee(t);return v=new Zn({props:{messages:t[7]}}),{c(){n=c("table"),e=c("tr"),o=c("td"),U(r.$$.fragment),f=d(),U(m.$$.fragment),w=d();for(let t=0;t<M.length;t+=1)M[t].c();$=d(),T&&T.c(),y=d(),U(v.$$.fragment),g(o,"colspan",t[5].length),g(e,"class",u="plot-table-toolbar "+(!t[3]&&"invisible")+" "),g(n,"class","plot-table font-mono")},m(s,a){l(s,n,a),i(n,e),i(e,o),H(r,o,null),i(n,f),H(m,n,null),i(n,w);for(let t=0;t<M.length;t+=1)M[t].m(n,null);i(n,$),T&&T.m(n,null),l(s,y,a),H(v,s,a),b=!0,x||(k=p(n,"click",t[15]),x=!0)},p(t,[o]){const i={};!s&&2&o&&(s=!0,i.state=t[1],O((()=>s=!1))),r.$set(i),(!b||8&o&&u!==(u="plot-table-toolbar "+(!t[3]&&"invisible")+" "))&&g(e,"class",u);const l={};!h&&2&o&&(h=!0,l.state=t[1],O((()=>h=!1))),m.$set(l),1396&o&&(N=t[4],L(),M=W(M,o,C,1,t,N,q,n,B,ne,$,te),z()),t[1].show_json?T?T.p(t,o):(T=ee(t),T.c(),T.m(n,null)):T&&(T.d(1),T=null)},i(t){if(!b){P(r.$$.fragment,t),P(m.$$.fragment,t);for(let t=0;t<N.length;t+=1)P(M[t]);P(v.$$.fragment,t),b=!0}},o(t){I(r.$$.fragment,t),I(m.$$.fragment,t);for(let t=0;t<M.length;t+=1)I(M[t]);I(v.$$.fragment,t),b=!1},d(t){t&&a(n),G(r),G(m);for(let t=0;t<M.length;t+=1)M[t].d();T&&T.d(),t&&a(y),G(v,t),x=!1,k()}}}function re(t,n,e){let o,r,{options:s}=n,{columns:i,formatStats:l,rows:a,messages:c,formats:u}=fn(s),f=mn(i,a),d={query:s.query||"",wsort:!!s.wsort,sortable:0!=s.sortable,order:s.order||[],show_json:!1},m=new Set;function p(t,n){!function(t,n,e,o){const r=new Set(e);if(t.metaKey)r.has(n)?r.delete(n):r.add(n);else{const t=r.has(n)&&1==r.size;r.clear(),t||r.add(n)}o(r)}(t,n,m,(t=>e(2,m=t)))}let h=!!s.toolbar;return t.$$set=t=>{"options"in t&&e(0,s=t.options)},t.$$.update=()=>{2&t.$$.dirty&&e(11,o=hn(i,a,d.query)),2050&t.$$.dirty&&e(4,r=(d.wsort?yn:$n)(i,o,d.order))},[s,d,m,h,r,i,l,c,u,f,p,o,function(t){d=t,e(1,d)},function(t){d=t,e(1,d)},(t,n)=>p(n,t._i),()=>e(3,h=!0)]}class se extends X{constructor(t){super(),V(this,t,re,oe,s,{options:0})}}function ie(n){let e,o,r,s;return{c(){e=c("div"),o=c("span"),o.textContent="Error",r=f(" - can't load "),s=f(n[0]),g(o,"class","text-red-600 font-bold")},m(t,n){l(t,e,n),i(e,o),i(e,r),i(e,s)},p(t,n){1&n&&w(s,t[0])},i:t,o:t,d(t){t&&a(e)}}}function le(t){let n,e,o,r,s,u=t[2](t[0],t[3])+"";return r=new se({props:{options:t[3]}}),{c(){n=c("h1"),e=f(u),o=d(),U(r.$$.fragment),g(n,"class","text-2xl mb-4")},m(t,a){l(t,n,a),i(n,e),l(t,o,a),H(r,t,a),s=!0},p(t,n){(!s||3&n)&&u!==(u=t[2](t[0],t[3])+"")&&w(e,u);const o={};2&n&&(o.options=t[3]),r.$set(o)},i(t){s||(P(r.$$.fragment,t),s=!0)},o(t){I(r.$$.fragment,t),s=!1},d(t){t&&a(n),t&&a(o),G(r,t)}}}function ae(n){let e;return{c(){e=c("div"),e.textContent="Loading..."},m(t,n){l(t,e,n)},p:t,i:t,o:t,d(t){t&&a(e)}}}function ce(t){let n,e,o,r={ctx:t,current:null,token:null,hasCatch:!0,pending:ae,then:le,catch:ie,value:3,error:4,blocks:[,,,]};return D(e=t[1],r),{c(){n=c("div"),r.block.c(),g(n,"class","mx-5 my-2")},m(t,e){l(t,n,e),r.block.m(n,r.anchor=null),r.mount=()=>n,r.anchor=null,o=!0},p(n,[o]){t=n,r.ctx=t,2&o&&e!==(e=t[1])&&D(e,r)||function(t,n,e){const o=n.slice(),{resolved:r}=t;t.current===t.then&&(o[t.value]=r),t.current===t.catch&&(o[t.error]=r),t.block.p(o,e)}(r,t,o)},i(t){o||(P(r.block),o=!0)},o(t){for(let t=0;t<3;t+=1){I(r.blocks[t])}o=!1},d(t){t&&a(n),r.block.d(),r.token=null,r=null}}}function ue(t,n,e){let{path:o}=n,{datap:r}=n;function s(t,n){return n.title||n.id||function(t,n){if(void 0===n){if(t.length<1)throw new Error("can't get last elements from empty list");return t[t.length-1]}if(t.length<n)throw new Error(`can't get last ${n} elements from list of length ${t.length}`);return t.slice(t.length-n,t.length)}(t.split("/")).replace(/\.[^\.]+$/,"")}return t.$$set=t=>{"path"in t&&e(0,o=t.path),"datap"in t&&e(1,r=t.datap)},t.$$.update=()=>{3&t.$$.dirty&&r.then((t=>document.title=s(o,t)))},[o,r,s]}const fe=function(){let t=window.location.pathname;return t.startsWith("/")||(t+="/"),t=t.replace(/:([^:]+)$/i,""),/\.[^\/]+$/.test(t)||(t+=".json"),t}();new class extends X{constructor(t){super(),V(this,t,ue,ce,s,{path:0,datap:1})}}({target:document.body,props:{path:fe,datap:async function(t){let n=await fetch(function(t,n={}){const e=[];for(const t in n){const o=n[t];null!=t&&null!=o&&e.push(`${encodeURIComponent(t)}=${encodeURIComponent(""+n[t])}`)}return e.length>0?`${t}${t.includes("?")?"&":"?"}${e.join("&")}`:t}(t,{clearcache:Math.random()}));return await n.json()}(fe)}})}();
