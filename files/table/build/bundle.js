!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t){return null==t?"":t}function l(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function f(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function d(t){return document.createTextNode(t)}function m(){return d(" ")}function p(){return d("")}function h(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function g(t){return function(e){return e.preventDefault(),t.call(this,e)}}function w(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function $(t,e){t.value=null==e?"":e}function y(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}function b(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}}let x;function k(t){x=t}function _(){if(!x)throw new Error("Function called outside component initialization");return x}const j=[],M=[],E=[],q=[],S=Promise.resolve();let O=!1;function N(t){E.push(t)}function A(t){q.push(t)}let C=!1;const T=new Set;function P(){if(!C){C=!0;do{for(let t=0;t<j.length;t+=1){const e=j[t];k(e),F(e.$$)}for(k(null),j.length=0;M.length;)M.pop()();for(let t=0;t<E.length;t+=1){const e=E[t];T.has(e)||(T.add(e),e())}E.length=0}while(j.length);for(;q.length;)q.pop()();O=!1,C=!1,T.clear()}}function F(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(N)}}const L=new Set;let z;function J(){z={r:0,c:[],p:z}}function D(){z.r||o(z.c),z=z.p}function H(t,e){t&&t.i&&(L.delete(t),t.i(e))}function I(t,e,n,o){if(t&&t.o){if(L.has(t))return;L.add(t),z.c.push((()=>{L.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function B(t,e){const n=e.token={};function o(t,o,r,s){if(e.token!==n)return;e.resolved=s;let i=e.ctx;void 0!==r&&(i=i.slice(),i[r]=s);const l=t&&(e.current=t)(i);let c=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==o&&t&&(J(),I(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),D())})):e.block.d(1),l.c(),H(l,1),l.m(e.mount(),e.anchor),c=!0),e.block=l,e.blocks&&(e.blocks[o]=l),c&&P()}if((r=t)&&"object"==typeof r&&"function"==typeof r.then){const n=_();if(t.then((t=>{k(n),o(e.then,1,e.value,t),k(null)}),(t=>{if(k(n),o(e.catch,2,e.error,t),k(null),!e.hasCatch)throw t})),e.current!==e.pending)return o(e.pending,0),!0}else{if(e.current!==e.then)return o(e.then,1,e.value,t),!0;e.resolved=t}var r}function R(t,e){t.d(1),e.delete(t.key)}function V(t,e){I(t,1,1,(()=>{e.delete(t.key)}))}function K(t,e,n,o,r,s,i,l,c,a,u,f){let d=t.length,m=s.length,p=d;const h={};for(;p--;)h[t[p].key]=p;const g=[],w=new Map,v=new Map;for(p=m;p--;){const t=f(r,s,p),l=n(t);let c=i.get(l);c?o&&c.p(t,e):(c=a(l,t),c.c()),w.set(l,g[p]=c),l in h&&v.set(l,Math.abs(p-h[l]))}const $=new Set,y=new Set;function b(t){H(t,1),t.m(l,u),i.set(t.key,t),u=t.first,m--}for(;d&&m;){const e=g[m-1],n=t[d-1],o=e.key,r=n.key;e===n?(u=e.first,d--,m--):w.has(r)?!i.has(o)||$.has(o)?b(e):y.has(r)?d--:v.get(o)>v.get(r)?(y.add(o),b(e)):($.add(r),d--):(c(n,i),d--)}for(;d--;){const e=t[d];w.has(e.key)||c(e,i)}for(;m;)b(g[m-1]);return g}function W(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function U(t){t&&t.c()}function G(t,n,s,i){const{fragment:l,on_mount:c,on_destroy:a,after_update:u}=t.$$;l&&l.m(n,s),i||N((()=>{const n=c.map(e).filter(r);a?a.push(...n):o(n),t.$$.on_mount=[]})),u.forEach(N)}function Q(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function X(t,e){-1===t.$$.dirty[0]&&(j.push(t),O||(O=!0,S.then(P)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Y(e,r,s,i,l,c,u=[-1]){const f=x;k(e);const d=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:r.context||[]),callbacks:n(),dirty:u,skip_bound:!1};let m=!1;if(d.ctx=s?s(e,r.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return d.ctx&&l(d.ctx[t],d.ctx[t]=r)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](r),m&&X(e,t)),n})):[],d.update(),m=!0,o(d.before_update),d.fragment=!!i&&i(d.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);d.fragment&&d.fragment.l(t),t.forEach(a)}else d.fragment&&d.fragment.c();r.intro&&H(e.$$.fragment),G(e,r.target,r.anchor,r.customElement),P()}k(f)}class Z{$destroy(){Q(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const tt=new Map;let et="Deno"in window?window.Deno:void 0;function nt(t){return t&&t.toJSON?t.toJSON():t}const ot=[];let rt,st=0,it=!1;function lt(){it||(it=!0,setTimeout((async()=>{for(;st<ot.length;){let{name:t,test:e}=ot[st];st+=1;try{console.log(`  test | ${t}`);let n=e();n&&await n}catch(e){if(console.error(`  test | ${t} failed`),console.error(e),null!=et)throw e}}it=!1}),0))}window.runTests=lt;try{rt=(function(t,e){if(!tt.has(t))try{tt.set(t,Deno.env.get(t))}catch(e){tt.set(t,void 0)}const n=tt.get(t)||e;if(null==n)throw new Error(`env var '${t}' is not defined`);return n}("test")||"").toLowerCase()}catch(t){rt="false"}let ct="all"==rt||"true"==rt;function at(t,e){ot.push({name:t,test:e}),(ct||t.toLowerCase()==rt)&&lt()}const ut=function(t,e){const n=e?e instanceof Function?e():e:"Assertion error!";if(!t)throw new Error(n)};function ft(t){return null===t||"object"!=typeof t?t:Array.isArray(t)?t.map(ft):"toJSON"in t?ft(t.toJSON()):Object.assign({},...Object.entries(t).sort((([t],[e])=>t.localeCompare(e))).map((([t,e])=>({[t]:ft(e)}))))}function dt(t,e=!0){return e?JSON.stringify(ft(t),null,2):JSON.stringify(ft(t))}function mt(t,e){return null===(t=e(t))||"object"!=typeof t?t:"map"in t?t.map((t=>mt(t,e))):Object.assign({},...Object.entries(t).map((([t,n])=>({[t]:mt(n,e)}))))}function pt(t,e){const n=e.match(t);return n?1==n.length?[]:n.slice(1,n.length):[]}function ht(t){if(t instanceof Array)return t.length;if(t instanceof String||"string"==typeof t)return t.length;{let e=0;for(const n in t)t.hasOwnProperty(n)&&e++;return e}}function gt(t,e){if(t instanceof Array)for(let n=0;n<t.length;n++)e(t[n],n);else if(t instanceof Map)for(const[n,o]of t)e(o,n);else for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function wt(t,e){const n=e instanceof Function?e:t=>t==e;if(t instanceof Array)for(let e=0;e<t.length;e++){if(n(t[e],e))return t[e];for(const e in t)if(t.hasOwnProperty(e)&&n(t[e],e))return t[e]}}function vt(t,e){if(e=e||(t=>t),0==t.length)return-1;let n=e(t[0]),o=0;for(let r=1;r<t.length;r++){let s=e(t[r]);s<n&&(n=s,o=r)}return o}function $t(t,e){if(e=e||(t=>t),0==t.length)return-1;let n=e(t[0]),o=0;for(let r=1;r<t.length;r++){let s=e(t[r]);s>n&&(n=s,o=r)}return o}function yt(t,e=!1){return bt(t,.5,e)}function bt(t,e,n=!1){const o=n?t:[...t].sort(((t,e)=>t-e)),r=(o.length-1)*e,s=Math.floor(r),i=r-s;return void 0!==o[s+1]?o[s]+i*(o[s+1]-o[s]):o[s]}function xt(t,e){const n=[];let o=0;for(;;){const r=[];o<t.length&&n.push(r);for(let s=0;s<e;s++){if(!(o+s<t.length))return n;r.push(t[o+s])}o+=e}}function kt(t,e){if(t instanceof Array){const n=new Array,o=new Array,r=e instanceof Function?e:(t,n)=>e.includes(n);return gt(t,((t,e)=>r(t,e)?n.push(t):o.push(t))),[n,o]}{const n={},o={},r=e instanceof Function?e:(t,n)=>e.includes(n);return gt(t,((t,e)=>r(t,e)?n[e]=t:o[e]=t)),[n,o]}}function _t(t,e,n=!1){if(0==t.length)return t;{const o=typeof e(t[0]);let r,s;if("number"==o)r=function(t,n){return e(t)-e(n)};else if("boolean"==o)r=function(t,n){return(e(t)?1:0)-(e(n)?1:0)};else{if("string"!=o)throw new Error(`invalid return type for 'by' '${o}'`);r=function(t,n){return e(t).localeCompare(e(n))}}return s=[...t],s.sort(r),n&&s.reverse(),s}}function jt(t,e){if(t instanceof Array){const n=[];return gt(t,((t,o)=>{const r=e(t,o);!1!==r&&n.push(r)})),n}if(t instanceof Map){const n=new Map;return gt(t,((t,o)=>{const r=e(t,o);!1!==r&&n.set(o,r)})),n}{const n={};return gt(t,((t,o)=>{const r=e(t,o);!1!==r&&(n[o]=r)})),n}}function Mt(t,e){if("object"==typeof t&&"found"in t){if(t.found)return t.value;throw new Error(t.message||`value${e?" "+e:""} not found`)}if("string"==typeof t){if(""==t)throw new Error(`string value${e?" "+e:""} not found`);return t}if(void 0===t)throw new Error(`value${e?" "+e:""} not defined`);return t}function Et(t,e,n){return gt(t,((t,o)=>e=n(e,t,o))),e}function qt(t){return Et(t,0,((t,e)=>t+e))}function St(t,e){if(t instanceof Array)return t.map(e);if(t instanceof Map){const n=new Map;return gt(t,((t,o)=>n.set(o,e(t,o)))),n}{const n={};return gt(t,((t,o)=>n[o]=e(t,o))),n}}function Ot(t,e=0){return 0==e?Math.round(t):Math.round((t+Number.EPSILON)*Math.pow(10,e))/Math.pow(10,e)}function Nt(t,e){let n;return(...o)=>{n&&clearTimeout(n),n=setTimeout((()=>t(...o)),e)}}function At(t){switch(t){case"left":return"text-left";case"center":return"text-center";case"right":return"text-right"}}function Ct(e){let n,o;return{c(){n=u("div"),o=d(e[0]),w(n,"class",e[1])},m(t,e){c(t,n,e),l(n,o)},p(t,[e]){1&e&&v(o,t[0])},i:t,o:t,d(t){t&&a(n)}}}ut.equal=(t,e,n)=>{if(!function(t,e){return dt(t)===dt(e)}(t,e)){const o=n?n instanceof Function?n():n:`Assertion error: ${dt(t,!0)} != ${dt(e,!0)}`;throw new Error(o)}},ut.fail=(t,e)=>{let n=!1;try{t()}catch(t){n=!0}if(!n){const t=e?e instanceof Function?e():e:"Assertion error: expected to fail but didn't";throw new Error(t)}},ut.approxEqual=(t,e,n,o)=>{o=o||.001;const r=(Math.abs(t)+Math.abs(e))/2*o;if(Math.abs(t-e)>r){const o=n?n instanceof Function?n():n:`Assertion error: ${dt(t,!0)} != ${dt(e,!0)}`;throw new Error(o)}},at("deepMap",(()=>{class t{constructor(t){this.v=t}toJSON(){return this.v}}const e=new t([1,2]);ut.equal(mt(e,nt),[1,2]);const n=new t([e,3]);ut.equal(mt(n,nt),[[1,2],3])})),Promise.prototype.toJSON=function(){return"Promise"},Object.defineProperty(Promise.prototype,"cmap",{configurable:!1,enumerable:!1}),at("parse",(()=>{ut.equal(pt(/.+ (\d+) (\d+)/,"a 22 45"),["22","45"]),ut.equal(pt(/[^;]+;/,"drop table; create table;"),[])})),at("parseNamed",(()=>{ut.equal(function(t,e){const n=e.match(t);return(null==n?void 0:n.groups)||{}}(/.+ (?<a>\d+) (?<b>\d+)/,"a 22 45"),{a:"22",b:"45"})})),at("dedent",(()=>{ut.equal(function(t){const e=pt(/^(\s+)/,t=t.replace(/^\n*/,""));return 0==e.length?t:t.replace(new RegExp("^\\s{"+e[0].length+"}","gm"),"")}("\n  a\n  b\n    c"),"a\nb\n  c")})),at("groupByN",(()=>{ut.equal(xt([1,2,3],2),[[1,2],[3]]),ut.equal(xt([1,2],2),[[1,2]]),ut.equal(xt([1],2),[[1]]),ut.equal(xt([],2),[])})),at("sortBy",(()=>{ut.equal(_t([{v:!0},{v:!1}],(({v:t})=>t)),[{v:!1},{v:!0}]),ut.equal(_t([{v:"b"},{v:""},{v:"c"}],(({v:t})=>t)),[{v:""},{v:"b"},{v:"c"}])})),at("pick",(()=>{var t;ut.equal((t=["a"],kt({a:1,b:2},((e,n)=>t.includes(n)))[0]),{a:1})})),at("round",(()=>{ut.equal(Ot(.05860103881518906,2),.06)})),Error.prototype.toJSON=function(){return{message:this.message,stack:this.stack}},Map.prototype.toJSON=function(){return Et(this,{},((t,e,n)=>(t[n]=e,t)))};function Tt(t,e,n){let o,{options:r}=e,{value:s}=e;const i=At(r.align||"left")+(r.small?" text-xs":"");return t.$$set=t=>{"options"in t&&n(2,r=t.options),"value"in t&&n(3,s=t.value)},t.$$.update=()=>{8&t.$$.dirty&&n(0,o=null==s?"":s)},[o,i,r,s]}var Pt=Object.freeze({__proto__:null,default:class extends Z{constructor(t){super(),Y(this,t,Tt,Ct,s,{options:2,value:3})}},compatibleTypes:["number","boolean","string"],align:function(t,e){return t.align||"left"}});function Ft(e){let n,o,r=(e[0]?e[2]:e[3])+"";return{c(){n=u("div"),o=d(r),w(n,"class",e[1])},m(t,e){c(t,n,e),l(n,o)},p(t,[e]){1&e&&r!==(r=(t[0]?t[2]:t[3])+"")&&v(o,r)},i:t,o:t,d(t){t&&a(n)}}}function Lt(t,e,n){let{options:o}=e,{value:r}=e;const s=At(o.align||"center"),i=o.true||"✓",l=o.false||"";return t.$$set=t=>{"options"in t&&n(4,o=t.options),"value"in t&&n(0,r=t.value)},[r,s,i,l,o]}var zt=Object.freeze({__proto__:null,default:class extends Z{constructor(t){super(),Y(this,t,Lt,Ft,s,{options:4,value:0})}},compatibleTypes:["boolean"],align:function(t,e){return t.align||"center"}});function Jt(e){let n,o;return{c(){n=u("div"),o=d(e[0]),w(n,"class",e[1])},m(t,e){c(t,n,e),l(n,o)},p(t,[e]){1&e&&v(o,t[0])},i:t,o:t,d(t){t&&a(n)}}}function Dt(t,e,n){let o,{options:r}=e,{value:s}=e;const i="round"in r?r.round:2,l=At(r.align||"right")+(r.small?" text-xs":"");return t.$$set=t=>{"options"in t&&n(2,r=t.options),"value"in t&&n(3,s=t.value)},t.$$.update=()=>{8&t.$$.dirty&&n(0,o=void 0===s?"":""+(void 0!==i?s.toFixed(i):s))},[o,l,r,s]}var Ht=Object.freeze({__proto__:null,default:class extends Z{constructor(t){super(),Y(this,t,Dt,Jt,s,{options:2,value:3})}},compatibleTypes:["number"],align:function(t,e){return t.align||"right"}});function It(t,e,n){const o=t.slice();return o[7]=e[n],o}function Bt(t,e,n){const o=t.slice();return o[7]=e[n],o}function Rt(t,e,n){const o=t.slice();return o[7]=e[n],o}function Vt(t){let e,n,o;return{c(){e=f("svg"),n=f("title"),o=d(t[4]),w(e,"class","plot-line-format text-center")},m(t,r){c(t,e,r),l(e,n),l(n,o)},p(t,e){16&e&&v(o,t[4])},d(t){t&&a(e)}}}function Kt(t){let e;function n(t,e){return t[3]<=0?Gt:t[2]>=0?Ut:Wt}let o=n(t),r=o(t);return{c(){r.c(),e=p()},m(t,n){r.m(t,n),c(t,e,n)},p(t,s){o===(o=n(t))&&r?r.p(t,s):(r.d(1),r=o(t),r&&(r.c(),r.m(e.parentNode,e)))},d(t){r.d(t),t&&a(e)}}}function Wt(t){let e,n,o,r,s=[],i=new Map,u=t[1].nticks;const m=t=>t[7];for(let e=0;e<u.length;e+=1){let n=It(t,u,e),o=m(n);i.set(o,s[e]=Yt(o,n))}function p(t,e){return t[0]>0?te:Zt}let h=p(t),g=h(t);return{c(){e=f("svg"),n=f("title"),o=d(t[4]);for(let t=0;t<s.length;t+=1)s[t].c();r=f("line"),g.c(),w(r,"x1","50%"),w(r,"y1","5%"),w(r,"x2","50%"),w(r,"y2","95%"),w(r,"stroke",ie),w(r,"stroke-width","1"),w(e,"class","plot-line-format text-center")},m(t,i){c(t,e,i),l(e,n),l(n,o);for(let t=0;t<s.length;t+=1)s[t].m(e,null);l(e,r),g.m(e,null)},p(t,n){16&n&&v(o,t[4]),2&n&&(u=t[1].nticks,s=K(s,n,m,1,t,u,i,e,R,Yt,r,It)),h===(h=p(t))&&g?g.p(t,n):(g.d(1),g=h(t),g&&(g.c(),g.m(e,null)))},d(t){t&&a(e);for(let t=0;t<s.length;t+=1)s[t].d();g.d()}}}function Ut(t){let e,n,o,r,s,i=[],u=new Map,m=t[1].nticks;const p=t=>t[7];for(let e=0;e<m.length;e+=1){let n=Bt(t,m,e),o=p(n);u.set(o,i[e]=ee(o,n))}return{c(){e=f("svg"),n=f("title"),o=d(t[4]);for(let t=0;t<i.length;t+=1)i[t].c();r=f("rect"),w(r,"x","0%"),w(r,"y","25%"),w(r,"width",s=100*t[0]+"%"),w(r,"height","50%"),w(r,"fill",se),w(e,"class","plot-line-format text-center")},m(t,s){c(t,e,s),l(e,n),l(n,o);for(let t=0;t<i.length;t+=1)i[t].m(e,null);l(e,r)},p(t,n){16&n&&v(o,t[4]),2&n&&(m=t[1].nticks,i=K(i,n,p,1,t,m,u,e,R,ee,r,Bt)),1&n&&s!==(s=100*t[0]+"%")&&w(r,"width",s)},d(t){t&&a(e);for(let t=0;t<i.length;t+=1)i[t].d()}}}function Gt(t){let e,n,o,r,s,i,u=[],m=new Map,p=t[1].nticks;const h=t=>t[7];for(let e=0;e<p.length;e+=1){let n=Rt(t,p,e),o=h(n);m.set(o,u[e]=ne(o,n))}return{c(){e=f("svg"),n=f("title"),o=d(t[4]);for(let t=0;t<u.length;t+=1)u[t].c();r=f("rect"),w(r,"x",s=100- -100*t[0]+"%"),w(r,"y","25%"),w(r,"width",i=-100*t[0]+"%"),w(r,"height","50%"),w(r,"fill",se),w(e,"class","plot-line-format text-center")},m(t,s){c(t,e,s),l(e,n),l(n,o);for(let t=0;t<u.length;t+=1)u[t].m(e,null);l(e,r)},p(t,n){16&n&&v(o,t[4]),2&n&&(p=t[1].nticks,u=K(u,n,h,1,t,p,m,e,R,ne,r,Rt)),1&n&&s!==(s=100- -100*t[0]+"%")&&w(r,"x",s),1&n&&i!==(i=-100*t[0]+"%")&&w(r,"width",i)},d(t){t&&a(e);for(let t=0;t<u.length;t+=1)u[t].d()}}}function Qt(t){let e,n,o;return{c(){e=f("line"),w(e,"x1",n=50- -50*t[7]+"%"),w(e,"y1","5%"),w(e,"x2",o=50- -50*t[7]+"%"),w(e,"y2","25%"),w(e,"stroke",ie),w(e,"stroke-width","1")},m(t,n){c(t,e,n)},p(t,r){2&r&&n!==(n=50- -50*t[7]+"%")&&w(e,"x1",n),2&r&&o!==(o=50- -50*t[7]+"%")&&w(e,"x2",o)},d(t){t&&a(e)}}}function Xt(t){let e,n,o;return{c(){e=f("line"),w(e,"x1",n=50+50*t[7]+"%"),w(e,"y1","5%"),w(e,"x2",o=50+50*t[7]+"%"),w(e,"y2","25%"),w(e,"stroke",ie),w(e,"stroke-width","1")},m(t,n){c(t,e,n)},p(t,r){2&r&&n!==(n=50+50*t[7]+"%")&&w(e,"x1",n),2&r&&o!==(o=50+50*t[7]+"%")&&w(e,"x2",o)},d(t){t&&a(e)}}}function Yt(t,e){let n,o;function r(t,e){return t[7]>0?Xt:Qt}let s=r(e),i=s(e);return{key:t,first:null,c(){n=p(),i.c(),o=p(),this.first=n},m(t,e){c(t,n,e),i.m(t,e),c(t,o,e)},p(t,n){s===(s=r(e=t))&&i?i.p(e,n):(i.d(1),i=s(e),i&&(i.c(),i.m(o.parentNode,o)))},d(t){t&&a(n),i.d(t),t&&a(o)}}}function Zt(t){let e,n,o;return{c(){e=f("rect"),w(e,"x",n=50- -50*t[0]+"%"),w(e,"y","25%"),w(e,"width",o=-50*t[0]+"%"),w(e,"height","50%"),w(e,"fill",se)},m(t,n){c(t,e,n)},p(t,r){1&r&&n!==(n=50- -50*t[0]+"%")&&w(e,"x",n),1&r&&o!==(o=-50*t[0]+"%")&&w(e,"width",o)},d(t){t&&a(e)}}}function te(t){let e,n;return{c(){e=f("rect"),w(e,"x","50%"),w(e,"y","25%"),w(e,"width",n=50*t[0]+"%"),w(e,"height","50%"),w(e,"fill",se)},m(t,n){c(t,e,n)},p(t,o){1&o&&n!==(n=50*t[0]+"%")&&w(e,"width",n)},d(t){t&&a(e)}}}function ee(t,e){let n,o,r;return{key:t,first:null,c(){n=f("line"),w(n,"x1",o=100*e[7]+"%"),w(n,"y1","5%"),w(n,"x2",r=100*e[7]+"%"),w(n,"y2","25%"),w(n,"stroke",ie),w(n,"stroke-width","1"),this.first=n},m(t,e){c(t,n,e)},p(t,s){e=t,2&s&&o!==(o=100*e[7]+"%")&&w(n,"x1",o),2&s&&r!==(r=100*e[7]+"%")&&w(n,"x2",r)},d(t){t&&a(n)}}}function ne(t,e){let n,o,r;return{key:t,first:null,c(){n=f("line"),w(n,"x1",o=100- -100*e[7]+"%"),w(n,"y1","5%"),w(n,"x2",r=100- -100*e[7]+"%"),w(n,"y2","25%"),w(n,"stroke",ie),w(n,"stroke-width","1"),this.first=n},m(t,e){c(t,n,e)},p(t,s){e=t,2&s&&o!==(o=100- -100*e[7]+"%")&&w(n,"x1",o),2&s&&r!==(r=100- -100*e[7]+"%")&&w(n,"x2",r)},d(t){t&&a(n)}}}function oe(e){let n;function o(t,e){return t[1]&&null!=t[0]?Kt:Vt}let r=o(e),s=r(e);return{c(){s.c(),n=p()},m(t,e){s.m(t,e),c(t,n,e)},p(t,[e]){r===(r=o(t))&&s?s.p(t,e):(s.d(1),s=r(t),s&&(s.c(),s.m(n.parentNode,n)))},i:t,o:t,d(t){s.d(t),t&&a(n)}}}const re=(t,e,n,o)=>{const r=[],s=o.scale||"linear";o.log_unit&&("log"!=o.scale&&r.push(`column ${t} 'line.log_unit' could be used with log scale only`),n=n.map((t=>void 0!==t&&t>=0&&t<1?1:t)));let i,l,c=[];if("log"==s){if(e[0]<=0)return r.push(`column ${t}, 'line.domain' can't be negative for log scale`),{column:n.map((t=>{})),warnings:r,stats:void 0};let s=Math.max(...e.map((t=>Math.log(Math.abs(t)))));c=n.map((e=>void 0===e?void 0:e>0?Math.log(e)/s:void r.push(`column ${t}, values can't be negative for log scale`))),i=jt(o.ticks||[],(e=>e>0?Math.log(e)/s:(r.push(`column ${t}, ticks can't be negative for log scale`),!1))),l=[Math.log(e[0])/s,Math.log(e[1])/s]}else{if("linear"!=s)throw new Error(`unknown scale ${s}`);{let t=Math.max(...e.map((t=>Math.abs(t))));0==t&&(t=1),c=n.map((e=>void 0===e?void 0:e/t)),i=(o.ticks||[]).map((e=>e/t)),l=[e[0]/t,e[1]/t]}}return{column:c,warnings:r,stats:{domain:e,ndomain:l,nticks:i}}},se="#111827",ie="#111827";function le(t,e,n){let o,r,s,{options:i}=e,{value:l}=e,{converted:c}=e,{stats:a}=e;return t.$$set=t=>{"options"in t&&n(5,i=t.options),"value"in t&&n(6,l=t.value),"converted"in t&&n(0,c=t.converted),"stats"in t&&n(1,a=t.stats)},t.$$.update=()=>{2&t.$$.dirty&&n(2,[o,r]=a?a.ndomain:[0,0],o,(n(3,r),n(1,a))),99&t.$$.dirty&&n(4,s=[void 0!==c?`value: ${l}`:"missing",((null==a?void 0:a.nticks)||[]).length>0?`, ticks: [${(i.ticks||[]).join(", ")}]`:"",a?`domain: [${a.domain[0]}, ${a.domain[1]}]`:"",`scale: ${i.scale||"linear"}`].join(", "))},[c,a,o,r,s,i,l]}var ce=Object.freeze({__proto__:null,default:class extends Z{constructor(t){super(),Y(this,t,le,oe,s,{options:5,value:6,converted:0,stats:1})}},compatibleTypes:["number"],extraValues:({ticks:t})=>t||[],align:function(t,e){if(t.align)return t.align;if(e){const[t,n]=e.ndomain;return n<=0?"right":t>=0?"left":"center"}return"center"},convertColumn:re});function ae(e){let n,o;return{c(){n=u("div"),o=d(e[0]),w(n,"class",e[1])},m(t,e){c(t,n,e),l(n,o)},p(t,[e]){1&e&&v(o,t[0])},i:t,o:t,d(t){t&&a(n)}}}function ue(t,e,n){let o,{options:r}=e,{value:s}=e;const i=At(r.align||"left")+(r.small?" text-xs":"");return t.$$set=t=>{"options"in t&&n(2,r=t.options),"value"in t&&n(3,s=t.value)},t.$$.update=()=>{8&t.$$.dirty&&n(0,o=null==s?"":""+s)},[o,i,r,s]}const fe={string:Pt,boolean:zt,number:Ht,unknown:Object.freeze({__proto__:null,default:class extends Z{constructor(t){super(),Y(this,t,ue,ae,s,{options:2,value:3})}},compatibleTypes:[],align:function(t,e){return t.align||"left"}}),line:ce};function de(t){return t in fe?{isError:!1,value:fe[t]}:{isError:!0,message:`no '${t}' format`}}const me=["string","number","boolean","unknown"],pe=["<=","<","=","!=",">",">=","~"],he={string:function(t,e){return t.localeCompare(e)},number:function(t,e){return t-e},boolean:function(t,e){return t==e?0:t?1:-1},unknown:function(t,e){return(""+t).localeCompare(""+e)}};function ge(t,[e,n]){const o="desc"==n,r=Mt(wt(t,(({id:t})=>t==e))).type;if(!(r in he))throw new Error(`no comparator for '${r}' type, please register one`);const s=he[r];return o?function(t,n){const o=n[e],r=t[e];return void 0===o?void 0===r?0:-1:void 0===r?1:s(o,r)}:function(t,n){const o=t[e],r=n[e];return void 0===o?void 0===r?0:-1:void 0===r?1:s(o,r)}}function we(t,e,n){if(n.length>3)throw new Error("sort not supported for more than 3 columns");const[o,r,s]=n;if(null==o&&ut(null==r),null==r&&ut(null==s),0==e.length||null==o)return e;let i,l=ge(t,o),c=r?ge(t,r):void 0,a=s?ge(t,s):void 0;i=a?function(t,e){let n=l(t,e);return 0!=n?n:(n=c(t,e),0!=n?n:a(t,e))}:c?function(t,e){let n=l(t,e);return 0!=n?n:c(t,e)}:l;const u=[...e];return u.sort(i),u}function ve(t,e,n){const o=[...e];for(const t of o)t._weights={},t._nweights={};for(const e in n){const{type:n,min_max:r}=Mt(wt(t,(({id:t})=>t==e)));let[s,i]=kt(o,(t=>void 0!==t[e]));if(0==s.length){for(const t of o)t._weights[e]=0,t._nweights[e]=0;continue}if("number"==n){const t=typeof o[0][e];if("number"!=t)throw new Error(`wrong type for '${e}' column, wsort expects number but found '${t}'`);for(const t of s)t._weights[e]=t[e]}else{if(!(n in he))throw new Error(`no comparator for '${n}' type, please register one`);const t=he[n];s.sort(((n,o)=>t(n[e],o[e])));let o,r=0;for(let t=0;t<s.length;t++){const n=s[t];n[e]==o?r+=1:o=n[e],n._weights[e]=t-r}}{let t,o;if(r){if("number"!=n)throw new Error("can't use min_max for non number type");t=r[0],o=r[1]}else{const n=s.map((t=>t._weights[e]));t=Math.min(...n),o=Math.max(...n)}const i=(o+t)/2;let l=(o-t)/2;ut(l>=0),l=0==l?1:l;for(const t of s){let n=(t._weights[e]-i)/l;t._nweights[e]=n}}let l=yt(s.map((t=>t._nweights[e])));for(const t of i)t._nweights[e]=l}for(const t of o){let e=0;for(const o in n)e+=n[o]*t._nweights[o];t._w=e}return o.sort(((t,e)=>t._w-e._w)).reverse(),o}at("sortTable",(()=>{const t=[{id:"name",type:"string"},{id:"age",type:"number"}],e=[{name:"Artanis",age:200},{name:"Sarah",age:30},{name:"Jim",age:30},{name:"Amon",age:void 0}];let n=n=>we(t,e,n).map((({name:t})=>t));ut.equal(n([["name","asc"]]),["Amon","Artanis","Jim","Sarah"]),ut.equal(n([["age","asc"]])[0],"Amon"),ut.equal(n([["age","asc"],["name","asc"]]),["Amon","Jim","Sarah","Artanis"])})),at("wsortTable",(()=>{const t=(t,e,n)=>ve(t,e,n).map((({id:t})=>t));ut.equal(t([{id:"a",type:"number"},{id:"b",type:"number"}],[{id:"a",a:0,b:3},{id:"b",a:1,b:3},{id:"c",a:2,b:void 0},{id:"d",a:-2,b:200}],{a:1,b:-1}),["d","a","b","c"]);ut.equal(t([{id:"a",type:"number"}],[{id:"a",a:0},{id:"b",a:1},{id:"c",a:void 0}],{a:1}),["a","c","b"]);{const t=ve([{id:"a",type:"string"}],[{id:"a",a:"a"},{id:"b",a:"a"},{id:"c",a:"b"}],{a:1});ut.equal(t[2].id,"c"),ut.equal(t.map((t=>t._weights.a)),[0,0,1])}}));function $e(t){return _t(function(t,e){const n=new Set,o=e||(t=>t);return t.filter((t=>{const e=o(t);return!n.has(e)&&(n.add(e),!0)}))}(t.map((t=>"string"==typeof t?{type:"warn",message:t}:t)),(({message:t})=>t)),(({type:t,message:e})=>`${t} ${e}`))}function ye(t,e){if(!e)return;const n={};for(const o of t){const t=e[o.id];if(!t)continue;const r=xe(o,""+t[1]);void 0!==r&&(n[o.id]=[be(t[0]),r])}return n}function be(t){return pe.includes(t)?t:"="}function xe({type:t},e){switch(t){case"string":return e;case"boolean":try{return["true","t","1"].includes(e.toLowerCase())}catch(t){return}case"number":try{let t=parseFloat(e);return Number.isFinite(t)?t:void 0}catch(t){return}default:return e}}const ke="abcdefghijklmnopqrstuvwxyz".split("");function _e(t,e=!1){const n=[];if(0==t.rows.length)return n.push("table is empty"),{columns:[],rows:[],messages:$e(n)};if(e&&(o=t.version,r=n,!(void 0===o?(r.push("version is missing, please specify version as 0.1"),0):(.1!=o&&r.push(`options.version ${o} is wrong, the current table has 0.1 version, update options.version or use table of different version`),1))))return{columns:[],rows:[],messages:$e(n)};var o,r;const s=function(t,e,n){const o=[];for(let r=0;r<e.length;r++){const s=e[r];if(Array.isArray(s)){const e={_i:r,_converted:{}};if(t)for(let o=0;o<s.length;o++)o<t.length?e[t[o].id]=s[o]:n.push("row size is larger than columns available");else for(let t=0;t<s.length;t++)t<ke.length?e[ke[t]]=s[t]:n.push("row size is larger than columns available");o.push(e)}else o.push(Object.assign(Object.assign({},s),{_i:r,_converted:{}}))}for(let t=0;t<o.length;t++){const e=o[t];for(const t in e)null===e[t]&&(e[t]=void 0)}return o}(t.columns,t.rows,n);let i=function(t,e,n){if(t)return t;const o=new Map,r=new Set;for(let t=0;t<e.length;t++){const s=e[t];for(const t in s){if("_i"==t||"_converted"==t)continue;let e=s[t];if(void 0===e)r.add(t);else{let r=typeof e;"object"==r?(n.push(`unknown type for column '${t}' - '${r}'`),o.set(t,"unknown")):o.has(t)?o.get(t)!=r&&(n.push(`unstable types for column '${t}', ${[o.get(t),r].sort().join(", ")}`),o.set(t,"unknown")):o.set(t,r)}}}for(const t of r)o.has(t)||o.set(t,"unknown");return _t(Array.from(o,(([t,e])=>({id:t,type:e}))),(({id:t})=>t))}(t.columns,s,n);if(t.alter_columns){const e=t.alter_columns.map((({id:t})=>t));i=[...t.alter_columns,...i.filter((({id:t})=>!e.includes(t)))]}const l=i.length;i.length!=l&&n.push("not unique column ids"),i=function(t,e,n){t=[...t];for(let o=0;o<e.length;o++){const r=e[o];for(const e of t){const{id:t,type:o}=e;if("_i"==t)continue;let s=r[t];void 0!==s&&(typeof s!=o&&"unknown"!=o&&me.includes(o)&&(n.push(`wrong type for column '${t}', specified as '${o}' but '${typeof s}' found`),e.type="unknown"))}}return t}(i,s,n);let c=function(t,e){const n=de("unknown");if(n.isError)throw"can't get 'unknown' formatter";let o=[];for(const r of t){const t=r.format||{type:r.type},s=de(t.type);s.isError?(e.push(s.message),o.push([n.value,t])):s.value.compatibleTypes.includes(r.type)?o.push([s.value,t]):(e.push(`column ${r.id} has wrong format, format ${r.format} is not compatible with '${r.type}' type`),o.push([n.value,t]))}return o}(i,n);const a=function(t,e,n,o){const r={};for(let s=0;s<t.length;s++){const{id:i,type:l,domain:c}=t[s],[a,u]=e[s];if("number"!=l){c&&o.push(`non number column '${i}' can't have domain`);continue}const f=jt(a.extraValues?a.extraValues(u):[],(t=>void 0!==t&&t)),d=jt(n,(t=>{const e=t[i];return void 0!==e&&e}));if(d.push(...f),0==d.length){c&&(r[i]=c);continue}let m=d[0],p=d[0];for(const t of d)t>p?p=t:t<m&&(m=t);const h=c||[m,p];m<h[0]&&(o.push(`column ${i} 'domain' min value is greather than actual min ${m}`),h[0]=m),p>h[1]&&(o.push(`column ${i} 'line.domain' max value is smaller than actual max ${p}`),h[1]=p),r[i]=h}return r}(i,c,s,n);c=function(t,e,n,o){return n.map(((n,r)=>{const{id:s,type:i}=t[r],[l,c]=n;if("number"==c.type&&void 0===c.round)if("number"==i){if(e.every((t=>{const e=t[s];return void 0===e||Number.isInteger(e)})))return[l,Object.assign(Object.assign({},c),{round:0})]}else o.push(`column ${s} is non number and can't use number formatter`);return n}))}(i,s,c,n);const u=je(i,s),f=function(t,e,n,o,r){const s={};for(let i=0;i<t.length;i++){const[{id:l},[c,a]]=[t[i],n[i]];if(c.convertColumn){const t=o.map((t=>t[l])),n=e[l];if(n){const{column:e,warnings:i,stats:u}=c.convertColumn(l,n,t,a);s[l]=u,i.forEach((t=>r.push(t)));for(let t=0;t<o.length;t++)o[t]._converted[l]=e[t]}}}return s}(i,a,c,s,n);return{columns:i.map(((t,e)=>({id:t.id,type:t.type,title:t.title,format:c[e][1],formatStats:f[t.id],formatter:c[e][0],widthP:u[e],domain:a[t.id]}))),rows:s,messages:$e(n)}}function je(t,e){let n;if(t.some((({width:t})=>null!=t)))n=t.map((({width:t})=>t||1));else{const o=new Map;for(const n of e)for(const{id:e,type:r}of t){let t;if(void 0===n[e])continue;if("string"==r)t=n[e].length;else if("number"==r)t=(""+n[e]).length;else{if("boolean"!=r)continue;t=1}let s=o.get(e);null==s&&(s=[],o.set(e,s)),s.push(t)}const r=St(o,(t=>bt(t,.7))),s=yt(Et(r,[],((t,e)=>(t.push(e),t)))),i=1.618,l=St(r,(t=>t>s*i?i:t<s/i?1/i:1)),c=1;n=t.map((({id:t})=>l.get(t)||c))}return Me(n)}function Me(t){if(0==t.length)return[];const e=100/qt(t);let n=t.map((t=>Ot(t*e)));for(;;){const t=qt(n);if(t>100)n[$t(n)]-=1;else{if(!(t<100))break;n[vt(n)]+=1}}return n}function Ee(t,e,n){return e=function(t,e,n){if(!n)return e;for(const{id:o,type:r}of t){const t=n[o];if(!t)continue;const[s,i]=t;if(void 0===i||""===i)continue;const l=qe(r,[s,i]);e=e.filter((t=>l(t[o])))}return e}(t,e=function(t,e,n){if(!(n=function(t){return t.replace(/^[\t\s\n]+|[\t\s\n]+$/g,"")}(n)))return e;const o=n.toLowerCase();return e.filter((e=>{for(const{id:n}of t)if((""+e[n]).toLowerCase().includes(o))return!0;return!1}))}(t,e,n.filter),n.filters)}function qe(t,[e,n]){switch(t){case"string":if("string"!=typeof n)throw new Error("string filter value expected");const t=n;switch(e){case"<=":return e=>void 0!==e&&e<=t;case"<":return e=>void 0!==e&&e<t;case"=":return e=>void 0!==e&&e==t;case"!=":return e=>void 0!==e&&e!=t;case">":return e=>void 0!==e&&e>t;case">=":return e=>void 0!==e&&e>=t;case"~":return e=>void 0!==e&&e.includes(t)}case"boolean":if("boolean"!=typeof n)throw new Error("boolean filter value expected");const o=n;switch(e){case"<=":return t=>void 0!==t&&t<=o;case"<":return t=>void 0!==t&&t<o;case"=":return t=>void 0!==t&&t==o;case"!=":return t=>void 0!==t&&t!=o;case">":return t=>void 0!==t&&t>o;case">=":return t=>void 0!==t&&t>=o;case"~":return t=>void 0!==t&&t==o}case"number":if("number"!=typeof n)throw new Error("number filter value expected");const r=n;switch(e){case"<=":return t=>void 0!==t&&t<=r;case"<":return t=>void 0!==t&&t<r;case"=":return t=>void 0!==t&&t==r;case"!=":return t=>void 0!==t&&t!=r;case">":return t=>void 0!==t&&t>r;case">=":return t=>void 0!==t&&t>=r;case"~":return t=>void 0!==t&&t==r}default:const s=""+n;switch(e){case"<=":return t=>void 0!==t&&""+t<=s;case"<":return t=>void 0!==t&&""+t<s;case"=":return t=>void 0!==t&&""+t==s;case"!=":return t=>void 0!==t&&""+t!=s;case">":return t=>void 0!==t&&""+t>s;case">=":return t=>void 0!==t&&""+t>=s;case"~":return t=>void 0!==t&&""+t==s}}throw new Error(`unknown filter ${t} ${e}`)}function Se(t){let e,n,o,r,s,i,f,d,p,g;return{c(){e=u("div"),n=u("span"),o=u("span"),o.textContent="w =",r=m(),s=u("input"),w(o,"class","w-5 inline-block"),w(s,"class","w-10 outline-none pl-1 text-xs border border-gray-200 svelte-1brt80c"),w(s,"type","number"),w(s,"step","0.1"),s.value=i=t[2].toFixed(1),w(n,"class",f=t[3]?"text-gray-900":"text-gray-200"),w(e,"class",d=t[1]+" my-1 text-xs "+(!t[4]&&"invisible"))},m(i,a){c(i,e,a),l(e,n),l(n,o),l(n,r),l(n,s),p||(g=h(s,"change",t[5]),p=!0)},p(t,o){4&o&&i!==(i=t[2].toFixed(1))&&(s.value=i),8&o&&f!==(f=t[3]?"text-gray-900":"text-gray-200")&&w(n,"class",f),18&o&&d!==(d=t[1]+" my-1 text-xs "+(!t[4]&&"invisible"))&&w(e,"class",d)},d(t){t&&a(e),p=!1,g()}}}function Oe(e){let n,o=e[0].wsort&&Se(e);return{c(){o&&o.c(),n=p()},m(t,e){o&&o.m(t,e),c(t,n,e)},p(t,[e]){t[0].wsort?o?o.p(t,e):(o=Se(t),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:t,o:t,d(t){o&&o.d(t),t&&a(n)}}}function Ne(t,e,n){let o,r,s,{column_id:i}=e,{align:l}=e,{state:c}=e;const a=Nt((t=>{c.wsort&&n(0,c.wsort[i]=t,c)}),200);return t.$$set=t=>{"column_id"in t&&n(6,i=t.column_id),"align"in t&&n(1,l=t.align),"state"in t&&n(0,c=t.state)},t.$$.update=()=>{65&t.$$.dirty&&n(2,o=(c.wsort||{})[i]||0),4&t.$$.dirty&&n(3,r=0!=o),9&t.$$.dirty&&n(4,s=c.show_controls||r)},[c,l,o,r,s,({target:{value:t}})=>{n(2,o=parseFloat(t)),a(o)},i]}at("normalizeInputsSlow",(()=>{const t=t=>t.map((({id:t,type:e})=>({id:t,type:e})));{const{columns:e,rows:n}=_e({rows:[["v",null]]});ut.equal(t(e),[{id:"a",type:"string"},{id:"b",type:"unknown"}]),ut.equal(n,[{a:"v",b:void 0,_i:0,_converted:{}}])}{const{columns:e,rows:n}=_e({rows:[{k:"v",k2:null}]});ut.equal(t(e),[{id:"k",type:"string"},{id:"k2",type:"unknown"}]),ut.equal(n,[{k:"v",k2:void 0,_i:0,_converted:{}}])}{const{columns:e,rows:n}=_e({rows:[{k:"v"},{k:0}]});ut.equal(t(e),[{id:"k",type:"unknown"}]),ut.equal(n,[{k:"v",_i:0,_converted:{}},{k:0,_i:1,_converted:{}}])}{const{columns:t}=_e({rows:[{v:1}]});ut.equal(t[0].format,{type:"number",round:0})}})),at("calculateColumnWidths",(()=>{ut.equal(je([{id:"name",type:"string"},{id:"age",type:"number"}],[{name:"Jim Raynor",age:30},{name:"Kate",age:25}]),[62,38])})),at("weightsToPercents",(()=>{ut.equal(Me([2,2]),[50,50]),ut.equal(Me([3,3,3]).sort(),[33,33,34])}));class Ae extends Z{constructor(t){super(),Y(this,t,Ne,Oe,s,{column_id:6,align:1,state:0})}}function Ce(t,e,n){const o=t.slice();return o[9]=e[n],o}function Te(t){let e,n,r,s,i,f,d,p,g,v,$,y=[],x=new Map,k=pe;const _=t=>t[9];for(let e=0;e<k.length;e+=1){let n=Ce(t,k,e),o=_(n);x.set(o,y[e]=Pe(o,n))}return{c(){e=u("div"),n=u("span"),r=u("select");for(let t=0;t<y.length;t+=1)y[t].c();i=m(),f=u("input"),w(r,"class","outline-none w-5 inline-block svelte-126ibbo"),w(f,"class","w-10 outline-none pl-1 text-xs border border-gray-200"),w(f,"type","text"),f.value=d=void 0===t[2][1]?"":""+t[2][1],w(n,"class",p=t[3]?"text-gray-900":"text-gray-200"),w(e,"class",g=t[1]+" my-1 text-xs "+(!t[4]&&"invisible"))},m(o,s){c(o,e,s),l(e,n),l(n,r);for(let t=0;t<y.length;t+=1)y[t].m(r,null);b(r,t[2][0]),l(n,i),l(n,f),v||($=[h(r,"change",t[5]),h(f,"keyup",t[6])],v=!0)},p(t,o){0&o&&(k=pe,y=K(y,o,_,1,t,k,x,r,R,Pe,null,Ce)),4&o&&s!==(s=t[2][0])&&b(r,t[2][0]),4&o&&d!==(d=void 0===t[2][1]?"":""+t[2][1])&&f.value!==d&&(f.value=d),8&o&&p!==(p=t[3]?"text-gray-900":"text-gray-200")&&w(n,"class",p),18&o&&g!==(g=t[1]+" my-1 text-xs "+(!t[4]&&"invisible"))&&w(e,"class",g)},d(t){t&&a(e);for(let t=0;t<y.length;t+=1)y[t].d();v=!1,o($)}}}function Pe(t,e){let n,o,r=e[9]+"";return{key:t,first:null,c(){n=u("option"),o=d(r),n.__value=e[9],n.value=n.__value,this.first=n},m(t,e){c(t,n,e),l(n,o)},p(t,n){e=t},d(t){t&&a(n)}}}function Fe(e){let n,o=e[0].filters&&Te(e);return{c(){o&&o.c(),n=p()},m(t,e){o&&o.m(t,e),c(t,n,e)},p(t,[e]){t[0].filters?o?o.p(t,e):(o=Te(t),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:t,o:t,d(t){o&&o.d(t),t&&a(n)}}}function Le(t,e,n){let o,r,s,{column:i}=e,{align:l}=e,{state:c}=e;const a=Nt((t=>{c.filters&&n(0,c.filters[i.id]=t,c)}),200);return t.$$set=t=>{"column"in t&&n(7,i=t.column),"align"in t&&n(1,l=t.align),"state"in t&&n(0,c=t.state)},t.$$.update=()=>{129&t.$$.dirty&&n(2,s=c.filters&&i.id in c.filters?c.filters[i.id]:["=",void 0]),4&t.$$.dirty&&n(3,o=null!=s[1]&&""!==s[1]),9&t.$$.dirty&&n(4,r=o||c.show_controls)},[c,l,s,o,r,({target:{value:t}})=>{n(2,s[0]=be(t),s),a(s)},({target:{value:t}})=>{n(2,s[1]=xe(i,t),s),a(s)},i]}class ze extends Z{constructor(t){super(),Y(this,t,Le,Fe,s,{column:7,align:1,state:0})}}function Je(t){let e,n,o,r,s,i,f,p,$,b,x,k,_,j,E,q,S,O=t[3].symbol+"";function N(e){t[11](e)}let C={column_id:t[4],align:"text-right"};function T(e){t[12](e)}void 0!==t[0]&&(C.state=t[0]),b=new Ae({props:C}),M.push((()=>W(b,"state",N)));let P={column:t[1],align:"text-right"};return void 0!==t[0]&&(P.state=t[0]),_=new ze({props:P}),M.push((()=>W(_,"state",T))),{c(){e=u("th"),n=u("a"),o=u("span"),r=d(O),i=m(),f=u("span"),p=d(t[2]),$=m(),U(b.$$.fragment),k=m(),U(_.$$.fragment),w(o,"class",s=t[3].klass+" mr-0.5"),w(n,"class","flex justify-between"),w(n,"href","#"),y(e,"width",t[1].widthP+"%"),w(e,"class","text-right")},m(s,a){c(s,e,a),l(e,n),l(n,o),l(o,r),l(n,i),l(n,f),l(f,p),l(e,$),G(b,e,null),l(e,k),G(_,e,null),E=!0,q||(S=h(n,"click",g(t[6])),q=!0)},p(t,n){(!E||8&n)&&O!==(O=t[3].symbol+"")&&v(r,O),(!E||8&n&&s!==(s=t[3].klass+" mr-0.5"))&&w(o,"class",s),(!E||4&n)&&v(p,t[2]);const i={};!x&&1&n&&(x=!0,i.state=t[0],A((()=>x=!1))),b.$set(i);const l={};2&n&&(l.column=t[1]),!j&&1&n&&(j=!0,l.state=t[0],A((()=>j=!1))),_.$set(l),(!E||2&n)&&y(e,"width",t[1].widthP+"%")},i(t){E||(H(b.$$.fragment,t),H(_.$$.fragment,t),E=!0)},o(t){I(b.$$.fragment,t),I(_.$$.fragment,t),E=!1},d(t){t&&a(e),Q(b),Q(_),q=!1,S()}}}function De(t){let e,n,o,r,s,i,f,p,$,b,x,k,_,j,E,q,S,O,N,C,T,P=t[3].symbol+"",F=t[3].symbol+"";function L(e){t[9](e)}let z={column_id:t[4],align:"text-center"};function J(e){t[10](e)}void 0!==t[0]&&(z.state=t[0]),j=new Ae({props:z}),M.push((()=>W(j,"state",L)));let D={column:t[1],align:"text-center"};return void 0!==t[0]&&(D.state=t[0]),S=new ze({props:D}),M.push((()=>W(S,"state",J))),{c(){e=u("th"),n=u("a"),o=u("span"),r=d(P),s=m(),i=u("span"),f=d(t[2]),p=m(),$=u("span"),b=d(F),_=m(),U(j.$$.fragment),q=m(),U(S.$$.fragment),w(o,"class","invisible mr-0.5"),w($,"class",x=t[3].klass+" ml-0.5"),w($,"title",k=t[3].title),w(n,"class","flex justify-between"),w(n,"href","#"),y(e,"width",t[1].widthP+"%")},m(a,u){c(a,e,u),l(e,n),l(n,o),l(o,r),l(n,s),l(n,i),l(i,f),l(n,p),l(n,$),l($,b),l(e,_),G(j,e,null),l(e,q),G(S,e,null),N=!0,C||(T=h(n,"click",g(t[6])),C=!0)},p(t,n){(!N||8&n)&&P!==(P=t[3].symbol+"")&&v(r,P),(!N||4&n)&&v(f,t[2]),(!N||8&n)&&F!==(F=t[3].symbol+"")&&v(b,F),(!N||8&n&&x!==(x=t[3].klass+" ml-0.5"))&&w($,"class",x),(!N||8&n&&k!==(k=t[3].title))&&w($,"title",k);const o={};!E&&1&n&&(E=!0,o.state=t[0],A((()=>E=!1))),j.$set(o);const s={};2&n&&(s.column=t[1]),!O&&1&n&&(O=!0,s.state=t[0],A((()=>O=!1))),S.$set(s),(!N||2&n)&&y(e,"width",t[1].widthP+"%")},i(t){N||(H(j.$$.fragment,t),H(S.$$.fragment,t),N=!0)},o(t){I(j.$$.fragment,t),I(S.$$.fragment,t),N=!1},d(t){t&&a(e),Q(j),Q(S),C=!1,T()}}}function He(t){let e,n,o,r,s,i,f,p,$,b,x,k,_,j,E,q,S,O,N=t[3].symbol+"";function C(e){t[7](e)}let T={column_id:t[4],align:"text-left"};function P(e){t[8](e)}void 0!==t[0]&&(T.state=t[0]),x=new Ae({props:T}),M.push((()=>W(x,"state",C)));let F={column:t[1],align:"text-left"};return void 0!==t[0]&&(F.state=t[0]),j=new ze({props:F}),M.push((()=>W(j,"state",P))),{c(){e=u("th"),n=u("a"),o=u("span"),r=d(t[2]),s=m(),i=u("span"),f=d(N),b=m(),U(x.$$.fragment),_=m(),U(j.$$.fragment),w(i,"class",p=t[3].klass+" ml-0.5"),w(i,"title",$=t[3].title),w(n,"class","flex justify-between"),w(n,"href","#"),y(e,"width",t[1].widthP+"%")},m(a,u){c(a,e,u),l(e,n),l(n,o),l(o,r),l(n,s),l(n,i),l(i,f),l(e,b),G(x,e,null),l(e,_),G(j,e,null),q=!0,S||(O=h(n,"click",g(t[6])),S=!0)},p(t,n){(!q||4&n)&&v(r,t[2]),(!q||8&n)&&N!==(N=t[3].symbol+"")&&v(f,N),(!q||8&n&&p!==(p=t[3].klass+" ml-0.5"))&&w(i,"class",p),(!q||8&n&&$!==($=t[3].title))&&w(i,"title",$);const o={};!k&&1&n&&(k=!0,o.state=t[0],A((()=>k=!1))),x.$set(o);const s={};2&n&&(s.column=t[1]),!E&&1&n&&(E=!0,s.state=t[0],A((()=>E=!1))),j.$set(s),(!q||2&n)&&y(e,"width",t[1].widthP+"%")},i(t){q||(H(x.$$.fragment,t),H(j.$$.fragment,t),q=!0)},o(t){I(x.$$.fragment,t),I(j.$$.fragment,t),q=!1},d(t){t&&a(e),Q(x),Q(j),S=!1,O()}}}function Ie(t){let e,n,o,r;const s=[He,De,Je],i=[];return e=function(t,e){return"left"==t[5]?0:"center"==t[5]?1:2}(t),n=i[e]=s[e](t),{c(){n.c(),o=p()},m(t,n){i[e].m(t,n),c(t,o,n),r=!0},p(t,[e]){n.p(t,e)},i(t){r||(H(n),r=!0)},o(t){I(n),r=!1},d(t){i[e].d(t),t&&a(o)}}}function Be(t,e,n){let o,r,{column:s}=e,{state:i}=e,l=s.id;const c=s.formatter.align(s.format,s.formatStats);function a(t,e){const n={symbol:"↓",klass:"invisible",title:""};if(e.wsort){const o=e.wsort[t.id],r="wsort: "+function(t){return t instanceof Map?Array.from(t):Object.entries(t)}(e.wsort).map((([t,e])=>`${t}: ${e}`)).join(", ");return void 0===o||0==o?n:o>=0?{symbol:"↑",klass:"text-gray-900",title:r}:{symbol:"↓",klass:"text-gray-900",title:r}}if(e.sort){let t;for(let n=0;n<e.sort.length;n++){const[o,r]=e.sort[n];o==l&&(t=[r,n])}if(!t)return n;const o="sort: "+e.sort.map((([t,e])=>`${t}: ${e}`)).join(", "),[r,s]=t,i="asc"==r?"↓":"↑";let c;if(0==s)c="text-gray-900";else if(1==s)c="text-gray-400";else{if(2!=s)throw new Error("color for more than 3 sort oders isn't supported");c="text-gray-300"}return{symbol:i,klass:c,title:o}}return n}return t.$$set=t=>{"column"in t&&n(1,s=t.column),"state"in t&&n(0,i=t.state)},t.$$.update=()=>{2&t.$$.dirty&&n(2,o=s.title||s.id),3&t.$$.dirty&&n(3,r=a(s,i))},[i,s,o,r,l,c,function(t){if(i.sortable)if(i.wsort){let e=i.wsort;t.metaKey?s.id in e?e[s.id]=-1*e[s.id]:e[s.id]=1:ht(e)>1?e={[l]:1}:s.id in e?e[s.id]=-1*e[s.id]:e={[l]:1},n(0,i.wsort=e,i)}else{let e=i.sort||[];const o=function(t,e){const n=e instanceof Function?e:t=>t==e;for(let e=0;e<t.length;e++)if(n(t[e],e))return e;return-1}(e,(([t,e])=>t==s.id));t.metaKey?o>=0?e[o][1]="asc"==e[o][1]?"desc":"asc":e.push([l,"asc"]):e.length>1?e=[[l,"asc"]]:o>=0?(ut(1==e.length),e[o][1]="asc"==e[o][1]?"desc":"asc"):e=[[l,"asc"]],n(0,i.sort=e,i)}},function(t){i=t,n(0,i)},function(t){i=t,n(0,i)},function(t){i=t,n(0,i)},function(t){i=t,n(0,i)},function(t){i=t,n(0,i)},function(t){i=t,n(0,i)}]}class Re extends Z{constructor(t){super(),Y(this,t,Be,Ie,s,{column:1,state:0})}}function Ve(t,e,n){const o=t.slice();return o[3]=e[n],o}function Ke(t,e){let n,o,r,s;function i(t){e[2](t)}let l={column:e[3]};return void 0!==e[0]&&(l.state=e[0]),o=new Re({props:l}),M.push((()=>W(o,"state",i))),{key:t,first:null,c(){n=p(),U(o.$$.fragment),this.first=n},m(t,e){c(t,n,e),G(o,t,e),s=!0},p(t,n){e=t;const s={};2&n&&(s.column=e[3]),!r&&1&n&&(r=!0,s.state=e[0],A((()=>r=!1))),o.$set(s)},i(t){s||(H(o.$$.fragment,t),s=!0)},o(t){I(o.$$.fragment,t),s=!1},d(t){t&&a(n),Q(o,t)}}}function We(t){let e,n,o=[],r=new Map,s=t[1];const i=t=>t[3].id;for(let e=0;e<s.length;e+=1){let n=Ve(t,s,e),l=i(n);r.set(l,o[e]=Ke(l,n))}return{c(){e=u("tr");for(let t=0;t<o.length;t+=1)o[t].c()},m(t,r){c(t,e,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);n=!0},p(t,[n]){3&n&&(s=t[1],J(),o=K(o,n,i,1,t,s,r,e,V,Ke,null,Ve),D())},i(t){if(!n){for(let t=0;t<s.length;t+=1)H(o[t]);n=!0}},o(t){for(let t=0;t<o.length;t+=1)I(o[t]);n=!1},d(t){t&&a(e);for(let t=0;t<o.length;t+=1)o[t].d()}}}function Ue(t,e,n){let{columns:o}=e,{state:r}=e;return t.$$set=t=>{"columns"in t&&n(1,o=t.columns),"state"in t&&n(0,r=t.state)},[r,o,function(t){r=t,n(0,r)}]}class Ge extends Z{constructor(t){super(),Y(this,t,Ue,We,s,{columns:1,state:0})}}function Qe(t,e,n){const o=t.slice();return o[4]=e[n],o[6]=n,o}function Xe(t){let e,n,o;var r=t[4].formatter.default;function s(t){return{props:{options:t[4].format,value:t[1][t[4].id]}}}return r&&(e=new r(s(t))),{c(){e&&U(e.$$.fragment),n=p()},m(t,r){e&&G(e,t,r),c(t,n,r),o=!0},p(t,o){const i={};if(1&o&&(i.options=t[4].format),3&o&&(i.value=t[1][t[4].id]),r!==(r=t[4].formatter.default)){if(e){J();const t=e;I(t.$$.fragment,1,0,(()=>{Q(t,1)})),D()}r?(e=new r(s(t)),U(e.$$.fragment),H(e.$$.fragment,1),G(e,n.parentNode,n)):e=null}else r&&e.$set(i)},i(t){o||(e&&H(e.$$.fragment,t),o=!0)},o(t){e&&I(e.$$.fragment,t),o=!1},d(t){t&&a(n),e&&Q(e,t)}}}function Ye(t){let e,n,o;var r=t[4].formatter.default;function s(t){return{props:{options:t[4].format,value:t[1][t[4].id],converted:t[1]._converted[t[4].id],stats:t[4].formatStats}}}return r&&(e=new r(s(t))),{c(){e&&U(e.$$.fragment),n=p()},m(t,r){e&&G(e,t,r),c(t,n,r),o=!0},p(t,o){const i={};if(1&o&&(i.options=t[4].format),3&o&&(i.value=t[1][t[4].id]),3&o&&(i.converted=t[1]._converted[t[4].id]),1&o&&(i.stats=t[4].formatStats),r!==(r=t[4].formatter.default)){if(e){J();const t=e;I(t.$$.fragment,1,0,(()=>{Q(t,1)})),D()}r?(e=new r(s(t)),U(e.$$.fragment),H(e.$$.fragment,1),G(e,n.parentNode,n)):e=null}else r&&e.$set(i)},i(t){o||(e&&H(e.$$.fragment,t),o=!0)},o(t){e&&I(e.$$.fragment,t),o=!1},d(t){t&&a(n),e&&Q(e,t)}}}function Ze(t,e){let n,o,r,s,i;const f=[Ye,Xe],d=[];function p(t,e){return"_converted"in t[1]&&t[4].id in t[1]._converted?0:1}return o=p(e),r=d[o]=f[o](e),{key:t,first:null,c(){n=u("td"),r.c(),s=m(),this.first=n},m(t,e){c(t,n,e),d[o].m(n,null),l(n,s),i=!0},p(t,i){let l=o;o=p(e=t),o===l?d[o].p(e,i):(J(),I(d[l],1,1,(()=>{d[l]=null})),D(),r=d[o],r?r.p(e,i):(r=d[o]=f[o](e),r.c()),H(r,1),r.m(n,s))},i(t){i||(H(r),i=!0)},o(t){I(r),i=!1},d(t){t&&a(n),d[o].d()}}}function tn(t){let e,n,o,s,i,l=[],f=new Map,d=t[0];const m=t=>t[4].id;for(let e=0;e<d.length;e+=1){let n=Qe(t,d,e),o=m(n);f.set(o,l[e]=Ze(o,n))}return{c(){e=u("tr");for(let t=0;t<l.length;t+=1)l[t].c();w(e,"class",n=t[2]?"bg-gray-100":"")},m(n,a){c(n,e,a);for(let t=0;t<l.length;t+=1)l[t].m(e,null);o=!0,s||(i=h(e,"click",(function(){r(t[3])&&t[3].apply(this,arguments)})),s=!0)},p(r,[s]){t=r,3&s&&(d=t[0],J(),l=K(l,s,m,1,t,d,f,e,V,Ze,null,Qe),D()),(!o||4&s&&n!==(n=t[2]?"bg-gray-100":""))&&w(e,"class",n)},i(t){if(!o){for(let t=0;t<d.length;t+=1)H(l[t]);o=!0}},o(t){for(let t=0;t<l.length;t+=1)I(l[t]);o=!1},d(t){t&&a(e);for(let t=0;t<l.length;t+=1)l[t].d();s=!1,i()}}}function en(t,e,n){let{columns:o}=e,{row:r}=e,{selected:s}=e,{onSelect:i}=e;return t.$$set=t=>{"columns"in t&&n(0,o=t.columns),"row"in t&&n(1,r=t.row),"selected"in t&&n(2,s=t.selected),"onSelect"in t&&n(3,i=t.onSelect)},[o,r,s,i]}class nn extends Z{constructor(t){super(),Y(this,t,en,tn,s,{columns:0,row:1,selected:2,onSelect:3})}}const on=t=>`<svg class="${t}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg>`,rn=t=>`<svg class="${t}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg>`;function sn(t){let e,n,r,s,f,p,g,v,y,b,x,k,_,j,M,E=rn(an(!!t[0].filters))+"",q=on(an(t[0].show_json))+"";return{c(){e=u("div"),n=u("div"),r=m(),s=u("div"),f=u("input"),p=m(),g=u("button"),v=d("W"),b=m(),x=u("button"),k=m(),_=u("button"),w(n,"class","flex items-center"),w(f,"class","rounded border border-gray-300 text-sm outline-none py-1 px-1 leading-4"),w(f,"type","text"),w(f,"placeholder","Filter"),w(g,"class",y=i(un(!!t[0].wsort))+" svelte-1y842rg"),w(g,"title",t[4]),w(x,"class","focus:outline-none"),w(_,"class","focus:outline-none"),w(s,"class","flex items-center space-x-2"),w(e,"class","flex items-center justify-between my-1 mx-1")},m(o,i){c(o,e,i),l(e,n),l(e,r),l(e,s),l(s,f),$(f,t[1]),l(s,p),l(s,g),l(g,v),l(s,b),l(s,x),x.innerHTML=E,l(s,k),l(s,_),_.innerHTML=q,j||(M=[h(f,"input",t[6]),h(f,"keyup",t[2]),h(g,"click",t[3]),h(x,"click",t[7]),h(_,"click",t[8])],j=!0)},p(t,e){2&e&&f.value!==t[1]&&$(f,t[1]),1&e&&y!==(y=i(un(!!t[0].wsort))+" svelte-1y842rg")&&w(g,"class",y),1&e&&E!==(E=rn(an(!!t[0].filters))+"")&&(x.innerHTML=E),1&e&&q!==(q=on(an(t[0].show_json))+"")&&(_.innerHTML=q)},d(t){t&&a(e),j=!1,o(M)}}}function ln(t){let e,n,o,r,s,i,f,d=on(an(t[0].show_json))+"";return{c(){e=u("div"),n=u("div"),o=m(),r=u("div"),s=u("button"),w(n,"class","flex items-center"),w(s,"class","focus:outline-none"),w(r,"class","flex items-center space-x-2"),w(e,"class","flex items-center justify-between my-1 mx-1")},m(a,u){c(a,e,u),l(e,n),l(e,o),l(e,r),l(r,s),s.innerHTML=d,i||(f=h(s,"click",t[5]),i=!0)},p(t,e){1&e&&d!==(d=on(an(t[0].show_json))+"")&&(s.innerHTML=d)},d(t){t&&a(e),i=!1,f()}}}function cn(e){let n;function o(t,e){return t[0].show_json?ln:sn}let r=o(e),s=r(e);return{c(){s.c(),n=p()},m(t,e){s.m(t,e),c(t,n,e)},p(t,[e]){r===(r=o(t))&&s?s.p(t,e):(s.d(1),s=r(t),s&&(s.c(),s.m(n.parentNode,n)))},i:t,o:t,d(t){s.d(t),t&&a(n)}}}function an(t){return"h-5 w-5 p-0.5 border rounded text-gray-900 "+(t?"border-gray-300":"border-white")}function un(t){return"letter_button focus:outline-none border rounded "+(t?"border-gray-300":"border-white")}function fn(t,e,n){let{state:o}=e,r=o.filter;const s=Nt((()=>{n(0,o.filter=r,o)}),200);const i=['Weighted sorting. "Smart", weighted, ranked sorting, instead of normal sorting.',"It works similar to how humans compare products with many attributes, to find the best one.","Example: find countries with highest salaries, lowest taxes and lowest real estate prices - ordinary sorting would be useless, while weighted sorting would sort the countries in a 'smart' way, similar to how human would do.","Missing values threated as average, like if we don't have tax rate for country, we guess that it probably should be somewhat average. For non number comparable elements sort rank used as weight. ifferent range of values for different columns normalised into [-1..1] range as 'nw = (w - median(w)) / 0.9-quantile(variance(w))*1.11' and limiting min/max outliers by [-1..1].",'- Undefined values threated as average\n- Rank for same values should be the same, like ["a", "a", "b"] should be [0, 0, 1], not [0, 1, 2]\n- Different range of values for different columns normalised into [-1..1] range as\n      nw = (w - median(w)) / 0.9-quantile(variance(w))*1.11 and limiting min/max outliers by [-1..1].'].join("\n\n");return t.$$set=t=>{"state"in t&&n(0,o=t.state)},[o,r,s,function(){o.wsort?(n(0,o.wsort=void 0,o),n(0,o.sort=void 0,o)):(n(0,o.wsort={},o),n(0,o.sort=void 0,o))},i,()=>n(0,o.show_json=!o.show_json,o),function(){r=this.value,n(1,r)},()=>n(0,o.filters=o.filters?void 0:{},o),()=>n(0,o.show_json=!o.show_json,o)]}class dn extends Z{constructor(t){super(),Y(this,t,fn,cn,s,{state:0})}}function mn(t,e,n){const o=t.slice();return o[1]=e[n],o}function pn(t){let e,n=t[0],o=[];for(let e=0;e<n.length;e+=1)o[e]=vn(mn(t,n,e));return{c(){e=u("div");for(let t=0;t<o.length;t+=1)o[t].c();w(e,"class","text-sm mt-1 mx-1")},m(t,n){c(t,e,n);for(let t=0;t<o.length;t+=1)o[t].m(e,null)},p(t,r){if(1&r){let s;for(n=t[0],s=0;s<n.length;s+=1){const i=mn(t,n,s);o[s]?o[s].p(i,r):(o[s]=vn(i),o[s].c(),o[s].m(e,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(t){t&&a(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(o,t)}}}function hn(e){let n;return{c(){n=u("div"),n.textContent="unknown message type"},m(t,e){c(t,n,e)},p:t,d(t){t&&a(n)}}}function gn(t){let e,n,o,r,s=t[1].message+"";return{c(){e=u("div"),n=u("span"),n.textContent="error",o=m(),r=d(s),w(n,"class","bg-red-400 px-2 rounded")},m(t,s){c(t,e,s),l(e,n),l(e,o),l(e,r)},p(t,e){1&e&&s!==(s=t[1].message+"")&&v(r,s)},d(t){t&&a(e)}}}function wn(t){let e,n,o,r,s=t[1].message+"";return{c(){e=u("div"),n=u("span"),n.textContent="warn",o=m(),r=d(s),w(n,"class","bg-yellow-400 px-2 rounded")},m(t,s){c(t,e,s),l(e,n),l(e,o),l(e,r)},p(t,e){1&e&&s!==(s=t[1].message+"")&&v(r,s)},d(t){t&&a(e)}}}function vn(t){let e;function n(t,e){return"warn"==t[1].type?wn:"error"==t[1].type?gn:hn}let o=n(t),r=o(t);return{c(){r.c(),e=p()},m(t,n){r.m(t,n),c(t,e,n)},p(t,s){o===(o=n(t))&&r?r.p(t,s):(r.d(1),r=o(t),r&&(r.c(),r.m(e.parentNode,e)))},d(t){r.d(t),t&&a(e)}}}function $n(e){let n,o=e[0].length>0&&pn(e);return{c(){o&&o.c(),n=p()},m(t,e){o&&o.m(t,e),c(t,n,e)},p(t,[e]){t[0].length>0?o?o.p(t,e):(o=pn(t),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:t,o:t,d(t){o&&o.d(t),t&&a(n)}}}function yn(t,e,n){let{messages:o}=e;return t.$$set=t=>{"messages"in t&&n(0,o=t.messages)},[o]}class bn extends Z{constructor(t){super(),Y(this,t,yn,$n,s,{messages:0})}}function xn(t,e,n){const o=t.slice();return o[13]=e[n],o}function kn(t){let e,n,o=t[0].description+"";return{c(){e=u("div"),n=d(o)},m(t,o){c(t,e,o),l(e,n)},p(t,e){1&e&&o!==(o=t[0].description+"")&&v(n,o)},d(t){t&&a(e)}}}function _n(t,e){let n,o,r;function s(...t){return e[10](e[13],...t)}return o=new nn({props:{columns:e[4],row:e[13],selected:e[2].has(e[13]._i),onSelect:s}}),{key:t,first:null,c(){n=p(),U(o.$$.fragment),this.first=n},m(t,e){c(t,n,e),G(o,t,e),r=!0},p(t,n){e=t;const r={};8&n&&(r.row=e[13]),12&n&&(r.selected=e[2].has(e[13]._i)),8&n&&(r.onSelect=s),o.$set(r)},i(t){r||(H(o.$$.fragment,t),r=!0)},o(t){I(o.$$.fragment,t),r=!1},d(t){t&&a(n),Q(o,t)}}}function jn(t){let e,n,o;return{c(){e=u("div"),n=u("textarea"),w(n,"class","w-full h-full focus:outline-none"),n.readOnly=!0,y(n,"resize","none"),n.value=o=dt(t[0]),w(e,"class","plot-table-json rounded border border-gray-200 text-xs overflow-scroll")},m(t,o){c(t,e,o),l(e,n)},p(t,e){1&e&&o!==(o=dt(t[0]))&&(n.value=o)},d(t){t&&a(e)}}}function Mn(t){let e,n,o,r,s,i;return{c(){e=u("div"),e.textContent="Debug:",n=m(),o=u("textarea"),s=m(),i=u("textarea"),w(o,"class","block focus:outline-none rounded border border-gray-200 text-xs overflow-scroll mt-4"),o.readOnly=!0,y(o,"resize","none"),y(o,"width","20rem"),y(o,"height","20rem"),o.value=r=dt(t[1]),w(i,"class","block focus:outline-none rounded border border-gray-200 text-xs overflow-scroll mt-4"),i.readOnly=!0,y(i,"resize","none"),y(i,"width","20rem"),y(i,"height","20rem"),i.value=dt(t[4])},m(t,r){c(t,e,r),c(t,n,r),c(t,o,r),c(t,s,r),c(t,i,r)},p(t,e){2&e&&r!==(r=dt(t[1]))&&(o.value=r)},d(t){t&&a(e),t&&a(n),t&&a(o),t&&a(s),t&&a(i)}}}function En(t){let e,n,o,r,s,i,f,d,g,v,$,y,b,x,k,_,j,E,q,S=[],O=new Map,N=t[0].description&&kn(t);function C(e){t[8](e)}let T={};function P(e){t[9](e)}void 0!==t[1]&&(T.state=t[1]),s=new dn({props:T}),M.push((()=>W(s,"state",C)));let F={columns:t[4]};void 0!==t[1]&&(F.state=t[1]),g=new Ge({props:F}),M.push((()=>W(g,"state",P)));let L=t[3];const z=t=>t[13]._i;for(let e=0;e<L.length;e+=1){let n=xn(t,L,e),o=z(n);O.set(o,S[e]=_n(o,n))}let B=t[1].show_json&&jn(t);x=new bn({props:{messages:t[5]}});let R=t[0].debug&&Mn(t);return{c(){N&&N.c(),e=m(),n=u("table"),o=u("tr"),r=u("td"),U(s.$$.fragment),d=m(),U(g.$$.fragment),$=m();for(let t=0;t<S.length;t+=1)S[t].c();y=m(),B&&B.c(),b=m(),U(x.$$.fragment),k=m(),R&&R.c(),_=p(),w(r,"colspan",t[4].length),w(o,"class",f="plot-table-toolbar "+(!t[1].show_controls&&"invisible")+" "),w(n,"class","plot-table font-mono")},m(i,a){N&&N.m(i,a),c(i,e,a),c(i,n,a),l(n,o),l(o,r),G(s,r,null),l(n,d),G(g,n,null),l(n,$);for(let t=0;t<S.length;t+=1)S[t].m(n,null);l(n,y),B&&B.m(n,null),c(i,b,a),G(x,i,a),c(i,k,a),R&&R.m(i,a),c(i,_,a),j=!0,E||(q=h(n,"click",t[11]),E=!0)},p(t,[r]){t[0].description?N?N.p(t,r):(N=kn(t),N.c(),N.m(e.parentNode,e)):N&&(N.d(1),N=null);const l={};!i&&2&r&&(i=!0,l.state=t[1],A((()=>i=!1))),s.$set(l),(!j||2&r&&f!==(f="plot-table-toolbar "+(!t[1].show_controls&&"invisible")+" "))&&w(o,"class",f);const c={};!v&&2&r&&(v=!0,c.state=t[1],A((()=>v=!1))),g.$set(c),92&r&&(L=t[3],J(),S=K(S,r,z,1,t,L,O,n,V,_n,y,xn),D()),t[1].show_json?B?B.p(t,r):(B=jn(t),B.c(),B.m(n,null)):B&&(B.d(1),B=null),t[0].debug?R?R.p(t,r):(R=Mn(t),R.c(),R.m(_.parentNode,_)):R&&(R.d(1),R=null)},i(t){if(!j){H(s.$$.fragment,t),H(g.$$.fragment,t);for(let t=0;t<L.length;t+=1)H(S[t]);H(x.$$.fragment,t),j=!0}},o(t){I(s.$$.fragment,t),I(g.$$.fragment,t);for(let t=0;t<S.length;t+=1)I(S[t]);I(x.$$.fragment,t),j=!1},d(t){N&&N.d(t),t&&a(e),t&&a(n),Q(s),Q(g);for(let t=0;t<S.length;t+=1)S[t].d();B&&B.d(),t&&a(b),Q(x,t),t&&a(k),R&&R.d(t),t&&a(_),E=!1,q()}}}function qn(t,e,n){let o,r,{options:s}=e,{columns:i,rows:l,messages:c}=_e(s,!0),a={filter:s.filter||"",filters:ye(i,s.filters),sortable:0!=s.sortable,sort:s.sort,wsort:s.wsort,show_json:!1,show_controls:!!s.show_controls},u=new Set;function f(t,e){!function(t,e,n,o){const r=new Set(n);if(t.metaKey)r.has(e)?r.delete(e):r.add(e);else{const t=r.has(e)&&1==r.size;r.clear(),t||r.add(e)}o(r)}(t,e,u,(t=>n(2,u=t)))}return t.$$set=t=>{"options"in t&&n(0,s=t.options)},t.$$.update=()=>{2&t.$$.dirty&&n(7,o=Ee(i,l,a)),130&t.$$.dirty&&n(3,r=function(t,e,{sort:n,wsort:o}){return n&&n.length>0?we(t,e,n):o&&ht(o)>0?ve(t,e,o):e}(i,o,a))},[s,a,u,r,i,c,f,o,function(t){a=t,n(1,a)},function(t){a=t,n(1,a)},(t,e)=>f(e,t._i),()=>n(1,a.show_controls=!0,a)]}class Sn extends Z{constructor(t){super(),Y(this,t,qn,En,s,{options:0})}}function On(e){let n,o,r,s;return{c(){n=u("div"),o=u("span"),o.textContent="Error",r=d(" - can't load "),s=d(e[0]),w(o,"class","text-red-600 font-bold")},m(t,e){c(t,n,e),l(n,o),l(n,r),l(n,s)},p(t,e){1&e&&v(s,t[0])},i:t,o:t,d(t){t&&a(n)}}}function Nn(t){let e,n,o,r,s,i=t[2](t[0],t[3])+"";return r=new Sn({props:{options:t[3]}}),{c(){e=u("h1"),n=d(i),o=m(),U(r.$$.fragment),w(e,"class","text-2xl mb-4")},m(t,i){c(t,e,i),l(e,n),c(t,o,i),G(r,t,i),s=!0},p(t,e){(!s||3&e)&&i!==(i=t[2](t[0],t[3])+"")&&v(n,i);const o={};2&e&&(o.options=t[3]),r.$set(o)},i(t){s||(H(r.$$.fragment,t),s=!0)},o(t){I(r.$$.fragment,t),s=!1},d(t){t&&a(e),t&&a(o),Q(r,t)}}}function An(e){let n;return{c(){n=u("div"),n.textContent="Loading..."},m(t,e){c(t,n,e)},p:t,i:t,o:t,d(t){t&&a(n)}}}function Cn(t){let e,n,o,r={ctx:t,current:null,token:null,hasCatch:!0,pending:An,then:Nn,catch:On,value:3,error:4,blocks:[,,,]};return B(n=t[1],r),{c(){e=u("div"),r.block.c(),w(e,"class","mx-5 my-2")},m(t,n){c(t,e,n),r.block.m(e,r.anchor=null),r.mount=()=>e,r.anchor=null,o=!0},p(e,[o]){t=e,r.ctx=t,2&o&&n!==(n=t[1])&&B(n,r)||function(t,e,n){const o=e.slice(),{resolved:r}=t;t.current===t.then&&(o[t.value]=r),t.current===t.catch&&(o[t.error]=r),t.block.p(o,n)}(r,t,o)},i(t){o||(H(r.block),o=!0)},o(t){for(let t=0;t<3;t+=1){I(r.blocks[t])}o=!1},d(t){t&&a(e),r.block.d(),r.token=null,r=null}}}function Tn(t,e,n){let{path:o}=e,{datap:r}=e;function s(t,e){return e.title||e.id||function(t,e){if(void 0===e){if(t.length<1)throw new Error("can't get last elements from empty list");return t[t.length-1]}if(t.length<e)throw new Error(`can't get last ${e} elements from list of length ${t.length}`);return t.slice(t.length-e,t.length)}(t.split("/")).replace(/\.[^\.]+$/,"")}return t.$$set=t=>{"path"in t&&n(0,o=t.path),"datap"in t&&n(1,r=t.datap)},t.$$.update=()=>{3&t.$$.dirty&&r.then((t=>document.title=s(o,t)))},[o,r,s]}const Pn=function(){let t=window.location.pathname;return t.startsWith("/")||(t+="/"),t=t.replace(/:([^:]+)$/i,""),/\.[^\/]+$/.test(t)||(t+=".json"),t}();new class extends Z{constructor(t){super(),Y(this,t,Tn,Cn,s,{path:0,datap:1})}}({target:document.body,props:{path:Pn,datap:async function(t){let e=await fetch(function(t,e={}){const n=[];for(const t in e){const o=e[t];null!=t&&null!=o&&n.push(`${encodeURIComponent(t)}=${encodeURIComponent(""+e[t])}`)}return n.length>0?`${t}${t.includes("?")?"&":"?"}${n.join("&")}`:t}(t,{clearcache:Math.random()}));return await e.json()}(Pn)}})}();
