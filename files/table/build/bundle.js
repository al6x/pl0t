!function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function r(t){return"function"==typeof t}function s(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function i(t){return null==t?"":t}function l(t,n){t.appendChild(n)}function c(t,n,e){t.insertBefore(n,e||null)}function a(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function f(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function d(t){return document.createTextNode(t)}function m(){return d(" ")}function p(){return d("")}function h(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function g(t){return function(n){return n.preventDefault(),t.call(this,n)}}function w(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function v(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function $(t,n){t.value=null==n?"":n}function b(t,n,e,o){t.style.setProperty(n,e,o?"important":"")}function y(t,n){for(let e=0;e<t.options.length;e+=1){const o=t.options[e];if(o.__value===n)return void(o.selected=!0)}}let x;function k(t){x=t}function _(){if(!x)throw new Error("Function called outside component initialization");return x}const M=[],S=[],j=[],E=[],q=Promise.resolve();let N=!1;function O(t){j.push(t)}function A(t){E.push(t)}let C=!1;const T=new Set;function F(){if(!C){C=!0;do{for(let t=0;t<M.length;t+=1){const n=M[t];k(n),L(n.$$)}for(k(null),M.length=0;S.length;)S.pop()();for(let t=0;t<j.length;t+=1){const n=j[t];T.has(n)||(T.add(n),n())}j.length=0}while(M.length);for(;E.length;)E.pop()();N=!1,C=!1,T.clear()}}function L(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(O)}}const J=new Set;let z;function P(){z={r:0,c:[],p:z}}function H(){z.r||o(z.c),z=z.p}function D(t,n){t&&t.i&&(J.delete(t),t.i(n))}function I(t,n,e,o){if(t&&t.o){if(J.has(t))return;J.add(t),z.c.push((()=>{J.delete(t),o&&(e&&t.d(1),o())})),t.o(n)}}function B(t,n){const e=n.token={};function o(t,o,r,s){if(n.token!==e)return;n.resolved=s;let i=n.ctx;void 0!==r&&(i=i.slice(),i[r]=s);const l=t&&(n.current=t)(i);let c=!1;n.block&&(n.blocks?n.blocks.forEach(((t,e)=>{e!==o&&t&&(P(),I(t,1,1,(()=>{n.blocks[e]===t&&(n.blocks[e]=null)})),H())})):n.block.d(1),l.c(),D(l,1),l.m(n.mount(),n.anchor),c=!0),n.block=l,n.blocks&&(n.blocks[o]=l),c&&F()}if((r=t)&&"object"==typeof r&&"function"==typeof r.then){const e=_();if(t.then((t=>{k(e),o(n.then,1,n.value,t),k(null)}),(t=>{if(k(e),o(n.catch,2,n.error,t),k(null),!n.hasCatch)throw t})),n.current!==n.pending)return o(n.pending,0),!0}else{if(n.current!==n.then)return o(n.then,1,n.value,t),!0;n.resolved=t}var r}function R(t,n){t.d(1),n.delete(t.key)}function K(t,n){I(t,1,1,(()=>{n.delete(t.key)}))}function W(t,n,e,o,r,s,i,l,c,a,u,f){let d=t.length,m=s.length,p=d;const h={};for(;p--;)h[t[p].key]=p;const g=[],w=new Map,v=new Map;for(p=m;p--;){const t=f(r,s,p),l=e(t);let c=i.get(l);c?o&&c.p(t,n):(c=a(l,t),c.c()),w.set(l,g[p]=c),l in h&&v.set(l,Math.abs(p-h[l]))}const $=new Set,b=new Set;function y(t){D(t,1),t.m(l,u),i.set(t.key,t),u=t.first,m--}for(;d&&m;){const n=g[m-1],e=t[d-1],o=n.key,r=e.key;n===e?(u=n.first,d--,m--):w.has(r)?!i.has(o)||$.has(o)?y(n):b.has(r)?d--:v.get(o)>v.get(r)?(b.add(o),y(n)):($.add(r),d--):(c(e,i),d--)}for(;d--;){const n=t[d];w.has(n.key)||c(n,i)}for(;m;)y(g[m-1]);return g}function U(t,n,e){const o=t.$$.props[n];void 0!==o&&(t.$$.bound[o]=e,e(t.$$.ctx[o]))}function V(t){t&&t.c()}function G(t,e,s,i){const{fragment:l,on_mount:c,on_destroy:a,after_update:u}=t.$$;l&&l.m(e,s),i||O((()=>{const e=c.map(n).filter(r);a?a.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(O)}function Q(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function X(t,n){-1===t.$$.dirty[0]&&(M.push(t),N||(N=!0,q.then(F)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function Y(n,r,s,i,l,c,u=[-1]){const f=x;k(n);const d=n.$$={fragment:null,ctx:null,props:c,update:t,not_equal:l,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:r.context||[]),callbacks:e(),dirty:u,skip_bound:!1};let m=!1;if(d.ctx=s?s(n,r.props||{},((t,e,...o)=>{const r=o.length?o[0]:e;return d.ctx&&l(d.ctx[t],d.ctx[t]=r)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](r),m&&X(n,t)),e})):[],d.update(),m=!0,o(d.before_update),d.fragment=!!i&&i(d.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);d.fragment&&d.fragment.l(t),t.forEach(a)}else d.fragment&&d.fragment.c();r.intro&&D(n.$$.fragment),G(n,r.target,r.anchor,r.customElement),F()}k(f)}class Z{$destroy(){Q(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const tt=new Map;let nt="Deno"in window?window.Deno:void 0;function et(t){return t&&t.toJSON?t.toJSON():t}const ot=[];let rt,st=0,it=!1;function lt(){it||(it=!0,setTimeout((async()=>{for(;st<ot.length;){let{name:t,test:n}=ot[st];st+=1;try{console.log(`  test | ${t}`);let e=n();e&&await e}catch(n){if(console.error(`  test | ${t} failed`),console.error(n),null!=nt)throw n}}it=!1}),0))}window.runTests=lt;try{rt=(function(t,n){if(!tt.has(t))try{tt.set(t,Deno.env.get(t))}catch(n){tt.set(t,void 0)}const e=tt.get(t)||n;if(null==e)throw new Error(`env var '${t}' is not defined`);return e}("test")||"").toLowerCase()}catch(t){rt="false"}let ct="all"==rt||"true"==rt;function at(t,n){ot.push({name:t,test:n}),(ct||t.toLowerCase()==rt)&&lt()}const ut=function(t,n){const e=n?n instanceof Function?n():n:"Assertion error!";if(!t)throw new Error(e)};function ft(t){return null===t||"object"!=typeof t?t:Array.isArray(t)?t.map(ft):"toJSON"in t?ft(t.toJSON()):Object.assign({},...Object.entries(t).sort((([t],[n])=>t.localeCompare(n))).map((([t,n])=>({[t]:ft(n)}))))}function dt(t,n=!0){return n?JSON.stringify(ft(t),null,2):JSON.stringify(ft(t))}function mt(t,n){return null===(t=n(t))||"object"!=typeof t?t:"map"in t?t.map((t=>mt(t,n))):Object.assign({},...Object.entries(t).map((([t,e])=>({[t]:mt(e,n)}))))}function pt(t,n){const e=n.match(t);return e?1==e.length?[]:e.slice(1,e.length):[]}function ht(t){if(t instanceof Array)return t.length;if(t instanceof String||"string"==typeof t)return t.length;{let n=0;for(const e in t)t.hasOwnProperty(e)&&n++;return n}}function gt(t,n){if(t instanceof Array)for(let e=0;e<t.length;e++)n(t[e],e);else if(t instanceof Map)for(const[e,o]of t)n(o,e);else for(const e in t)t.hasOwnProperty(e)&&n(t[e],e)}function wt(t,n){const e=n instanceof Function?n:t=>t==n;if(t instanceof Array)for(let n=0;n<t.length;n++){if(e(t[n],n))return t[n];for(const n in t)if(t.hasOwnProperty(n)&&e(t[n],n))return t[n]}}function vt(t,n){if(n=n||(t=>t),0==t.length)return-1;let e=n(t[0]),o=0;for(let r=1;r<t.length;r++){let s=n(t[r]);s<e&&(e=s,o=r)}return o}function $t(t,n){if(n=n||(t=>t),0==t.length)return-1;let e=n(t[0]),o=0;for(let r=1;r<t.length;r++){let s=n(t[r]);s>e&&(e=s,o=r)}return o}function bt(t,n=!1){return yt(t,.5,n)}function yt(t,n,e=!1){const o=e?t:[...t].sort(((t,n)=>t-n)),r=(o.length-1)*n,s=Math.floor(r),i=r-s;return void 0!==o[s+1]?o[s]+i*(o[s+1]-o[s]):o[s]}function xt(t,n){const e=[];let o=0;for(;;){const r=[];o<t.length&&e.push(r);for(let s=0;s<n;s++){if(!(o+s<t.length))return e;r.push(t[o+s])}o+=n}}function kt(t,n){if(t instanceof Array){const e=new Array,o=new Array,r=n instanceof Function?n:(t,e)=>n.includes(e);return gt(t,((t,n)=>r(t,n)?e.push(t):o.push(t))),[e,o]}{const e={},o={},r=n instanceof Function?n:(t,e)=>n.includes(e);return gt(t,((t,n)=>r(t,n)?e[n]=t:o[n]=t)),[e,o]}}function _t(t,n,e=!1){if(0==t.length)return t;{const o=typeof n(t[0]);let r,s;if("number"==o)r=function(t,e){return n(t)-n(e)};else if("boolean"==o)r=function(t,e){return(n(t)?1:0)-(n(e)?1:0)};else{if("string"!=o)throw new Error(`invalid return type for 'by' '${o}'`);r=function(t,e){return n(t).localeCompare(n(e))}}return s=[...t],s.sort(r),e&&s.reverse(),s}}function Mt(t,n){if(t instanceof Array){const e=[];return gt(t,((t,o)=>{const r=n(t,o);!1!==r&&e.push(r)})),e}if(t instanceof Map){const e=new Map;return gt(t,((t,o)=>{const r=n(t,o);!1!==r&&e.set(o,r)})),e}{const e={};return gt(t,((t,o)=>{const r=n(t,o);!1!==r&&(e[o]=r)})),e}}function St(t,n){if("object"==typeof t&&"found"in t){if(t.found)return t.value;throw new Error(t.message||`value${n?" "+n:""} not found`)}if("string"==typeof t){if(""==t)throw new Error(`string value${n?" "+n:""} not found`);return t}if(void 0===t)throw new Error(`value${n?" "+n:""} not defined`);return t}function jt(t,n,e){return gt(t,((t,o)=>n=e(n,t,o))),n}function Et(t){return jt(t,0,((t,n)=>t+n))}function qt(t,n){if(t instanceof Array)return t.map(n);if(t instanceof Map){const e=new Map;return gt(t,((t,o)=>e.set(o,n(t,o)))),e}{const e={};return gt(t,((t,o)=>e[o]=n(t,o))),e}}function Nt(t,n=0){return 0==n?Math.round(t):Math.round((t+Number.EPSILON)*Math.pow(10,n))/Math.pow(10,n)}function Ot(t,n){let e;return(...o)=>{e&&clearTimeout(e),e=setTimeout((()=>t(...o)),n)}}function At(t){switch(t){case"left":return"text-left";case"center":return"text-center";case"right":return"text-right"}}function Ct(n){let e,o;return{c(){e=u("div"),o=d(n[0]),w(e,"class",n[1])},m(t,n){c(t,e,n),l(e,o)},p(t,[n]){1&n&&v(o,t[0])},i:t,o:t,d(t){t&&a(e)}}}ut.equal=(t,n,e)=>{if(!function(t,n){return dt(t)===dt(n)}(t,n)){const o=e?e instanceof Function?e():e:`Assertion error: ${dt(t,!0)} != ${dt(n,!0)}`;throw new Error(o)}},ut.fail=(t,n)=>{let e=!1;try{t()}catch(t){e=!0}if(!e){const t=n?n instanceof Function?n():n:"Assertion error: expected to fail but didn't";throw new Error(t)}},ut.approxEqual=(t,n,e,o)=>{o=o||.001;const r=(Math.abs(t)+Math.abs(n))/2*o;if(Math.abs(t-n)>r){const o=e?e instanceof Function?e():e:`Assertion error: ${dt(t,!0)} != ${dt(n,!0)}`;throw new Error(o)}},at("deepMap",(()=>{class t{constructor(t){this.v=t}toJSON(){return this.v}}const n=new t([1,2]);ut.equal(mt(n,et),[1,2]);const e=new t([n,3]);ut.equal(mt(e,et),[[1,2],3])})),Promise.prototype.toJSON=function(){return"Promise"},Object.defineProperty(Promise.prototype,"cmap",{configurable:!1,enumerable:!1}),at("parse",(()=>{ut.equal(pt(/.+ (\d+) (\d+)/,"a 22 45"),["22","45"]),ut.equal(pt(/[^;]+;/,"drop table; create table;"),[])})),at("parseNamed",(()=>{ut.equal(function(t,n){const e=n.match(t);return(null==e?void 0:e.groups)||{}}(/.+ (?<a>\d+) (?<b>\d+)/,"a 22 45"),{a:"22",b:"45"})})),at("dedent",(()=>{ut.equal(function(t){const n=pt(/^(\s+)/,t=t.replace(/^\n*/,""));return 0==n.length?t:t.replace(new RegExp("^\\s{"+n[0].length+"}","gm"),"")}("\n  a\n  b\n    c"),"a\nb\n  c")})),at("groupByN",(()=>{ut.equal(xt([1,2,3],2),[[1,2],[3]]),ut.equal(xt([1,2],2),[[1,2]]),ut.equal(xt([1],2),[[1]]),ut.equal(xt([],2),[])})),at("sortBy",(()=>{ut.equal(_t([{v:!0},{v:!1}],(({v:t})=>t)),[{v:!1},{v:!0}]),ut.equal(_t([{v:"b"},{v:""},{v:"c"}],(({v:t})=>t)),[{v:""},{v:"b"},{v:"c"}])})),at("pick",(()=>{var t;ut.equal((t=["a"],kt({a:1,b:2},((n,e)=>t.includes(e)))[0]),{a:1})})),at("round",(()=>{ut.equal(Nt(.05860103881518906,2),.06)})),Error.prototype.toJSON=function(){return{message:this.message,stack:this.stack}},Map.prototype.toJSON=function(){return jt(this,{},((t,n,e)=>(t[e]=n,t)))};function Tt(t,n,e){let o,{options:r}=n,{value:s}=n;const i=At(r.align||"left")+(r.small?" text-xs":"");return t.$$set=t=>{"options"in t&&e(2,r=t.options),"value"in t&&e(3,s=t.value)},t.$$.update=()=>{8&t.$$.dirty&&e(0,o=null==s?"":s)},[o,i,r,s]}var Ft=Object.freeze({__proto__:null,default:class extends Z{constructor(t){super(),Y(this,t,Tt,Ct,s,{options:2,value:3})}},compatibleTypes:["number","boolean","string"],align:function(t,n){return t.align||"left"}});function Lt(n){let e,o,r=(n[0]?n[2]:n[3])+"";return{c(){e=u("div"),o=d(r),w(e,"class",n[1])},m(t,n){c(t,e,n),l(e,o)},p(t,[n]){1&n&&r!==(r=(t[0]?t[2]:t[3])+"")&&v(o,r)},i:t,o:t,d(t){t&&a(e)}}}function Jt(t,n,e){let{options:o}=n,{value:r}=n;const s=At(o.align||"center"),i=o.true||"✓",l=o.false||"";return t.$$set=t=>{"options"in t&&e(4,o=t.options),"value"in t&&e(0,r=t.value)},[r,s,i,l,o]}var zt=Object.freeze({__proto__:null,default:class extends Z{constructor(t){super(),Y(this,t,Jt,Lt,s,{options:4,value:0})}},compatibleTypes:["boolean"],align:function(t,n){return t.align||"center"}});function Pt(n){let e,o;return{c(){e=u("div"),o=d(n[0]),w(e,"class",n[1])},m(t,n){c(t,e,n),l(e,o)},p(t,[n]){1&n&&v(o,t[0])},i:t,o:t,d(t){t&&a(e)}}}function Ht(t,n,e){let o,{options:r}=n,{value:s}=n;const i="round"in r?r.round:2,l=At(r.align||"right")+(r.small?" text-xs":"");return t.$$set=t=>{"options"in t&&e(2,r=t.options),"value"in t&&e(3,s=t.value)},t.$$.update=()=>{8&t.$$.dirty&&e(0,o=void 0===s?"":""+(void 0!==i?s.toFixed(i):s))},[o,l,r,s]}var Dt=Object.freeze({__proto__:null,default:class extends Z{constructor(t){super(),Y(this,t,Ht,Pt,s,{options:2,value:3})}},compatibleTypes:["number"],align:function(t,n){return t.align||"right"}});function It(t,n,e){const o=t.slice();return o[7]=n[e],o}function Bt(t,n,e){const o=t.slice();return o[7]=n[e],o}function Rt(t,n,e){const o=t.slice();return o[7]=n[e],o}function Kt(t){let n,e,o;return{c(){n=f("svg"),e=f("title"),o=d(t[4]),w(n,"class","plot-line-format text-center")},m(t,r){c(t,n,r),l(n,e),l(e,o)},p(t,n){16&n&&v(o,t[4])},d(t){t&&a(n)}}}function Wt(t){let n;function e(t,n){return t[3]<=0?Gt:t[2]>=0?Vt:Ut}let o=e(t),r=o(t);return{c(){r.c(),n=p()},m(t,e){r.m(t,e),c(t,n,e)},p(t,s){o===(o=e(t))&&r?r.p(t,s):(r.d(1),r=o(t),r&&(r.c(),r.m(n.parentNode,n)))},d(t){r.d(t),t&&a(n)}}}function Ut(t){let n,e,o,r,s=[],i=new Map,u=t[1].nticks;const m=t=>t[7];for(let n=0;n<u.length;n+=1){let e=It(t,u,n),o=m(e);i.set(o,s[n]=Yt(o,e))}function p(t,n){return t[0]>0?tn:Zt}let h=p(t),g=h(t);return{c(){n=f("svg"),e=f("title"),o=d(t[4]);for(let t=0;t<s.length;t+=1)s[t].c();r=f("line"),g.c(),w(r,"x1","50%"),w(r,"y1","5%"),w(r,"x2","50%"),w(r,"y2","95%"),w(r,"stroke",ln),w(r,"stroke-width","1"),w(n,"class","plot-line-format text-center")},m(t,i){c(t,n,i),l(n,e),l(e,o);for(let t=0;t<s.length;t+=1)s[t].m(n,null);l(n,r),g.m(n,null)},p(t,e){16&e&&v(o,t[4]),2&e&&(u=t[1].nticks,s=W(s,e,m,1,t,u,i,n,R,Yt,r,It)),h===(h=p(t))&&g?g.p(t,e):(g.d(1),g=h(t),g&&(g.c(),g.m(n,null)))},d(t){t&&a(n);for(let t=0;t<s.length;t+=1)s[t].d();g.d()}}}function Vt(t){let n,e,o,r,s,i=[],u=new Map,m=t[1].nticks;const p=t=>t[7];for(let n=0;n<m.length;n+=1){let e=Bt(t,m,n),o=p(e);u.set(o,i[n]=nn(o,e))}return{c(){n=f("svg"),e=f("title"),o=d(t[4]);for(let t=0;t<i.length;t+=1)i[t].c();r=f("rect"),w(r,"x","0%"),w(r,"y","25%"),w(r,"width",s=100*t[0]+"%"),w(r,"height","50%"),w(r,"fill",sn),w(n,"class","plot-line-format text-center")},m(t,s){c(t,n,s),l(n,e),l(e,o);for(let t=0;t<i.length;t+=1)i[t].m(n,null);l(n,r)},p(t,e){16&e&&v(o,t[4]),2&e&&(m=t[1].nticks,i=W(i,e,p,1,t,m,u,n,R,nn,r,Bt)),1&e&&s!==(s=100*t[0]+"%")&&w(r,"width",s)},d(t){t&&a(n);for(let t=0;t<i.length;t+=1)i[t].d()}}}function Gt(t){let n,e,o,r,s,i,u=[],m=new Map,p=t[1].nticks;const h=t=>t[7];for(let n=0;n<p.length;n+=1){let e=Rt(t,p,n),o=h(e);m.set(o,u[n]=en(o,e))}return{c(){n=f("svg"),e=f("title"),o=d(t[4]);for(let t=0;t<u.length;t+=1)u[t].c();r=f("rect"),w(r,"x",s=100- -100*t[0]+"%"),w(r,"y","25%"),w(r,"width",i=-100*t[0]+"%"),w(r,"height","50%"),w(r,"fill",sn),w(n,"class","plot-line-format text-center")},m(t,s){c(t,n,s),l(n,e),l(e,o);for(let t=0;t<u.length;t+=1)u[t].m(n,null);l(n,r)},p(t,e){16&e&&v(o,t[4]),2&e&&(p=t[1].nticks,u=W(u,e,h,1,t,p,m,n,R,en,r,Rt)),1&e&&s!==(s=100- -100*t[0]+"%")&&w(r,"x",s),1&e&&i!==(i=-100*t[0]+"%")&&w(r,"width",i)},d(t){t&&a(n);for(let t=0;t<u.length;t+=1)u[t].d()}}}function Qt(t){let n,e,o;return{c(){n=f("line"),w(n,"x1",e=50- -50*t[7]+"%"),w(n,"y1","5%"),w(n,"x2",o=50- -50*t[7]+"%"),w(n,"y2","25%"),w(n,"stroke",ln),w(n,"stroke-width","1")},m(t,e){c(t,n,e)},p(t,r){2&r&&e!==(e=50- -50*t[7]+"%")&&w(n,"x1",e),2&r&&o!==(o=50- -50*t[7]+"%")&&w(n,"x2",o)},d(t){t&&a(n)}}}function Xt(t){let n,e,o;return{c(){n=f("line"),w(n,"x1",e=50+50*t[7]+"%"),w(n,"y1","5%"),w(n,"x2",o=50+50*t[7]+"%"),w(n,"y2","25%"),w(n,"stroke",ln),w(n,"stroke-width","1")},m(t,e){c(t,n,e)},p(t,r){2&r&&e!==(e=50+50*t[7]+"%")&&w(n,"x1",e),2&r&&o!==(o=50+50*t[7]+"%")&&w(n,"x2",o)},d(t){t&&a(n)}}}function Yt(t,n){let e,o;function r(t,n){return t[7]>0?Xt:Qt}let s=r(n),i=s(n);return{key:t,first:null,c(){e=p(),i.c(),o=p(),this.first=e},m(t,n){c(t,e,n),i.m(t,n),c(t,o,n)},p(t,e){s===(s=r(n=t))&&i?i.p(n,e):(i.d(1),i=s(n),i&&(i.c(),i.m(o.parentNode,o)))},d(t){t&&a(e),i.d(t),t&&a(o)}}}function Zt(t){let n,e,o;return{c(){n=f("rect"),w(n,"x",e=50- -50*t[0]+"%"),w(n,"y","25%"),w(n,"width",o=-50*t[0]+"%"),w(n,"height","50%"),w(n,"fill",sn)},m(t,e){c(t,n,e)},p(t,r){1&r&&e!==(e=50- -50*t[0]+"%")&&w(n,"x",e),1&r&&o!==(o=-50*t[0]+"%")&&w(n,"width",o)},d(t){t&&a(n)}}}function tn(t){let n,e;return{c(){n=f("rect"),w(n,"x","50%"),w(n,"y","25%"),w(n,"width",e=50*t[0]+"%"),w(n,"height","50%"),w(n,"fill",sn)},m(t,e){c(t,n,e)},p(t,o){1&o&&e!==(e=50*t[0]+"%")&&w(n,"width",e)},d(t){t&&a(n)}}}function nn(t,n){let e,o,r;return{key:t,first:null,c(){e=f("line"),w(e,"x1",o=100*n[7]+"%"),w(e,"y1","5%"),w(e,"x2",r=100*n[7]+"%"),w(e,"y2","25%"),w(e,"stroke",ln),w(e,"stroke-width","1"),this.first=e},m(t,n){c(t,e,n)},p(t,s){n=t,2&s&&o!==(o=100*n[7]+"%")&&w(e,"x1",o),2&s&&r!==(r=100*n[7]+"%")&&w(e,"x2",r)},d(t){t&&a(e)}}}function en(t,n){let e,o,r;return{key:t,first:null,c(){e=f("line"),w(e,"x1",o=100- -100*n[7]+"%"),w(e,"y1","5%"),w(e,"x2",r=100- -100*n[7]+"%"),w(e,"y2","25%"),w(e,"stroke",ln),w(e,"stroke-width","1"),this.first=e},m(t,n){c(t,e,n)},p(t,s){n=t,2&s&&o!==(o=100- -100*n[7]+"%")&&w(e,"x1",o),2&s&&r!==(r=100- -100*n[7]+"%")&&w(e,"x2",r)},d(t){t&&a(e)}}}function on(n){let e;function o(t,n){return t[1]&&null!=t[0]?Wt:Kt}let r=o(n),s=r(n);return{c(){s.c(),e=p()},m(t,n){s.m(t,n),c(t,e,n)},p(t,[n]){r===(r=o(t))&&s?s.p(t,n):(s.d(1),s=r(t),s&&(s.c(),s.m(e.parentNode,e)))},i:t,o:t,d(t){s.d(t),t&&a(e)}}}const rn=(t,n,e)=>{const o=new Set,r=e.scale||"linear";e.log_unit&&("log"!=e.scale&&o.add(`column ${t} 'line.log_unit' could be used with log scale only`),n=n.map((t=>void 0!==t&&t>=0&&t<1?1:t)));const s=Mt(n,(t=>void 0!==t&&t));if(0==s.length)return{column:n,warnings:[],stats:void 0};let i;{let n=s[0],r=s[0];for(const t of[...s,...e.ticks||[]])t>r&&(r=t),t<n&&(n=t);e.domain?(i=e.domain,n<i[0]&&(o.add(`column ${t} 'line.domain' min value is greather than actual min ${n}`),i=[n,r]),r>i[1]&&(o.add(`column ${t} 'line.domain' max value is smaller than actual max ${r}`),i=[n,r])):i=[n,r]}let l,c,a=[];if("log"==r){if(i[0]<=0)return o.add(`column ${t}, 'line.domain' can't be negative for log scale`),{column:n.map((t=>{})),warnings:Array.from(o).sort(),stats:void 0};let r=Math.max(...i.map((t=>Math.log(Math.abs(t)))));a=n.map((n=>void 0===n?void 0:n>0?Math.log(n)/r:void o.add(`column ${t}, values can't be negative for log scale`))),l=Mt(e.ticks||[],(n=>n>0?Math.log(n)/r:(o.add(`column ${t}, ticks can't be negative for log scale`),!1))),c=[Math.log(i[0])/r,Math.log(i[1])/r]}else{if("linear"!=r)throw new Error(`unknown scale ${r}`);{let t=Math.max(...i.map((t=>Math.abs(t))));0==t&&(t=1),a=n.map((n=>void 0===n?void 0:n/t)),l=(e.ticks||[]).map((n=>n/t)),c=i}}return{column:a,warnings:Array.from(o).sort(),stats:{nticks:l,ndomain:c}}},sn="#111827",ln="#111827";function cn(t,n,e){let o,r,s,{options:i}=n,{value:l}=n,{converted:c}=n,{stats:a}=n;return t.$$set=t=>{"options"in t&&e(5,i=t.options),"value"in t&&e(6,l=t.value),"converted"in t&&e(0,c=t.converted),"stats"in t&&e(1,a=t.stats)},t.$$.update=()=>{2&t.$$.dirty&&e(2,[o,r]=a?a.ndomain:[0,0],o,(e(3,r),e(1,a))),99&t.$$.dirty&&e(4,s=void 0!==c?`value: ${l}`+(((null==a?void 0:a.nticks)||[]).length>0?`, ticks: ${(i.ticks||[]).join(", ")}`:"")+`, scale: ${i.scale||"linear"}`:"missing")},[c,a,o,r,s,i,l]}var an=Object.freeze({__proto__:null,default:class extends Z{constructor(t){super(),Y(this,t,cn,on,s,{options:5,value:6,converted:0,stats:1})}},compatibleTypes:["number"],align:function(t,n){if(t.align)return t.align;if(n){const[t,e]=n.ndomain;return e<=0?"right":t>=0?"left":"center"}return"center"},convertColumn:rn});function un(n){let e,o;return{c(){e=u("div"),o=d(n[0]),w(e,"class",n[1])},m(t,n){c(t,e,n),l(e,o)},p(t,[n]){1&n&&v(o,t[0])},i:t,o:t,d(t){t&&a(e)}}}function fn(t,n,e){let o,{options:r}=n,{value:s}=n;const i=At(r.align||"left")+(r.small?" text-xs":"");return t.$$set=t=>{"options"in t&&e(2,r=t.options),"value"in t&&e(3,s=t.value)},t.$$.update=()=>{8&t.$$.dirty&&e(0,o=null==s?"":""+s)},[o,i,r,s]}const dn={string:Ft,boolean:zt,number:Dt,unknown:Object.freeze({__proto__:null,default:class extends Z{constructor(t){super(),Y(this,t,fn,un,s,{options:2,value:3})}},compatibleTypes:[],align:function(t,n){return t.align||"left"}}),line:an};function mn(t){return t in dn?{isError:!1,value:dn[t]}:{isError:!0,message:`no '${t}' format`}}const pn=["string","number","boolean","unknown"],hn=["<=","<","=","!=",">",">=","~"],gn={string:function(t,n){return t.localeCompare(n)},number:function(t,n){return t-n},boolean:function(t,n){return t==n?0:t?1:-1},unknown:function(t,n){return(""+t).localeCompare(""+n)}};function wn(t,[n,e]){const o="desc"==e,r=St(wt(t,(({id:t})=>t==n))).type;if(!(r in gn))throw new Error(`no comparator for '${r}' type, please register one`);const s=gn[r];return o?function(t,e){const o=e[n],r=t[n];return void 0===o?void 0===r?0:-1:void 0===r?1:s(o,r)}:function(t,e){const o=t[n],r=e[n];return void 0===o?void 0===r?0:-1:void 0===r?1:s(o,r)}}function vn(t,n,e){if(e.length>3)throw new Error("sort not supported for more than 3 columns");const[o,r,s]=e;if(null==o&&ut(null==r),null==r&&ut(null==s),0==n.length||null==o)return n;let i,l=wn(t,o),c=r?wn(t,r):void 0,a=s?wn(t,s):void 0;i=a?function(t,n){let e=l(t,n);return 0!=e?e:(e=c(t,n),0!=e?e:a(t,n))}:c?function(t,n){let e=l(t,n);return 0!=e?e:c(t,n)}:l;const u=[...n];return u.sort(i),u}function $n(t,n,e){n=[...n];for(const t of n)t._weights={},t._nweights={};for(const o in e){const{type:e,min_max:r}=St(wt(t,(({id:t})=>t==o)));let[s,i]=kt(n,(t=>void 0!==t[o]));if(0==s.length){for(const t of n)t._weights[o]=0,t._nweights[o]=0;continue}if("number"==e){const t=typeof n[0][o];if("number"!=t)throw new Error(`wrong type for '${o}' column, wsort expects number but found '${t}'`);for(const t of s)t._weights[o]=t[o]}else{if(!(e in gn))throw new Error(`no comparator for '${e}' type, please register one`);const t=gn[e];s.sort(((n,e)=>t(n[o],e[o])));let n,r=0;for(let t=0;t<s.length;t++){const e=s[t];e[o]==n?r+=1:n=e[o],e._weights[o]=t-r}}{let t,n;if(r){if("number"!=e)throw new Error("can't use min_max for non number type");t=r[0],n=r[1]}else{const e=s.map((t=>t._weights[o]));t=Math.min(...e),n=Math.max(...e)}const i=(n+t)/2;let l=(n-t)/2;ut(l>=0),l=0==l?1:l;for(const t of s){let n=(t._weights[o]-i)/l;t._nweights[o]=n}}let l=bt(s.map((t=>t._nweights[o])));for(const t of i)t._nweights[o]=l}for(const t of n){let n=0;for(const o in e)n+=e[o]*t._nweights[o];t._w=n}return n.sort(((t,n)=>t._w-n._w)).reverse(),n}at("sortTable",(()=>{const t=[{id:"name",type:"string"},{id:"age",type:"number"}],n=[{name:"Artanis",age:200},{name:"Sarah",age:30},{name:"Jim",age:30},{name:"Amon",age:void 0}];let e=e=>vn(t,n,e).map((({name:t})=>t));ut.equal(e([["name","asc"]]),["Amon","Artanis","Jim","Sarah"]),ut.equal(e([["age","asc"]])[0],"Amon"),ut.equal(e([["age","asc"],["name","asc"]]),["Amon","Jim","Sarah","Artanis"])})),at("wsortTable",(()=>{const t=(t,n,e)=>$n(t,n,e).map((({id:t})=>t));ut.equal(t([{id:"a",type:"number"},{id:"b",type:"number"}],[{id:"a",a:0,b:3},{id:"b",a:1,b:3},{id:"c",a:2,b:void 0},{id:"d",a:-2,b:200}],{a:1,b:-1}),["d","a","b","c"]);ut.equal(t([{id:"a",type:"number"}],[{id:"a",a:0},{id:"b",a:1},{id:"c",a:void 0}],{a:1}),["a","c","b"]);{const t=$n([{id:"a",type:"string"}],[{id:"a",a:"a"},{id:"b",a:"a"},{id:"c",a:"b"}],{a:1});ut.equal(t[2].id,"c"),ut.equal(t.map((t=>t._weights.a)),[0,0,1])}}));function bn(t,n){if(!n)return;const e={};for(const o of t){const t=n[o.id];if(!t)continue;const r=xn(o,""+t[1]);void 0!==r&&(e[o.id]=[yn(t[0]),r])}return e}function yn(t){return hn.includes(t)?t:"="}function xn({type:t},n){switch(t){case"string":return n;case"boolean":try{return["true","t","1"].includes(n.toLowerCase())}catch(t){return}case"number":try{let t=parseFloat(n);return Number.isFinite(t)?t:void 0}catch(t){return}default:return n}}function kn(t,n=!1){let{columns:e,alter_columns:o,rows:r}=t;const s=t._i||!1;if(0==r.length)return{columns:[],formatStats:{},rows:[],formats:[],messages:[]};function i(t){return Array.from(t).sort().map((t=>({type:"warn",message:t})))}const l=new Set;if(n)if(void 0===t.version)l.add("version is missing, please specify version as 0.1");else if(.1!=t.version)return l.add(`options.version ${t.version} is wrong, the current table has 0.1 version, update options.version or use table of different version`),{columns:[],formatStats:{},rows:[],formats:[],messages:i(l)};const c=[];for(let t=0;t<r.length;t++){const n=r[t];if(Array.isArray(n)){const o={_i:t};if(e)for(let t=0;t<e.length&&t<n.length;t++)o[e[t].id]=n[t];else for(let t=0;t<_n.length&&t<n.length;t++)o[_n[t]]=n[t];c.push(o)}else c.push(Object.assign(Object.assign({},n),{_i:t}))}for(let t=0;t<c.length;t++){const n=c[t];for(const t in n)null===n[t]&&(n[t]=void 0)}if(!e){const t=new Map,n=new Set;for(let e=0;e<c.length;e++){const o=c[e];for(const e in o){if("_i"==e)continue;let r=o[e];if(void 0===r)n.add(e);else{let n=typeof r;"object"==n?(l.add(`unknown type for column '${e}' - '${n}'`),t.set(e,"unknown")):t.has(e)?t.get(e)!=n&&(l.add(`unstable types for column '${e}', ${[t.get(e),n].sort().join(", ")}`),t.set(e,"unknown")):t.set(e,n)}}}for(const e of n)t.has(e)||t.set(e,"unknown");e=_t(Array.from(t,(([t,n])=>({id:t,type:n}))),(({id:t})=>t))}if(o){const t=o.map((({id:t})=>t));e=[...o,...e.filter((({id:n})=>!t.includes(n)))]}const a=new Map;for(const t of e){const{id:n}=t;a.has(n)&&(l.add(`not unique column id '${n}'`),t.id=n+a.get(n)),a.set(n,(a.get(n)||0)+1)}e=[...e];for(let t=0;t<c.length;t++){const n=c[t];for(const t of e){const{id:e,type:o}=t;if("_i"==e)continue;let r=n[e];if(void 0===r)continue;typeof r!=o&&"unknown"!=o&&pn.includes(o)&&(l.add(`wrong type for column '${e}', specified as '${o}' but '${typeof r}' found`),t.type="unknown")}}for(const{id:t,min_max:n,type:o}of e){if(!n)continue;if("number"!=o){l.add(`wrong min_max on column '${t}' it can't be specified for non integer type '${o}'`);continue}const[e,r]=n;e>r&&l.add(`wrong min_max on column '${t}' min should not be greather than max`);for(const n of c){const o=n[t];null!=o&&(o<e&&l.add(`wrong min_max on column '${t}' column contains values lover than '${e}'`),o>r&&l.add(`wrong min_max on column '${t}' column contains values greater than '${e}'`))}}s&&e.unshift({id:"_i",type:"number"});const u=mn("unknown");if(u.isError)throw"can't get 'unknown' formatter";let f=[];for(const t of e){const n=t.format||{type:t.type},e=mn(n.type);e.isError?(l.add(e.message),f.push([u.value,n])):e.value.compatibleTypes.includes(t.type)?f.push([e.value,n]):(l.add(`column ${t.id} has wrong format, format ${t.format} is not compatible with '${t.type}' type`),f.push([u.value,n]))}const d={};for(let t=0;t<e.length;t++){const[{id:n},[o,r]]=[e[t],f[t]];if(o.convertColumn){const t=c.map((t=>t[n])),{column:e,warnings:s,stats:i}=o.convertColumn(n,t,r);d[n]=i,s.forEach((t=>l.add(t)));for(let t=0;t<c.length;t++){const o=c[t];o._converted||(o._converted={}),o._converted[n]=e[t]}}}for(let t=0;t<f.length;t++){const[n,o]=f[t],{id:r}=e[t];if("number"==o.type&&void 0===o.round){c.every((t=>{const n=t[r];return void 0===n||Number.isInteger(n)}))&&(f[t][1]=Object.assign(Object.assign({},o),{round:0}))}}return{columns:e,formatStats:d,rows:c,formats:f,messages:i(l)}}const _n="abcdefghijklmnopqrstuvwxyz".split("");function Mn(t,n){let e;if(t.some((({width:t})=>null!=t)))e=t.map((({width:t})=>t||1));else{const o=new Map;for(const e of n)for(const{id:n,type:r}of t){let t;if(void 0===e[n])continue;if("string"==r)t=e[n].length;else if("number"==r)t=(""+e[n]).length;else{if("boolean"!=r)continue;t=1}let s=o.get(n);null==s&&(s=[],o.set(n,s)),s.push(t)}const r=qt(o,(t=>yt(t,.7))),s=bt(jt(r,[],((t,n)=>(t.push(n),t)))),i=1.618,l=qt(r,(t=>t>s*i?i:t<s/i?1/i:1)),c=1;e=t.map((({id:t})=>l.get(t)||c))}return Sn(e)}function Sn(t){if(0==t.length)return[];const n=100/Et(t);let e=t.map((t=>Nt(t*n)));for(;;){const t=Et(e);if(t>100)e[$t(e)]-=1;else{if(!(t<100))break;e[vt(e)]+=1}}return e}function jn(t,n,e){return n=function(t,n,e){if(!e)return n;for(const{id:o,type:r}of t){const t=e[o];if(!t)continue;const[s,i]=t;if(void 0===i||""===i)continue;const l=En(r,[s,i]);n=n.filter((t=>l(t[o])))}return n}(t,n=function(t,n,e){if(!(e=function(t){return t.replace(/^[\t\s\n]+|[\t\s\n]+$/g,"")}(e)))return n;const o=e.toLowerCase();return n.filter((n=>{for(const{id:e}of t)if((""+n[e]).toLowerCase().includes(o))return!0;return!1}))}(t,n,e.filter),e.column_filters)}function En(t,[n,e]){switch(t){case"string":if("string"!=typeof e)throw new Error("string filter value expected");const t=e;switch(n){case"<=":return n=>void 0!==n&&n<=t;case"<":return n=>void 0!==n&&n<t;case"=":return n=>void 0!==n&&n==t;case"!=":return n=>void 0!==n&&n!=t;case">":return n=>void 0!==n&&n>t;case">=":return n=>void 0!==n&&n>=t;case"~":return n=>void 0!==n&&n.includes(t)}case"boolean":if("boolean"!=typeof e)throw new Error("boolean filter value expected");const o=e;switch(n){case"<=":return t=>void 0!==t&&t<=o;case"<":return t=>void 0!==t&&t<o;case"=":return t=>void 0!==t&&t==o;case"!=":return t=>void 0!==t&&t!=o;case">":return t=>void 0!==t&&t>o;case">=":return t=>void 0!==t&&t>=o;case"~":return t=>void 0!==t&&t==o}case"number":if("number"!=typeof e)throw new Error("number filter value expected");const r=e;switch(n){case"<=":return t=>void 0!==t&&t<=r;case"<":return t=>void 0!==t&&t<r;case"=":return t=>void 0!==t&&t==r;case"!=":return t=>void 0!==t&&t!=r;case">":return t=>void 0!==t&&t>r;case">=":return t=>void 0!==t&&t>=r;case"~":return t=>void 0!==t&&t==r}default:const s=""+e;switch(n){case"<=":return t=>void 0!==t&&""+t<=s;case"<":return t=>void 0!==t&&""+t<s;case"=":return t=>void 0!==t&&""+t==s;case"!=":return t=>void 0!==t&&""+t!=s;case">":return t=>void 0!==t&&""+t>s;case">=":return t=>void 0!==t&&""+t>=s;case"~":return t=>void 0!==t&&""+t==s}}throw new Error(`unknown filter ${t} ${n}`)}function qn(t){let n,e,o,r,s,i,f,d,p;return{c(){n=u("div"),e=u("span"),o=u("span"),o.textContent="w =",r=m(),s=u("input"),w(o,"class","text-gray-200 w-5 inline-block"),w(s,"class","w-10 outline-none pl-1 text-xs border border-gray-200 svelte-1brt80c"),w(s,"type","number"),w(s,"step","0.1"),s.value=i=t[2].toFixed(1),w(n,"class",f=t[1]+" my-1 text-xs "+(!t[3]&&"invisible"))},m(i,a){c(i,n,a),l(n,e),l(e,o),l(e,r),l(e,s),d||(p=h(s,"change",t[4]),d=!0)},p(t,e){4&e&&i!==(i=t[2].toFixed(1))&&(s.value=i),10&e&&f!==(f=t[1]+" my-1 text-xs "+(!t[3]&&"invisible"))&&w(n,"class",f)},d(t){t&&a(n),d=!1,p()}}}function Nn(n){let e,o=n[0].wsort&&qn(n);return{c(){o&&o.c(),e=p()},m(t,n){o&&o.m(t,n),c(t,e,n)},p(t,[n]){t[0].wsort?o?o.p(t,n):(o=qn(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},i:t,o:t,d(t){o&&o.d(t),t&&a(e)}}}function On(t,n,e){let o,r,{column_id:s}=n,{align:i}=n,{state:l}=n;const c=Ot((t=>{l.wsort&&e(0,l.wsort[s]=t,l)}),200);return t.$$set=t=>{"column_id"in t&&e(5,s=t.column_id),"align"in t&&e(1,i=t.align),"state"in t&&e(0,l=t.state)},t.$$.update=()=>{33&t.$$.dirty&&e(2,o=(l.wsort||{})[s]||0),5&t.$$.dirty&&e(3,r=l.show_controls||0!=o)},[l,i,o,r,({target:{value:t}})=>{e(2,o=parseFloat(t)),c(o)},s]}at("normalizeInputsSlow",(()=>{{const{columns:t,rows:n}=kn({rows:[["v",null]]});ut.equal(t,[{id:"a",type:"string"},{id:"b",type:"unknown"}]),ut.equal(n,[{a:"v",b:void 0,_i:0}])}{const{columns:t,rows:n}=kn({rows:[{k:"v",k2:null}]});ut.equal(t,[{id:"k",type:"string"},{id:"k2",type:"unknown"}]),ut.equal(n,[{k:"v",k2:void 0,_i:0}])}{const{columns:t,rows:n}=kn({rows:[{k:"v"},{k:0}]});ut.equal(t,[{id:"k",type:"unknown"}]),ut.equal(n,[{k:"v",_i:0},{k:0,_i:1}])}{const{formats:t}=kn({rows:[{v:1}]});ut.equal(t[0][1],{type:"number",round:0})}})),at("calculateColumnWidths",(()=>{ut.equal(Mn([{id:"name",type:"string"},{id:"age",type:"number"}],[{name:"Jim Raynor",age:30},{name:"Kate",age:25}]),[62,38])})),at("weightsToPercents",(()=>{ut.equal(Sn([2,2]),[50,50]),ut.equal(Sn([3,3,3]).sort(),[33,33,34])}));class An extends Z{constructor(t){super(),Y(this,t,On,Nn,s,{column_id:5,align:1,state:0})}}const Cn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Tn(t,n,e){const o=t.slice();return o[8]=n[e],o}function Fn(t){let n,e,r,s,i,f,d,p,g,v,$=[],b=new Map,x=hn;const k=t=>t[8];for(let n=0;n<x.length;n+=1){let e=Tn(t,x,n),o=k(e);b.set(o,$[n]=Ln(o,e))}return{c(){n=u("div"),e=u("span"),r=u("select");for(let t=0;t<$.length;t+=1)$[t].c();i=m(),f=u("input"),w(r,"class","outline-none text-gray-200 w-5 inline-block svelte-126ibbo"),w(f,"class","w-10 outline-none pl-1 text-xs border border-gray-200"),w(f,"type","text"),f.value=d=void 0===t[2][1]?"":""+t[2][1],w(n,"class",p=t[1]+" my-1 text-xs "+(!t[3]&&"invisible"))},m(o,s){c(o,n,s),l(n,e),l(e,r);for(let t=0;t<$.length;t+=1)$[t].m(r,null);y(r,t[2][0]),l(e,i),l(e,f),g||(v=[h(r,"change",t[4]),h(f,"keyup",t[5])],g=!0)},p(t,e){0&e&&(x=hn,$=W($,e,k,1,t,x,b,r,R,Ln,null,Tn)),4&e&&s!==(s=t[2][0])&&y(r,t[2][0]),4&e&&d!==(d=void 0===t[2][1]?"":""+t[2][1])&&f.value!==d&&(f.value=d),10&e&&p!==(p=t[1]+" my-1 text-xs "+(!t[3]&&"invisible"))&&w(n,"class",p)},d(t){t&&a(n);for(let t=0;t<$.length;t+=1)$[t].d();g=!1,o(v)}}}function Ln(t,n){let e,o,r=n[8]+"";return{key:t,first:null,c(){e=u("option"),o=d(r),e.__value=n[8],e.value=e.__value,this.first=e},m(t,n){c(t,e,n),l(e,o)},p(t,e){n=t},d(t){t&&a(e)}}}function Jn(n){let e,o=n[0].column_filters&&Fn(n);return{c(){o&&o.c(),e=p()},m(t,n){o&&o.m(t,n),c(t,e,n)},p(t,[n]){t[0].column_filters?o?o.p(t,n):(o=Fn(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},i:t,o:t,d(t){o&&o.d(t),t&&a(e)}}}function zn(t,n,e){let o,r,{column:s}=n,{align:i}=n,{state:l}=n;const c=Ot((t=>{l.column_filters&&e(0,l.column_filters[s.id]=t,l)}),200);return t.$$set=t=>{"column"in t&&e(6,s=t.column),"align"in t&&e(1,i=t.align),"state"in t&&e(0,l=t.state)},t.$$.update=()=>{65&t.$$.dirty&&e(2,r=l.column_filters&&s.id in l.column_filters?l.column_filters[s.id]:["=",void 0]),5&t.$$.dirty&&e(3,o=null!=r[1]&&""!=r[1]||l.show_controls)},[l,i,r,o,({target:{value:t}})=>{e(2,r[0]=yn(t),r),c(r)},({target:{value:t}})=>{e(2,r[1]=xn(s,t),r),c(r)},s]}at("escapeHtml",(()=>{var t;ut.equal(null==(t="<div>")?"":(""+t).replace(/[&<>'"]/g,(function(t){return Cn[t]})),"&lt;div&gt;")}));class Pn extends Z{constructor(t){super(),Y(this,t,zn,Jn,s,{column:6,align:1,state:0})}}function Hn(t){let n,e,o,r,s,i,f,p,$,y,x,k,_,M,j,E,q,N=t[4].symbol+"";function O(n){t[14](n)}let C={column_id:t[5],align:"text-right"};function T(n){t[15](n)}void 0!==t[0]&&(C.state=t[0]),y=new An({props:C}),S.push((()=>U(y,"state",O)));let F={column:t[1],align:"text-right"};return void 0!==t[0]&&(F.state=t[0]),_=new Pn({props:F}),S.push((()=>U(_,"state",T))),{c(){n=u("th"),e=u("a"),o=u("span"),r=d(N),i=m(),f=u("span"),p=d(t[3]),$=m(),V(y.$$.fragment),k=m(),V(_.$$.fragment),w(o,"class",s=t[4].klass+" mr-0.5"),w(e,"class","flex justify-between"),w(e,"href","#"),b(n,"width",t[2]+"%"),w(n,"class","text-right")},m(s,a){c(s,n,a),l(n,e),l(e,o),l(o,r),l(e,i),l(e,f),l(f,p),l(n,$),G(y,n,null),l(n,k),G(_,n,null),j=!0,E||(q=h(e,"click",g(t[7])),E=!0)},p(t,e){(!j||16&e)&&N!==(N=t[4].symbol+"")&&v(r,N),(!j||16&e&&s!==(s=t[4].klass+" mr-0.5"))&&w(o,"class",s),(!j||8&e)&&v(p,t[3]);const i={};!x&&1&e&&(x=!0,i.state=t[0],A((()=>x=!1))),y.$set(i);const l={};2&e&&(l.column=t[1]),!M&&1&e&&(M=!0,l.state=t[0],A((()=>M=!1))),_.$set(l),(!j||4&e)&&b(n,"width",t[2]+"%")},i(t){j||(D(y.$$.fragment,t),D(_.$$.fragment,t),j=!0)},o(t){I(y.$$.fragment,t),I(_.$$.fragment,t),j=!1},d(t){t&&a(n),Q(y),Q(_),E=!1,q()}}}function Dn(t){let n,e,o,r,s,i,f,p,$,y,x,k,_,M,j,E,q,N,O,C,T,F=t[4].symbol+"",L=t[4].symbol+"";function J(n){t[12](n)}let z={column_id:t[5],align:"text-center"};function P(n){t[13](n)}void 0!==t[0]&&(z.state=t[0]),M=new An({props:z}),S.push((()=>U(M,"state",J)));let H={column:t[1],align:"text-center"};return void 0!==t[0]&&(H.state=t[0]),q=new Pn({props:H}),S.push((()=>U(q,"state",P))),{c(){n=u("th"),e=u("a"),o=u("span"),r=d(F),s=m(),i=u("span"),f=d(t[3]),p=m(),$=u("span"),y=d(L),_=m(),V(M.$$.fragment),E=m(),V(q.$$.fragment),w(o,"class","invisible mr-0.5"),w($,"class",x=t[4].klass+" ml-0.5"),w($,"title",k=t[4].title),w(e,"class","flex justify-between"),w(e,"href","#"),b(n,"width",t[2]+"%")},m(a,u){c(a,n,u),l(n,e),l(e,o),l(o,r),l(e,s),l(e,i),l(i,f),l(e,p),l(e,$),l($,y),l(n,_),G(M,n,null),l(n,E),G(q,n,null),O=!0,C||(T=h(e,"click",g(t[7])),C=!0)},p(t,e){(!O||16&e)&&F!==(F=t[4].symbol+"")&&v(r,F),(!O||8&e)&&v(f,t[3]),(!O||16&e)&&L!==(L=t[4].symbol+"")&&v(y,L),(!O||16&e&&x!==(x=t[4].klass+" ml-0.5"))&&w($,"class",x),(!O||16&e&&k!==(k=t[4].title))&&w($,"title",k);const o={};!j&&1&e&&(j=!0,o.state=t[0],A((()=>j=!1))),M.$set(o);const s={};2&e&&(s.column=t[1]),!N&&1&e&&(N=!0,s.state=t[0],A((()=>N=!1))),q.$set(s),(!O||4&e)&&b(n,"width",t[2]+"%")},i(t){O||(D(M.$$.fragment,t),D(q.$$.fragment,t),O=!0)},o(t){I(M.$$.fragment,t),I(q.$$.fragment,t),O=!1},d(t){t&&a(n),Q(M),Q(q),C=!1,T()}}}function In(t){let n,e,o,r,s,i,f,p,$,y,x,k,_,M,j,E,q,N,O=t[4].symbol+"";function C(n){t[10](n)}let T={column_id:t[5],align:"text-left"};function F(n){t[11](n)}void 0!==t[0]&&(T.state=t[0]),x=new An({props:T}),S.push((()=>U(x,"state",C)));let L={column:t[1],align:"text-left"};return void 0!==t[0]&&(L.state=t[0]),M=new Pn({props:L}),S.push((()=>U(M,"state",F))),{c(){n=u("th"),e=u("a"),o=u("span"),r=d(t[3]),s=m(),i=u("span"),f=d(O),y=m(),V(x.$$.fragment),_=m(),V(M.$$.fragment),w(i,"class",p=t[4].klass+" ml-0.5"),w(i,"title",$=t[4].title),w(e,"class","flex justify-between"),w(e,"href","#"),b(n,"width",t[2]+"%")},m(a,u){c(a,n,u),l(n,e),l(e,o),l(o,r),l(e,s),l(e,i),l(i,f),l(n,y),G(x,n,null),l(n,_),G(M,n,null),E=!0,q||(N=h(e,"click",g(t[7])),q=!0)},p(t,e){(!E||8&e)&&v(r,t[3]),(!E||16&e)&&O!==(O=t[4].symbol+"")&&v(f,O),(!E||16&e&&p!==(p=t[4].klass+" ml-0.5"))&&w(i,"class",p),(!E||16&e&&$!==($=t[4].title))&&w(i,"title",$);const o={};!k&&1&e&&(k=!0,o.state=t[0],A((()=>k=!1))),x.$set(o);const s={};2&e&&(s.column=t[1]),!j&&1&e&&(j=!0,s.state=t[0],A((()=>j=!1))),M.$set(s),(!E||4&e)&&b(n,"width",t[2]+"%")},i(t){E||(D(x.$$.fragment,t),D(M.$$.fragment,t),E=!0)},o(t){I(x.$$.fragment,t),I(M.$$.fragment,t),E=!1},d(t){t&&a(n),Q(x),Q(M),q=!1,N()}}}function Bn(t){let n,e,o,r;const s=[In,Dn,Hn],i=[];return n=function(t,n){return"left"==t[6]?0:"center"==t[6]?1:2}(t),e=i[n]=s[n](t),{c(){e.c(),o=p()},m(t,e){i[n].m(t,e),c(t,o,e),r=!0},p(t,[n]){e.p(t,n)},i(t){r||(D(e),r=!0)},o(t){I(e),r=!1},d(t){i[n].d(t),t&&a(o)}}}function Rn(t,n,e){let o,r,{column:s}=n,{format:i}=n,{formatStats:l}=n,{width:c}=n,{state:a}=n,u=s.id;const f=i[0].align(i[1],l);function d(t,n){const e={symbol:"↓",klass:"invisible",title:""};if(n.wsort){const o=n.wsort[t.id],r="wsort: "+function(t){return t instanceof Map?Array.from(t):Object.entries(t)}(n.wsort).map((([t,n])=>`${t}: ${n}`)).join(", ");return void 0===o?e:o>=0?{symbol:"↑",klass:"text-gray-400",title:r}:{symbol:"↓",klass:"text-gray-400",title:r}}if(n.sort){let t;for(let e=0;e<n.sort.length;e++){const[o,r]=n.sort[e];o==u&&(t=[r,e])}if(!t)return e;const o="sort: "+n.sort.map((([t,n])=>`${t}: ${n}`)).join(", "),[r,s]=t,i="asc"==r?"↓":"↑";let l;if(0==s)l="";else if(1==s)l="text-gray-400";else{if(2!=s)throw new Error("color for more than 3 sort oders isn't supported");l="text-gray-300"}return{symbol:i,klass:l,title:o}}return e}return t.$$set=t=>{"column"in t&&e(1,s=t.column),"format"in t&&e(8,i=t.format),"formatStats"in t&&e(9,l=t.formatStats),"width"in t&&e(2,c=t.width),"state"in t&&e(0,a=t.state)},t.$$.update=()=>{2&t.$$.dirty&&e(3,o=s.title||s.id),3&t.$$.dirty&&e(4,r=d(s,a))},[a,s,c,o,r,u,f,function(t){if(a.sortable)if(a.wsort){let n=a.wsort;t.metaKey?s.id in n?n[s.id]=-1*n[s.id]:n[s.id]=1:ht(n)>1?n={[u]:1}:s.id in n?n[s.id]=-1*n[s.id]:n={[u]:1},e(0,a.wsort=n,a)}else{let n=a.sort||[];const o=function(t,n){const e=n instanceof Function?n:t=>t==n;for(let n=0;n<t.length;n++)if(e(t[n],n))return n;return-1}(n,(([t,n])=>t==s.id));t.metaKey?o>=0?n[o][1]="asc"==n[o][1]?"desc":"asc":n.push([u,"asc"]):n.length>1?n=[[u,"asc"]]:o>=0?(ut(1==n.length),n[o][1]="asc"==n[o][1]?"desc":"asc"):n=[[u,"asc"]],e(0,a.sort=n,a)}},i,l,function(t){a=t,e(0,a)},function(t){a=t,e(0,a)},function(t){a=t,e(0,a)},function(t){a=t,e(0,a)},function(t){a=t,e(0,a)},function(t){a=t,e(0,a)}]}class Kn extends Z{constructor(t){super(),Y(this,t,Rn,Bn,s,{column:1,format:8,formatStats:9,width:2,state:0})}}function Wn(t,n,e){const o=t.slice();return o[6]=n[e],o[8]=e,o}function Un(t){let n,e,o;function r(n){t[5](n)}let s={column:t[6],format:t[2][t[8]],formatStats:t[3][t[6].id],width:t[4][t[8]]};return void 0!==t[0]&&(s.state=t[0]),n=new Kn({props:s}),S.push((()=>U(n,"state",r))),{c(){V(n.$$.fragment)},m(t,e){G(n,t,e),o=!0},p(t,o){const r={};2&o&&(r.column=t[6]),6&o&&(r.format=t[2][t[8]]),10&o&&(r.formatStats=t[3][t[6].id]),18&o&&(r.width=t[4][t[8]]),!e&&1&o&&(e=!0,r.state=t[0],A((()=>e=!1))),n.$set(r)},i(t){o||(D(n.$$.fragment,t),o=!0)},o(t){I(n.$$.fragment,t),o=!1},d(t){Q(n,t)}}}function Vn(n){let e;return{c(){e=u("th"),b(e,"width",n[4][n[8]]+"%")},m(t,n){c(t,e,n)},p(t,n){18&n&&b(e,"width",t[4][t[8]]+"%")},i:t,o:t,d(t){t&&a(e)}}}function Gn(t,n){let e,o,r,s,i;const l=[Vn,Un],u=[];function f(t,n){return"_i"==t[6].id?0:1}return o=f(n),r=u[o]=l[o](n),{key:t,first:null,c(){e=p(),r.c(),s=p(),this.first=e},m(t,n){c(t,e,n),u[o].m(t,n),c(t,s,n),i=!0},p(t,e){let i=o;o=f(n=t),o===i?u[o].p(n,e):(P(),I(u[i],1,1,(()=>{u[i]=null})),H(),r=u[o],r?r.p(n,e):(r=u[o]=l[o](n),r.c()),D(r,1),r.m(s.parentNode,s))},i(t){i||(D(r),i=!0)},o(t){I(r),i=!1},d(t){t&&a(e),u[o].d(t),t&&a(s)}}}function Qn(t){let n,e,o=[],r=new Map,s=t[1];const i=t=>t[6].id;for(let n=0;n<s.length;n+=1){let e=Wn(t,s,n),l=i(e);r.set(l,o[n]=Gn(l,e))}return{c(){n=u("tr");for(let t=0;t<o.length;t+=1)o[t].c()},m(t,r){c(t,n,r);for(let t=0;t<o.length;t+=1)o[t].m(n,null);e=!0},p(t,[e]){31&e&&(s=t[1],P(),o=W(o,e,i,1,t,s,r,n,K,Gn,null,Wn),H())},i(t){if(!e){for(let t=0;t<s.length;t+=1)D(o[t]);e=!0}},o(t){for(let t=0;t<o.length;t+=1)I(o[t]);e=!1},d(t){t&&a(n);for(let t=0;t<o.length;t+=1)o[t].d()}}}function Xn(t,n,e){let{columns:o}=n,{formats:r}=n,{formatStats:s}=n,{widths:i}=n,{state:l}=n;return t.$$set=t=>{"columns"in t&&e(1,o=t.columns),"formats"in t&&e(2,r=t.formats),"formatStats"in t&&e(3,s=t.formatStats),"widths"in t&&e(4,i=t.widths),"state"in t&&e(0,l=t.state)},[l,o,r,s,i,function(t){l=t,e(0,l)}]}class Yn extends Z{constructor(t){super(),Y(this,t,Xn,Qn,s,{columns:1,formats:2,formatStats:3,widths:4,state:0})}}function Zn(t,n,e){const o=t.slice();return o[6]=n[e],o[8]=e,o}function te(t){let n,e,o,r,s;const i=[oe,ee],f=[];function d(t,n){return"_converted"in t[3]&&t[6].id in t[3]._converted?0:1}return e=d(t),o=f[e]=i[e](t),{c(){n=u("td"),o.c(),r=m()},m(t,o){c(t,n,o),f[e].m(n,null),l(n,r),s=!0},p(t,s){let l=e;e=d(t),e===l?f[e].p(t,s):(P(),I(f[l],1,1,(()=>{f[l]=null})),H(),o=f[e],o?o.p(t,s):(o=f[e]=i[e](t),o.c()),D(o,1),o.m(n,r))},i(t){s||(D(o),s=!0)},o(t){I(o),s=!1},d(t){t&&a(n),f[e].d()}}}function ne(n){let e,o,r=n[3]._i+1+"";return{c(){e=u("td"),o=d(r),w(e,"class","text-right")},m(t,n){c(t,e,n),l(e,o)},p(t,n){8&n&&r!==(r=t[3]._i+1+"")&&v(o,r)},i:t,o:t,d(t){t&&a(e)}}}function ee(t){let n,e,o;var r=t[1][t[8]][0].default;function s(t){return{props:{options:t[1][t[8]][1],value:t[3][t[6].id]}}}return r&&(n=new r(s(t))),{c(){n&&V(n.$$.fragment),e=p()},m(t,r){n&&G(n,t,r),c(t,e,r),o=!0},p(t,o){const i={};if(3&o&&(i.options=t[1][t[8]][1]),9&o&&(i.value=t[3][t[6].id]),r!==(r=t[1][t[8]][0].default)){if(n){P();const t=n;I(t.$$.fragment,1,0,(()=>{Q(t,1)})),H()}r?(n=new r(s(t)),V(n.$$.fragment),D(n.$$.fragment,1),G(n,e.parentNode,e)):n=null}else r&&n.$set(i)},i(t){o||(n&&D(n.$$.fragment,t),o=!0)},o(t){n&&I(n.$$.fragment,t),o=!1},d(t){t&&a(e),n&&Q(n,t)}}}function oe(t){let n,e,o;var r=t[1][t[8]][0].default;function s(t){return{props:{options:t[1][t[8]][1],value:t[3][t[6].id],converted:t[3]._converted[t[6].id],stats:t[2][t[6].id]}}}return r&&(n=new r(s(t))),{c(){n&&V(n.$$.fragment),e=p()},m(t,r){n&&G(n,t,r),c(t,e,r),o=!0},p(t,o){const i={};if(3&o&&(i.options=t[1][t[8]][1]),9&o&&(i.value=t[3][t[6].id]),9&o&&(i.converted=t[3]._converted[t[6].id]),5&o&&(i.stats=t[2][t[6].id]),r!==(r=t[1][t[8]][0].default)){if(n){P();const t=n;I(t.$$.fragment,1,0,(()=>{Q(t,1)})),H()}r?(n=new r(s(t)),V(n.$$.fragment),D(n.$$.fragment,1),G(n,e.parentNode,e)):n=null}else r&&n.$set(i)},i(t){o||(n&&D(n.$$.fragment,t),o=!0)},o(t){n&&I(n.$$.fragment,t),o=!1},d(t){t&&a(e),n&&Q(n,t)}}}function re(t,n){let e,o,r,s,i;const l=[ne,te],u=[];function f(t,n){return"_i"==t[6].id?0:1}return o=f(n),r=u[o]=l[o](n),{key:t,first:null,c(){e=p(),r.c(),s=p(),this.first=e},m(t,n){c(t,e,n),u[o].m(t,n),c(t,s,n),i=!0},p(t,e){let i=o;o=f(n=t),o===i?u[o].p(n,e):(P(),I(u[i],1,1,(()=>{u[i]=null})),H(),r=u[o],r?r.p(n,e):(r=u[o]=l[o](n),r.c()),D(r,1),r.m(s.parentNode,s))},i(t){i||(D(r),i=!0)},o(t){I(r),i=!1},d(t){t&&a(e),u[o].d(t),t&&a(s)}}}function se(t){let n,e,o,s,i,l=[],f=new Map,d=t[0];const m=t=>t[6].id;for(let n=0;n<d.length;n+=1){let e=Zn(t,d,n),o=m(e);f.set(o,l[n]=re(o,e))}return{c(){n=u("tr");for(let t=0;t<l.length;t+=1)l[t].c();w(n,"class",e=t[4]?"bg-gray-100":"")},m(e,a){c(e,n,a);for(let t=0;t<l.length;t+=1)l[t].m(n,null);o=!0,s||(i=h(n,"click",(function(){r(t[5])&&t[5].apply(this,arguments)})),s=!0)},p(r,[s]){t=r,15&s&&(d=t[0],P(),l=W(l,s,m,1,t,d,f,n,K,re,null,Zn),H()),(!o||16&s&&e!==(e=t[4]?"bg-gray-100":""))&&w(n,"class",e)},i(t){if(!o){for(let t=0;t<d.length;t+=1)D(l[t]);o=!0}},o(t){for(let t=0;t<l.length;t+=1)I(l[t]);o=!1},d(t){t&&a(n);for(let t=0;t<l.length;t+=1)l[t].d();s=!1,i()}}}function ie(t,n,e){let{columns:o}=n,{formats:r}=n,{formatStats:s}=n,{row:i}=n,{selected:l}=n,{onSelect:c}=n;return t.$$set=t=>{"columns"in t&&e(0,o=t.columns),"formats"in t&&e(1,r=t.formats),"formatStats"in t&&e(2,s=t.formatStats),"row"in t&&e(3,i=t.row),"selected"in t&&e(4,l=t.selected),"onSelect"in t&&e(5,c=t.onSelect)},[o,r,s,i,l,c]}class le extends Z{constructor(t){super(),Y(this,t,ie,se,s,{columns:0,formats:1,formatStats:2,row:3,selected:4,onSelect:5})}}const ce=t=>`<svg class="${t}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg>`,ae=t=>`<svg class="${t}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg>`;function ue(t){let n,e,r,s,f,p,g,v,b,y,x,k,_,M,S,j=ae(me(!!t[0].column_filters))+"",E=ce(me(t[0].show_json))+"";return{c(){n=u("div"),e=u("div"),r=m(),s=u("div"),f=u("input"),p=m(),g=u("button"),v=d("W"),y=m(),x=u("button"),k=m(),_=u("button"),w(e,"class","flex items-center"),w(f,"class","rounded border border-gray-300 text-sm outline-none py-1 px-1 leading-4"),w(f,"type","text"),w(f,"placeholder","Filter"),w(g,"class",b=i(pe(!!t[0].wsort))+" svelte-1y842rg"),w(g,"title",t[4]),w(x,"class","focus:outline-none"),w(_,"class","focus:outline-none"),w(s,"class","flex items-center space-x-2"),w(n,"class","flex items-center justify-between my-1 mx-1")},m(o,i){c(o,n,i),l(n,e),l(n,r),l(n,s),l(s,f),$(f,t[1]),l(s,p),l(s,g),l(g,v),l(s,y),l(s,x),x.innerHTML=j,l(s,k),l(s,_),_.innerHTML=E,M||(S=[h(f,"input",t[6]),h(f,"keyup",t[2]),h(g,"click",t[3]),h(x,"click",t[7]),h(_,"click",t[8])],M=!0)},p(t,n){2&n&&f.value!==t[1]&&$(f,t[1]),1&n&&b!==(b=i(pe(!!t[0].wsort))+" svelte-1y842rg")&&w(g,"class",b),1&n&&j!==(j=ae(me(!!t[0].column_filters))+"")&&(x.innerHTML=j),1&n&&E!==(E=ce(me(t[0].show_json))+"")&&(_.innerHTML=E)},d(t){t&&a(n),M=!1,o(S)}}}function fe(t){let n,e,o,r,s,i,f,d=ce(me(t[0].show_json))+"";return{c(){n=u("div"),e=u("div"),o=m(),r=u("div"),s=u("button"),w(e,"class","flex items-center"),w(s,"class","focus:outline-none"),w(r,"class","flex items-center space-x-2"),w(n,"class","flex items-center justify-between my-1 mx-1")},m(a,u){c(a,n,u),l(n,e),l(n,o),l(n,r),l(r,s),s.innerHTML=d,i||(f=h(s,"click",t[5]),i=!0)},p(t,n){1&n&&d!==(d=ce(me(t[0].show_json))+"")&&(s.innerHTML=d)},d(t){t&&a(n),i=!1,f()}}}function de(n){let e;function o(t,n){return t[0].show_json?fe:ue}let r=o(n),s=r(n);return{c(){s.c(),e=p()},m(t,n){s.m(t,n),c(t,e,n)},p(t,[n]){r===(r=o(t))&&s?s.p(t,n):(s.d(1),s=r(t),s&&(s.c(),s.m(e.parentNode,e)))},i:t,o:t,d(t){s.d(t),t&&a(e)}}}function me(t){return"h-5 w-5 p-0.5 border rounded text-gray-900 "+(t?"border-gray-300":"border-white")}function pe(t){return"letter_button focus:outline-none border rounded "+(t?"border-gray-300":"border-white")}function he(t,n,e){let{state:o}=n,r=o.filter;const s=Ot((()=>{e(0,o.filter=r,o)}),200);const i=['Weighted sorting. "Smart", weighted, ranked sorting, instead of normal sorting.',"It works similar to how humans compare products with many attributes, to find the best one.","Example: find countries with highest salaries, lowest taxes and lowest real estate prices - ordinary sorting would be useless, while weighted sorting would sort the countries in a 'smart' way, similar to how human would do.","Missing values threated as average, like if we don't have tax rate for country, we guess that it probably should be somewhat average. For non number comparable elements sort rank used as weight. ifferent range of values for different columns normalised into [-1..1] range as 'nw = (w - median(w)) / 0.9-quantile(variance(w))*1.11' and limiting min/max outliers by [-1..1].",'- Undefined values threated as average\n- Rank for same values should be the same, like ["a", "a", "b"] should be [0, 0, 1], not [0, 1, 2]\n- Different range of values for different columns normalised into [-1..1] range as\n      nw = (w - median(w)) / 0.9-quantile(variance(w))*1.11 and limiting min/max outliers by [-1..1].'].join("\n\n");return t.$$set=t=>{"state"in t&&e(0,o=t.state)},[o,r,s,function(){o.wsort?(e(0,o.wsort=void 0,o),e(0,o.sort=void 0,o)):(e(0,o.wsort={},o),e(0,o.sort=void 0,o))},i,()=>e(0,o.show_json=!o.show_json,o),function(){r=this.value,e(1,r)},()=>e(0,o.column_filters=o.column_filters?void 0:{},o),()=>e(0,o.show_json=!o.show_json,o)]}class ge extends Z{constructor(t){super(),Y(this,t,he,de,s,{state:0})}}function we(t,n,e){const o=t.slice();return o[1]=n[e],o}function ve(t){let n,e=t[0],o=[];for(let n=0;n<e.length;n+=1)o[n]=xe(we(t,e,n));return{c(){n=u("div");for(let t=0;t<o.length;t+=1)o[t].c();w(n,"class","text-sm mt-1 mx-1")},m(t,e){c(t,n,e);for(let t=0;t<o.length;t+=1)o[t].m(n,null)},p(t,r){if(1&r){let s;for(e=t[0],s=0;s<e.length;s+=1){const i=we(t,e,s);o[s]?o[s].p(i,r):(o[s]=xe(i),o[s].c(),o[s].m(n,null))}for(;s<o.length;s+=1)o[s].d(1);o.length=e.length}},d(t){t&&a(n),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(o,t)}}}function $e(n){let e;return{c(){e=u("div"),e.textContent="unknown message type"},m(t,n){c(t,e,n)},p:t,d(t){t&&a(e)}}}function be(t){let n,e,o,r,s=t[1].message+"";return{c(){n=u("div"),e=u("span"),e.textContent="error",o=m(),r=d(s),w(e,"class","bg-red-400 px-2 rounded")},m(t,s){c(t,n,s),l(n,e),l(n,o),l(n,r)},p(t,n){1&n&&s!==(s=t[1].message+"")&&v(r,s)},d(t){t&&a(n)}}}function ye(t){let n,e,o,r,s=t[1].message+"";return{c(){n=u("div"),e=u("span"),e.textContent="warn",o=m(),r=d(s),w(e,"class","bg-yellow-400 px-2 rounded")},m(t,s){c(t,n,s),l(n,e),l(n,o),l(n,r)},p(t,n){1&n&&s!==(s=t[1].message+"")&&v(r,s)},d(t){t&&a(n)}}}function xe(t){let n;function e(t,n){return"warn"==t[1].type?ye:"error"==t[1].type?be:$e}let o=e(t),r=o(t);return{c(){r.c(),n=p()},m(t,e){r.m(t,e),c(t,n,e)},p(t,s){o===(o=e(t))&&r?r.p(t,s):(r.d(1),r=o(t),r&&(r.c(),r.m(n.parentNode,n)))},d(t){r.d(t),t&&a(n)}}}function ke(n){let e,o=n[0].length>0&&ve(n);return{c(){o&&o.c(),e=p()},m(t,n){o&&o.m(t,n),c(t,e,n)},p(t,[n]){t[0].length>0?o?o.p(t,n):(o=ve(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},i:t,o:t,d(t){o&&o.d(t),t&&a(e)}}}function _e(t,n,e){let{messages:o}=n;return t.$$set=t=>{"messages"in t&&e(0,o=t.messages)},[o]}class Me extends Z{constructor(t){super(),Y(this,t,_e,ke,s,{messages:0})}}function Se(t,n,e){const o=t.slice();return o[16]=n[e],o}function je(t){let n,e,o=t[0].description+"";return{c(){n=u("div"),e=d(o)},m(t,o){c(t,n,o),l(n,e)},p(t,n){1&n&&o!==(o=t[0].description+"")&&v(e,o)},d(t){t&&a(n)}}}function Ee(t,n){let e,o,r;function s(...t){return n[13](n[16],...t)}return o=new le({props:{columns:n[4],formats:n[7],formatStats:n[5],row:n[16],selected:n[2].has(n[16]._i),onSelect:s}}),{key:t,first:null,c(){e=p(),V(o.$$.fragment),this.first=e},m(t,n){c(t,e,n),G(o,t,n),r=!0},p(t,e){n=t;const r={};8&e&&(r.row=n[16]),12&e&&(r.selected=n[2].has(n[16]._i)),8&e&&(r.onSelect=s),o.$set(r)},i(t){r||(D(o.$$.fragment,t),r=!0)},o(t){I(o.$$.fragment,t),r=!1},d(t){t&&a(e),Q(o,t)}}}function qe(t){let n,e,o;return{c(){n=u("div"),e=u("textarea"),w(e,"class","w-full h-full focus:outline-none"),e.readOnly=!0,b(e,"resize","none"),e.value=o=dt(t[0]),w(n,"class","plot-table-json rounded border border-gray-200 text-xs overflow-scroll")},m(t,o){c(t,n,o),l(n,e)},p(t,n){1&n&&o!==(o=dt(t[0]))&&(e.value=o)},d(t){t&&a(n)}}}function Ne(t){let n,e,o,r;return{c(){n=u("div"),n.textContent="Debug:",e=m(),o=u("textarea"),w(o,"class","block focus:outline-none rounded border border-gray-200 text-xs overflow-scroll mt-4"),o.readOnly=!0,b(o,"resize","none"),b(o,"width","20rem"),b(o,"height","20rem"),o.value=r=dt(t[1])},m(t,r){c(t,n,r),c(t,e,r),c(t,o,r)},p(t,n){2&n&&r!==(r=dt(t[1]))&&(o.value=r)},d(t){t&&a(n),t&&a(e),t&&a(o)}}}function Oe(t){let n,e,o,r,s,i,f,d,g,v,$,b,y,x,k,_,M,j,E,q=[],N=new Map,O=t[0].description&&je(t);function C(n){t[11](n)}let T={};function F(n){t[12](n)}void 0!==t[1]&&(T.state=t[1]),s=new ge({props:T}),S.push((()=>U(s,"state",C)));let L={columns:t[4],formats:t[7],formatStats:t[5],widths:t[8]};void 0!==t[1]&&(L.state=t[1]),g=new Yn({props:L}),S.push((()=>U(g,"state",F)));let J=t[3];const z=t=>t[16]._i;for(let n=0;n<J.length;n+=1){let e=Se(t,J,n),o=z(e);N.set(o,q[n]=Ee(o,e))}let B=t[1].show_json&&qe(t);x=new Me({props:{messages:t[6]}});let R=t[0].debug&&Ne(t);return{c(){O&&O.c(),n=m(),e=u("table"),o=u("tr"),r=u("td"),V(s.$$.fragment),d=m(),V(g.$$.fragment),$=m();for(let t=0;t<q.length;t+=1)q[t].c();b=m(),B&&B.c(),y=m(),V(x.$$.fragment),k=m(),R&&R.c(),_=p(),w(r,"colspan",t[4].length),w(o,"class",f="plot-table-toolbar "+(!t[1].show_controls&&"invisible")+" "),w(e,"class","plot-table font-mono")},m(i,a){O&&O.m(i,a),c(i,n,a),c(i,e,a),l(e,o),l(o,r),G(s,r,null),l(e,d),G(g,e,null),l(e,$);for(let t=0;t<q.length;t+=1)q[t].m(e,null);l(e,b),B&&B.m(e,null),c(i,y,a),G(x,i,a),c(i,k,a),R&&R.m(i,a),c(i,_,a),M=!0,j||(E=h(e,"click",t[14]),j=!0)},p(t,[r]){t[0].description?O?O.p(t,r):(O=je(t),O.c(),O.m(n.parentNode,n)):O&&(O.d(1),O=null);const l={};!i&&2&r&&(i=!0,l.state=t[1],A((()=>i=!1))),s.$set(l),(!M||2&r&&f!==(f="plot-table-toolbar "+(!t[1].show_controls&&"invisible")+" "))&&w(o,"class",f);const c={};!v&&2&r&&(v=!0,c.state=t[1],A((()=>v=!1))),g.$set(c),700&r&&(J=t[3],P(),q=W(q,r,z,1,t,J,N,e,K,Ee,b,Se),H()),t[1].show_json?B?B.p(t,r):(B=qe(t),B.c(),B.m(e,null)):B&&(B.d(1),B=null),t[0].debug?R?R.p(t,r):(R=Ne(t),R.c(),R.m(_.parentNode,_)):R&&(R.d(1),R=null)},i(t){if(!M){D(s.$$.fragment,t),D(g.$$.fragment,t);for(let t=0;t<J.length;t+=1)D(q[t]);D(x.$$.fragment,t),M=!0}},o(t){I(s.$$.fragment,t),I(g.$$.fragment,t);for(let t=0;t<q.length;t+=1)I(q[t]);I(x.$$.fragment,t),M=!1},d(t){O&&O.d(t),t&&a(n),t&&a(e),Q(s),Q(g);for(let t=0;t<q.length;t+=1)q[t].d();B&&B.d(),t&&a(y),Q(x,t),t&&a(k),R&&R.d(t),t&&a(_),j=!1,E()}}}function Ae(t,n,e){let o,r,{options:s}=n,{columns:i,formatStats:l,rows:c,messages:a,formats:u}=kn(s,!0),f=Mn(i,c),d={filter:s.filter||"",column_filters:bn(i,s.column_filters),sortable:0!=s.sortable,sort:s.sort,wsort:s.wsort,show_json:!1,show_controls:!!s.show_controls},m=new Set;function p(t,n){!function(t,n,e,o){const r=new Set(e);if(t.metaKey)r.has(n)?r.delete(n):r.add(n);else{const t=r.has(n)&&1==r.size;r.clear(),t||r.add(n)}o(r)}(t,n,m,(t=>e(2,m=t)))}return t.$$set=t=>{"options"in t&&e(0,s=t.options)},t.$$.update=()=>{2&t.$$.dirty&&e(10,o=jn(i,c,d)),1026&t.$$.dirty&&e(3,r=function(t,n,{sort:e,wsort:o}){return e&&e.length>0?vn(t,n,e):o&&ht(o)>0?$n(t,n,o):n}(i,o,d))},[s,d,m,r,i,l,a,u,f,p,o,function(t){d=t,e(1,d)},function(t){d=t,e(1,d)},(t,n)=>p(n,t._i),()=>e(1,d.show_controls=!0,d)]}class Ce extends Z{constructor(t){super(),Y(this,t,Ae,Oe,s,{options:0})}}function Te(n){let e,o,r,s;return{c(){e=u("div"),o=u("span"),o.textContent="Error",r=d(" - can't load "),s=d(n[0]),w(o,"class","text-red-600 font-bold")},m(t,n){c(t,e,n),l(e,o),l(e,r),l(e,s)},p(t,n){1&n&&v(s,t[0])},i:t,o:t,d(t){t&&a(e)}}}function Fe(t){let n,e,o,r,s,i=t[2](t[0],t[3])+"";return r=new Ce({props:{options:t[3]}}),{c(){n=u("h1"),e=d(i),o=m(),V(r.$$.fragment),w(n,"class","text-2xl mb-4")},m(t,i){c(t,n,i),l(n,e),c(t,o,i),G(r,t,i),s=!0},p(t,n){(!s||3&n)&&i!==(i=t[2](t[0],t[3])+"")&&v(e,i);const o={};2&n&&(o.options=t[3]),r.$set(o)},i(t){s||(D(r.$$.fragment,t),s=!0)},o(t){I(r.$$.fragment,t),s=!1},d(t){t&&a(n),t&&a(o),Q(r,t)}}}function Le(n){let e;return{c(){e=u("div"),e.textContent="Loading..."},m(t,n){c(t,e,n)},p:t,i:t,o:t,d(t){t&&a(e)}}}function Je(t){let n,e,o,r={ctx:t,current:null,token:null,hasCatch:!0,pending:Le,then:Fe,catch:Te,value:3,error:4,blocks:[,,,]};return B(e=t[1],r),{c(){n=u("div"),r.block.c(),w(n,"class","mx-5 my-2")},m(t,e){c(t,n,e),r.block.m(n,r.anchor=null),r.mount=()=>n,r.anchor=null,o=!0},p(n,[o]){t=n,r.ctx=t,2&o&&e!==(e=t[1])&&B(e,r)||function(t,n,e){const o=n.slice(),{resolved:r}=t;t.current===t.then&&(o[t.value]=r),t.current===t.catch&&(o[t.error]=r),t.block.p(o,e)}(r,t,o)},i(t){o||(D(r.block),o=!0)},o(t){for(let t=0;t<3;t+=1){I(r.blocks[t])}o=!1},d(t){t&&a(n),r.block.d(),r.token=null,r=null}}}function ze(t,n,e){let{path:o}=n,{datap:r}=n;function s(t,n){return n.title||n.id||function(t,n){if(void 0===n){if(t.length<1)throw new Error("can't get last elements from empty list");return t[t.length-1]}if(t.length<n)throw new Error(`can't get last ${n} elements from list of length ${t.length}`);return t.slice(t.length-n,t.length)}(t.split("/")).replace(/\.[^\.]+$/,"")}return t.$$set=t=>{"path"in t&&e(0,o=t.path),"datap"in t&&e(1,r=t.datap)},t.$$.update=()=>{3&t.$$.dirty&&r.then((t=>document.title=s(o,t)))},[o,r,s]}const Pe=function(){let t=window.location.pathname;return t.startsWith("/")||(t+="/"),t=t.replace(/:([^:]+)$/i,""),/\.[^\/]+$/.test(t)||(t+=".json"),t}();new class extends Z{constructor(t){super(),Y(this,t,ze,Je,s,{path:0,datap:1})}}({target:document.body,props:{path:Pe,datap:async function(t){let n=await fetch(function(t,n={}){const e=[];for(const t in n){const o=n[t];null!=t&&null!=o&&e.push(`${encodeURIComponent(t)}=${encodeURIComponent(""+n[t])}`)}return e.length>0?`${t}${t.includes("?")?"&":"?"}${e.join("&")}`:t}(t,{clearcache:Math.random()}));return await n.json()}(Pe)}})}();
