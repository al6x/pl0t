!function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function i(e){e.forEach(t)}function r(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(e){return null==e?"":e}function l(e,t){e.appendChild(t)}function s(e,t,n){e.insertBefore(t,n||null)}function c(e){e.parentNode.removeChild(e)}function u(e){return document.createElement(e)}function f(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function d(e){return document.createTextNode(e)}function p(){return d(" ")}function h(){return d("")}function g(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function m(e){return function(t){return t.preventDefault(),e.call(this,t)}}function v(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function b(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function y(e,t){e.value=null==t?"":t}function w(e,t,n,i){e.style.setProperty(t,n,i?"important":"")}function x(e,t){for(let n=0;n<e.options.length;n+=1){const i=e.options[n];if(i.__value===t)return void(i.selected=!0)}}let $;function k(e){$=e}function j(){if(!$)throw new Error("Function called outside component initialization");return $}const O=[],A=[],_=[],C=[],E=Promise.resolve();let S=!1;function q(e){_.push(e)}function M(e){C.push(e)}let I=!1;const N=new Set;function T(){if(!I){I=!0;do{for(let e=0;e<O.length;e+=1){const t=O[e];k(t),F(t.$$)}for(k(null),O.length=0;A.length;)A.pop()();for(let e=0;e<_.length;e+=1){const t=_[e];N.has(t)||(N.add(t),t())}_.length=0}while(O.length);for(;C.length;)C.pop()();S=!1,I=!1,N.clear()}}function F(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(q)}}const L=new Set;let z;function U(){z={r:0,c:[],p:z}}function P(){z.r||i(z.c),z=z.p}function D(e,t){e&&e.i&&(L.delete(e),e.i(t))}function J(e,t,n,i){if(e&&e.o){if(L.has(e))return;L.add(e),z.c.push((()=>{L.delete(e),i&&(n&&e.d(1),i())})),e.o(t)}}function R(e,t){const n=t.token={};function i(e,i,r,o){if(t.token!==n)return;t.resolved=o;let a=t.ctx;void 0!==r&&(a=a.slice(),a[r]=o);const l=e&&(t.current=e)(a);let s=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==i&&e&&(U(),J(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),P())})):t.block.d(1),l.c(),D(l,1),l.m(t.mount(),t.anchor),s=!0),t.block=l,t.blocks&&(t.blocks[i]=l),s&&T()}if((r=e)&&"object"==typeof r&&"function"==typeof r.then){const n=j();if(e.then((e=>{k(n),i(t.then,1,t.value,e),k(null)}),(e=>{if(k(n),i(t.catch,2,t.error,e),k(null),!t.hasCatch)throw e})),t.current!==t.pending)return i(t.pending,0),!0}else{if(t.current!==t.then)return i(t.then,1,t.value,e),!0;t.resolved=e}var r}function Y(e,t){e.d(1),t.delete(e.key)}function W(e,t){J(e,1,1,(()=>{t.delete(e.key)}))}function B(e,t,n,i,r,o,a,l,s,c,u,f){let d=e.length,p=o.length,h=d;const g={};for(;h--;)g[e[h].key]=h;const m=[],v=new Map,b=new Map;for(h=p;h--;){const e=f(r,o,h),l=n(e);let s=a.get(l);s?i&&s.p(e,t):(s=c(l,e),s.c()),v.set(l,m[h]=s),l in g&&b.set(l,Math.abs(h-g[l]))}const y=new Set,w=new Set;function x(e){D(e,1),e.m(l,u),a.set(e.key,e),u=e.first,p--}for(;d&&p;){const t=m[p-1],n=e[d-1],i=t.key,r=n.key;t===n?(u=t.first,d--,p--):v.has(r)?!a.has(i)||y.has(i)?x(t):w.has(r)?d--:b.get(i)>b.get(r)?(w.add(i),x(t)):(y.add(r),d--):(s(n,a),d--)}for(;d--;){const t=e[d];v.has(t.key)||s(t,a)}for(;p;)x(m[p-1]);return m}function K(e,t,n){const i=e.$$.props[t];void 0!==i&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function V(e){e&&e.c()}function G(e,n,o,a){const{fragment:l,on_mount:s,on_destroy:c,after_update:u}=e.$$;l&&l.m(n,o),a||q((()=>{const n=s.map(t).filter(r);c?c.push(...n):i(n),e.$$.on_mount=[]})),u.forEach(q)}function H(e,t){const n=e.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Z(e,t){-1===e.$$.dirty[0]&&(O.push(e),S||(S=!0,E.then(T)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Q(t,r,o,a,l,s,u=[-1]){const f=$;k(t);const d=t.$$={fragment:null,ctx:null,props:s,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:r.context||[]),callbacks:n(),dirty:u,skip_bound:!1};let p=!1;if(d.ctx=o?o(t,r.props||{},((e,n,...i)=>{const r=i.length?i[0]:n;return d.ctx&&l(d.ctx[e],d.ctx[e]=r)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](r),p&&Z(t,e)),n})):[],d.update(),p=!0,i(d.before_update),d.fragment=!!a&&a(d.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);d.fragment&&d.fragment.l(e),e.forEach(c)}else d.fragment&&d.fragment.c();r.intro&&D(t.$$.fragment),G(t,r.target,r.anchor,r.customElement),T()}k(f)}class X{$destroy(){H(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}let ee="Deno"in window?window.Deno:void 0;function te(e){return e&&e.toJSON?e.toJSON():e}const ne=[];let ie,re=0,oe=!1;function ae(){oe||(oe=!0,setTimeout((async()=>{for(;re<ne.length;){let{name:e,test:t}=ne[re];re+=1;try{console.log(`  test | ${e}`);let n=t();n&&await n}catch(t){if(console.error(`  test | ${e} failed`),console.error(t),null!=ee)throw t}}oe=!1}),0))}window.runTests=ae;try{ie=(function(e,t){var n;const i=null===(n=window)||void 0===n?void 0:n.env[e];return null!=i?i:null!=t?t:void 0}("test")||"").toLowerCase()}catch(e){ie="false"}let le="all"==ie||"true"==ie;function se(e,t){ne.push({name:e,test:t}),(le||e.toLowerCase()==ie)&&ae()}const ce=function(e,t){const n=t?t instanceof Function?t():t:"Assertion error!";if(!e)throw new Error(n)};function ue(e){return null===e||"object"!=typeof e?e:Array.isArray(e)?e.map(ue):"toJSON"in e?ue(e.toJSON()):Object.assign({},...Object.entries(e).sort((([e],[t])=>e.localeCompare(t))).map((([e,t])=>({[e]:ue(t)}))))}function fe(e,t=!0){return t?JSON.stringify(ue(e),null,2):JSON.stringify(ue(e))}function de(e,t){return null===(e=t(e))||"object"!=typeof e?e:"map"in e?e.map((e=>de(e,t))):Object.assign({},...Object.entries(e).map((([e,n])=>({[e]:de(n,t)}))))}function pe(e,t){const n=t.match(e);return n?1==n.length?[]:n.slice(1,n.length):[]}function he(e){if(e instanceof Array)return e.length;if(e instanceof String||"string"==typeof e)return e.length;{let t=0;for(const n in e)e.hasOwnProperty(n)&&t++;return t}}function ge(e,t){if(e instanceof Array)for(let n=0;n<e.length;n++)t(e[n],n);else if(e instanceof Map)for(const[n,i]of e)t(i,n);else for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function me(e,t){const n=t instanceof Function?t:e=>e==t;if(e instanceof Array)for(let t=0;t<e.length;t++){if(n(e[t],t))return e[t];for(const t in e)if(e.hasOwnProperty(t)&&n(e[t],t))return e[t]}}function ve(e,t){if(t=t||(e=>e),0==e.length)return-1;let n=t(e[0]),i=0;for(let r=1;r<e.length;r++){let o=t(e[r]);o<n&&(n=o,i=r)}return i}function be(e,t){if(t=t||(e=>e),0==e.length)return-1;let n=t(e[0]),i=0;for(let r=1;r<e.length;r++){let o=t(e[r]);o>n&&(n=o,i=r)}return i}function ye(e,t=!1){return we(e,.5,t)}function we(e,t,n=!1){const i=n?e:[...e].sort(((e,t)=>e-t)),r=(i.length-1)*t,o=Math.floor(r),a=r-o;return void 0!==i[o+1]?i[o]+a*(i[o+1]-i[o]):i[o]}function xe(e,t){const n=[];let i=0;for(;;){const r=[];i<e.length&&n.push(r);for(let o=0;o<t;o++){if(!(i+o<e.length))return n;r.push(e[i+o])}i+=t}}function $e(e,t){if(e instanceof Array){const n=new Array,i=new Array,r=t instanceof Function?t:(e,n)=>t.includes(n);return ge(e,((e,t)=>r(e,t)?n.push(e):i.push(e))),[n,i]}{const n={},i={},r=t instanceof Function?t:(e,n)=>t.includes(n);return ge(e,((e,t)=>r(e,t)?n[t]=e:i[t]=e)),[n,i]}}function ke(e,t,n=!1){if(0==e.length)return e;{const i=typeof t(e[0]);let r,o;if("number"==i)r=function(e,n){return t(e)-t(n)};else if("boolean"==i)r=function(e,n){return(t(e)?1:0)-(t(n)?1:0)};else{if("string"!=i)throw new Error(`invalid return type for 'by' '${i}'`);r=function(e,n){return t(e).localeCompare(t(n))}}return o=[...e],o.sort(r),n&&o.reverse(),o}}function je(e,t){if(e instanceof Array){const n=[];return ge(e,((e,i)=>{const r=t(e,i);!1!==r&&n.push(r)})),n}if(e instanceof Map){const n=new Map;return ge(e,((e,i)=>{const r=t(e,i);!1!==r&&n.set(i,r)})),n}{const n={};return ge(e,((e,i)=>{const r=t(e,i);!1!==r&&(n[i]=r)})),n}}function Oe(e,t){if("object"==typeof e&&"found"in e){if(e.found)return e.value;throw new Error(e.message||`value${t?" "+t:""} not found`)}if("string"==typeof e){if(""==e)throw new Error(`string value${t?" "+t:""} not found`);return e}if(void 0===e)throw new Error(`value${t?" "+t:""} not defined`);return e}function Ae(e,t,n){return ge(e,((e,i)=>t=n(t,e,i))),t}function _e(e){return Ae(e,0,((e,t)=>e+t))}function Ce(e,t){if(e instanceof Array)return e.map(t);if(e instanceof Map){const n=new Map;return ge(e,((e,i)=>n.set(i,t(e,i)))),n}{const n={};return ge(e,((e,i)=>n[i]=t(e,i))),n}}function Ee(e,t=0){return 0==t?Math.round(e):Math.round((e+Number.EPSILON)*Math.pow(10,t))/Math.pow(10,t)}function Se(e,t){let n;return(...i)=>{n&&clearTimeout(n),n=setTimeout((()=>e(...i)),t)}}function qe(e){switch(e){case"left":return"text-left";case"center":return"text-center";case"right":return"text-right"}}function Me(t){let n,i;return{c(){n=u("div"),i=d(t[0]),v(n,"class",t[1])},m(e,t){s(e,n,t),l(n,i)},p(e,[t]){1&t&&b(i,e[0])},i:e,o:e,d(e){e&&c(n)}}}ce.equal=(e,t,n)=>{if(!function(e,t){return fe(e)===fe(t)}(e,t)){const i=n?n instanceof Function?n():n:`Assertion error: ${fe(e,!0)} != ${fe(t,!0)}`;throw new Error(i)}},ce.fail=(e,t)=>{let n=!1;try{e()}catch(e){n=!0}if(!n){const e=t?t instanceof Function?t():t:"Assertion error: expected to fail but didn't";throw new Error(e)}},ce.approxEqual=(e,t,n,i)=>{i=i||.001;const r=(Math.abs(e)+Math.abs(t))/2*i;if(Math.abs(e-t)>r){const i=n?n instanceof Function?n():n:`Assertion error: ${fe(e,!0)} != ${fe(t,!0)}`;throw new Error(i)}},se("deepMap",(()=>{class e{constructor(e){this.v=e}toJSON(){return this.v}}const t=new e([1,2]);ce.equal(de(t,te),[1,2]);const n=new e([t,3]);ce.equal(de(n,te),[[1,2],3])})),Promise.prototype.toJSON=function(){return"Promise"},Object.defineProperty(Promise.prototype,"cmap",{configurable:!1,enumerable:!1}),se("parse",(()=>{ce.equal(pe(/.+ (\d+) (\d+)/,"a 22 45"),["22","45"]),ce.equal(pe(/[^;]+;/,"drop table; create table;"),[])})),se("parseNamed",(()=>{ce.equal(function(e,t){const n=t.match(e);return(null==n?void 0:n.groups)||{}}(/.+ (?<a>\d+) (?<b>\d+)/,"a 22 45"),{a:"22",b:"45"})})),se("dedent",(()=>{ce.equal(function(e){const t=pe(/^(\s+)/,e=e.replace(/^\n*/,""));return 0==t.length?e:e.replace(new RegExp("^\\s{"+t[0].length+"}","gm"),"")}("\n  a\n  b\n    c"),"a\nb\n  c")})),se("groupByN",(()=>{ce.equal(xe([1,2,3],2),[[1,2],[3]]),ce.equal(xe([1,2],2),[[1,2]]),ce.equal(xe([1],2),[[1]]),ce.equal(xe([],2),[])})),se("sortBy",(()=>{ce.equal(ke([{v:!0},{v:!1}],(({v:e})=>e)),[{v:!1},{v:!0}]),ce.equal(ke([{v:"b"},{v:""},{v:"c"}],(({v:e})=>e)),[{v:""},{v:"b"},{v:"c"}])})),se("pick",(()=>{var e;ce.equal((e=["a"],$e({a:1,b:2},((t,n)=>e.includes(n)))[0]),{a:1})})),se("round",(()=>{ce.equal(Ee(.05860103881518906,2),.06)})),Error.prototype.toJSON=function(){return{message:this.message,stack:this.stack}},Map.prototype.toJSON=function(){return Ae(this,{},((e,t,n)=>(e[n]=t,e)))};function Ie(e,t,n){let i,{options:r}=t,{value:o}=t;const a=qe(r.align||"left")+(r.small?" text-xs":"");return e.$$set=e=>{"options"in e&&n(2,r=e.options),"value"in e&&n(3,o=e.value)},e.$$.update=()=>{8&e.$$.dirty&&n(0,i=null==o?"":o)},[i,a,r,o]}var Ne=Object.freeze({__proto__:null,default:class extends X{constructor(e){super(),Q(this,e,Ie,Me,o,{options:2,value:3})}},compatibleTypes:["number","boolean","string"],align:function(e,t){return e.align||"left"}});function Te(t){let n,i,r=(t[0]?t[2]:t[3])+"";return{c(){n=u("div"),i=d(r),v(n,"class",t[1])},m(e,t){s(e,n,t),l(n,i)},p(e,[t]){1&t&&r!==(r=(e[0]?e[2]:e[3])+"")&&b(i,r)},i:e,o:e,d(e){e&&c(n)}}}function Fe(e,t,n){let{options:i}=t,{value:r}=t;const o=qe(i.align||"center"),a=i.true||"✓",l=i.false||"";return e.$$set=e=>{"options"in e&&n(4,i=e.options),"value"in e&&n(0,r=e.value)},[r,o,a,l,i]}var Le=Object.freeze({__proto__:null,default:class extends X{constructor(e){super(),Q(this,e,Fe,Te,o,{options:4,value:0})}},compatibleTypes:["boolean"],align:function(e,t){return e.align||"center"}});function ze(t){let n,i;return{c(){n=u("div"),i=d(t[0]),v(n,"class",t[1])},m(e,t){s(e,n,t),l(n,i)},p(e,[t]){1&t&&b(i,e[0])},i:e,o:e,d(e){e&&c(n)}}}function Ue(e,t,n){let i,{options:r}=t,{value:o}=t;const a="round"in r?r.round:2,l=qe(r.align||"right")+(r.small?" text-xs":"");return e.$$set=e=>{"options"in e&&n(2,r=e.options),"value"in e&&n(3,o=e.value)},e.$$.update=()=>{8&e.$$.dirty&&n(0,i=void 0===o?"":""+(void 0!==a?o.toFixed(a):o))},[i,l,r,o]}var Pe=Object.freeze({__proto__:null,default:class extends X{constructor(e){super(),Q(this,e,Ue,ze,o,{options:2,value:3})}},compatibleTypes:["number"],align:function(e,t){return e.align||"right"}});function De(e,t,n){const i=e.slice();return i[7]=t[n],i}function Je(e,t,n){const i=e.slice();return i[7]=t[n],i}function Re(e,t,n){const i=e.slice();return i[7]=t[n],i}function Ye(e){let t,n,i;return{c(){t=f("svg"),n=f("title"),i=d(e[4]),v(t,"class","plot-line-format text-center")},m(e,r){s(e,t,r),l(t,n),l(n,i)},p(e,t){16&t&&b(i,e[4])},d(e){e&&c(t)}}}function We(e){let t;function n(e,t){return e[3]<=0?Ve:e[2]>=0?Ke:Be}let i=n(e),r=i(e);return{c(){r.c(),t=h()},m(e,n){r.m(e,n),s(e,t,n)},p(e,o){i===(i=n(e))&&r?r.p(e,o):(r.d(1),r=i(e),r&&(r.c(),r.m(t.parentNode,t)))},d(e){r.d(e),e&&c(t)}}}function Be(e){let t,n,i,r,o=[],a=new Map,u=e[1].nticks;const p=e=>e[7];for(let t=0;t<u.length;t+=1){let n=De(e,u,t),i=p(n);a.set(i,o[t]=Ze(i,n))}function h(e,t){return e[0]>0?Xe:Qe}let g=h(e),m=g(e);return{c(){t=f("svg"),n=f("title"),i=d(e[4]);for(let e=0;e<o.length;e+=1)o[e].c();r=f("line"),m.c(),v(r,"x1","50%"),v(r,"y1","5%"),v(r,"x2","50%"),v(r,"y2","95%"),v(r,"stroke",ot),v(r,"stroke-width","1"),v(t,"class","plot-line-format text-center")},m(e,a){s(e,t,a),l(t,n),l(n,i);for(let e=0;e<o.length;e+=1)o[e].m(t,null);l(t,r),m.m(t,null)},p(e,n){16&n&&b(i,e[4]),2&n&&(u=e[1].nticks,o=B(o,n,p,1,e,u,a,t,Y,Ze,r,De)),g===(g=h(e))&&m?m.p(e,n):(m.d(1),m=g(e),m&&(m.c(),m.m(t,null)))},d(e){e&&c(t);for(let e=0;e<o.length;e+=1)o[e].d();m.d()}}}function Ke(e){let t,n,i,r,o,a=[],u=new Map,p=e[1].nticks;const h=e=>e[7];for(let t=0;t<p.length;t+=1){let n=Je(e,p,t),i=h(n);u.set(i,a[t]=et(i,n))}return{c(){t=f("svg"),n=f("title"),i=d(e[4]);for(let e=0;e<a.length;e+=1)a[e].c();r=f("rect"),v(r,"x","0%"),v(r,"y","25%"),v(r,"width",o=100*e[0]+"%"),v(r,"height","50%"),v(r,"fill",rt),v(t,"class","plot-line-format text-center")},m(e,o){s(e,t,o),l(t,n),l(n,i);for(let e=0;e<a.length;e+=1)a[e].m(t,null);l(t,r)},p(e,n){16&n&&b(i,e[4]),2&n&&(p=e[1].nticks,a=B(a,n,h,1,e,p,u,t,Y,et,r,Je)),1&n&&o!==(o=100*e[0]+"%")&&v(r,"width",o)},d(e){e&&c(t);for(let e=0;e<a.length;e+=1)a[e].d()}}}function Ve(e){let t,n,i,r,o,a,u=[],p=new Map,h=e[1].nticks;const g=e=>e[7];for(let t=0;t<h.length;t+=1){let n=Re(e,h,t),i=g(n);p.set(i,u[t]=tt(i,n))}return{c(){t=f("svg"),n=f("title"),i=d(e[4]);for(let e=0;e<u.length;e+=1)u[e].c();r=f("rect"),v(r,"x",o=100- -100*e[0]+"%"),v(r,"y","25%"),v(r,"width",a=-100*e[0]+"%"),v(r,"height","50%"),v(r,"fill",rt),v(t,"class","plot-line-format text-center")},m(e,o){s(e,t,o),l(t,n),l(n,i);for(let e=0;e<u.length;e+=1)u[e].m(t,null);l(t,r)},p(e,n){16&n&&b(i,e[4]),2&n&&(h=e[1].nticks,u=B(u,n,g,1,e,h,p,t,Y,tt,r,Re)),1&n&&o!==(o=100- -100*e[0]+"%")&&v(r,"x",o),1&n&&a!==(a=-100*e[0]+"%")&&v(r,"width",a)},d(e){e&&c(t);for(let e=0;e<u.length;e+=1)u[e].d()}}}function Ge(e){let t,n,i;return{c(){t=f("line"),v(t,"x1",n=50- -50*e[7]+"%"),v(t,"y1","5%"),v(t,"x2",i=50- -50*e[7]+"%"),v(t,"y2","25%"),v(t,"stroke",ot),v(t,"stroke-width","1")},m(e,n){s(e,t,n)},p(e,r){2&r&&n!==(n=50- -50*e[7]+"%")&&v(t,"x1",n),2&r&&i!==(i=50- -50*e[7]+"%")&&v(t,"x2",i)},d(e){e&&c(t)}}}function He(e){let t,n,i;return{c(){t=f("line"),v(t,"x1",n=50+50*e[7]+"%"),v(t,"y1","5%"),v(t,"x2",i=50+50*e[7]+"%"),v(t,"y2","25%"),v(t,"stroke",ot),v(t,"stroke-width","1")},m(e,n){s(e,t,n)},p(e,r){2&r&&n!==(n=50+50*e[7]+"%")&&v(t,"x1",n),2&r&&i!==(i=50+50*e[7]+"%")&&v(t,"x2",i)},d(e){e&&c(t)}}}function Ze(e,t){let n,i;function r(e,t){return e[7]>0?He:Ge}let o=r(t),a=o(t);return{key:e,first:null,c(){n=h(),a.c(),i=h(),this.first=n},m(e,t){s(e,n,t),a.m(e,t),s(e,i,t)},p(e,n){o===(o=r(t=e))&&a?a.p(t,n):(a.d(1),a=o(t),a&&(a.c(),a.m(i.parentNode,i)))},d(e){e&&c(n),a.d(e),e&&c(i)}}}function Qe(e){let t,n,i;return{c(){t=f("rect"),v(t,"x",n=50- -50*e[0]+"%"),v(t,"y","25%"),v(t,"width",i=-50*e[0]+"%"),v(t,"height","50%"),v(t,"fill",rt)},m(e,n){s(e,t,n)},p(e,r){1&r&&n!==(n=50- -50*e[0]+"%")&&v(t,"x",n),1&r&&i!==(i=-50*e[0]+"%")&&v(t,"width",i)},d(e){e&&c(t)}}}function Xe(e){let t,n;return{c(){t=f("rect"),v(t,"x","50%"),v(t,"y","25%"),v(t,"width",n=50*e[0]+"%"),v(t,"height","50%"),v(t,"fill",rt)},m(e,n){s(e,t,n)},p(e,i){1&i&&n!==(n=50*e[0]+"%")&&v(t,"width",n)},d(e){e&&c(t)}}}function et(e,t){let n,i,r;return{key:e,first:null,c(){n=f("line"),v(n,"x1",i=100*t[7]+"%"),v(n,"y1","5%"),v(n,"x2",r=100*t[7]+"%"),v(n,"y2","25%"),v(n,"stroke",ot),v(n,"stroke-width","1"),this.first=n},m(e,t){s(e,n,t)},p(e,o){t=e,2&o&&i!==(i=100*t[7]+"%")&&v(n,"x1",i),2&o&&r!==(r=100*t[7]+"%")&&v(n,"x2",r)},d(e){e&&c(n)}}}function tt(e,t){let n,i,r;return{key:e,first:null,c(){n=f("line"),v(n,"x1",i=100- -100*t[7]+"%"),v(n,"y1","5%"),v(n,"x2",r=100- -100*t[7]+"%"),v(n,"y2","25%"),v(n,"stroke",ot),v(n,"stroke-width","1"),this.first=n},m(e,t){s(e,n,t)},p(e,o){t=e,2&o&&i!==(i=100- -100*t[7]+"%")&&v(n,"x1",i),2&o&&r!==(r=100- -100*t[7]+"%")&&v(n,"x2",r)},d(e){e&&c(n)}}}function nt(t){let n;function i(e,t){return e[1]&&null!=e[0]?We:Ye}let r=i(t),o=r(t);return{c(){o.c(),n=h()},m(e,t){o.m(e,t),s(e,n,t)},p(e,[t]){r===(r=i(e))&&o?o.p(e,t):(o.d(1),o=r(e),o&&(o.c(),o.m(n.parentNode,n)))},i:e,o:e,d(e){o.d(e),e&&c(n)}}}const it=(e,t,n,i)=>{const r=[],o=i.scale||"linear";if(i.log_unit){function a(e){return e>=0&&e<1?1:e}"log"!=i.scale&&r.push(`column ${e} 'line.log_unit' could be used with log scale only`),n=n.map((e=>void 0===e?void 0:a(e))),t=[a(t[0]),a(t[1])]}let l,s,c=[];if("log"==o){if(t[0]<=0)return r.push(`column ${e}, 'line.domain' can't be negative for log scale`),{column:n.map((e=>{})),warnings:r,stats:void 0};let o=Math.max(...t.map((e=>Math.log(Math.abs(e)))));c=n.map((t=>void 0===t?void 0:t>0?Math.log(t)/o:void r.push(`column ${e}, values can't be negative for log scale`))),l=je(i.ticks||[],(t=>t>0?Math.log(t)/o:(r.push(`column ${e}, ticks can't be negative for log scale`),!1))),s=[Math.log(t[0])/o,Math.log(t[1])/o]}else{if("linear"!=o)throw new Error(`unknown scale ${o}`);{let e=Math.max(...t.map((e=>Math.abs(e))));0==e&&(e=1),c=n.map((t=>void 0===t?void 0:t/e)),l=(i.ticks||[]).map((t=>t/e)),s=[t[0]/e,t[1]/e]}}return{column:c,warnings:r,stats:{domain:t,ndomain:s,nticks:l}}},rt="#111827",ot="#111827";function at(e,t,n){let i,r,o,{options:a}=t,{value:l}=t,{converted:s}=t,{stats:c}=t;return e.$$set=e=>{"options"in e&&n(5,a=e.options),"value"in e&&n(6,l=e.value),"converted"in e&&n(0,s=e.converted),"stats"in e&&n(1,c=e.stats)},e.$$.update=()=>{2&e.$$.dirty&&n(2,[i,r]=c?c.ndomain:[0,0],i,(n(3,r),n(1,c))),99&e.$$.dirty&&n(4,o=[void 0!==s?`value: ${l}`:"missing",((null==c?void 0:c.nticks)||[]).length>0?`, ticks: [${(a.ticks||[]).join(", ")}]`:"",c?`domain: [${c.domain[0]}, ${c.domain[1]}]`:"",`scale: ${a.scale||"linear"}`].join(", "))},[s,c,i,r,o,a,l]}var lt=Object.freeze({__proto__:null,default:class extends X{constructor(e){super(),Q(this,e,at,nt,o,{options:5,value:6,converted:0,stats:1})}},compatibleTypes:["number"],extraValues:({ticks:e})=>e||[],align:function(e,t){if(e.align)return e.align;if(t){const[e,n]=t.ndomain;return n<=0?"right":e>=0?"left":"center"}return"center"},convertColumn:it});function st(t){let n,i;return{c(){n=u("div"),i=d(t[0]),v(n,"class",t[1])},m(e,t){s(e,n,t),l(n,i)},p(e,[t]){1&t&&b(i,e[0])},i:e,o:e,d(e){e&&c(n)}}}function ct(e,t,n){let i,{options:r}=t,{value:o}=t;const a=qe(r.align||"left")+(r.small?" text-xs":"");return e.$$set=e=>{"options"in e&&n(2,r=e.options),"value"in e&&n(3,o=e.value)},e.$$.update=()=>{8&e.$$.dirty&&n(0,i=null==o?"":""+o)},[i,a,r,o]}const ut={string:Ne,boolean:Le,number:Pe,unknown:Object.freeze({__proto__:null,default:class extends X{constructor(e){super(),Q(this,e,ct,st,o,{options:2,value:3})}},compatibleTypes:[],align:function(e,t){return e.align||"left"}}),line:lt};function ft(e){return e in ut?{is_error:!1,value:ut[e]}:{is_error:!0,message:`no '${e}' format`}}const dt=["string","number","boolean","unknown"],pt=["<=","<","=","!=",">",">=","~"],ht={string:function(e,t){return e.localeCompare(t)},number:function(e,t){return e-t},boolean:function(e,t){return e==t?0:e?1:-1},unknown:function(e,t){return(""+e).localeCompare(""+t)}};function gt(e,[t,n]){const i="desc"==n,r=Oe(me(e,(({id:e})=>e==t))).type;if(!(r in ht))throw new Error(`no comparator for '${r}' type, please register one`);const o=ht[r];return i?function(e,n){const i=n[t],r=e[t];return void 0===i?void 0===r?0:-1:void 0===r?1:o(i,r)}:function(e,n){const i=e[t],r=n[t];return void 0===i?void 0===r?0:-1:void 0===r?1:o(i,r)}}function mt(e,t,n){if(n.length>3)throw new Error("sort not supported for more than 3 columns");const[i,r,o]=n;if(null==i&&ce(null==r),null==r&&ce(null==o),0==t.length||null==i)return t;let a,l=gt(e,i),s=r?gt(e,r):void 0,c=o?gt(e,o):void 0;a=c?function(e,t){let n=l(e,t);return 0!=n?n:(n=s(e,t),0!=n?n:c(e,t))}:s?function(e,t){let n=l(e,t);return 0!=n?n:s(e,t)}:l;const u=[...t];return u.sort(a),u}function vt(e,t,n){const i=[...t];for(const e of i)e._weights={},e._nweights={};for(const t in n){const{type:n,min_max:r}=Oe(me(e,(({id:e})=>e==t)));let[o,a]=$e(i,(e=>void 0!==e[t]));if(0==o.length){for(const e of i)e._weights[t]=0,e._nweights[t]=0;continue}if("number"==n){const e=typeof i[0][t];if("number"!=e)throw new Error(`wrong type for '${t}' column, wsort expects number but found '${e}'`);for(const e of o)e._weights[t]=e[t]}else{if(!(n in ht))throw new Error(`no comparator for '${n}' type, please register one`);const e=ht[n];o.sort(((n,i)=>e(n[t],i[t])));let i,r=0;for(let e=0;e<o.length;e++){const n=o[e];n[t]==i?r+=1:i=n[t],n._weights[t]=e-r}}{let e,i;if(r){if("number"!=n)throw new Error("can't use min_max for non number type");e=r[0],i=r[1]}else{const n=o.map((e=>e._weights[t]));e=Math.min(...n),i=Math.max(...n)}const a=(i+e)/2;let l=(i-e)/2;ce(l>=0),l=0==l?1:l;for(const e of o){let n=(e._weights[t]-a)/l;e._nweights[t]=n}}let l=ye(o.map((e=>e._nweights[t])));for(const e of a)e._nweights[t]=l}for(const e of i){let t=0;for(const i in n)t+=n[i]*e._nweights[i];e._w=t}return i.sort(((e,t)=>e._w-t._w)).reverse(),i}se("sortTable",(()=>{const e=[{id:"name",type:"string"},{id:"age",type:"number"}],t=[{name:"Artanis",age:200},{name:"Sarah",age:30},{name:"Jim",age:30},{name:"Amon",age:void 0}];let n=n=>mt(e,t,n).map((({name:e})=>e));ce.equal(n([["name","asc"]]),["Amon","Artanis","Jim","Sarah"]),ce.equal(n([["age","asc"]])[0],"Amon"),ce.equal(n([["age","asc"],["name","asc"]]),["Amon","Jim","Sarah","Artanis"])})),se("wsortTable",(()=>{const e=(e,t,n)=>vt(e,t,n).map((({id:e})=>e));ce.equal(e([{id:"a",type:"number"},{id:"b",type:"number"}],[{id:"a",a:0,b:3},{id:"b",a:1,b:3},{id:"c",a:2,b:void 0},{id:"d",a:-2,b:200}],{a:1,b:-1}),["c","b","a","d"]);ce.equal(e([{id:"a",type:"number"}],[{id:"a",a:0},{id:"b",a:1},{id:"c",a:void 0}],{a:1}),["b","c","a"]);{const e=vt([{id:"a",type:"string"}],[{id:"a",a:"a"},{id:"b",a:"a"},{id:"c",a:"b"}],{a:1});ce.equal(e[0].id,"c"),ce.equal(e.map((e=>e._weights.a)),[1,0,0])}}));const bt=.1;function yt(e){return ke(function(e,t){const n=new Set,i=t||(e=>e);return e.filter((e=>{const t=i(e);return!n.has(t)&&(n.add(t),!0)}))}(e.map((e=>"string"==typeof e?{type:"warn",message:e}:e)),(({message:e})=>e)),(({type:e,message:t})=>`${e} ${t}`))}function wt(e,t){if(!t)return;const n={};for(const i of e){const e=t[i.id];if(!e)continue;const r=$t(i,""+e[1]);void 0!==r&&(n[i.id]=[xt(e[0]),r])}return n}function xt(e){return pt.includes(e)?e:"="}function $t({type:e},t){switch(e){case"string":return t;case"boolean":try{return["true","t","1"].includes(t.toLowerCase())}catch(e){return}case"number":try{let e=parseFloat(t);return Number.isFinite(e)?e:void 0}catch(e){return}default:return t}}const kt="abcdefghijklmnopqrstuvwxyz".split("");function jt(e,t=!1){const n=[];if(0==e.data.length)return n.push("table is empty"),{columns:[],rows:[],messages:yt(n)};if(t&&(i=e.version,r=n,!(void 0===i?(r.push("version is missing, please specify version as 0.1"),0):(i!=bt&&r.push(`options.version ${i} is wrong, the current table has 0.1 version, update options.version or use table of different version`),1))))return{columns:[],rows:[],messages:yt(n)};var i,r;const o=function(e,t,n){const i=[];for(let r=0;r<t.length;r++){const o=t[r];if(Array.isArray(o)){const t={_i:r,_converted:{}};if(e)for(let i=0;i<o.length;i++)i<e.length?t[e[i].id]=o[i]:n.push("row size is larger than columns available");else for(let e=0;e<o.length;e++)e<kt.length?t[kt[e]]=o[e]:n.push("row size is larger than columns available");i.push(t)}else i.push(Object.assign(Object.assign({},o),{_i:r,_converted:{}}))}for(let e=0;e<i.length;e++){const t=i[e];for(const e in t)null===t[e]&&(t[e]=void 0)}return i}(e.columns,e.data,n);let a=function(e,t,n){if(e)return e;const i=new Map,r=new Set;for(let e=0;e<t.length;e++){const o=t[e];for(const e in o){if("_i"==e||"_converted"==e)continue;let t=o[e];if(void 0===t)r.add(e);else{let r=typeof t;"object"==r?(n.push(`unknown type for column '${e}' - '${r}'`),i.set(e,"unknown")):i.has(e)?i.get(e)!=r&&(n.push(`unstable types for column '${e}', ${[i.get(e),r].sort().join(", ")}`),i.set(e,"unknown")):i.set(e,r)}}}for(const e of r)i.has(e)||i.set(e,"unknown");return ke(Array.from(i,(([e,t])=>({id:e,type:t}))),(({id:e})=>e))}(e.columns,o,n);if(e.alter_columns){const t=e.alter_columns.map((({id:e})=>e));a=[...e.alter_columns,...a.filter((({id:e})=>!t.includes(e)))]}const l=a.length;a.length!=l&&n.push("not unique column ids"),a=function(e,t,n){e=[...e];for(let i=0;i<t.length;i++){const r=t[i];for(const t of e){const{id:e,type:i}=t;if("_i"==e)continue;let o=r[e];void 0!==o&&(typeof o!=i&&"unknown"!=i&&dt.includes(i)&&(n.push(`wrong type for column '${e}', specified as '${i}' but '${typeof o}' found`),t.type="unknown"))}}return e}(a,o,n);let s=function(e,t){const n=ft("unknown");if(n.is_error)throw"can't get 'unknown' formatter";let i=[];for(const r of e){const e=r.format||{type:r.type},o=ft(e.type);o.is_error?(t.push(o.message),i.push([n.value,e])):o.value.compatibleTypes.includes(r.type)?i.push([o.value,e]):(t.push(`column ${r.id} has wrong format, format ${r.format} is not compatible with '${r.type}' type`),i.push([n.value,e]))}return i}(a,n);const c=function(e,t,n,i){const r={};for(let o=0;o<e.length;o++){const{id:a,type:l,domain:s}=e[o],[c,u]=t[o];if("number"!=l){s&&i.push(`non number column '${a}' can't have domain`);continue}const f=je(c.extraValues?c.extraValues(u):[],(e=>void 0!==e&&e)),d=je(n,(e=>{const t=e[a];return void 0!==t&&t}));if(d.push(...f),0==d.length){s&&(r[a]=s);continue}let p=d[0],h=d[0];for(const e of d)e>h?h=e:e<p&&(p=e);const g=s||[p,h];p<g[0]&&(i.push(`column ${a} 'domain' min value is greather than actual min ${p}`),g[0]=p),h>g[1]&&(i.push(`column ${a} 'line.domain' max value is smaller than actual max ${h}`),g[1]=h),r[a]=g}return r}(a,s,o,n);s=function(e,t,n,i){return n.map(((n,r)=>{const{id:o,type:a}=e[r],[l,s]=n;if("number"==s.type&&void 0===s.round)if("number"==a){if(t.every((e=>{const t=e[o];return void 0===t||Number.isInteger(t)})))return[l,Object.assign(Object.assign({},s),{round:0})]}else i.push(`column ${o} is non number and can't use number formatter`);return n}))}(a,o,s,n);const u=Ot(a,o),f=function(e,t,n,i,r){const o={};for(let a=0;a<e.length;a++){const[{id:l},[s,c]]=[e[a],n[a]];if(s.convertColumn){const e=i.map((e=>e[l])),n=t[l];if(n){const{column:t,warnings:a,stats:u}=s.convertColumn(l,n,e,c);o[l]=u,a.forEach((e=>r.push(e)));for(let e=0;e<i.length;e++)i[e]._converted[l]=t[e]}}}return o}(a,c,s,o,n);return{columns:a.map(((e,t)=>({id:e.id,type:e.type,title:e.title,format:s[t][1],formatStats:f[e.id],formatter:s[t][0],widthP:u[t],domain:c[e.id]}))),rows:o,messages:yt(n)}}function Ot(e,t){let n;if(e.some((({width:e})=>null!=e)))n=e.map((({width:e})=>e||1));else{const i=new Map;for(const n of t)for(const{id:t,type:r}of e){let e;if(void 0===n[t])continue;if("string"==r)e=n[t].length;else if("number"==r)e=(""+n[t]).length;else{if("boolean"!=r)continue;e=1}let o=i.get(t);null==o&&(o=[],i.set(t,o)),o.push(e)}const r=Ce(i,(e=>we(e,.7))),o=ye(Ae(r,[],((e,t)=>(e.push(t),e)))),a=1.618,l=Ce(r,(e=>e>o*a?a:e<o/a?1/a:1)),s=1;n=e.map((({id:e})=>l.get(e)||s))}return At(n)}function At(e){if(0==e.length)return[];const t=100/_e(e);let n=e.map((e=>Ee(e*t)));for(;;){const e=_e(n);if(e>100)n[be(n)]-=1;else{if(!(e<100))break;n[ve(n)]+=1}}return n}function _t(e,t,n){return t=function(e,t,n){if(!n)return t;for(const{id:i,type:r}of e){const e=n[i];if(!e)continue;const[o,a]=e;if(void 0===a||""===a)continue;const l=Ct(r,[o,a]);t=t.filter((e=>l(e[i])))}return t}(e,t=function(e,t,n){if(!(n=function(e){return e.replace(/^[\t\s\n]+|[\t\s\n]+$/g,"")}(n)))return t;const i=n.toLowerCase();return t.filter((t=>{for(const{id:n}of e)if((""+t[n]).toLowerCase().includes(i))return!0;return!1}))}(e,t,n.filter),n.filters)}function Ct(e,[t,n]){switch(e){case"string":if("string"!=typeof n)throw new Error("string filter value expected");const e=n;switch(t){case"<=":return t=>void 0!==t&&t<=e;case"<":return t=>void 0!==t&&t<e;case"=":return t=>void 0!==t&&t==e;case"!=":return t=>void 0!==t&&t!=e;case">":return t=>void 0!==t&&t>e;case">=":return t=>void 0!==t&&t>=e;case"~":return t=>void 0!==t&&t.includes(e)}case"boolean":if("boolean"!=typeof n)throw new Error("boolean filter value expected");const i=n;switch(t){case"<=":return e=>void 0!==e&&e<=i;case"<":return e=>void 0!==e&&e<i;case"=":return e=>void 0!==e&&e==i;case"!=":return e=>void 0!==e&&e!=i;case">":return e=>void 0!==e&&e>i;case">=":return e=>void 0!==e&&e>=i;case"~":return e=>void 0!==e&&e==i}case"number":if("number"!=typeof n)throw new Error("number filter value expected");const r=n;switch(t){case"<=":return e=>void 0!==e&&e<=r;case"<":return e=>void 0!==e&&e<r;case"=":return e=>void 0!==e&&e==r;case"!=":return e=>void 0!==e&&e!=r;case">":return e=>void 0!==e&&e>r;case">=":return e=>void 0!==e&&e>=r;case"~":return e=>void 0!==e&&e==r}default:const o=""+n;switch(t){case"<=":return e=>void 0!==e&&""+e<=o;case"<":return e=>void 0!==e&&""+e<o;case"=":return e=>void 0!==e&&""+e==o;case"!=":return e=>void 0!==e&&""+e!=o;case">":return e=>void 0!==e&&""+e>o;case">=":return e=>void 0!==e&&""+e>=o;case"~":return e=>void 0!==e&&""+e==o}}throw new Error(`unknown filter ${e} ${t}`)}function Et(e){let t,n,i,r,o,a,f,d,h,m;return{c(){t=u("div"),n=u("span"),i=u("span"),i.textContent="w =",r=p(),o=u("input"),v(i,"class","w-5 inline-block"),v(o,"class","w-10 outline-none pl-1 text-xs border border-gray-200 svelte-1brt80c"),v(o,"type","number"),v(o,"step","0.1"),o.value=a=e[2].toFixed(1),v(n,"class",f=e[3]?"text-gray-900":"text-gray-200"),v(t,"class",d=e[1]+" my-1 text-xs "+(!e[4]&&"invisible"))},m(a,c){s(a,t,c),l(t,n),l(n,i),l(n,r),l(n,o),h||(m=g(o,"change",e[5]),h=!0)},p(e,i){4&i&&a!==(a=e[2].toFixed(1))&&(o.value=a),8&i&&f!==(f=e[3]?"text-gray-900":"text-gray-200")&&v(n,"class",f),18&i&&d!==(d=e[1]+" my-1 text-xs "+(!e[4]&&"invisible"))&&v(t,"class",d)},d(e){e&&c(t),h=!1,m()}}}function St(t){let n,i=t[0].wsort&&Et(t);return{c(){i&&i.c(),n=h()},m(e,t){i&&i.m(e,t),s(e,n,t)},p(e,[t]){e[0].wsort?i?i.p(e,t):(i=Et(e),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:e,o:e,d(e){i&&i.d(e),e&&c(n)}}}function qt(e,t,n){let i,r,o,{column_id:a}=t,{align:l}=t,{state:s}=t;const c=Se((e=>{s.wsort&&n(0,s.wsort[a]=e,s)}),200);return e.$$set=e=>{"column_id"in e&&n(6,a=e.column_id),"align"in e&&n(1,l=e.align),"state"in e&&n(0,s=e.state)},e.$$.update=()=>{65&e.$$.dirty&&n(2,i=(s.wsort||{})[a]||0),4&e.$$.dirty&&n(3,r=0!=i),9&e.$$.dirty&&n(4,o=s.show_controls||r)},[s,l,i,r,o,({target:{value:e}})=>{n(2,i=parseFloat(e)),c(i)},a]}se("normalizeInputsSlow",(()=>{const e=e=>e.map((({id:e,type:t})=>({id:e,type:t})));{const{columns:t,rows:n}=jt({data:[["v",null]]});ce.equal(e(t),[{id:"a",type:"string"},{id:"b",type:"unknown"}]),ce.equal(n,[{a:"v",b:void 0,_i:0,_converted:{}}])}{const{columns:t,rows:n}=jt({data:[{k:"v",k2:null}]});ce.equal(e(t),[{id:"k",type:"string"},{id:"k2",type:"unknown"}]),ce.equal(n,[{k:"v",k2:void 0,_i:0,_converted:{}}])}{const{columns:t,rows:n}=jt({data:[{k:"v"},{k:0}]});ce.equal(e(t),[{id:"k",type:"unknown"}]),ce.equal(n,[{k:"v",_i:0,_converted:{}},{k:0,_i:1,_converted:{}}])}{const{columns:e}=jt({data:[{v:1}]});ce.equal(e[0].format,{type:"number",round:0})}})),se("calculateColumnWidths",(()=>{ce.equal(Ot([{id:"name",type:"string"},{id:"age",type:"number"}],[{name:"Jim Raynor",age:30},{name:"Kate",age:25}]),[62,38])})),se("weightsToPercents",(()=>{ce.equal(At([2,2]),[50,50]),ce.equal(At([3,3,3]).sort(),[33,33,34])}));class Mt extends X{constructor(e){super(),Q(this,e,qt,St,o,{column_id:6,align:1,state:0})}}function It(e,t,n){const i=e.slice();return i[9]=t[n],i}function Nt(e){let t,n,r,o,a,f,d,h,m,b,y,w=[],$=new Map,k=pt;const j=e=>e[9];for(let t=0;t<k.length;t+=1){let n=It(e,k,t),i=j(n);$.set(i,w[t]=Tt(i,n))}return{c(){t=u("div"),n=u("span"),r=u("select");for(let e=0;e<w.length;e+=1)w[e].c();a=p(),f=u("input"),v(r,"class","outline-none w-5 inline-block svelte-126ibbo"),v(f,"class","w-10 outline-none pl-1 text-xs border border-gray-200"),v(f,"type","text"),f.value=d=void 0===e[2][1]?"":""+e[2][1],v(n,"class",h=e[3]?"text-gray-900":"text-gray-200"),v(t,"class",m=e[1]+" my-1 text-xs "+(!e[4]&&"invisible"))},m(i,o){s(i,t,o),l(t,n),l(n,r);for(let e=0;e<w.length;e+=1)w[e].m(r,null);x(r,e[2][0]),l(n,a),l(n,f),b||(y=[g(r,"change",e[5]),g(f,"keyup",e[6])],b=!0)},p(e,i){0&i&&(k=pt,w=B(w,i,j,1,e,k,$,r,Y,Tt,null,It)),4&i&&o!==(o=e[2][0])&&x(r,e[2][0]),4&i&&d!==(d=void 0===e[2][1]?"":""+e[2][1])&&f.value!==d&&(f.value=d),8&i&&h!==(h=e[3]?"text-gray-900":"text-gray-200")&&v(n,"class",h),18&i&&m!==(m=e[1]+" my-1 text-xs "+(!e[4]&&"invisible"))&&v(t,"class",m)},d(e){e&&c(t);for(let e=0;e<w.length;e+=1)w[e].d();b=!1,i(y)}}}function Tt(e,t){let n,i,r=t[9]+"";return{key:e,first:null,c(){n=u("option"),i=d(r),n.__value=t[9],n.value=n.__value,this.first=n},m(e,t){s(e,n,t),l(n,i)},p(e,n){t=e},d(e){e&&c(n)}}}function Ft(t){let n,i=t[0].filters&&Nt(t);return{c(){i&&i.c(),n=h()},m(e,t){i&&i.m(e,t),s(e,n,t)},p(e,[t]){e[0].filters?i?i.p(e,t):(i=Nt(e),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:e,o:e,d(e){i&&i.d(e),e&&c(n)}}}function Lt(e,t,n){let i,r,o,{column:a}=t,{align:l}=t,{state:s}=t;const c=Se((e=>{s.filters&&n(0,s.filters[a.id]=e,s)}),200);return e.$$set=e=>{"column"in e&&n(7,a=e.column),"align"in e&&n(1,l=e.align),"state"in e&&n(0,s=e.state)},e.$$.update=()=>{129&e.$$.dirty&&n(2,o=s.filters&&a.id in s.filters?s.filters[a.id]:["=",void 0]),4&e.$$.dirty&&n(3,i=null!=o[1]&&""!==o[1]),9&e.$$.dirty&&n(4,r=i||s.show_controls)},[s,l,o,i,r,({target:{value:e}})=>{n(2,o[0]=xt(e),o),c(o)},({target:{value:e}})=>{n(2,o[1]=$t(a,e),o),c(o)},a]}class zt extends X{constructor(e){super(),Q(this,e,Lt,Ft,o,{column:7,align:1,state:0})}}function Ut(e){let t,n,i,r,o,a,f,h,y,x,$,k,j,O,_,C,E,S=e[3].symbol+"";function q(t){e[11](t)}let I={column_id:e[4],align:"text-right"};function N(t){e[12](t)}void 0!==e[0]&&(I.state=e[0]),x=new Mt({props:I}),A.push((()=>K(x,"state",q)));let T={column:e[1],align:"text-right"};return void 0!==e[0]&&(T.state=e[0]),j=new zt({props:T}),A.push((()=>K(j,"state",N))),{c(){t=u("th"),n=u("a"),i=u("span"),r=d(S),a=p(),f=u("span"),h=d(e[2]),y=p(),V(x.$$.fragment),k=p(),V(j.$$.fragment),v(i,"class",o=e[3].klass+" mr-0.5"),v(n,"class","flex justify-between"),v(n,"href","#"),w(t,"width",e[1].widthP+"%"),v(t,"class","text-right")},m(o,c){s(o,t,c),l(t,n),l(n,i),l(i,r),l(n,a),l(n,f),l(f,h),l(t,y),G(x,t,null),l(t,k),G(j,t,null),_=!0,C||(E=g(n,"click",m(e[6])),C=!0)},p(e,n){(!_||8&n)&&S!==(S=e[3].symbol+"")&&b(r,S),(!_||8&n&&o!==(o=e[3].klass+" mr-0.5"))&&v(i,"class",o),(!_||4&n)&&b(h,e[2]);const a={};!$&&1&n&&($=!0,a.state=e[0],M((()=>$=!1))),x.$set(a);const l={};2&n&&(l.column=e[1]),!O&&1&n&&(O=!0,l.state=e[0],M((()=>O=!1))),j.$set(l),(!_||2&n)&&w(t,"width",e[1].widthP+"%")},i(e){_||(D(x.$$.fragment,e),D(j.$$.fragment,e),_=!0)},o(e){J(x.$$.fragment,e),J(j.$$.fragment,e),_=!1},d(e){e&&c(t),H(x),H(j),C=!1,E()}}}function Pt(e){let t,n,i,r,o,a,f,h,y,x,$,k,j,O,_,C,E,S,q,I,N,T=e[3].symbol+"",F=e[3].symbol+"";function L(t){e[9](t)}let z={column_id:e[4],align:"text-center"};function U(t){e[10](t)}void 0!==e[0]&&(z.state=e[0]),O=new Mt({props:z}),A.push((()=>K(O,"state",L)));let P={column:e[1],align:"text-center"};return void 0!==e[0]&&(P.state=e[0]),E=new zt({props:P}),A.push((()=>K(E,"state",U))),{c(){t=u("th"),n=u("a"),i=u("span"),r=d(T),o=p(),a=u("span"),f=d(e[2]),h=p(),y=u("span"),x=d(F),j=p(),V(O.$$.fragment),C=p(),V(E.$$.fragment),v(i,"class","invisible mr-0.5"),v(y,"class",$=e[3].klass+" ml-0.5"),v(y,"title",k=e[3].title),v(n,"class","flex justify-between"),v(n,"href","#"),w(t,"width",e[1].widthP+"%")},m(c,u){s(c,t,u),l(t,n),l(n,i),l(i,r),l(n,o),l(n,a),l(a,f),l(n,h),l(n,y),l(y,x),l(t,j),G(O,t,null),l(t,C),G(E,t,null),q=!0,I||(N=g(n,"click",m(e[6])),I=!0)},p(e,n){(!q||8&n)&&T!==(T=e[3].symbol+"")&&b(r,T),(!q||4&n)&&b(f,e[2]),(!q||8&n)&&F!==(F=e[3].symbol+"")&&b(x,F),(!q||8&n&&$!==($=e[3].klass+" ml-0.5"))&&v(y,"class",$),(!q||8&n&&k!==(k=e[3].title))&&v(y,"title",k);const i={};!_&&1&n&&(_=!0,i.state=e[0],M((()=>_=!1))),O.$set(i);const o={};2&n&&(o.column=e[1]),!S&&1&n&&(S=!0,o.state=e[0],M((()=>S=!1))),E.$set(o),(!q||2&n)&&w(t,"width",e[1].widthP+"%")},i(e){q||(D(O.$$.fragment,e),D(E.$$.fragment,e),q=!0)},o(e){J(O.$$.fragment,e),J(E.$$.fragment,e),q=!1},d(e){e&&c(t),H(O),H(E),I=!1,N()}}}function Dt(e){let t,n,i,r,o,a,f,h,y,x,$,k,j,O,_,C,E,S,q=e[3].symbol+"";function I(t){e[7](t)}let N={column_id:e[4],align:"text-left"};function T(t){e[8](t)}void 0!==e[0]&&(N.state=e[0]),$=new Mt({props:N}),A.push((()=>K($,"state",I)));let F={column:e[1],align:"text-left"};return void 0!==e[0]&&(F.state=e[0]),O=new zt({props:F}),A.push((()=>K(O,"state",T))),{c(){t=u("th"),n=u("a"),i=u("span"),r=d(e[2]),o=p(),a=u("span"),f=d(q),x=p(),V($.$$.fragment),j=p(),V(O.$$.fragment),v(a,"class",h=e[3].klass+" ml-0.5"),v(a,"title",y=e[3].title),v(n,"class","flex justify-between"),v(n,"href","#"),w(t,"width",e[1].widthP+"%")},m(c,u){s(c,t,u),l(t,n),l(n,i),l(i,r),l(n,o),l(n,a),l(a,f),l(t,x),G($,t,null),l(t,j),G(O,t,null),C=!0,E||(S=g(n,"click",m(e[6])),E=!0)},p(e,n){(!C||4&n)&&b(r,e[2]),(!C||8&n)&&q!==(q=e[3].symbol+"")&&b(f,q),(!C||8&n&&h!==(h=e[3].klass+" ml-0.5"))&&v(a,"class",h),(!C||8&n&&y!==(y=e[3].title))&&v(a,"title",y);const i={};!k&&1&n&&(k=!0,i.state=e[0],M((()=>k=!1))),$.$set(i);const o={};2&n&&(o.column=e[1]),!_&&1&n&&(_=!0,o.state=e[0],M((()=>_=!1))),O.$set(o),(!C||2&n)&&w(t,"width",e[1].widthP+"%")},i(e){C||(D($.$$.fragment,e),D(O.$$.fragment,e),C=!0)},o(e){J($.$$.fragment,e),J(O.$$.fragment,e),C=!1},d(e){e&&c(t),H($),H(O),E=!1,S()}}}function Jt(e){let t,n,i,r;const o=[Dt,Pt,Ut],a=[];return t=function(e,t){return"left"==e[5]?0:"center"==e[5]?1:2}(e),n=a[t]=o[t](e),{c(){n.c(),i=h()},m(e,n){a[t].m(e,n),s(e,i,n),r=!0},p(e,[t]){n.p(e,t)},i(e){r||(D(n),r=!0)},o(e){J(n),r=!1},d(e){a[t].d(e),e&&c(i)}}}function Rt(e,t,n){let i,r,{column:o}=t,{state:a}=t,l=o.id;const s=o.formatter.align(o.format,o.formatStats);function c(e,t){const n={symbol:"↓",klass:"invisible",title:""};if(t.wsort){const i=t.wsort[e.id],r="wsort: "+function(e){return e instanceof Map?Array.from(e):Object.entries(e)}(t.wsort).map((([e,t])=>`${e}: ${t}`)).join(", ");return void 0===i||0==i?n:i>=0?{symbol:"↑",klass:"text-gray-900",title:r}:{symbol:"↓",klass:"text-gray-900",title:r}}if(t.sort){let e;for(let n=0;n<t.sort.length;n++){const[i,r]=t.sort[n];i==l&&(e=[r,n])}if(!e)return n;const i="sort: "+t.sort.map((([e,t])=>`${e}: ${t}`)).join(", "),[r,o]=e,a="asc"==r?"↓":"↑";let s;if(0==o)s="text-gray-900";else if(1==o)s="text-gray-400";else{if(2!=o)throw new Error("color for more than 3 sort oders isn't supported");s="text-gray-300"}return{symbol:a,klass:s,title:i}}return n}return e.$$set=e=>{"column"in e&&n(1,o=e.column),"state"in e&&n(0,a=e.state)},e.$$.update=()=>{2&e.$$.dirty&&n(2,i=o.title||o.id),3&e.$$.dirty&&n(3,r=c(o,a))},[a,o,i,r,l,s,function(e){if(a.sortable)if(a.wsort){let t=a.wsort;e.metaKey?o.id in t?t[o.id]=-1*t[o.id]:t[o.id]=1:he(t)>1?t={[l]:1}:o.id in t?t[o.id]=-1*t[o.id]:t={[l]:1},n(0,a.wsort=t,a)}else{let t=a.sort||[];const i=function(e,t){const n=t instanceof Function?t:e=>e==t;for(let t=0;t<e.length;t++)if(n(e[t],t))return t;return-1}(t,(([e,t])=>e==o.id));e.metaKey?i>=0?t[i][1]="asc"==t[i][1]?"desc":"asc":t.push([l,"asc"]):t.length>1?t=[[l,"asc"]]:i>=0?(ce(1==t.length),t[i][1]="asc"==t[i][1]?"desc":"asc"):t=[[l,"asc"]],n(0,a.sort=t,a)}},function(e){a=e,n(0,a)},function(e){a=e,n(0,a)},function(e){a=e,n(0,a)},function(e){a=e,n(0,a)},function(e){a=e,n(0,a)},function(e){a=e,n(0,a)}]}class Yt extends X{constructor(e){super(),Q(this,e,Rt,Jt,o,{column:1,state:0})}}function Wt(e,t,n){const i=e.slice();return i[3]=t[n],i}function Bt(e,t){let n,i,r,o;function a(e){t[2](e)}let l={column:t[3]};return void 0!==t[0]&&(l.state=t[0]),i=new Yt({props:l}),A.push((()=>K(i,"state",a))),{key:e,first:null,c(){n=h(),V(i.$$.fragment),this.first=n},m(e,t){s(e,n,t),G(i,e,t),o=!0},p(e,n){t=e;const o={};2&n&&(o.column=t[3]),!r&&1&n&&(r=!0,o.state=t[0],M((()=>r=!1))),i.$set(o)},i(e){o||(D(i.$$.fragment,e),o=!0)},o(e){J(i.$$.fragment,e),o=!1},d(e){e&&c(n),H(i,e)}}}function Kt(e){let t,n,i=[],r=new Map,o=e[1];const a=e=>e[3].id;for(let t=0;t<o.length;t+=1){let n=Wt(e,o,t),l=a(n);r.set(l,i[t]=Bt(l,n))}return{c(){t=u("tr");for(let e=0;e<i.length;e+=1)i[e].c()},m(e,r){s(e,t,r);for(let e=0;e<i.length;e+=1)i[e].m(t,null);n=!0},p(e,[n]){3&n&&(o=e[1],U(),i=B(i,n,a,1,e,o,r,t,W,Bt,null,Wt),P())},i(e){if(!n){for(let e=0;e<o.length;e+=1)D(i[e]);n=!0}},o(e){for(let e=0;e<i.length;e+=1)J(i[e]);n=!1},d(e){e&&c(t);for(let e=0;e<i.length;e+=1)i[e].d()}}}function Vt(e,t,n){let{columns:i}=t,{state:r}=t;return e.$$set=e=>{"columns"in e&&n(1,i=e.columns),"state"in e&&n(0,r=e.state)},[r,i,function(e){r=e,n(0,r)}]}class Gt extends X{constructor(e){super(),Q(this,e,Vt,Kt,o,{columns:1,state:0})}}function Ht(e,t,n){const i=e.slice();return i[4]=t[n],i[6]=n,i}function Zt(e){let t,n,i;var r=e[4].formatter.default;function o(e){return{props:{options:e[4].format,value:e[1][e[4].id]}}}return r&&(t=new r(o(e))),{c(){t&&V(t.$$.fragment),n=h()},m(e,r){t&&G(t,e,r),s(e,n,r),i=!0},p(e,i){const a={};if(1&i&&(a.options=e[4].format),3&i&&(a.value=e[1][e[4].id]),r!==(r=e[4].formatter.default)){if(t){U();const e=t;J(e.$$.fragment,1,0,(()=>{H(e,1)})),P()}r?(t=new r(o(e)),V(t.$$.fragment),D(t.$$.fragment,1),G(t,n.parentNode,n)):t=null}else r&&t.$set(a)},i(e){i||(t&&D(t.$$.fragment,e),i=!0)},o(e){t&&J(t.$$.fragment,e),i=!1},d(e){e&&c(n),t&&H(t,e)}}}function Qt(e){let t,n,i;var r=e[4].formatter.default;function o(e){return{props:{options:e[4].format,value:e[1][e[4].id],converted:e[1]._converted[e[4].id],stats:e[4].formatStats}}}return r&&(t=new r(o(e))),{c(){t&&V(t.$$.fragment),n=h()},m(e,r){t&&G(t,e,r),s(e,n,r),i=!0},p(e,i){const a={};if(1&i&&(a.options=e[4].format),3&i&&(a.value=e[1][e[4].id]),3&i&&(a.converted=e[1]._converted[e[4].id]),1&i&&(a.stats=e[4].formatStats),r!==(r=e[4].formatter.default)){if(t){U();const e=t;J(e.$$.fragment,1,0,(()=>{H(e,1)})),P()}r?(t=new r(o(e)),V(t.$$.fragment),D(t.$$.fragment,1),G(t,n.parentNode,n)):t=null}else r&&t.$set(a)},i(e){i||(t&&D(t.$$.fragment,e),i=!0)},o(e){t&&J(t.$$.fragment,e),i=!1},d(e){e&&c(n),t&&H(t,e)}}}function Xt(e,t){let n,i,r,o,a;const f=[Qt,Zt],d=[];function h(e,t){return"_converted"in e[1]&&e[4].id in e[1]._converted?0:1}return i=h(t),r=d[i]=f[i](t),{key:e,first:null,c(){n=u("td"),r.c(),o=p(),this.first=n},m(e,t){s(e,n,t),d[i].m(n,null),l(n,o),a=!0},p(e,a){let l=i;i=h(t=e),i===l?d[i].p(t,a):(U(),J(d[l],1,1,(()=>{d[l]=null})),P(),r=d[i],r?r.p(t,a):(r=d[i]=f[i](t),r.c()),D(r,1),r.m(n,o))},i(e){a||(D(r),a=!0)},o(e){J(r),a=!1},d(e){e&&c(n),d[i].d()}}}function en(e){let t,n,i,o,a,l=[],f=new Map,d=e[0];const p=e=>e[4].id;for(let t=0;t<d.length;t+=1){let n=Ht(e,d,t),i=p(n);f.set(i,l[t]=Xt(i,n))}return{c(){t=u("tr");for(let e=0;e<l.length;e+=1)l[e].c();v(t,"class",n=e[2]?"bg-gray-100":"")},m(n,c){s(n,t,c);for(let e=0;e<l.length;e+=1)l[e].m(t,null);i=!0,o||(a=g(t,"click",(function(){r(e[3])&&e[3].apply(this,arguments)})),o=!0)},p(r,[o]){e=r,3&o&&(d=e[0],U(),l=B(l,o,p,1,e,d,f,t,W,Xt,null,Ht),P()),(!i||4&o&&n!==(n=e[2]?"bg-gray-100":""))&&v(t,"class",n)},i(e){if(!i){for(let e=0;e<d.length;e+=1)D(l[e]);i=!0}},o(e){for(let e=0;e<l.length;e+=1)J(l[e]);i=!1},d(e){e&&c(t);for(let e=0;e<l.length;e+=1)l[e].d();o=!1,a()}}}function tn(e,t,n){let{columns:i}=t,{row:r}=t,{selected:o}=t,{onSelect:a}=t;return e.$$set=e=>{"columns"in e&&n(0,i=e.columns),"row"in e&&n(1,r=e.row),"selected"in e&&n(2,o=e.selected),"onSelect"in e&&n(3,a=e.onSelect)},[i,r,o,a]}class nn extends X{constructor(e){super(),Q(this,e,tn,en,o,{columns:0,row:1,selected:2,onSelect:3})}}const rn=e=>`<svg class="${e}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg>`,on=e=>`<svg class="${e}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg>`;function an(e){let t,n,r,o,f,h,m,b,w,x,$,k,j,O,A,_=on(cn(!!e[0].filters))+"",C=rn(cn(e[0].show_json))+"";return{c(){t=u("div"),n=u("div"),r=p(),o=u("div"),f=u("input"),h=p(),m=u("button"),b=d("W"),x=p(),$=u("button"),k=p(),j=u("button"),v(n,"class","flex items-center"),v(f,"class","rounded border border-gray-300 text-sm outline-none py-1 px-1 leading-4"),v(f,"type","text"),v(f,"placeholder","Filter"),v(m,"class",w=a(un(!!e[0].wsort))+" svelte-1y842rg"),v(m,"title",e[4]),v($,"class","focus:outline-none"),v(j,"class","focus:outline-none"),v(o,"class","flex items-center space-x-2"),v(t,"class","flex items-center justify-between my-1 mx-1")},m(i,a){s(i,t,a),l(t,n),l(t,r),l(t,o),l(o,f),y(f,e[1]),l(o,h),l(o,m),l(m,b),l(o,x),l(o,$),$.innerHTML=_,l(o,k),l(o,j),j.innerHTML=C,O||(A=[g(f,"input",e[6]),g(f,"keyup",e[2]),g(m,"click",e[3]),g($,"click",e[7]),g(j,"click",e[8])],O=!0)},p(e,t){2&t&&f.value!==e[1]&&y(f,e[1]),1&t&&w!==(w=a(un(!!e[0].wsort))+" svelte-1y842rg")&&v(m,"class",w),1&t&&_!==(_=on(cn(!!e[0].filters))+"")&&($.innerHTML=_),1&t&&C!==(C=rn(cn(e[0].show_json))+"")&&(j.innerHTML=C)},d(e){e&&c(t),O=!1,i(A)}}}function ln(e){let t,n,i,r,o,a,f,d=rn(cn(e[0].show_json))+"";return{c(){t=u("div"),n=u("div"),i=p(),r=u("div"),o=u("button"),v(n,"class","flex items-center"),v(o,"class","focus:outline-none"),v(r,"class","flex items-center space-x-2"),v(t,"class","flex items-center justify-between my-1 mx-1")},m(c,u){s(c,t,u),l(t,n),l(t,i),l(t,r),l(r,o),o.innerHTML=d,a||(f=g(o,"click",e[5]),a=!0)},p(e,t){1&t&&d!==(d=rn(cn(e[0].show_json))+"")&&(o.innerHTML=d)},d(e){e&&c(t),a=!1,f()}}}function sn(t){let n;function i(e,t){return e[0].show_json?ln:an}let r=i(t),o=r(t);return{c(){o.c(),n=h()},m(e,t){o.m(e,t),s(e,n,t)},p(e,[t]){r===(r=i(e))&&o?o.p(e,t):(o.d(1),o=r(e),o&&(o.c(),o.m(n.parentNode,n)))},i:e,o:e,d(e){o.d(e),e&&c(n)}}}function cn(e){return"h-5 w-5 p-0.5 border rounded text-gray-900 "+(e?"border-gray-300":"border-white")}function un(e){return"letter_button focus:outline-none border rounded "+(e?"border-gray-300":"border-white")}function fn(e,t,n){let{state:i}=t,r=i.filter;const o=Se((()=>{n(0,i.filter=r,i)}),200);const a=['Weighted sorting. "Smart", weighted, ranked sorting, instead of normal sorting.',"It works similar to how humans compare products with many attributes, to find the best one.","Example: find countries with highest salaries, lowest taxes and lowest real estate prices - ordinary sorting would be useless, while weighted sorting would sort the countries in a 'smart' way, similar to how human would do.","Missing values threated as average, like if we don't have tax rate for country, we guess that it probably should be somewhat average. For non number comparable elements sort rank used as weight. ifferent range of values for different columns normalised into [-1..1] range as 'nw = (w - median(w)) / 0.9-quantile(variance(w))*1.11' and limiting min/max outliers by [-1..1].",'- Undefined values threated as average\n- Rank for same values should be the same, like ["a", "a", "b"] should be [0, 0, 1], not [0, 1, 2]\n- Different range of values for different columns normalised into [-1..1] range as\n      nw = (w - median(w)) / 0.9-quantile(variance(w))*1.11 and limiting min/max outliers by [-1..1].'].join("\n\n");return e.$$set=e=>{"state"in e&&n(0,i=e.state)},[i,r,o,function(){i.wsort?(n(0,i.wsort=void 0,i),n(0,i.sort=void 0,i)):(n(0,i.wsort={},i),n(0,i.sort=void 0,i))},a,()=>n(0,i.show_json=!i.show_json,i),function(){r=this.value,n(1,r)},()=>n(0,i.filters=i.filters?void 0:{},i),()=>n(0,i.show_json=!i.show_json,i)]}class dn extends X{constructor(e){super(),Q(this,e,fn,sn,o,{state:0})}}function pn(e,t,n){const i=e.slice();return i[1]=t[n],i}function hn(e){let t,n=e[0],i=[];for(let t=0;t<n.length;t+=1)i[t]=bn(pn(e,n,t));return{c(){t=u("div");for(let e=0;e<i.length;e+=1)i[e].c();v(t,"class","text-sm mt-1 mx-1")},m(e,n){s(e,t,n);for(let e=0;e<i.length;e+=1)i[e].m(t,null)},p(e,r){if(1&r){let o;for(n=e[0],o=0;o<n.length;o+=1){const a=pn(e,n,o);i[o]?i[o].p(a,r):(i[o]=bn(a),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},d(e){e&&c(t),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(i,e)}}}function gn(t){let n;return{c(){n=u("div"),n.textContent="unknown message type"},m(e,t){s(e,n,t)},p:e,d(e){e&&c(n)}}}function mn(e){let t,n,i,r,o=e[1].message+"";return{c(){t=u("div"),n=u("span"),n.textContent="error",i=p(),r=d(o),v(n,"class","bg-red-400 px-2 rounded")},m(e,o){s(e,t,o),l(t,n),l(t,i),l(t,r)},p(e,t){1&t&&o!==(o=e[1].message+"")&&b(r,o)},d(e){e&&c(t)}}}function vn(e){let t,n,i,r,o=e[1].message+"";return{c(){t=u("div"),n=u("span"),n.textContent="warn",i=p(),r=d(o),v(n,"class","bg-yellow-400 px-2 rounded")},m(e,o){s(e,t,o),l(t,n),l(t,i),l(t,r)},p(e,t){1&t&&o!==(o=e[1].message+"")&&b(r,o)},d(e){e&&c(t)}}}function bn(e){let t;function n(e,t){return"warn"==e[1].type?vn:"error"==e[1].type?mn:gn}let i=n(e),r=i(e);return{c(){r.c(),t=h()},m(e,n){r.m(e,n),s(e,t,n)},p(e,o){i===(i=n(e))&&r?r.p(e,o):(r.d(1),r=i(e),r&&(r.c(),r.m(t.parentNode,t)))},d(e){r.d(e),e&&c(t)}}}function yn(t){let n,i=t[0].length>0&&hn(t);return{c(){i&&i.c(),n=h()},m(e,t){i&&i.m(e,t),s(e,n,t)},p(e,[t]){e[0].length>0?i?i.p(e,t):(i=hn(e),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:e,o:e,d(e){i&&i.d(e),e&&c(n)}}}function wn(e,t,n){let{messages:i}=t;return e.$$set=e=>{"messages"in e&&n(0,i=e.messages)},[i]}class xn extends X{constructor(e){super(),Q(this,e,wn,yn,o,{messages:0})}}
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function $n(e){return null==e}var kn={isNothing:$n,isObject:function(e){return"object"==typeof e&&null!==e},toArray:function(e){return Array.isArray(e)?e:$n(e)?[]:[e]},repeat:function(e,t){var n,i="";for(n=0;n<t;n+=1)i+=e;return i},isNegativeZero:function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},extend:function(e,t){var n,i,r,o;if(t)for(n=0,i=(o=Object.keys(t)).length;n<i;n+=1)e[r=o[n]]=t[r];return e}};function jn(e,t){var n="",i=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+="\n\n"+e.mark.snippet),i+" "+n):i}function On(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=jn(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}On.prototype=Object.create(Error.prototype),On.prototype.constructor=On,On.prototype.toString=function(e){return this.name+": "+jn(this,e)};var An=On;function _n(e,t,n,i,r){var o="",a="",l=Math.floor(r/2)-1;return i-t>l&&(t=i-l+(o=" ... ").length),n-i>l&&(n=i+l-(a=" ...").length),{str:o+e.slice(t,n).replace(/\t/g,"→")+a,pos:i-t+o.length}}function Cn(e,t){return kn.repeat(" ",t-e.length)+e}var En=function(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),"number"!=typeof t.indent&&(t.indent=1),"number"!=typeof t.linesBefore&&(t.linesBefore=3),"number"!=typeof t.linesAfter&&(t.linesAfter=2);for(var n,i=/\r?\n|\r|\0/g,r=[0],o=[],a=-1;n=i.exec(e.buffer);)o.push(n.index),r.push(n.index+n[0].length),e.position<=n.index&&a<0&&(a=r.length-2);a<0&&(a=r.length-1);var l,s,c="",u=Math.min(e.line+t.linesAfter,o.length).toString().length,f=t.maxLength-(t.indent+u+3);for(l=1;l<=t.linesBefore&&!(a-l<0);l++)s=_n(e.buffer,r[a-l],o[a-l],e.position-(r[a]-r[a-l]),f),c=kn.repeat(" ",t.indent)+Cn((e.line-l+1).toString(),u)+" | "+s.str+"\n"+c;for(s=_n(e.buffer,r[a],o[a],e.position,f),c+=kn.repeat(" ",t.indent)+Cn((e.line+1).toString(),u)+" | "+s.str+"\n",c+=kn.repeat("-",t.indent+u+3+s.pos)+"^\n",l=1;l<=t.linesAfter&&!(a+l>=o.length);l++)s=_n(e.buffer,r[a+l],o[a+l],e.position-(r[a]-r[a+l]),f),c+=kn.repeat(" ",t.indent)+Cn((e.line+l+1).toString(),u)+" | "+s.str+"\n";return c.replace(/\n$/,"")},Sn=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],qn=["scalar","sequence","mapping"];var Mn=function(e,t){if(t=t||{},Object.keys(t).forEach((function(t){if(-1===Sn.indexOf(t))throw new An('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=function(e){var t={};return null!==e&&Object.keys(e).forEach((function(n){e[n].forEach((function(e){t[String(e)]=n}))})),t}(t.styleAliases||null),-1===qn.indexOf(this.kind))throw new An('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')};function In(e,t){var n=[];return e[t].forEach((function(e){var t=n.length;n.forEach((function(n,i){n.tag===e.tag&&n.kind===e.kind&&n.multi===e.multi&&(t=i)})),n[t]=e})),n}function Nn(e){return this.extend(e)}Nn.prototype.extend=function(e){var t=[],n=[];if(e instanceof Mn)n.push(e);else if(Array.isArray(e))n=n.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new An("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit))}t.forEach((function(e){if(!(e instanceof Mn))throw new An("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new An("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new An("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),n.forEach((function(e){if(!(e instanceof Mn))throw new An("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var i=Object.create(Nn.prototype);return i.implicit=(this.implicit||[]).concat(t),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=In(i,"implicit"),i.compiledExplicit=In(i,"explicit"),i.compiledTypeMap=function(){var e,t,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function i(e){e.multi?(n.multi[e.kind].push(e),n.multi.fallback.push(e)):n[e.kind][e.tag]=n.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(i);return n}(i.compiledImplicit,i.compiledExplicit),i};var Tn=new Nn({explicit:[new Mn("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),new Mn("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),new Mn("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})]});var Fn=new Mn("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});var Ln=new Mn("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function zn(e){return 48<=e&&e<=55}function Un(e){return 48<=e&&e<=57}var Pn=new Mn("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,i=e.length,r=0,o=!1;if(!i)return!1;if("-"!==(t=e[r])&&"+"!==t||(t=e[++r]),"0"===t){if(r+1===i)return!0;if("b"===(t=e[++r])){for(r++;r<i;r++)if("_"!==(t=e[r])){if("0"!==t&&"1"!==t)return!1;o=!0}return o&&"_"!==t}if("x"===t){for(r++;r<i;r++)if("_"!==(t=e[r])){if(!(48<=(n=e.charCodeAt(r))&&n<=57||65<=n&&n<=70||97<=n&&n<=102))return!1;o=!0}return o&&"_"!==t}if("o"===t){for(r++;r<i;r++)if("_"!==(t=e[r])){if(!zn(e.charCodeAt(r)))return!1;o=!0}return o&&"_"!==t}}if("_"===t)return!1;for(;r<i;r++)if("_"!==(t=e[r])){if(!Un(e.charCodeAt(r)))return!1;o=!0}return!(!o||"_"===t)},construct:function(e){var t,n=e,i=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(i=-1),t=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===t){if("b"===n[1])return i*parseInt(n.slice(2),2);if("x"===n[1])return i*parseInt(n.slice(2),16);if("o"===n[1])return i*parseInt(n.slice(2),8)}return i*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!kn.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Dn=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var Jn=/^[-+]?[0-9]+e/;var Rn=new Mn("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!Dn.test(e)||"_"===e[e.length-1])},construct:function(e){var t,n;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:n*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||kn.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(kn.isNegativeZero(e))return"-0.0";return n=e.toString(10),Jn.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"}),Yn=Tn.extend({implicit:[Fn,Ln,Pn,Rn]}),Wn=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Bn=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");var Kn=new Mn("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==Wn.exec(e)||null!==Bn.exec(e))},construct:function(e){var t,n,i,r,o,a,l,s,c=0,u=null;if(null===(t=Wn.exec(e))&&(t=Bn.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],i=+t[2]-1,r=+t[3],!t[4])return new Date(Date.UTC(n,i,r));if(o=+t[4],a=+t[5],l=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(u=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(u=-u)),s=new Date(Date.UTC(n,i,r,o,a,l,c)),u&&s.setTime(s.getTime()-u),s},instanceOf:Date,represent:function(e){return e.toISOString()}});var Vn=new Mn("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}}),Gn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";var Hn=new Mn("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,i=0,r=e.length,o=Gn;for(n=0;n<r;n++)if(!((t=o.indexOf(e.charAt(n)))>64)){if(t<0)return!1;i+=6}return i%8==0},construct:function(e){var t,n,i=e.replace(/[\r\n=]/g,""),r=i.length,o=Gn,a=0,l=[];for(t=0;t<r;t++)t%4==0&&t&&(l.push(a>>16&255),l.push(a>>8&255),l.push(255&a)),a=a<<6|o.indexOf(i.charAt(t));return 0===(n=r%4*6)?(l.push(a>>16&255),l.push(a>>8&255),l.push(255&a)):18===n?(l.push(a>>10&255),l.push(a>>2&255)):12===n&&l.push(a>>4&255),new Uint8Array(l)},predicate:function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},represent:function(e){var t,n,i="",r=0,o=e.length,a=Gn;for(t=0;t<o;t++)t%3==0&&t&&(i+=a[r>>18&63],i+=a[r>>12&63],i+=a[r>>6&63],i+=a[63&r]),r=(r<<8)+e[t];return 0===(n=o%3)?(i+=a[r>>18&63],i+=a[r>>12&63],i+=a[r>>6&63],i+=a[63&r]):2===n?(i+=a[r>>10&63],i+=a[r>>4&63],i+=a[r<<2&63],i+=a[64]):1===n&&(i+=a[r>>2&63],i+=a[r<<4&63],i+=a[64],i+=a[64]),i}}),Zn=Object.prototype.hasOwnProperty,Qn=Object.prototype.toString;var Xn=new Mn("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,i,r,o,a=[],l=e;for(t=0,n=l.length;t<n;t+=1){if(i=l[t],o=!1,"[object Object]"!==Qn.call(i))return!1;for(r in i)if(Zn.call(i,r)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==a.indexOf(r))return!1;a.push(r)}return!0},construct:function(e){return null!==e?e:[]}}),ei=Object.prototype.toString;var ti=new Mn("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,i,r,o,a=e;for(o=new Array(a.length),t=0,n=a.length;t<n;t+=1){if(i=a[t],"[object Object]"!==ei.call(i))return!1;if(1!==(r=Object.keys(i)).length)return!1;o[t]=[r[0],i[r[0]]]}return!0},construct:function(e){if(null===e)return[];var t,n,i,r,o,a=e;for(o=new Array(a.length),t=0,n=a.length;t<n;t+=1)i=a[t],r=Object.keys(i),o[t]=[r[0],i[r[0]]];return o}}),ni=Object.prototype.hasOwnProperty;var ii=new Mn("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,n=e;for(t in n)if(ni.call(n,t)&&null!==n[t])return!1;return!0},construct:function(e){return null!==e?e:{}}}),ri=Yn.extend({implicit:[Kn,Vn],explicit:[Hn,Xn,ti,ii]}),oi=Object.prototype.hasOwnProperty,ai=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,li=/[\x85\u2028\u2029]/,si=/[,\[\]\{\}]/,ci=/^(?:!|!!|![a-z\-]+!)$/i,ui=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function fi(e){return Object.prototype.toString.call(e)}function di(e){return 10===e||13===e}function pi(e){return 9===e||32===e}function hi(e){return 9===e||32===e||10===e||13===e}function gi(e){return 44===e||91===e||93===e||123===e||125===e}function mi(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function vi(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?" ":76===e?"\u2028":80===e?"\u2029":""}function bi(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var yi=new Array(256),wi=new Array(256),xi=0;xi<256;xi++)yi[xi]=vi(xi)?1:0,wi[xi]=vi(xi);function $i(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||ri,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function ki(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=En(n),new An(t,n)}function ji(e,t){throw ki(e,t)}function Oi(e,t){e.onWarning&&e.onWarning.call(null,ki(e,t))}var Ai={YAML:function(e,t,n){var i,r,o;null!==e.version&&ji(e,"duplication of %YAML directive"),1!==n.length&&ji(e,"YAML directive accepts exactly one argument"),null===(i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&ji(e,"ill-formed argument of the YAML directive"),r=parseInt(i[1],10),o=parseInt(i[2],10),1!==r&&ji(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=o<2,1!==o&&2!==o&&Oi(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var i,r;2!==n.length&&ji(e,"TAG directive accepts exactly two arguments"),i=n[0],r=n[1],ci.test(i)||ji(e,"ill-formed tag handle (first argument) of the TAG directive"),oi.call(e.tagMap,i)&&ji(e,'there is a previously declared suffix for "'+i+'" tag handle'),ui.test(r)||ji(e,"ill-formed tag prefix (second argument) of the TAG directive");try{r=decodeURIComponent(r)}catch(t){ji(e,"tag prefix is malformed: "+r)}e.tagMap[i]=r}};function _i(e,t,n,i){var r,o,a,l;if(t<n){if(l=e.input.slice(t,n),i)for(r=0,o=l.length;r<o;r+=1)9===(a=l.charCodeAt(r))||32<=a&&a<=1114111||ji(e,"expected valid JSON character");else ai.test(l)&&ji(e,"the stream contains non-printable characters");e.result+=l}}function Ci(e,t,n,i){var r,o,a,l;for(kn.isObject(n)||ji(e,"cannot merge mappings; the provided source object is unacceptable"),a=0,l=(r=Object.keys(n)).length;a<l;a+=1)o=r[a],oi.call(t,o)||(t[o]=n[o],i[o]=!0)}function Ei(e,t,n,i,r,o,a,l,s){var c,u;if(Array.isArray(r))for(c=0,u=(r=Array.prototype.slice.call(r)).length;c<u;c+=1)Array.isArray(r[c])&&ji(e,"nested arrays are not supported inside keys"),"object"==typeof r&&"[object Object]"===fi(r[c])&&(r[c]="[object Object]");if("object"==typeof r&&"[object Object]"===fi(r)&&(r="[object Object]"),r=String(r),null===t&&(t={}),"tag:yaml.org,2002:merge"===i)if(Array.isArray(o))for(c=0,u=o.length;c<u;c+=1)Ci(e,t,o[c],n);else Ci(e,t,o,n);else e.json||oi.call(n,r)||!oi.call(t,r)||(e.line=a||e.line,e.lineStart=l||e.lineStart,e.position=s||e.position,ji(e,"duplicated mapping key")),"__proto__"===r?Object.defineProperty(t,r,{configurable:!0,enumerable:!0,writable:!0,value:o}):t[r]=o,delete n[r];return t}function Si(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):ji(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function qi(e,t,n){for(var i=0,r=e.input.charCodeAt(e.position);0!==r;){for(;pi(r);)9===r&&-1===e.firstTabInLine&&(e.firstTabInLine=e.position),r=e.input.charCodeAt(++e.position);if(t&&35===r)do{r=e.input.charCodeAt(++e.position)}while(10!==r&&13!==r&&0!==r);if(!di(r))break;for(Si(e),r=e.input.charCodeAt(e.position),i++,e.lineIndent=0;32===r;)e.lineIndent++,r=e.input.charCodeAt(++e.position)}return-1!==n&&0!==i&&e.lineIndent<n&&Oi(e,"deficient indentation"),i}function Mi(e){var t,n=e.position;return!(45!==(t=e.input.charCodeAt(n))&&46!==t||t!==e.input.charCodeAt(n+1)||t!==e.input.charCodeAt(n+2)||(n+=3,0!==(t=e.input.charCodeAt(n))&&!hi(t)))}function Ii(e,t){1===t?e.result+=" ":t>1&&(e.result+=kn.repeat("\n",t-1))}function Ni(e,t){var n,i,r=e.tag,o=e.anchor,a=[],l=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=a),i=e.input.charCodeAt(e.position);0!==i&&(-1!==e.firstTabInLine&&(e.position=e.firstTabInLine,ji(e,"tab characters must not be used in indentation")),45===i)&&hi(e.input.charCodeAt(e.position+1));)if(l=!0,e.position++,qi(e,!0,-1)&&e.lineIndent<=t)a.push(null),i=e.input.charCodeAt(e.position);else if(n=e.line,Li(e,t,3,!1,!0),a.push(e.result),qi(e,!0,-1),i=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==i)ji(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!l&&(e.tag=r,e.anchor=o,e.kind="sequence",e.result=a,!0)}function Ti(e){var t,n,i,r,o=!1,a=!1;if(33!==(r=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&ji(e,"duplication of a tag property"),60===(r=e.input.charCodeAt(++e.position))?(o=!0,r=e.input.charCodeAt(++e.position)):33===r?(a=!0,n="!!",r=e.input.charCodeAt(++e.position)):n="!",t=e.position,o){do{r=e.input.charCodeAt(++e.position)}while(0!==r&&62!==r);e.position<e.length?(i=e.input.slice(t,e.position),r=e.input.charCodeAt(++e.position)):ji(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==r&&!hi(r);)33===r&&(a?ji(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),ci.test(n)||ji(e,"named tag handle cannot contain such characters"),a=!0,t=e.position+1)),r=e.input.charCodeAt(++e.position);i=e.input.slice(t,e.position),si.test(i)&&ji(e,"tag suffix cannot contain flow indicator characters")}i&&!ui.test(i)&&ji(e,"tag name cannot contain such characters: "+i);try{i=decodeURIComponent(i)}catch(t){ji(e,"tag name is malformed: "+i)}return o?e.tag=i:oi.call(e.tagMap,n)?e.tag=e.tagMap[n]+i:"!"===n?e.tag="!"+i:"!!"===n?e.tag="tag:yaml.org,2002:"+i:ji(e,'undeclared tag handle "'+n+'"'),!0}function Fi(e){var t,n;if(38!==(n=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&ji(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!hi(n)&&!gi(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&ji(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function Li(e,t,n,i,r){var o,a,l,s,c,u,f,d,p,h=1,g=!1,m=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=a=l=4===n||3===n,i&&qi(e,!0,-1)&&(g=!0,e.lineIndent>t?h=1:e.lineIndent===t?h=0:e.lineIndent<t&&(h=-1)),1===h)for(;Ti(e)||Fi(e);)qi(e,!0,-1)?(g=!0,l=o,e.lineIndent>t?h=1:e.lineIndent===t?h=0:e.lineIndent<t&&(h=-1)):l=!1;if(l&&(l=g||r),1!==h&&4!==n||(d=1===n||2===n?t:t+1,p=e.position-e.lineStart,1===h?l&&(Ni(e,p)||function(e,t,n){var i,r,o,a,l,s,c,u=e.tag,f=e.anchor,d={},p=Object.create(null),h=null,g=null,m=null,v=!1,b=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=d),c=e.input.charCodeAt(e.position);0!==c;){if(v||-1===e.firstTabInLine||(e.position=e.firstTabInLine,ji(e,"tab characters must not be used in indentation")),i=e.input.charCodeAt(e.position+1),o=e.line,63!==c&&58!==c||!hi(i)){if(a=e.line,l=e.lineStart,s=e.position,!Li(e,n,2,!1,!0))break;if(e.line===o){for(c=e.input.charCodeAt(e.position);pi(c);)c=e.input.charCodeAt(++e.position);if(58===c)hi(c=e.input.charCodeAt(++e.position))||ji(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(Ei(e,d,p,h,g,null,a,l,s),h=g=m=null),b=!0,v=!1,r=!1,h=e.tag,g=e.result;else{if(!b)return e.tag=u,e.anchor=f,!0;ji(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!b)return e.tag=u,e.anchor=f,!0;ji(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===c?(v&&(Ei(e,d,p,h,g,null,a,l,s),h=g=m=null),b=!0,v=!0,r=!0):v?(v=!1,r=!0):ji(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,c=i;if((e.line===o||e.lineIndent>t)&&(v&&(a=e.line,l=e.lineStart,s=e.position),Li(e,t,4,!0,r)&&(v?g=e.result:m=e.result),v||(Ei(e,d,p,h,g,m,a,l,s),h=g=m=null),qi(e,!0,-1),c=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>t)&&0!==c)ji(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&Ei(e,d,p,h,g,null,a,l,s),b&&(e.tag=u,e.anchor=f,e.kind="mapping",e.result=d),b}(e,p,d))||function(e,t){var n,i,r,o,a,l,s,c,u,f,d,p,h=!0,g=e.tag,m=e.anchor,v=Object.create(null);if(91===(p=e.input.charCodeAt(e.position)))a=93,c=!1,o=[];else{if(123!==p)return!1;a=125,c=!0,o={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=o),p=e.input.charCodeAt(++e.position);0!==p;){if(qi(e,!0,t),(p=e.input.charCodeAt(e.position))===a)return e.position++,e.tag=g,e.anchor=m,e.kind=c?"mapping":"sequence",e.result=o,!0;h?44===p&&ji(e,"expected the node content, but found ','"):ji(e,"missed comma between flow collection entries"),d=null,l=s=!1,63===p&&hi(e.input.charCodeAt(e.position+1))&&(l=s=!0,e.position++,qi(e,!0,t)),n=e.line,i=e.lineStart,r=e.position,Li(e,t,1,!1,!0),f=e.tag,u=e.result,qi(e,!0,t),p=e.input.charCodeAt(e.position),!s&&e.line!==n||58!==p||(l=!0,p=e.input.charCodeAt(++e.position),qi(e,!0,t),Li(e,t,1,!1,!0),d=e.result),c?Ei(e,o,v,f,u,d,n,i,r):l?o.push(Ei(e,null,v,f,u,d,n,i,r)):o.push(u),qi(e,!0,t),44===(p=e.input.charCodeAt(e.position))?(h=!0,p=e.input.charCodeAt(++e.position)):h=!1}ji(e,"unexpected end of the stream within a flow collection")}(e,d)?m=!0:(a&&function(e,t){var n,i,r,o,a,l=1,s=!1,c=!1,u=t,f=0,d=!1;if(124===(o=e.input.charCodeAt(e.position)))i=!1;else{if(62!==o)return!1;i=!0}for(e.kind="scalar",e.result="";0!==o;)if(43===(o=e.input.charCodeAt(++e.position))||45===o)1===l?l=43===o?3:2:ji(e,"repeat of a chomping mode identifier");else{if(!((r=48<=(a=o)&&a<=57?a-48:-1)>=0))break;0===r?ji(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?ji(e,"repeat of an indentation width identifier"):(u=t+r-1,c=!0)}if(pi(o)){do{o=e.input.charCodeAt(++e.position)}while(pi(o));if(35===o)do{o=e.input.charCodeAt(++e.position)}while(!di(o)&&0!==o)}for(;0!==o;){for(Si(e),e.lineIndent=0,o=e.input.charCodeAt(e.position);(!c||e.lineIndent<u)&&32===o;)e.lineIndent++,o=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>u&&(u=e.lineIndent),di(o))f++;else{if(e.lineIndent<u){3===l?e.result+=kn.repeat("\n",s?1+f:f):1===l&&s&&(e.result+="\n");break}for(i?pi(o)?(d=!0,e.result+=kn.repeat("\n",s?1+f:f)):d?(d=!1,e.result+=kn.repeat("\n",f+1)):0===f?s&&(e.result+=" "):e.result+=kn.repeat("\n",f):e.result+=kn.repeat("\n",s?1+f:f),s=!0,c=!0,f=0,n=e.position;!di(o)&&0!==o;)o=e.input.charCodeAt(++e.position);_i(e,n,e.position,!1)}}return!0}(e,d)||function(e,t){var n,i,r;if(39!==(n=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,i=r=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(_i(e,i,e.position,!0),39!==(n=e.input.charCodeAt(++e.position)))return!0;i=e.position,e.position++,r=e.position}else di(n)?(_i(e,i,r,!0),Ii(e,qi(e,!1,t)),i=r=e.position):e.position===e.lineStart&&Mi(e)?ji(e,"unexpected end of the document within a single quoted scalar"):(e.position++,r=e.position);ji(e,"unexpected end of the stream within a single quoted scalar")}(e,d)||function(e,t){var n,i,r,o,a,l,s;if(34!==(l=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;0!==(l=e.input.charCodeAt(e.position));){if(34===l)return _i(e,n,e.position,!0),e.position++,!0;if(92===l){if(_i(e,n,e.position,!0),di(l=e.input.charCodeAt(++e.position)))qi(e,!1,t);else if(l<256&&yi[l])e.result+=wi[l],e.position++;else if((a=120===(s=l)?2:117===s?4:85===s?8:0)>0){for(r=a,o=0;r>0;r--)(a=mi(l=e.input.charCodeAt(++e.position)))>=0?o=(o<<4)+a:ji(e,"expected hexadecimal character");e.result+=bi(o),e.position++}else ji(e,"unknown escape sequence");n=i=e.position}else di(l)?(_i(e,n,i,!0),Ii(e,qi(e,!1,t)),n=i=e.position):e.position===e.lineStart&&Mi(e)?ji(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}ji(e,"unexpected end of the stream within a double quoted scalar")}(e,d)?m=!0:!function(e){var t,n,i;if(42!==(i=e.input.charCodeAt(e.position)))return!1;for(i=e.input.charCodeAt(++e.position),t=e.position;0!==i&&!hi(i)&&!gi(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&ji(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),oi.call(e.anchorMap,n)||ji(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],qi(e,!0,-1),!0}(e)?function(e,t,n){var i,r,o,a,l,s,c,u,f=e.kind,d=e.result;if(hi(u=e.input.charCodeAt(e.position))||gi(u)||35===u||38===u||42===u||33===u||124===u||62===u||39===u||34===u||37===u||64===u||96===u)return!1;if((63===u||45===u)&&(hi(i=e.input.charCodeAt(e.position+1))||n&&gi(i)))return!1;for(e.kind="scalar",e.result="",r=o=e.position,a=!1;0!==u;){if(58===u){if(hi(i=e.input.charCodeAt(e.position+1))||n&&gi(i))break}else if(35===u){if(hi(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&Mi(e)||n&&gi(u))break;if(di(u)){if(l=e.line,s=e.lineStart,c=e.lineIndent,qi(e,!1,-1),e.lineIndent>=t){a=!0,u=e.input.charCodeAt(e.position);continue}e.position=o,e.line=l,e.lineStart=s,e.lineIndent=c;break}}a&&(_i(e,r,o,!1),Ii(e,e.line-l),r=o=e.position,a=!1),pi(u)||(o=e.position+1),u=e.input.charCodeAt(++e.position)}return _i(e,r,o,!1),!!e.result||(e.kind=f,e.result=d,!1)}(e,d,1===n)&&(m=!0,null===e.tag&&(e.tag="?")):(m=!0,null===e.tag&&null===e.anchor||ji(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===h&&(m=l&&Ni(e,p))),null===e.tag)null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);else if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&ji(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),s=0,c=e.implicitTypes.length;s<c;s+=1)if((f=e.implicitTypes[s]).resolve(e.result)){e.result=f.construct(e.result),e.tag=f.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else if("!"!==e.tag){if(oi.call(e.typeMap[e.kind||"fallback"],e.tag))f=e.typeMap[e.kind||"fallback"][e.tag];else for(f=null,s=0,c=(u=e.typeMap.multi[e.kind||"fallback"]).length;s<c;s+=1)if(e.tag.slice(0,u[s].tag.length)===u[s].tag){f=u[s];break}f||ji(e,"unknown tag !<"+e.tag+">"),null!==e.result&&f.kind!==e.kind&&ji(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+f.kind+'", not "'+e.kind+'"'),f.resolve(e.result,e.tag)?(e.result=f.construct(e.result,e.tag),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):ji(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||m}function zi(e){var t,n,i,r,o=e.position,a=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);0!==(r=e.input.charCodeAt(e.position))&&(qi(e,!0,-1),r=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==r));){for(a=!0,r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!hi(r);)r=e.input.charCodeAt(++e.position);for(i=[],(n=e.input.slice(t,e.position)).length<1&&ji(e,"directive name must not be less than one character in length");0!==r;){for(;pi(r);)r=e.input.charCodeAt(++e.position);if(35===r){do{r=e.input.charCodeAt(++e.position)}while(0!==r&&!di(r));break}if(di(r))break;for(t=e.position;0!==r&&!hi(r);)r=e.input.charCodeAt(++e.position);i.push(e.input.slice(t,e.position))}0!==r&&Si(e),oi.call(Ai,n)?Ai[n](e,n,i):Oi(e,'unknown document directive "'+n+'"')}qi(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,qi(e,!0,-1)):a&&ji(e,"directives end mark is expected"),Li(e,e.lineIndent-1,4,!1,!0),qi(e,!0,-1),e.checkLineBreaks&&li.test(e.input.slice(o,e.position))&&Oi(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Mi(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,qi(e,!0,-1)):e.position<e.length-1&&ji(e,"end of the stream or a document separator is expected")}function Ui(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new $i(e,t),i=e.indexOf("\0");for(-1!==i&&(n.position=i,ji(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)zi(n);return n.documents}var Pi={loadAll:function(e,t,n){null!==t&&"object"==typeof t&&void 0===n&&(n=t,t=null);var i=Ui(e,n);if("function"!=typeof t)return i;for(var r=0,o=i.length;r<o;r+=1)t(i[r])},load:function(e,t){var n=Ui(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new An("expected a single document in the stream, but found more")}}},Di=Object.prototype.toString,Ji=Object.prototype.hasOwnProperty,Ri=65279,Yi={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},Wi=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Bi=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Ki(e){var t,n,i;if(t=e.toString(16).toUpperCase(),e<=255)n="x",i=2;else if(e<=65535)n="u",i=4;else{if(!(e<=4294967295))throw new An("code point within a string may not be greater than 0xFFFFFFFF");n="U",i=8}return"\\"+n+kn.repeat("0",i-t.length)+t}function Vi(e){this.schema=e.schema||ri,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=kn.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var n,i,r,o,a,l,s;if(null===t)return{};for(n={},r=0,o=(i=Object.keys(t)).length;r<o;r+=1)a=i[r],l=String(t[a]),"!!"===a.slice(0,2)&&(a="tag:yaml.org,2002:"+a.slice(2)),(s=e.compiledTypeMap.fallback[a])&&Ji.call(s.styleAliases,l)&&(l=s.styleAliases[l]),n[a]=l;return n}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType='"'===e.quotingType?2:1,this.forceQuotes=e.forceQuotes||!1,this.replacer="function"==typeof e.replacer?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Gi(e,t){for(var n,i=kn.repeat(" ",t),r=0,o=-1,a="",l=e.length;r<l;)-1===(o=e.indexOf("\n",r))?(n=e.slice(r),r=l):(n=e.slice(r,o+1),r=o+1),n.length&&"\n"!==n&&(a+=i),a+=n;return a}function Hi(e,t){return"\n"+kn.repeat(" ",e.indent*t)}function Zi(e){return 32===e||9===e}function Qi(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&e!==Ri||65536<=e&&e<=1114111}function Xi(e){return Qi(e)&&e!==Ri&&13!==e&&10!==e}function er(e,t,n){var i=Xi(e),r=i&&!Zi(e);return(n?i:i&&44!==e&&91!==e&&93!==e&&123!==e&&125!==e)&&35!==e&&!(58===t&&!r)||Xi(t)&&!Zi(t)&&35===e||58===t&&r}function tr(e,t){var n,i=e.charCodeAt(t);return i>=55296&&i<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(i-55296)+n-56320+65536:i}function nr(e){return/^\n* /.test(e)}function ir(e,t,n,i,r,o,a,l){var s,c,u=0,f=null,d=!1,p=!1,h=-1!==i,g=-1,m=Qi(c=tr(e,0))&&c!==Ri&&!Zi(c)&&45!==c&&63!==c&&58!==c&&44!==c&&91!==c&&93!==c&&123!==c&&125!==c&&35!==c&&38!==c&&42!==c&&33!==c&&124!==c&&61!==c&&62!==c&&39!==c&&34!==c&&37!==c&&64!==c&&96!==c&&function(e){return!Zi(e)&&58!==e}(tr(e,e.length-1));if(t||a)for(s=0;s<e.length;u>=65536?s+=2:s++){if(!Qi(u=tr(e,s)))return 5;m=m&&er(u,f,l),f=u}else{for(s=0;s<e.length;u>=65536?s+=2:s++){if(10===(u=tr(e,s)))d=!0,h&&(p=p||s-g-1>i&&" "!==e[g+1],g=s);else if(!Qi(u))return 5;m=m&&er(u,f,l),f=u}p=p||h&&s-g-1>i&&" "!==e[g+1]}return d||p?n>9&&nr(e)?5:a?2===o?5:2:p?4:3:!m||a||r(e)?2===o?5:2:1}function rr(e,t,n,i,r){e.dump=function(){if(0===t.length)return 2===e.quotingType?'""':"''";if(!e.noCompatMode&&(-1!==Wi.indexOf(t)||Bi.test(t)))return 2===e.quotingType?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,n),a=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),l=i||e.flowLevel>-1&&n>=e.flowLevel;switch(ir(t,l,e.indent,a,(function(t){return function(e,t){var n,i;for(n=0,i=e.implicitTypes.length;n<i;n+=1)if(e.implicitTypes[n].resolve(t))return!0;return!1}(e,t)}),e.quotingType,e.forceQuotes&&!i,r)){case 1:return t;case 2:return"'"+t.replace(/'/g,"''")+"'";case 3:return"|"+or(t,e.indent)+ar(Gi(t,o));case 4:return">"+or(t,e.indent)+ar(Gi(function(e,t){var n,i,r=/(\n+)([^\n]*)/g,o=(l=e.indexOf("\n"),l=-1!==l?l:e.length,r.lastIndex=l,lr(e.slice(0,l),t)),a="\n"===e[0]||" "===e[0];var l;for(;i=r.exec(e);){var s=i[1],c=i[2];n=" "===c[0],o+=s+(a||n||""===c?"":"\n")+lr(c,t),a=n}return o}(t,a),o));case 5:return'"'+function(e){for(var t,n="",i=0,r=0;r<e.length;i>=65536?r+=2:r++)i=tr(e,r),!(t=Yi[i])&&Qi(i)?(n+=e[r],i>=65536&&(n+=e[r+1])):n+=t||Ki(i);return n}(t)+'"';default:throw new An("impossible error: invalid scalar style")}}()}function or(e,t){var n=nr(e)?String(t):"",i="\n"===e[e.length-1];return n+(i&&("\n"===e[e.length-2]||"\n"===e)?"+":i?"":"-")+"\n"}function ar(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function lr(e,t){if(""===e||" "===e[0])return e;for(var n,i,r=/ [^ ]/g,o=0,a=0,l=0,s="";n=r.exec(e);)(l=n.index)-o>t&&(i=a>o?a:l,s+="\n"+e.slice(o,i),o=i+1),a=l;return s+="\n",e.length-o>t&&a>o?s+=e.slice(o,a)+"\n"+e.slice(a+1):s+=e.slice(o),s.slice(1)}function sr(e,t,n,i){var r,o,a,l="",s=e.tag;for(r=0,o=n.length;r<o;r+=1)a=n[r],e.replacer&&(a=e.replacer.call(n,String(r),a)),(ur(e,t+1,a,!0,!0,!1,!0)||void 0===a&&ur(e,t+1,null,!0,!0,!1,!0))&&(i&&""===l||(l+=Hi(e,t)),e.dump&&10===e.dump.charCodeAt(0)?l+="-":l+="- ",l+=e.dump);e.tag=s,e.dump=l||"[]"}function cr(e,t,n){var i,r,o,a,l,s;for(o=0,a=(r=n?e.explicitTypes:e.implicitTypes).length;o<a;o+=1)if(((l=r[o]).instanceOf||l.predicate)&&(!l.instanceOf||"object"==typeof t&&t instanceof l.instanceOf)&&(!l.predicate||l.predicate(t))){if(n?l.multi&&l.representName?e.tag=l.representName(t):e.tag=l.tag:e.tag="?",l.represent){if(s=e.styleMap[l.tag]||l.defaultStyle,"[object Function]"===Di.call(l.represent))i=l.represent(t,s);else{if(!Ji.call(l.represent,s))throw new An("!<"+l.tag+'> tag resolver accepts not "'+s+'" style');i=l.represent[s](t,s)}e.dump=i}return!0}return!1}function ur(e,t,n,i,r,o,a){e.tag=null,e.dump=n,cr(e,n,!1)||cr(e,n,!0);var l,s=Di.call(e.dump),c=i;i&&(i=e.flowLevel<0||e.flowLevel>t);var u,f,d="[object Object]"===s||"[object Array]"===s;if(d&&(f=-1!==(u=e.duplicates.indexOf(n))),(null!==e.tag&&"?"!==e.tag||f||2!==e.indent&&t>0)&&(r=!1),f&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(d&&f&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),"[object Object]"===s)i&&0!==Object.keys(e.dump).length?(!function(e,t,n,i){var r,o,a,l,s,c,u="",f=e.tag,d=Object.keys(n);if(!0===e.sortKeys)d.sort();else if("function"==typeof e.sortKeys)d.sort(e.sortKeys);else if(e.sortKeys)throw new An("sortKeys must be a boolean or a function");for(r=0,o=d.length;r<o;r+=1)c="",i&&""===u||(c+=Hi(e,t)),l=n[a=d[r]],e.replacer&&(l=e.replacer.call(n,a,l)),ur(e,t+1,a,!0,!0,!0)&&((s=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&10===e.dump.charCodeAt(0)?c+="?":c+="? "),c+=e.dump,s&&(c+=Hi(e,t)),ur(e,t+1,l,!0,s)&&(e.dump&&10===e.dump.charCodeAt(0)?c+=":":c+=": ",u+=c+=e.dump));e.tag=f,e.dump=u||"{}"}(e,t,e.dump,r),f&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,n){var i,r,o,a,l,s="",c=e.tag,u=Object.keys(n);for(i=0,r=u.length;i<r;i+=1)l="",""!==s&&(l+=", "),e.condenseFlow&&(l+='"'),a=n[o=u[i]],e.replacer&&(a=e.replacer.call(n,o,a)),ur(e,t,o,!1,!1)&&(e.dump.length>1024&&(l+="? "),l+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),ur(e,t,a,!1,!1)&&(s+=l+=e.dump));e.tag=c,e.dump="{"+s+"}"}(e,t,e.dump),f&&(e.dump="&ref_"+u+" "+e.dump));else if("[object Array]"===s)i&&0!==e.dump.length?(e.noArrayIndent&&!a&&t>0?sr(e,t-1,e.dump,r):sr(e,t,e.dump,r),f&&(e.dump="&ref_"+u+e.dump)):(!function(e,t,n){var i,r,o,a="",l=e.tag;for(i=0,r=n.length;i<r;i+=1)o=n[i],e.replacer&&(o=e.replacer.call(n,String(i),o)),(ur(e,t,o,!1,!1)||void 0===o&&ur(e,t,null,!1,!1))&&(""!==a&&(a+=","+(e.condenseFlow?"":" ")),a+=e.dump);e.tag=l,e.dump="["+a+"]"}(e,t,e.dump),f&&(e.dump="&ref_"+u+" "+e.dump));else{if("[object String]"!==s){if("[object Undefined]"===s)return!1;if(e.skipInvalid)return!1;throw new An("unacceptable kind of an object to dump "+s)}"?"!==e.tag&&rr(e,e.dump,t,o,c)}null!==e.tag&&"?"!==e.tag&&(l=encodeURI("!"===e.tag[0]?e.tag.slice(1):e.tag).replace(/!/g,"%21"),l="!"===e.tag[0]?"!"+l:"tag:yaml.org,2002:"===l.slice(0,18)?"!!"+l.slice(18):"!<"+l+">",e.dump=l+" "+e.dump)}return!0}function fr(e,t){var n,i,r=[],o=[];for(dr(e,r,o),n=0,i=o.length;n<i;n+=1)t.duplicates.push(r[o[n]]);t.usedDuplicates=new Array(i)}function dr(e,t,n){var i,r,o;if(null!==e&&"object"==typeof e)if(-1!==(r=t.indexOf(e)))-1===n.indexOf(r)&&n.push(r);else if(t.push(e),Array.isArray(e))for(r=0,o=e.length;r<o;r+=1)dr(e[r],t,n);else for(r=0,o=(i=Object.keys(e)).length;r<o;r+=1)dr(e[i[r]],t,n)}var pr=Pi.load,hr={dump:function(e,t){var n=new Vi(t=t||{});n.noRefs||fr(e,n);var i=e;return n.replacer&&(i=n.replacer.call({"":i},"",i)),ur(n,0,i,!0,!0)?n.dump+"\n":""}}.dump;function gr(e){return hr(e,{skipInvalid:!0,noRefs:!0})}const mr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function vr(e,t,n){const i=e.slice();return i[13]=t[n],i}function br(e){let t,n,i=e[0].description+"";return{c(){t=u("div"),n=d(i)},m(e,i){s(e,t,i),l(t,n)},p(e,t){1&t&&i!==(i=e[0].description+"")&&b(n,i)},d(e){e&&c(t)}}}function yr(e,t){let n,i,r;function o(...e){return t[10](t[13],...e)}return i=new nn({props:{columns:t[4],row:t[13],selected:t[2].has(t[13]._i),onSelect:o}}),{key:e,first:null,c(){n=h(),V(i.$$.fragment),this.first=n},m(e,t){s(e,n,t),G(i,e,t),r=!0},p(e,n){t=e;const r={};8&n&&(r.row=t[13]),12&n&&(r.selected=t[2].has(t[13]._i)),8&n&&(r.onSelect=o),i.$set(r)},i(e){r||(D(i.$$.fragment,e),r=!0)},o(e){J(i.$$.fragment,e),r=!1},d(e){e&&c(n),H(i,e)}}}function wr(e){let t,n,i;return{c(){t=u("div"),n=u("textarea"),v(n,"class","w-full h-full focus:outline-none"),n.readOnly=!0,w(n,"resize","none"),n.value=i=fe(e[0]),v(t,"class","plot-table-json rounded border border-gray-200 text-xs overflow-scroll")},m(e,i){s(e,t,i),l(t,n)},p(e,t){1&t&&i!==(i=fe(e[0]))&&(n.value=i)},d(e){e&&c(t)}}}function xr(e){let t,n,i,r,o,a;return{c(){t=u("div"),t.textContent="Debug:",n=p(),i=u("textarea"),o=p(),a=u("textarea"),v(i,"class","block focus:outline-none rounded border border-gray-200 text-xs overflow-scroll mt-4"),i.readOnly=!0,w(i,"resize","none"),w(i,"width","20rem"),w(i,"height","20rem"),i.value=r=gr(e[1]),v(a,"class","block focus:outline-none rounded border border-gray-200 text-xs overflow-scroll mt-4"),a.readOnly=!0,w(a,"resize","none"),w(a,"width","20rem"),w(a,"height","20rem"),a.value=gr(e[4])},m(e,r){s(e,t,r),s(e,n,r),s(e,i,r),s(e,o,r),s(e,a,r)},p(e,t){2&t&&r!==(r=gr(e[1]))&&(i.value=r)},d(e){e&&c(t),e&&c(n),e&&c(i),e&&c(o),e&&c(a)}}}function $r(e){let t,n,i,r,o,a,f,d,m,b,y,w,x,$,k,j,O,_,C,E=[],S=new Map,q=e[0].description&&br(e);function I(t){e[8](t)}let N={};function T(t){e[9](t)}void 0!==e[1]&&(N.state=e[1]),o=new dn({props:N}),A.push((()=>K(o,"state",I)));let F={columns:e[4]};void 0!==e[1]&&(F.state=e[1]),m=new Gt({props:F}),A.push((()=>K(m,"state",T)));let L=e[3];const z=e=>e[13]._i;for(let t=0;t<L.length;t+=1){let n=vr(e,L,t),i=z(n);S.set(i,E[t]=yr(i,n))}let R=e[1].show_json&&wr(e);$=new xn({props:{messages:e[5]}});let Y=e[0].debug&&xr(e);return{c(){q&&q.c(),t=p(),n=u("table"),i=u("tr"),r=u("td"),V(o.$$.fragment),d=p(),V(m.$$.fragment),y=p();for(let e=0;e<E.length;e+=1)E[e].c();w=p(),R&&R.c(),x=p(),V($.$$.fragment),k=p(),Y&&Y.c(),j=h(),v(r,"colspan",e[4].length),v(i,"class",f="plot-table-toolbar "+(!e[1].show_controls&&"invisible")+" "),v(n,"class","plot-table font-mono")},m(a,c){q&&q.m(a,c),s(a,t,c),s(a,n,c),l(n,i),l(i,r),G(o,r,null),l(n,d),G(m,n,null),l(n,y);for(let e=0;e<E.length;e+=1)E[e].m(n,null);l(n,w),R&&R.m(n,null),s(a,x,c),G($,a,c),s(a,k,c),Y&&Y.m(a,c),s(a,j,c),O=!0,_||(C=g(n,"click",e[11]),_=!0)},p(e,[r]){e[0].description?q?q.p(e,r):(q=br(e),q.c(),q.m(t.parentNode,t)):q&&(q.d(1),q=null);const l={};!a&&2&r&&(a=!0,l.state=e[1],M((()=>a=!1))),o.$set(l),(!O||2&r&&f!==(f="plot-table-toolbar "+(!e[1].show_controls&&"invisible")+" "))&&v(i,"class",f);const s={};!b&&2&r&&(b=!0,s.state=e[1],M((()=>b=!1))),m.$set(s),92&r&&(L=e[3],U(),E=B(E,r,z,1,e,L,S,n,W,yr,w,vr),P()),e[1].show_json?R?R.p(e,r):(R=wr(e),R.c(),R.m(n,null)):R&&(R.d(1),R=null),e[0].debug?Y?Y.p(e,r):(Y=xr(e),Y.c(),Y.m(j.parentNode,j)):Y&&(Y.d(1),Y=null)},i(e){if(!O){D(o.$$.fragment,e),D(m.$$.fragment,e);for(let e=0;e<L.length;e+=1)D(E[e]);D($.$$.fragment,e),O=!0}},o(e){J(o.$$.fragment,e),J(m.$$.fragment,e);for(let e=0;e<E.length;e+=1)J(E[e]);J($.$$.fragment,e),O=!1},d(e){q&&q.d(e),e&&c(t),e&&c(n),H(o),H(m);for(let e=0;e<E.length;e+=1)E[e].d();R&&R.d(),e&&c(x),H($,e),e&&c(k),Y&&Y.d(e),e&&c(j),_=!1,C()}}}function kr(e,t,n){let i,r,{options:o}=t,{columns:a,rows:l,messages:s}=jt(o,!0),c={filter:o.filter||"",filters:wt(a,o.filters),sortable:0!=o.sortable,sort:o.sort,wsort:o.wsort,show_json:!1,show_controls:!!o.show_controls},u=new Set;function f(e,t){!function(e,t,n,i){const r=new Set(n);if(e.metaKey)r.has(t)?r.delete(t):r.add(t);else{const e=r.has(t)&&1==r.size;r.clear(),e||r.add(t)}i(r)}(e,t,u,(e=>n(2,u=e)))}return e.$$set=e=>{"options"in e&&n(0,o=e.options)},e.$$.update=()=>{2&e.$$.dirty&&n(7,i=_t(a,l,c)),130&e.$$.dirty&&n(3,r=function(e,t,{sort:n,wsort:i}){return n&&n.length>0?mt(e,t,n):i&&he(i)>0?vt(e,t,i):t}(a,i,c))},[o,c,u,r,a,s,f,i,function(e){c=e,n(1,c)},function(e){c=e,n(1,c)},(e,t)=>f(t,e._i),()=>n(1,c.show_controls=!0,c)]}se("escapeHtml",(()=>{var e;ce.equal(null==(e="<div>")?"":(""+e).replace(/[&<>'"]/g,(function(e){return mr[e]})),"&lt;div&gt;")}));class jr extends X{constructor(e){super(),Q(this,e,kr,$r,o,{options:0})}}function Or(t){let n,i,r,o;return{c(){n=u("div"),i=u("span"),i.textContent="Error",r=d(" - can't load "),o=d(t[0]),v(i,"class","text-red-600 font-bold")},m(e,t){s(e,n,t),l(n,i),l(n,r),l(n,o)},p(e,t){1&t&&b(o,e[0])},i:e,o:e,d(e){e&&c(n)}}}function Ar(e){let t,n,i,r,o,a=e[2](e[0],e[3])+"";return r=new jr({props:{options:e[3]}}),{c(){t=u("h1"),n=d(a),i=p(),V(r.$$.fragment),v(t,"class","text-2xl mb-4")},m(e,a){s(e,t,a),l(t,n),s(e,i,a),G(r,e,a),o=!0},p(e,t){(!o||3&t)&&a!==(a=e[2](e[0],e[3])+"")&&b(n,a);const i={};2&t&&(i.options=e[3]),r.$set(i)},i(e){o||(D(r.$$.fragment,e),o=!0)},o(e){J(r.$$.fragment,e),o=!1},d(e){e&&c(t),e&&c(i),H(r,e)}}}function _r(t){let n;return{c(){n=u("div"),n.textContent="Loading..."},m(e,t){s(e,n,t)},p:e,i:e,o:e,d(e){e&&c(n)}}}function Cr(e){let t,n,i,r={ctx:e,current:null,token:null,hasCatch:!0,pending:_r,then:Ar,catch:Or,value:3,error:4,blocks:[,,,]};return R(n=e[1],r),{c(){t=u("div"),r.block.c(),v(t,"class","mx-5 my-2")},m(e,n){s(e,t,n),r.block.m(t,r.anchor=null),r.mount=()=>t,r.anchor=null,i=!0},p(t,[i]){e=t,r.ctx=e,2&i&&n!==(n=e[1])&&R(n,r)||function(e,t,n){const i=t.slice(),{resolved:r}=e;e.current===e.then&&(i[e.value]=r),e.current===e.catch&&(i[e.error]=r),e.block.p(i,n)}(r,e,i)},i(e){i||(D(r.block),i=!0)},o(e){for(let e=0;e<3;e+=1){J(r.blocks[e])}i=!1},d(e){e&&c(t),r.block.d(),r.token=null,r=null}}}function Er(e,t,n){let{path:i}=t,{datap:r}=t;function o(e,t){return t.title||t.id||function(e,t){if(void 0===t){if(e.length<1)throw new Error("can't get last elements from empty list");return e[e.length-1]}if(e.length<t)throw new Error(`can't get last ${t} elements from list of length ${e.length}`);return e.slice(e.length-t,e.length)}(e.split("/")).replace(/\.[^\.]+$/,"")}return e.$$set=e=>{"path"in e&&n(0,i=e.path),"datap"in e&&n(1,r=e.datap)},e.$$.update=()=>{3&e.$$.dirty&&r.then((e=>document.title=o(i,e)))},[i,r,o]}const Sr=["width","height","config"];function qr(e){for(const t in e)if(Sr.indexOf(t)<0)throw new Error(`invalid property '${t}'`);return to("width",e.width,["number","undefined"]),to("height",e.height,["number","undefined"]),e}const Mr=["linear","linear-closed","step","step-before","step-after","basis","basis-open","basis-closed","cardinal","cardinal-open","cardinal-closed","bundle","monotone"];const Ir=["point","circle","line","area","bar","rect","rule","square","text","tick","trail"];function Nr(e){if(Ir.indexOf(e)<0)throw new Error(`invalid mark '${e}', available are ${Ir.join(", ")}`);return e}const Tr=["mark","color","size","point","interpolate","opacity","thickness","vega"];function Fr(e){for(const t in e)if(Tr.indexOf(t)<0)throw new Error(`unknown mark property '${t}', available are ${Tr.join(", ")}`);const{mark:t,color:n,size:i,point:r,interpolate:o,opacity:a,thickness:l,vega:s}=e;return to("color",n,["string","undefined"]),to("size",i,["number","undefined"]),to("point",r,["boolean","undefined"]),o&&function(e){if(Mr.indexOf(e)<0)throw new Error(`invalid interpolate '${e}', available are ${Mr.join(", ")}`)}(o),to("opacity",a,["number","undefined"]),to("thickness",l,["number","undefined"]),to("vega",s,["object","undefined"]),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({type:Nr(t)},void 0!==n?{color:n}:{}),void 0!==i?{size:i}:{}),void 0!==r?{point:r}:{}),void 0!==o?{interpolate:o}:{}),void 0!==a?{opacity:a}:{}),void 0!==l?{thickness:l}:{}),void 0!==s?s:{})}const Lr=["nominal","ordinal","quantitative","temporal"];const zr=["x","y"];const Ur=["count","valid","missing","distinct","sum","mean","average","variance","variancep","stdev","stdevp","stderr","median","q1","q3","ci0","ci1","min","max","argmin","argmax","product"];const Pr=["x","y","x2","y2","xError","yError","xError2","yError2","longitude","latitude","longitude2","latitude2","color","opacity","fillOpacity","strokeOpacity","shape","size","strokeWidth","text","tooltip","href","detail","key","order"],Dr=["linear","pow","sqrt","symlog","log","time","utc","ordinal","band","point","bin-ordinal","quantile","quantize","threshold"];const Jr=["year","yearquarter","yearquartermonth","yearmonth","yearmonthdate","yearmonthdatehours","yearmonthdatehoursminutes","yearmonthdatehoursminutesseconds","quarter","quartermonth","month","monthdate","date","day","hours","hoursminutes","hoursminutesseconds","minutes","minutesseconds","seconds","secondsmilliseconds","milliseconds"];function Rr(e){if(Jr.indexOf(e)<0)throw new Error(`invalid time unit '${e}', available are ${Jr.join(", ")}`);return e}function Yr(e){if(to("bin",e,["string","number","boolean","undefined"]),"string"==typeof e&&"binned"!=e)throw new Error("bin should have type of \"boolean | number | 'binned'\"");return"boolean"==typeof e||"string"==typeof e?e:{base:e,maxbins:e}}const Wr=["type","aggregate","legend","title","labels","time_unit","timeUnit","bin","zero","domain","range","scale","value","override_value","scheme","reverse","vega"];function Br(e){const t=[];for(const n in e)if(Wr.indexOf(n)<0){if(Pr.indexOf(n)<0)throw new Error(`unknown encoding property '${n}', available are ${Pr.join(", ")}, ${Wr.join(", ")}`);t.push(n)}if(0==t.length)throw new Error(`encoding channel not specified, please specify one of ${Pr.join(", ")}`);if(t.length>1)throw new Error(`only one channel allowed in the same encoding, leave only one of ${t.join(", ")}`);e.type&&function(e){if(Lr.indexOf(e)<0)throw new Error(`invalid field type '${e}', available are ${Lr.join(", ")}`)}(e.type),e.aggregate&&function(e){if(Ur.indexOf(e)<0)throw new Error(`invalid aggregate '${e}', available are ${Ur.join(", ")}`)}(e.aggregate),to("legend",e.legend,["string","boolean","undefined"]),to("title",e.title,["string","boolean","undefined"]),to("labels",e.labels,["boolean","undefined"]),e.time_unit&&Rr(e.time_unit),e.timeUnit&&Rr(e.timeUnit),e.bin&&Yr(e.bin),to("zero",e.zero,["boolean","undefined"]),e.scale&&function(e){if(Dr.indexOf(e)<0)throw new Error(`invalid scale type '${e}', available are ${Dr.join(", ")}`)}(e.scale),e.domain&&function(e){e.map((e=>(to("scale domain",e,["number","string","boolean"]),e)))}(e.domain),e.range&&function(e){"string"==typeof e?to("scale range",e,["string"]):e.map((e=>(to("scale domain",e,["number","string"]),e)))}(e.range),to("scheme",e.scheme,["string","undefined"]),to("reverse",e.reverse,["boolean","undefined"]),to("vega",e.vega,["object","undefined"]);const{type:n,title:i,labels:r,aggregate:o,legend:a,timeUnit:l,time_unit:s,bin:c,zero:u,domain:f,range:d,scale:p,value:h,scheme:g,reverse:m,vega:v,override_value:b}=e,y=Pr.find((t=>t in e));if(!y)throw new Error(`Channel not found in ${JSON.stringify(e)}!`);const w=e[y],x=Object.assign(Object.assign(Object.assign({},void 0!==v&&"axis"in v?v.axis:{}),i&&"string"==typeof i?{title:i}:i?{}:{title:null}),void 0!==r?{labels:r}:{}),$=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},void 0!==v&&"scale"in v?v.scale:{}),void 0!==p?{type:p}:{}),void 0!==f?{nice:!1}:{}),void 0!==u?{zero:u}:{}),void 0!==f?{domain:f}:{}),void 0!==d?{range:d}:{}),void 0!==g?{scheme:g}:{}),void 0!==m?{reverse:m}:{});let k,j=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},void 0!==v?v:{}),""!==w?{field:w}:{}),{type:n||"quantitative"}),void 0!==o?{aggregate:o}:{}),void 0!==a?{legend:a}:{legend:!1}),void 0!==l?{timeUnit:l}:{}),void 0!==s?{timeUnit:s}:{}),Object.keys(x).length>0?{axis:x}:{}),Object.keys($).length>0?{scale:$}:{}),void 0!==c?{bin:Yr(c)}:{});if(h){const e=function(e,t,n){const i=e=>{if(void 0===e)throw new Error("encoding value shouldn't be undefined");return to("encoding value",e,["number","string","boolean"]),e};if(Array.isArray(e)){if("condition"in n)throw new Error("Conditional value can't be used with condition!");if(2==e.length){const[t,r]=e;return[Object.assign(Object.assign({},n),{condition:{test:t,value:i(r)}}),void 0]}if(3==e.length){const[t,r,o]=e;return[Object.assign(Object.assign({},n),{value:i(o),condition:{test:t,value:i(r)}}),void 0]}throw new Error("encoding value should be a simple value or array with 2 ['datum.value > 0', 'green'] or 3 elements ['datum.value > 0', 1, -1]")}if(zr.indexOf(t)>=0){if(""!=n.field&&void 0!==n.field&&null!==n.field)throw new Error(`value on ${zr.join(", ")} channels cannot be used with 'field'`);const t=[{explicit_value:i(e)}];return[Object.assign(Object.assign({},n),{field:"explicit_value"}),t]}return[Object.assign(Object.assign({},n),{value:i(e)}),void 0]}(h,y,j);j=e[0],k=e[1]}return[y,j,k]}const Kr=["calculate","as"];function Vr(e){for(const t in e)if(Kr.indexOf(t)<0)throw new Error(`unknown calculate property '${t}', available are ${Kr.join(", ")}`);return e}const Gr=["filter"];function Hr(e){for(const t in e)if(Gr.indexOf(t)<0)throw new Error(`unknown filter property '${t}', available are ${Gr.join(", ")}`);return e}const Zr=["concat"];function Qr(e){for(const t in e)if(Zr.indexOf(t)<0)throw new Error(`unknown concat property '${t}', available are ${Zr.join(", ")}`);return e}function Xr(e){const t=[];let n,i={},r=[],o=[],a={};const l=[],s=[];for(const c of e)if("string"==typeof c)t.push(Nr(c));else if("mark"in c)t.push(Fr(c));else if(Array.isArray(c))o=[...o,eo(c)];else if("calculate"in c)r.push(Vr(c));else if("filter"in c)r.push(Hr(c));else if("facet"in c||"row"in c||"column"in c)l.push(c);else if("concat"in c)s.push(Qr(c));else if("height"in c||"width"in c||"config"in c)a=Object.assign(Object.assign({},a),qr(c));else if(Pr.some((e=>e in c))){const[e,t,n]=Br(c);if(e in t)throw new Error(`Can't redefine channel ${e}!`);if(void 0!==n)throw new Error(`Explicit value for '${e}' allowed only inside of a layer`);i=Object.assign(Object.assign({},i),{[e]:t})}else{if(!("vega"in c))throw new Error(`unknown plot part ${JSON.stringify(c)}`);n=c.vega}if(t.length>1)throw new Error(`Multiple marks found ${t.join(", ")}`);const c=Object.assign(Object.assign(Object.assign({},r.length>0?{transform:r}:{}),a),n||{});function u(){return Object.assign(Object.assign(Object.assign({},t.length>0?{mark:t[0]}:{}),Object.keys(i).length>0?{encoding:i}:{}),o.length>0?{layer:o}:{})}if(l.length>0){if(s.length>0)throw new Error("concat can't be used with facet");return function(e,t,n){let i;for(const t of e)"facet"in t&&(i=t);if(i){if(e.length>1)throw new Error("Can't other facets with 'facet' keyword");return Object.assign(Object.assign(Object.assign({facet:{field:i.facet,type:i.type||"ordinal",header:{title:null}}},void 0!==i.columns?{columns:i.columns}:{}),{spec:t}),n)}{if(e.filter((e=>"row"in e)).length>1)throw new Error("Facet can't have more than one row");if(e.filter((e=>"column"in e)).length>1)throw new Error("Facet can't have more than one column");let i,r;for(const t of e)"row"in t&&(i=t),"column"in t&&(r=t);return Object.assign({facet:Object.assign(Object.assign({},i?{row:{field:i.row,type:i.type||"ordinal",header:{title:null}}}:{}),r?{column:{field:r.column,type:r.type||"ordinal",header:{title:null}}}:{}),spec:t},n)}}(l,u(),c)}if(s.length>0){if(s.length>1)throw new Error("there could be only one concat");if(l.length>0)throw new Error("concat can't be used with facet");if(t.length>0)throw new Error("top level mark can't be used with concat");if(Object.keys(i).length>0)throw new Error("top level encoding can't be used with concat");if(0==o.length)throw new Error("concat requires at least one layer");return Object.assign({["vertical"==s[0].concat?"vconcat":"hconcat"]:o},c)}return Object.assign(Object.assign({},u()),c)}function eo(e){const t=[],n=[];let i,r,o={},a={};for(const l of e)if("string"==typeof l)t.push(Nr(l));else if("mark"in l)t.push(Fr(l));else if("calculate"in l)n.push(Vr(l));else if("filter"in l)n.push(Hr(l));else if("height"in l||"width"in l)a=Object.assign(Object.assign({},a),qr(l));else if(Pr.some((e=>e in l))){const[e,t,n]=Br(l);if(e in t)throw new Error(`Can't redefine channel ${e}!`);r=n,o=Object.assign(Object.assign({},o),{[e]:t})}else{if(!("vega"in l))throw new Error(`unknown plot layer part ${JSON.stringify(l)}`);i=l.vega}if(t.length>1)throw new Error(`Multiple marks found ${t.join(", ")}`);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n.length>0?{transform:n}:{}),t.length>0?{mark:t[0]}:{}),Object.keys(o).length>0?{encoding:o}:{}),a),r?{data:{values:r}}:{}),i||{})}function to(e,t,n){if(n.indexOf(typeof t)<0)throw new Error(`invalid type for '${e}' allowed types ${n.join(", ")}`)}se("Simple plot",(()=>{ce.equal(Xr(["bar",{x:"value"},{y:"key",type:"nominal"}]),{mark:"bar",encoding:{x:{field:"value",type:"quantitative",legend:!1,axis:{title:null}},y:{field:"key",type:"nominal",legend:!1,axis:{title:null}}}})})),se("Aggregate",(()=>{ce.equal(Xr([{mark:"bar",point:!0},{x:"value",bin:10,zero:!1},{y:"",aggregate:"count"}]),{mark:{type:"bar",point:!0},encoding:{x:{field:"value",type:"quantitative",legend:!1,axis:{title:null},scale:{zero:!1},bin:{base:10,maxbins:10}},y:{type:"quantitative",aggregate:"count",legend:!1,axis:{title:null}}}})})),se("Complex mark",(()=>{ce.equal(Xr([{mark:"bar",color:"red",size:10},{x:"value",bin:10},{y:"key",type:"nominal"}]),{mark:{type:"bar",color:"red",size:10},encoding:{x:{field:"value",type:"quantitative",legend:!1,axis:{title:null},bin:{base:10,maxbins:10}},y:{field:"key",type:"nominal",legend:!1,axis:{title:null}}}})})),se("Transform",(()=>{ce.equal(Xr([{calculate:"abs(value)",as:"abs_value"},{filter:"value !== null"},"bar",{x:"value"},{y:"key",type:"nominal"}]),{transform:[{calculate:"abs(value)",as:"abs_value"},{filter:"value !== null"}],mark:"bar",encoding:{x:{field:"value",type:"quantitative",legend:!1,axis:{title:null}},y:{field:"key",type:"nominal",legend:!1,axis:{title:null}}}})})),se("Merging with custom Vega props",(()=>{ce.equal(Xr([{mark:"bar",vega:{stroke:"red"}},{x:"value",zero:!0,vega:{format:"number",scale:{domain:[1,2]},axis:{orient:"top"}}},{vega:{height:100}},[{vega:{height:100}}]]),{mark:{type:"bar",stroke:"red"},encoding:{x:{field:"value",type:"quantitative",legend:!1,format:"number",axis:{title:null,orient:"top"},scale:{domain:[1,2],zero:!0}}},height:100,layer:[{height:100}]})})),se("Range and domain",(()=>{ce.equal(Xr(["bar",{color:"value",domain:[1,2],range:["red","blue"],scale:"log"}]),{mark:"bar",encoding:{color:{field:"value",type:"quantitative",legend:!1,axis:{title:null},scale:{type:"log",domain:[1,2],range:["red","blue"],nice:!1}}}})})),se("Layer",(()=>{ce.equal(Xr(["point",{x:"value"},[{y:"key"}],[{y:"key2"}]]),{mark:"point",encoding:{x:{field:"value",type:"quantitative",legend:!1,axis:{title:null}}},layer:[{encoding:{y:{field:"key",type:"quantitative",legend:!1,axis:{title:null}}}},{encoding:{y:{field:"key2",type:"quantitative",legend:!1,axis:{title:null}}}}]})})),se("Facet column",(()=>{ce.equal(Xr(["bar",{x:"value"},[{y:"key",type:"nominal"}],{column:"group"}]),{facet:{column:{field:"group",type:"ordinal",header:{title:null}}},spec:{mark:"bar",encoding:{x:{field:"value",type:"quantitative",legend:!1,axis:{title:null}}},layer:[{encoding:{y:{field:"key",type:"nominal",legend:!1,axis:{title:null}}}}]}})})),se("Facet repeat",(()=>{ce.equal(Xr(["bar",{x:"value"},[{y:"key",type:"nominal"}],{facet:"group",columns:2}]),{facet:{field:"group",type:"ordinal",header:{title:null}},columns:2,spec:{mark:"bar",encoding:{x:{field:"value",type:"quantitative",legend:!1,axis:{title:null}}},layer:[{encoding:{y:{field:"key",type:"nominal",legend:!1,axis:{title:null}}}}]}})})),se("Conditional Value",(()=>{ce.equal(Xr(["bar",{shape:"value",value:1},{color:"",value:["datum.value > 0","green"]},{size:"",value:["datum.size > 10","big","small"]}]),{mark:"bar",encoding:{shape:{field:"value",type:"quantitative",legend:!1,axis:{title:null},value:1},color:{type:"quantitative",legend:!1,axis:{title:null},condition:{test:"datum.value > 0",value:"green"}},size:{type:"quantitative",legend:!1,axis:{title:null},value:"small",condition:{test:"datum.size > 10",value:"big"}}}})})),se("Explicit value",(()=>{ce.equal(Xr([["rule",{x:"",value:10}]]),{layer:[{data:{values:[{explicit_value:10}]},mark:"rule",encoding:{x:{field:"explicit_value",type:"quantitative",legend:!1,axis:{title:null}}}}]})})),se("Config",(()=>{ce.equal(Xr(["bar",{x:"value"},{config:{height:100}}]),{mark:"bar",encoding:{x:{field:"value",type:"quantitative",legend:!1,axis:{title:null}}},config:{height:100}})})),se("hconcat",(()=>{ce.equal(Xr([["bar",{x:"key"}],{concat:"horizontal"}]),{hconcat:[{mark:"bar",encoding:{x:{field:"key",type:"quantitative",legend:!1,axis:{title:null}}}}]})}));const no=function(){let e=window.location.pathname;return e.startsWith("/")||(e+="/"),e=e.replace(/:([^:]+)$/i,""),/\.[^\/]+$/.test(e)||(e+=".yml"),e}();new class extends X{constructor(e){super(),Q(this,e,Er,Cr,o,{path:0,datap:1})}}({target:document.body,props:{path:no,datap:async function(e){let t=await fetch(function(e,t={}){const n=[];for(const e in t){const i=t[e];null!=e&&null!=i&&n.push(`${encodeURIComponent(e)}=${encodeURIComponent(""+t[e])}`)}return n.length>0?`${e}${e.includes("?")?"&":"?"}${n.join("&")}`:e}(e,{clearcache:Math.random()}));return function(e,t="some.json"){if(t.endsWith(".json"))return JSON.parse(e);if(t.endsWith(".yaml")||t.endsWith(".yml"))return pr(e);throw new Error(`unknown data format '${t}'`)}(await t.text(),e)}(no).then((e=>Array.isArray(e)?{data:e,version:bt}:e))}})}();
