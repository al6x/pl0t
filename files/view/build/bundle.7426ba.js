!function(){"use strict";const t={blocks_limit:100,narrow_width:480,height_in_narrow_width_mode:200,parsers:{},blocks_for_file_extensions:{md:"text",markdown:"text",text:"text",txt:"text"},blocks:{},apps:{}};window.plot_config=t;const e={version:.1};function n(){}function r(t){return t()}function s(){return Object.create(null)}function o(t){t.forEach(r)}function i(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e}function a(t){return null==t?"":t}function c(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function h(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function g(t){return document.createTextNode(t)}function m(){return g(" ")}function b(){return g("")}function w(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function $(t){return function(e){return e.preventDefault(),t.call(this,e)}}function y(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function v(t,e){t.value=null==e?"":e}function k(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function x(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}}let j,O;function E(){if(void 0===j){j=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){j=!0}}return j}window.plot_api=e;class z{constructor(t=null){this.a=t,this.e=this.n=null}m(t,e,n=null){this.e||(this.e=f(e.nodeName),this.t=e,this.h(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)u(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(d)}}function S(t){O=t}function A(){if(!O)throw new Error("Function called outside component initialization");return O}const q=[],C=[],M=[],R=[],T=Promise.resolve();let B=!1;function L(t){M.push(t)}function P(t){R.push(t)}let N=!1;const U=new Set;function F(){if(!N){N=!0;do{for(let t=0;t<q.length;t+=1){const e=q[t];S(e),I(e.$$)}for(S(null),q.length=0;C.length;)C.pop()();for(let t=0;t<M.length;t+=1){const e=M[t];U.has(e)||(U.add(e),e())}M.length=0}while(q.length);for(;R.length;)R.pop()();B=!1,N=!1,U.clear()}}function I(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(L)}}const D=new Set;let Z;function H(){Z={r:0,c:[],p:Z}}function J(){Z.r||o(Z.c),Z=Z.p}function W(t,e){t&&t.i&&(D.delete(t),t.i(e))}function K(t,e,n,r){if(t&&t.o){if(D.has(t))return;D.add(t),Z.c.push((()=>{D.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function V(t,e){const n=e.token={};function r(t,r,s,o){if(e.token!==n)return;e.resolved=o;let i=e.ctx;void 0!==s&&(i=i.slice(),i[s]=o);const l=t&&(e.current=t)(i);let a=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&(H(),K(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),J())})):e.block.d(1),l.c(),W(l,1),l.m(e.mount(),e.anchor),a=!0),e.block=l,e.blocks&&(e.blocks[r]=l),a&&F()}if((s=t)&&"object"==typeof s&&"function"==typeof s.then){const n=A();if(t.then((t=>{S(n),r(e.then,1,e.value,t),S(null)}),(t=>{if(S(n),r(e.catch,2,e.error,t),S(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var s}function X(t,e,n){const r=e.slice(),{resolved:s}=t;t.current===t.then&&(r[t.value]=s),t.current===t.catch&&(r[t.error]=s),t.block.p(r,n)}function G(t,e){t.d(1),e.delete(t.key)}function Y(t,e){K(t,1,1,(()=>{e.delete(t.key)}))}function Q(t,e,n,r,s,o,i,l,a,c,u,d){let f=t.length,h=o.length,p=f;const g={};for(;p--;)g[t[p].key]=p;const m=[],b=new Map,w=new Map;for(p=h;p--;){const t=d(s,o,p),l=n(t);let a=i.get(l);a?r&&a.p(t,e):(a=c(l,t),a.c()),b.set(l,m[p]=a),l in g&&w.set(l,Math.abs(p-g[l]))}const $=new Set,y=new Set;function _(t){W(t,1),t.m(l,u),i.set(t.key,t),u=t.first,h--}for(;f&&h;){const e=m[h-1],n=t[f-1],r=e.key,s=n.key;e===n?(u=e.first,f--,h--):b.has(s)?!i.has(r)||$.has(r)?_(e):y.has(s)?f--:w.get(r)>w.get(s)?(y.add(r),_(e)):($.add(s),f--):(a(n,i),f--)}for(;f--;){const e=t[f];b.has(e.key)||a(e,i)}for(;h;)_(m[h-1]);return m}function tt(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function et(t){t&&t.c()}function nt(t,e,n,s){const{fragment:l,on_mount:a,on_destroy:c,after_update:u}=t.$$;l&&l.m(e,n),s||L((()=>{const e=a.map(r).filter(i);c?c.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(L)}function rt(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function st(t,e){-1===t.$$.dirty[0]&&(q.push(t),B||(B=!0,T.then(F)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ot(t,e,r,i,l,a,c=[-1]){const u=O;S(t);const f=t.$$={fragment:null,ctx:null,props:a,update:n,not_equal:l,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:e.context||[]),callbacks:s(),dirty:c,skip_bound:!1};let h=!1;if(f.ctx=r?r(t,e.props||{},((e,n,...r)=>{const s=r.length?r[0]:n;return f.ctx&&l(f.ctx[e],f.ctx[e]=s)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](s),h&&st(t,e)),n})):[],f.update(),h=!0,o(f.before_update),f.fragment=!!i&&i(f.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);f.fragment&&f.fragment.l(t),t.forEach(d)}else f.fragment&&f.fragment.c();e.intro&&W(t.$$.fragment),nt(t,e.target,e.anchor,e.customElement),F()}S(u)}class it{$destroy(){rt(this,1),this.$destroy=n}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function lt(t,e){var n;const r=null===(n=window)||void 0===n?void 0:n.env[t];return null!=r?r:null!=e?e:void 0}let at="Deno"in window?window.Deno:void 0;const ct=null==at,ut=[];let dt,ft=0,ht=!1;function pt(){ht||(ht=!0,setTimeout((async()=>{for(;ft<ut.length;){let{name:t,test:e}=ut[ft];ft+=1;try{console.log(`  test | ${t}`);let n=e();n&&await n}catch(e){if(console.error(`  test | ${t} failed`),console.error(e),!ct)throw e}}ht=!1}),0))}try{dt=(lt("test")||"").downcase()}catch(t){dt="false"}let gt="all"==dt,mt=gt||"true"==dt;function bt(t,e){t=is_string(t)?t:t.name,ut.push({name:t,test:e}),(mt||t.downcase()==dt)&&pt()}function wt(t,e){for(const n in e)Object.defineProperty(t,n,{value:e[n],configurable:!1,writable:!0})}function $t(){const t=this.replace(/^\s*\n|[\n\s]+$/,""),e=/^(\s+)/.parse(t);return 0==e.length?t:t.split("\n").map((t=>t.startsWith(e[0])?t.replace(e[0],""):t)).join("\n")}function yt(t=0){return 0==t?Math.round(this):Math.round((this+Number.EPSILON)*Math.pow(10,t))/Math.pow(10,t)}function _t(t){const e=t.match(this);return e?1==e.length?[]:e.slice(1,e.length):[]}function vt(t){const e=t.match(this);return(null==e?void 0:e.groups)||{}}window.run_tests=pt,window.test=bt,window.slow_test=function(t,e){t=is_string(t)?t:t.name,ut.push({name:t,test:e}),(gt||t.downcase()==dt)&&pt()},window.p=function(...t){if(ct)console.log(...t);else{const e=t.map((t=>function(t,e=!1){return at&&is_object(t)?at.inspect(t,{colors:e}):t}(t,!0)));t.length,console.log(...e)}},window.discard=function(t){},window.is_number=function(t){return"number"==typeof t&&Number.isFinite(t)},window.is_array=function(t){return Array.isArray(t)},window.is_string=function(t){return"string"==typeof t},window.is_object=function(t){return"object"==typeof t&&null!==t},window.is_function=function(t){return"function"==typeof t},window.is_undefined=function(t){return void 0===typeof t},window.set_timeout=function(t,e){return setTimeout(t,e)},window.clear_timeout=clearTimeout,window.set_interval=function(t,e,n=!1){return n&&t(),setInterval(t,e)},window.clear_timeout=clearTimeout,window.to_json=jt,window.from_json=function(t){return JSON.parse(t)},window.ensure_error=Et,Object.size=function(t){let e=0;for(let n in t)t.hasOwnProperty(n)&&e++;return e},Object.is_empty=function(t){for(let e in t)if(t.hasOwnProperty(e))return!1;return!0},wt(Object.prototype,{is_equal:function(t){return Ot(this,t)},to_s:function(){return""+this},clone:function(){return Object.assign({},this)},to_success:function(){return{is_error:!1,value:this}}}),wt(Array.prototype,{add:function(t){this.push(t)},size:function(){return this.length},is_empty:function(){return 0==this.length},clone:function(){return[...this]},take:function(t){return this.slice(0,t)},filter_map(t){const e=[];for(let n=0;n<this.length;n++){const r=t(this[n],n);void 0!==r&&e.push(r)}return e},skip_undefined(){return this.filter_map((t=>t))},last(t){const e=this.length;if(void 0===t){if(e<1)throw new Error("can't get last elements from empty array");return this[e-1]}if(e<t)throw new Error(`can't get last ${t} elements from array of length ${e}`);return this.slice(e-t,e)},each(t){this.forEach(t)},unique:function(t){const e=new Set,n=t||(t=>t);return this.filter((t=>{const r=n(t);return!e.has(r)&&(e.add(r),!0)}))},sort_by:function(t,e){if(0==this.length)return this;{const n=t,r=typeof t(this[0]);let s,o;if("number"==r)s=function(t,e){return n(t)-n(e)};else if("boolean"==r)s=function(t,e){return(n(t)?1:0)-(n(e)?1:0)};else{if("string"!=r)throw new Error(`invalid return type for 'by' '${r}'`);s=function(t,e){return n(t).localeCompare(n(e))}}return o=[...this],o.sort(s),e&&o.reverse(),o}}}),wt(String.prototype,{size:function(){return this.length},is_empty:function(){return""==this},clone:function(){return""+this},take:function(t){return this.slice(0,t)},to_error:function(){return{is_error:!0,message:this}},downcase:function(){return this.toLowerCase()},upcase:function(){return this.toUpperCase()},trim(){return this.replace(/^[\t\s\n]+|[\t\s\n]+$/g,"")},dedent:$t,last(t){const e=this.length;if(void 0===t){if(e<1)throw new Error("can't get last elements from empty string");return this[e-1]}if(e<t)throw new Error(`can't get last ${t} elements from string of length ${e}`);return this.slice(e-t,e)}}),bt("dedent",(()=>{assert.equal($t.call("\n  a\n  b\n    c"),"a\nb\n  c")})),wt(Number.prototype,{round:yt}),bt("round",(()=>{assert.equal(yt.call(.05860103881518906,2),.06)})),wt(Function.prototype,{to_safe:function(){const t=this;return function(...e){try{return{is_error:!1,value:t(...e)}}catch(t){return{is_error:!0,message:Et(t).message}}}},debounce:function(t,e=!1){let n,r=this;return(...s)=>{e?(e=!1,r(...s)):(n&&clearTimeout(n),n=setTimeout((()=>r(...s)),t))}}}),wt(RegExp.prototype,{parse:_t,parse_named:vt,parse1:function(t){const e=this.parse(t);if(1!=e.length)throw new Error(`expected 1 match but found ${e.length}`);return e[0]},parse2:function(t){const e=this.parse(t);if(2!=e.length)throw new Error(`expected 2 matches but found ${e.length}`);return[e[0],e[1]]},parse3:function(t){const e=this.parse(t);if(3!=e.length)throw new Error(`expected 3 matches but found ${e.length}`);return[e[0],e[1],e[2]]}}),bt("parse",(()=>{assert.equal(_t.call(/.+ (\d+) (\d+)/,"a 22 45"),["22","45"]),assert.equal(_t.call(/[^;]+;/,"drop table; create table;"),[])})),bt("parseNamed",(()=>{assert.equal(vt.call(/.+ (?<a>\d+) (?<b>\d+)/,"a 22 45"),{a:"22",b:"45"})}));const kt=function(t,e){const n=e?e instanceof Function?e():e:"Assertion error!";if(!t)throw new Error(n)};function xt(t){return is_array(t)?t.map(xt):is_object(t)?"dump"in t?xt(t.to_json_hook()):Object.assign({},...Object.entries(t).sort((([t],[e])=>t.localeCompare(e))).map((([t,e])=>({[t]:xt(e)})))):t}function jt(t,e=!0){return e?JSON.stringify(xt(t),null,2):JSON.stringify(xt(t))}function Ot(t,e){return jt(t)===jt(e)}function Et(t,e="Unknown error"){return is_object(t)&&t instanceof Error?(t.message||(t.message=e),t):new Error(""+(t||e))}function zt(t,e){if(t instanceof Array)for(let n=0;n<t.length;n++)e(t[n],n);else if(t instanceof Map)for(const[n,r]of t)e(r,n);else for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function St(t,e){const n=e instanceof Function?e:t=>t==e;if(t instanceof Array)for(let e=0;e<t.length;e++){if(n(t[e],e))return t[e];for(const e in t)if(t.hasOwnProperty(e)&&n(t[e],e))return t[e]}}function At(t,e){if(e=e||(t=>t),0==t.length)return-1;let n=e(t[0]),r=0;for(let s=1;s<t.length;s++){let o=e(t[s]);o<n&&(n=o,r=s)}return r}function qt(t,e){if(e=e||(t=>t),0==t.length)return-1;let n=e(t[0]),r=0;for(let s=1;s<t.length;s++){let o=e(t[s]);o>n&&(n=o,r=s)}return r}function Ct(t,e=!1){return Mt(t,.5,e)}function Mt(t,e,n=!1){const r=n?t:[...t].sort(((t,e)=>t-e)),s=(r.length-1)*e,o=Math.floor(s),i=s-o;return void 0!==r[o+1]?r[o]+i*(r[o+1]-r[o]):r[o]}function Rt(t,e){const n=[];let r=0;for(;;){const s=[];r<t.length&&n.push(s);for(let o=0;o<e;o++){if(!(r+o<t.length))return n;s.push(t[r+o])}r+=e}}function Tt(t,e){if(t instanceof Array){const n=new Array,r=new Array,s=e instanceof Function?e:(t,n)=>e.includes(n);return zt(t,((t,e)=>s(t,e)?n.push(t):r.push(t))),[n,r]}{const n={},r={},s=e instanceof Function?e:(t,n)=>e.includes(n);return zt(t,((t,e)=>s(t,e)?n[e]=t:r[e]=t)),[n,r]}}function Bt(t,e){if(is_object(t)&&"found"in t){if(t.found)return t.value;throw new Error(t.message||`value${e?" "+e:""} not found`)}if(is_string(t)){if(""==t)throw new Error(`string value${e?" "+e:""} not found`);return t}if(void 0===t)throw new Error(`value${e?" "+e:""} not defined`);return t}function Lt(t,e,n){return zt(t,((t,r)=>e=n(e,t,r))),e}function Pt(t){return Lt(t,0,((t,e)=>t+e))}function Nt(t,e){if(t instanceof Array)return t.map(e);if(t instanceof Map){const n=new Map;return zt(t,((t,r)=>n.set(r,e(t,r)))),n}{const n={};return zt(t,((t,r)=>n[r]=e(t,r))),n}}function Ut(t){let e,n;return{c(){e=f("pre"),n=g(t[1]),y(e,"class","text-xs text-gray-600 mt-4")},m(t,r){u(t,e,r),c(e,n)},p(t,e){2&e&&_(n,t[1])},d(t){t&&d(e)}}}function Ft(t){let e,r,s,o,i,l=Et(t[0]).message+"",a=t[1].length>0&&Ut(t);return{c(){e=f("div"),r=f("span"),r.textContent="Error",s=g(" -\n  "),o=g(l),i=m(),a&&a.c(),y(r,"class","text-red-600 font-bold"),y(e,"class","Fail")},m(t,n){u(t,e,n),c(e,r),c(e,s),c(e,o),c(e,i),a&&a.m(e,null)},p(t,[n]){1&n&&l!==(l=Et(t[0]).message+"")&&_(o,l),t[1].length>0?a?a.p(t,n):(a=Ut(t),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i:n,o:n,d(t){t&&d(e),a&&a.d()}}}function It(t,e,n){let r,{error:s}=e;return t.$$set=t=>{"error"in t&&n(0,s=t.error)},t.$$.update=()=>{1&t.$$.dirty&&n(1,r=(s&&s instanceof Error?s.stack:"")||"")},[s,r]}kt.equal=(t,e,n)=>{if(!Ot(t,e)){const r=n?n instanceof Function?n():n:`Assertion error: ${jt(t,!0)} != ${jt(e,!0)}`;throw new Error(r)}},kt.fail=(t,e)=>{let n=!1;try{t()}catch(t){n=!0}if(!n){const t=e?e instanceof Function?e():e:"Assertion error: expected to fail but didn't";throw new Error(t)}},kt.aequal=(t,e,n,r)=>{r=r||.001;const s=(Math.abs(t)+Math.abs(e))/2*r;if(Math.abs(t-e)>s){const r=n?n instanceof Function?n():n:`Assertion error: ${jt(t,!0)} != ${jt(e,!0)}`;throw new Error(r)}},window.assert=kt,bt("sort_by",(()=>{assert.equal([{v:!0},{v:!1}].sort_by((({v:t})=>t)),[{v:!1},{v:!0}]),assert.equal([{v:"b"},{v:""},{v:"c"}].sort_by((({v:t})=>t)),[{v:""},{v:"b"},{v:"c"}])})),Promise.prototype.toJSON=function(){return"Promise"},Object.defineProperty(Promise.prototype,"cmap",{configurable:!1,enumerable:!1}),bt("groupByN",(()=>{assert.equal(Rt([1,2,3],2),[[1,2],[3]]),assert.equal(Rt([1,2],2),[[1,2]]),assert.equal(Rt([1],2),[[1]]),assert.equal(Rt([],2),[])})),bt("pick",(()=>{var t;assert.equal((t=["a"],Tt({a:1,b:2},((e,n)=>t.includes(n)))[0]),{a:1})})),Error.prototype.toJSON=function(){return{message:this.message,stack:this.stack}},Map.prototype.toJSON=function(){return Lt(this,{},((t,e,n)=>(t[n]=e,t)))};class Dt extends it{constructor(t){super(),ot(this,t,It,Ft,l,{error:0})}}function Zt(t){let e,r;return{c(){e=f("div"),r=g(t[0]),y(e,"class","animate-pulse text-gray-500")},m(t,n){u(t,e,n),c(e,r)},p(t,[e]){1&e&&_(r,t[0])},i:n,o:n,d(t){t&&d(e)}}}function Ht(t,e,n){let{text:r="Processing..."}=e;return discard(r),t.$$set=t=>{"text"in t&&n(0,r=t.text)},[r]}class Jt extends it{constructor(t){super(),ot(this,t,Ht,Zt,l,{text:0})}}class Wt{constructor(t){this.v=t}get(){return this.v}set(t){this.v=t}}function Kt(t){const e=/\.([a-z0-9]+)$/i.parse(t);return e.length>0?e[0]:void 0}function Vt(t){return/\//.test(t)?function(){const t=lt("base_url");if(void 0===t)throw new Error("base_url not specified");return t}()+t:t}async function Xt(t,e){if("parallel"==e){const e=t.map(Yt);for(const t of e)await t}else for(const e of t)await Yt(e)}const Gt={};async function Yt(t){if(!(t in Gt)){const e=Vt(t);if(t.endsWith(".js"))Gt[t]=function(t){return new Promise(((e,n)=>{const r=document.createElement("script");r.src=t,r.onerror=()=>{r.remove(),n(new Error(`Cannot load ${t}`))},r.onload=()=>{r.remove(),e()},document.body.append(r)}))}(e);else{if(!t.endsWith(".css"))throw new Error(`should be script or style url '${t}'`);Gt[t]=function(t){return new Promise(((e,n)=>{const r=document.createElement("link");r.rel="stylesheet",r.onerror=()=>{r.remove(),n(new Error(`Cannot load ${t}`))},r.onload=()=>{e()},r.href=t,document.head.appendChild(r)}))}(e)}}return Gt[t]}const Qt={};async function te(t){if(!(t in Qt)){Qt[t]=async function(){let e=await fetch(function(t,e={}){const n=[];for(const t in e){const r=e[t];null!=t&&null!=r&&n.push(`${encodeURIComponent(t)}=${encodeURIComponent(""+e[t])}`)}return n.length>0?`${t}${t.includes("?")?"&":"?"}${n.join("&")}`:t}(t,{clearcache:Math.random()}));if(404==e.status)throw new Error(`File '${t}' not found`);if(200!=e.status)throw new Error(`Can't load '${t}', response code ${e.status}`);return ne(await e.text(),Kt(t),t)}()}return Qt[t]}async function ee(t){if(void 0===t)throw new Error("nether data nor data url provided");return"object"==typeof t&&"url"in t?await te(t.url):t}async function ne(e,n,r){if(n){const s=t.parsers[n];if(s)try{return await s(e)}catch(t){throw new Error(`can't parse '${r||n}', ${Et(t).message}`)}}return e}async function re(t){const e=(await oe()).load(t);if(null==e)throw new Error("YAML data is empty");return e}async function se(t){return(await oe()).dump(t,{skipInvalid:!0,noRefs:!0})}async function oe(){await Xt(["/vendor/js-yaml-4.1.0/js-yaml.min.js"],"serial");const t=window.jsyaml;if(!t)throw new Error("can't load 'js-yaml' library");return t}t.parsers.yml=re,t.parsers.yaml=re,t.parsers.json=async t=>JSON.parse(t),t.parsers.csv=async function(t){const{errors:e,data:n,meta:{fields:r}}=(await async function(){await Xt(["/vendor/papaparse-5.0.2/papaparse.min.js"],"serial");const t=window.Papa;if(!t)throw new Error("can't load 'papaparse' library");return t}()).parse(t,{header:!0,dynamicTyping:!0});if(e.lenght>0)throw new Error(Et(e[0]).message);return{type:"csv_table",columns:r,rows:n}};const ie={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};test("escapeHtml",(()=>{var t;assert.equal(null==(t="<div>")?"":(""+t).replace(/[&<>'"]/g,(function(t){return ie[t]})),"&lt;div&gt;")}));var le,ae=(function(t){function e(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}}t.exports={defaults:{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1},getDefaults:e,changeDefaults:function(e){t.exports.defaults=e}}}(le={exports:{}},le.exports),le.exports);const ce=/[&<>"']/,ue=/[&<>"']/g,de=/[<>"']|&(?!#?\w+;)/,fe=/[<>"']|&(?!#?\w+;)/g,he={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},pe=t=>he[t];const ge=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function me(t){return t.replace(ge,((t,e)=>"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""))}const be=/(^|[^\[])\^/g;const we=/[^\w:]/g,$e=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;const ye={},_e=/^[^:]+:\/*[^/]*$/,ve=/^([^:]+:)[\s\S]*$/,ke=/^([^:]+:\/*[^/]*)[\s\S]*$/;function xe(t,e){ye[" "+t]||(_e.test(t)?ye[" "+t]=t+"/":ye[" "+t]=je(t,"/",!0));const n=-1===(t=ye[" "+t]).indexOf(":");return"//"===e.substring(0,2)?n?e:t.replace(ve,"$1")+e:"/"===e.charAt(0)?n?e:t.replace(ke,"$1")+e:t+e}function je(t,e,n){const r=t.length;if(0===r)return"";let s=0;for(;s<r;){const o=t.charAt(r-s-1);if(o!==e||n){if(o===e||!n)break;s++}else s++}return t.substr(0,r-s)}var Oe={escape:function(t,e){if(e){if(ce.test(t))return t.replace(ue,pe)}else if(de.test(t))return t.replace(fe,pe);return t},unescape:me,edit:function(t,e){t=t.source||t,e=e||"";const n={replace:(e,r)=>(r=(r=r.source||r).replace(be,"$1"),t=t.replace(e,r),n),getRegex:()=>new RegExp(t,e)};return n},cleanUrl:function(t,e,n){if(t){let t;try{t=decodeURIComponent(me(n)).replace(we,"").toLowerCase()}catch(t){return null}if(0===t.indexOf("javascript:")||0===t.indexOf("vbscript:")||0===t.indexOf("data:"))return null}e&&!$e.test(n)&&(n=xe(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(t){return null}return n},resolveUrl:xe,noopTest:{exec:function(){}},merge:function(t){let e,n,r=1;for(;r<arguments.length;r++)for(n in e=arguments[r],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},splitCells:function(t,e){const n=t.replace(/\|/g,((t,e,n)=>{let r=!1,s=e;for(;--s>=0&&"\\"===n[s];)r=!r;return r?"|":" |"})).split(/ \|/);let r=0;if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n},rtrim:je,findClosingBracket:function(t,e){if(-1===t.indexOf(e[1]))return-1;const n=t.length;let r=0,s=0;for(;s<n;s++)if("\\"===t[s])s++;else if(t[s]===e[0])r++;else if(t[s]===e[1]&&(r--,r<0))return s;return-1},checkSanitizeDeprecation:function(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}};const{noopTest:Ee,edit:ze,merge:Se}=Oe,Ae={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:Ee,table:Ee,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Ae.def=ze(Ae.def).replace("label",Ae._label).replace("title",Ae._title).getRegex(),Ae.bullet=/(?:[*+-]|\d{1,9}\.)/,Ae.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,Ae.item=ze(Ae.item,"gm").replace(/bull/g,Ae.bullet).getRegex(),Ae.list=ze(Ae.list).replace(/bull/g,Ae.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Ae.def.source+")").getRegex(),Ae._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ae._comment=/<!--(?!-?>)[\s\S]*?-->/,Ae.html=ze(Ae.html,"i").replace("comment",Ae._comment).replace("tag",Ae._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ae.paragraph=ze(Ae._paragraph).replace("hr",Ae.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",Ae._tag).getRegex(),Ae.blockquote=ze(Ae.blockquote).replace("paragraph",Ae.paragraph).getRegex(),Ae.normal=Se({},Ae),Ae.gfm=Se({},Ae.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),Ae.gfm.nptable=ze(Ae.gfm.nptable).replace("hr",Ae.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",Ae._tag).getRegex(),Ae.gfm.table=ze(Ae.gfm.table).replace("hr",Ae.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",Ae._tag).getRegex(),Ae.pedantic=Se({},Ae.normal,{html:ze("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Ae._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:Ee,paragraph:ze(Ae.normal._paragraph).replace("hr",Ae.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Ae.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const qe={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Ee,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Ee,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/,_punctuation:"!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~"};qe.em=ze(qe.em).replace(/punctuation/g,qe._punctuation).getRegex(),qe._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,qe._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,qe._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,qe.autolink=ze(qe.autolink).replace("scheme",qe._scheme).replace("email",qe._email).getRegex(),qe._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,qe.tag=ze(qe.tag).replace("comment",Ae._comment).replace("attribute",qe._attribute).getRegex(),qe._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,qe._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,qe._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,qe.link=ze(qe.link).replace("label",qe._label).replace("href",qe._href).replace("title",qe._title).getRegex(),qe.reflink=ze(qe.reflink).replace("label",qe._label).getRegex(),qe.normal=Se({},qe),qe.pedantic=Se({},qe.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:ze(/^!?\[(label)\]\((.*?)\)/).replace("label",qe._label).getRegex(),reflink:ze(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",qe._label).getRegex()}),qe.gfm=Se({},qe.normal,{escape:ze(qe.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),qe.gfm.url=ze(qe.gfm.url,"i").replace("email",qe.gfm._extended_email).getRegex(),qe.breaks=Se({},qe.gfm,{br:ze(qe.br).replace("{2,}","*").getRegex(),text:ze(qe.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var Ce={block:Ae,inline:qe};const{defaults:Me}=ae,{block:Re}=Ce,{rtrim:Te,splitCells:Be,escape:Le}=Oe;var Pe=class t{constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Me,this.rules=Re.normal,this.options.pedantic?this.rules=Re.pedantic:this.options.gfm&&(this.rules=Re.gfm)}static get rules(){return Re}static lex(e,n){return new t(n).lex(e)}lex(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.token(t,!0)}token(t,e){let n,r,s,o,i,l,a,c,u,d,f,h,p,g,m,b;for(t=t.replace(/^ +$/gm,"");t;)if((s=this.rules.newline.exec(t))&&(t=t.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"})),s=this.rules.code.exec(t)){const e=this.tokens[this.tokens.length-1];t=t.substring(s[0].length),e&&"paragraph"===e.type?e.text+="\n"+s[0].trimRight():(s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?s:Te(s,"\n")}))}else if(s=this.rules.fences.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"code",lang:s[2]?s[2].trim():s[2],text:s[3]||""});else if(s=this.rules.heading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});else if((s=this.rules.nptable.exec(t))&&(l={type:"table",header:Be(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/\n$/,"").split("\n"):[]},l.header.length===l.align.length)){for(t=t.substring(s[0].length),f=0;f<l.align.length;f++)/^ *-+: *$/.test(l.align[f])?l.align[f]="right":/^ *:-+: *$/.test(l.align[f])?l.align[f]="center":/^ *:-+ *$/.test(l.align[f])?l.align[f]="left":l.align[f]=null;for(f=0;f<l.cells.length;f++)l.cells[f]=Be(l.cells[f],l.header.length);this.tokens.push(l)}else if(s=this.rules.hr.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"hr"});else if(s=this.rules.blockquote.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,e),this.tokens.push({type:"blockquote_end"});else if(s=this.rules.list.exec(t)){for(t=t.substring(s[0].length),o=s[2],g=o.length>1,a={type:"list_start",ordered:g,start:g?+o:"",loose:!1},this.tokens.push(a),s=s[0].match(this.rules.item),c=[],n=!1,p=s.length,f=0;f<p;f++)l=s[f],d=l.length,l=l.replace(/^ *([*+-]|\d+\.) */,""),~l.indexOf("\n ")&&(d-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+d+"}","gm"),"")),f!==p-1&&(i=Re.bullet.exec(s[f+1])[0],(o.length>1?1===i.length:i.length>1||this.options.smartLists&&i!==o)&&(t=s.slice(f+1).join("\n")+t,f=p-1)),r=n||/\n\n(?!\s*$)/.test(l),f!==p-1&&(n="\n"===l.charAt(l.length-1),r||(r=n)),r&&(a.loose=!0),m=/^\[[ xX]\] /.test(l),b=void 0,m&&(b=" "!==l[1],l=l.replace(/^\[[ xX]\] +/,"")),u={type:"list_item_start",task:m,checked:b,loose:r},c.push(u),this.tokens.push(u),this.token(l,!1),this.tokens.push({type:"list_item_end"});if(a.loose)for(p=c.length,f=0;f<p;f++)c[f].loose=!0;this.tokens.push({type:"list_end"})}else if(s=this.rules.html.exec(t))t=t.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===s[1]||"script"===s[1]||"style"===s[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):Le(s[0]):s[0]});else if(e&&(s=this.rules.def.exec(t)))t=t.substring(s[0].length),s[3]&&(s[3]=s[3].substring(1,s[3].length-1)),h=s[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[h]||(this.tokens.links[h]={href:s[2],title:s[3]});else if((s=this.rules.table.exec(t))&&(l={type:"table",header:Be(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/\n$/,"").split("\n"):[]},l.header.length===l.align.length)){for(t=t.substring(s[0].length),f=0;f<l.align.length;f++)/^ *-+: *$/.test(l.align[f])?l.align[f]="right":/^ *:-+: *$/.test(l.align[f])?l.align[f]="center":/^ *:-+ *$/.test(l.align[f])?l.align[f]="left":l.align[f]=null;for(f=0;f<l.cells.length;f++)l.cells[f]=Be(l.cells[f].replace(/^ *\| *| *\| *$/g,""),l.header.length);this.tokens.push(l)}else if(s=this.rules.lheading.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:"="===s[2].charAt(0)?1:2,text:s[1]});else if(e&&(s=this.rules.paragraph.exec(t)))t=t.substring(s[0].length),this.tokens.push({type:"paragraph",text:"\n"===s[1].charAt(s[1].length-1)?s[1].slice(0,-1):s[1]});else if(s=this.rules.text.exec(t))t=t.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens}};const{defaults:Ne}=ae,{cleanUrl:Ue,escape:Fe}=Oe;var Ie=class{constructor(t){this.options=t||Ne}code(t,e,n){const r=(e||"").match(/\S*/)[0];if(this.options.highlight){const e=this.options.highlight(t,r);null!=e&&e!==t&&(n=!0,t=e)}return r?'<pre><code class="'+this.options.langPrefix+Fe(r,!0)+'">'+(n?t:Fe(t,!0))+"</code></pre>\n":"<pre><code>"+(n?t:Fe(t,!0))+"</code></pre>"}blockquote(t){return"<blockquote>\n"+t+"</blockquote>\n"}html(t){return t}heading(t,e,n,r){return this.options.headerIds?"<h"+e+' id="'+this.options.headerPrefix+r.slug(n)+'">'+t+"</h"+e+">\n":"<h"+e+">"+t+"</h"+e+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(t,e,n){const r=e?"ol":"ul";return"<"+r+(e&&1!==n?' start="'+n+'"':"")+">\n"+t+"</"+r+">\n"}listitem(t){return"<li>"+t+"</li>\n"}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return"<p>"+t+"</p>\n"}table(t,e){return e&&(e="<tbody>"+e+"</tbody>"),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"}tablerow(t){return"<tr>\n"+t+"</tr>\n"}tablecell(t,e){const n=e.header?"th":"td";return(e.align?"<"+n+' align="'+e.align+'">':"<"+n+">")+t+"</"+n+">\n"}strong(t){return"<strong>"+t+"</strong>"}em(t){return"<em>"+t+"</em>"}codespan(t){return"<code>"+t+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return"<del>"+t+"</del>"}link(t,e,n){if(null===(t=Ue(this.options.sanitize,this.options.baseUrl,t)))return n;let r='<a href="'+Fe(t)+'"';return e&&(r+=' title="'+e+'"'),r+=">"+n+"</a>",r}image(t,e,n){if(null===(t=Ue(this.options.sanitize,this.options.baseUrl,t)))return n;let r='<img src="'+t+'" alt="'+n+'"';return e&&(r+=' title="'+e+'"'),r+=this.options.xhtml?"/>":">",r}text(t){return t}},De=class{constructor(){this.seen={}}slug(t){let e=t.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(e)){const t=e;do{this.seen[t]++,e=t+"-"+this.seen[t]}while(this.seen.hasOwnProperty(e))}return this.seen[e]=0,e}};const{defaults:Ze}=ae,{inline:He}=Ce,{findClosingBracket:Je,escape:We}=Oe;var Ke=class t{constructor(t,e){if(this.options=e||Ze,this.links=t,this.rules=He.normal,this.options.renderer=this.options.renderer||new Ie,this.renderer=this.options.renderer,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=He.pedantic:this.options.gfm&&(this.options.breaks?this.rules=He.breaks:this.rules=He.gfm)}static get rules(){return He}static output(e,n,r){return new t(n,r).output(e)}output(e){let n,r,s,o,i,l,a="";for(;e;)if(i=this.rules.escape.exec(e))e=e.substring(i[0].length),a+=We(i[1]);else if(i=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(i[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(i[0])&&(this.inRawBlock=!1),e=e.substring(i[0].length),a+=this.renderer.html(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):We(i[0]):i[0]);else if(i=this.rules.link.exec(e)){const r=Je(i[2],"()");if(r>-1){const t=(0===i[0].indexOf("!")?5:4)+i[1].length+r;i[2]=i[2].substring(0,r),i[0]=i[0].substring(0,t).trim(),i[3]=""}e=e.substring(i[0].length),this.inLink=!0,s=i[2],this.options.pedantic?(n=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s),n?(s=n[1],o=n[3]):o=""):o=i[3]?i[3].slice(1,-1):"",s=s.trim().replace(/^<([\s\S]*)>$/,"$1"),a+=this.outputLink(i,{href:t.escapes(s),title:t.escapes(o)}),this.inLink=!1}else if((i=this.rules.reflink.exec(e))||(i=this.rules.nolink.exec(e))){if(e=e.substring(i[0].length),n=(i[2]||i[1]).replace(/\s+/g," "),n=this.links[n.toLowerCase()],!n||!n.href){a+=i[0].charAt(0),e=i[0].substring(1)+e;continue}this.inLink=!0,a+=this.outputLink(i,n),this.inLink=!1}else if(i=this.rules.strong.exec(e))e=e.substring(i[0].length),a+=this.renderer.strong(this.output(i[4]||i[3]||i[2]||i[1]));else if(i=this.rules.em.exec(e))e=e.substring(i[0].length),a+=this.renderer.em(this.output(i[6]||i[5]||i[4]||i[3]||i[2]||i[1]));else if(i=this.rules.code.exec(e))e=e.substring(i[0].length),a+=this.renderer.codespan(We(i[2].trim(),!0));else if(i=this.rules.br.exec(e))e=e.substring(i[0].length),a+=this.renderer.br();else if(i=this.rules.del.exec(e))e=e.substring(i[0].length),a+=this.renderer.del(this.output(i[1]));else if(i=this.rules.autolink.exec(e))e=e.substring(i[0].length),"@"===i[2]?(r=We(this.mangle(i[1])),s="mailto:"+r):(r=We(i[1]),s=r),a+=this.renderer.link(s,null,r);else if(this.inLink||!(i=this.rules.url.exec(e))){if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.inRawBlock?a+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):We(i[0]):i[0]):a+=this.renderer.text(We(this.smartypants(i[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else{if("@"===i[2])r=We(i[0]),s="mailto:"+r;else{do{l=i[0],i[0]=this.rules._backpedal.exec(i[0])[0]}while(l!==i[0]);r=We(i[0]),s="www."===i[1]?"http://"+r:r}e=e.substring(i[0].length),a+=this.renderer.link(s,null,r)}return a}static escapes(e){return e?e.replace(t.rules._escapes,"$1"):e}outputLink(t,e){const n=e.href,r=e.title?We(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(n,r,this.output(t[1])):this.renderer.image(n,r,We(t[1]))}smartypants(t){return this.options.smartypants?t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):t}mangle(t){if(!this.options.mangle)return t;const e=t.length;let n,r="",s=0;for(;s<e;s++)n=t.charCodeAt(s),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}},Ve=class{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,e,n){return""+n}image(t,e,n){return""+n}br(){return""}};const{defaults:Xe}=ae,{merge:Ge,unescape:Ye}=Oe;var Qe=class t{constructor(t){this.tokens=[],this.token=null,this.options=t||Xe,this.options.renderer=this.options.renderer||new Ie,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new De}static parse(e,n){return new t(n).parse(e)}parse(t){this.inline=new Ke(t.links,this.options),this.inlineText=new Ke(t.links,Ge({},this.options,{renderer:new Ve})),this.tokens=t.reverse();let e="";for(;this.next();)e+=this.tok();return e}next(){return this.token=this.tokens.pop(),this.token}peek(){return this.tokens[this.tokens.length-1]||0}parseText(){let t=this.token.text;for(;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)}tok(){let t="";switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,Ye(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":{let e,n,r,s,o="";for(r="",e=0;e<this.token.header.length;e++)r+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(o+=this.renderer.tablerow(r),e=0;e<this.token.cells.length;e++){for(n=this.token.cells[e],r="",s=0;s<n.length;s++)r+=this.renderer.tablecell(this.inline.output(n[s]),{header:!1,align:this.token.align[s]});t+=this.renderer.tablerow(r)}return this.renderer.table(o,t)}case"blockquote_start":for(t="";"blockquote_end"!==this.next().type;)t+=this.tok();return this.renderer.blockquote(t);case"list_start":{t="";const e=this.token.ordered,n=this.token.start;for(;"list_end"!==this.next().type;)t+=this.tok();return this.renderer.list(t,e,n)}case"list_item_start":{t="";const e=this.token.loose,n=this.token.checked,r=this.token.task;if(this.token.task)if(e)if("text"===this.peek().type){const t=this.peek();t.text=this.renderer.checkbox(n)+" "+t.text}else this.tokens.push({type:"text",text:this.renderer.checkbox(n)});else t+=this.renderer.checkbox(n);for(;"list_item_end"!==this.next().type;)t+=e||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(t,r,n)}case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:{const t='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(t);console.log(t)}}}};const{merge:tn,checkSanitizeDeprecation:en,escape:nn}=Oe,{getDefaults:rn,changeDefaults:sn,defaults:on}=ae;function ln(t,e,n){if(null==t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(n||"function"==typeof e){n||(n=e,e=null),e=tn({},ln.defaults,e||{}),en(e);const r=e.highlight;let s,o,i=0;try{s=Pe.lex(t,e)}catch(t){return n(t)}o=s.length;const l=function(t){if(t)return e.highlight=r,n(t);let o;try{o=Qe.parse(s,e)}catch(e){t=e}return e.highlight=r,t?n(t):n(null,o)};if(!r||r.length<3)return l();if(delete e.highlight,!o)return l();for(;i<s.length;i++)!function(t){"code"!==t.type?--o||l():r(t.text,t.lang,(function(e,n){return e?l(e):null==n||n===t.text?--o||l():(t.text=n,t.escaped=!0,void(--o||l()))}))}(s[i])}else try{return e=tn({},ln.defaults,e||{}),en(e),Qe.parse(Pe.lex(t,e),e)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",(e||ln.defaults).silent)return"<p>An error occurred:</p><pre>"+nn(t.message+"",!0)+"</pre>";throw t}}ln.options=ln.setOptions=function(t){return tn(ln.defaults,t),sn(ln.defaults),ln},ln.getDefaults=rn,ln.defaults=on,ln.Parser=Qe,ln.parser=Qe.parse,ln.Renderer=Ie,ln.TextRenderer=Ve,ln.Lexer=Pe,ln.lexer=Pe.lex,ln.InlineLexer=Ke,ln.inlineLexer=Ke.output,ln.Slugger=De,ln.parse=ln;var an=ln;let cn=!1;async function un(t){await async function(t){return new Promise((e=>setTimeout(e,t)))}(0);const e=new an.Renderer;let n=0;const r=()=>`__special_katext_id_${n++}__`,s={};function o(t){return t.replace("&gt;",">").replace("&lt;",">").replace("&quot;","'")}function i(t){return t=(t=t.replace(/\$\$([\s\S]+?)\$\$/g,((t,e)=>{const n=r();return s[n]={type:"block",expression:o(e)},n}))).replace(/\$([^\n\s]+?)\$/g,((t,e)=>{const n=r();return s[n]={type:"inline",expression:o(e)},n}))}const l=e.listitem;e.listitem=function(t,e,n){return l(i(t),e,n)};const a=e.paragraph;e.paragraph=function(t){return a(i(t))};const c=e.tablecell;function u(t){an.setOptions({renderer:e,highlight:t,pedantic:!1,gfm:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!0})}let d;if(e.tablecell=function(t,e){return c(i(t),e)},cn){const e=window.hljs;if(!e)throw new Error("can't load 'highlightjs' library for markdown");u(((t,n)=>{try{return n?e.highlight(t,{language:n}).value:t}catch(e){return t}})),d=an(t.dedent())}else{let e=!1;if(u(((t,n)=>(n&&(e=!0),t))),d=an(t.dedent()),e)return await Xt(["/vendor/highlight.js-11.0.1/default.min.css","/vendor/highlight.js-11.0.1/highlight.min.js"],"parallel"),cn=!0,un(t)}return d.includes("__special_katext_id_")&&(await Xt(["/vendor/katex-0.11.1/katex.min.js"],"parallel"),Xt(["/vendor/katex-0.11.1/katex.css"],"parallel").catch((t=>console.warn(`can't load styles for KaTeX, ${Et(t).message}`))),d=d.replace(/(__special_katext_id_\d+__)/g,((t,e)=>{let{type:n,expression:r}=s[e];return r=r.replace(/<br\/>/g,"\\\\"),window.katex.renderToString(r,{output:"html",displayMode:"block"==n,throwOnError:!1})}))),d}function dn(t){let e,r,s=t[0].html+"";return{c(){r=b(),e=new z(r)},m(t,n){e.m(s,t,n),u(t,r,n)},p(t,n){1&n&&s!==(s=t[0].html+"")&&e.p(s)},i:n,o:n,d(t){t&&d(r),t&&e.d()}}}function fn(t){let e,n;return e=new Dt({props:{error:t[0].error}}),{c(){et(e.$$.fragment)},m(t,r){nt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.error=t[0].error),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){rt(e,t)}}}function hn(t){let e,r;return e=new Jt({}),{c(){et(e.$$.fragment)},m(t,n){nt(e,t,n),r=!0},p:n,i(t){r||(W(e.$$.fragment,t),r=!0)},o(t){K(e.$$.fragment,t),r=!1},d(t){rt(e,t)}}}function pn(t){let e,n,r,s;const o=[hn,fn,dn],i=[];function l(t,e){return"empty"==t[0].state?0:"error"==t[0].state?1:2}return n=l(t),r=i[n]=o[n](t),{c(){e=f("div"),r.c(),y(e,"class","markdown")},m(t,r){u(t,e,r),i[n].m(e,null),s=!0},p(t,[s]){let a=n;n=l(t),n===a?i[n].p(t,s):(H(),K(i[a],1,1,(()=>{i[a]=null})),J(),r=i[n],r?r.p(t,s):(r=i[n]=o[n](t),r.c()),W(r,1),r.m(e,null))},i(t){s||(W(r),s=!0)},o(t){K(r),s=!1},d(t){t&&d(e),i[n].d()}}}function gn(t,e,n){let{markdown:r}=e,s={state:"empty"};return t.$$set=t=>{"markdown"in t&&n(1,r=t.markdown)},t.$$.update=()=>{if(3&t.$$.dirty&&("empty"==s.state||s.markdown!=r)){const t=r;un(r).then((e=>{n(0,s={state:"success",markdown:t,html:e})})).catch((e=>{const r=Et(e,"Unknown error while processing markdown").message;n(0,s={state:"error",markdown:t,error:r})}))}},[s,r]}class mn extends it{constructor(t){super(),ot(this,t,gn,pn,l,{markdown:1})}}function bn(t){let e;return{c(){e=f("a"),e.textContent="PL0T",y(e,"class","text-gray-300 svelte-9crpr5"),y(e,"href","http://pl0t.com"),y(e,"target","_blank")},m(t,n){u(t,e,n)},p:n,i:n,o:n,d(t){t&&d(e)}}}class wn extends it{constructor(t){super(),ot(this,t,null,bn,l,{})}}function $n(t,e,n){const r=t.slice();return r[1]=e[n],r}function yn(t){let e,n=t[0],r=[];for(let e=0;e<n.length;e+=1)r[e]=xn($n(t,n,e));return{c(){e=f("div");for(let t=0;t<r.length;t+=1)r[t].c();y(e,"class","text-sm mt-1 mx-1")},m(t,n){u(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,s){if(1&s){let o;for(n=t[0],o=0;o<n.length;o+=1){const i=$n(t,n,o);r[o]?r[o].p(i,s):(r[o]=xn(i),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&d(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(r,t)}}}function _n(t){let e;return{c(){e=f("div"),e.textContent="unknown message type"},m(t,n){u(t,e,n)},p:n,d(t){t&&d(e)}}}function vn(t){let e,n,r,s,o=t[1].message+"";return{c(){e=f("div"),n=f("span"),n.textContent="error",r=m(),s=g(o),y(n,"class","bg-red-400 px-2 rounded")},m(t,o){u(t,e,o),c(e,n),c(e,r),c(e,s)},p(t,e){1&e&&o!==(o=t[1].message+"")&&_(s,o)},d(t){t&&d(e)}}}function kn(t){let e,n,r,s,o=t[1].message+"";return{c(){e=f("div"),n=f("span"),n.textContent="warn",r=m(),s=g(o),y(n,"class","bg-yellow-400 px-2 rounded")},m(t,o){u(t,e,o),c(e,n),c(e,r),c(e,s)},p(t,e){1&e&&o!==(o=t[1].message+"")&&_(s,o)},d(t){t&&d(e)}}}function xn(t){let e;function n(t,e){return"warn"==t[1].type?kn:"error"==t[1].type?vn:_n}let r=n(t),s=r(t);return{c(){s.c(),e=b()},m(t,n){s.m(t,n),u(t,e,n)},p(t,o){r===(r=n(t))&&s?s.p(t,o):(s.d(1),s=r(t),s&&(s.c(),s.m(e.parentNode,e)))},d(t){s.d(t),t&&d(e)}}}function jn(t){let e,r=t[0].length>0&&yn(t);return{c(){r&&r.c(),e=b()},m(t,n){r&&r.m(t,n),u(t,e,n)},p(t,[n]){t[0].length>0?r?r.p(t,n):(r=yn(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:n,o:n,d(t){r&&r.d(t),t&&d(e)}}}function On(t,e,n){let{messages:r}=e;return t.$$set=t=>{"messages"in t&&n(0,r=t.messages)},[r]}class En extends it{constructor(t){super(),ot(this,t,On,jn,l,{messages:0})}}function zn(t){return t.map((t=>"string"==typeof t?{type:"warn",message:t}:t)).unique((({message:t})=>t)).sort_by((({type:t,message:e})=>`${t} ${e}`))}function Sn(t){let e,r;return e=new Dt({props:{error:"Data images not supported yet"}}),{c(){et(e.$$.fragment)},m(t,n){nt(e,t,n),r=!0},p:n,i(t){r||(W(e.$$.fragment,t),r=!0)},o(t){K(e.$$.fragment,t),r=!1},d(t){rt(e,t)}}}function An(t){let e,r,s;return{c(){e=f("img"),e.src!==(r=t[1].url)&&y(e,"src",r),y(e,"alt",s=t[0].id)},m(t,n){u(t,e,n)},p(t,n){2&n&&e.src!==(r=t[1].url)&&y(e,"src",r),1&n&&s!==(s=t[0].id)&&y(e,"alt",s)},i:n,o:n,d(t){t&&d(e)}}}function qn(t){let e,n,r,s;const o=[An,Sn],i=[];function l(t,e){return"object"==typeof t[1]&&"url"in t[1]?0:1}return n=l(t),r=i[n]=o[n](t),{c(){e=f("div"),r.c(),y(e,"class","ImageBlockContent")},m(t,r){u(t,e,r),i[n].m(e,null),s=!0},p(t,[s]){let a=n;n=l(t),n===a?i[n].p(t,s):(H(),K(i[a],1,1,(()=>{i[a]=null})),J(),r=i[n],r?r.p(t,s):(r=i[n]=o[n](t),r.c()),W(r,1),r.m(e,null))},i(t){s||(W(r),s=!0)},o(t){K(r),s=!1},d(t){t&&d(e),i[n].d()}}}const Cn={match_and_normalize:t=>{if(is_object(t)&&"image"in t)return t}};function Mn(t,e,n){let r,{block:s}=e,{is_narrow:o}=e;return discard(o),t.$$set=t=>{"block"in t&&n(0,s=t.block),"is_narrow"in t&&n(2,o=t.is_narrow)},t.$$.update=()=>{1&t.$$.dirty&&n(1,r=s.image)},[s,r,o]}var Rn=Object.freeze({__proto__:null,default:class extends it{constructor(t){super(),ot(this,t,Mn,qn,l,{block:0,is_narrow:2})}},definition:Cn});function Tn(t){let e,n;return e=new Dt({props:{error:t[3]}}),{c(){et(e.$$.fragment)},m(t,r){nt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.error=t[3]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){rt(e,t)}}}function Bn(t){let e,n;return e=new mn({props:{markdown:t[2]}}),{c(){et(e.$$.fragment)},m(t,r){nt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.markdown=t[2]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){rt(e,t)}}}function Ln(t){let e,r;return e=new Jt({}),{c(){et(e.$$.fragment)},m(t,n){nt(e,t,n),r=!0},p:n,i(t){r||(W(e.$$.fragment,t),r=!0)},o(t){K(e.$$.fragment,t),r=!1},d(t){rt(e,t)}}}function Pn(t){let e,n,r,s={ctx:t,current:null,token:null,hasCatch:!0,pending:Ln,then:Bn,catch:Tn,value:2,error:3,blocks:[,,,]};return V(n=ee(t[0].text),s),{c(){e=f("div"),s.block.c(),y(e,"class","TextBlockContent")},m(t,n){u(t,e,n),s.block.m(e,s.anchor=null),s.mount=()=>e,s.anchor=null,r=!0},p(e,[r]){t=e,s.ctx=t,1&r&&n!==(n=ee(t[0].text))&&V(n,s)||X(s,t,r)},i(t){r||(W(s.block),r=!0)},o(t){for(let t=0;t<3;t+=1){K(s.blocks[t])}r=!1},d(t){t&&d(e),s.block.d(),s.token=null,s=null}}}const Nn={match_and_normalize:t=>is_string(t)?{text:t}:is_object(t)&&"text"in t?t:void 0};function Un(t,e,n){let{block:r}=e,{is_narrow:s}=e;return discard(s),t.$$set=t=>{"block"in t&&n(0,r=t.block),"is_narrow"in t&&n(1,s=t.is_narrow)},[r,s]}var Fn=Object.freeze({__proto__:null,default:class extends it{constructor(t){super(),ot(this,t,Un,Pn,l,{block:0,is_narrow:1})}},definition:Nn});const In=["width","height","config"];function Dn(t){for(const e in t)if(In.indexOf(e)<0)throw new Error(`invalid property '${e}'`);return br("width",t.width,["number","undefined"]),br("height",t.height,["number","undefined"]),t}const Zn=["linear","linear-closed","step","step-before","step-after","basis","basis-open","basis-closed","cardinal","cardinal-open","cardinal-closed","bundle","monotone"];const Hn=["point","circle","line","area","bar","rect","rule","square","text","tick","trail"];function Jn(t){if(Hn.indexOf(t)<0)throw new Error(`invalid mark '${t}', available are ${Hn.join(", ")}`);return t}const Wn=["mark","color","size","point","interpolate","opacity","thickness","vega"];function Kn(t){for(const e in t)if(Wn.indexOf(e)<0)throw new Error(`unknown mark property '${e}', available are ${Wn.join(", ")}`);const{mark:e,color:n,size:r,point:s,interpolate:o,opacity:i,thickness:l,vega:a}=t;return br("color",n,["string","undefined"]),br("size",r,["number","undefined"]),br("point",s,["boolean","undefined"]),o&&function(t){if(Zn.indexOf(t)<0)throw new Error(`invalid interpolate '${t}', available are ${Zn.join(", ")}`)}(o),br("opacity",i,["number","undefined"]),br("thickness",l,["number","undefined"]),br("vega",a,["object","undefined"]),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({type:Jn(e)},void 0!==n?{color:n}:{}),void 0!==r?{size:r}:{}),void 0!==s?{point:s}:{}),void 0!==o?{interpolate:o}:{}),void 0!==i?{opacity:i}:{}),void 0!==l?{thickness:l}:{}),void 0!==a?a:{})}const Vn=["nominal","ordinal","quantitative","temporal"];const Xn=["linear","pow","sqrt","symlog","log","time","utc","ordinal","band","point","bin-ordinal","quantile","quantize","threshold"];const Gn=["count","valid","missing","distinct","sum","mean","average","variance","variancep","stdev","stdevp","stderr","median","q1","q3","ci0","ci1","min","max","argmin","argmax","product"];const Yn=["x","y","x2","y2","xError","yError","xError2","yError2","longitude","latitude","longitude2","latitude2","color","opacity","fillOpacity","strokeOpacity","shape","size","strokeWidth","text","tooltip","href","detail","key","order"];const Qn=["year","yearquarter","yearquartermonth","yearmonth","yearmonthdate","yearmonthdatehours","yearmonthdatehoursminutes","yearmonthdatehoursminutesseconds","quarter","quartermonth","month","monthdate","date","day","hours","hoursminutes","hoursminutesseconds","minutes","minutesseconds","seconds","secondsmilliseconds","milliseconds"];function tr(t){if(Qn.indexOf(t)<0)throw new Error(`invalid time unit '${t}', available are ${Qn.join(", ")}`);return t}function er(t){if(br("bin",t,["string","number","boolean","undefined"]),"string"==typeof t&&"binned"!=t)throw new Error("bin should have type of \"boolean | number | 'binned'\"");return"boolean"==typeof t||"string"==typeof t?t:{base:t,maxbins:t}}const nr=["calculate","as"];function rr(t){for(const e in t)if(nr.indexOf(e)<0)throw new Error(`unknown calculate property '${e}', available are ${nr.join(", ")}`);return t}const sr=["filter"];function or(t){for(const e in t)if(sr.indexOf(e)<0)throw new Error(`unknown filter property '${e}', available are ${sr.join(", ")}`);return t}const ir=["type","aggregate","legend","title","labels","time_unit","timeUnit","bin","zero","domain","range","scale","value","override_value","scheme","reverse","vega"];function lr(t){const e=[];for(const n in t)if(ir.indexOf(n)<0){if(Yn.indexOf(n)<0)throw new Error(`unknown encoding property '${n}', available are ${Yn.join(", ")}, ${ir.join(", ")}`);e.push(n)}if(0==e.length)throw new Error(`encoding channel not specified, please specify one of ${Yn.join(", ")}`);if(e.length>1)throw new Error(`only one channel allowed in the same encoding, leave only one of ${e.join(", ")}`);t.type&&function(t){if(Vn.indexOf(t)<0)throw new Error(`invalid field type '${t}', available are ${Vn.join(", ")}`)}(t.type),t.aggregate&&function(t){if(Gn.indexOf(t)<0)throw new Error(`invalid aggregate '${t}', available are ${Gn.join(", ")}`)}(t.aggregate),br("legend",t.legend,["string","boolean","undefined"]),br("title",t.title,["string","boolean","undefined"]),br("labels",t.labels,["boolean","undefined"]),t.time_unit&&tr(t.time_unit),t.timeUnit&&tr(t.timeUnit),t.bin&&er(t.bin),br("zero",t.zero,["boolean","undefined"]),t.scale&&function(t){if(Xn.indexOf(t)<0)throw new Error(`invalid scale type '${t}', available are ${Xn.join(", ")}`)}(t.scale),t.domain&&function(t){t.map((t=>(br("scale domain",t,["number","string","boolean"]),t)))}(t.domain),t.range&&function(t){"string"==typeof t?br("scale range",t,["string"]):t.map((t=>(br("scale domain",t,["number","string"]),t)))}(t.range),br("scheme",t.scheme,["string","undefined"]),br("reverse",t.reverse,["boolean","undefined"]),br("vega",t.vega,["object","undefined"]);const{type:n,title:r,labels:s,aggregate:o,legend:i,timeUnit:l,time_unit:a,bin:c,zero:u,domain:d,range:f,scale:h,value:p,scheme:g,reverse:m,vega:b,override_value:w}=t,$=Yn.find((e=>e in t));if(!$)throw new Error(`Channel not found in ${JSON.stringify(t)}!`);const y=t[$],_=Object.assign(Object.assign(Object.assign({},void 0!==b&&"axis"in b?b.axis:{}),r&&"string"==typeof r?{title:r}:r?{}:{title:null}),void 0!==s?{labels:s}:{}),v=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},void 0!==b&&"scale"in b?b.scale:{}),void 0!==h?{type:h}:{}),void 0!==d?{nice:!1}:{}),void 0!==u?{zero:u}:{}),void 0!==d?{domain:d}:{}),void 0!==f?{range:f}:{}),void 0!==g?{scheme:g}:{}),void 0!==m?{reverse:m}:{});let k,x=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},void 0!==b?b:{}),""!==y?{field:y}:{}),{type:n||"quantitative"}),void 0!==o?{aggregate:o}:{}),void 0!==i?{legend:i}:{legend:!1}),void 0!==l?{timeUnit:l}:{}),void 0!==a?{timeUnit:a}:{}),Object.keys(_).length>0?{axis:_}:{}),Object.keys(v).length>0?{scale:v}:{}),void 0!==c?{bin:er(c)}:{});if(p){const t=function(t,e,n){const r=t=>{if(void 0===t)throw new Error("encoding value shouldn't be undefined");return br("encoding value",t,["number","string","boolean"]),t};if(Array.isArray(t)){if("condition"in n)throw new Error("Conditional value can't be used with condition!");if(2==t.length){const[e,s]=t;return[Object.assign(Object.assign({},n),{condition:{test:e,value:r(s)}}),void 0]}if(3==t.length){const[e,s,o]=t;return[Object.assign(Object.assign({},n),{value:r(o),condition:{test:e,value:r(s)}}),void 0]}throw new Error("encoding value should be a simple value or array with 2 ['datum.value > 0', 'green'] or 3 elements ['datum.value > 0', 1, -1]")}if(ar.indexOf(e)>=0){if(""!=n.field&&void 0!==n.field&&null!==n.field)throw new Error(`value on ${ar.join(", ")} channels cannot be used with 'field'`);const e=[{explicit_value:r(t)}];return[Object.assign(Object.assign({},n),{field:"explicit_value"}),e]}return[Object.assign(Object.assign({},n),{value:r(t)}),void 0]}(p,$,x);x=t[0],k=t[1]}return[$,x,k]}const ar=["x","y"];const cr=["concat"];function ur(t){for(const e in t)if(cr.indexOf(e)<0)throw new Error(`unknown concat property '${e}', available are ${cr.join(", ")}`);return t}function dr(t){const e=[];let n,r={},s=[],o=[],i={};const l=[],a=[];for(const c of t)if("string"==typeof c)e.push(Jn(c));else if("mark"in c)e.push(Kn(c));else if(Array.isArray(c))o=[...o,fr(c)];else if("calculate"in c)s.push(rr(c));else if("filter"in c)s.push(or(c));else if("facet"in c||"row"in c||"column"in c)l.push(c);else if("concat"in c)a.push(ur(c));else if("height"in c||"width"in c||"config"in c)i=Object.assign(Object.assign({},i),Dn(c));else if(Yn.some((t=>t in c))){const[t,e,n]=lr(c);if(t in e)throw new Error(`Can't redefine channel ${t}!`);if(void 0!==n)throw new Error(`Explicit value for '${t}' allowed only inside of a layer`);r=Object.assign(Object.assign({},r),{[t]:e})}else{if(!("vega"in c))throw new Error(`unknown plot part ${JSON.stringify(c)}`);n=c.vega}if(e.length>1)throw new Error(`Multiple marks found ${e.join(", ")}`);const c=Object.assign(Object.assign(Object.assign({},s.length>0?{transform:s}:{}),i),n||{});function u(){return Object.assign(Object.assign(Object.assign({},e.length>0?{mark:e[0]}:{}),Object.keys(r).length>0?{encoding:r}:{}),o.length>0?{layer:o}:{})}if(l.length>0){if(a.length>0)throw new Error("concat can't be used with facet");return function(t,e,n){let r;for(const e of t)"facet"in e&&(r=e);if(r){if(t.length>1)throw new Error("Can't other facets with 'facet' keyword");return Object.assign(Object.assign(Object.assign({facet:{field:r.facet,type:r.type||"ordinal",header:{title:null}}},void 0!==r.columns?{columns:r.columns}:{}),{spec:e}),n)}{if(t.filter((t=>"row"in t)).length>1)throw new Error("Facet can't have more than one row");if(t.filter((t=>"column"in t)).length>1)throw new Error("Facet can't have more than one column");let r,s;for(const e of t)"row"in e&&(r=e),"column"in e&&(s=e);return Object.assign({facet:Object.assign(Object.assign({},r?{row:{field:r.row,type:r.type||"ordinal",header:{title:null}}}:{}),s?{column:{field:s.column,type:s.type||"ordinal",header:{title:null}}}:{}),spec:e},n)}}(l,u(),c)}if(a.length>0){if(a.length>1)throw new Error("there could be only one concat");if(l.length>0)throw new Error("concat can't be used with facet");if(e.length>0)throw new Error("top level mark can't be used with concat");if(Object.keys(r).length>0)throw new Error("top level encoding can't be used with concat");if(0==o.length)throw new Error("concat requires at least one layer");return Object.assign({["vertical"==a[0].concat?"vconcat":"hconcat"]:o},c)}return Object.assign(Object.assign({},u()),c)}function fr(t){const e=[],n=[];let r,s,o={},i={};for(const l of t)if("string"==typeof l)e.push(Jn(l));else if("mark"in l)e.push(Kn(l));else if("calculate"in l)n.push(rr(l));else if("filter"in l)n.push(or(l));else if("height"in l||"width"in l)i=Object.assign(Object.assign({},i),Dn(l));else if(Yn.some((t=>t in l))){const[t,e,n]=lr(l);if(t in e)throw new Error(`Can't redefine channel ${t}!`);s=n,o=Object.assign(Object.assign({},o),{[t]:e})}else{if(!("vega"in l))throw new Error(`unknown plot layer part ${JSON.stringify(l)}`);r=l.vega}if(e.length>1)throw new Error(`Multiple marks found ${e.join(", ")}`);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n.length>0?{transform:n}:{}),e.length>0?{mark:e[0]}:{}),Object.keys(o).length>0?{encoding:o}:{}),i),s?{data:{values:s}}:{}),r||{})}function hr(t,e,n=!1){const r=n?gr:mr;if(t instanceof Array)return 0==t.length?[]:Array.isArray(t[0])?function(t,e){return t.map((t=>{const n={};for(let r=0;r<t.length;r++){if(!(r<e.length))throw new Error("there are more values in row than columns");n[e[r]]=t[r]}return n}))}(t,e||pr).map(r):t.map(r);{if(!(t instanceof Object))throw new Error("Arrays data expected to be an Object");const e=Object.keys(t);if(0==e.length)throw new Error("Empty arrays data!");const n=e[0],s=t[n].length;for(const r of e)if(t[r].length!=s)throw new Error(`Arrays data has arrays of different length ${r} - ${t[r].length} and ${n} - ${s}`);const o=[];for(let n=0;n<s;n++){const r={};for(const s of e)r[s]=t[s][n];o.push(r)}return o.map(r)}}const pr="abcdefghijklmnopqrstuvwxyz".split("");function gr(t){const e={};for(let n in t){const r=t[n];e[n]=null!==r?r:void 0}return e}function mr(t){const e={};for(let n in t){const r=t[n];null!=r&&(e[n]=r)}return e}function br(t,e,n){if(n.indexOf(typeof e)<0)throw new Error(`invalid type for '${t}' allowed types ${n.join(", ")}`)}function wr(t){t.finalize()}async function $r({chart:e,data:n,vega_options:r,is_narrow:s,suggested_width_px:o,vega_view:i,container_el:l}){if(await Xt(["/vendor/vega/vega-5.9.1.js","/vendor/vega/vega-lite-4.0.2.js","/vendor/vega/vega-embed-6.2.1.js"],"serial"),i&&wr(i),!l)return;function a(e){return void 0!==o&&s?function(t,e,n){return t.width&&t.width<e||(t=Object.assign(Object.assign({},t),{width:e})),t.height&&t.height<n||(t=Object.assign(Object.assign({},t),{height:n})),t}(e,o,t.height_in_narrow_width_mode):e}let c=a("vega_spec"in e?e.vega_spec:dr(e));n&&(c=Object.assign(Object.assign({},c),{data:{values:hr(n)}})),r=r||{};return(await window.vegaEmbed(l,Object.assign(Object.assign({},function({suggested_width_px:t}){return{autosize:{type:"fit",contains:"padding"},width:t}}({suggested_width_px:o})),c),Object.assign(Object.assign({},{}),r))).view}function yr(t){let e,n;return e=new Dt({props:{error:t[2].error}}),{c(){et(e.$$.fragment)},m(t,r){nt(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.error=t[2].error),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){rt(e,t)}}}function _r(t){let e,r;return e=new Jt({}),{c(){et(e.$$.fragment)},m(t,n){nt(e,t,n),r=!0},p:n,i(t){r||(W(e.$$.fragment,t),r=!0)},o(t){K(e.$$.fragment,t),r=!1},d(t){rt(e,t)}}}function vr(t){let e,n,r,s,o,i,l,a,h,p,g;const b=[_r,yr],$=[];function _(t,e){return"empty"==t[2].state?0:"error"==t[2].state?1:-1}return~(n=_(t))&&(r=$[n]=b[n](t)),{c(){e=f("div"),r&&r.c(),s=m(),o=f("div"),i=f("div"),a=m(),h=f("div"),k(i,"padding-right","0"),y(i,"class",l="success"==t[2].state?"":"invisible"),k(h,"height","0"),k(h,"width","100%"),L((()=>t[9].call(h))),y(e,"class","VegaChart")},m(r,l){u(r,e,l),~n&&$[n].m(e,null),c(e,s),c(e,o),c(o,i),t[8](i),c(e,a),c(e,h),p=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=f("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=E();let s;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=w(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{s=w(n.contentWindow,"resize",e)}),c(t,n),()=>{(r||s&&n.contentWindow)&&s(),d(n)}}(h,t[9].bind(h)),g=!0},p(t,[o]){let a=n;n=_(t),n===a?~n&&$[n].p(t,o):(r&&(H(),K($[a],1,1,(()=>{$[a]=null})),J()),~n?(r=$[n],r?r.p(t,o):(r=$[n]=b[n](t),r.c()),W(r,1),r.m(e,s)):r=null),(!g||4&o&&l!==(l="success"==t[2].state?"":"invisible"))&&y(i,"class",l)},i(t){g||(W(r),g=!0)},o(t){K(r),g=!1},d(r){r&&d(e),~n&&$[n].d(),t[8](null),p()}}}function kr(t,e,n){let{chart:r}=e,{data:s}=e,{vega_options:o}=e,{is_narrow:i=!1}=e,l={state:"empty"};const a=new Wt(void 0);let c,u,d;const f=(t=>{t!=d&&n(7,d=t)}).debounce(100,!0);return function(t){A().$$.on_destroy.push(t)}((()=>{a.get()&&wr(a.get())})),t.$$set=t=>{"chart"in t&&n(3,r=t.chart),"data"in t&&n(4,s=t.data),"vega_options"in t&&n(5,o=t.vega_options),"is_narrow"in t&&n(6,i=t.is_narrow)},t.$$.update=()=>{2&t.$$.dirty&&f(u),249&t.$$.dirty&&null!=d&&null!=c&&$r({chart:r,data:s,vega_options:o,is_narrow:i,suggested_width_px:d,vega_view:a.get(),container_el:c}).then((t=>{a.set(t),n(2,l={state:"success"})})).catch((t=>{const e=Et(t,"Unknown error while processing vega lite");n(2,l={state:"error",error:e})}))},[c,u,l,r,s,o,i,d,function(t){C[t?"unshift":"push"]((()=>{c=t,n(0,c)}))},function(){u=this.clientWidth,n(1,u)}]}class xr extends it{constructor(t){super(),ot(this,t,kr,vr,l,{chart:3,data:4,vega_options:5,is_narrow:6})}}function jr(t){let e,n;return e=new Dt({props:{error:t[4]}}),{c(){et(e.$$.fragment)},m(t,r){nt(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.error=t[4]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){rt(e,t)}}}function Or(t){let e,n;return e=new xr({props:{chart:t[1].chart,data:t[3],vega_options:t[1].vega_options,is_narrow:t[0]}}),{c(){et(e.$$.fragment)},m(t,r){nt(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.chart=t[1].chart),2&n&&(r.data=t[3]),2&n&&(r.vega_options=t[1].vega_options),1&n&&(r.is_narrow=t[0]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){rt(e,t)}}}function Er(t){let e,r;return e=new Jt({}),{c(){et(e.$$.fragment)},m(t,n){nt(e,t,n),r=!0},p:n,i(t){r||(W(e.$$.fragment,t),r=!0)},o(t){K(e.$$.fragment,t),r=!1},d(t){rt(e,t)}}}function zr(t){let e,n,r,s={ctx:t,current:null,token:null,hasCatch:!0,pending:Er,then:Or,catch:jr,value:3,error:4,blocks:[,,,]};return V(n=ee(t[1].data),s),{c(){e=f("div"),s.block.c(),y(e,"class","ChartBlockContent")},m(t,n){u(t,e,n),s.block.m(e,s.anchor=null),s.mount=()=>e,s.anchor=null,r=!0},p(e,[r]){t=e,s.ctx=t,2&r&&n!==(n=ee(t[1].data))&&V(n,s)||X(s,t,r)},i(t){r||(W(s.block),r=!0)},o(t){for(let t=0;t<3;t+=1){K(s.blocks[t])}r=!1},d(t){t&&d(e),s.block.d(),s.token=null,s=null}}}const Sr={match_and_normalize:t=>{if(is_object(t)&&"data"in t&&"chart"in t)return t}};function Ar(t,e,n){let{block:r}=e,{is_narrow:s}=e;discard(s);let o=r;return t.$$set=t=>{"block"in t&&n(2,r=t.block),"is_narrow"in t&&n(0,s=t.is_narrow)},t.$$.update=()=>{6&t.$$.dirty&&o.hash!=r.hash&&n(1,o=r)},[s,o,r]}var qr=Object.freeze({__proto__:null,default:class extends it{constructor(t){super(),ot(this,t,Ar,zr,l,{block:2,is_narrow:0})}},definition:Sr});function Cr(t){switch(t){case"left":return"text-left";case"center":return"text-center";case"right":return"text-right"}}function Mr(t,e,n){const r=t.slice();return r[4]=e[n],r[6]=n,r}function Rr(t){let e;return{c(){e=g(t[1])},m(t,n){u(t,e,n)},p(t,n){2&n&&_(e,t[1])},d(t){t&&d(e)}}}function Tr(t){let e,n=[],r=new Map,s=t[2];const o=t=>t[6];for(let e=0;e<s.length;e+=1){let i=Mr(t,s,e),l=o(i);r.set(l,n[e]=Lr(l,i))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=b()},m(t,r){for(let e=0;e<n.length;e+=1)n[e].m(t,r);u(t,e,r)},p(t,i){4&i&&(s=t[2],n=Q(n,i,o,1,t,s,r,e.parentNode,G,Lr,e,Mr))},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&d(e)}}}function Br(t){let e;return{c(){e=f("br")},m(t,n){u(t,e,n)},d(t){t&&d(e)}}}function Lr(t,e){let n,r,s,o=e[4]+"",i=e[6]<e[2].length-1&&Br();return{key:t,first:null,c(){n=g(o),r=m(),i&&i.c(),s=b(),this.first=n},m(t,e){u(t,n,e),u(t,r,e),i&&i.m(t,e),u(t,s,e)},p(t,r){e=t,4&r&&o!==(o=e[4]+"")&&_(n,o),e[6]<e[2].length-1?i||(i=Br(),i.c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null)},d(t){t&&d(n),t&&d(r),i&&i.d(t),t&&d(s)}}}function Pr(t){let e,r;function s(t,e){return void 0!==t[2]?Tr:void 0!==t[1]?Rr:void 0}let o=s(t),i=o&&o(t);return{c(){e=f("div"),i&&i.c(),y(e,"class",r=t[3]+" "+(t[0].wrap&&"text-wrap"))},m(t,n){u(t,e,n),i&&i.m(e,null)},p(t,[n]){o===(o=s(t))&&i?i.p(t,n):(i&&i.d(1),i=o&&o(t),i&&(i.c(),i.m(e,null))),1&n&&r!==(r=t[3]+" "+(t[0].wrap&&"text-wrap"))&&y(e,"class",r)},i:n,o:n,d(t){t&&d(e),i&&i.d()}}}function Nr(t,e,n){let r,{options:s}=e,{value:o}=e;const i=Cr(s.align||"left")+(s.small?" text-xs":"");return t.$$set=t=>{"options"in t&&n(0,s=t.options),"value"in t&&n(1,o=t.value)},t.$$.update=()=>{3&t.$$.dirty&&n(2,r=void 0!==o&&s.break?o.split(s.break):void 0)},[s,o,r,i]}var Ur=Object.freeze({__proto__:null,default:class extends it{constructor(t){super(),ot(this,t,Nr,Pr,l,{options:0,value:1})}},compatibleTypes:["number","boolean","string"],align:function(t,e){return t.align||"left"}});function Fr(t){let e,r,s=(t[0]?t[1]:t[2])+"";return{c(){e=f("div"),r=g(s),y(e,"class","text-center")},m(t,n){u(t,e,n),c(e,r)},p(t,[e]){1&e&&s!==(s=(t[0]?t[1]:t[2])+"")&&_(r,s)},i:n,o:n,d(t){t&&d(e)}}}function Ir(t,e,n){let{options:r}=e,{value:s}=e;const o=r.true||"✓",i=r.false||"✗";return t.$$set=t=>{"options"in t&&n(3,r=t.options),"value"in t&&n(0,s=t.value)},[s,o,i,r]}var Dr=Object.freeze({__proto__:null,default:class extends it{constructor(t){super(),ot(this,t,Ir,Fr,l,{options:3,value:0})}},compatibleTypes:["boolean"]});function Zr(t){let e,r;return{c(){e=f("div"),r=g(t[0]),y(e,"class",t[1])},m(t,n){u(t,e,n),c(e,r)},p(t,[e]){1&e&&_(r,t[0])},i:n,o:n,d(t){t&&d(e)}}}function Hr(t,e,n){let r,{options:s}=e,{value:o}=e;const i="round"in s?s.round:2,l=Cr(s.align||"right")+(s.small?" text-xs":"");return t.$$set=t=>{"options"in t&&n(2,s=t.options),"value"in t&&n(3,o=t.value)},t.$$.update=()=>{8&t.$$.dirty&&n(0,r=void 0===o?"":""+(void 0!==i?o.round(i):o))},[r,l,s,o]}var Jr=Object.freeze({__proto__:null,default:class extends it{constructor(t){super(),ot(this,t,Hr,Zr,l,{options:2,value:3})}},compatibleTypes:["number"],align:function(t,e){return t.align||"right"}});function Wr(t,e,n){const r=t.slice();return r[7]=e[n],r}function Kr(t,e,n){const r=t.slice();return r[7]=e[n],r}function Vr(t,e,n){const r=t.slice();return r[7]=e[n],r}function Xr(t){let e,n,r;return{c(){e=h("svg"),n=h("title"),r=g(t[4]),y(e,"class","plot-line-format text-center")},m(t,s){u(t,e,s),c(e,n),c(n,r)},p(t,e){16&e&&_(r,t[4])},d(t){t&&d(e)}}}function Gr(t){let e;function n(t,e){return t[3]<=0?ts:t[2]>=0?Qr:Yr}let r=n(t),s=r(t);return{c(){s.c(),e=b()},m(t,n){s.m(t,n),u(t,e,n)},p(t,o){r===(r=n(t))&&s?s.p(t,o):(s.d(1),s=r(t),s&&(s.c(),s.m(e.parentNode,e)))},d(t){s.d(t),t&&d(e)}}}function Yr(t){let e,n,r,s,o=[],i=new Map,l=t[1].nticks;const a=t=>t[7];for(let e=0;e<l.length;e+=1){let n=Wr(t,l,e),r=a(n);i.set(r,o[e]=rs(r,n))}function f(t,e){return t[0]>0?os:ss}let p=f(t),m=p(t);return{c(){e=h("svg"),n=h("title"),r=g(t[4]);for(let t=0;t<o.length;t+=1)o[t].c();s=h("line"),m.c(),y(s,"x1","50%"),y(s,"y1","5%"),y(s,"x2","50%"),y(s,"y2","95%"),y(s,"stroke",ds),y(s,"stroke-width","1"),y(e,"class","plot-line-format text-center")},m(t,i){u(t,e,i),c(e,n),c(n,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);c(e,s),m.m(e,null)},p(t,n){16&n&&_(r,t[4]),2&n&&(l=t[1].nticks,o=Q(o,n,a,1,t,l,i,e,G,rs,s,Wr)),p===(p=f(t))&&m?m.p(t,n):(m.d(1),m=p(t),m&&(m.c(),m.m(e,null)))},d(t){t&&d(e);for(let t=0;t<o.length;t+=1)o[t].d();m.d()}}}function Qr(t){let e,n,r,s,o,i=[],l=new Map,a=t[1].nticks;const f=t=>t[7];for(let e=0;e<a.length;e+=1){let n=Kr(t,a,e),r=f(n);l.set(r,i[e]=is(r,n))}return{c(){e=h("svg"),n=h("title"),r=g(t[4]);for(let t=0;t<i.length;t+=1)i[t].c();s=h("rect"),y(s,"x","0%"),y(s,"y","25%"),y(s,"width",o=100*t[0]+"%"),y(s,"height","50%"),y(s,"fill",us),y(e,"class","plot-line-format text-center")},m(t,o){u(t,e,o),c(e,n),c(n,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);c(e,s)},p(t,n){16&n&&_(r,t[4]),2&n&&(a=t[1].nticks,i=Q(i,n,f,1,t,a,l,e,G,is,s,Kr)),1&n&&o!==(o=100*t[0]+"%")&&y(s,"width",o)},d(t){t&&d(e);for(let t=0;t<i.length;t+=1)i[t].d()}}}function ts(t){let e,n,r,s,o,i,l=[],a=new Map,f=t[1].nticks;const p=t=>t[7];for(let e=0;e<f.length;e+=1){let n=Vr(t,f,e),r=p(n);a.set(r,l[e]=ls(r,n))}return{c(){e=h("svg"),n=h("title"),r=g(t[4]);for(let t=0;t<l.length;t+=1)l[t].c();s=h("rect"),y(s,"x",o=100- -100*t[0]+"%"),y(s,"y","25%"),y(s,"width",i=-100*t[0]+"%"),y(s,"height","50%"),y(s,"fill",us),y(e,"class","plot-line-format text-center")},m(t,o){u(t,e,o),c(e,n),c(n,r);for(let t=0;t<l.length;t+=1)l[t].m(e,null);c(e,s)},p(t,n){16&n&&_(r,t[4]),2&n&&(f=t[1].nticks,l=Q(l,n,p,1,t,f,a,e,G,ls,s,Vr)),1&n&&o!==(o=100- -100*t[0]+"%")&&y(s,"x",o),1&n&&i!==(i=-100*t[0]+"%")&&y(s,"width",i)},d(t){t&&d(e);for(let t=0;t<l.length;t+=1)l[t].d()}}}function es(t){let e,n,r;return{c(){e=h("line"),y(e,"x1",n=50- -50*t[7]+"%"),y(e,"y1","5%"),y(e,"x2",r=50- -50*t[7]+"%"),y(e,"y2","25%"),y(e,"stroke",ds),y(e,"stroke-width","1")},m(t,n){u(t,e,n)},p(t,s){2&s&&n!==(n=50- -50*t[7]+"%")&&y(e,"x1",n),2&s&&r!==(r=50- -50*t[7]+"%")&&y(e,"x2",r)},d(t){t&&d(e)}}}function ns(t){let e,n,r;return{c(){e=h("line"),y(e,"x1",n=50+50*t[7]+"%"),y(e,"y1","5%"),y(e,"x2",r=50+50*t[7]+"%"),y(e,"y2","25%"),y(e,"stroke",ds),y(e,"stroke-width","1")},m(t,n){u(t,e,n)},p(t,s){2&s&&n!==(n=50+50*t[7]+"%")&&y(e,"x1",n),2&s&&r!==(r=50+50*t[7]+"%")&&y(e,"x2",r)},d(t){t&&d(e)}}}function rs(t,e){let n,r;function s(t,e){return t[7]>0?ns:es}let o=s(e),i=o(e);return{key:t,first:null,c(){n=b(),i.c(),r=b(),this.first=n},m(t,e){u(t,n,e),i.m(t,e),u(t,r,e)},p(t,n){o===(o=s(e=t))&&i?i.p(e,n):(i.d(1),i=o(e),i&&(i.c(),i.m(r.parentNode,r)))},d(t){t&&d(n),i.d(t),t&&d(r)}}}function ss(t){let e,n,r;return{c(){e=h("rect"),y(e,"x",n=50- -50*t[0]+"%"),y(e,"y","25%"),y(e,"width",r=-50*t[0]+"%"),y(e,"height","50%"),y(e,"fill",us)},m(t,n){u(t,e,n)},p(t,s){1&s&&n!==(n=50- -50*t[0]+"%")&&y(e,"x",n),1&s&&r!==(r=-50*t[0]+"%")&&y(e,"width",r)},d(t){t&&d(e)}}}function os(t){let e,n;return{c(){e=h("rect"),y(e,"x","50%"),y(e,"y","25%"),y(e,"width",n=50*t[0]+"%"),y(e,"height","50%"),y(e,"fill",us)},m(t,n){u(t,e,n)},p(t,r){1&r&&n!==(n=50*t[0]+"%")&&y(e,"width",n)},d(t){t&&d(e)}}}function is(t,e){let n,r,s;return{key:t,first:null,c(){n=h("line"),y(n,"x1",r=100*e[7]+"%"),y(n,"y1","5%"),y(n,"x2",s=100*e[7]+"%"),y(n,"y2","25%"),y(n,"stroke",ds),y(n,"stroke-width","1"),this.first=n},m(t,e){u(t,n,e)},p(t,o){e=t,2&o&&r!==(r=100*e[7]+"%")&&y(n,"x1",r),2&o&&s!==(s=100*e[7]+"%")&&y(n,"x2",s)},d(t){t&&d(n)}}}function ls(t,e){let n,r,s;return{key:t,first:null,c(){n=h("line"),y(n,"x1",r=100- -100*e[7]+"%"),y(n,"y1","5%"),y(n,"x2",s=100- -100*e[7]+"%"),y(n,"y2","25%"),y(n,"stroke",ds),y(n,"stroke-width","1"),this.first=n},m(t,e){u(t,n,e)},p(t,o){e=t,2&o&&r!==(r=100- -100*e[7]+"%")&&y(n,"x1",r),2&o&&s!==(s=100- -100*e[7]+"%")&&y(n,"x2",s)},d(t){t&&d(n)}}}function as(t){let e;function r(t,e){return t[1]&&null!=t[0]?Gr:Xr}let s=r(t),o=s(t);return{c(){o.c(),e=b()},m(t,n){o.m(t,n),u(t,e,n)},p(t,[n]){s===(s=r(t))&&o?o.p(t,n):(o.d(1),o=s(t),o&&(o.c(),o.m(e.parentNode,e)))},i:n,o:n,d(t){o.d(t),t&&d(e)}}}const cs=(t,e,n,r)=>{const s=[],o=r.scale||"linear";if(r.log_unit){"log"!=r.scale&&s.push(`column ${t} 'line.log_unit' could be used with log scale only`);const o=is_number(r.log_unit)?r.log_unit:1;function i(t){return t<0?t:(t*=o)<1?1:t}n=n.map((t=>void 0===t?void 0:i(t))),e=[i(e[0]),i(e[1])]}let l,a,c=[];if("log"==o){if(e[0]<=0)return s.push(`column ${t}, 'line.domain' can't be negative for log scale`),{column:n.map((t=>{})),warnings:s,stats:void 0};let o=Math.max(...e.map((t=>Math.log(Math.abs(t)))));c=n.map((e=>void 0===e?void 0:e>0?Math.log(e)/o:void s.push(`column ${t}, values can't be negative for log scale`))),l=(r.ticks||[]).filter_map((e=>e>0?Math.log(e)/o:void s.push(`column ${t}, ticks can't be negative for log scale`))),a=[Math.log(e[0])/o,Math.log(e[1])/o]}else{if("linear"!=o)throw new Error(`unknown scale ${o}`);{let t=Math.max(...e.map((t=>Math.abs(t))));0==t&&(t=1),c=n.map((e=>void 0===e?void 0:e/t)),l=(r.ticks||[]).map((e=>e/t)),a=[e[0]/t,e[1]/t]}}return{column:c,warnings:s,stats:{domain:e,ndomain:a,nticks:l}}},us="#111827",ds="#111827";function fs(t,e,n){let r,s,o,{options:i}=e,{value:l}=e,{converted:a}=e,{stats:c}=e;return t.$$set=t=>{"options"in t&&n(5,i=t.options),"value"in t&&n(6,l=t.value),"converted"in t&&n(0,a=t.converted),"stats"in t&&n(1,c=t.stats)},t.$$.update=()=>{2&t.$$.dirty&&n(2,[r,s]=c?c.ndomain:[0,0],r,(n(3,s),n(1,c))),99&t.$$.dirty&&n(4,o=[void 0!==a?`value: ${l}`:"missing",((null==c?void 0:c.nticks)||[]).length>0?`, ticks: [${(i.ticks||[]).join(", ")}]`:"",c?`domain: [${c.domain[0]}, ${c.domain[1]}]`:"",`scale: ${i.scale||"linear"}`].join(", "))},[a,c,r,s,o,i,l]}var hs=Object.freeze({__proto__:null,default:class extends it{constructor(t){super(),ot(this,t,fs,as,l,{options:5,value:6,converted:0,stats:1})}},compatibleTypes:["number"],extraValues:({ticks:t})=>t||[],align:function(t,e){if(t.align)return t.align;if(e){const[t,n]=e.ndomain;return n<=0?"right":t>=0?"left":"center"}return"center"},convertColumn:cs});function ps(t){let e,r;return{c(){e=f("div"),r=g(t[0]),y(e,"class",t[1])},m(t,n){u(t,e,n),c(e,r)},p(t,[e]){1&e&&_(r,t[0])},i:n,o:n,d(t){t&&d(e)}}}function gs(t,e,n){let r,{options:s}=e,{value:o}=e;const i=Cr(s.align||"left")+(s.small?" text-xs":"");return t.$$set=t=>{"options"in t&&n(2,s=t.options),"value"in t&&n(3,o=t.value)},t.$$.update=()=>{8&t.$$.dirty&&n(0,r=null==o?"":""+o)},[r,i,s,o]}var ms=Object.freeze({__proto__:null,default:class extends it{constructor(t){super(),ot(this,t,gs,ps,l,{options:2,value:3})}},compatibleTypes:[],align:function(t,e){return t.align||"left"}});const bs=t=>`<svg class="${t}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg>`;function ws(t){let e,n=`<svg class="${"h-5 w-5 p-0.5 text-gray-900"}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>`;return{c(){e=f("a"),y(e,"class","inline-block"),y(e,"target","_blank"),y(e,"href",t[0])},m(t,r){u(t,e,r),e.innerHTML=n},p(t,n){1&n&&y(e,"href",t[0])},d(t){t&&d(e)}}}function $s(t){let e,r=t[0]&&ws(t);return{c(){e=f("div"),r&&r.c(),y(e,"class","text-center")},m(t,n){u(t,e,n),r&&r.m(e,null)},p(t,[n]){t[0]?r?r.p(t,n):(r=ws(t),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i:n,o:n,d(t){t&&d(e),r&&r.d()}}}function ys(t,e,n){let{options:r}=e,{value:s}=e;return discard(r),t.$$set=t=>{"options"in t&&n(1,r=t.options),"value"in t&&n(0,s=t.value)},[s,r]}var _s=Object.freeze({__proto__:null,default:class extends it{constructor(t){super(),ot(this,t,ys,$s,l,{options:1,value:0})}},compatibleTypes:["string"]});function vs(t){let e,n,r;return{c(){e=f("img"),y(e,"class",n=t[1][1]+" block"),e.src!==(r=t[0])&&y(e,"src",r)},m(t,n){u(t,e,n)},p(t,s){2&s&&n!==(n=t[1][1]+" block")&&y(e,"class",n),1&s&&e.src!==(r=t[0])&&y(e,"src",r)},d(t){t&&d(e)}}}function ks(t){let e,r,s=t[0]&&vs(t);return{c(){e=f("div"),s&&s.c(),y(e,"class",r=t[1][0]+" flex justify-center p-0.5")},m(t,n){u(t,e,n),s&&s.m(e,null)},p(t,[n]){t[0]?s?s.p(t,n):(s=vs(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null),2&n&&r!==(r=t[1][0]+" flex justify-center p-0.5")&&y(e,"class",r)},i:n,o:n,d(t){t&&d(e),s&&s.d()}}}function xs(t,e,n){let r,{options:s}=e,{value:o}=e;return t.$$set=t=>{"options"in t&&n(2,s=t.options),"value"in t&&n(0,o=t.value)},t.$$.update=()=>{4&t.$$.dirty&&n(1,r=s.small?["h-12","max-h-12"]:["h-32","max-h-32"])},[o,r,s]}const js={string:Ur,boolean:Dr,number:Jr,unknown:ms,line:hs,link:_s,image:Object.freeze({__proto__:null,default:class extends it{constructor(t){super(),ot(this,t,xs,ks,l,{options:2,value:0})}},compatibleTypes:["string"]})};function Os(t){return t in js?{is_error:!1,value:js[t]}:`no '${t}' format`.to_error()}const Es={string:function(t,e){return t.localeCompare(e)},number:function(t,e){return t-e},boolean:function(t,e){return t==e?0:t?1:-1},unknown:function(t,e){return(""+t).localeCompare(""+e)}};function zs(t,[e,n]){const r="desc"==n,s=Bt(St(t,(({id:t})=>t==e))).type;if(!(s in Es))throw new Error(`no comparator for '${s}' type, please register one`);const o=Es[s];return r?function(t,n){const r=n[e],s=t[e];return void 0===r?void 0===s?0:-1:void 0===s?1:o(r,s)}:function(t,n){const r=t[e],s=n[e];return void 0===r?void 0===s?0:-1:void 0===s?1:o(r,s)}}function Ss(t,e,n){if(n.length>3)throw new Error("sort not supported for more than 3 columns");const[r,s,o]=n;if(null==r&&assert(null==s),null==s&&assert(null==o),0==e.length||null==r)return e;let i,l=zs(t,r),a=s?zs(t,s):void 0,c=o?zs(t,o):void 0;i=c?function(t,e){let n=l(t,e);return 0!=n?n:(n=a(t,e),0!=n?n:c(t,e))}:a?function(t,e){let n=l(t,e);return 0!=n?n:a(t,e)}:l;const u=[...e];return u.sort(i),u}function As(t,e,n){const r=[...e];for(const t of r)t._weights={},t._nweights={};for(const e in n){const{type:n,min_max:s}=Bt(St(t,(({id:t})=>t==e)));let[o,i]=Tt(r,(t=>void 0!==t[e]));if(0==o.length){for(const t of r)t._weights[e]=0,t._nweights[e]=0;continue}if("number"==n){const t=typeof r[0][e];if("number"!=t)throw new Error(`wrong type for '${e}' column, wsort expects number but found '${t}'`);for(const t of o)t._weights[e]=t[e]}else{if(!(n in Es))throw new Error(`no comparator for '${n}' type, please register one`);const t=Es[n];o.sort(((n,r)=>t(n[e],r[e])));let r,s=0;for(let t=0;t<o.length;t++){const n=o[t];n[e]==r?s+=1:r=n[e],n._weights[e]=t-s}}{let t,r;if(s){if("number"!=n)throw new Error("can't use min_max for non number type");t=s[0],r=s[1]}else{const n=o.map((t=>t._weights[e]));t=Math.min(...n),r=Math.max(...n)}const i=(r+t)/2;let l=(r-t)/2;assert(l>=0),l=0==l?1:l;for(const t of o){let n=(t._weights[e]-i)/l;t._nweights[e]=n}}let l=Ct(o.map((t=>t._nweights[e])));for(const t of i)t._nweights[e]=l}for(const t of r){let e=0;for(const r in n)e+=n[r]*t._nweights[r];t._w=e}return r.sort(((t,e)=>t._w-e._w)).reverse(),r}function qs(t,e){if(!e)return;const n={};for(const r of t){const t=e[r.id];if(!t)continue;const s=Rs(r,""+t[1]);void 0!==s&&(n[r.id]=[Ms(t[0]),s])}return n}test("sortTable",(()=>{const t=[{id:"name",type:"string"},{id:"age",type:"number"}],e=[{name:"Artanis",age:200},{name:"Sarah",age:30},{name:"Jim",age:30},{name:"Amon",age:void 0}];let n=n=>Ss(t,e,n).map((({name:t})=>t));assert.equal(n([["name","asc"]]),["Amon","Artanis","Jim","Sarah"]),assert.equal(n([["age","asc"]])[0],"Amon"),assert.equal(n([["age","asc"],["name","asc"]]),["Amon","Jim","Sarah","Artanis"])})),test("wsortTable",(()=>{const t=(t,e,n)=>As(t,e,n).map((({id:t})=>t));{const e=[{id:"a",type:"number"},{id:"b",type:"number"}],n=[{id:"a",a:0,b:3},{id:"b",a:1,b:3},{id:"c",a:2,b:void 0},{id:"d",a:-2,b:200}];assert.equal(t(e,n,{a:1,b:-1}),["c","b","a","d"])}{const e=[{id:"a",type:"number"}],n=[{id:"a",a:0},{id:"b",a:1},{id:"c",a:void 0}];assert.equal(t(e,n,{a:1}),["b","c","a"])}{const t=As([{id:"a",type:"string"}],[{id:"a",a:"a"},{id:"b",a:"a"},{id:"c",a:"b"}],{a:1});assert.equal(t[0].id,"c"),assert.equal(t.map((t=>t._weights.a)),[1,0,0])}}));const Cs=["<=","<","=","!=",">",">=","~"];function Ms(t){return Cs.includes(t)?t:"="}function Rs({type:t},e){switch(t){case"string":return e;case"boolean":try{return["true","t","1"].includes(e.downcase())}catch(t){return}case"number":try{let t=parseFloat(e);return Number.isFinite(t)?t:void 0}catch(t){return}default:return e}}const Ts=["string","number","boolean","unknown"];function Bs(t,e){const n=[],r=function(t,e,n){let r=[];return r=hr(e,null==t?void 0:t.map((({id:t})=>t)),!0),r.each(((t,e)=>{t._i=e,t._converted={}})),r}(t.columns,e);if(0==r.length)return n.push("table is empty"),{columns:[],rows:[],messages:zn(n)};let s=function(t,e,n){if(t)return t;const r=new Map,s=new Set;for(let t=0;t<e.length;t++){const o=e[t];for(const t in o){if("_i"==t||"_converted"==t)continue;let e=o[t];if(is_undefined(e))s.add(t);else{let s=typeof e;"object"==s?(n.push(`unknown type for column '${t}' - '${s}'`),r.set(t,"unknown")):r.has(t)?r.get(t)!=s&&(n.push(`unstable types for column '${t}', ${[r.get(t),s].sort().join(", ")}`),r.set(t,"unknown")):r.set(t,s)}}}for(const t of s)r.has(t)||r.set(t,"unknown");return Array.from(r,(([t,e])=>({id:t,type:e}))).sort_by((({id:t})=>t))}(t.columns,r,n);if(t.alter_columns){const e=t.alter_columns.map((({id:t})=>t));s=[...t.alter_columns,...s.filter((({id:t})=>!e.includes(t)))]}const o=s.length;s.length!=o&&n.push("not unique column ids"),s=function(t,e,n){t=[...t];for(let r=0;r<e.length;r++){const s=e[r];for(const e of t){const{id:t,type:r}=e;if("_i"==t)continue;let o=s[t];void 0!==o&&(typeof o!=r&&"unknown"!=r&&Ts.includes(r)&&(n.push(`wrong type for column '${t}', specified as '${r}' but '${typeof o}' found`),e.type="unknown"))}}return t}(s,r,n);let i=function(t,e){const n=Os("unknown");if(n.is_error)throw"can't get 'unknown' formatter";let r=[];for(const s of t){const t=s.format||{type:s.type},o=Os(t.type);o.is_error?(e.push(o.message),r.push([n.value,t])):o.value.compatibleTypes.includes(s.type)?r.push([o.value,t]):(e.push(`column ${s.id} has wrong format, format ${s.format} is not compatible with '${s.type}' type`),r.push([n.value,t]))}return r}(s,n);const l=function(t,e,n,r){const s={};for(let o=0;o<t.length;o++){const{id:i,type:l,domain:a}=t[o],[c,u]=e[o];if("number"!=l){a&&r.push(`non number column '${i}' can't have domain`);continue}const d=(c.extraValues?c.extraValues(u):[]).skip_undefined(),f=n.filter_map((t=>t[i]));if(f.push(...d),0==f.length){a&&(s[i]=a);continue}let h=f[0],p=f[0];for(const t of f)t>p?p=t:t<h&&(h=t);const g=a||[h,p];h<g[0]&&(r.push(`column ${i} 'domain' min value is greather than actual min ${h}`),g[0]=h),p>g[1]&&(r.push(`column ${i} 'line.domain' max value is smaller than actual max ${p}`),g[1]=p),s[i]=g}return s}(s,i,r,n);i=function(t,e,n,r){return n.map(((n,s)=>{const{id:o,type:i}=t[s],[l,a]=n;if("number"==a.type&&void 0===a.round)if("number"==i){if(e.every((t=>{const e=t[o];return void 0===e||Number.isInteger(e)})))return[l,Object.assign(Object.assign({},a),{round:0})]}else r.push(`column ${o} is non number and can't use number formatter`);return n}))}(s,r,i,n);const a=Ls(s,r),c=function(t,e,n,r,s){const o={};for(let i=0;i<t.length;i++){const[{id:l},[a,c]]=[t[i],n[i]];if(a.convertColumn){const t=r.map((t=>t[l])),n=e[l];if(n){const{column:e,warnings:i,stats:u}=a.convertColumn(l,n,t,c);o[l]=u,i.forEach((t=>s.push(t)));for(let t=0;t<r.length;t++)r[t]._converted[l]=e[t]}}}return o}(s,l,i,r,n);return{columns:s.map(((t,e)=>({id:t.id,type:t.type,title:t.title,desc:t.desc,delimiter:t.delimiter,format:i[e][1],formatStats:c[t.id],formatter:i[e][0],widthP:a[e],domain:l[t.id]}))),rows:r,messages:zn(n)}}function Ls(t,e){let n;if(t.some((({width:t})=>null!=t)))n=t.map((({width:t})=>t||1));else{const r=new Map;for(const n of e)for(const{id:e,type:s}of t){let t;if(void 0===n[e])continue;if("string"==s)t=n[e].length;else if("number"==s)t=(""+n[e]).length;else{if("boolean"!=s)continue;t=1}let o=r.get(e);null==o&&(o=[],r.set(e,o)),o.push(t)}const s=Nt(r,(t=>Mt(t,.7))),o=Ct(Lt(s,[],((t,e)=>(t.push(e),t)))),i=1.618,l=Nt(s,(t=>t>o*i?i:t<o/i?1/i:1)),a=1;n=t.map((({id:t})=>l.get(t)||a))}return Ps(n)}function Ps(t){if(0==t.length)return[];const e=100/Pt(t);let n=t.map((t=>(t*e).round()));for(;;){const t=Pt(n);if(t>100)n[qt(n)]-=1;else{if(!(t<100))break;n[At(n)]+=1}}return n}function Ns(t,e,n){return e=function(t,e,n){if(!n)return e;for(const{id:r,type:s}of t){const t=n[r];if(!t)continue;const[o,i]=t;if(void 0===i||""===i)continue;const l=Us(s,[o,i]);e=e.filter((t=>l(t[r])))}return e}(t,e=function(t,e,n){if(!(n=n.trim()))return e;const r=n.downcase();return e.filter((e=>{for(const{id:n}of t)if((""+e[n]).downcase().includes(r))return!0;return!1}))}(t,e,n.filter),n.filters)}function Us(t,[e,n]){switch(t){case"string":if("string"!=typeof n)throw new Error("string filter value expected");const t=n,r=n.downcase();switch(e){case"<=":return e=>void 0!==e&&e<=t;case"<":return e=>void 0!==e&&e<t;case"=":return e=>void 0!==e&&e==t;case"!=":return e=>void 0!==e&&e!=t;case">":return e=>void 0!==e&&e>t;case">=":return e=>void 0!==e&&e>=t;case"~":return t=>void 0!==t&&t.downcase().includes(r)}case"boolean":if("boolean"!=typeof n)throw new Error("boolean filter value expected");const s=n;switch(e){case"<=":return t=>void 0!==t&&t<=s;case"<":return t=>void 0!==t&&t<s;case"=":return t=>void 0!==t&&t==s;case"!=":return t=>void 0!==t&&t!=s;case">":return t=>void 0!==t&&t>s;case">=":return t=>void 0!==t&&t>=s;case"~":return t=>void 0!==t&&t==s}case"number":if("number"!=typeof n)throw new Error("number filter value expected");const o=n;switch(e){case"<=":return t=>void 0!==t&&t<=o;case"<":return t=>void 0!==t&&t<o;case"=":return t=>void 0!==t&&t==o;case"!=":return t=>void 0!==t&&t!=o;case">":return t=>void 0!==t&&t>o;case">=":return t=>void 0!==t&&t>=o;case"~":return t=>void 0!==t&&t==o}default:const i=""+n;switch(e){case"<=":return t=>void 0!==t&&""+t<=i;case"<":return t=>void 0!==t&&""+t<i;case"=":return t=>void 0!==t&&""+t==i;case"!=":return t=>void 0!==t&&""+t!=i;case">":return t=>void 0!==t&&""+t>i;case">=":return t=>void 0!==t&&""+t>=i;case"~":return t=>void 0!==t&&""+t==i}}throw new Error(`unknown filter ${t} ${e}`)}function Fs(t){return t.map((t=>{let e=Object.assign({},t);return delete e._i,delete e._converted,e}))}function Is(t){let e,n,r,s,o,i,l,a,h,p;return{c(){e=f("div"),n=f("span"),r=f("span"),r.textContent="w =",s=m(),o=f("input"),y(r,"class","w-5 inline-block"),y(o,"class","w-10 outline-none pl-1 text-xs border border-gray-200 focus:text-gray-900  svelte-1brt80c"),y(o,"type","number"),y(o,"step","0.1"),o.value=i=t[1].toFixed(1),y(n,"class",l=t[2]?"text-gray-900":"text-gray-200"),y(e,"class",a=t[0]+" my-1 text-xs "+(!t[3]&&"invisible"))},m(i,l){u(i,e,l),c(e,n),c(n,r),c(n,s),c(n,o),h||(p=w(o,"change",t[5]),h=!0)},p(t,r){2&r&&i!==(i=t[1].toFixed(1))&&(o.value=i),4&r&&l!==(l=t[2]?"text-gray-900":"text-gray-200")&&y(n,"class",l),9&r&&a!==(a=t[0]+" my-1 text-xs "+(!t[3]&&"invisible"))&&y(e,"class",a)},d(t){t&&d(e),h=!1,p()}}}function Ds(t){let e,r=!t[4]&&Is(t);return{c(){r&&r.c(),e=b()},m(t,n){r&&r.m(t,n),u(t,e,n)},p(t,[n]){t[4]?r&&(r.d(1),r=null):r?r.p(t,n):(r=Is(t),r.c(),r.m(e.parentNode,e))},i:n,o:n,d(t){r&&r.d(t),t&&d(e)}}}function Zs(t,e,n){let r,s,o,i,{column:l}=e,{align:a}=e,{state:c}=e;const u=(t=>{c.wsort&&n(6,c=Object.assign(Object.assign({},c),{wsort:Object.assign(Object.assign({},c.wsort),{[l.id]:t})}))}).debounce(200);return t.$$set=t=>{"column"in t&&n(7,l=t.column),"align"in t&&n(0,a=t.align),"state"in t&&n(6,c=t.state)},t.$$.update=()=>{192&t.$$.dirty&&n(1,r=(c.wsort||{})[l.id]||0),2&t.$$.dirty&&n(2,s=0!=r),68&t.$$.dirty&&n(3,o=c.show_controls||s),192&t.$$.dirty&&n(4,i=c.wsort&&["image","link"].includes(l.format.type))},[a,r,s,o,i,({target:{value:t}})=>{n(1,r=parseFloat(t)),u(r)},c,l]}test("normalize_table_options_slow",(()=>{const t=t=>t.map((({id:t,type:e})=>({id:t,type:e})));{const{columns:e,rows:n}=Bs({},[["v",null]]);assert.equal(t(e),[{id:"a",type:"string"},{id:"b",type:"unknown"}]),assert.equal(Fs(n),[{a:"v"}])}{const{columns:e,rows:n}=Bs({},[{k:"v",k2:null}]);assert.equal(t(e),[{id:"k",type:"string"},{id:"k2",type:"unknown"}]),assert.equal(Fs(n),[{k:"v"}])}{const{columns:e,rows:n}=Bs({},[{k:"v"},{k:0}]);assert.equal(t(e),[{id:"k",type:"unknown"}]),assert.equal(Fs(n),[{k:"v"},{k:0}])}{const{columns:t}=Bs({},[{v:1}]);assert.equal(t[0].format,{type:"number",round:0})}})),test("calculateColumnWidths",(()=>{assert.equal(Ls([{id:"name",type:"string"},{id:"age",type:"number"}],[{name:"Jim Raynor",age:30},{name:"Kate",age:25}]),[62,38])})),test("weightsToPercents",(()=>{assert.equal(Ps([2,2]),[50,50]),assert.equal(Ps([3,3,3]).sort(),[33,33,34])}));class Hs extends it{constructor(t){super(),ot(this,t,Zs,Ds,l,{column:7,align:0,state:6})}}function Js(t,e,n){const r=t.slice();return r[10]=e[n],r}function Ws(t){let e,n,r,s,i,l,a,h,p,g,b,$=[],_=new Map,v=Cs;const k=t=>t[10];for(let e=0;e<v.length;e+=1){let n=Js(t,v,e),r=k(n);_.set(r,$[e]=Ks(r,n))}return{c(){e=f("div"),n=f("span"),r=f("select");for(let t=0;t<$.length;t+=1)$[t].c();i=m(),l=f("input"),y(r,"class","outline-none w-5 inline-block svelte-nsma8g"),y(l,"class","w-10 outline-none pl-1 text-xs border border-gray-200 focus:text-gray-900"),y(l,"type","text"),l.value=a=void 0===t[2][1]?"":""+t[2][1],y(n,"class",h=t[3]?"text-gray-900":"text-gray-200"),y(e,"class",p=t[1]+" my-1 text-xs "+(!t[4]&&"invisible"))},m(s,o){u(s,e,o),c(e,n),c(n,r);for(let t=0;t<$.length;t+=1)$[t].m(r,null);x(r,t[2][0]),c(n,i),c(n,l),g||(b=[w(r,"change",t[6]),w(l,"keyup",t[7])],g=!0)},p(t,o){0&o&&(v=Cs,$=Q($,o,k,1,t,v,_,r,G,Ks,null,Js)),4&o&&s!==(s=t[2][0])&&x(r,t[2][0]),4&o&&a!==(a=void 0===t[2][1]?"":""+t[2][1])&&l.value!==a&&(l.value=a),8&o&&h!==(h=t[3]?"text-gray-900":"text-gray-200")&&y(n,"class",h),18&o&&p!==(p=t[1]+" my-1 text-xs "+(!t[4]&&"invisible"))&&y(e,"class",p)},d(t){t&&d(e);for(let t=0;t<$.length;t+=1)$[t].d();g=!1,o(b)}}}function Ks(t,e){let n,r,s=e[10]+"";return{key:t,first:null,c(){n=f("option"),r=g(s),n.__value=e[10],n.value=n.__value,this.first=n},m(t,e){u(t,n,e),c(n,r)},p(t,n){e=t},d(t){t&&d(n)}}}function Vs(t){let e,r=t[0].filters&&!t[5]&&Ws(t);return{c(){r&&r.c(),e=b()},m(t,n){r&&r.m(t,n),u(t,e,n)},p(t,[n]){t[0].filters&&!t[5]?r?r.p(t,n):(r=Ws(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:n,o:n,d(t){r&&r.d(t),t&&d(e)}}}function Xs(t,e,n){let r,s,o,i,{column:l}=e,{align:a}=e,{state:c}=e;const u=(t=>{c.filters&&n(0,c=Object.assign(Object.assign({},c),{filters:Object.assign(Object.assign({},c.filters),{[l.id]:t})}))}).debounce(200);return t.$$set=t=>{"column"in t&&n(8,l=t.column),"align"in t&&n(1,a=t.align),"state"in t&&n(0,c=t.state)},t.$$.update=()=>{257&t.$$.dirty&&n(2,i=c.filters&&l.id in c.filters?c.filters[l.id]:["=",void 0]),4&t.$$.dirty&&n(3,r=null!=i[1]&&""!==i[1]),9&t.$$.dirty&&n(4,s=r||c.show_controls),257&t.$$.dirty&&n(5,o=c.wsort&&["image","link"].includes(l.format.type))},[c,a,i,r,s,o,({target:{value:t}})=>{n(2,i=[Ms(t),i[1]]),u(i)},({target:{value:t}})=>{n(2,i=[i[0],Rs(l,t)]),u(i)},l]}class Gs extends it{constructor(t){super(),ot(this,t,Xs,Vs,l,{column:8,align:1,state:0})}}function Ys(t){let e,n,r,s,o,i,l,a,h,p,b,v,x,j,O,E,z,S,A,q=t[3].symbol+"";function M(e){t[12](e)}let R={column:t[1],align:"text-right"};function T(e){t[13](e)}void 0!==t[0]&&(R.state=t[0]),b=new Hs({props:R}),C.push((()=>tt(b,"state",M)));let B={column:t[1],align:"text-right"};return void 0!==t[0]&&(B.state=t[0]),j=new Gs({props:B}),C.push((()=>tt(j,"state",T))),{c(){e=f("th"),n=f("a"),r=f("span"),s=g(q),i=m(),l=f("span"),a=g(t[2]),p=m(),et(b.$$.fragment),x=m(),et(j.$$.fragment),y(r,"class",o=t[3].klass+" mr-0.5"),y(n,"class","flex justify-between"),y(n,"href","#"),y(n,"title",h=t[1].desc),y(e,"class",E="text-right "+t[4]),k(e,"width",t[1].widthP+"%")},m(o,d){u(o,e,d),c(e,n),c(n,r),c(r,s),c(n,i),c(n,l),c(l,a),c(e,p),nt(b,e,null),c(e,x),nt(j,e,null),z=!0,S||(A=w(n,"click",$(t[6])),S=!0)},p(t,i){(!z||8&i)&&q!==(q=t[3].symbol+"")&&_(s,q),(!z||8&i&&o!==(o=t[3].klass+" mr-0.5"))&&y(r,"class",o),(!z||4&i)&&_(a,t[2]),(!z||2&i&&h!==(h=t[1].desc))&&y(n,"title",h);const l={};2&i&&(l.column=t[1]),!v&&1&i&&(v=!0,l.state=t[0],P((()=>v=!1))),b.$set(l);const c={};2&i&&(c.column=t[1]),!O&&1&i&&(O=!0,c.state=t[0],P((()=>O=!1))),j.$set(c),(!z||16&i&&E!==(E="text-right "+t[4]))&&y(e,"class",E),(!z||2&i)&&k(e,"width",t[1].widthP+"%")},i(t){z||(W(b.$$.fragment,t),W(j.$$.fragment,t),z=!0)},o(t){K(b.$$.fragment,t),K(j.$$.fragment,t),z=!1},d(t){t&&d(e),rt(b),rt(j),S=!1,A()}}}function Qs(t){let e,n,r,s,o,i,l,a,h,p,b,v,x,j,O,E,z,S,A,q,M,R,T=t[3].symbol+"",B=t[3].symbol+"";function L(e){t[10](e)}let N={column:t[1],align:"text-center"};function U(e){t[11](e)}void 0!==t[0]&&(N.state=t[0]),O=new Hs({props:N}),C.push((()=>tt(O,"state",L)));let F={column:t[1],align:"text-center"};return void 0!==t[0]&&(F.state=t[0]),S=new Gs({props:F}),C.push((()=>tt(S,"state",U))),{c(){e=f("th"),n=f("a"),r=f("span"),s=g(T),o=m(),i=f("span"),l=g(t[2]),a=m(),h=f("span"),p=g(B),j=m(),et(O.$$.fragment),z=m(),et(S.$$.fragment),y(r,"class","invisible mr-0.5"),y(h,"class",b=t[3].klass+" ml-0.5"),y(h,"title",v=t[3].title),y(n,"class","flex justify-between"),y(n,"href","#"),y(n,"title",x=t[1].desc),y(e,"class",t[4]),k(e,"width",t[1].widthP+"%")},m(d,f){u(d,e,f),c(e,n),c(n,r),c(r,s),c(n,o),c(n,i),c(i,l),c(n,a),c(n,h),c(h,p),c(e,j),nt(O,e,null),c(e,z),nt(S,e,null),q=!0,M||(R=w(n,"click",$(t[6])),M=!0)},p(t,r){(!q||8&r)&&T!==(T=t[3].symbol+"")&&_(s,T),(!q||4&r)&&_(l,t[2]),(!q||8&r)&&B!==(B=t[3].symbol+"")&&_(p,B),(!q||8&r&&b!==(b=t[3].klass+" ml-0.5"))&&y(h,"class",b),(!q||8&r&&v!==(v=t[3].title))&&y(h,"title",v),(!q||2&r&&x!==(x=t[1].desc))&&y(n,"title",x);const o={};2&r&&(o.column=t[1]),!E&&1&r&&(E=!0,o.state=t[0],P((()=>E=!1))),O.$set(o);const i={};2&r&&(i.column=t[1]),!A&&1&r&&(A=!0,i.state=t[0],P((()=>A=!1))),S.$set(i),(!q||16&r)&&y(e,"class",t[4]),(!q||2&r)&&k(e,"width",t[1].widthP+"%")},i(t){q||(W(O.$$.fragment,t),W(S.$$.fragment,t),q=!0)},o(t){K(O.$$.fragment,t),K(S.$$.fragment,t),q=!1},d(t){t&&d(e),rt(O),rt(S),M=!1,R()}}}function to(t){let e,n,r,s,o,i,l,a,h,p,b,v,x,j,O,E,z,S,A,q=t[3].symbol+"";function M(e){t[8](e)}let R={column:t[1],align:"text-left"};function T(e){t[9](e)}void 0!==t[0]&&(R.state=t[0]),v=new Hs({props:R}),C.push((()=>tt(v,"state",M)));let B={column:t[1],align:"text-left"};return void 0!==t[0]&&(B.state=t[0]),O=new Gs({props:B}),C.push((()=>tt(O,"state",T))),{c(){e=f("th"),n=f("a"),r=f("span"),s=g(t[2]),o=m(),i=f("span"),l=g(q),b=m(),et(v.$$.fragment),j=m(),et(O.$$.fragment),y(i,"class",a=t[3].klass+" ml-0.5"),y(i,"title",h=t[3].title),y(n,"class","flex justify-between"),y(n,"href","#"),y(n,"title",p=t[1].desc),y(e,"class",t[4]),k(e,"width",t[1].widthP+"%")},m(a,d){u(a,e,d),c(e,n),c(n,r),c(r,s),c(n,o),c(n,i),c(i,l),c(e,b),nt(v,e,null),c(e,j),nt(O,e,null),z=!0,S||(A=w(n,"click",$(t[6])),S=!0)},p(t,r){(!z||4&r)&&_(s,t[2]),(!z||8&r)&&q!==(q=t[3].symbol+"")&&_(l,q),(!z||8&r&&a!==(a=t[3].klass+" ml-0.5"))&&y(i,"class",a),(!z||8&r&&h!==(h=t[3].title))&&y(i,"title",h),(!z||2&r&&p!==(p=t[1].desc))&&y(n,"title",p);const o={};2&r&&(o.column=t[1]),!x&&1&r&&(x=!0,o.state=t[0],P((()=>x=!1))),v.$set(o);const c={};2&r&&(c.column=t[1]),!E&&1&r&&(E=!0,c.state=t[0],P((()=>E=!1))),O.$set(c),(!z||16&r)&&y(e,"class",t[4]),(!z||2&r)&&k(e,"width",t[1].widthP+"%")},i(t){z||(W(v.$$.fragment,t),W(O.$$.fragment,t),z=!0)},o(t){K(v.$$.fragment,t),K(O.$$.fragment,t),z=!1},d(t){t&&d(e),rt(v),rt(O),S=!1,A()}}}function eo(t){let e,n,r,s;const o=[to,Qs,Ys],i=[];return e=function(t,e){return"left"==t[5]?0:"center"==t[5]?1:2}(t),n=i[e]=o[e](t),{c(){n.c(),r=b()},m(t,n){i[e].m(t,n),u(t,r,n),s=!0},p(t,[e]){n.p(t,e)},i(t){s||(W(n),s=!0)},o(t){K(n),s=!1},d(t){i[e].d(t),t&&d(r)}}}function no(t,e,n){let r,s,o,{column:i}=e,{state:l}=e,{sortable:a}=e,c=i.id;const u=i.formatter.align,d=u?u(i.format,i.formatStats):"center";function f(t,e){const n={symbol:"↓",klass:"invisible",title:""};if(e.wsort){const r=e.wsort[t.id],s="wsort: "+function(t){return t instanceof Map?Array.from(t):Object.entries(t)}(e.wsort).map((([t,e])=>`${t}: ${e}`)).join(", ");return void 0===r||0==r?n:r>=0?{symbol:"↑",klass:"text-gray-900",title:s}:{symbol:"↓",klass:"text-gray-900",title:s}}if(e.sort){let t;for(let n=0;n<e.sort.length;n++){const[r,s]=e.sort[n];r==c&&(t=[s,n])}if(!t)return n;const r="sort: "+e.sort.map((([t,e])=>`${t}: ${e}`)).join(", "),[s,o]=t,i="asc"==s?"↓":"↑";let l;if(0==o)l="text-gray-900";else if(1==o)l="text-gray-400";else{if(2!=o)throw new Error("color for more than 3 sort oders isn't supported");l="text-gray-300"}return{symbol:i,klass:l,title:r}}return n}return t.$$set=t=>{"column"in t&&n(1,i=t.column),"state"in t&&n(0,l=t.state),"sortable"in t&&n(7,a=t.sortable)},t.$$.update=()=>{2&t.$$.dirty&&n(2,r=null==i.title?i.id:i.title),3&t.$$.dirty&&n(3,s=f(i,l)),2&t.$$.dirty&&n(4,o=i.delimiter?"plot-delimiter-right":"")},[l,i,r,s,o,d,function(t){if(a)if(l.wsort){let e=l.wsort;t.metaKey?i.id in e?e[i.id]=-1*e[i.id]:e[i.id]=1:Object.size(e)>1?e={[c]:1}:i.id in e?e[i.id]=-1*e[i.id]:e={[c]:1},n(0,l=Object.assign(Object.assign({},l),{wsort:e}))}else{let e=l.sort||[];const r=function(t,e){const n=e instanceof Function?e:t=>t==e;for(let e=0;e<t.length;e++)if(n(t[e],e))return e;return-1}(e,(([t,e])=>t==i.id));t.metaKey?r>=0?e[r][1]="asc"==e[r][1]?"desc":"asc":e.push([c,"asc"]):e.length>1?e=[[c,"asc"]]:r>=0?(assert(1==e.length),e[r][1]="asc"==e[r][1]?"desc":"asc"):e=[[c,"asc"]],n(0,l=Object.assign(Object.assign({},l),{sort:e}))}},a,function(t){l=t,n(0,l)},function(t){l=t,n(0,l)},function(t){l=t,n(0,l)},function(t){l=t,n(0,l)},function(t){l=t,n(0,l)},function(t){l=t,n(0,l)}]}class ro extends it{constructor(t){super(),ot(this,t,no,eo,l,{column:1,state:0,sortable:7})}}function so(t,e,n){const r=t.slice();return r[4]=e[n],r}function oo(t,e){let n,r,s,o;function i(t){e[3](t)}let l={column:e[4],sortable:e[2]};return void 0!==e[0]&&(l.state=e[0]),r=new ro({props:l}),C.push((()=>tt(r,"state",i))),{key:t,first:null,c(){n=b(),et(r.$$.fragment),this.first=n},m(t,e){u(t,n,e),nt(r,t,e),o=!0},p(t,n){e=t;const o={};2&n&&(o.column=e[4]),4&n&&(o.sortable=e[2]),!s&&1&n&&(s=!0,o.state=e[0],P((()=>s=!1))),r.$set(o)},i(t){o||(W(r.$$.fragment,t),o=!0)},o(t){K(r.$$.fragment,t),o=!1},d(t){t&&d(n),rt(r,t)}}}function io(t){let e,n,r=[],s=new Map,o=t[1];const i=t=>t[4].id;for(let e=0;e<o.length;e+=1){let n=so(t,o,e),l=i(n);s.set(l,r[e]=oo(l,n))}return{c(){e=f("tr");for(let t=0;t<r.length;t+=1)r[t].c()},m(t,s){u(t,e,s);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,[n]){7&n&&(o=t[1],H(),r=Q(r,n,i,1,t,o,s,e,Y,oo,null,so),J())},i(t){if(!n){for(let t=0;t<o.length;t+=1)W(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)K(r[t]);n=!1},d(t){t&&d(e);for(let t=0;t<r.length;t+=1)r[t].d()}}}function lo(t,e,n){let{columns:r}=e,{state:s}=e,{sortable:o}=e;return t.$$set=t=>{"columns"in t&&n(1,r=t.columns),"state"in t&&n(0,s=t.state),"sortable"in t&&n(2,o=t.sortable)},[s,r,o,function(t){s=t,n(0,s)}]}class ao extends it{constructor(t){super(),ot(this,t,lo,io,l,{columns:1,state:0,sortable:2})}}function co(t,e,n){const r=t.slice();return r[4]=e[n],r[6]=n,r}function uo(t){let e,n,r;var s=t[4].formatter.default;function o(t){return{props:{options:t[4].format,value:t[1][t[4].id]}}}return s&&(e=new s(o(t))),{c(){e&&et(e.$$.fragment),n=b()},m(t,s){e&&nt(e,t,s),u(t,n,s),r=!0},p(t,r){const i={};if(1&r&&(i.options=t[4].format),3&r&&(i.value=t[1][t[4].id]),s!==(s=t[4].formatter.default)){if(e){H();const t=e;K(t.$$.fragment,1,0,(()=>{rt(t,1)})),J()}s?(e=new s(o(t)),et(e.$$.fragment),W(e.$$.fragment,1),nt(e,n.parentNode,n)):e=null}else s&&e.$set(i)},i(t){r||(e&&W(e.$$.fragment,t),r=!0)},o(t){e&&K(e.$$.fragment,t),r=!1},d(t){t&&d(n),e&&rt(e,t)}}}function fo(t){let e,n,r;var s=t[4].formatter.default;function o(t){return{props:{options:t[4].format,value:t[1][t[4].id],converted:t[1]._converted[t[4].id],stats:t[4].formatStats}}}return s&&(e=new s(o(t))),{c(){e&&et(e.$$.fragment),n=b()},m(t,s){e&&nt(e,t,s),u(t,n,s),r=!0},p(t,r){const i={};if(1&r&&(i.options=t[4].format),3&r&&(i.value=t[1][t[4].id]),3&r&&(i.converted=t[1]._converted[t[4].id]),1&r&&(i.stats=t[4].formatStats),s!==(s=t[4].formatter.default)){if(e){H();const t=e;K(t.$$.fragment,1,0,(()=>{rt(t,1)})),J()}s?(e=new s(o(t)),et(e.$$.fragment),W(e.$$.fragment,1),nt(e,n.parentNode,n)):e=null}else s&&e.$set(i)},i(t){r||(e&&W(e.$$.fragment,t),r=!0)},o(t){e&&K(e.$$.fragment,t),r=!1},d(t){t&&d(n),e&&rt(e,t)}}}function ho(t,e){let n,r,s,o,i,l;const a=[fo,uo],h=[];function p(t,e){return"_converted"in t[1]&&t[4].id in t[1]._converted?0:1}return r=p(e),s=h[r]=a[r](e),{key:t,first:null,c(){n=f("td"),s.c(),o=m(),y(n,"class",i=e[4].delimiter?"plot-delimiter-right":""),this.first=n},m(t,e){u(t,n,e),h[r].m(n,null),c(n,o),l=!0},p(t,c){let u=r;r=p(e=t),r===u?h[r].p(e,c):(H(),K(h[u],1,1,(()=>{h[u]=null})),J(),s=h[r],s?s.p(e,c):(s=h[r]=a[r](e),s.c()),W(s,1),s.m(n,o)),(!l||1&c&&i!==(i=e[4].delimiter?"plot-delimiter-right":""))&&y(n,"class",i)},i(t){l||(W(s),l=!0)},o(t){K(s),l=!1},d(t){t&&d(n),h[r].d()}}}function po(t){let e,n,r,s,o,l=[],a=new Map,c=t[0];const h=t=>t[4].id;for(let e=0;e<c.length;e+=1){let n=co(t,c,e),r=h(n);a.set(r,l[e]=ho(r,n))}return{c(){e=f("tr");for(let t=0;t<l.length;t+=1)l[t].c();y(e,"class",n=t[2]?"bg-gray-100":"")},m(n,a){u(n,e,a);for(let t=0;t<l.length;t+=1)l[t].m(e,null);r=!0,s||(o=w(e,"click",(function(){i(t[3])&&t[3].apply(this,arguments)})),s=!0)},p(s,[o]){t=s,3&o&&(c=t[0],H(),l=Q(l,o,h,1,t,c,a,e,Y,ho,null,co),J()),(!r||4&o&&n!==(n=t[2]?"bg-gray-100":""))&&y(e,"class",n)},i(t){if(!r){for(let t=0;t<c.length;t+=1)W(l[t]);r=!0}},o(t){for(let t=0;t<l.length;t+=1)K(l[t]);r=!1},d(t){t&&d(e);for(let t=0;t<l.length;t+=1)l[t].d();s=!1,o()}}}function go(t,e,n){let{columns:r}=e,{row:s}=e,{selected:o}=e,{onSelect:i}=e;return t.$$set=t=>{"columns"in t&&n(0,r=t.columns),"row"in t&&n(1,s=t.row),"selected"in t&&n(2,o=t.selected),"onSelect"in t&&n(3,i=t.onSelect)},[r,s,o,i]}class mo extends it{constructor(t){super(),ot(this,t,go,po,l,{columns:0,row:1,selected:2,onSelect:3})}}function bo(t){let e,r,s,i,l,h,p,b,$,_,k,x,j,O=bs(wo(!!t[0].filters))+"";return{c(){e=f("div"),r=f("div"),s=m(),i=f("div"),l=f("input"),h=m(),p=f("button"),b=g("W"),_=m(),k=f("button"),y(r,"class","flex items-center"),y(l,"class","rounded border border-gray-300 text-sm outline-none py-1 px-1 leading-4"),y(l,"type","text"),y(l,"placeholder","Filter"),y(p,"class",$=a($o(!!t[0].wsort))+" svelte-1y842rg"),y(p,"title",t[4]),y(k,"class","focus:outline-none"),y(i,"class","flex items-center space-x-2"),y(e,"class","flex items-center justify-between my-1")},m(n,o){u(n,e,o),c(e,r),c(e,s),c(e,i),c(i,l),v(l,t[1]),c(i,h),c(i,p),c(p,b),c(i,_),c(i,k),k.innerHTML=O,x||(j=[w(l,"input",t[5]),w(l,"keyup",t[2]),w(p,"click",t[3]),w(k,"click",t[6])],x=!0)},p(t,[e]){2&e&&l.value!==t[1]&&v(l,t[1]),1&e&&$!==($=a($o(!!t[0].wsort))+" svelte-1y842rg")&&y(p,"class",$),1&e&&O!==(O=bs(wo(!!t[0].filters))+"")&&(k.innerHTML=O)},i:n,o:n,d(t){t&&d(e),x=!1,o(j)}}}function wo(t){return"h-5 w-5 p-0.5 border rounded text-gray-900 "+(t?"border-gray-300":"border-white")}function $o(t){return"letter_button focus:outline-none border rounded "+(t?"border-gray-300":"border-white")}function yo(t,e,n){let{state:r}=e,s=r.filter;const o=(()=>{n(0,r=Object.assign(Object.assign({},r),{filter:s}))}).debounce(200);const i=['Weighted sorting. "Smart", weighted, ranked sorting, instead of normal sorting.',"It works similar to how humans compare products with many attributes, to find the best one.","Example: find countries with highest salaries, lowest taxes and lowest real estate prices - ordinary sorting would be useless, while weighted sorting would sort the countries in a 'smart' way, similar to how human would do.","Missing values threated as average, like if we don't have tax rate for country, we guess that it probably should be somewhat average. For non number comparable elements sort rank used as weight. ifferent range of values for different columns normalised into [-1..1] range as 'nw = (w - median(w)) / 0.9-quantile(variance(w))*1.11' and limiting min/max outliers by [-1..1].",'- Undefined values threated as average\n- Rank for same values should be the same, like ["a", "a", "b"] should be [0, 0, 1], not [0, 1, 2]\n- Different range of values for different columns normalised into [-1..1] range as\n      nw = (w - median(w)) / 0.9-quantile(variance(w))*1.11 and limiting min/max outliers by [-1..1].'].join("\n\n");return t.$$set=t=>{"state"in t&&n(0,r=t.state)},[r,s,o,function(){n(0,r=r.wsort?Object.assign(Object.assign({},r),{wsort:void 0,sort:void 0}):Object.assign(Object.assign({},r),{wsort:{},sort:void 0}))},i,function(){s=this.value,n(1,s)},()=>n(0,r={...r,filters:r.filters?void 0:{}})]}class _o extends it{constructor(t){super(),ot(this,t,yo,bo,l,{state:0})}}function vo(t,e,n){const r=t.slice();return r[16]=e[n],r}function ko(t){let e,n,r=t[0].desc+"";return{c(){e=f("div"),n=g(r)},m(t,r){u(t,e,r),c(e,n)},p(t,e){1&e&&r!==(r=t[0].desc+"")&&_(n,r)},d(t){t&&d(e)}}}function xo(t,e){let n,r,s;function o(...t){return e[14](e[16],...t)}return r=new mo({props:{columns:e[2],row:e[16],selected:e[3].has(e[16]._i),onSelect:o}}),{key:t,first:null,c(){n=b(),et(r.$$.fragment),this.first=n},m(t,e){u(t,n,e),nt(r,t,e),s=!0},p(t,n){e=t;const s={};4&n&&(s.columns=e[2]),64&n&&(s.row=e[16]),72&n&&(s.selected=e[3].has(e[16]._i)),64&n&&(s.onSelect=o),r.$set(s)},i(t){s||(W(r.$$.fragment,t),s=!0)},o(t){K(r.$$.fragment,t),s=!1},d(t){t&&d(n),rt(r,t)}}}function jo(t){let e,n,r,s,o,i,l;return{c(){e=f("div"),e.textContent="Debug:",n=m(),r=f("textarea"),o=m(),i=f("textarea"),y(e,"class","mt-3"),y(r,"class","block focus:outline-none rounded border border-gray-200 text-xs overflow-scroll mt-4"),r.readOnly=!0,k(r,"resize","none"),k(r,"width","30rem"),k(r,"height","5rem"),r.value=s=se({...t[1],selected:t[3]}),y(i,"class","block focus:outline-none rounded border border-gray-200 text-xs overflow-scroll mt-4"),i.readOnly=!0,k(i,"resize","none"),k(i,"width","30rem"),k(i,"height","10rem"),i.value=l=se(t[2])},m(t,s){u(t,e,s),u(t,n,s),u(t,r,s),u(t,o,s),u(t,i,s)},p(t,e){10&e&&s!==(s=se({...t[1],selected:t[3]}))&&(r.value=s),4&e&&l!==(l=se(t[2]))&&(i.value=l)},d(t){t&&d(e),t&&d(n),t&&d(r),t&&d(o),t&&d(i)}}}function Oo(t){let e,n,r,s,o,i,l,a,h,p,g,$,_,v,k,x,j,O,E,z=[],S=new Map,A=t[0].desc&&ko(t);function q(e){t[12](e)}let M={};function R(e){t[13](e)}void 0!==t[1]&&(M.state=t[1]),o=new _o({props:M}),C.push((()=>tt(o,"state",q)));let T={columns:t[2],sortable:t[5]};void 0!==t[1]&&(T.state=t[1]),p=new ao({props:T}),C.push((()=>tt(p,"state",R)));let B=t[6];const L=t=>t[16]._i;for(let e=0;e<B.length;e+=1){let n=vo(t,B,e),r=L(n);S.set(r,z[e]=xo(r,n))}v=new En({props:{messages:t[4]}});let N=t[0].debug&&jo(t);return{c(){A&&A.c(),e=m(),n=f("table"),r=f("tr"),s=f("td"),et(o.$$.fragment),h=m(),et(p.$$.fragment),$=m();for(let t=0;t<z.length;t+=1)z[t].c();_=m(),et(v.$$.fragment),k=m(),N&&N.c(),x=b(),y(s,"colspan",l=t[2].length),y(r,"class",a="plot-table-toolbar "+(!t[1].show_controls&&"invisible")),y(n,"class","plot-table font-mono")},m(i,l){A&&A.m(i,l),u(i,e,l),u(i,n,l),c(n,r),c(r,s),nt(o,s,null),c(n,h),nt(p,n,null),c(n,$);for(let t=0;t<z.length;t+=1)z[t].m(n,null);u(i,_,l),nt(v,i,l),u(i,k,l),N&&N.m(i,l),u(i,x,l),j=!0,O||(E=w(n,"click",t[15]),O=!0)},p(t,[c]){t[0].desc?A?A.p(t,c):(A=ko(t),A.c(),A.m(e.parentNode,e)):A&&(A.d(1),A=null);const u={};!i&&2&c&&(i=!0,u.state=t[1],P((()=>i=!1))),o.$set(u),(!j||4&c&&l!==(l=t[2].length))&&y(s,"colspan",l),(!j||2&c&&a!==(a="plot-table-toolbar "+(!t[1].show_controls&&"invisible")))&&y(r,"class",a);const d={};4&c&&(d.columns=t[2]),32&c&&(d.sortable=t[5]),!g&&2&c&&(g=!0,d.state=t[1],P((()=>g=!1))),p.$set(d),204&c&&(B=t[6],H(),z=Q(z,c,L,1,t,B,S,n,Y,xo,null,vo),J());const f={};16&c&&(f.messages=t[4]),v.$set(f),t[0].debug?N?N.p(t,c):(N=jo(t),N.c(),N.m(x.parentNode,x)):N&&(N.d(1),N=null)},i(t){if(!j){W(o.$$.fragment,t),W(p.$$.fragment,t);for(let t=0;t<B.length;t+=1)W(z[t]);W(v.$$.fragment,t),j=!0}},o(t){K(o.$$.fragment,t),K(p.$$.fragment,t);for(let t=0;t<z.length;t+=1)K(z[t]);K(v.$$.fragment,t),j=!1},d(t){A&&A.d(t),t&&d(e),t&&d(n),rt(o),rt(p);for(let t=0;t<z.length;t+=1)z[t].d();t&&d(_),rt(v,t),t&&d(k),N&&N.d(t),t&&d(x),O=!1,E()}}}function Eo(t,e,n){let r,s,o,i,l,a,c,{options:u}=e,{data:d}=e,f={filter:u.filter||"",filters:qs(s,u.filters),sort:u.sort,wsort:u.wsort,show_controls:!!u.show_controls},h=new Set(u.selected||[]);function p(t,e){!function(t,e,n,r){const s=new Set(n);if(t.metaKey)s.has(e)?s.delete(e):s.add(e);else{const t=s.has(e)&&1==s.size;s.clear(),t||s.add(e)}r(s)}(t,e,h,(t=>n(3,h=t)))}return t.$$set=t=>{"options"in t&&n(0,u=t.options),"data"in t&&n(8,d=t.data)},t.$$.update=()=>{257&t.$$.dirty&&n(9,r=Bs(u,d)),512&t.$$.dirty&&n(2,s=r.columns),512&t.$$.dirty&&n(10,o=r.rows),512&t.$$.dirty&&n(4,i=r.messages),1&t.$$.dirty&&n(5,l=0!=u.sortable),1030&t.$$.dirty&&n(11,a=Ns(s,o,f)),2054&t.$$.dirty&&n(6,c=function(t,e,{sort:n,wsort:r}){return n&&!n.is_empty()?Ss(t,e,n):r&&!Object.is_empty(r)?As(t,e,r):e}(s,a,f))},[u,f,s,h,i,l,c,p,d,r,o,a,function(t){f=t,n(1,f)},function(t){f=t,n(1,f)},(t,e)=>p(e,t._i),()=>n(1,f={...f,show_controls:!0})]}class zo extends it{constructor(t){super(),ot(this,t,Eo,Oo,l,{options:0,data:8})}}function So(t){let e,n;return e=new Dt({props:{error:t[3]}}),{c(){et(e.$$.fragment)},m(t,r){nt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.error=t[3]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){rt(e,t)}}}function Ao(t){let e,n;return e=new zo({props:{options:t[0].table||{},data:t[2]}}),{c(){et(e.$$.fragment)},m(t,r){nt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.options=t[0].table||{}),1&n&&(r.data=t[2]),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){rt(e,t)}}}function qo(t){let e,r;return e=new Jt({}),{c(){et(e.$$.fragment)},m(t,n){nt(e,t,n),r=!0},p:n,i(t){r||(W(e.$$.fragment,t),r=!0)},o(t){K(e.$$.fragment,t),r=!1},d(t){rt(e,t)}}}function Co(t){let e,n,r,s={ctx:t,current:null,token:null,hasCatch:!0,pending:qo,then:Ao,catch:So,value:2,error:3,blocks:[,,,]};return V(n=ee(t[0].data),s),{c(){e=f("div"),s.block.c(),y(e,"class","TableBlockContent")},m(t,n){u(t,e,n),s.block.m(e,s.anchor=null),s.mount=()=>e,s.anchor=null,r=!0},p(e,[r]){t=e,s.ctx=t,1&r&&n!==(n=ee(t[0].data))&&V(n,s)||X(s,t,r)},i(t){r||(W(s.block),r=!0)},o(t){for(let t=0;t<3;t+=1){K(s.blocks[t])}r=!1},d(t){t&&d(e),s.block.d(),s.token=null,s=null}}}const Mo={match_and_normalize:t=>{return is_object(t)&&"table"in t?is_array(t.table)?{data:t.table,table:{}}:t:is_array(t)?{data:t,table:{}}:(e=t)&&"object"==typeof e&&"csv_table"==e.type?function(t){const e=[];for(const n of t.columns){let r="unknown";for(const e of t.rows){const t=e[n];if(null!=t){r=typeof t;break}}e.push(r)}const n=t.columns.map(((t,n)=>({id:t,type:e[n]})));return{data:t.rows,table:{columns:n}}}(t):void 0;var e}};function Ro(t,e,n){let{block:r}=e,{is_narrow:s}=e;return discard(s),t.$$set=t=>{"block"in t&&n(0,r=t.block),"is_narrow"in t&&n(1,s=t.is_narrow)},[r,s]}var To=Object.freeze({__proto__:null,default:class extends it{constructor(t){super(),ot(this,t,Ro,Co,l,{block:0,is_narrow:1})}},definition:Mo});function Bo(e,n){if(null!=e){if(is_object(e)){const n=e;if(n.block){if(!is_array(n.block)||2!=n.block.length)throw"invalid block, it should be `block: [block_name, 0.1]`";const e=n.block[0],{definition:r,default:s}=t.blocks[e],o=r.match_and_normalize(n);if(!o)throw`Data not matching '${e}' block`;return{name:e,klass:s,ndata:o}}for(const e in t.blocks){const{definition:r,default:s}=t.blocks[e],o=r.match_and_normalize(n);if(o)return{name:e,klass:s,ndata:o}}}if(n){const r=t.blocks_for_file_extensions[n],s=t.blocks[r];if(s){const{definition:t,default:o}=s,i=t.match_and_normalize(e);if(!i)throw`Data not matching '${r}' block, registered for extension ${n}`;return{name:r,klass:o,ndata:i}}}if(is_array(e)){const n="table",{definition:r,default:s}=t.blocks[n],o=r.match_and_normalize(e);if(!o)throw"internal error, data not matching table block";return{name:n,klass:s,ndata:o}}if(is_string(e)){const n="table",{definition:r,default:s}=t.blocks[n],o=r.match_and_normalize(e);if(!o)throw"internal error, data not matching text block";return{name:n,klass:s,ndata:o}}}}function Lo(t){let e,n,r=t[1].title+"";return{c(){e=f("div"),n=g(r),y(e,"class","plot-title")},m(t,r){u(t,e,r),c(e,n)},p(t,e){2&e&&r!==(r=t[1].title+"")&&_(n,r)},d(t){t&&d(e)}}}function Po(t){let e,n;return e=new mn({props:{markdown:t[1].desc}}),{c(){et(e.$$.fragment)},m(t,r){nt(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.markdown=t[1].desc),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){rt(e,t)}}}function No(t){let e,n,r,s,o,i,l,a,h,p=t[1].title&&Lo(t),g=t[1].desc&&Po(t);var b=t[2];function w(t){return{props:{block:t[1],state:t[4]}}}return b&&(o=new b(w(t))),l=new wn({}),{c(){e=f("div"),p&&p.c(),n=m(),g&&g.c(),r=m(),s=f("div"),o&&et(o.$$.fragment),i=m(),et(l.$$.fragment),y(s,"class","content"),y(e,"class",a="plot-single plot-single-"+t[0]+" plot-style-"+t[3])},m(t,a){u(t,e,a),p&&p.m(e,null),c(e,n),g&&g.m(e,null),c(e,r),c(e,s),o&&nt(o,s,null),c(e,i),nt(l,e,null),h=!0},p(t,[i]){t[1].title?p?p.p(t,i):(p=Lo(t),p.c(),p.m(e,n)):p&&(p.d(1),p=null),t[1].desc?g?(g.p(t,i),2&i&&W(g,1)):(g=Po(t),g.c(),W(g,1),g.m(e,r)):g&&(H(),K(g,1,1,(()=>{g=null})),J());const l={};if(2&i&&(l.block=t[1]),b!==(b=t[2])){if(o){H();const t=o;K(t.$$.fragment,1,0,(()=>{rt(t,1)})),J()}b?(o=new b(w(t)),et(o.$$.fragment),W(o.$$.fragment,1),nt(o,s,null)):o=null}else b&&o.$set(l);(!h||9&i&&a!==(a="plot-single plot-single-"+t[0]+" plot-style-"+t[3]))&&y(e,"class",a)},i(t){h||(W(g),o&&W(o.$$.fragment,t),W(l.$$.fragment,t),h=!0)},o(t){K(g),o&&K(o.$$.fragment,t),K(l.$$.fragment,t),h=!1},d(t){t&&d(e),p&&p.d(),g&&g.d(),o&&rt(o),rt(l)}}}function Uo(t,e,n){let r,{default_title:s}=e,{block_name:o}=e,{data:i}=e,{block_impl:l}=e;return t.$$set=t=>{"default_title"in t&&n(5,s=t.default_title),"block_name"in t&&n(0,o=t.block_name),"data"in t&&n(1,i=t.data),"block_impl"in t&&n(2,l=t.block_impl)},t.$$.update=()=>{34&t.$$.dirty&&(document.title=is_object(i)&&i.title||"id"in i&&""+i.id||s||"PLOT"),2&t.$$.dirty&&n(3,r=i.style||"normal")},[o,i,l,r,{is_narrow:!1,collapsed:!1},s]}t.blocks.image=Rn,t.blocks.text=Fn,t.blocks.chart=qr,t.blocks.table=To;class Fo extends it{constructor(t){super(),ot(this,t,Uo,No,l,{default_title:5,block_name:0,data:1,block_impl:2})}}class Io{static create(...t){return new this(...t)}mixIn(t){return Object.assign(this,t)}clone(){const t=new this.constructor;return Object.assign(t,this),t}}class Do extends Io{constructor(t=[],e=4*t.length){super();let n=t;if(n instanceof ArrayBuffer&&(n=new Uint8Array(n)),(n instanceof Int8Array||n instanceof Uint8ClampedArray||n instanceof Int16Array||n instanceof Uint16Array||n instanceof Int32Array||n instanceof Uint32Array||n instanceof Float32Array||n instanceof Float64Array)&&(n=new Uint8Array(n.buffer,n.byteOffset,n.byteLength)),n instanceof Uint8Array){const t=n.byteLength,e=[];for(let r=0;r<t;r+=1)e[r>>>2]|=n[r]<<24-r%4*8;this.words=e,this.sigBytes=t}else this.words=t,this.sigBytes=e}static random(t){const e=[],n=t=>{let e=t,n=987654321;const r=4294967295;return()=>{n=36969*(65535&n)+(n>>16)&r,e=18e3*(65535&e)+(e>>16)&r;let t=(n<<16)+e&r;return t/=4294967296,t+=.5,t*(Math.random()>.5?1:-1)}};for(let r,s=0;s<t;s+=4){const t=n(4294967296*(r||Math.random()));r=987654071*t(),e.push(4294967296*t()|0)}return new Do(e,t)}toString(t=Zo){return t.stringify(this)}concat(t){const e=this.words,n=t.words,r=this.sigBytes,s=t.sigBytes;if(this.clamp(),r%4)for(let t=0;t<s;t+=1){const s=n[t>>>2]>>>24-t%4*8&255;e[r+t>>>2]|=s<<24-(r+t)%4*8}else for(let t=0;t<s;t+=4)e[r+t>>>2]=n[t>>>2];return this.sigBytes+=s,this}clamp(){const{words:t,sigBytes:e}=this;t[e>>>2]&=4294967295<<32-e%4*8,t.length=Math.ceil(e/4)}clone(){const t=super.clone.call(this);return t.words=this.words.slice(0),t}}const Zo={stringify(t){const{words:e,sigBytes:n}=t,r=[];for(let t=0;t<n;t+=1){const n=e[t>>>2]>>>24-t%4*8&255;r.push((n>>>4).toString(16)),r.push((15&n).toString(16))}return r.join("")},parse(t){const e=t.length,n=[];for(let r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new Do(n,e/2)}},Ho={stringify(t){const{words:e,sigBytes:n}=t,r=[];for(let t=0;t<n;t+=1){const n=e[t>>>2]>>>24-t%4*8&255;r.push(String.fromCharCode(n))}return r.join("")},parse(t){const e=t.length,n=[];for(let r=0;r<e;r+=1)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new Do(n,e)}},Jo={stringify(t){try{return decodeURIComponent(escape(Ho.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:t=>Ho.parse(unescape(encodeURIComponent(t)))};class Wo extends Io{constructor(){super(),this._minBufferSize=0}reset(){this._data=new Do,this._nDataBytes=0}_append(t){let e=t;"string"==typeof e&&(e=Jo.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_process(t){let e;const{_data:n,blockSize:r}=this,s=n.words,o=n.sigBytes;let i=o/(4*r);i=t?Math.ceil(i):Math.max((0|i)-this._minBufferSize,0);const l=i*r,a=Math.min(4*l,o);if(l){for(let t=0;t<l;t+=r)this._doProcessBlock(s,t);e=s.splice(0,l),n.sigBytes-=a}return new Do(e,a)}clone(){const t=super.clone.call(this);return t._data=this._data.clone(),t}}class Ko extends Wo{constructor(t){super(),this.blockSize=16,this.cfg=Object.assign(new Io,t),this.reset()}static _createHelper(t){return(e,n)=>new t(n).finalize(e)}static _createHmacHelper(t){return(e,n)=>new Vo(t,n).finalize(e)}reset(){super.reset.call(this),this._doReset()}update(t){return this._append(t),this._process(),this}finalize(t){t&&this._append(t);return this._doFinalize()}}class Vo extends Io{constructor(t,e){super();const n=new t;this._hasher=n;let r=e;"string"==typeof r&&(r=Jo.parse(r));const s=n.blockSize,o=4*s;r.sigBytes>o&&(r=n.finalize(e)),r.clamp();const i=r.clone();this._oKey=i;const l=r.clone();this._iKey=l;const a=i.words,c=l.words;for(let t=0;t<s;t+=1)a[t]^=1549556828,c[t]^=909522486;i.sigBytes=o,l.sigBytes=o,this.reset()}reset(){const t=this._hasher;t.reset(),t.update(this._iKey)}update(t){return this._hasher.update(t),this}finalize(t){const e=this._hasher,n=e.finalize(t);e.reset();return e.finalize(this._oKey.clone().concat(n))}}const Xo=[];for(let t=0;t<64;t+=1)Xo[t]=4294967296*Math.abs(Math.sin(t+1))|0;const Go=(t,e,n,r,s,o,i)=>{const l=t+(e&n|~e&r)+s+i;return(l<<o|l>>>32-o)+e},Yo=(t,e,n,r,s,o,i)=>{const l=t+(e&r|n&~r)+s+i;return(l<<o|l>>>32-o)+e},Qo=(t,e,n,r,s,o,i)=>{const l=t+(e^n^r)+s+i;return(l<<o|l>>>32-o)+e},ti=(t,e,n,r,s,o,i)=>{const l=t+(n^(e|~r))+s+i;return(l<<o|l>>>32-o)+e};const ei=Ko._createHelper(class extends Ko{_doReset(){this._hash=new Do([1732584193,4023233417,2562383102,271733878])}_doProcessBlock(t,e){const n=t;for(let r=0;r<16;r+=1){const s=e+r,o=t[s];n[s]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}const r=this._hash.words,s=n[e+0],o=n[e+1],i=n[e+2],l=n[e+3],a=n[e+4],c=n[e+5],u=n[e+6],d=n[e+7],f=n[e+8],h=n[e+9],p=n[e+10],g=n[e+11],m=n[e+12],b=n[e+13],w=n[e+14],$=n[e+15];let y=r[0],_=r[1],v=r[2],k=r[3];y=Go(y,_,v,k,s,7,Xo[0]),k=Go(k,y,_,v,o,12,Xo[1]),v=Go(v,k,y,_,i,17,Xo[2]),_=Go(_,v,k,y,l,22,Xo[3]),y=Go(y,_,v,k,a,7,Xo[4]),k=Go(k,y,_,v,c,12,Xo[5]),v=Go(v,k,y,_,u,17,Xo[6]),_=Go(_,v,k,y,d,22,Xo[7]),y=Go(y,_,v,k,f,7,Xo[8]),k=Go(k,y,_,v,h,12,Xo[9]),v=Go(v,k,y,_,p,17,Xo[10]),_=Go(_,v,k,y,g,22,Xo[11]),y=Go(y,_,v,k,m,7,Xo[12]),k=Go(k,y,_,v,b,12,Xo[13]),v=Go(v,k,y,_,w,17,Xo[14]),_=Go(_,v,k,y,$,22,Xo[15]),y=Yo(y,_,v,k,o,5,Xo[16]),k=Yo(k,y,_,v,u,9,Xo[17]),v=Yo(v,k,y,_,g,14,Xo[18]),_=Yo(_,v,k,y,s,20,Xo[19]),y=Yo(y,_,v,k,c,5,Xo[20]),k=Yo(k,y,_,v,p,9,Xo[21]),v=Yo(v,k,y,_,$,14,Xo[22]),_=Yo(_,v,k,y,a,20,Xo[23]),y=Yo(y,_,v,k,h,5,Xo[24]),k=Yo(k,y,_,v,w,9,Xo[25]),v=Yo(v,k,y,_,l,14,Xo[26]),_=Yo(_,v,k,y,f,20,Xo[27]),y=Yo(y,_,v,k,b,5,Xo[28]),k=Yo(k,y,_,v,i,9,Xo[29]),v=Yo(v,k,y,_,d,14,Xo[30]),_=Yo(_,v,k,y,m,20,Xo[31]),y=Qo(y,_,v,k,c,4,Xo[32]),k=Qo(k,y,_,v,f,11,Xo[33]),v=Qo(v,k,y,_,g,16,Xo[34]),_=Qo(_,v,k,y,w,23,Xo[35]),y=Qo(y,_,v,k,o,4,Xo[36]),k=Qo(k,y,_,v,a,11,Xo[37]),v=Qo(v,k,y,_,d,16,Xo[38]),_=Qo(_,v,k,y,p,23,Xo[39]),y=Qo(y,_,v,k,b,4,Xo[40]),k=Qo(k,y,_,v,s,11,Xo[41]),v=Qo(v,k,y,_,l,16,Xo[42]),_=Qo(_,v,k,y,u,23,Xo[43]),y=Qo(y,_,v,k,h,4,Xo[44]),k=Qo(k,y,_,v,m,11,Xo[45]),v=Qo(v,k,y,_,$,16,Xo[46]),_=Qo(_,v,k,y,i,23,Xo[47]),y=ti(y,_,v,k,s,6,Xo[48]),k=ti(k,y,_,v,d,10,Xo[49]),v=ti(v,k,y,_,w,15,Xo[50]),_=ti(_,v,k,y,c,21,Xo[51]),y=ti(y,_,v,k,m,6,Xo[52]),k=ti(k,y,_,v,l,10,Xo[53]),v=ti(v,k,y,_,p,15,Xo[54]),_=ti(_,v,k,y,o,21,Xo[55]),y=ti(y,_,v,k,f,6,Xo[56]),k=ti(k,y,_,v,$,10,Xo[57]),v=ti(v,k,y,_,u,15,Xo[58]),_=ti(_,v,k,y,b,21,Xo[59]),y=ti(y,_,v,k,a,6,Xo[60]),k=ti(k,y,_,v,g,10,Xo[61]),v=ti(v,k,y,_,i,15,Xo[62]),_=ti(_,v,k,y,h,21,Xo[63]),r[0]=r[0]+y|0,r[1]=r[1]+_|0,r[2]=r[2]+v|0,r[3]=r[3]+k|0}_doFinalize(){const t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;e[r>>>5]|=128<<24-r%32;const s=Math.floor(n/4294967296),o=n;e[15+(r+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e[14+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(e.length+1),this._process();const i=this._hash,l=i.words;for(let t=0;t<4;t+=1){const e=l[t];l[t]=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8)}return i}clone(){const t=super.clone.call(this);return t._hash=this._hash.clone(),t}}),ni=[],ri=[],si=t=>{const e=Math.sqrt(t);for(let n=2;n<=e;n+=1)if(!(t%n))return!1;return!0},oi=t=>4294967296*(t-(0|t))|0;let ii=2,li=0;for(;li<64;)si(ii)&&(li<8&&(ni[li]=oi(ii**.5)),ri[li]=oi(ii**(1/3)),li+=1),ii+=1;const ai=[];const ci=Ko._createHelper(class extends Ko{_doReset(){this._hash=new Do(ni.slice(0))}_doProcessBlock(t,e){const n=this._hash.words;let r=n[0],s=n[1],o=n[2],i=n[3],l=n[4],a=n[5],c=n[6],u=n[7];for(let n=0;n<64;n+=1){if(n<16)ai[n]=0|t[e+n];else{const t=ai[n-15],e=(t<<25|t>>>7)^(t<<14|t>>>18)^t>>>3,r=ai[n-2],s=(r<<15|r>>>17)^(r<<13|r>>>19)^r>>>10;ai[n]=e+ai[n-7]+s+ai[n-16]}const d=r&s^r&o^s&o,f=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),h=u+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&a^~l&c)+ri[n]+ai[n];u=c,c=a,a=l,l=i+h|0,i=o,o=s,s=r,r=h+(f+d)|0}n[0]=n[0]+r|0,n[1]=n[1]+s|0,n[2]=n[2]+o|0,n[3]=n[3]+i|0,n[4]=n[4]+l|0,n[5]=n[5]+a|0,n[6]=n[6]+c|0,n[7]=n[7]+u|0}_doFinalize(){const t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(r+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash}clone(){const t=super.clone.call(this);return t._hash=this._hash.clone(),t}});function ui(t,e){"number"==typeof t&&(t=""+t);const n=("md5"==e?ei:ci)(t);return p("fixme"),""+n}function di(t){let e,n,r,s,o;function i(t,e){return t[1]?pi:hi}let l=i(t),a=l(t),h=(t[2].block.title||t[2].block.id)&&gi(t),p=!t[1]&&mi(t);return{c(){e=f("div"),a.c(),n=m(),h&&h.c(),r=m(),p&&p.c(),y(e,"id",s="block_"+t[0].id),y(e,"class","plot-block-container")},m(t,s){u(t,e,s),a.m(e,null),c(e,n),h&&h.m(e,null),c(e,r),p&&p.m(e,null),o=!0},p(t,c){l===(l=i(t))&&a?a.p(t,c):(a.d(1),a=l(t),a&&(a.c(),a.m(e,n))),t[2].block.title||t[2].block.id?h?h.p(t,c):(h=gi(t),h.c(),h.m(e,r)):h&&(h.d(1),h=null),t[1]?p&&(H(),K(p,1,1,(()=>{p=null})),J()):p?(p.p(t,c),2&c&&W(p,1)):(p=mi(t),p.c(),W(p,1),p.m(e,null)),(!o||1&c&&s!==(s="block_"+t[0].id))&&y(e,"id",s)},i(t){o||(W(p),o=!0)},o(t){K(p),o=!1},d(t){t&&d(e),a.d(),h&&h.d(),p&&p.d()}}}function fi(t){let e,n;return e=new Dt({props:{error:t[2].message}}),{c(){et(e.$$.fragment)},m(t,r){nt(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.error=t[2].message),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){rt(e,t)}}}function hi(t){let e,r=`<svg class="${"h-5 w-5 p-0.5 text-gray-900"}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>`;let s,o;return{c(){e=f("button"),y(e,"class","collapse"),y(e,"title","Collapse")},m(n,i){u(n,e,i),e.innerHTML=r,s||(o=w(e,"click",t[3]),s=!0)},p:n,d(t){t&&d(e),s=!1,o()}}}function pi(t){let e,r=`<svg class="${"h-5 w-5 p-0.5 text-gray-900"}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>`;let s,o;return{c(){e=f("button"),y(e,"class","expand"),y(e,"title","Expand")},m(n,i){u(n,e,i),e.innerHTML=r,s||(o=w(e,"click",t[3]),s=!0)},p:n,d(t){t&&d(e),s=!1,o()}}}function gi(t){let e,n,r,s,o,i=(t[2].block.title||t[2].block.id)+"";return{c(){e=f("div"),n=g(i),y(e,"class","title"),y(e,"title",r=t[1]?"Expand":"Collapse")},m(r,i){u(r,e,i),c(e,n),s||(o=w(e,"click",t[3]),s=!0)},p(t,s){4&s&&i!==(i=(t[2].block.title||t[2].block.id)+"")&&_(n,i),2&s&&r!==(r=t[1]?"Expand":"Collapse")&&y(e,"title",r)},d(t){t&&d(e),s=!1,o()}}}function mi(t){let e,n,r,s,o=t[2].block.desc&&bi(t);var i=t[2].klass;function l(t){return{props:{block:t[2].ndata,is_narrow:!1}}}return i&&(n=new i(l(t))),{c(){o&&o.c(),e=m(),n&&et(n.$$.fragment),r=b()},m(t,i){o&&o.m(t,i),u(t,e,i),n&&nt(n,t,i),u(t,r,i),s=!0},p(t,s){t[2].block.desc?o?(o.p(t,s),4&s&&W(o,1)):(o=bi(t),o.c(),W(o,1),o.m(e.parentNode,e)):o&&(H(),K(o,1,1,(()=>{o=null})),J());const a={};if(4&s&&(a.block=t[2].ndata),i!==(i=t[2].klass)){if(n){H();const t=n;K(t.$$.fragment,1,0,(()=>{rt(t,1)})),J()}i?(n=new i(l(t)),et(n.$$.fragment),W(n.$$.fragment,1),nt(n,r.parentNode,r)):n=null}else i&&n.$set(a)},i(t){s||(W(o),n&&W(n.$$.fragment,t),s=!0)},o(t){K(o),n&&K(n.$$.fragment,t),s=!1},d(t){o&&o.d(t),t&&d(e),t&&d(r),n&&rt(n,t)}}}function bi(t){let e,n;return e=new mn({props:{markdown:t[2].block.desc}}),{c(){et(e.$$.fragment)},m(t,r){nt(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.markdown=t[2].block.desc),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){rt(e,t)}}}function wi(t){let e,n,r,s;const o=[fi,di],i=[];function l(t,e){return t[2].is_error?0:1}return e=l(t),n=i[e]=o[e](t),{c(){n.c(),r=b()},m(t,n){i[e].m(t,n),u(t,r,n),s=!0},p(t,[s]){let a=e;e=l(t),e===a?i[e].p(t,s):(H(),K(i[a],1,1,(()=>{i[a]=null})),J(),n=i[e],n?n.p(t,s):(n=i[e]=o[e](t),n.c()),W(n,1),n.m(r.parentNode,r))},i(t){s||(W(n),s=!0)},o(t){K(n),s=!1},d(t){i[e].d(t),t&&d(r)}}}function $i(t,e,n){let r,{block:s}=e,{is_collapsed:o}=e,{switch_collapsed:i}=e;return t.$$set=t=>{"block"in t&&n(0,s=t.block),"is_collapsed"in t&&n(1,o=t.is_collapsed),"switch_collapsed"in t&&n(4,i=t.switch_collapsed)},t.$$.update=()=>{if(1&t.$$.dirty)if(s.is_error)n(2,r=s);else{const t=Bo.to_safe()(s.value,void 0);if(t.is_error)n(2,r=t);else if(t.value){const{name:e,klass:o,ndata:i}=t.value;n(2,r={is_error:!1,block:s.value,ndata:i,block_name:e,klass:o})}else n(2,r={is_error:!0,message:"Can't find block definition"})}},[s,o,r,function(t){t.preventDefault(),t.stopPropagation(),i(s.id)},i]}class yi extends it{constructor(t){super(),ot(this,t,$i,wi,l,{block:0,is_collapsed:1,switch_collapsed:4})}}function _i(t,e,n){const r=t.slice();return r[8]=e[n],r}function vi(t){let e,n,r=t[0].title+"";return{c(){e=f("div"),n=g(r),y(e,"class","plot-title")},m(t,r){u(t,e,r),c(e,n)},p(t,e){1&e&&r!==(r=t[0].title+"")&&_(n,r)},d(t){t&&d(e)}}}function ki(t){let e,n;return e=new mn({props:{markdown:t[0].desc}}),{c(){et(e.$$.fragment)},m(t,r){nt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.markdown=t[0].desc),e.$set(r)},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){K(e.$$.fragment,t),n=!1},d(t){rt(e,t)}}}function xi(t,e){let n,r,s;return r=new yi({props:{block:e[8],is_collapsed:e[1].collapsed[e[8].id],switch_collapsed:e[5]}}),{key:t,first:null,c(){n=b(),et(r.$$.fragment),this.first=n},m(t,e){u(t,n,e),nt(r,t,e),s=!0},p(t,n){e=t;const s={};4&n&&(s.block=e[8]),6&n&&(s.is_collapsed=e[1].collapsed[e[8].id]),r.$set(s)},i(t){s||(W(r.$$.fragment,t),s=!0)},o(t){K(r.$$.fragment,t),s=!1},d(t){t&&d(n),rt(r,t)}}}function ji(t){let e,n,r,s,o,i,l,a,h,p,g=[],b=new Map,w=t[0].title&&vi(t),$=t[0].desc&&ki(t),_=t[2];const v=t=>t[8].id;for(let e=0;e<_.length;e+=1){let n=_i(t,_,e),r=v(n);b.set(r,g[e]=xi(r,n))}return i=new En({props:{messages:t[3]}}),a=new wn({}),{c(){e=f("div"),w&&w.c(),n=m(),$&&$.c(),r=m(),s=f("div");for(let t=0;t<g.length;t+=1)g[t].c();o=m(),et(i.$$.fragment),l=m(),et(a.$$.fragment),y(s,"class","blocks"),y(e,"class",h="plot-page plot-style-"+t[4])},m(t,d){u(t,e,d),w&&w.m(e,null),c(e,n),$&&$.m(e,null),c(e,r),c(e,s);for(let t=0;t<g.length;t+=1)g[t].m(s,null);c(e,o),nt(i,e,null),c(e,l),nt(a,e,null),p=!0},p(t,[o]){t[0].title?w?w.p(t,o):(w=vi(t),w.c(),w.m(e,n)):w&&(w.d(1),w=null),t[0].desc?$?($.p(t,o),1&o&&W($,1)):($=ki(t),$.c(),W($,1),$.m(e,r)):$&&(H(),K($,1,1,(()=>{$=null})),J()),38&o&&(_=t[2],H(),g=Q(g,o,v,1,t,_,b,s,Y,xi,null,_i),J());const l={};8&o&&(l.messages=t[3]),i.$set(l),(!p||16&o&&h!==(h="plot-page plot-style-"+t[4]))&&y(e,"class",h)},i(t){if(!p){W($);for(let t=0;t<_.length;t+=1)W(g[t]);W(i.$$.fragment,t),W(a.$$.fragment,t),p=!0}},o(t){K($);for(let t=0;t<g.length;t+=1)K(g[t]);K(i.$$.fragment,t),K(a.$$.fragment,t),p=!1},d(t){t&&d(e),w&&w.d(),$&&$.d();for(let t=0;t<g.length;t+=1)g[t].d();rt(i),rt(a)}}}const Oi={match_and_normalize:t=>{if(is_object(t)&&"page"in t)return t}};function Ei(t,e,n){let r,s,o,i,{default_title:l}=e,{data:a}=e,c={collapsed:{}};return t.$$set=t=>{"default_title"in t&&n(6,l=t.default_title),"data"in t&&n(0,a=t.data)},t.$$.update=()=>{1&t.$$.dirty&&n(7,r=function(t){const e=[],n=new Set;for(let r=0;r<t.length;r++){const s=t[r];if(!is_object(s)){e.add({is_error:!0,id:`error_${r}`,message:"Invalid block data"});continue}const o=s.hash||ui(to_json(s),"md5");let i=void 0!==s.id&&""+s.id||s.title&&ui(s.title,"md5")||o;n.has(i)?e.add({is_error:!0,id:`error_${r}`,message:`Duplicate block id '${i}'`}):(n.add(i),e.push({id:i,is_error:!1,value:Object.assign(Object.assign({},s),{id:i,hash:o})}))}return{blocks:e,messages:zn([])}}(a.page)),128&t.$$.dirty&&n(2,s=r.blocks),128&t.$$.dirty&&n(3,o=r.messages),65&t.$$.dirty&&(document.title=a.title||"id"in a&&""+a.id||l||"PLOT"),1&t.$$.dirty&&n(4,i=a.style||"normal")},[a,c,s,o,i,function(t){t in c.collapsed?delete c.collapsed[t]:n(1,c.collapsed[t]=!0,c),n(1,c=Object.assign({},c))},l,r]}var zi=Object.freeze({__proto__:null,default:class extends it{constructor(t){super(),ot(this,t,Ei,ji,l,{default_title:6,data:0})}},definition:Oi});t.apps.page=zi,e.run=async function(e){try{let n,r,s,o=document.getElementById("data");if(e&&"data"in e)n=e.data;else if(o){if(r=o.getAttribute("type"),!r)throw"can't get data type on data script with id 'data'";const t=o.innerHTML;n=await ne(t,r)}else{const t=function(){const t=new URLSearchParams(window.location.search).get("data_url");if(t)return t;{let t=window.location.pathname;t.startsWith("/")||(t+="/");const e=/:([^:]+)$/i;return t.replace(e,"")}}();s=t.split("/").last().replace(/\.[^\.]+$/,""),r=Kt(t),n=await te(t)}is_object(n)&&n.css_url&&await Xt([n.css_url],"parallel");const i=Bo(n,r);if(i)document.body.classList.add("plot-single-body"),new Fo({target:document.body,props:{default_title:s,block_name:i.name,data:i.ndata,block_impl:i.klass}});else{const e=function(e){if(null==e)return;if(is_object(e)){const n=e;if(n.app){if(!is_array(n.app)||2!=n.app.length)throw"invalid app, it should be `app: [app_name, 0.1]`";const e=n.app[0],{definition:r,default:s}=t.apps[e],o=r.match_and_normalize(n);if(!o)throw`Data not matching '${e}' app`;return{name:e,klass:s,ndata:o}}for(const e in t.apps){const{definition:r,default:s}=t.apps[e],o=r.match_and_normalize(n);if(o)return{name:e,klass:s,ndata:o}}}}(n);if(!e)throw"can't find block or app";document.body.classList.add(`plot-${e.name}-body`),new e.klass({target:document.body,props:{default_title:s,data:e.ndata}})}}catch(t){console.error(t),new Dt({target:document.body,props:{error:t}})}}}();
