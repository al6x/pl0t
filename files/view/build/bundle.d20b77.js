!function(){"use strict";const e={blocks_limit:100,narrow_width:480,height_in_narrow_width_mode:200,parsers:{},blocks_for_file_extensions:{md:"text",markdown:"text",text:"text",txt:"text"},blocks:{},apps:{}};window.plot_config=e;const t={version:.1};function n(){}function r(e){return e()}function s(){return Object.create(null)}function o(e){e.forEach(r)}function i(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t}function l(e){return null==e?"":e}function c(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function d(e){e.parentNode.removeChild(e)}function f(e){return document.createElement(e)}function h(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function p(e){return document.createTextNode(e)}function g(){return p(" ")}function m(){return p("")}function b(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function w(e){return function(t){return t.preventDefault(),e.call(this,t)}}function $(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function v(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function y(e,t){e.value=null==t?"":t}function k(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function x(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}}let _,j;function O(){if(void 0===_){_=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(e){_=!0}}return _}window.plot_api=t;class E{constructor(e=null){this.a=e,this.e=this.n=null}m(e,t,n=null){this.e||(this.e=f(t.nodeName),this.t=t,this.h(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)u(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(d)}}function z(e){j=e}function S(){if(!j)throw new Error("Function called outside component initialization");return j}const A=[],q=[],C=[],M=[],R=Promise.resolve();let T=!1;function P(e){C.push(e)}function L(e){M.push(e)}let N=!1;const F=new Set;function U(){if(!N){N=!0;do{for(let e=0;e<A.length;e+=1){const t=A[e];z(t),Z(t.$$)}for(z(null),A.length=0;q.length;)q.pop()();for(let e=0;e<C.length;e+=1){const t=C[e];F.has(t)||(F.add(t),t())}C.length=0}while(A.length);for(;M.length;)M.pop()();T=!1,N=!1,F.clear()}}function Z(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(P)}}const I=new Set;let D;function B(){D={r:0,c:[],p:D}}function J(){D.r||o(D.c),D=D.p}function W(e,t){e&&e.i&&(I.delete(e),e.i(t))}function V(e,t,n,r){if(e&&e.o){if(I.has(e))return;I.add(e),D.c.push((()=>{I.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}function H(e,t){const n=t.token={};function r(e,r,s,o){if(t.token!==n)return;t.resolved=o;let i=t.ctx;void 0!==s&&(i=i.slice(),i[s]=o);const a=e&&(t.current=e)(i);let l=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==r&&e&&(B(),V(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),J())})):t.block.d(1),a.c(),W(a,1),a.m(t.mount(),t.anchor),l=!0),t.block=a,t.blocks&&(t.blocks[r]=a),l&&U()}if((s=e)&&"object"==typeof s&&"function"==typeof s.then){const n=S();if(e.then((e=>{z(n),r(t.then,1,t.value,e),z(null)}),(e=>{if(z(n),r(t.catch,2,t.error,e),z(null),!t.hasCatch)throw e})),t.current!==t.pending)return r(t.pending,0),!0}else{if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}var s}function K(e,t,n){const r=t.slice(),{resolved:s}=e;e.current===e.then&&(r[e.value]=s),e.current===e.catch&&(r[e.error]=s),e.block.p(r,n)}function X(e,t){e.d(1),t.delete(e.key)}function G(e,t){V(e,1,1,(()=>{t.delete(e.key)}))}function Y(e,t,n,r,s,o,i,a,l,c,u,d){let f=e.length,h=o.length,p=f;const g={};for(;p--;)g[e[p].key]=p;const m=[],b=new Map,w=new Map;for(p=h;p--;){const e=d(s,o,p),a=n(e);let l=i.get(a);l?r&&l.p(e,t):(l=c(a,e),l.c()),b.set(a,m[p]=l),a in g&&w.set(a,Math.abs(p-g[a]))}const $=new Set,v=new Set;function y(e){W(e,1),e.m(a,u),i.set(e.key,e),u=e.first,h--}for(;f&&h;){const t=m[h-1],n=e[f-1],r=t.key,s=n.key;t===n?(u=t.first,f--,h--):b.has(s)?!i.has(r)||$.has(r)?y(t):v.has(s)?f--:w.get(r)>w.get(s)?(v.add(r),y(t)):($.add(s),f--):(l(n,i),f--)}for(;f--;){const t=e[f];b.has(t.key)||l(t,i)}for(;h;)y(m[h-1]);return m}function Q(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function ee(e){e&&e.c()}function te(e,t,n,s){const{fragment:a,on_mount:l,on_destroy:c,after_update:u}=e.$$;a&&a.m(t,n),s||P((()=>{const t=l.map(r).filter(i);c?c.push(...t):o(t),e.$$.on_mount=[]})),u.forEach(P)}function ne(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function re(e,t){-1===e.$$.dirty[0]&&(A.push(e),T||(T=!0,R.then(U)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function se(e,t,r,i,a,l,c=[-1]){const u=j;z(e);const f=e.$$={fragment:null,ctx:null,props:l,update:n,not_equal:a,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:t.context||[]),callbacks:s(),dirty:c,skip_bound:!1};let h=!1;if(f.ctx=r?r(e,t.props||{},((t,n,...r)=>{const s=r.length?r[0]:n;return f.ctx&&a(f.ctx[t],f.ctx[t]=s)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](s),h&&re(e,t)),n})):[],f.update(),h=!0,o(f.before_update),f.fragment=!!i&&i(f.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);f.fragment&&f.fragment.l(e),e.forEach(d)}else f.fragment&&f.fragment.c();t.intro&&W(e.$$.fragment),te(e,t.target,t.anchor,t.customElement),U()}z(u)}class oe{$destroy(){ne(this,1),this.$destroy=n}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function ie(e,t){var n;const r=null===(n=window)||void 0===n?void 0:n.env[e];return null!=r?r:null!=t?t:void 0}let ae="Deno"in window?window.Deno:void 0;const le=null==ae,ce=[];let ue,de=0,fe=!1;function he(){fe||(fe=!0,setTimeout((async()=>{for(;de<ce.length;){let{name:e,test:t}=ce[de];de+=1;try{console.log(`  test | ${e}`);let n=t();n&&await n}catch(t){if(console.error(`  test | ${e} failed`),console.error(t),!le)throw t}}fe=!1}),0))}window.runTests=he;try{ue=(ie("test")||"").downcase()}catch(e){ue="false"}let pe="all"==ue||"true"==ue;function ge(e,t){ce.push({name:e,test:t}),(pe||e.downcase()==ue)&&he()}function me(e,t){for(const n in t)Object.defineProperty(e,n,{value:t[n],configurable:!1,writable:!0})}function be(){const e=this.replace(/^\s*\n|[\n\s]+$/,""),t=/^(\s+)/.parse(e);return 0==t.length?e:e.split("\n").map((e=>e.startsWith(t[0])?e.replace(t[0],""):e)).join("\n")}function we(e=0){return 0==e?Math.round(this):Math.round((this+Number.EPSILON)*Math.pow(10,e))/Math.pow(10,e)}function $e(e){const t=e.match(this);return t?1==t.length?[]:t.slice(1,t.length):[]}function ve(e){const t=e.match(this);return(null==t?void 0:t.groups)||{}}window.p=function(...e){if(le)console.log(...e);else{const t=e.map((e=>function(e,t=!1){return ae&&is_object(e)?ae.inspect(e,{colors:t}):e}(e,!0)));e.length,console.log(...t)}},window.discard=function(e){},window.is_number=function(e){return"number"==typeof e&&Number.isFinite(e)},window.is_array=function(e){return Array.isArray(e)},window.is_string=function(e){return"string"==typeof e},window.is_object=function(e){return"object"==typeof e&&null!==e},window.is_function=function(e){return"function"==typeof e},window.is_undefined=function(e){return void 0===typeof e},window.set_timeout=function(e,t){return setTimeout(e,t)},window.clear_timeout=clearTimeout,window.set_interval=function(e,t,n=!1){return n&&e(),setInterval(e,t)},window.clear_timeout=clearTimeout,Object.size=function(e){let t=0;for(let n in e)e.hasOwnProperty(n)&&t++;return t},Object.is_empty=function(e){for(let t in e)if(e.hasOwnProperty(t))return!1;return!0},me(Object.prototype,{is_equal:function(e){return _e(this,e)},to_s:function(){return""+this},clone:function(){return Object.assign({},this)},to_success:function(){return{is_error:!1,value:this}}}),me(Array.prototype,{size:function(){return this.length},is_empty:function(){return 0==this.length},clone:function(){return[...this]},take:function(e){return this.slice(0,e)},filter_map(e){const t=[];for(let n=0;n<this.length;n++){const r=e(this[n],n);void 0!==r&&t.push(r)}return t},skip_undefined(){return this.filter_map((e=>e))}}),me(String.prototype,{size:function(){return this.length},is_empty:function(){return""==this},clone:function(){return""+this},take:function(e){return this.slice(0,e)},to_error:function(){return{is_error:!0,message:this}},downcase:function(){return this.toLowerCase()},upcase:function(){return this.toUpperCase()},trim(){return this.replace(/^[\t\s\n]+|[\t\s\n]+$/g,"")},dedent:be}),ge("dedent",(()=>{ye.equal(be.call("\n  a\n  b\n    c"),"a\nb\n  c")})),me(Number.prototype,{round:we}),ge("round",(()=>{ye.equal(we.call(.05860103881518906,2),.06)})),me(Function.prototype,{to_safe:function(){const e=this;return function(...t){try{return{is_error:!1,value:e(...t)}}catch(e){return{is_error:!0,message:Ne(e).message}}}},debounce:function(e,t=!1){let n,r=this;return(...s)=>{t?(t=!1,r(...s)):(n&&clearTimeout(n),n=setTimeout((()=>r(...s)),e))}}}),me(RegExp.prototype,{parse:$e,parse_named:ve,parse1:function(e){const t=this.parse(e);if(1!=t.length)throw new Error(`expected 1 match but found ${t.length}`);return t[0]},parse2:function(e){const t=this.parse(e);if(2!=t.length)throw new Error(`expected 2 matches but found ${t.length}`);return[t[0],t[1]]},parse3:function(e){const t=this.parse(e);if(3!=t.length)throw new Error(`expected 3 matches but found ${t.length}`);return[t[0],t[1],t[2]]}}),ge("parse",(()=>{ye.equal($e.call(/.+ (\d+) (\d+)/,"a 22 45"),["22","45"]),ye.equal($e.call(/[^;]+;/,"drop table; create table;"),[])})),ge("parseNamed",(()=>{ye.equal(ve.call(/.+ (?<a>\d+) (?<b>\d+)/,"a 22 45"),{a:"22",b:"45"})}));const ye=function(e,t){const n=t?t instanceof Function?t():t:"Assertion error!";if(!e)throw new Error(n)};function ke(e){return is_array(e)?e.map(ke):is_object(e)?"dump"in e?ke(e.to_json_hook()):Object.assign({},...Object.entries(e).sort((([e],[t])=>e.localeCompare(t))).map((([e,t])=>({[e]:ke(t)})))):e}function xe(e,t=!0){return t?JSON.stringify(ke(e),null,2):JSON.stringify(ke(e))}function _e(e,t){return xe(e)===xe(t)}function je(e,t){if(e instanceof Array)for(let n=0;n<e.length;n++)t(e[n],n);else if(e instanceof Map)for(const[n,r]of e)t(r,n);else for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Oe(e,t){const n=t instanceof Function?t:e=>e==t;if(e instanceof Array)for(let t=0;t<e.length;t++){if(n(e[t],t))return e[t];for(const t in e)if(e.hasOwnProperty(t)&&n(e[t],t))return e[t]}}function Ee(e,t){if(t=t||(e=>e),0==e.length)return-1;let n=t(e[0]),r=0;for(let s=1;s<e.length;s++){let o=t(e[s]);o<n&&(n=o,r=s)}return r}function ze(e,t){if(t=t||(e=>e),0==e.length)return-1;let n=t(e[0]),r=0;for(let s=1;s<e.length;s++){let o=t(e[s]);o>n&&(n=o,r=s)}return r}function Se(e,t=!1){return Ae(e,.5,t)}function Ae(e,t,n=!1){const r=n?e:[...e].sort(((e,t)=>e-t)),s=(r.length-1)*t,o=Math.floor(s),i=s-o;return void 0!==r[o+1]?r[o]+i*(r[o+1]-r[o]):r[o]}function qe(e,t){const n=[];let r=0;for(;;){const s=[];r<e.length&&n.push(s);for(let o=0;o<t;o++){if(!(r+o<e.length))return n;s.push(e[r+o])}r+=t}}function Ce(e,t){if(e instanceof Array){const n=new Array,r=new Array,s=t instanceof Function?t:(e,n)=>t.includes(n);return je(e,((e,t)=>s(e,t)?n.push(e):r.push(e))),[n,r]}{const n={},r={},s=t instanceof Function?t:(e,n)=>t.includes(n);return je(e,((e,t)=>s(e,t)?n[t]=e:r[t]=e)),[n,r]}}function Me(e,t,n=!1){if(0==e.length)return e;{const r=typeof t(e[0]);let s,o;if("number"==r)s=function(e,n){return t(e)-t(n)};else if("boolean"==r)s=function(e,n){return(t(e)?1:0)-(t(n)?1:0)};else{if("string"!=r)throw new Error(`invalid return type for 'by' '${r}'`);s=function(e,n){return t(e).localeCompare(t(n))}}return o=[...e],o.sort(s),n&&o.reverse(),o}}function Re(e,t){if(is_object(e)&&"found"in e){if(e.found)return e.value;throw new Error(e.message||`value${t?" "+t:""} not found`)}if(is_string(e)){if(""==e)throw new Error(`string value${t?" "+t:""} not found`);return e}if(void 0===e)throw new Error(`value${t?" "+t:""} not defined`);return e}function Te(e,t,n){return je(e,((e,r)=>t=n(t,e,r))),t}function Pe(e){return Te(e,0,((e,t)=>e+t))}function Le(e,t){if(e instanceof Array)return e.map(t);if(e instanceof Map){const n=new Map;return je(e,((e,r)=>n.set(r,t(e,r)))),n}{const n={};return je(e,((e,r)=>n[r]=t(e,r))),n}}function Ne(e,t="Unknown error"){return is_object(e)&&e instanceof Error?(e.message||(e.message=t),e):new Error(""+(e||t))}function Fe(e){let t,n;return{c(){t=f("pre"),n=p(e[1]),$(t,"class","text-xs text-gray-600 mt-4")},m(e,r){u(e,t,r),c(t,n)},p(e,t){2&t&&v(n,e[1])},d(e){e&&d(t)}}}function Ue(e){let t,r,s,o,i,a=Ne(e[0]).message+"",l=e[1].length>0&&Fe(e);return{c(){t=f("div"),r=f("span"),r.textContent="Error",s=p(" -\n  "),o=p(a),i=g(),l&&l.c(),$(r,"class","text-red-600 font-bold"),$(t,"class","Fail")},m(e,n){u(e,t,n),c(t,r),c(t,s),c(t,o),c(t,i),l&&l.m(t,null)},p(e,[n]){1&n&&a!==(a=Ne(e[0]).message+"")&&v(o,a),e[1].length>0?l?l.p(e,n):(l=Fe(e),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},i:n,o:n,d(e){e&&d(t),l&&l.d()}}}function Ze(e,t,n){let r,{error:s}=t;return e.$$set=e=>{"error"in e&&n(0,s=e.error)},e.$$.update=()=>{1&e.$$.dirty&&n(1,r=(s&&s instanceof Error?s.stack:"")||"")},[s,r]}ye.equal=(e,t,n)=>{if(!_e(e,t)){const r=n?n instanceof Function?n():n:`Assertion error: ${xe(e,!0)} != ${xe(t,!0)}`;throw new Error(r)}},ye.fail=(e,t)=>{let n=!1;try{e()}catch(e){n=!0}if(!n){const e=t?t instanceof Function?t():t:"Assertion error: expected to fail but didn't";throw new Error(e)}},ye.approxEqual=(e,t,n,r)=>{r=r||.001;const s=(Math.abs(e)+Math.abs(t))/2*r;if(Math.abs(e-t)>s){const r=n?n instanceof Function?n():n:`Assertion error: ${xe(e,!0)} != ${xe(t,!0)}`;throw new Error(r)}},Promise.prototype.toJSON=function(){return"Promise"},Object.defineProperty(Promise.prototype,"cmap",{configurable:!1,enumerable:!1}),ge("groupByN",(()=>{ye.equal(qe([1,2,3],2),[[1,2],[3]]),ye.equal(qe([1,2],2),[[1,2]]),ye.equal(qe([1],2),[[1]]),ye.equal(qe([],2),[])})),ge("sortBy",(()=>{ye.equal(Me([{v:!0},{v:!1}],(({v:e})=>e)),[{v:!1},{v:!0}]),ye.equal(Me([{v:"b"},{v:""},{v:"c"}],(({v:e})=>e)),[{v:""},{v:"b"},{v:"c"}])})),ge("pick",(()=>{var e;ye.equal((e=["a"],Ce({a:1,b:2},((t,n)=>e.includes(n)))[0]),{a:1})})),Error.prototype.toJSON=function(){return{message:this.message,stack:this.stack}},Map.prototype.toJSON=function(){return Te(this,{},((e,t,n)=>(e[n]=t,e)))};class Ie extends oe{constructor(e){super(),se(this,e,Ze,Ue,a,{error:0})}}function De(e){let t,r;return{c(){t=f("div"),r=p(e[0])},m(e,n){u(e,t,n),c(t,r)},p(e,[t]){1&t&&v(r,e[0])},i:n,o:n,d(e){e&&d(t)}}}function Be(e,t,n){let{text:r="Processing..."}=t;return discard(r),e.$$set=e=>{"text"in e&&n(0,r=e.text)},[r]}class Je extends oe{constructor(e){super(),se(this,e,Be,De,a,{text:0})}}class We{constructor(e){this.v=e}get(){return this.v}set(e){this.v=e}}function Ve(e){const t=/\.([a-z0-9]+)$/i.parse(e);return t.length>0?t[0]:void 0}function He(e){return/\//.test(e)?function(){const e=ie("base_url");if(void 0===e)throw new Error("base_url not specified");return e}()+e:e}async function Ke(e,t){if("parallel"==t){const t=e.map(Ge);for(const e of t)await e}else for(const t of e)await Ge(t)}const Xe={};async function Ge(e){if(!(e in Xe)){const t=He(e);if(e.endsWith(".js"))Xe[e]=function(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.src=e,r.onerror=()=>{r.remove(),n(new Error(`Cannot load ${e}`))},r.onload=()=>{r.remove(),t()},document.body.append(r)}))}(t);else{if(!e.endsWith(".css"))throw new Error(`should be script or style url '${e}'`);Xe[e]=function(e){return new Promise(((t,n)=>{const r=document.createElement("link");r.rel="stylesheet",r.onerror=()=>{r.remove(),n(new Error(`Cannot load ${e}`))},r.onload=()=>{t()},r.href=e,document.head.appendChild(r)}))}(t)}}return Xe[e]}const Ye={};async function Qe(e){if(!(e in Ye)){Ye[e]=async function(){let t=await fetch(function(e,t={}){const n=[];for(const e in t){const r=t[e];null!=e&&null!=r&&n.push(`${encodeURIComponent(e)}=${encodeURIComponent(""+t[e])}`)}return n.length>0?`${e}${e.includes("?")?"&":"?"}${n.join("&")}`:e}(e,{clearcache:Math.random()}));if(404==t.status)throw new Error(`File '${e}' not found`);if(200!=t.status)throw new Error(`Can't load '${e}', response code ${t.status}`);return tt(await t.text(),Ve(e),e)}()}return Ye[e]}async function et(e){if(void 0===e)throw new Error("nether data nor data url provided");return"object"==typeof e&&"url"in e?await Qe(e.url):e}async function tt(t,n,r){if(n){const s=e.parsers[n];if(s)try{return await s(t)}catch(e){throw new Error(`can't parse '${r||n}', ${Ne(e).message}`)}}return t}async function nt(e){const t=(await st()).load(e);if(null==t)throw new Error("YAML data is empty");return t}async function rt(e){return(await st()).dump(e,{skipInvalid:!0,noRefs:!0})}async function st(){await Ke(["/vendor/js-yaml-4.1.0/js-yaml.min.js"],"serial");const e=window.jsyaml;if(!e)throw new Error("can't load 'js-yaml' library");return e}e.parsers.yml=nt,e.parsers.yaml=nt,e.parsers.json=async e=>JSON.parse(e),e.parsers.csv=async function(e){const{errors:t,data:n,meta:{fields:r}}=(await async function(){await Ke(["/vendor/papaparse-5.0.2/papaparse.min.js"],"serial");const e=window.Papa;if(!e)throw new Error("can't load 'papaparse' library");return e}()).parse(e,{header:!0,dynamicTyping:!0});if(t.lenght>0)throw new Error(Ne(t[0]).message);return{type:"csv_table",columns:r,rows:n}};const ot={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};ge("escapeHtml",(()=>{var e;ye.equal(null==(e="<div>")?"":(""+e).replace(/[&<>'"]/g,(function(e){return ot[e]})),"&lt;div&gt;")}));var it,at=(function(e){function t(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}}e.exports={defaults:{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1},getDefaults:t,changeDefaults:function(t){e.exports.defaults=t}}}(it={exports:{}},it.exports),it.exports);const lt=/[&<>"']/,ct=/[&<>"']/g,ut=/[<>"']|&(?!#?\w+;)/,dt=/[<>"']|&(?!#?\w+;)/g,ft={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ht=e=>ft[e];const pt=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function gt(e){return e.replace(pt,((e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const mt=/(^|[^\[])\^/g;const bt=/[^\w:]/g,wt=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;const $t={},vt=/^[^:]+:\/*[^/]*$/,yt=/^([^:]+:)[\s\S]*$/,kt=/^([^:]+:\/*[^/]*)[\s\S]*$/;function xt(e,t){$t[" "+e]||(vt.test(e)?$t[" "+e]=e+"/":$t[" "+e]=_t(e,"/",!0));const n=-1===(e=$t[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(yt,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(kt,"$1")+t:e+t}function _t(e,t,n){const r=e.length;if(0===r)return"";let s=0;for(;s<r;){const o=e.charAt(r-s-1);if(o!==t||n){if(o===t||!n)break;s++}else s++}return e.substr(0,r-s)}var jt={escape:function(e,t){if(t){if(lt.test(e))return e.replace(ct,ht)}else if(ut.test(e))return e.replace(dt,ht);return e},unescape:gt,edit:function(e,t){e=e.source||e,t=t||"";const n={replace:(t,r)=>(r=(r=r.source||r).replace(mt,"$1"),e=e.replace(t,r),n),getRegex:()=>new RegExp(e,t)};return n},cleanUrl:function(e,t,n){if(e){let e;try{e=decodeURIComponent(gt(n)).replace(bt,"").toLowerCase()}catch(e){return null}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}t&&!wt.test(n)&&(n=xt(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n},resolveUrl:xt,noopTest:{exec:function(){}},merge:function(e){let t,n,r=1;for(;r<arguments.length;r++)for(n in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},splitCells:function(e,t){const n=e.replace(/\|/g,((e,t,n)=>{let r=!1,s=t;for(;--s>=0&&"\\"===n[s];)r=!r;return r?"|":" |"})).split(/ \|/);let r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n},rtrim:_t,findClosingBracket:function(e,t){if(-1===e.indexOf(t[1]))return-1;const n=e.length;let r=0,s=0;for(;s<n;s++)if("\\"===e[s])s++;else if(e[s]===t[0])r++;else if(e[s]===t[1]&&(r--,r<0))return s;return-1},checkSanitizeDeprecation:function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}};const{noopTest:Ot,edit:Et,merge:zt}=jt,St={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:Ot,table:Ot,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};St.def=Et(St.def).replace("label",St._label).replace("title",St._title).getRegex(),St.bullet=/(?:[*+-]|\d{1,9}\.)/,St.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,St.item=Et(St.item,"gm").replace(/bull/g,St.bullet).getRegex(),St.list=Et(St.list).replace(/bull/g,St.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+St.def.source+")").getRegex(),St._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",St._comment=/<!--(?!-?>)[\s\S]*?-->/,St.html=Et(St.html,"i").replace("comment",St._comment).replace("tag",St._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),St.paragraph=Et(St._paragraph).replace("hr",St.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",St._tag).getRegex(),St.blockquote=Et(St.blockquote).replace("paragraph",St.paragraph).getRegex(),St.normal=zt({},St),St.gfm=zt({},St.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),St.gfm.nptable=Et(St.gfm.nptable).replace("hr",St.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",St._tag).getRegex(),St.gfm.table=Et(St.gfm.table).replace("hr",St.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",St._tag).getRegex(),St.pedantic=zt({},St.normal,{html:Et("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",St._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:Ot,paragraph:Et(St.normal._paragraph).replace("hr",St.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",St.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const At={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Ot,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Ot,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/,_punctuation:"!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~"};At.em=Et(At.em).replace(/punctuation/g,At._punctuation).getRegex(),At._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,At._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,At._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,At.autolink=Et(At.autolink).replace("scheme",At._scheme).replace("email",At._email).getRegex(),At._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,At.tag=Et(At.tag).replace("comment",St._comment).replace("attribute",At._attribute).getRegex(),At._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,At._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,At._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,At.link=Et(At.link).replace("label",At._label).replace("href",At._href).replace("title",At._title).getRegex(),At.reflink=Et(At.reflink).replace("label",At._label).getRegex(),At.normal=zt({},At),At.pedantic=zt({},At.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:Et(/^!?\[(label)\]\((.*?)\)/).replace("label",At._label).getRegex(),reflink:Et(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",At._label).getRegex()}),At.gfm=zt({},At.normal,{escape:Et(At.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),At.gfm.url=Et(At.gfm.url,"i").replace("email",At.gfm._extended_email).getRegex(),At.breaks=zt({},At.gfm,{br:Et(At.br).replace("{2,}","*").getRegex(),text:Et(At.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var qt={block:St,inline:At};const{defaults:Ct}=at,{block:Mt}=qt,{rtrim:Rt,splitCells:Tt,escape:Pt}=jt;var Lt=class e{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ct,this.rules=Mt.normal,this.options.pedantic?this.rules=Mt.pedantic:this.options.gfm&&(this.rules=Mt.gfm)}static get rules(){return Mt}static lex(t,n){return new e(n).lex(t)}lex(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.token(e,!0)}token(e,t){let n,r,s,o,i,a,l,c,u,d,f,h,p,g,m,b;for(e=e.replace(/^ +$/gm,"");e;)if((s=this.rules.newline.exec(e))&&(e=e.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"})),s=this.rules.code.exec(e)){const t=this.tokens[this.tokens.length-1];e=e.substring(s[0].length),t&&"paragraph"===t.type?t.text+="\n"+s[0].trimRight():(s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?s:Rt(s,"\n")}))}else if(s=this.rules.fences.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"code",lang:s[2]?s[2].trim():s[2],text:s[3]||""});else if(s=this.rules.heading.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});else if((s=this.rules.nptable.exec(e))&&(a={type:"table",header:Tt(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/\n$/,"").split("\n"):[]},a.header.length===a.align.length)){for(e=e.substring(s[0].length),f=0;f<a.align.length;f++)/^ *-+: *$/.test(a.align[f])?a.align[f]="right":/^ *:-+: *$/.test(a.align[f])?a.align[f]="center":/^ *:-+ *$/.test(a.align[f])?a.align[f]="left":a.align[f]=null;for(f=0;f<a.cells.length;f++)a.cells[f]=Tt(a.cells[f],a.header.length);this.tokens.push(a)}else if(s=this.rules.hr.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"hr"});else if(s=this.rules.blockquote.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,t),this.tokens.push({type:"blockquote_end"});else if(s=this.rules.list.exec(e)){for(e=e.substring(s[0].length),o=s[2],g=o.length>1,l={type:"list_start",ordered:g,start:g?+o:"",loose:!1},this.tokens.push(l),s=s[0].match(this.rules.item),c=[],n=!1,p=s.length,f=0;f<p;f++)a=s[f],d=a.length,a=a.replace(/^ *([*+-]|\d+\.) */,""),~a.indexOf("\n ")&&(d-=a.length,a=this.options.pedantic?a.replace(/^ {1,4}/gm,""):a.replace(new RegExp("^ {1,"+d+"}","gm"),"")),f!==p-1&&(i=Mt.bullet.exec(s[f+1])[0],(o.length>1?1===i.length:i.length>1||this.options.smartLists&&i!==o)&&(e=s.slice(f+1).join("\n")+e,f=p-1)),r=n||/\n\n(?!\s*$)/.test(a),f!==p-1&&(n="\n"===a.charAt(a.length-1),r||(r=n)),r&&(l.loose=!0),m=/^\[[ xX]\] /.test(a),b=void 0,m&&(b=" "!==a[1],a=a.replace(/^\[[ xX]\] +/,"")),u={type:"list_item_start",task:m,checked:b,loose:r},c.push(u),this.tokens.push(u),this.token(a,!1),this.tokens.push({type:"list_item_end"});if(l.loose)for(p=c.length,f=0;f<p;f++)c[f].loose=!0;this.tokens.push({type:"list_end"})}else if(s=this.rules.html.exec(e))e=e.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===s[1]||"script"===s[1]||"style"===s[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):Pt(s[0]):s[0]});else if(t&&(s=this.rules.def.exec(e)))e=e.substring(s[0].length),s[3]&&(s[3]=s[3].substring(1,s[3].length-1)),h=s[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[h]||(this.tokens.links[h]={href:s[2],title:s[3]});else if((s=this.rules.table.exec(e))&&(a={type:"table",header:Tt(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/\n$/,"").split("\n"):[]},a.header.length===a.align.length)){for(e=e.substring(s[0].length),f=0;f<a.align.length;f++)/^ *-+: *$/.test(a.align[f])?a.align[f]="right":/^ *:-+: *$/.test(a.align[f])?a.align[f]="center":/^ *:-+ *$/.test(a.align[f])?a.align[f]="left":a.align[f]=null;for(f=0;f<a.cells.length;f++)a.cells[f]=Tt(a.cells[f].replace(/^ *\| *| *\| *$/g,""),a.header.length);this.tokens.push(a)}else if(s=this.rules.lheading.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"heading",depth:"="===s[2].charAt(0)?1:2,text:s[1]});else if(t&&(s=this.rules.paragraph.exec(e)))e=e.substring(s[0].length),this.tokens.push({type:"paragraph",text:"\n"===s[1].charAt(s[1].length-1)?s[1].slice(0,-1):s[1]});else if(s=this.rules.text.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens}};const{defaults:Nt}=at,{cleanUrl:Ft,escape:Ut}=jt;var Zt=class{constructor(e){this.options=e||Nt}code(e,t,n){const r=(t||"").match(/\S*/)[0];if(this.options.highlight){const t=this.options.highlight(e,r);null!=t&&t!==e&&(n=!0,e=t)}return r?'<pre><code class="'+this.options.langPrefix+Ut(r,!0)+'">'+(n?e:Ut(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:Ut(e,!0))+"</code></pre>"}blockquote(e){return"<blockquote>\n"+e+"</blockquote>\n"}html(e){return e}heading(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,n){const r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e){return"<li>"+e+"</li>\n"}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+"</p>\n"}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return"<tr>\n"+e+"</tr>\n"}tablecell(e,t){const n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,n){if(null===(e=Ft(this.options.sanitize,this.options.baseUrl,e)))return n;let r='<a href="'+Ut(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>",r}image(e,t,n){if(null===(e=Ft(this.options.sanitize,this.options.baseUrl,e)))return n;let r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">",r}text(e){return e}},It=class{constructor(){this.seen={}}slug(e){let t=e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(t)){const e=t;do{this.seen[e]++,t=e+"-"+this.seen[e]}while(this.seen.hasOwnProperty(t))}return this.seen[t]=0,t}};const{defaults:Dt}=at,{inline:Bt}=qt,{findClosingBracket:Jt,escape:Wt}=jt;var Vt=class e{constructor(e,t){if(this.options=t||Dt,this.links=e,this.rules=Bt.normal,this.options.renderer=this.options.renderer||new Zt,this.renderer=this.options.renderer,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=Bt.pedantic:this.options.gfm&&(this.options.breaks?this.rules=Bt.breaks:this.rules=Bt.gfm)}static get rules(){return Bt}static output(t,n,r){return new e(n,r).output(t)}output(t){let n,r,s,o,i,a,l="";for(;t;)if(i=this.rules.escape.exec(t))t=t.substring(i[0].length),l+=Wt(i[1]);else if(i=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(i[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(i[0])&&(this.inRawBlock=!1),t=t.substring(i[0].length),l+=this.renderer.html(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):Wt(i[0]):i[0]);else if(i=this.rules.link.exec(t)){const r=Jt(i[2],"()");if(r>-1){const e=(0===i[0].indexOf("!")?5:4)+i[1].length+r;i[2]=i[2].substring(0,r),i[0]=i[0].substring(0,e).trim(),i[3]=""}t=t.substring(i[0].length),this.inLink=!0,s=i[2],this.options.pedantic?(n=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s),n?(s=n[1],o=n[3]):o=""):o=i[3]?i[3].slice(1,-1):"",s=s.trim().replace(/^<([\s\S]*)>$/,"$1"),l+=this.outputLink(i,{href:e.escapes(s),title:e.escapes(o)}),this.inLink=!1}else if((i=this.rules.reflink.exec(t))||(i=this.rules.nolink.exec(t))){if(t=t.substring(i[0].length),n=(i[2]||i[1]).replace(/\s+/g," "),n=this.links[n.toLowerCase()],!n||!n.href){l+=i[0].charAt(0),t=i[0].substring(1)+t;continue}this.inLink=!0,l+=this.outputLink(i,n),this.inLink=!1}else if(i=this.rules.strong.exec(t))t=t.substring(i[0].length),l+=this.renderer.strong(this.output(i[4]||i[3]||i[2]||i[1]));else if(i=this.rules.em.exec(t))t=t.substring(i[0].length),l+=this.renderer.em(this.output(i[6]||i[5]||i[4]||i[3]||i[2]||i[1]));else if(i=this.rules.code.exec(t))t=t.substring(i[0].length),l+=this.renderer.codespan(Wt(i[2].trim(),!0));else if(i=this.rules.br.exec(t))t=t.substring(i[0].length),l+=this.renderer.br();else if(i=this.rules.del.exec(t))t=t.substring(i[0].length),l+=this.renderer.del(this.output(i[1]));else if(i=this.rules.autolink.exec(t))t=t.substring(i[0].length),"@"===i[2]?(r=Wt(this.mangle(i[1])),s="mailto:"+r):(r=Wt(i[1]),s=r),l+=this.renderer.link(s,null,r);else if(this.inLink||!(i=this.rules.url.exec(t))){if(i=this.rules.text.exec(t))t=t.substring(i[0].length),this.inRawBlock?l+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):Wt(i[0]):i[0]):l+=this.renderer.text(Wt(this.smartypants(i[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else{if("@"===i[2])r=Wt(i[0]),s="mailto:"+r;else{do{a=i[0],i[0]=this.rules._backpedal.exec(i[0])[0]}while(a!==i[0]);r=Wt(i[0]),s="www."===i[1]?"http://"+r:r}t=t.substring(i[0].length),l+=this.renderer.link(s,null,r)}return l}static escapes(t){return t?t.replace(e.rules._escapes,"$1"):t}outputLink(e,t){const n=t.href,r=t.title?Wt(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,Wt(e[1]))}smartypants(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e}mangle(e){if(!this.options.mangle)return e;const t=e.length;let n,r="",s=0;for(;s<t;s++)n=e.charCodeAt(s),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}},Ht=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}};const{defaults:Kt}=at,{merge:Xt,unescape:Gt}=jt;var Yt=class e{constructor(e){this.tokens=[],this.token=null,this.options=e||Kt,this.options.renderer=this.options.renderer||new Zt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new It}static parse(t,n){return new e(n).parse(t)}parse(e){this.inline=new Vt(e.links,this.options),this.inlineText=new Vt(e.links,Xt({},this.options,{renderer:new Ht})),this.tokens=e.reverse();let t="";for(;this.next();)t+=this.tok();return t}next(){return this.token=this.tokens.pop(),this.token}peek(){return this.tokens[this.tokens.length-1]||0}parseText(){let e=this.token.text;for(;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)}tok(){let e="";switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,Gt(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":{let t,n,r,s,o="";for(r="",t=0;t<this.token.header.length;t++)r+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(o+=this.renderer.tablerow(r),t=0;t<this.token.cells.length;t++){for(n=this.token.cells[t],r="",s=0;s<n.length;s++)r+=this.renderer.tablecell(this.inline.output(n[s]),{header:!1,align:this.token.align[s]});e+=this.renderer.tablerow(r)}return this.renderer.table(o,e)}case"blockquote_start":for(e="";"blockquote_end"!==this.next().type;)e+=this.tok();return this.renderer.blockquote(e);case"list_start":{e="";const t=this.token.ordered,n=this.token.start;for(;"list_end"!==this.next().type;)e+=this.tok();return this.renderer.list(e,t,n)}case"list_item_start":{e="";const t=this.token.loose,n=this.token.checked,r=this.token.task;if(this.token.task)if(t)if("text"===this.peek().type){const e=this.peek();e.text=this.renderer.checkbox(n)+" "+e.text}else this.tokens.push({type:"text",text:this.renderer.checkbox(n)});else e+=this.renderer.checkbox(n);for(;"list_item_end"!==this.next().type;)e+=t||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(e,r,n)}case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:{const e='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(e);console.log(e)}}}};const{merge:Qt,checkSanitizeDeprecation:en,escape:tn}=jt,{getDefaults:nn,changeDefaults:rn,defaults:sn}=at;function on(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(n||"function"==typeof t){n||(n=t,t=null),t=Qt({},on.defaults,t||{}),en(t);const r=t.highlight;let s,o,i=0;try{s=Lt.lex(e,t)}catch(e){return n(e)}o=s.length;const a=function(e){if(e)return t.highlight=r,n(e);let o;try{o=Yt.parse(s,t)}catch(t){e=t}return t.highlight=r,e?n(e):n(null,o)};if(!r||r.length<3)return a();if(delete t.highlight,!o)return a();for(;i<s.length;i++)!function(e){"code"!==e.type?--o||a():r(e.text,e.lang,(function(t,n){return t?a(t):null==n||n===e.text?--o||a():(e.text=n,e.escaped=!0,void(--o||a()))}))}(s[i])}else try{return t=Qt({},on.defaults,t||{}),en(t),Yt.parse(Lt.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||on.defaults).silent)return"<p>An error occurred:</p><pre>"+tn(e.message+"",!0)+"</pre>";throw e}}on.options=on.setOptions=function(e){return Qt(on.defaults,e),rn(on.defaults),on},on.getDefaults=nn,on.defaults=sn,on.Parser=Yt,on.parser=Yt.parse,on.Renderer=Zt,on.TextRenderer=Ht,on.Lexer=Lt,on.lexer=Lt.lex,on.InlineLexer=Vt,on.inlineLexer=Vt.output,on.Slugger=It,on.parse=on;var an=on;let ln=!1;async function cn(e){await async function(e){return new Promise((t=>setTimeout(t,e)))}(0);const t=new an.Renderer;let n=0;const r=()=>`__special_katext_id_${n++}__`,s={};function o(e){return e.replace("&gt;",">").replace("&lt;",">").replace("&quot;","'")}function i(e){return e=(e=e.replace(/\$\$([\s\S]+?)\$\$/g,((e,t)=>{const n=r();return s[n]={type:"block",expression:o(t)},n}))).replace(/\$([^\n\s]+?)\$/g,((e,t)=>{const n=r();return s[n]={type:"inline",expression:o(t)},n}))}const a=t.listitem;t.listitem=function(e,t,n){return a(i(e),t,n)};const l=t.paragraph;t.paragraph=function(e){return l(i(e))};const c=t.tablecell;function u(e){an.setOptions({renderer:t,highlight:e,pedantic:!1,gfm:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!0})}let d;if(t.tablecell=function(e,t){return c(i(e),t)},ln){const t=window.hljs;if(!t)throw new Error("can't load 'highlightjs' library for markdown");u(((e,n)=>{try{return n?t.highlight(e,{language:n}).value:e}catch(t){return e}})),d=an(e.dedent())}else{let t=!1;if(u(((e,n)=>(n&&(t=!0),e))),d=an(e.dedent()),t)return await Ke(["/vendor/highlight.js-11.0.1/default.min.css","/vendor/highlight.js-11.0.1/highlight.min.js"],"parallel"),ln=!0,cn(e)}return d.includes("__special_katext_id_")&&(await Ke(["/vendor/katex-0.11.1/katex.min.js"],"parallel"),Ke(["/vendor/katex-0.11.1/katex.css"],"parallel").then((e=>console.warn(`can't load styles for KaTeX, ${Ne(e).message}`))),d=d.replace(/(__special_katext_id_\d+__)/g,((e,t)=>{let{type:n,expression:r}=s[t];return r=r.replace(/<br\/>/g,"\\\\"),window.katex.renderToString(r,{output:"html",displayMode:"block"==n,throwOnError:!1})}))),d}function un(e){let t,r,s=e[0].html+"";return{c(){r=m(),t=new E(r)},m(e,n){t.m(s,e,n),u(e,r,n)},p(e,n){1&n&&s!==(s=e[0].html+"")&&t.p(s)},i:n,o:n,d(e){e&&d(r),e&&t.d()}}}function dn(e){let t,n;return t=new Ie({props:{error:e[0].error}}),{c(){ee(t.$$.fragment)},m(e,r){te(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.error=e[0].error),t.$set(r)},i(e){n||(W(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){ne(t,e)}}}function fn(e){let t,r;return t=new Je({}),{c(){ee(t.$$.fragment)},m(e,n){te(t,e,n),r=!0},p:n,i(e){r||(W(t.$$.fragment,e),r=!0)},o(e){V(t.$$.fragment,e),r=!1},d(e){ne(t,e)}}}function hn(e){let t,n,r,s;const o=[fn,dn,un],i=[];function a(e,t){return"empty"==e[0].state?0:"error"==e[0].state?1:2}return n=a(e),r=i[n]=o[n](e),{c(){t=f("div"),r.c(),$(t,"class","markdown")},m(e,r){u(e,t,r),i[n].m(t,null),s=!0},p(e,[s]){let l=n;n=a(e),n===l?i[n].p(e,s):(B(),V(i[l],1,1,(()=>{i[l]=null})),J(),r=i[n],r?r.p(e,s):(r=i[n]=o[n](e),r.c()),W(r,1),r.m(t,null))},i(e){s||(W(r),s=!0)},o(e){V(r),s=!1},d(e){e&&d(t),i[n].d()}}}function pn(e,t,n){let{markdown:r}=t,s={state:"empty"};return e.$$set=e=>{"markdown"in e&&n(1,r=e.markdown)},e.$$.update=()=>{if(3&e.$$.dirty&&("empty"==s.state||s.markdown!=r)){const e=r;cn(r).then((t=>{n(0,s={state:"success",markdown:e,html:t})})).catch((t=>{const r=Ne(t,"Unknown error while processing markdown").message;n(0,s={state:"error",markdown:e,error:r})}))}},[s,r]}class gn extends oe{constructor(e){super(),se(this,e,pn,hn,a,{markdown:1})}}function mn(e){let t;return{c(){t=f("a"),t.textContent="PL0T",$(t,"class","text-gray-300 svelte-7t0t1x"),$(t,"href","http://pl0t.com"),$(t,"target","_blank")},m(e,n){u(e,t,n)},p:n,i:n,o:n,d(e){e&&d(t)}}}class bn extends oe{constructor(e){super(),se(this,e,null,mn,a,{})}}function wn(e){let t,r;return t=new Ie({props:{error:"Data images not supported yet"}}),{c(){ee(t.$$.fragment)},m(e,n){te(t,e,n),r=!0},p:n,i(e){r||(W(t.$$.fragment,e),r=!0)},o(e){V(t.$$.fragment,e),r=!1},d(e){ne(t,e)}}}function $n(e){let t,r,s;return{c(){t=f("img"),t.src!==(r=e[1].url)&&$(t,"src",r),$(t,"alt",s=e[0].id)},m(e,n){u(e,t,n)},p(e,n){2&n&&t.src!==(r=e[1].url)&&$(t,"src",r),1&n&&s!==(s=e[0].id)&&$(t,"alt",s)},i:n,o:n,d(e){e&&d(t)}}}function vn(e){let t,n,r,s;const o=[$n,wn],i=[];function a(e,t){return"object"==typeof e[1]&&"url"in e[1]?0:1}return n=a(e),r=i[n]=o[n](e),{c(){t=f("div"),r.c(),$(t,"class","ImageBlockContent")},m(e,r){u(e,t,r),i[n].m(t,null),s=!0},p(e,[s]){let l=n;n=a(e),n===l?i[n].p(e,s):(B(),V(i[l],1,1,(()=>{i[l]=null})),J(),r=i[n],r?r.p(e,s):(r=i[n]=o[n](e),r.c()),W(r,1),r.m(t,null))},i(e){s||(W(r),s=!0)},o(e){V(r),s=!1},d(e){e&&d(t),i[n].d()}}}const yn={match_and_normalize:e=>{if(is_object(e)&&"image"in e)return e}};function kn(e,t,n){let r,{block:s}=t,{state:o}=t;return discard(o),e.$$set=e=>{"block"in e&&n(0,s=e.block),"state"in e&&n(2,o=e.state)},e.$$.update=()=>{1&e.$$.dirty&&n(1,r=s.image)},[s,r,o]}var xn=Object.freeze({__proto__:null,default:class extends oe{constructor(e){super(),se(this,e,kn,vn,a,{block:0,state:2})}},definition:yn});function _n(e){let t,n;return t=new Ie({props:{error:e[3]}}),{c(){ee(t.$$.fragment)},m(e,r){te(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.error=e[3]),t.$set(r)},i(e){n||(W(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){ne(t,e)}}}function jn(e){let t,n;return t=new gn({props:{markdown:e[2]}}),{c(){ee(t.$$.fragment)},m(e,r){te(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.markdown=e[2]),t.$set(r)},i(e){n||(W(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){ne(t,e)}}}function On(e){let t,r;return t=new Je({}),{c(){ee(t.$$.fragment)},m(e,n){te(t,e,n),r=!0},p:n,i(e){r||(W(t.$$.fragment,e),r=!0)},o(e){V(t.$$.fragment,e),r=!1},d(e){ne(t,e)}}}function En(e){let t,n,r,s={ctx:e,current:null,token:null,hasCatch:!0,pending:On,then:jn,catch:_n,value:2,error:3,blocks:[,,,]};return H(n=et(e[0].text),s),{c(){t=f("div"),s.block.c(),$(t,"class","TextBlockContent")},m(e,n){u(e,t,n),s.block.m(t,s.anchor=null),s.mount=()=>t,s.anchor=null,r=!0},p(t,[r]){e=t,s.ctx=e,1&r&&n!==(n=et(e[0].text))&&H(n,s)||K(s,e,r)},i(e){r||(W(s.block),r=!0)},o(e){for(let e=0;e<3;e+=1){V(s.blocks[e])}r=!1},d(e){e&&d(t),s.block.d(),s.token=null,s=null}}}const zn={match_and_normalize:e=>"string"==typeof e?{text:e}:is_object(e)&&"text"in e?e:void 0};function Sn(e,t,n){let{block:r}=t,{state:s}=t;return discard(s),e.$$set=e=>{"block"in e&&n(0,r=e.block),"state"in e&&n(1,s=e.state)},[r,s]}var An=Object.freeze({__proto__:null,default:class extends oe{constructor(e){super(),se(this,e,Sn,En,a,{block:0,state:1})}},definition:zn});const qn=["width","height","config"];function Cn(e){for(const t in e)if(qn.indexOf(t)<0)throw new Error(`invalid property '${t}'`);return or("width",e.width,["number","undefined"]),or("height",e.height,["number","undefined"]),e}const Mn=["linear","linear-closed","step","step-before","step-after","basis","basis-open","basis-closed","cardinal","cardinal-open","cardinal-closed","bundle","monotone"];const Rn=["point","circle","line","area","bar","rect","rule","square","text","tick","trail"];function Tn(e){if(Rn.indexOf(e)<0)throw new Error(`invalid mark '${e}', available are ${Rn.join(", ")}`);return e}const Pn=["mark","color","size","point","interpolate","opacity","thickness","vega"];function Ln(e){for(const t in e)if(Pn.indexOf(t)<0)throw new Error(`unknown mark property '${t}', available are ${Pn.join(", ")}`);const{mark:t,color:n,size:r,point:s,interpolate:o,opacity:i,thickness:a,vega:l}=e;return or("color",n,["string","undefined"]),or("size",r,["number","undefined"]),or("point",s,["boolean","undefined"]),o&&function(e){if(Mn.indexOf(e)<0)throw new Error(`invalid interpolate '${e}', available are ${Mn.join(", ")}`)}(o),or("opacity",i,["number","undefined"]),or("thickness",a,["number","undefined"]),or("vega",l,["object","undefined"]),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({type:Tn(t)},void 0!==n?{color:n}:{}),void 0!==r?{size:r}:{}),void 0!==s?{point:s}:{}),void 0!==o?{interpolate:o}:{}),void 0!==i?{opacity:i}:{}),void 0!==a?{thickness:a}:{}),void 0!==l?l:{})}const Nn=["nominal","ordinal","quantitative","temporal"];const Fn=["linear","pow","sqrt","symlog","log","time","utc","ordinal","band","point","bin-ordinal","quantile","quantize","threshold"];const Un=["count","valid","missing","distinct","sum","mean","average","variance","variancep","stdev","stdevp","stderr","median","q1","q3","ci0","ci1","min","max","argmin","argmax","product"];const Zn=["x","y","x2","y2","xError","yError","xError2","yError2","longitude","latitude","longitude2","latitude2","color","opacity","fillOpacity","strokeOpacity","shape","size","strokeWidth","text","tooltip","href","detail","key","order"];const In=["year","yearquarter","yearquartermonth","yearmonth","yearmonthdate","yearmonthdatehours","yearmonthdatehoursminutes","yearmonthdatehoursminutesseconds","quarter","quartermonth","month","monthdate","date","day","hours","hoursminutes","hoursminutesseconds","minutes","minutesseconds","seconds","secondsmilliseconds","milliseconds"];function Dn(e){if(In.indexOf(e)<0)throw new Error(`invalid time unit '${e}', available are ${In.join(", ")}`);return e}function Bn(e){if(or("bin",e,["string","number","boolean","undefined"]),"string"==typeof e&&"binned"!=e)throw new Error("bin should have type of \"boolean | number | 'binned'\"");return"boolean"==typeof e||"string"==typeof e?e:{base:e,maxbins:e}}const Jn=["calculate","as"];function Wn(e){for(const t in e)if(Jn.indexOf(t)<0)throw new Error(`unknown calculate property '${t}', available are ${Jn.join(", ")}`);return e}const Vn=["filter"];function Hn(e){for(const t in e)if(Vn.indexOf(t)<0)throw new Error(`unknown filter property '${t}', available are ${Vn.join(", ")}`);return e}const Kn=["type","aggregate","legend","title","labels","time_unit","timeUnit","bin","zero","domain","range","scale","value","override_value","scheme","reverse","vega"];function Xn(e){const t=[];for(const n in e)if(Kn.indexOf(n)<0){if(Zn.indexOf(n)<0)throw new Error(`unknown encoding property '${n}', available are ${Zn.join(", ")}, ${Kn.join(", ")}`);t.push(n)}if(0==t.length)throw new Error(`encoding channel not specified, please specify one of ${Zn.join(", ")}`);if(t.length>1)throw new Error(`only one channel allowed in the same encoding, leave only one of ${t.join(", ")}`);e.type&&function(e){if(Nn.indexOf(e)<0)throw new Error(`invalid field type '${e}', available are ${Nn.join(", ")}`)}(e.type),e.aggregate&&function(e){if(Un.indexOf(e)<0)throw new Error(`invalid aggregate '${e}', available are ${Un.join(", ")}`)}(e.aggregate),or("legend",e.legend,["string","boolean","undefined"]),or("title",e.title,["string","boolean","undefined"]),or("labels",e.labels,["boolean","undefined"]),e.time_unit&&Dn(e.time_unit),e.timeUnit&&Dn(e.timeUnit),e.bin&&Bn(e.bin),or("zero",e.zero,["boolean","undefined"]),e.scale&&function(e){if(Fn.indexOf(e)<0)throw new Error(`invalid scale type '${e}', available are ${Fn.join(", ")}`)}(e.scale),e.domain&&function(e){e.map((e=>(or("scale domain",e,["number","string","boolean"]),e)))}(e.domain),e.range&&function(e){"string"==typeof e?or("scale range",e,["string"]):e.map((e=>(or("scale domain",e,["number","string"]),e)))}(e.range),or("scheme",e.scheme,["string","undefined"]),or("reverse",e.reverse,["boolean","undefined"]),or("vega",e.vega,["object","undefined"]);const{type:n,title:r,labels:s,aggregate:o,legend:i,timeUnit:a,time_unit:l,bin:c,zero:u,domain:d,range:f,scale:h,value:p,scheme:g,reverse:m,vega:b,override_value:w}=e,$=Zn.find((t=>t in e));if(!$)throw new Error(`Channel not found in ${JSON.stringify(e)}!`);const v=e[$],y=Object.assign(Object.assign(Object.assign({},void 0!==b&&"axis"in b?b.axis:{}),r&&"string"==typeof r?{title:r}:r?{}:{title:null}),void 0!==s?{labels:s}:{}),k=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},void 0!==b&&"scale"in b?b.scale:{}),void 0!==h?{type:h}:{}),void 0!==d?{nice:!1}:{}),void 0!==u?{zero:u}:{}),void 0!==d?{domain:d}:{}),void 0!==f?{range:f}:{}),void 0!==g?{scheme:g}:{}),void 0!==m?{reverse:m}:{});let x,_=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},void 0!==b?b:{}),""!==v?{field:v}:{}),{type:n||"quantitative"}),void 0!==o?{aggregate:o}:{}),void 0!==i?{legend:i}:{legend:!1}),void 0!==a?{timeUnit:a}:{}),void 0!==l?{timeUnit:l}:{}),Object.keys(y).length>0?{axis:y}:{}),Object.keys(k).length>0?{scale:k}:{}),void 0!==c?{bin:Bn(c)}:{});if(p){const e=function(e,t,n){const r=e=>{if(void 0===e)throw new Error("encoding value shouldn't be undefined");return or("encoding value",e,["number","string","boolean"]),e};if(Array.isArray(e)){if("condition"in n)throw new Error("Conditional value can't be used with condition!");if(2==e.length){const[t,s]=e;return[Object.assign(Object.assign({},n),{condition:{test:t,value:r(s)}}),void 0]}if(3==e.length){const[t,s,o]=e;return[Object.assign(Object.assign({},n),{value:r(o),condition:{test:t,value:r(s)}}),void 0]}throw new Error("encoding value should be a simple value or array with 2 ['datum.value > 0', 'green'] or 3 elements ['datum.value > 0', 1, -1]")}if(Gn.indexOf(t)>=0){if(""!=n.field&&void 0!==n.field&&null!==n.field)throw new Error(`value on ${Gn.join(", ")} channels cannot be used with 'field'`);const t=[{explicit_value:r(e)}];return[Object.assign(Object.assign({},n),{field:"explicit_value"}),t]}return[Object.assign(Object.assign({},n),{value:r(e)}),void 0]}(p,$,_);_=e[0],x=e[1]}return[$,_,x]}const Gn=["x","y"];const Yn=["concat"];function Qn(e){for(const t in e)if(Yn.indexOf(t)<0)throw new Error(`unknown concat property '${t}', available are ${Yn.join(", ")}`);return e}function er(e){const t=[];let n,r={},s=[],o=[],i={};const a=[],l=[];for(const c of e)if("string"==typeof c)t.push(Tn(c));else if("mark"in c)t.push(Ln(c));else if(Array.isArray(c))o=[...o,tr(c)];else if("calculate"in c)s.push(Wn(c));else if("filter"in c)s.push(Hn(c));else if("facet"in c||"row"in c||"column"in c)a.push(c);else if("concat"in c)l.push(Qn(c));else if("height"in c||"width"in c||"config"in c)i=Object.assign(Object.assign({},i),Cn(c));else if(Zn.some((e=>e in c))){const[e,t,n]=Xn(c);if(e in t)throw new Error(`Can't redefine channel ${e}!`);if(void 0!==n)throw new Error(`Explicit value for '${e}' allowed only inside of a layer`);r=Object.assign(Object.assign({},r),{[e]:t})}else{if(!("vega"in c))throw new Error(`unknown plot part ${JSON.stringify(c)}`);n=c.vega}if(t.length>1)throw new Error(`Multiple marks found ${t.join(", ")}`);const c=Object.assign(Object.assign(Object.assign({},s.length>0?{transform:s}:{}),i),n||{});function u(){return Object.assign(Object.assign(Object.assign({},t.length>0?{mark:t[0]}:{}),Object.keys(r).length>0?{encoding:r}:{}),o.length>0?{layer:o}:{})}if(a.length>0){if(l.length>0)throw new Error("concat can't be used with facet");return function(e,t,n){let r;for(const t of e)"facet"in t&&(r=t);if(r){if(e.length>1)throw new Error("Can't other facets with 'facet' keyword");return Object.assign(Object.assign(Object.assign({facet:{field:r.facet,type:r.type||"ordinal",header:{title:null}}},void 0!==r.columns?{columns:r.columns}:{}),{spec:t}),n)}{if(e.filter((e=>"row"in e)).length>1)throw new Error("Facet can't have more than one row");if(e.filter((e=>"column"in e)).length>1)throw new Error("Facet can't have more than one column");let r,s;for(const t of e)"row"in t&&(r=t),"column"in t&&(s=t);return Object.assign({facet:Object.assign(Object.assign({},r?{row:{field:r.row,type:r.type||"ordinal",header:{title:null}}}:{}),s?{column:{field:s.column,type:s.type||"ordinal",header:{title:null}}}:{}),spec:t},n)}}(a,u(),c)}if(l.length>0){if(l.length>1)throw new Error("there could be only one concat");if(a.length>0)throw new Error("concat can't be used with facet");if(t.length>0)throw new Error("top level mark can't be used with concat");if(Object.keys(r).length>0)throw new Error("top level encoding can't be used with concat");if(0==o.length)throw new Error("concat requires at least one layer");return Object.assign({["vertical"==l[0].concat?"vconcat":"hconcat"]:o},c)}return Object.assign(Object.assign({},u()),c)}function tr(e){const t=[],n=[];let r,s,o={},i={};for(const a of e)if("string"==typeof a)t.push(Tn(a));else if("mark"in a)t.push(Ln(a));else if("calculate"in a)n.push(Wn(a));else if("filter"in a)n.push(Hn(a));else if("height"in a||"width"in a)i=Object.assign(Object.assign({},i),Cn(a));else if(Zn.some((e=>e in a))){const[e,t,n]=Xn(a);if(e in t)throw new Error(`Can't redefine channel ${e}!`);s=n,o=Object.assign(Object.assign({},o),{[e]:t})}else{if(!("vega"in a))throw new Error(`unknown plot layer part ${JSON.stringify(a)}`);r=a.vega}if(t.length>1)throw new Error(`Multiple marks found ${t.join(", ")}`);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n.length>0?{transform:n}:{}),t.length>0?{mark:t[0]}:{}),Object.keys(o).length>0?{encoding:o}:{}),i),s?{data:{values:s}}:{}),r||{})}function nr(e,t){if(e instanceof Array)return 0==e.length?[]:Array.isArray(e[0])?function(e,t){return e.map((e=>{const n={};for(let r=0;r<e.length;r++){if(!(r<t.length))throw new Error("there are more values in row than columns");n[t[r]]=e[r]}return n}))}(e,t||rr).map(sr):e.map(sr);{if(!(e instanceof Object))throw new Error("Arrays data expected to be an Object");const t=Object.keys(e);if(0==t.length)throw new Error("Empty arrays data!");const n=t[0],r=e[n].length;for(const s of t)if(e[s].length!=r)throw new Error(`Arrays data has arrays of different length ${s} - ${e[s].length} and ${n} - ${r}`);const s=[];for(let n=0;n<r;n++){const r={};for(const s of t){const t=e[s][n];null!=t&&(r[s]=t)}s.push(r)}return s}}const rr="abcdefghijklmnopqrstuvwxyz".split("");function sr(e){const t={};for(let n in e){const r=e[n];null!=r&&(t[n]=r)}return t}function or(e,t,n){if(n.indexOf(typeof t)<0)throw new Error(`invalid type for '${e}' allowed types ${n.join(", ")}`)}function ir(e){e.finalize()}async function ar({chart:t,data:n,vega_options:r,is_narrow:s,suggested_width_px:o,vega_view:i,container_el:a}){if(await Ke(["/vendor/vega/vega-5.9.1.js","/vendor/vega/vega-lite-4.0.2.js","/vendor/vega/vega-embed-6.2.1.js"],"serial"),i&&ir(i),!a)return;function l(t){return void 0!==o&&s?function(e,t,n){return e.width&&e.width<t||(e=Object.assign(Object.assign({},e),{width:t})),e.height&&e.height<n||(e=Object.assign(Object.assign({},e),{height:n})),e}(t,o,e.height_in_narrow_width_mode):t}let c=l("vega_spec"in t?t.vega_spec:er(t));n&&(c=Object.assign(Object.assign({},c),{data:{values:nr(n)}})),r=r||{};return(await window.vegaEmbed(a,Object.assign(Object.assign({},function({suggested_width_px:e}){return{autosize:{type:"fit",contains:"padding"},width:e}}({suggested_width_px:o})),c),Object.assign(Object.assign({},{}),r))).view}function lr(e){let t,n;return t=new Ie({props:{error:e[2].error}}),{c(){ee(t.$$.fragment)},m(e,r){te(t,e,r),n=!0},p(e,n){const r={};4&n&&(r.error=e[2].error),t.$set(r)},i(e){n||(W(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){ne(t,e)}}}function cr(e){let t,r;return t=new Je({}),{c(){ee(t.$$.fragment)},m(e,n){te(t,e,n),r=!0},p:n,i(e){r||(W(t.$$.fragment,e),r=!0)},o(e){V(t.$$.fragment,e),r=!1},d(e){ne(t,e)}}}function ur(e){let t,n,r,s,o,i,a,l,h,p,m;const w=[cr,lr],v=[];function y(e,t){return"empty"==e[2].state?0:"error"==e[2].state?1:-1}return~(n=y(e))&&(r=v[n]=w[n](e)),{c(){t=f("div"),r&&r.c(),s=g(),o=f("div"),i=f("div"),l=g(),h=f("div"),k(i,"padding-right","0"),$(i,"class",a="success"==e[2].state?"":"invisible"),k(h,"height","0"),k(h,"width","100%"),P((()=>e[9].call(h))),$(t,"class","VegaChart")},m(r,a){u(r,t,a),~n&&v[n].m(t,null),c(t,s),c(t,o),c(o,i),e[8](i),c(t,l),c(t,h),p=function(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");const n=f("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=O();let s;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=b(window,"message",(e=>{e.source===n.contentWindow&&t()}))):(n.src="about:blank",n.onload=()=>{s=b(n.contentWindow,"resize",t)}),c(e,n),()=>{(r||s&&n.contentWindow)&&s(),d(n)}}(h,e[9].bind(h)),m=!0},p(e,[o]){let l=n;n=y(e),n===l?~n&&v[n].p(e,o):(r&&(B(),V(v[l],1,1,(()=>{v[l]=null})),J()),~n?(r=v[n],r?r.p(e,o):(r=v[n]=w[n](e),r.c()),W(r,1),r.m(t,s)):r=null),(!m||4&o&&a!==(a="success"==e[2].state?"":"invisible"))&&$(i,"class",a)},i(e){m||(W(r),m=!0)},o(e){V(r),m=!1},d(r){r&&d(t),~n&&v[n].d(),e[8](null),p()}}}function dr(e,t,n){let{chart:r}=t,{data:s}=t,{vega_options:o}=t,{is_narrow:i=!1}=t,a={state:"empty"};const l=new We(void 0);let c,u,d;const f=(e=>{e!=d&&n(7,d=e)}).debounce(100,!0);return function(e){S().$$.on_destroy.push(e)}((()=>{l.get()&&ir(l.get())})),e.$$set=e=>{"chart"in e&&n(3,r=e.chart),"data"in e&&n(4,s=e.data),"vega_options"in e&&n(5,o=e.vega_options),"is_narrow"in e&&n(6,i=e.is_narrow)},e.$$.update=()=>{2&e.$$.dirty&&f(u),249&e.$$.dirty&&null!=d&&null!=c&&ar({chart:r,data:s,vega_options:o,is_narrow:i,suggested_width_px:d,vega_view:l.get(),container_el:c}).then((e=>{l.set(e),n(2,a={state:"success"})})).catch((e=>{const t=Ne(e,"Unknown error while processing vega lite");n(2,a={state:"error",error:t})}))},[c,u,a,r,s,o,i,d,function(e){q[e?"unshift":"push"]((()=>{c=e,n(0,c)}))},function(){u=this.clientWidth,n(1,u)}]}class fr extends oe{constructor(e){super(),se(this,e,dr,ur,a,{chart:3,data:4,vega_options:5,is_narrow:6})}}function hr(e){let t,n;return t=new Ie({props:{error:e[4]}}),{c(){ee(t.$$.fragment)},m(e,r){te(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.error=e[4]),t.$set(r)},i(e){n||(W(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){ne(t,e)}}}function pr(e){let t,n;return t=new fr({props:{chart:e[1].chart,data:e[3],vega_options:e[1].vega_options,is_narrow:e[0].is_narrow}}),{c(){ee(t.$$.fragment)},m(e,r){te(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.chart=e[1].chart),2&n&&(r.data=e[3]),2&n&&(r.vega_options=e[1].vega_options),1&n&&(r.is_narrow=e[0].is_narrow),t.$set(r)},i(e){n||(W(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){ne(t,e)}}}function gr(e){let t,r;return t=new Je({}),{c(){ee(t.$$.fragment)},m(e,n){te(t,e,n),r=!0},p:n,i(e){r||(W(t.$$.fragment,e),r=!0)},o(e){V(t.$$.fragment,e),r=!1},d(e){ne(t,e)}}}function mr(e){let t,n,r,s={ctx:e,current:null,token:null,hasCatch:!0,pending:gr,then:pr,catch:hr,value:3,error:4,blocks:[,,,]};return H(n=et(e[1].data),s),{c(){t=f("div"),s.block.c(),$(t,"class","ChartBlockContent")},m(e,n){u(e,t,n),s.block.m(t,s.anchor=null),s.mount=()=>t,s.anchor=null,r=!0},p(t,[r]){e=t,s.ctx=e,2&r&&n!==(n=et(e[1].data))&&H(n,s)||K(s,e,r)},i(e){r||(W(s.block),r=!0)},o(e){for(let e=0;e<3;e+=1){V(s.blocks[e])}r=!1},d(e){e&&d(t),s.block.d(),s.token=null,s=null}}}const br={match_and_normalize:e=>{if(is_object(e)&&"data"in e&&"chart"in e)return e}};function wr(e,t,n){let{block:r}=t,{state:s}=t,o=r;return e.$$set=e=>{"block"in e&&n(2,r=e.block),"state"in e&&n(0,s=e.state)},e.$$.update=()=>{6&e.$$.dirty&&o.hash!=r.hash&&n(1,o=r)},[s,o,r]}var $r=Object.freeze({__proto__:null,default:class extends oe{constructor(e){super(),se(this,e,wr,mr,a,{block:2,state:0})}},definition:br});function vr(e){switch(e){case"left":return"text-left";case"center":return"text-center";case"right":return"text-right"}}function yr(e){let t,r;return{c(){t=f("div"),r=p(e[0]),$(t,"class",e[1])},m(e,n){u(e,t,n),c(t,r)},p(e,[t]){1&t&&v(r,e[0])},i:n,o:n,d(e){e&&d(t)}}}function kr(e,t,n){let r,{options:s}=t,{value:o}=t;const i=vr(s.align||"left")+(s.small?" text-xs":"");return e.$$set=e=>{"options"in e&&n(2,s=e.options),"value"in e&&n(3,o=e.value)},e.$$.update=()=>{8&e.$$.dirty&&n(0,r=null==o?"":o)},[r,i,s,o]}var xr=Object.freeze({__proto__:null,default:class extends oe{constructor(e){super(),se(this,e,kr,yr,a,{options:2,value:3})}},compatibleTypes:["number","boolean","string"],align:function(e,t){return e.align||"left"}});function _r(e){let t,r,s=(e[0]?e[2]:e[3])+"";return{c(){t=f("div"),r=p(s),$(t,"class",e[1])},m(e,n){u(e,t,n),c(t,r)},p(e,[t]){1&t&&s!==(s=(e[0]?e[2]:e[3])+"")&&v(r,s)},i:n,o:n,d(e){e&&d(t)}}}function jr(e,t,n){let{options:r}=t,{value:s}=t;const o=vr(r.align||"center"),i=r.true||"✓",a=r.false||"";return e.$$set=e=>{"options"in e&&n(4,r=e.options),"value"in e&&n(0,s=e.value)},[s,o,i,a,r]}var Or=Object.freeze({__proto__:null,default:class extends oe{constructor(e){super(),se(this,e,jr,_r,a,{options:4,value:0})}},compatibleTypes:["boolean"],align:function(e,t){return e.align||"center"}});function Er(e){let t,r;return{c(){t=f("div"),r=p(e[0]),$(t,"class",e[1])},m(e,n){u(e,t,n),c(t,r)},p(e,[t]){1&t&&v(r,e[0])},i:n,o:n,d(e){e&&d(t)}}}function zr(e,t,n){let r,{options:s}=t,{value:o}=t;const i="round"in s?s.round:2,a=vr(s.align||"right")+(s.small?" text-xs":"");return e.$$set=e=>{"options"in e&&n(2,s=e.options),"value"in e&&n(3,o=e.value)},e.$$.update=()=>{8&e.$$.dirty&&n(0,r=void 0===o?"":""+(void 0!==i?o.round(i):o))},[r,a,s,o]}var Sr=Object.freeze({__proto__:null,default:class extends oe{constructor(e){super(),se(this,e,zr,Er,a,{options:2,value:3})}},compatibleTypes:["number"],align:function(e,t){return e.align||"right"}});function Ar(e,t,n){const r=e.slice();return r[7]=t[n],r}function qr(e,t,n){const r=e.slice();return r[7]=t[n],r}function Cr(e,t,n){const r=e.slice();return r[7]=t[n],r}function Mr(e){let t,n,r;return{c(){t=h("svg"),n=h("title"),r=p(e[4]),$(t,"class","plot-line-format text-center")},m(e,s){u(e,t,s),c(t,n),c(n,r)},p(e,t){16&t&&v(r,e[4])},d(e){e&&d(t)}}}function Rr(e){let t;function n(e,t){return e[3]<=0?Lr:e[2]>=0?Pr:Tr}let r=n(e),s=r(e);return{c(){s.c(),t=m()},m(e,n){s.m(e,n),u(e,t,n)},p(e,o){r===(r=n(e))&&s?s.p(e,o):(s.d(1),s=r(e),s&&(s.c(),s.m(t.parentNode,t)))},d(e){s.d(e),e&&d(t)}}}function Tr(e){let t,n,r,s,o=[],i=new Map,a=e[1].nticks;const l=e=>e[7];for(let t=0;t<a.length;t+=1){let n=Ar(e,a,t),r=l(n);i.set(r,o[t]=Ur(r,n))}function f(e,t){return e[0]>0?Ir:Zr}let g=f(e),m=g(e);return{c(){t=h("svg"),n=h("title"),r=p(e[4]);for(let e=0;e<o.length;e+=1)o[e].c();s=h("line"),m.c(),$(s,"x1","50%"),$(s,"y1","5%"),$(s,"x2","50%"),$(s,"y2","95%"),$(s,"stroke",Hr),$(s,"stroke-width","1"),$(t,"class","plot-line-format text-center")},m(e,i){u(e,t,i),c(t,n),c(n,r);for(let e=0;e<o.length;e+=1)o[e].m(t,null);c(t,s),m.m(t,null)},p(e,n){16&n&&v(r,e[4]),2&n&&(a=e[1].nticks,o=Y(o,n,l,1,e,a,i,t,X,Ur,s,Ar)),g===(g=f(e))&&m?m.p(e,n):(m.d(1),m=g(e),m&&(m.c(),m.m(t,null)))},d(e){e&&d(t);for(let e=0;e<o.length;e+=1)o[e].d();m.d()}}}function Pr(e){let t,n,r,s,o,i=[],a=new Map,l=e[1].nticks;const f=e=>e[7];for(let t=0;t<l.length;t+=1){let n=qr(e,l,t),r=f(n);a.set(r,i[t]=Dr(r,n))}return{c(){t=h("svg"),n=h("title"),r=p(e[4]);for(let e=0;e<i.length;e+=1)i[e].c();s=h("rect"),$(s,"x","0%"),$(s,"y","25%"),$(s,"width",o=100*e[0]+"%"),$(s,"height","50%"),$(s,"fill",Vr),$(t,"class","plot-line-format text-center")},m(e,o){u(e,t,o),c(t,n),c(n,r);for(let e=0;e<i.length;e+=1)i[e].m(t,null);c(t,s)},p(e,n){16&n&&v(r,e[4]),2&n&&(l=e[1].nticks,i=Y(i,n,f,1,e,l,a,t,X,Dr,s,qr)),1&n&&o!==(o=100*e[0]+"%")&&$(s,"width",o)},d(e){e&&d(t);for(let e=0;e<i.length;e+=1)i[e].d()}}}function Lr(e){let t,n,r,s,o,i,a=[],l=new Map,f=e[1].nticks;const g=e=>e[7];for(let t=0;t<f.length;t+=1){let n=Cr(e,f,t),r=g(n);l.set(r,a[t]=Br(r,n))}return{c(){t=h("svg"),n=h("title"),r=p(e[4]);for(let e=0;e<a.length;e+=1)a[e].c();s=h("rect"),$(s,"x",o=100- -100*e[0]+"%"),$(s,"y","25%"),$(s,"width",i=-100*e[0]+"%"),$(s,"height","50%"),$(s,"fill",Vr),$(t,"class","plot-line-format text-center")},m(e,o){u(e,t,o),c(t,n),c(n,r);for(let e=0;e<a.length;e+=1)a[e].m(t,null);c(t,s)},p(e,n){16&n&&v(r,e[4]),2&n&&(f=e[1].nticks,a=Y(a,n,g,1,e,f,l,t,X,Br,s,Cr)),1&n&&o!==(o=100- -100*e[0]+"%")&&$(s,"x",o),1&n&&i!==(i=-100*e[0]+"%")&&$(s,"width",i)},d(e){e&&d(t);for(let e=0;e<a.length;e+=1)a[e].d()}}}function Nr(e){let t,n,r;return{c(){t=h("line"),$(t,"x1",n=50- -50*e[7]+"%"),$(t,"y1","5%"),$(t,"x2",r=50- -50*e[7]+"%"),$(t,"y2","25%"),$(t,"stroke",Hr),$(t,"stroke-width","1")},m(e,n){u(e,t,n)},p(e,s){2&s&&n!==(n=50- -50*e[7]+"%")&&$(t,"x1",n),2&s&&r!==(r=50- -50*e[7]+"%")&&$(t,"x2",r)},d(e){e&&d(t)}}}function Fr(e){let t,n,r;return{c(){t=h("line"),$(t,"x1",n=50+50*e[7]+"%"),$(t,"y1","5%"),$(t,"x2",r=50+50*e[7]+"%"),$(t,"y2","25%"),$(t,"stroke",Hr),$(t,"stroke-width","1")},m(e,n){u(e,t,n)},p(e,s){2&s&&n!==(n=50+50*e[7]+"%")&&$(t,"x1",n),2&s&&r!==(r=50+50*e[7]+"%")&&$(t,"x2",r)},d(e){e&&d(t)}}}function Ur(e,t){let n,r;function s(e,t){return e[7]>0?Fr:Nr}let o=s(t),i=o(t);return{key:e,first:null,c(){n=m(),i.c(),r=m(),this.first=n},m(e,t){u(e,n,t),i.m(e,t),u(e,r,t)},p(e,n){o===(o=s(t=e))&&i?i.p(t,n):(i.d(1),i=o(t),i&&(i.c(),i.m(r.parentNode,r)))},d(e){e&&d(n),i.d(e),e&&d(r)}}}function Zr(e){let t,n,r;return{c(){t=h("rect"),$(t,"x",n=50- -50*e[0]+"%"),$(t,"y","25%"),$(t,"width",r=-50*e[0]+"%"),$(t,"height","50%"),$(t,"fill",Vr)},m(e,n){u(e,t,n)},p(e,s){1&s&&n!==(n=50- -50*e[0]+"%")&&$(t,"x",n),1&s&&r!==(r=-50*e[0]+"%")&&$(t,"width",r)},d(e){e&&d(t)}}}function Ir(e){let t,n;return{c(){t=h("rect"),$(t,"x","50%"),$(t,"y","25%"),$(t,"width",n=50*e[0]+"%"),$(t,"height","50%"),$(t,"fill",Vr)},m(e,n){u(e,t,n)},p(e,r){1&r&&n!==(n=50*e[0]+"%")&&$(t,"width",n)},d(e){e&&d(t)}}}function Dr(e,t){let n,r,s;return{key:e,first:null,c(){n=h("line"),$(n,"x1",r=100*t[7]+"%"),$(n,"y1","5%"),$(n,"x2",s=100*t[7]+"%"),$(n,"y2","25%"),$(n,"stroke",Hr),$(n,"stroke-width","1"),this.first=n},m(e,t){u(e,n,t)},p(e,o){t=e,2&o&&r!==(r=100*t[7]+"%")&&$(n,"x1",r),2&o&&s!==(s=100*t[7]+"%")&&$(n,"x2",s)},d(e){e&&d(n)}}}function Br(e,t){let n,r,s;return{key:e,first:null,c(){n=h("line"),$(n,"x1",r=100- -100*t[7]+"%"),$(n,"y1","5%"),$(n,"x2",s=100- -100*t[7]+"%"),$(n,"y2","25%"),$(n,"stroke",Hr),$(n,"stroke-width","1"),this.first=n},m(e,t){u(e,n,t)},p(e,o){t=e,2&o&&r!==(r=100- -100*t[7]+"%")&&$(n,"x1",r),2&o&&s!==(s=100- -100*t[7]+"%")&&$(n,"x2",s)},d(e){e&&d(n)}}}function Jr(e){let t;function r(e,t){return e[1]&&null!=e[0]?Rr:Mr}let s=r(e),o=s(e);return{c(){o.c(),t=m()},m(e,n){o.m(e,n),u(e,t,n)},p(e,[n]){s===(s=r(e))&&o?o.p(e,n):(o.d(1),o=s(e),o&&(o.c(),o.m(t.parentNode,t)))},i:n,o:n,d(e){o.d(e),e&&d(t)}}}const Wr=(e,t,n,r)=>{const s=[],o=r.scale||"linear";if(r.log_unit){function i(e){return e>=0&&e<1?1:e}"log"!=r.scale&&s.push(`column ${e} 'line.log_unit' could be used with log scale only`),n=n.map((e=>void 0===e?void 0:i(e))),t=[i(t[0]),i(t[1])]}let a,l,c=[];if("log"==o){if(t[0]<=0)return s.push(`column ${e}, 'line.domain' can't be negative for log scale`),{column:n.map((e=>{})),warnings:s,stats:void 0};let o=Math.max(...t.map((e=>Math.log(Math.abs(e)))));c=n.map((t=>void 0===t?void 0:t>0?Math.log(t)/o:void s.push(`column ${e}, values can't be negative for log scale`))),a=(r.ticks||[]).filter_map((t=>t>0?Math.log(t)/o:void s.push(`column ${e}, ticks can't be negative for log scale`))),l=[Math.log(t[0])/o,Math.log(t[1])/o]}else{if("linear"!=o)throw new Error(`unknown scale ${o}`);{let e=Math.max(...t.map((e=>Math.abs(e))));0==e&&(e=1),c=n.map((t=>void 0===t?void 0:t/e)),a=(r.ticks||[]).map((t=>t/e)),l=[t[0]/e,t[1]/e]}}return{column:c,warnings:s,stats:{domain:t,ndomain:l,nticks:a}}},Vr="#111827",Hr="#111827";function Kr(e,t,n){let r,s,o,{options:i}=t,{value:a}=t,{converted:l}=t,{stats:c}=t;return e.$$set=e=>{"options"in e&&n(5,i=e.options),"value"in e&&n(6,a=e.value),"converted"in e&&n(0,l=e.converted),"stats"in e&&n(1,c=e.stats)},e.$$.update=()=>{2&e.$$.dirty&&n(2,[r,s]=c?c.ndomain:[0,0],r,(n(3,s),n(1,c))),99&e.$$.dirty&&n(4,o=[void 0!==l?`value: ${a}`:"missing",((null==c?void 0:c.nticks)||[]).length>0?`, ticks: [${(i.ticks||[]).join(", ")}]`:"",c?`domain: [${c.domain[0]}, ${c.domain[1]}]`:"",`scale: ${i.scale||"linear"}`].join(", "))},[l,c,r,s,o,i,a]}var Xr=Object.freeze({__proto__:null,default:class extends oe{constructor(e){super(),se(this,e,Kr,Jr,a,{options:5,value:6,converted:0,stats:1})}},compatibleTypes:["number"],extraValues:({ticks:e})=>e||[],align:function(e,t){if(e.align)return e.align;if(t){const[e,n]=t.ndomain;return n<=0?"right":e>=0?"left":"center"}return"center"},convertColumn:Wr});function Gr(e){let t,r;return{c(){t=f("div"),r=p(e[0]),$(t,"class",e[1])},m(e,n){u(e,t,n),c(t,r)},p(e,[t]){1&t&&v(r,e[0])},i:n,o:n,d(e){e&&d(t)}}}function Yr(e,t,n){let r,{options:s}=t,{value:o}=t;const i=vr(s.align||"left")+(s.small?" text-xs":"");return e.$$set=e=>{"options"in e&&n(2,s=e.options),"value"in e&&n(3,o=e.value)},e.$$.update=()=>{8&e.$$.dirty&&n(0,r=null==o?"":""+o)},[r,i,s,o]}const Qr={string:xr,boolean:Or,number:Sr,unknown:Object.freeze({__proto__:null,default:class extends oe{constructor(e){super(),se(this,e,Yr,Gr,a,{options:2,value:3})}},compatibleTypes:[],align:function(e,t){return e.align||"left"}}),line:Xr};function es(e){return e in Qr?{is_error:!1,value:Qr[e]}:{is_error:!0,message:`no '${e}' format`}}const ts={string:function(e,t){return e.localeCompare(t)},number:function(e,t){return e-t},boolean:function(e,t){return e==t?0:e?1:-1},unknown:function(e,t){return(""+e).localeCompare(""+t)}};function ns(e,[t,n]){const r="desc"==n,s=Re(Oe(e,(({id:e})=>e==t))).type;if(!(s in ts))throw new Error(`no comparator for '${s}' type, please register one`);const o=ts[s];return r?function(e,n){const r=n[t],s=e[t];return void 0===r?void 0===s?0:-1:void 0===s?1:o(r,s)}:function(e,n){const r=e[t],s=n[t];return void 0===r?void 0===s?0:-1:void 0===s?1:o(r,s)}}function rs(e,t,n){if(n.length>3)throw new Error("sort not supported for more than 3 columns");const[r,s,o]=n;if(null==r&&ye(null==s),null==s&&ye(null==o),0==t.length||null==r)return t;let i,a=ns(e,r),l=s?ns(e,s):void 0,c=o?ns(e,o):void 0;i=c?function(e,t){let n=a(e,t);return 0!=n?n:(n=l(e,t),0!=n?n:c(e,t))}:l?function(e,t){let n=a(e,t);return 0!=n?n:l(e,t)}:a;const u=[...t];return u.sort(i),u}function ss(e,t,n){const r=[...t];for(const e of r)e._weights={},e._nweights={};for(const t in n){const{type:n,min_max:s}=Re(Oe(e,(({id:e})=>e==t)));let[o,i]=Ce(r,(e=>void 0!==e[t]));if(0==o.length){for(const e of r)e._weights[t]=0,e._nweights[t]=0;continue}if("number"==n){const e=typeof r[0][t];if("number"!=e)throw new Error(`wrong type for '${t}' column, wsort expects number but found '${e}'`);for(const e of o)e._weights[t]=e[t]}else{if(!(n in ts))throw new Error(`no comparator for '${n}' type, please register one`);const e=ts[n];o.sort(((n,r)=>e(n[t],r[t])));let r,s=0;for(let e=0;e<o.length;e++){const n=o[e];n[t]==r?s+=1:r=n[t],n._weights[t]=e-s}}{let e,r;if(s){if("number"!=n)throw new Error("can't use min_max for non number type");e=s[0],r=s[1]}else{const n=o.map((e=>e._weights[t]));e=Math.min(...n),r=Math.max(...n)}const i=(r+e)/2;let a=(r-e)/2;ye(a>=0),a=0==a?1:a;for(const e of o){let n=(e._weights[t]-i)/a;e._nweights[t]=n}}let a=Se(o.map((e=>e._nweights[t])));for(const e of i)e._nweights[t]=a}for(const e of r){let t=0;for(const r in n)t+=n[r]*e._nweights[r];e._w=t}return r.sort(((e,t)=>e._w-t._w)).reverse(),r}function os(e){return Me(function(e,t){const n=new Set,r=t||(e=>e);return e.filter((e=>{const t=r(e);return!n.has(t)&&(n.add(t),!0)}))}(e.map((e=>"string"==typeof e?{type:"warn",message:e}:e)),(({message:e})=>e)),(({type:e,message:t})=>`${e} ${t}`))}function is(e,t){if(!t)return;const n={};for(const r of e){const e=t[r.id];if(!e)continue;const s=cs(r,""+e[1]);void 0!==s&&(n[r.id]=[ls(e[0]),s])}return n}ge("sortTable",(()=>{const e=[{id:"name",type:"string"},{id:"age",type:"number"}],t=[{name:"Artanis",age:200},{name:"Sarah",age:30},{name:"Jim",age:30},{name:"Amon",age:void 0}];let n=n=>rs(e,t,n).map((({name:e})=>e));ye.equal(n([["name","asc"]]),["Amon","Artanis","Jim","Sarah"]),ye.equal(n([["age","asc"]])[0],"Amon"),ye.equal(n([["age","asc"],["name","asc"]]),["Amon","Jim","Sarah","Artanis"])})),ge("wsortTable",(()=>{const e=(e,t,n)=>ss(e,t,n).map((({id:e})=>e));{const t=[{id:"a",type:"number"},{id:"b",type:"number"}],n=[{id:"a",a:0,b:3},{id:"b",a:1,b:3},{id:"c",a:2,b:void 0},{id:"d",a:-2,b:200}];ye.equal(e(t,n,{a:1,b:-1}),["c","b","a","d"])}{const t=[{id:"a",type:"number"}],n=[{id:"a",a:0},{id:"b",a:1},{id:"c",a:void 0}];ye.equal(e(t,n,{a:1}),["b","c","a"])}{const e=ss([{id:"a",type:"string"}],[{id:"a",a:"a"},{id:"b",a:"a"},{id:"c",a:"b"}],{a:1});ye.equal(e[0].id,"c"),ye.equal(e.map((e=>e._weights.a)),[1,0,0])}}));const as=["<=","<","=","!=",">",">=","~"];function ls(e){return as.includes(e)?e:"="}function cs({type:e},t){switch(e){case"string":return t;case"boolean":try{return["true","t","1"].includes(t.downcase())}catch(e){return}case"number":try{let e=parseFloat(t);return Number.isFinite(e)?e:void 0}catch(e){return}default:return t}}const us=["string","number","boolean","unknown"];function ds(e,t){const n=[],r=function(e,t,n){let r=[];try{r=nr(t,null==e?void 0:e.map((({id:e})=>e)))}catch(e){return n.push("row size is larger than columns available"),[]}return r.forEach(((e,t)=>{e._i=t,e._converted={}})),r}(e.columns,t,n);if(0==r.length)return n.push("table is empty"),{columns:[],rows:[],messages:os(n)};let s=function(e,t,n){if(e)return e;const r=new Map,s=new Set;for(let e=0;e<t.length;e++){const o=t[e];for(const e in o){if("_i"==e||"_converted"==e)continue;let t=o[e];if(void 0===t)s.add(e);else{let s=typeof t;"object"==s?(n.push(`unknown type for column '${e}' - '${s}'`),r.set(e,"unknown")):r.has(e)?r.get(e)!=s&&(n.push(`unstable types for column '${e}', ${[r.get(e),s].sort().join(", ")}`),r.set(e,"unknown")):r.set(e,s)}}}for(const e of s)r.has(e)||r.set(e,"unknown");return Me(Array.from(r,(([e,t])=>({id:e,type:t}))),(({id:e})=>e))}(e.columns,r,n);if(e.alter_columns){const t=e.alter_columns.map((({id:e})=>e));s=[...e.alter_columns,...s.filter((({id:e})=>!t.includes(e)))]}const o=s.length;s.length!=o&&n.push("not unique column ids"),s=function(e,t,n){e=[...e];for(let r=0;r<t.length;r++){const s=t[r];for(const t of e){const{id:e,type:r}=t;if("_i"==e)continue;let o=s[e];void 0!==o&&(typeof o!=r&&"unknown"!=r&&us.includes(r)&&(n.push(`wrong type for column '${e}', specified as '${r}' but '${typeof o}' found`),t.type="unknown"))}}return e}(s,r,n);let i=function(e,t){const n=es("unknown");if(n.is_error)throw"can't get 'unknown' formatter";let r=[];for(const s of e){const e=s.format||{type:s.type},o=es(e.type);o.is_error?(t.push(o.message),r.push([n.value,e])):o.value.compatibleTypes.includes(s.type)?r.push([o.value,e]):(t.push(`column ${s.id} has wrong format, format ${s.format} is not compatible with '${s.type}' type`),r.push([n.value,e]))}return r}(s,n);const a=function(e,t,n,r){const s={};for(let o=0;o<e.length;o++){const{id:i,type:a,domain:l}=e[o],[c,u]=t[o];if("number"!=a){l&&r.push(`non number column '${i}' can't have domain`);continue}const d=(c.extraValues?c.extraValues(u):[]).skip_undefined(),f=n.filter_map((e=>e[i]));if(f.push(...d),0==f.length){l&&(s[i]=l);continue}let h=f[0],p=f[0];for(const e of f)e>p?p=e:e<h&&(h=e);const g=l||[h,p];h<g[0]&&(r.push(`column ${i} 'domain' min value is greather than actual min ${h}`),g[0]=h),p>g[1]&&(r.push(`column ${i} 'line.domain' max value is smaller than actual max ${p}`),g[1]=p),s[i]=g}return s}(s,i,r,n);i=function(e,t,n,r){return n.map(((n,s)=>{const{id:o,type:i}=e[s],[a,l]=n;if("number"==l.type&&void 0===l.round)if("number"==i){if(t.every((e=>{const t=e[o];return void 0===t||Number.isInteger(t)})))return[a,Object.assign(Object.assign({},l),{round:0})]}else r.push(`column ${o} is non number and can't use number formatter`);return n}))}(s,r,i,n);const l=fs(s,r),c=function(e,t,n,r,s){const o={};for(let i=0;i<e.length;i++){const[{id:a},[l,c]]=[e[i],n[i]];if(l.convertColumn){const e=r.map((e=>e[a])),n=t[a];if(n){const{column:t,warnings:i,stats:u}=l.convertColumn(a,n,e,c);o[a]=u,i.forEach((e=>s.push(e)));for(let e=0;e<r.length;e++)r[e]._converted[a]=t[e]}}}return o}(s,a,i,r,n);return{columns:s.map(((e,t)=>({id:e.id,type:e.type,title:e.title,format:i[t][1],formatStats:c[e.id],formatter:i[t][0],widthP:l[t],domain:a[e.id]}))),rows:r,messages:os(n)}}function fs(e,t){let n;if(e.some((({width:e})=>null!=e)))n=e.map((({width:e})=>e||1));else{const r=new Map;for(const n of t)for(const{id:t,type:s}of e){let e;if(void 0===n[t])continue;if("string"==s)e=n[t].length;else if("number"==s)e=(""+n[t]).length;else{if("boolean"!=s)continue;e=1}let o=r.get(t);null==o&&(o=[],r.set(t,o)),o.push(e)}const s=Le(r,(e=>Ae(e,.7))),o=Se(Te(s,[],((e,t)=>(e.push(t),e)))),i=1.618,a=Le(s,(e=>e>o*i?i:e<o/i?1/i:1)),l=1;n=e.map((({id:e})=>a.get(e)||l))}return hs(n)}function hs(e){if(0==e.length)return[];const t=100/Pe(e);let n=e.map((e=>(e*t).round()));for(;;){const e=Pe(n);if(e>100)n[ze(n)]-=1;else{if(!(e<100))break;n[Ee(n)]+=1}}return n}function ps(e,t,n){return t=function(e,t,n){if(!n)return t;for(const{id:r,type:s}of e){const e=n[r];if(!e)continue;const[o,i]=e;if(void 0===i||""===i)continue;const a=gs(s,[o,i]);t=t.filter((e=>a(e[r])))}return t}(e,t=function(e,t,n){if(!(n=n.trim()))return t;const r=n.downcase();return t.filter((t=>{for(const{id:n}of e)if((""+t[n]).downcase().includes(r))return!0;return!1}))}(e,t,n.filter),n.filters)}function gs(e,[t,n]){switch(e){case"string":if("string"!=typeof n)throw new Error("string filter value expected");const e=n,r=n.downcase();switch(t){case"<=":return t=>void 0!==t&&t<=e;case"<":return t=>void 0!==t&&t<e;case"=":return t=>void 0!==t&&t==e;case"!=":return t=>void 0!==t&&t!=e;case">":return t=>void 0!==t&&t>e;case">=":return t=>void 0!==t&&t>=e;case"~":return e=>void 0!==e&&e.downcase().includes(r)}case"boolean":if("boolean"!=typeof n)throw new Error("boolean filter value expected");const s=n;switch(t){case"<=":return e=>void 0!==e&&e<=s;case"<":return e=>void 0!==e&&e<s;case"=":return e=>void 0!==e&&e==s;case"!=":return e=>void 0!==e&&e!=s;case">":return e=>void 0!==e&&e>s;case">=":return e=>void 0!==e&&e>=s;case"~":return e=>void 0!==e&&e==s}case"number":if("number"!=typeof n)throw new Error("number filter value expected");const o=n;switch(t){case"<=":return e=>void 0!==e&&e<=o;case"<":return e=>void 0!==e&&e<o;case"=":return e=>void 0!==e&&e==o;case"!=":return e=>void 0!==e&&e!=o;case">":return e=>void 0!==e&&e>o;case">=":return e=>void 0!==e&&e>=o;case"~":return e=>void 0!==e&&e==o}default:const i=""+n;switch(t){case"<=":return e=>void 0!==e&&""+e<=i;case"<":return e=>void 0!==e&&""+e<i;case"=":return e=>void 0!==e&&""+e==i;case"!=":return e=>void 0!==e&&""+e!=i;case">":return e=>void 0!==e&&""+e>i;case">=":return e=>void 0!==e&&""+e>=i;case"~":return e=>void 0!==e&&""+e==i}}throw new Error(`unknown filter ${e} ${t}`)}function ms(e){return e.map((e=>{let t=Object.assign({},e);return delete t._i,delete t._converted,t}))}function bs(e){let t,n,r,s,o,i,a,l,h,p;return{c(){t=f("div"),n=f("span"),r=f("span"),r.textContent="w =",s=g(),o=f("input"),$(r,"class","w-5 inline-block"),$(o,"class","w-10 outline-none pl-1 text-xs border border-gray-200 focus:text-gray-900  svelte-1brt80c"),$(o,"type","number"),$(o,"step","0.1"),o.value=i=e[2].toFixed(1),$(n,"class",a=e[3]?"text-gray-900":"text-gray-200"),$(t,"class",l=e[1]+" my-1 text-xs "+(!e[4]&&"invisible"))},m(i,a){u(i,t,a),c(t,n),c(n,r),c(n,s),c(n,o),h||(p=b(o,"change",e[5]),h=!0)},p(e,r){4&r&&i!==(i=e[2].toFixed(1))&&(o.value=i),8&r&&a!==(a=e[3]?"text-gray-900":"text-gray-200")&&$(n,"class",a),18&r&&l!==(l=e[1]+" my-1 text-xs "+(!e[4]&&"invisible"))&&$(t,"class",l)},d(e){e&&d(t),h=!1,p()}}}function ws(e){let t,r=e[0].wsort&&bs(e);return{c(){r&&r.c(),t=m()},m(e,n){r&&r.m(e,n),u(e,t,n)},p(e,[n]){e[0].wsort?r?r.p(e,n):(r=bs(e),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:n,o:n,d(e){r&&r.d(e),e&&d(t)}}}function $s(e,t,n){let r,s,o,{column_id:i}=t,{align:a}=t,{state:l}=t;const c=(e=>{l.wsort&&n(0,l=Object.assign(Object.assign({},l),{wsort:Object.assign(Object.assign({},l.wsort),{[i]:e})}))}).debounce(200);return e.$$set=e=>{"column_id"in e&&n(6,i=e.column_id),"align"in e&&n(1,a=e.align),"state"in e&&n(0,l=e.state)},e.$$.update=()=>{65&e.$$.dirty&&n(2,r=(l.wsort||{})[i]||0),4&e.$$.dirty&&n(3,s=0!=r),9&e.$$.dirty&&n(4,o=l.show_controls||s)},[l,a,r,s,o,({target:{value:e}})=>{n(2,r=parseFloat(e)),c(r)},i]}ge("normalizeInputsSlow",(()=>{const e=e=>e.map((({id:e,type:t})=>({id:e,type:t})));{const{columns:t,rows:n}=ds({},[["v",null]]);ye.equal(e(t),[{id:"a",type:"string"},{id:"b",type:"unknown"}]),ye.equal(ms(n),[{a:"v"}])}{const{columns:t,rows:n}=ds({},[{k:"v",k2:null}]);ye.equal(e(t),[{id:"k",type:"string"},{id:"k2",type:"unknown"}]),ye.equal(ms(n),[{k:"v"}])}{const{columns:t,rows:n}=ds({},[{k:"v"},{k:0}]);ye.equal(e(t),[{id:"k",type:"unknown"}]),ye.equal(ms(n),[{k:"v"},{k:0}])}{const{columns:e}=ds({},[{v:1}]);ye.equal(e[0].format,{type:"number",round:0})}})),ge("calculateColumnWidths",(()=>{ye.equal(fs([{id:"name",type:"string"},{id:"age",type:"number"}],[{name:"Jim Raynor",age:30},{name:"Kate",age:25}]),[62,38])})),ge("weightsToPercents",(()=>{ye.equal(hs([2,2]),[50,50]),ye.equal(hs([3,3,3]).sort(),[33,33,34])}));class vs extends oe{constructor(e){super(),se(this,e,$s,ws,a,{column_id:6,align:1,state:0})}}function ys(e,t,n){const r=e.slice();return r[9]=t[n],r}function ks(e){let t,n,r,s,i,a,l,h,p,m,w,v=[],y=new Map,k=as;const _=e=>e[9];for(let t=0;t<k.length;t+=1){let n=ys(e,k,t),r=_(n);y.set(r,v[t]=xs(r,n))}return{c(){t=f("div"),n=f("span"),r=f("select");for(let e=0;e<v.length;e+=1)v[e].c();i=g(),a=f("input"),$(r,"class","outline-none w-5 inline-block svelte-126ibbo"),$(a,"class","w-10 outline-none pl-1 text-xs border border-gray-200 focus:text-gray-900"),$(a,"type","text"),a.value=l=void 0===e[2][1]?"":""+e[2][1],$(n,"class",h=e[3]?"text-gray-900":"text-gray-200"),$(t,"class",p=e[1]+" my-1 text-xs "+(!e[4]&&"invisible"))},m(s,o){u(s,t,o),c(t,n),c(n,r);for(let e=0;e<v.length;e+=1)v[e].m(r,null);x(r,e[2][0]),c(n,i),c(n,a),m||(w=[b(r,"change",e[5]),b(a,"keyup",e[6])],m=!0)},p(e,o){0&o&&(k=as,v=Y(v,o,_,1,e,k,y,r,X,xs,null,ys)),4&o&&s!==(s=e[2][0])&&x(r,e[2][0]),4&o&&l!==(l=void 0===e[2][1]?"":""+e[2][1])&&a.value!==l&&(a.value=l),8&o&&h!==(h=e[3]?"text-gray-900":"text-gray-200")&&$(n,"class",h),18&o&&p!==(p=e[1]+" my-1 text-xs "+(!e[4]&&"invisible"))&&$(t,"class",p)},d(e){e&&d(t);for(let e=0;e<v.length;e+=1)v[e].d();m=!1,o(w)}}}function xs(e,t){let n,r,s=t[9]+"";return{key:e,first:null,c(){n=f("option"),r=p(s),n.__value=t[9],n.value=n.__value,this.first=n},m(e,t){u(e,n,t),c(n,r)},p(e,n){t=e},d(e){e&&d(n)}}}function _s(e){let t,r=e[0].filters&&ks(e);return{c(){r&&r.c(),t=m()},m(e,n){r&&r.m(e,n),u(e,t,n)},p(e,[n]){e[0].filters?r?r.p(e,n):(r=ks(e),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:n,o:n,d(e){r&&r.d(e),e&&d(t)}}}function js(e,t,n){let r,s,o,{column:i}=t,{align:a}=t,{state:l}=t;const c=(e=>{l.filters&&n(0,l=Object.assign(Object.assign({},l),{filters:Object.assign(Object.assign({},l.filters),{[i.id]:e})}))}).debounce(200);return e.$$set=e=>{"column"in e&&n(7,i=e.column),"align"in e&&n(1,a=e.align),"state"in e&&n(0,l=e.state)},e.$$.update=()=>{129&e.$$.dirty&&n(2,o=l.filters&&i.id in l.filters?l.filters[i.id]:["=",void 0]),4&e.$$.dirty&&n(3,r=null!=o[1]&&""!==o[1]),9&e.$$.dirty&&n(4,s=r||l.show_controls)},[l,a,o,r,s,({target:{value:e}})=>{n(2,o=[ls(e),o[1]]),c(o)},({target:{value:e}})=>{n(2,o=[o[0],cs(i,e)]),c(o)},i]}class Os extends oe{constructor(e){super(),se(this,e,js,_s,a,{column:7,align:1,state:0})}}function Es(e){let t,n,r,s,o,i,a,l,h,m,y,x,_,j,O,E,z,S=e[3].symbol+"";function A(t){e[12](t)}let C={column_id:e[4],align:"text-right"};function M(t){e[13](t)}void 0!==e[0]&&(C.state=e[0]),m=new vs({props:C}),q.push((()=>Q(m,"state",A)));let R={column:e[1],align:"text-right"};return void 0!==e[0]&&(R.state=e[0]),_=new Os({props:R}),q.push((()=>Q(_,"state",M))),{c(){t=f("th"),n=f("a"),r=f("span"),s=p(S),i=g(),a=f("span"),l=p(e[2]),h=g(),ee(m.$$.fragment),x=g(),ee(_.$$.fragment),$(r,"class",o=e[3].klass+" mr-0.5"),$(n,"class","flex justify-between"),$(n,"href","#"),k(t,"width",e[1].widthP+"%"),$(t,"class","text-right")},m(o,d){u(o,t,d),c(t,n),c(n,r),c(r,s),c(n,i),c(n,a),c(a,l),c(t,h),te(m,t,null),c(t,x),te(_,t,null),O=!0,E||(z=b(n,"click",w(e[6])),E=!0)},p(e,n){(!O||8&n)&&S!==(S=e[3].symbol+"")&&v(s,S),(!O||8&n&&o!==(o=e[3].klass+" mr-0.5"))&&$(r,"class",o),(!O||4&n)&&v(l,e[2]);const i={};!y&&1&n&&(y=!0,i.state=e[0],L((()=>y=!1))),m.$set(i);const a={};2&n&&(a.column=e[1]),!j&&1&n&&(j=!0,a.state=e[0],L((()=>j=!1))),_.$set(a),(!O||2&n)&&k(t,"width",e[1].widthP+"%")},i(e){O||(W(m.$$.fragment,e),W(_.$$.fragment,e),O=!0)},o(e){V(m.$$.fragment,e),V(_.$$.fragment,e),O=!1},d(e){e&&d(t),ne(m),ne(_),E=!1,z()}}}function zs(e){let t,n,r,s,o,i,a,l,h,m,y,x,_,j,O,E,z,S,A,C,M,R=e[3].symbol+"",T=e[3].symbol+"";function P(t){e[10](t)}let N={column_id:e[4],align:"text-center"};function F(t){e[11](t)}void 0!==e[0]&&(N.state=e[0]),j=new vs({props:N}),q.push((()=>Q(j,"state",P)));let U={column:e[1],align:"text-center"};return void 0!==e[0]&&(U.state=e[0]),z=new Os({props:U}),q.push((()=>Q(z,"state",F))),{c(){t=f("th"),n=f("a"),r=f("span"),s=p(R),o=g(),i=f("span"),a=p(e[2]),l=g(),h=f("span"),m=p(T),_=g(),ee(j.$$.fragment),E=g(),ee(z.$$.fragment),$(r,"class","invisible mr-0.5"),$(h,"class",y=e[3].klass+" ml-0.5"),$(h,"title",x=e[3].title),$(n,"class","flex justify-between"),$(n,"href","#"),k(t,"width",e[1].widthP+"%")},m(d,f){u(d,t,f),c(t,n),c(n,r),c(r,s),c(n,o),c(n,i),c(i,a),c(n,l),c(n,h),c(h,m),c(t,_),te(j,t,null),c(t,E),te(z,t,null),A=!0,C||(M=b(n,"click",w(e[6])),C=!0)},p(e,n){(!A||8&n)&&R!==(R=e[3].symbol+"")&&v(s,R),(!A||4&n)&&v(a,e[2]),(!A||8&n)&&T!==(T=e[3].symbol+"")&&v(m,T),(!A||8&n&&y!==(y=e[3].klass+" ml-0.5"))&&$(h,"class",y),(!A||8&n&&x!==(x=e[3].title))&&$(h,"title",x);const r={};!O&&1&n&&(O=!0,r.state=e[0],L((()=>O=!1))),j.$set(r);const o={};2&n&&(o.column=e[1]),!S&&1&n&&(S=!0,o.state=e[0],L((()=>S=!1))),z.$set(o),(!A||2&n)&&k(t,"width",e[1].widthP+"%")},i(e){A||(W(j.$$.fragment,e),W(z.$$.fragment,e),A=!0)},o(e){V(j.$$.fragment,e),V(z.$$.fragment,e),A=!1},d(e){e&&d(t),ne(j),ne(z),C=!1,M()}}}function Ss(e){let t,n,r,s,o,i,a,l,h,m,y,x,_,j,O,E,z,S,A=e[3].symbol+"";function C(t){e[8](t)}let M={column_id:e[4],align:"text-left"};function R(t){e[9](t)}void 0!==e[0]&&(M.state=e[0]),y=new vs({props:M}),q.push((()=>Q(y,"state",C)));let T={column:e[1],align:"text-left"};return void 0!==e[0]&&(T.state=e[0]),j=new Os({props:T}),q.push((()=>Q(j,"state",R))),{c(){t=f("th"),n=f("a"),r=f("span"),s=p(e[2]),o=g(),i=f("span"),a=p(A),m=g(),ee(y.$$.fragment),_=g(),ee(j.$$.fragment),$(i,"class",l=e[3].klass+" ml-0.5"),$(i,"title",h=e[3].title),$(n,"class","flex justify-between"),$(n,"href","#"),k(t,"width",e[1].widthP+"%")},m(l,d){u(l,t,d),c(t,n),c(n,r),c(r,s),c(n,o),c(n,i),c(i,a),c(t,m),te(y,t,null),c(t,_),te(j,t,null),E=!0,z||(S=b(n,"click",w(e[6])),z=!0)},p(e,n){(!E||4&n)&&v(s,e[2]),(!E||8&n)&&A!==(A=e[3].symbol+"")&&v(a,A),(!E||8&n&&l!==(l=e[3].klass+" ml-0.5"))&&$(i,"class",l),(!E||8&n&&h!==(h=e[3].title))&&$(i,"title",h);const r={};!x&&1&n&&(x=!0,r.state=e[0],L((()=>x=!1))),y.$set(r);const o={};2&n&&(o.column=e[1]),!O&&1&n&&(O=!0,o.state=e[0],L((()=>O=!1))),j.$set(o),(!E||2&n)&&k(t,"width",e[1].widthP+"%")},i(e){E||(W(y.$$.fragment,e),W(j.$$.fragment,e),E=!0)},o(e){V(y.$$.fragment,e),V(j.$$.fragment,e),E=!1},d(e){e&&d(t),ne(y),ne(j),z=!1,S()}}}function As(e){let t,n,r,s;const o=[Ss,zs,Es],i=[];return t=function(e,t){return"left"==e[5]?0:"center"==e[5]?1:2}(e),n=i[t]=o[t](e),{c(){n.c(),r=m()},m(e,n){i[t].m(e,n),u(e,r,n),s=!0},p(e,[t]){n.p(e,t)},i(e){s||(W(n),s=!0)},o(e){V(n),s=!1},d(e){i[t].d(e),e&&d(r)}}}function qs(e,t,n){let r,s,{column:o}=t,{state:i}=t,{sortable:a}=t,l=o.id;const c=o.formatter.align(o.format,o.formatStats);function u(e,t){const n={symbol:"↓",klass:"invisible",title:""};if(t.wsort){const r=t.wsort[e.id],s="wsort: "+function(e){return e instanceof Map?Array.from(e):Object.entries(e)}(t.wsort).map((([e,t])=>`${e}: ${t}`)).join(", ");return void 0===r||0==r?n:r>=0?{symbol:"↑",klass:"text-gray-900",title:s}:{symbol:"↓",klass:"text-gray-900",title:s}}if(t.sort){let e;for(let n=0;n<t.sort.length;n++){const[r,s]=t.sort[n];r==l&&(e=[s,n])}if(!e)return n;const r="sort: "+t.sort.map((([e,t])=>`${e}: ${t}`)).join(", "),[s,o]=e,i="asc"==s?"↓":"↑";let a;if(0==o)a="text-gray-900";else if(1==o)a="text-gray-400";else{if(2!=o)throw new Error("color for more than 3 sort oders isn't supported");a="text-gray-300"}return{symbol:i,klass:a,title:r}}return n}return e.$$set=e=>{"column"in e&&n(1,o=e.column),"state"in e&&n(0,i=e.state),"sortable"in e&&n(7,a=e.sortable)},e.$$.update=()=>{2&e.$$.dirty&&n(2,r=o.title||o.id),3&e.$$.dirty&&n(3,s=u(o,i))},[i,o,r,s,l,c,function(e){if(a)if(i.wsort){let t=i.wsort;e.metaKey?o.id in t?t[o.id]=-1*t[o.id]:t[o.id]=1:t.size()>1?t={[l]:1}:o.id in t?t[o.id]=-1*t[o.id]:t={[l]:1},n(0,i=Object.assign(Object.assign({},i),{wsort:t}))}else{let t=i.sort||[];const r=function(e,t){const n=t instanceof Function?t:e=>e==t;for(let t=0;t<e.length;t++)if(n(e[t],t))return t;return-1}(t,(([e,t])=>e==o.id));e.metaKey?r>=0?t[r][1]="asc"==t[r][1]?"desc":"asc":t.push([l,"asc"]):t.length>1?t=[[l,"asc"]]:r>=0?(ye(1==t.length),t[r][1]="asc"==t[r][1]?"desc":"asc"):t=[[l,"asc"]],n(0,i=Object.assign(Object.assign({},i),{sort:t}))}},a,function(e){i=e,n(0,i)},function(e){i=e,n(0,i)},function(e){i=e,n(0,i)},function(e){i=e,n(0,i)},function(e){i=e,n(0,i)},function(e){i=e,n(0,i)}]}class Cs extends oe{constructor(e){super(),se(this,e,qs,As,a,{column:1,state:0,sortable:7})}}function Ms(e,t,n){const r=e.slice();return r[4]=t[n],r}function Rs(e,t){let n,r,s,o;function i(e){t[3](e)}let a={column:t[4],sortable:t[2]};return void 0!==t[0]&&(a.state=t[0]),r=new Cs({props:a}),q.push((()=>Q(r,"state",i))),{key:e,first:null,c(){n=m(),ee(r.$$.fragment),this.first=n},m(e,t){u(e,n,t),te(r,e,t),o=!0},p(e,n){t=e;const o={};2&n&&(o.column=t[4]),4&n&&(o.sortable=t[2]),!s&&1&n&&(s=!0,o.state=t[0],L((()=>s=!1))),r.$set(o)},i(e){o||(W(r.$$.fragment,e),o=!0)},o(e){V(r.$$.fragment,e),o=!1},d(e){e&&d(n),ne(r,e)}}}function Ts(e){let t,n,r=[],s=new Map,o=e[1];const i=e=>e[4].id;for(let t=0;t<o.length;t+=1){let n=Ms(e,o,t),a=i(n);s.set(a,r[t]=Rs(a,n))}return{c(){t=f("tr");for(let e=0;e<r.length;e+=1)r[e].c()},m(e,s){u(e,t,s);for(let e=0;e<r.length;e+=1)r[e].m(t,null);n=!0},p(e,[n]){7&n&&(o=e[1],B(),r=Y(r,n,i,1,e,o,s,t,G,Rs,null,Ms),J())},i(e){if(!n){for(let e=0;e<o.length;e+=1)W(r[e]);n=!0}},o(e){for(let e=0;e<r.length;e+=1)V(r[e]);n=!1},d(e){e&&d(t);for(let e=0;e<r.length;e+=1)r[e].d()}}}function Ps(e,t,n){let{columns:r}=t,{state:s}=t,{sortable:o}=t;return e.$$set=e=>{"columns"in e&&n(1,r=e.columns),"state"in e&&n(0,s=e.state),"sortable"in e&&n(2,o=e.sortable)},[s,r,o,function(e){s=e,n(0,s)}]}class Ls extends oe{constructor(e){super(),se(this,e,Ps,Ts,a,{columns:1,state:0,sortable:2})}}function Ns(e,t,n){const r=e.slice();return r[4]=t[n],r[6]=n,r}function Fs(e){let t,n,r;var s=e[4].formatter.default;function o(e){return{props:{options:e[4].format,value:e[1][e[4].id]}}}return s&&(t=new s(o(e))),{c(){t&&ee(t.$$.fragment),n=m()},m(e,s){t&&te(t,e,s),u(e,n,s),r=!0},p(e,r){const i={};if(1&r&&(i.options=e[4].format),3&r&&(i.value=e[1][e[4].id]),s!==(s=e[4].formatter.default)){if(t){B();const e=t;V(e.$$.fragment,1,0,(()=>{ne(e,1)})),J()}s?(t=new s(o(e)),ee(t.$$.fragment),W(t.$$.fragment,1),te(t,n.parentNode,n)):t=null}else s&&t.$set(i)},i(e){r||(t&&W(t.$$.fragment,e),r=!0)},o(e){t&&V(t.$$.fragment,e),r=!1},d(e){e&&d(n),t&&ne(t,e)}}}function Us(e){let t,n,r;var s=e[4].formatter.default;function o(e){return{props:{options:e[4].format,value:e[1][e[4].id],converted:e[1]._converted[e[4].id],stats:e[4].formatStats}}}return s&&(t=new s(o(e))),{c(){t&&ee(t.$$.fragment),n=m()},m(e,s){t&&te(t,e,s),u(e,n,s),r=!0},p(e,r){const i={};if(1&r&&(i.options=e[4].format),3&r&&(i.value=e[1][e[4].id]),3&r&&(i.converted=e[1]._converted[e[4].id]),1&r&&(i.stats=e[4].formatStats),s!==(s=e[4].formatter.default)){if(t){B();const e=t;V(e.$$.fragment,1,0,(()=>{ne(e,1)})),J()}s?(t=new s(o(e)),ee(t.$$.fragment),W(t.$$.fragment,1),te(t,n.parentNode,n)):t=null}else s&&t.$set(i)},i(e){r||(t&&W(t.$$.fragment,e),r=!0)},o(e){t&&V(t.$$.fragment,e),r=!1},d(e){e&&d(n),t&&ne(t,e)}}}function Zs(e,t){let n,r,s,o,i;const a=[Us,Fs],l=[];function h(e,t){return"_converted"in e[1]&&e[4].id in e[1]._converted?0:1}return r=h(t),s=l[r]=a[r](t),{key:e,first:null,c(){n=f("td"),s.c(),o=g(),this.first=n},m(e,t){u(e,n,t),l[r].m(n,null),c(n,o),i=!0},p(e,i){let c=r;r=h(t=e),r===c?l[r].p(t,i):(B(),V(l[c],1,1,(()=>{l[c]=null})),J(),s=l[r],s?s.p(t,i):(s=l[r]=a[r](t),s.c()),W(s,1),s.m(n,o))},i(e){i||(W(s),i=!0)},o(e){V(s),i=!1},d(e){e&&d(n),l[r].d()}}}function Is(e){let t,n,r,s,o,a=[],l=new Map,c=e[0];const h=e=>e[4].id;for(let t=0;t<c.length;t+=1){let n=Ns(e,c,t),r=h(n);l.set(r,a[t]=Zs(r,n))}return{c(){t=f("tr");for(let e=0;e<a.length;e+=1)a[e].c();$(t,"class",n=e[2]?"bg-gray-200":"")},m(n,l){u(n,t,l);for(let e=0;e<a.length;e+=1)a[e].m(t,null);r=!0,s||(o=b(t,"click",(function(){i(e[3])&&e[3].apply(this,arguments)})),s=!0)},p(s,[o]){e=s,3&o&&(c=e[0],B(),a=Y(a,o,h,1,e,c,l,t,G,Zs,null,Ns),J()),(!r||4&o&&n!==(n=e[2]?"bg-gray-200":""))&&$(t,"class",n)},i(e){if(!r){for(let e=0;e<c.length;e+=1)W(a[e]);r=!0}},o(e){for(let e=0;e<a.length;e+=1)V(a[e]);r=!1},d(e){e&&d(t);for(let e=0;e<a.length;e+=1)a[e].d();s=!1,o()}}}function Ds(e,t,n){let{columns:r}=t,{row:s}=t,{selected:o}=t,{onSelect:i}=t;return e.$$set=e=>{"columns"in e&&n(0,r=e.columns),"row"in e&&n(1,s=e.row),"selected"in e&&n(2,o=e.selected),"onSelect"in e&&n(3,i=e.onSelect)},[r,s,o,i]}class Bs extends oe{constructor(e){super(),se(this,e,Ds,Is,a,{columns:0,row:1,selected:2,onSelect:3})}}const Js=e=>`<svg class="${e}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg>`;function Ws(e){let t,r,s,i,a,h,m,w,v,k,x,_,j,O=Js(Vs(!!e[0].filters))+"";return{c(){t=f("div"),r=f("div"),s=g(),i=f("div"),a=f("input"),h=g(),m=f("button"),w=p("W"),k=g(),x=f("button"),$(r,"class","flex items-center"),$(a,"class","rounded border border-gray-300 text-sm outline-none py-1 px-1 leading-4"),$(a,"type","text"),$(a,"placeholder","Filter"),$(m,"class",v=l(Hs(!!e[0].wsort))+" svelte-1y842rg"),$(m,"title",e[4]),$(x,"class","focus:outline-none"),$(i,"class","flex items-center space-x-2"),$(t,"class","flex items-center justify-between my-1")},m(n,o){u(n,t,o),c(t,r),c(t,s),c(t,i),c(i,a),y(a,e[1]),c(i,h),c(i,m),c(m,w),c(i,k),c(i,x),x.innerHTML=O,_||(j=[b(a,"input",e[5]),b(a,"keyup",e[2]),b(m,"click",e[3]),b(x,"click",e[6])],_=!0)},p(e,[t]){2&t&&a.value!==e[1]&&y(a,e[1]),1&t&&v!==(v=l(Hs(!!e[0].wsort))+" svelte-1y842rg")&&$(m,"class",v),1&t&&O!==(O=Js(Vs(!!e[0].filters))+"")&&(x.innerHTML=O)},i:n,o:n,d(e){e&&d(t),_=!1,o(j)}}}function Vs(e){return"h-5 w-5 p-0.5 border rounded text-gray-900 "+(e?"border-gray-300":"border-white")}function Hs(e){return"letter_button focus:outline-none border rounded "+(e?"border-gray-300":"border-white")}function Ks(e,t,n){let{state:r}=t,s=r.filter;const o=(()=>{n(0,r=Object.assign(Object.assign({},r),{filter:s}))}).debounce(200);const i=['Weighted sorting. "Smart", weighted, ranked sorting, instead of normal sorting.',"It works similar to how humans compare products with many attributes, to find the best one.","Example: find countries with highest salaries, lowest taxes and lowest real estate prices - ordinary sorting would be useless, while weighted sorting would sort the countries in a 'smart' way, similar to how human would do.","Missing values threated as average, like if we don't have tax rate for country, we guess that it probably should be somewhat average. For non number comparable elements sort rank used as weight. ifferent range of values for different columns normalised into [-1..1] range as 'nw = (w - median(w)) / 0.9-quantile(variance(w))*1.11' and limiting min/max outliers by [-1..1].",'- Undefined values threated as average\n- Rank for same values should be the same, like ["a", "a", "b"] should be [0, 0, 1], not [0, 1, 2]\n- Different range of values for different columns normalised into [-1..1] range as\n      nw = (w - median(w)) / 0.9-quantile(variance(w))*1.11 and limiting min/max outliers by [-1..1].'].join("\n\n");return e.$$set=e=>{"state"in e&&n(0,r=e.state)},[r,s,o,function(){n(0,r=r.wsort?Object.assign(Object.assign({},r),{wsort:void 0,sort:void 0}):Object.assign(Object.assign({},r),{wsort:{},sort:void 0}))},i,function(){s=this.value,n(1,s)},()=>n(0,r={...r,filters:r.filters?void 0:{}})]}class Xs extends oe{constructor(e){super(),se(this,e,Ks,Ws,a,{state:0})}}function Gs(e,t,n){const r=e.slice();return r[1]=t[n],r}function Ys(e){let t,n=e[0],r=[];for(let t=0;t<n.length;t+=1)r[t]=no(Gs(e,n,t));return{c(){t=f("div");for(let e=0;e<r.length;e+=1)r[e].c();$(t,"class","text-sm mt-1 mx-1")},m(e,n){u(e,t,n);for(let e=0;e<r.length;e+=1)r[e].m(t,null)},p(e,s){if(1&s){let o;for(n=e[0],o=0;o<n.length;o+=1){const i=Gs(e,n,o);r[o]?r[o].p(i,s):(r[o]=no(i),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(e){e&&d(t),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(r,e)}}}function Qs(e){let t;return{c(){t=f("div"),t.textContent="unknown message type"},m(e,n){u(e,t,n)},p:n,d(e){e&&d(t)}}}function eo(e){let t,n,r,s,o=e[1].message+"";return{c(){t=f("div"),n=f("span"),n.textContent="error",r=g(),s=p(o),$(n,"class","bg-red-400 px-2 rounded")},m(e,o){u(e,t,o),c(t,n),c(t,r),c(t,s)},p(e,t){1&t&&o!==(o=e[1].message+"")&&v(s,o)},d(e){e&&d(t)}}}function to(e){let t,n,r,s,o=e[1].message+"";return{c(){t=f("div"),n=f("span"),n.textContent="warn",r=g(),s=p(o),$(n,"class","bg-yellow-400 px-2 rounded")},m(e,o){u(e,t,o),c(t,n),c(t,r),c(t,s)},p(e,t){1&t&&o!==(o=e[1].message+"")&&v(s,o)},d(e){e&&d(t)}}}function no(e){let t;function n(e,t){return"warn"==e[1].type?to:"error"==e[1].type?eo:Qs}let r=n(e),s=r(e);return{c(){s.c(),t=m()},m(e,n){s.m(e,n),u(e,t,n)},p(e,o){r===(r=n(e))&&s?s.p(e,o):(s.d(1),s=r(e),s&&(s.c(),s.m(t.parentNode,t)))},d(e){s.d(e),e&&d(t)}}}function ro(e){let t,r=e[0].length>0&&Ys(e);return{c(){r&&r.c(),t=m()},m(e,n){r&&r.m(e,n),u(e,t,n)},p(e,[n]){e[0].length>0?r?r.p(e,n):(r=Ys(e),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:n,o:n,d(e){r&&r.d(e),e&&d(t)}}}function so(e,t,n){let{messages:r}=t;return e.$$set=e=>{"messages"in e&&n(0,r=e.messages)},[r]}class oo extends oe{constructor(e){super(),se(this,e,so,ro,a,{messages:0})}}function io(e,t,n){const r=e.slice();return r[15]=t[n],r}function ao(e){let t,n,r=e[0].description+"";return{c(){t=f("div"),n=p(r)},m(e,r){u(e,t,r),c(t,n)},p(e,t){1&t&&r!==(r=e[0].description+"")&&v(n,r)},d(e){e&&d(t)}}}function lo(e,t){let n,r,s;function o(...e){return t[12](t[15],...e)}return r=new Bs({props:{columns:t[4],row:t[15],selected:t[2].has(t[15]._i),onSelect:o}}),{key:e,first:null,c(){n=m(),ee(r.$$.fragment),this.first=n},m(e,t){u(e,n,t),te(r,e,t),s=!0},p(e,n){t=e;const s={};8&n&&(s.row=t[15]),12&n&&(s.selected=t[2].has(t[15]._i)),8&n&&(s.onSelect=o),r.$set(s)},i(e){s||(W(r.$$.fragment,e),s=!0)},o(e){V(r.$$.fragment,e),s=!1},d(e){e&&d(n),ne(r,e)}}}function co(e){let t,n,r,s,o,i;return{c(){t=f("div"),t.textContent="Debug:",n=g(),r=f("textarea"),o=g(),i=f("textarea"),$(t,"class","mt-3"),$(r,"class","block focus:outline-none rounded border border-gray-200 text-xs overflow-scroll mt-4"),r.readOnly=!0,k(r,"resize","none"),k(r,"width","30rem"),k(r,"height","5rem"),r.value=s=rt({...e[1],selected:e[2]}),$(i,"class","block focus:outline-none rounded border border-gray-200 text-xs overflow-scroll mt-4"),i.readOnly=!0,k(i,"resize","none"),k(i,"width","30rem"),k(i,"height","10rem"),i.value=rt(e[4])},m(e,s){u(e,t,s),u(e,n,s),u(e,r,s),u(e,o,s),u(e,i,s)},p(e,t){6&t&&s!==(s=rt({...e[1],selected:e[2]}))&&(r.value=s)},d(e){e&&d(t),e&&d(n),e&&d(r),e&&d(o),e&&d(i)}}}function uo(e){let t,n,r,s,o,i,a,l,h,p,w,v,y,k,x,_,j,O,E=[],z=new Map,S=e[0].description&&ao(e);function A(t){e[10](t)}let C={};function M(t){e[11](t)}void 0!==e[1]&&(C.state=e[1]),o=new Xs({props:C}),q.push((()=>Q(o,"state",A)));let R={columns:e[4],sortable:e[6]};void 0!==e[1]&&(R.state=e[1]),h=new Ls({props:R}),q.push((()=>Q(h,"state",M)));let T=e[3];const P=e=>e[15]._i;for(let t=0;t<T.length;t+=1){let n=io(e,T,t),r=P(n);z.set(r,E[t]=lo(r,n))}y=new oo({props:{messages:e[5]}});let N=e[0].debug&&co(e);return{c(){S&&S.c(),t=g(),n=f("table"),r=f("tr"),s=f("td"),ee(o.$$.fragment),l=g(),ee(h.$$.fragment),w=g();for(let e=0;e<E.length;e+=1)E[e].c();v=g(),ee(y.$$.fragment),k=g(),N&&N.c(),x=m(),$(s,"colspan",e[4].length),$(r,"class",a="plot-table-toolbar "+(!e[1].show_controls&&"invisible")),$(n,"class","plot-table font-mono")},m(i,a){S&&S.m(i,a),u(i,t,a),u(i,n,a),c(n,r),c(r,s),te(o,s,null),c(n,l),te(h,n,null),c(n,w);for(let e=0;e<E.length;e+=1)E[e].m(n,null);u(i,v,a),te(y,i,a),u(i,k,a),N&&N.m(i,a),u(i,x,a),_=!0,j||(O=b(n,"click",e[13]),j=!0)},p(e,[s]){e[0].description?S?S.p(e,s):(S=ao(e),S.c(),S.m(t.parentNode,t)):S&&(S.d(1),S=null);const l={};!i&&2&s&&(i=!0,l.state=e[1],L((()=>i=!1))),o.$set(l),(!_||2&s&&a!==(a="plot-table-toolbar "+(!e[1].show_controls&&"invisible")))&&$(r,"class",a);const c={};!p&&2&s&&(p=!0,c.state=e[1],L((()=>p=!1))),h.$set(c),156&s&&(T=e[3],B(),E=Y(E,s,P,1,e,T,z,n,G,lo,null,io),J()),e[0].debug?N?N.p(e,s):(N=co(e),N.c(),N.m(x.parentNode,x)):N&&(N.d(1),N=null)},i(e){if(!_){W(o.$$.fragment,e),W(h.$$.fragment,e);for(let e=0;e<T.length;e+=1)W(E[e]);W(y.$$.fragment,e),_=!0}},o(e){V(o.$$.fragment,e),V(h.$$.fragment,e);for(let e=0;e<E.length;e+=1)V(E[e]);V(y.$$.fragment,e),_=!1},d(e){S&&S.d(e),e&&d(t),e&&d(n),ne(o),ne(h);for(let e=0;e<E.length;e+=1)E[e].d();e&&d(v),ne(y,e),e&&d(k),N&&N.d(e),e&&d(x),j=!1,O()}}}function fo(e,t,n){let r,s,{options:o}=t,{data:i}=t,{columns:a,rows:l,messages:c}=ds(o,i),u={filter:o.filter||"",filters:is(a,o.filters),sort:o.sort,wsort:o.wsort,show_controls:!!o.show_controls},d=0!=o.sortable,f=new Set(o.selected||[]);function h(e,t){!function(e,t,n,r){const s=new Set(n);if(e.metaKey)s.has(t)?s.delete(t):s.add(t);else{const e=s.has(t)&&1==s.size;s.clear(),e||s.add(t)}r(s)}(e,t,f,(e=>n(2,f=e)))}return e.$$set=e=>{"options"in e&&n(0,o=e.options),"data"in e&&n(8,i=e.data)},e.$$.update=()=>{2&e.$$.dirty&&n(9,r=ps(a,l,u)),514&e.$$.dirty&&n(3,s=function(e,t,{sort:n,wsort:r}){return n&&!n.is_empty()?rs(e,t,n):r&&!Object.is_empty(r)?ss(e,t,r):t}(a,r,u))},[o,u,f,s,a,c,d,h,i,r,function(e){u=e,n(1,u)},function(e){u=e,n(1,u)},(e,t)=>h(t,e._i),()=>n(1,u={...u,show_controls:!0})]}class ho extends oe{constructor(e){super(),se(this,e,fo,uo,a,{options:0,data:8})}}function po(e){let t,n;return t=new Ie({props:{error:e[3]}}),{c(){ee(t.$$.fragment)},m(e,r){te(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.error=e[3]),t.$set(r)},i(e){n||(W(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){ne(t,e)}}}function go(e){let t,n;return t=new ho({props:{options:e[0].table||{},data:e[2]}}),{c(){ee(t.$$.fragment)},m(e,r){te(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.options=e[0].table||{}),1&n&&(r.data=e[2]),t.$set(r)},i(e){n||(W(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){ne(t,e)}}}function mo(e){let t,r;return t=new Je({}),{c(){ee(t.$$.fragment)},m(e,n){te(t,e,n),r=!0},p:n,i(e){r||(W(t.$$.fragment,e),r=!0)},o(e){V(t.$$.fragment,e),r=!1},d(e){ne(t,e)}}}function bo(e){let t,n,r,s={ctx:e,current:null,token:null,hasCatch:!0,pending:mo,then:go,catch:po,value:2,error:3,blocks:[,,,]};return H(n=et(e[0].data),s),{c(){t=f("div"),s.block.c(),$(t,"class","TableBlockContent")},m(e,n){u(e,t,n),s.block.m(t,s.anchor=null),s.mount=()=>t,s.anchor=null,r=!0},p(t,[r]){e=t,s.ctx=e,1&r&&n!==(n=et(e[0].data))&&H(n,s)||K(s,e,r)},i(e){r||(W(s.block),r=!0)},o(e){for(let e=0;e<3;e+=1){V(s.blocks[e])}r=!1},d(e){e&&d(t),s.block.d(),s.token=null,s=null}}}const wo={match_and_normalize:e=>{return is_object(e)&&"table"in e?e:is_array(e)?{data:e,table:{}}:(t=e)&&"object"==typeof t&&"csv_table"==t.type?function(e){const t=[];for(const n of e.columns){let r="unknown";for(const t of e.rows){const e=t[n];if(null!=e){r=typeof e;break}}t.push(r)}const n=e.columns.map(((e,n)=>({id:e,type:t[n]})));return{data:e.rows,table:{columns:n}}}(e):void 0;var t}};function $o(e,t,n){let{block:r}=t,{state:s}=t;return discard(s),e.$$set=e=>{"block"in e&&n(0,r=e.block),"state"in e&&n(1,s=e.state)},[r,s]}var vo=Object.freeze({__proto__:null,default:class extends oe{constructor(e){super(),se(this,e,$o,bo,a,{block:0,state:1})}},definition:wo});function yo(e){let t,n,r=e[1].title+"";return{c(){t=f("div"),n=p(r),$(t,"class","title")},m(e,r){u(e,t,r),c(t,n)},p(e,t){2&t&&r!==(r=e[1].title+"")&&v(n,r)},d(e){e&&d(t)}}}function ko(e){let t,n;return t=new gn({props:{markdown:e[1].description}}),{c(){ee(t.$$.fragment)},m(e,r){te(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.markdown=e[1].description),t.$set(r)},i(e){n||(W(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){ne(t,e)}}}function xo(e){let t,n,r,s,o,i,a,l,h,p=e[1].title&&yo(e),m=e[1].description&&ko(e);var b=e[2];function w(e){return{props:{block:e[1],state:e[4]}}}return b&&(o=new b(w(e))),a=new bn({}),{c(){t=f("div"),p&&p.c(),n=g(),m&&m.c(),r=g(),s=f("div"),o&&ee(o.$$.fragment),i=g(),ee(a.$$.fragment),$(s,"class","content"),$(t,"class",l="SingleBlock _block_"+e[3]+" _block_"+e[0])},m(e,l){u(e,t,l),p&&p.m(t,null),c(t,n),m&&m.m(t,null),c(t,r),c(t,s),o&&te(o,s,null),c(t,i),te(a,t,null),h=!0},p(e,[i]){e[1].title?p?p.p(e,i):(p=yo(e),p.c(),p.m(t,n)):p&&(p.d(1),p=null),e[1].description?m?(m.p(e,i),2&i&&W(m,1)):(m=ko(e),m.c(),W(m,1),m.m(t,r)):m&&(B(),V(m,1,1,(()=>{m=null})),J());const a={};if(2&i&&(a.block=e[1]),b!==(b=e[2])){if(o){B();const e=o;V(e.$$.fragment,1,0,(()=>{ne(e,1)})),J()}b?(o=new b(w(e)),ee(o.$$.fragment),W(o.$$.fragment,1),te(o,s,null)):o=null}else b&&o.$set(a);(!h||9&i&&l!==(l="SingleBlock _block_"+e[3]+" _block_"+e[0]))&&$(t,"class",l)},i(e){h||(W(m),o&&W(o.$$.fragment,e),W(a.$$.fragment,e),h=!0)},o(e){V(m),o&&V(o.$$.fragment,e),V(a.$$.fragment,e),h=!1},d(e){e&&d(t),p&&p.d(),m&&m.d(),o&&ne(o),ne(a)}}}function _o(e,t,n){let r,{block_name:s}=t,{data:o}=t,{block_impl:i}=t;return e.$$set=e=>{"block_name"in e&&n(0,s=e.block_name),"data"in e&&n(1,o=e.data),"block_impl"in e&&n(2,i=e.block_impl)},e.$$.update=()=>{2&e.$$.dirty&&n(3,r=o.style||"normal")},[s,o,i,r,{is_narrow:!1,collapsed:!1}]}e.blocks.image=xn,e.blocks.text=An,e.blocks.chart=$r,e.blocks.table=vo;class jo extends oe{constructor(e){super(),se(this,e,_o,xo,a,{block_name:0,data:1,block_impl:2})}}t.run=async function(t){try{let n,r,s=document.getElementById("data");if(t&&"data"in t)n=t.data;else if(s){if(r=s.getAttribute("type"),!r)throw"can't get data type on data script with id 'data'";const e=s.innerHTML;n=await tt(e,r)}else{const e=function(){const e=new URLSearchParams(window.location.search).get("data_url");if(e)return e;{let e=window.location.pathname;e.startsWith("/")||(e+="/");const t=/:([^:]+)$/i;return e.replace(t,"")}}();r=Ve(e),n=await Qe(e)}n.css_url&&Ke([n.css_url],"parallel");const o=function(t,n){const r=e.blocks;if(null==t)throw new Error("block not defined");if(is_object(t)){const n=t;if(n.block){if(!is_array(n.block)||2!=n.block.length)throw new Error("invalid block, it should be `block: [block_name, 0.1]`");const t=n.block[0],{definition:r,default:s}=e.blocks[t],o=r.match_and_normalize(n);if(!o)throw`Data not matching '${t}' block`;return{name:t,klass:s,ndata:o}}for(const e in r){const{definition:t,default:s}=r[e],o=t.match_and_normalize(n);if(o)return{name:e,klass:s,ndata:o}}}if(n){const r=e.blocks_for_file_extensions[n],{definition:s,default:o}=e.blocks[r],i=s.match_and_normalize(t);if(!i)throw`Data not matching '${r}' block, registered for extension ${n}`;return{name:r,klass:o,ndata:i}}if(is_array(t)||is_object(t)){const n="table",{definition:r,default:s}=e.blocks[n],o=r.match_and_normalize(t);if(!o)throw"internal error, data not matching table block";return{name:n,klass:s,ndata:o}}if(is_string(t)){const n="table",{definition:r,default:s}=e.blocks[n],o=r.match_and_normalize(t);if(!o)throw"internal error, data not matching text block";return{name:n,klass:s,ndata:o}}return}(n,r);if(o)new jo({target:document.body,props:{block_name:o.name,data:o.ndata,block_impl:o.klass}});else{const t=function(e,t){throw new Error("not implemented")}();if(!t)throw new Error("can't find block or app");const{definition:r,default:s}=e.apps[t],o=r.match_and_normalize(n);if(!o)throw`Data not matching '${t}' app block`;const i={data:o};new s({target:document.body,props:i})}}catch(e){console.error(e),new Ie({target:document.body,props:{error:e}})}}}();
