!function(){"use strict";function e(e,t){var n;const r=null===(n=window)||void 0===n?void 0:n.env[e];return null!=r?r:null!=t?t:void 0}let t="Deno"in window?window.Deno:void 0;function n(){return null==t}function r(e){return e&&e.toJSON?e.toJSON():e}function s(...e){if(n())console.log(...e);else{const n=e.map((e=>function(e,n=!1){return e=g(e,r),t&&"object"==typeof e?t.inspect(e,{colors:n}):e}(e,!0)));e.length,console.log(...n)}}const o=[];let i,l=0,a=!1;function c(){a||(a=!0,setTimeout((async()=>{for(;l<o.length;){let{name:e,test:t}=o[l];l+=1;try{console.log(`  test | ${e}`);let n=t();n&&await n}catch(t){if(console.error(`  test | ${e} failed`),console.error(t),!n())throw t}}a=!1}),0))}window.runTests=c;try{i=(e("test")||"").toLowerCase()}catch(e){i="false"}let u="all"==i||"true"==i;function f(e,t){o.push({name:e,test:t}),(u||e.toLowerCase()==i)&&c()}const d=function(e,t){const n=t?t instanceof Function?t():t:"Assertion error!";if(!e)throw new Error(n)};function h(e){return null===e||"object"!=typeof e?e:Array.isArray(e)?e.map(h):"toJSON"in e?h(e.toJSON()):Object.assign({},...Object.entries(e).sort((([e],[t])=>e.localeCompare(t))).map((([e,t])=>({[e]:h(t)}))))}function p(e,t=!0){return t?JSON.stringify(h(e),null,2):JSON.stringify(h(e))}function g(e,t){return null===(e=t(e))||"object"!=typeof e?e:"map"in e?e.map((e=>g(e,t))):Object.assign({},...Object.entries(e).map((([e,n])=>({[e]:g(n,t)}))))}function m(e,t){const n=t.match(e);return n?1==n.length?[]:n.slice(1,n.length):[]}function b(e){if(e instanceof Array)return e.length;if(e instanceof String||"string"==typeof e)return e.length;{let t=0;for(const n in e)e.hasOwnProperty(n)&&t++;return t}}function w(e){const t=m(/^(\s+)/,e=e.replace(/^\s*\n|[\n\s]+$/,""));return 0==t.length?e:e.split("\n").map((e=>e.startsWith(t[0])?e.replace(t[0],""):e)).join("\n")}function $(e,t){if(e instanceof Array)for(let n=0;n<e.length;n++)t(e[n],n);else if(e instanceof Map)for(const[n,r]of e)t(r,n);else for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function y(e,t){const n=t instanceof Function?t:e=>e==t;if(e instanceof Array)for(let t=0;t<e.length;t++){if(n(e[t],t))return e[t];for(const t in e)if(e.hasOwnProperty(t)&&n(e[t],t))return e[t]}}function v(e,t){if(t=t||(e=>e),0==e.length)return-1;let n=t(e[0]),r=0;for(let s=1;s<e.length;s++){let o=t(e[s]);o<n&&(n=o,r=s)}return r}function k(e,t){if(t=t||(e=>e),0==e.length)return-1;let n=t(e[0]),r=0;for(let s=1;s<e.length;s++){let o=t(e[s]);o>n&&(n=o,r=s)}return r}function x(e,t=!1){return _(e,.5,t)}function _(e,t,n=!1){const r=n?e:[...e].sort(((e,t)=>e-t)),s=(r.length-1)*t,o=Math.floor(s),i=s-o;return void 0!==r[o+1]?r[o]+i*(r[o+1]-r[o]):r[o]}function j(e,t){const n=[];let r=0;for(;;){const s=[];r<e.length&&n.push(s);for(let o=0;o<t;o++){if(!(r+o<e.length))return n;s.push(e[r+o])}r+=t}}function O(e,t){if(e instanceof Array){const n=new Array,r=new Array,s=t instanceof Function?t:(e,n)=>t.includes(n);return $(e,((e,t)=>s(e,t)?n.push(e):r.push(e))),[n,r]}{const n={},r={},s=t instanceof Function?t:(e,n)=>t.includes(n);return $(e,((e,t)=>s(e,t)?n[t]=e:r[t]=e)),[n,r]}}function E(e,t,n=!1){if(0==e.length)return e;{const r=typeof t(e[0]);let s,o;if("number"==r)s=function(e,n){return t(e)-t(n)};else if("boolean"==r)s=function(e,n){return(t(e)?1:0)-(t(n)?1:0)};else{if("string"!=r)throw new Error(`invalid return type for 'by' '${r}'`);s=function(e,n){return t(e).localeCompare(t(n))}}return o=[...e],o.sort(s),n&&o.reverse(),o}}function S(e,t){if(e instanceof Array){const n=[];return $(e,((e,r)=>{const s=t(e,r);!1!==s&&n.push(s)})),n}if(e instanceof Map){const n=new Map;return $(e,((e,r)=>{const s=t(e,r);!1!==s&&n.set(r,s)})),n}{const n={};return $(e,((e,r)=>{const s=t(e,r);!1!==s&&(n[r]=s)})),n}}function A(e,t){if("object"==typeof e&&"found"in e){if(e.found)return e.value;throw new Error(e.message||`value${t?" "+t:""} not found`)}if("string"==typeof e){if(""==e)throw new Error(`string value${t?" "+t:""} not found`);return e}if(void 0===e)throw new Error(`value${t?" "+t:""} not defined`);return e}function z(e,t,n){return $(e,((e,r)=>t=n(t,e,r))),t}function q(e){return z(e,0,((e,t)=>e+t))}function C(e,t){if(e instanceof Array)return e.map(t);if(e instanceof Map){const n=new Map;return $(e,((e,r)=>n.set(r,t(e,r)))),n}{const n={};return $(e,((e,r)=>n[r]=t(e,r))),n}}function M(e,t=0){return 0==t?Math.round(e):Math.round((e+Number.EPSILON)*Math.pow(10,t))/Math.pow(10,t)}function R(e,t,n=!1){let r;return(...s)=>{n?(n=!1,e(...s)):(r&&clearTimeout(r),r=setTimeout((()=>e(...s)),t))}}function L(e,t="Unknown error"){return e&&"object"==typeof e&&e instanceof Error?(e.message||(e.message=t),e):new Error(""+(e||t))}d.equal=(e,t,n)=>{if(!function(e,t){return p(e)===p(t)}(e,t)){const r=n?n instanceof Function?n():n:`Assertion error: ${p(e,!0)} != ${p(t,!0)}`;throw new Error(r)}},d.fail=(e,t)=>{let n=!1;try{e()}catch(e){n=!0}if(!n){const e=t?t instanceof Function?t():t:"Assertion error: expected to fail but didn't";throw new Error(e)}},d.approxEqual=(e,t,n,r)=>{r=r||.001;const s=(Math.abs(e)+Math.abs(t))/2*r;if(Math.abs(e-t)>s){const r=n?n instanceof Function?n():n:`Assertion error: ${p(e,!0)} != ${p(t,!0)}`;throw new Error(r)}},f("deepMap",(()=>{class e{constructor(e){this.v=e}toJSON(){return this.v}}const t=new e([1,2]);d.equal(g(t,r),[1,2]);const n=new e([t,3]);d.equal(g(n,r),[[1,2],3])})),Promise.prototype.toJSON=function(){return"Promise"},Object.defineProperty(Promise.prototype,"cmap",{configurable:!1,enumerable:!1}),f("parse",(()=>{d.equal(m(/.+ (\d+) (\d+)/,"a 22 45"),["22","45"]),d.equal(m(/[^;]+;/,"drop table; create table;"),[])})),f("parseNamed",(()=>{d.equal(function(e,t){const n=t.match(e);return(null==n?void 0:n.groups)||{}}(/.+ (?<a>\d+) (?<b>\d+)/,"a 22 45"),{a:"22",b:"45"})})),f("dedent",(()=>{d.equal(w("\n  a\n  b\n    c"),"a\nb\n  c")})),f("groupByN",(()=>{d.equal(j([1,2,3],2),[[1,2],[3]]),d.equal(j([1,2],2),[[1,2]]),d.equal(j([1],2),[[1]]),d.equal(j([],2),[])})),f("sortBy",(()=>{d.equal(E([{v:!0},{v:!1}],(({v:e})=>e)),[{v:!1},{v:!0}]),d.equal(E([{v:"b"},{v:""},{v:"c"}],(({v:e})=>e)),[{v:""},{v:"b"},{v:"c"}])})),f("pick",(()=>{var e;d.equal((e=["a"],O({a:1,b:2},((t,n)=>e.includes(n)))[0]),{a:1})})),f("round",(()=>{d.equal(M(.05860103881518906,2),.06)})),Error.prototype.toJSON=function(){return{message:this.message,stack:this.stack}},Map.prototype.toJSON=function(){return z(this,{},((e,t,n)=>(e[n]=t,e)))};const N={blocks_limit:100,narrow_width:480,height_in_narrow_width_mode:200,parsers:{},blocks_for_file_extensions:{md:"text",text:"text"},blocks:{},apps:{}};window.plot_config=N;const T={version:.1};function P(){}function Z(e){return e()}function U(){return Object.create(null)}function F(e){e.forEach(Z)}function I(e){return"function"==typeof e}function B(e,t){return e!=e?t==t:e!==t}function J(e){return null==e?"":e}function D(e,t){e.appendChild(t)}function W(e,t,n){e.insertBefore(t,n||null)}function V(e){e.parentNode.removeChild(e)}function K(e){return document.createElement(e)}function H(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function X(e){return document.createTextNode(e)}function G(){return X(" ")}function Q(){return X("")}function Y(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function ee(e){return function(t){return t.preventDefault(),e.call(this,t)}}function te(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ne(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function re(e,t){e.value=null==t?"":t}function se(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function oe(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}}let ie,le;function ae(){if(void 0===ie){ie=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(e){ie=!0}}return ie}window.plot_api=T;class ce{constructor(e=null){this.a=e,this.e=this.n=null}m(e,t,n=null){this.e||(this.e=K(t.nodeName),this.t=t,this.h(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)W(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(V)}}function ue(e){le=e}function fe(){if(!le)throw new Error("Function called outside component initialization");return le}const de=[],he=[],pe=[],ge=[],me=Promise.resolve();let be=!1;function we(e){pe.push(e)}function $e(e){ge.push(e)}let ye=!1;const ve=new Set;function ke(){if(!ye){ye=!0;do{for(let e=0;e<de.length;e+=1){const t=de[e];ue(t),xe(t.$$)}for(ue(null),de.length=0;he.length;)he.pop()();for(let e=0;e<pe.length;e+=1){const t=pe[e];ve.has(t)||(ve.add(t),t())}pe.length=0}while(de.length);for(;ge.length;)ge.pop()();be=!1,ye=!1,ve.clear()}}function xe(e){if(null!==e.fragment){e.update(),F(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(we)}}const _e=new Set;let je;function Oe(){je={r:0,c:[],p:je}}function Ee(){je.r||F(je.c),je=je.p}function Se(e,t){e&&e.i&&(_e.delete(e),e.i(t))}function Ae(e,t,n,r){if(e&&e.o){if(_e.has(e))return;_e.add(e),je.c.push((()=>{_e.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}function ze(e,t){const n=t.token={};function r(e,r,s,o){if(t.token!==n)return;t.resolved=o;let i=t.ctx;void 0!==s&&(i=i.slice(),i[s]=o);const l=e&&(t.current=e)(i);let a=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==r&&e&&(Oe(),Ae(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),Ee())})):t.block.d(1),l.c(),Se(l,1),l.m(t.mount(),t.anchor),a=!0),t.block=l,t.blocks&&(t.blocks[r]=l),a&&ke()}if((s=e)&&"object"==typeof s&&"function"==typeof s.then){const n=fe();if(e.then((e=>{ue(n),r(t.then,1,t.value,e),ue(null)}),(e=>{if(ue(n),r(t.catch,2,t.error,e),ue(null),!t.hasCatch)throw e})),t.current!==t.pending)return r(t.pending,0),!0}else{if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}var s}function qe(e,t,n){const r=t.slice(),{resolved:s}=e;e.current===e.then&&(r[e.value]=s),e.current===e.catch&&(r[e.error]=s),e.block.p(r,n)}function Ce(e,t){e.d(1),t.delete(e.key)}function Me(e,t){Ae(e,1,1,(()=>{t.delete(e.key)}))}function Re(e,t,n,r,s,o,i,l,a,c,u,f){let d=e.length,h=o.length,p=d;const g={};for(;p--;)g[e[p].key]=p;const m=[],b=new Map,w=new Map;for(p=h;p--;){const e=f(s,o,p),l=n(e);let a=i.get(l);a?r&&a.p(e,t):(a=c(l,e),a.c()),b.set(l,m[p]=a),l in g&&w.set(l,Math.abs(p-g[l]))}const $=new Set,y=new Set;function v(e){Se(e,1),e.m(l,u),i.set(e.key,e),u=e.first,h--}for(;d&&h;){const t=m[h-1],n=e[d-1],r=t.key,s=n.key;t===n?(u=t.first,d--,h--):b.has(s)?!i.has(r)||$.has(r)?v(t):y.has(s)?d--:w.get(r)>w.get(s)?(y.add(r),v(t)):($.add(s),d--):(a(n,i),d--)}for(;d--;){const t=e[d];b.has(t.key)||a(t,i)}for(;h;)v(m[h-1]);return m}function Le(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function Ne(e){e&&e.c()}function Te(e,t,n,r){const{fragment:s,on_mount:o,on_destroy:i,after_update:l}=e.$$;s&&s.m(t,n),r||we((()=>{const t=o.map(Z).filter(I);i?i.push(...t):F(t),e.$$.on_mount=[]})),l.forEach(we)}function Pe(e,t){const n=e.$$;null!==n.fragment&&(F(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ze(e,t){-1===e.$$.dirty[0]&&(de.push(e),be||(be=!0,me.then(ke)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ue(e,t,n,r,s,o,i=[-1]){const l=le;ue(e);const a=e.$$={fragment:null,ctx:null,props:o,update:P,not_equal:s,bound:U(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:t.context||[]),callbacks:U(),dirty:i,skip_bound:!1};let c=!1;if(a.ctx=n?n(e,t.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return a.ctx&&s(a.ctx[t],a.ctx[t]=o)&&(!a.skip_bound&&a.bound[t]&&a.bound[t](o),c&&Ze(e,t)),n})):[],a.update(),c=!0,F(a.before_update),a.fragment=!!r&&r(a.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);a.fragment&&a.fragment.l(e),e.forEach(V)}else a.fragment&&a.fragment.c();t.intro&&Se(e.$$.fragment),Te(e,t.target,t.anchor,t.customElement),ke()}ue(l)}class Fe{$destroy(){Pe(this,1),this.$destroy=P}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Ie(e){let t,n;return{c(){t=K("pre"),n=X(e[1]),te(t,"class","text-xs text-gray-600 mt-4")},m(e,r){W(e,t,r),D(t,n)},p(e,t){2&t&&ne(n,e[1])},d(e){e&&V(t)}}}function Be(e){let t,n,r,s,o,i=L(e[0]).message+"",l=e[1].length>0&&Ie(e);return{c(){t=K("div"),n=K("span"),n.textContent="Error",r=X(" -\n  "),s=X(i),o=G(),l&&l.c(),te(n,"class","text-red-600 font-bold")},m(e,i){W(e,t,i),D(t,n),D(t,r),D(t,s),D(t,o),l&&l.m(t,null)},p(e,[n]){1&n&&i!==(i=L(e[0]).message+"")&&ne(s,i),e[1].length>0?l?l.p(e,n):(l=Ie(e),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},i:P,o:P,d(e){e&&V(t),l&&l.d()}}}function Je(e,t,n){let r,{error:s}=t;return e.$$set=e=>{"error"in e&&n(0,s=e.error)},e.$$.update=()=>{1&e.$$.dirty&&n(1,r=(s&&s instanceof Error?s.stack:"")||"")},[s,r]}class De extends Fe{constructor(e){super(),Ue(this,e,Je,Be,B,{error:0})}}function We(e){let t,n;return t=new De({props:{error:"Data images not supported yet"}}),{c(){Ne(t.$$.fragment)},m(e,r){Te(t,e,r),n=!0},p:P,i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Ae(t.$$.fragment,e),n=!1},d(e){Pe(t,e)}}}function Ve(e){let t,n,r;return{c(){t=K("img"),t.src!==(n=e[1].url)&&te(t,"src",n),te(t,"alt",r=e[0].id)},m(e,n){W(e,t,n)},p(e,s){2&s&&t.src!==(n=e[1].url)&&te(t,"src",n),1&s&&r!==(r=e[0].id)&&te(t,"alt",r)},i:P,o:P,d(e){e&&V(t)}}}function Ke(e){let t,n,r,s;const o=[Ve,We],i=[];function l(e,t){return"object"==typeof e[1]&&"url"in e[1]?0:1}return n=l(e),r=i[n]=o[n](e),{c(){t=K("div"),r.c(),te(t,"class","ImageBlockContent")},m(e,r){W(e,t,r),i[n].m(t,null),s=!0},p(e,[s]){let a=n;n=l(e),n===a?i[n].p(e,s):(Oe(),Ae(i[a],1,1,(()=>{i[a]=null})),Ee(),r=i[n],r?r.p(e,s):(r=i[n]=o[n](e),r.c()),Se(r,1),r.m(t,null))},i(e){s||(Se(r),s=!0)},o(e){Ae(r),s=!1},d(e){e&&V(t),i[n].d()}}}function He(e,t,n){let r,{block:s}=t,{state:o}=t;return e.$$set=e=>{"block"in e&&n(0,s=e.block),"state"in e&&n(2,o=e.state)},e.$$.update=()=>{1&e.$$.dirty&&n(1,r=s.image)},[s,r,o]}var Xe=Object.freeze({__proto__:null,default:class extends Fe{constructor(e){super(),Ue(this,e,He,Ke,B,{block:0,state:2})}},definition:{match:e=>"object"==typeof e&&"image"in e}});class Ge{constructor(e){this.v=e}get(){return this.v}set(e){this.v=e}}function Qe(e){const t=m(/\.([a-z0-9]+)$/i,e);return t.length>0?t[0]:void 0}function Ye(t){return/\//.test(t)?function(){const t=e("base_url");if(void 0===t)throw new Error("base_url not specified");return t}()+t:t}async function et(e,t){if("parallel"==t){const t=e.map(nt);for(const e of t)await e}else for(const t of e)await nt(t)}const tt={};async function nt(e){if(!(e in tt)){const t=Ye(e);if(e.endsWith(".js"))tt[e]=function(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.src=e,r.onerror=()=>{r.remove(),n(new Error(`Cannot load ${e}`))},r.onload=()=>{r.remove(),t()},document.body.append(r)}))}(t);else{if(!e.endsWith(".css"))throw new Error(`should be script or style url '${e}'`);tt[e]=function(e){return new Promise(((t,n)=>{const r=document.createElement("link");r.rel="stylesheet",r.onerror=()=>{r.remove(),n(new Error(`Cannot load ${e}`))},r.onload=()=>{t()},r.href=e,document.head.appendChild(r)}))}(t)}}return tt[e]}async function rt(e){let t=await fetch(function(e,t={}){const n=[];for(const e in t){const r=t[e];null!=e&&null!=r&&n.push(`${encodeURIComponent(e)}=${encodeURIComponent(""+t[e])}`)}return n.length>0?`${e}${e.includes("?")?"&":"?"}${n.join("&")}`:e}(e,{clearcache:Math.random()}));return async function(e,t,n){if(t){const r=N.parsers[t];if(r)try{return await r(e)}catch(e){throw new Error(`can't parse '${n||t}', ${L(e).message}`)}}return e}(await t.text(),Qe(e),e)}async function st(e){if(void 0===e)throw new Error("nether data nor data url provided");return"object"==typeof e&&"url"in e?await rt(e.url):e}async function ot(e){return(await lt()).load(e)}async function it(e){return(await lt()).dump(e,{skipInvalid:!0,noRefs:!0})}async function lt(){await et(["/vendor/js-yaml-4.1.0/js-yaml.min.js"],"serial");const e=window.jsyaml;if(!e)throw new Error("can't load 'js-yaml' library");return e}function at(e){return e&&"object"==typeof e&&"csv_table"==e.type}N.parsers.yml=ot,N.parsers.yaml=ot,N.parsers.json=async e=>JSON.parse(e),N.parsers.csv=async function(e){const{errors:t,data:n,meta:{fields:r}}=(await async function(){await et(["/vendor/papaparse-5.0.2/papaparse.min.js"],"serial");const e=window.Papa;if(!e)throw new Error("can't load 'papaparse' library");return e}()).parse(e,{header:!0,dynamicTyping:!0});if(t.lenght>0)throw new Error(L(t[0]).message);return{type:"csv_table",columns:r,rows:n}};const ct={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};f("escapeHtml",(()=>{var e;d.equal(null==(e="<div>")?"":(""+e).replace(/[&<>'"]/g,(function(e){return ct[e]})),"&lt;div&gt;")}));var ut,ft=(function(e){function t(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}}e.exports={defaults:{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1},getDefaults:t,changeDefaults:function(t){e.exports.defaults=t}}}(ut={exports:{}},ut.exports),ut.exports);const dt=/[&<>"']/,ht=/[&<>"']/g,pt=/[<>"']|&(?!#?\w+;)/,gt=/[<>"']|&(?!#?\w+;)/g,mt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},bt=e=>mt[e];const wt=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function $t(e){return e.replace(wt,((e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const yt=/(^|[^\[])\^/g;const vt=/[^\w:]/g,kt=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;const xt={},_t=/^[^:]+:\/*[^/]*$/,jt=/^([^:]+:)[\s\S]*$/,Ot=/^([^:]+:\/*[^/]*)[\s\S]*$/;function Et(e,t){xt[" "+e]||(_t.test(e)?xt[" "+e]=e+"/":xt[" "+e]=St(e,"/",!0));const n=-1===(e=xt[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(jt,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(Ot,"$1")+t:e+t}function St(e,t,n){const r=e.length;if(0===r)return"";let s=0;for(;s<r;){const o=e.charAt(r-s-1);if(o!==t||n){if(o===t||!n)break;s++}else s++}return e.substr(0,r-s)}var At={escape:function(e,t){if(t){if(dt.test(e))return e.replace(ht,bt)}else if(pt.test(e))return e.replace(gt,bt);return e},unescape:$t,edit:function(e,t){e=e.source||e,t=t||"";const n={replace:(t,r)=>(r=(r=r.source||r).replace(yt,"$1"),e=e.replace(t,r),n),getRegex:()=>new RegExp(e,t)};return n},cleanUrl:function(e,t,n){if(e){let e;try{e=decodeURIComponent($t(n)).replace(vt,"").toLowerCase()}catch(e){return null}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}t&&!kt.test(n)&&(n=Et(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n},resolveUrl:Et,noopTest:{exec:function(){}},merge:function(e){let t,n,r=1;for(;r<arguments.length;r++)for(n in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},splitCells:function(e,t){const n=e.replace(/\|/g,((e,t,n)=>{let r=!1,s=t;for(;--s>=0&&"\\"===n[s];)r=!r;return r?"|":" |"})).split(/ \|/);let r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n},rtrim:St,findClosingBracket:function(e,t){if(-1===e.indexOf(t[1]))return-1;const n=e.length;let r=0,s=0;for(;s<n;s++)if("\\"===e[s])s++;else if(e[s]===t[0])r++;else if(e[s]===t[1]&&(r--,r<0))return s;return-1},checkSanitizeDeprecation:function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}};const{noopTest:zt,edit:qt,merge:Ct}=At,Mt={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:zt,table:zt,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};Mt.def=qt(Mt.def).replace("label",Mt._label).replace("title",Mt._title).getRegex(),Mt.bullet=/(?:[*+-]|\d{1,9}\.)/,Mt.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,Mt.item=qt(Mt.item,"gm").replace(/bull/g,Mt.bullet).getRegex(),Mt.list=qt(Mt.list).replace(/bull/g,Mt.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Mt.def.source+")").getRegex(),Mt._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Mt._comment=/<!--(?!-?>)[\s\S]*?-->/,Mt.html=qt(Mt.html,"i").replace("comment",Mt._comment).replace("tag",Mt._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Mt.paragraph=qt(Mt._paragraph).replace("hr",Mt.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",Mt._tag).getRegex(),Mt.blockquote=qt(Mt.blockquote).replace("paragraph",Mt.paragraph).getRegex(),Mt.normal=Ct({},Mt),Mt.gfm=Ct({},Mt.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),Mt.gfm.nptable=qt(Mt.gfm.nptable).replace("hr",Mt.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",Mt._tag).getRegex(),Mt.gfm.table=qt(Mt.gfm.table).replace("hr",Mt.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",Mt._tag).getRegex(),Mt.pedantic=Ct({},Mt.normal,{html:qt("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Mt._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:zt,paragraph:qt(Mt.normal._paragraph).replace("hr",Mt.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Mt.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const Rt={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:zt,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:zt,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/,_punctuation:"!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~"};Rt.em=qt(Rt.em).replace(/punctuation/g,Rt._punctuation).getRegex(),Rt._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,Rt._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,Rt._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,Rt.autolink=qt(Rt.autolink).replace("scheme",Rt._scheme).replace("email",Rt._email).getRegex(),Rt._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,Rt.tag=qt(Rt.tag).replace("comment",Mt._comment).replace("attribute",Rt._attribute).getRegex(),Rt._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Rt._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,Rt._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,Rt.link=qt(Rt.link).replace("label",Rt._label).replace("href",Rt._href).replace("title",Rt._title).getRegex(),Rt.reflink=qt(Rt.reflink).replace("label",Rt._label).getRegex(),Rt.normal=Ct({},Rt),Rt.pedantic=Ct({},Rt.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:qt(/^!?\[(label)\]\((.*?)\)/).replace("label",Rt._label).getRegex(),reflink:qt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Rt._label).getRegex()}),Rt.gfm=Ct({},Rt.normal,{escape:qt(Rt.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),Rt.gfm.url=qt(Rt.gfm.url,"i").replace("email",Rt.gfm._extended_email).getRegex(),Rt.breaks=Ct({},Rt.gfm,{br:qt(Rt.br).replace("{2,}","*").getRegex(),text:qt(Rt.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var Lt={block:Mt,inline:Rt};const{defaults:Nt}=ft,{block:Tt}=Lt,{rtrim:Pt,splitCells:Zt,escape:Ut}=At;var Ft=class e{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Nt,this.rules=Tt.normal,this.options.pedantic?this.rules=Tt.pedantic:this.options.gfm&&(this.rules=Tt.gfm)}static get rules(){return Tt}static lex(t,n){return new e(n).lex(t)}lex(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.token(e,!0)}token(e,t){let n,r,s,o,i,l,a,c,u,f,d,h,p,g,m,b;for(e=e.replace(/^ +$/gm,"");e;)if((s=this.rules.newline.exec(e))&&(e=e.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"})),s=this.rules.code.exec(e)){const t=this.tokens[this.tokens.length-1];e=e.substring(s[0].length),t&&"paragraph"===t.type?t.text+="\n"+s[0].trimRight():(s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?s:Pt(s,"\n")}))}else if(s=this.rules.fences.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"code",lang:s[2]?s[2].trim():s[2],text:s[3]||""});else if(s=this.rules.heading.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});else if((s=this.rules.nptable.exec(e))&&(l={type:"table",header:Zt(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/\n$/,"").split("\n"):[]},l.header.length===l.align.length)){for(e=e.substring(s[0].length),d=0;d<l.align.length;d++)/^ *-+: *$/.test(l.align[d])?l.align[d]="right":/^ *:-+: *$/.test(l.align[d])?l.align[d]="center":/^ *:-+ *$/.test(l.align[d])?l.align[d]="left":l.align[d]=null;for(d=0;d<l.cells.length;d++)l.cells[d]=Zt(l.cells[d],l.header.length);this.tokens.push(l)}else if(s=this.rules.hr.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"hr"});else if(s=this.rules.blockquote.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,t),this.tokens.push({type:"blockquote_end"});else if(s=this.rules.list.exec(e)){for(e=e.substring(s[0].length),o=s[2],g=o.length>1,a={type:"list_start",ordered:g,start:g?+o:"",loose:!1},this.tokens.push(a),s=s[0].match(this.rules.item),c=[],n=!1,p=s.length,d=0;d<p;d++)l=s[d],f=l.length,l=l.replace(/^ *([*+-]|\d+\.) */,""),~l.indexOf("\n ")&&(f-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+f+"}","gm"),"")),d!==p-1&&(i=Tt.bullet.exec(s[d+1])[0],(o.length>1?1===i.length:i.length>1||this.options.smartLists&&i!==o)&&(e=s.slice(d+1).join("\n")+e,d=p-1)),r=n||/\n\n(?!\s*$)/.test(l),d!==p-1&&(n="\n"===l.charAt(l.length-1),r||(r=n)),r&&(a.loose=!0),m=/^\[[ xX]\] /.test(l),b=void 0,m&&(b=" "!==l[1],l=l.replace(/^\[[ xX]\] +/,"")),u={type:"list_item_start",task:m,checked:b,loose:r},c.push(u),this.tokens.push(u),this.token(l,!1),this.tokens.push({type:"list_item_end"});if(a.loose)for(p=c.length,d=0;d<p;d++)c[d].loose=!0;this.tokens.push({type:"list_end"})}else if(s=this.rules.html.exec(e))e=e.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===s[1]||"script"===s[1]||"style"===s[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):Ut(s[0]):s[0]});else if(t&&(s=this.rules.def.exec(e)))e=e.substring(s[0].length),s[3]&&(s[3]=s[3].substring(1,s[3].length-1)),h=s[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[h]||(this.tokens.links[h]={href:s[2],title:s[3]});else if((s=this.rules.table.exec(e))&&(l={type:"table",header:Zt(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/\n$/,"").split("\n"):[]},l.header.length===l.align.length)){for(e=e.substring(s[0].length),d=0;d<l.align.length;d++)/^ *-+: *$/.test(l.align[d])?l.align[d]="right":/^ *:-+: *$/.test(l.align[d])?l.align[d]="center":/^ *:-+ *$/.test(l.align[d])?l.align[d]="left":l.align[d]=null;for(d=0;d<l.cells.length;d++)l.cells[d]=Zt(l.cells[d].replace(/^ *\| *| *\| *$/g,""),l.header.length);this.tokens.push(l)}else if(s=this.rules.lheading.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"heading",depth:"="===s[2].charAt(0)?1:2,text:s[1]});else if(t&&(s=this.rules.paragraph.exec(e)))e=e.substring(s[0].length),this.tokens.push({type:"paragraph",text:"\n"===s[1].charAt(s[1].length-1)?s[1].slice(0,-1):s[1]});else if(s=this.rules.text.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens}};const{defaults:It}=ft,{cleanUrl:Bt,escape:Jt}=At;var Dt=class{constructor(e){this.options=e||It}code(e,t,n){const r=(t||"").match(/\S*/)[0];if(this.options.highlight){const t=this.options.highlight(e,r);null!=t&&t!==e&&(n=!0,e=t)}return r?'<pre><code class="'+this.options.langPrefix+Jt(r,!0)+'">'+(n?e:Jt(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:Jt(e,!0))+"</code></pre>"}blockquote(e){return"<blockquote>\n"+e+"</blockquote>\n"}html(e){return e}heading(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,n){const r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e){return"<li>"+e+"</li>\n"}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+"</p>\n"}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return"<tr>\n"+e+"</tr>\n"}tablecell(e,t){const n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,n){if(null===(e=Bt(this.options.sanitize,this.options.baseUrl,e)))return n;let r='<a href="'+Jt(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>",r}image(e,t,n){if(null===(e=Bt(this.options.sanitize,this.options.baseUrl,e)))return n;let r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">",r}text(e){return e}},Wt=class{constructor(){this.seen={}}slug(e){let t=e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(t)){const e=t;do{this.seen[e]++,t=e+"-"+this.seen[e]}while(this.seen.hasOwnProperty(t))}return this.seen[t]=0,t}};const{defaults:Vt}=ft,{inline:Kt}=Lt,{findClosingBracket:Ht,escape:Xt}=At;var Gt=class e{constructor(e,t){if(this.options=t||Vt,this.links=e,this.rules=Kt.normal,this.options.renderer=this.options.renderer||new Dt,this.renderer=this.options.renderer,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=Kt.pedantic:this.options.gfm&&(this.options.breaks?this.rules=Kt.breaks:this.rules=Kt.gfm)}static get rules(){return Kt}static output(t,n,r){return new e(n,r).output(t)}output(t){let n,r,s,o,i,l,a="";for(;t;)if(i=this.rules.escape.exec(t))t=t.substring(i[0].length),a+=Xt(i[1]);else if(i=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(i[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(i[0])&&(this.inRawBlock=!1),t=t.substring(i[0].length),a+=this.renderer.html(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):Xt(i[0]):i[0]);else if(i=this.rules.link.exec(t)){const r=Ht(i[2],"()");if(r>-1){const e=(0===i[0].indexOf("!")?5:4)+i[1].length+r;i[2]=i[2].substring(0,r),i[0]=i[0].substring(0,e).trim(),i[3]=""}t=t.substring(i[0].length),this.inLink=!0,s=i[2],this.options.pedantic?(n=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s),n?(s=n[1],o=n[3]):o=""):o=i[3]?i[3].slice(1,-1):"",s=s.trim().replace(/^<([\s\S]*)>$/,"$1"),a+=this.outputLink(i,{href:e.escapes(s),title:e.escapes(o)}),this.inLink=!1}else if((i=this.rules.reflink.exec(t))||(i=this.rules.nolink.exec(t))){if(t=t.substring(i[0].length),n=(i[2]||i[1]).replace(/\s+/g," "),n=this.links[n.toLowerCase()],!n||!n.href){a+=i[0].charAt(0),t=i[0].substring(1)+t;continue}this.inLink=!0,a+=this.outputLink(i,n),this.inLink=!1}else if(i=this.rules.strong.exec(t))t=t.substring(i[0].length),a+=this.renderer.strong(this.output(i[4]||i[3]||i[2]||i[1]));else if(i=this.rules.em.exec(t))t=t.substring(i[0].length),a+=this.renderer.em(this.output(i[6]||i[5]||i[4]||i[3]||i[2]||i[1]));else if(i=this.rules.code.exec(t))t=t.substring(i[0].length),a+=this.renderer.codespan(Xt(i[2].trim(),!0));else if(i=this.rules.br.exec(t))t=t.substring(i[0].length),a+=this.renderer.br();else if(i=this.rules.del.exec(t))t=t.substring(i[0].length),a+=this.renderer.del(this.output(i[1]));else if(i=this.rules.autolink.exec(t))t=t.substring(i[0].length),"@"===i[2]?(r=Xt(this.mangle(i[1])),s="mailto:"+r):(r=Xt(i[1]),s=r),a+=this.renderer.link(s,null,r);else if(this.inLink||!(i=this.rules.url.exec(t))){if(i=this.rules.text.exec(t))t=t.substring(i[0].length),this.inRawBlock?a+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):Xt(i[0]):i[0]):a+=this.renderer.text(Xt(this.smartypants(i[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else{if("@"===i[2])r=Xt(i[0]),s="mailto:"+r;else{do{l=i[0],i[0]=this.rules._backpedal.exec(i[0])[0]}while(l!==i[0]);r=Xt(i[0]),s="www."===i[1]?"http://"+r:r}t=t.substring(i[0].length),a+=this.renderer.link(s,null,r)}return a}static escapes(t){return t?t.replace(e.rules._escapes,"$1"):t}outputLink(e,t){const n=t.href,r=t.title?Xt(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,Xt(e[1]))}smartypants(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e}mangle(e){if(!this.options.mangle)return e;const t=e.length;let n,r="",s=0;for(;s<t;s++)n=e.charCodeAt(s),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}},Qt=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}};const{defaults:Yt}=ft,{merge:en,unescape:tn}=At;var nn=class e{constructor(e){this.tokens=[],this.token=null,this.options=e||Yt,this.options.renderer=this.options.renderer||new Dt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new Wt}static parse(t,n){return new e(n).parse(t)}parse(e){this.inline=new Gt(e.links,this.options),this.inlineText=new Gt(e.links,en({},this.options,{renderer:new Qt})),this.tokens=e.reverse();let t="";for(;this.next();)t+=this.tok();return t}next(){return this.token=this.tokens.pop(),this.token}peek(){return this.tokens[this.tokens.length-1]||0}parseText(){let e=this.token.text;for(;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)}tok(){let e="";switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,tn(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":{let t,n,r,s,o="";for(r="",t=0;t<this.token.header.length;t++)r+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(o+=this.renderer.tablerow(r),t=0;t<this.token.cells.length;t++){for(n=this.token.cells[t],r="",s=0;s<n.length;s++)r+=this.renderer.tablecell(this.inline.output(n[s]),{header:!1,align:this.token.align[s]});e+=this.renderer.tablerow(r)}return this.renderer.table(o,e)}case"blockquote_start":for(e="";"blockquote_end"!==this.next().type;)e+=this.tok();return this.renderer.blockquote(e);case"list_start":{e="";const t=this.token.ordered,n=this.token.start;for(;"list_end"!==this.next().type;)e+=this.tok();return this.renderer.list(e,t,n)}case"list_item_start":{e="";const t=this.token.loose,n=this.token.checked,r=this.token.task;if(this.token.task)if(t)if("text"===this.peek().type){const e=this.peek();e.text=this.renderer.checkbox(n)+" "+e.text}else this.tokens.push({type:"text",text:this.renderer.checkbox(n)});else e+=this.renderer.checkbox(n);for(;"list_item_end"!==this.next().type;)e+=t||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(e,r,n)}case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:{const e='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(e);console.log(e)}}}};const{merge:rn,checkSanitizeDeprecation:sn,escape:on}=At,{getDefaults:ln,changeDefaults:an,defaults:cn}=ft;function un(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(n||"function"==typeof t){n||(n=t,t=null),t=rn({},un.defaults,t||{}),sn(t);const r=t.highlight;let s,o,i=0;try{s=Ft.lex(e,t)}catch(e){return n(e)}o=s.length;const l=function(e){if(e)return t.highlight=r,n(e);let o;try{o=nn.parse(s,t)}catch(t){e=t}return t.highlight=r,e?n(e):n(null,o)};if(!r||r.length<3)return l();if(delete t.highlight,!o)return l();for(;i<s.length;i++)!function(e){"code"!==e.type?--o||l():r(e.text,e.lang,(function(t,n){return t?l(t):null==n||n===e.text?--o||l():(e.text=n,e.escaped=!0,void(--o||l()))}))}(s[i])}else try{return t=rn({},un.defaults,t||{}),sn(t),nn.parse(Ft.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||un.defaults).silent)return"<p>An error occurred:</p><pre>"+on(e.message+"",!0)+"</pre>";throw e}}un.options=un.setOptions=function(e){return rn(un.defaults,e),an(un.defaults),un},un.getDefaults=ln,un.defaults=cn,un.Parser=nn,un.parser=nn.parse,un.Renderer=Dt,un.TextRenderer=Qt,un.Lexer=Ft,un.lexer=Ft.lex,un.InlineLexer=Gt,un.inlineLexer=Gt.output,un.Slugger=Wt,un.parse=un;var fn=un;let dn=!1;async function hn(e){await async function(e){return new Promise((t=>setTimeout(t,e)))}(0);const t=new fn.Renderer;let n=0;const r=()=>`__special_katext_id_${n++}__`,s={};function o(e){return e.replace("&gt;",">").replace("&lt;",">").replace("&quot;","'")}function i(e){return e=(e=e.replace(/\$\$([\s\S]+?)\$\$/g,((e,t)=>{const n=r();return s[n]={type:"block",expression:o(t)},n}))).replace(/\$([^\n\s]+?)\$/g,((e,t)=>{const n=r();return s[n]={type:"inline",expression:o(t)},n}))}const l=t.listitem;t.listitem=function(e,t,n){return l(i(e),t,n)};const a=t.paragraph;t.paragraph=function(e){return a(i(e))};const c=t.tablecell;function u(e){fn.setOptions({renderer:t,highlight:e,pedantic:!1,gfm:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!0})}let f;if(t.tablecell=function(e,t){return c(i(e),t)},dn){const t=window.hljs;if(!t)throw new Error("can't load 'highlightjs' library for markdown");u(((e,n)=>{try{return n?t.highlight(e,{language:n}).value:e}catch(t){return e}})),f=fn(w(e))}else{let t=!1;if(u(((e,n)=>(n&&(t=!0),e))),f=fn(w(e)),t)return await et(["/vendor/highlight.js-11.0.1/default.min.css","/vendor/highlight.js-11.0.1/highlight.min.js"],"parallel"),dn=!0,hn(e)}return f.includes("__special_katext_id_")&&(await et(["/vendor/katex-0.11.1/katex.min.js"],"parallel"),et(["/vendor/katex-0.11.1/katex.css"],"parallel").then((e=>console.warn(`can't load styles for KaTeX, ${L(e).message}`))),f=f.replace(/(__special_katext_id_\d+__)/g,((e,t)=>{let{type:n,expression:r}=s[t];return r=r.replace(/<br\/>/g,"\\\\"),window.katex.renderToString(r,{output:"html",displayMode:"block"==n,throwOnError:!1})}))),f}function pn(e){let t,n;return{c(){t=K("div"),n=X(e[0])},m(e,r){W(e,t,r),D(t,n)},p(e,[t]){1&t&&ne(n,e[0])},i:P,o:P,d(e){e&&V(t)}}}function gn(e,t,n){let{text:r="Processing..."}=t;return e.$$set=e=>{"text"in e&&n(0,r=e.text)},[r]}class mn extends Fe{constructor(e){super(),Ue(this,e,gn,pn,B,{text:0})}}function bn(e){let t,n,r=e[0].html+"";return{c(){n=Q(),t=new ce(n)},m(e,s){t.m(r,e,s),W(e,n,s)},p(e,n){1&n&&r!==(r=e[0].html+"")&&t.p(r)},i:P,o:P,d(e){e&&V(n),e&&t.d()}}}function wn(e){let t,n;return t=new De({props:{error:e[0].error}}),{c(){Ne(t.$$.fragment)},m(e,r){Te(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.error=e[0].error),t.$set(r)},i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Ae(t.$$.fragment,e),n=!1},d(e){Pe(t,e)}}}function $n(e){let t,n;return t=new mn({}),{c(){Ne(t.$$.fragment)},m(e,r){Te(t,e,r),n=!0},p:P,i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Ae(t.$$.fragment,e),n=!1},d(e){Pe(t,e)}}}function yn(e){let t,n,r,s;const o=[$n,wn,bn],i=[];function l(e,t){return"empty"==e[0].state?0:"error"==e[0].state?1:2}return n=l(e),r=i[n]=o[n](e),{c(){t=K("div"),r.c(),te(t,"class","markdown")},m(e,r){W(e,t,r),i[n].m(t,null),s=!0},p(e,[s]){let a=n;n=l(e),n===a?i[n].p(e,s):(Oe(),Ae(i[a],1,1,(()=>{i[a]=null})),Ee(),r=i[n],r?r.p(e,s):(r=i[n]=o[n](e),r.c()),Se(r,1),r.m(t,null))},i(e){s||(Se(r),s=!0)},o(e){Ae(r),s=!1},d(e){e&&V(t),i[n].d()}}}function vn(e,t,n){let{markdown:r}=t,s={state:"empty"};return e.$$set=e=>{"markdown"in e&&n(1,r=e.markdown)},e.$$.update=()=>{if(3&e.$$.dirty&&("empty"==s.state||s.markdown!=r)){const e=r;hn(r).then((t=>{n(0,s={state:"success",markdown:e,html:t})})).catch((t=>{const r=L(t,"Unknown error while processing markdown").message;n(0,s={state:"error",markdown:e,error:r})}))}},[s,r]}class kn extends Fe{constructor(e){super(),Ue(this,e,vn,yn,B,{markdown:1})}}function xn(e){let t,n;return t=new De({props:{error:e[3]}}),{c(){Ne(t.$$.fragment)},m(e,r){Te(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.error=e[3]),t.$set(r)},i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Ae(t.$$.fragment,e),n=!1},d(e){Pe(t,e)}}}function _n(e){let t,n;return t=new kn({props:{markdown:e[2]}}),{c(){Ne(t.$$.fragment)},m(e,r){Te(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.markdown=e[2]),t.$set(r)},i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Ae(t.$$.fragment,e),n=!1},d(e){Pe(t,e)}}}function jn(e){let t,n;return t=new mn({}),{c(){Ne(t.$$.fragment)},m(e,r){Te(t,e,r),n=!0},p:P,i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Ae(t.$$.fragment,e),n=!1},d(e){Pe(t,e)}}}function On(e){let t,n,r,s={ctx:e,current:null,token:null,hasCatch:!0,pending:jn,then:_n,catch:xn,value:2,error:3,blocks:[,,,]};return ze(n=st(e[0].text),s),{c(){t=K("div"),s.block.c(),te(t,"class","TextBlockContent")},m(e,n){W(e,t,n),s.block.m(t,s.anchor=null),s.mount=()=>t,s.anchor=null,r=!0},p(t,[r]){e=t,s.ctx=e,1&r&&n!==(n=st(e[0].text))&&ze(n,s)||qe(s,e,r)},i(e){r||(Se(s.block),r=!0)},o(e){for(let e=0;e<3;e+=1){Ae(s.blocks[e])}r=!1},d(e){e&&V(t),s.block.d(),s.token=null,s=null}}}const En={match:e=>"object"==typeof e&&"text"in e||"string"==typeof e,normalize:e=>{if("string"==typeof e)return{text:e};if("object"==typeof e)return e;throw new Error("unsupported data type")}};function Sn(e,t,n){let{block:r}=t,{state:s}=t;return e.$$set=e=>{"block"in e&&n(0,r=e.block),"state"in e&&n(1,s=e.state)},[r,s]}var An=Object.freeze({__proto__:null,default:class extends Fe{constructor(e){super(),Ue(this,e,Sn,On,B,{block:0,state:1})}},definition:En});const zn=["width","height","config"];function qn(e){for(const t in e)if(zn.indexOf(t)<0)throw new Error(`invalid property '${t}'`);return sr("width",e.width,["number","undefined"]),sr("height",e.height,["number","undefined"]),e}const Cn=["linear","linear-closed","step","step-before","step-after","basis","basis-open","basis-closed","cardinal","cardinal-open","cardinal-closed","bundle","monotone"];const Mn=["point","circle","line","area","bar","rect","rule","square","text","tick","trail"];function Rn(e){if(Mn.indexOf(e)<0)throw new Error(`invalid mark '${e}', available are ${Mn.join(", ")}`);return e}const Ln=["mark","color","size","point","interpolate","opacity","thickness","vega"];function Nn(e){for(const t in e)if(Ln.indexOf(t)<0)throw new Error(`unknown mark property '${t}', available are ${Ln.join(", ")}`);const{mark:t,color:n,size:r,point:s,interpolate:o,opacity:i,thickness:l,vega:a}=e;return sr("color",n,["string","undefined"]),sr("size",r,["number","undefined"]),sr("point",s,["boolean","undefined"]),o&&function(e){if(Cn.indexOf(e)<0)throw new Error(`invalid interpolate '${e}', available are ${Cn.join(", ")}`)}(o),sr("opacity",i,["number","undefined"]),sr("thickness",l,["number","undefined"]),sr("vega",a,["object","undefined"]),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({type:Rn(t)},void 0!==n?{color:n}:{}),void 0!==r?{size:r}:{}),void 0!==s?{point:s}:{}),void 0!==o?{interpolate:o}:{}),void 0!==i?{opacity:i}:{}),void 0!==l?{thickness:l}:{}),void 0!==a?a:{})}const Tn=["nominal","ordinal","quantitative","temporal"];const Pn=["linear","pow","sqrt","symlog","log","time","utc","ordinal","band","point","bin-ordinal","quantile","quantize","threshold"];const Zn=["count","valid","missing","distinct","sum","mean","average","variance","variancep","stdev","stdevp","stderr","median","q1","q3","ci0","ci1","min","max","argmin","argmax","product"];const Un=["x","y","x2","y2","xError","yError","xError2","yError2","longitude","latitude","longitude2","latitude2","color","opacity","fillOpacity","strokeOpacity","shape","size","strokeWidth","text","tooltip","href","detail","key","order"];const Fn=["year","yearquarter","yearquartermonth","yearmonth","yearmonthdate","yearmonthdatehours","yearmonthdatehoursminutes","yearmonthdatehoursminutesseconds","quarter","quartermonth","month","monthdate","date","day","hours","hoursminutes","hoursminutesseconds","minutes","minutesseconds","seconds","secondsmilliseconds","milliseconds"];function In(e){if(Fn.indexOf(e)<0)throw new Error(`invalid time unit '${e}', available are ${Fn.join(", ")}`);return e}function Bn(e){if(sr("bin",e,["string","number","boolean","undefined"]),"string"==typeof e&&"binned"!=e)throw new Error("bin should have type of \"boolean | number | 'binned'\"");return"boolean"==typeof e||"string"==typeof e?e:{base:e,maxbins:e}}const Jn=["calculate","as"];function Dn(e){for(const t in e)if(Jn.indexOf(t)<0)throw new Error(`unknown calculate property '${t}', available are ${Jn.join(", ")}`);return e}const Wn=["filter"];function Vn(e){for(const t in e)if(Wn.indexOf(t)<0)throw new Error(`unknown filter property '${t}', available are ${Wn.join(", ")}`);return e}const Kn=["type","aggregate","legend","title","labels","time_unit","timeUnit","bin","zero","domain","range","scale","value","override_value","scheme","reverse","vega"];function Hn(e){const t=[];for(const n in e)if(Kn.indexOf(n)<0){if(Un.indexOf(n)<0)throw new Error(`unknown encoding property '${n}', available are ${Un.join(", ")}, ${Kn.join(", ")}`);t.push(n)}if(0==t.length)throw new Error(`encoding channel not specified, please specify one of ${Un.join(", ")}`);if(t.length>1)throw new Error(`only one channel allowed in the same encoding, leave only one of ${t.join(", ")}`);e.type&&function(e){if(Tn.indexOf(e)<0)throw new Error(`invalid field type '${e}', available are ${Tn.join(", ")}`)}(e.type),e.aggregate&&function(e){if(Zn.indexOf(e)<0)throw new Error(`invalid aggregate '${e}', available are ${Zn.join(", ")}`)}(e.aggregate),sr("legend",e.legend,["string","boolean","undefined"]),sr("title",e.title,["string","boolean","undefined"]),sr("labels",e.labels,["boolean","undefined"]),e.time_unit&&In(e.time_unit),e.timeUnit&&In(e.timeUnit),e.bin&&Bn(e.bin),sr("zero",e.zero,["boolean","undefined"]),e.scale&&function(e){if(Pn.indexOf(e)<0)throw new Error(`invalid scale type '${e}', available are ${Pn.join(", ")}`)}(e.scale),e.domain&&function(e){e.map((e=>(sr("scale domain",e,["number","string","boolean"]),e)))}(e.domain),e.range&&function(e){"string"==typeof e?sr("scale range",e,["string"]):e.map((e=>(sr("scale domain",e,["number","string"]),e)))}(e.range),sr("scheme",e.scheme,["string","undefined"]),sr("reverse",e.reverse,["boolean","undefined"]),sr("vega",e.vega,["object","undefined"]);const{type:n,title:r,labels:s,aggregate:o,legend:i,timeUnit:l,time_unit:a,bin:c,zero:u,domain:f,range:d,scale:h,value:p,scheme:g,reverse:m,vega:b,override_value:w}=e,$=Un.find((t=>t in e));if(!$)throw new Error(`Channel not found in ${JSON.stringify(e)}!`);const y=e[$],v=Object.assign(Object.assign(Object.assign({},void 0!==b&&"axis"in b?b.axis:{}),r&&"string"==typeof r?{title:r}:r?{}:{title:null}),void 0!==s?{labels:s}:{}),k=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},void 0!==b&&"scale"in b?b.scale:{}),void 0!==h?{type:h}:{}),void 0!==f?{nice:!1}:{}),void 0!==u?{zero:u}:{}),void 0!==f?{domain:f}:{}),void 0!==d?{range:d}:{}),void 0!==g?{scheme:g}:{}),void 0!==m?{reverse:m}:{});let x,_=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},void 0!==b?b:{}),""!==y?{field:y}:{}),{type:n||"quantitative"}),void 0!==o?{aggregate:o}:{}),void 0!==i?{legend:i}:{legend:!1}),void 0!==l?{timeUnit:l}:{}),void 0!==a?{timeUnit:a}:{}),Object.keys(v).length>0?{axis:v}:{}),Object.keys(k).length>0?{scale:k}:{}),void 0!==c?{bin:Bn(c)}:{});if(p){const e=function(e,t,n){const r=e=>{if(void 0===e)throw new Error("encoding value shouldn't be undefined");return sr("encoding value",e,["number","string","boolean"]),e};if(Array.isArray(e)){if("condition"in n)throw new Error("Conditional value can't be used with condition!");if(2==e.length){const[t,s]=e;return[Object.assign(Object.assign({},n),{condition:{test:t,value:r(s)}}),void 0]}if(3==e.length){const[t,s,o]=e;return[Object.assign(Object.assign({},n),{value:r(o),condition:{test:t,value:r(s)}}),void 0]}throw new Error("encoding value should be a simple value or array with 2 ['datum.value > 0', 'green'] or 3 elements ['datum.value > 0', 1, -1]")}if(Xn.indexOf(t)>=0){if(""!=n.field&&void 0!==n.field&&null!==n.field)throw new Error(`value on ${Xn.join(", ")} channels cannot be used with 'field'`);const t=[{explicit_value:r(e)}];return[Object.assign(Object.assign({},n),{field:"explicit_value"}),t]}return[Object.assign(Object.assign({},n),{value:r(e)}),void 0]}(p,$,_);_=e[0],x=e[1]}return[$,_,x]}const Xn=["x","y"];const Gn=["concat"];function Qn(e){for(const t in e)if(Gn.indexOf(t)<0)throw new Error(`unknown concat property '${t}', available are ${Gn.join(", ")}`);return e}function Yn(e){const t=[];let n,r={},s=[],o=[],i={};const l=[],a=[];for(const c of e)if("string"==typeof c)t.push(Rn(c));else if("mark"in c)t.push(Nn(c));else if(Array.isArray(c))o=[...o,er(c)];else if("calculate"in c)s.push(Dn(c));else if("filter"in c)s.push(Vn(c));else if("facet"in c||"row"in c||"column"in c)l.push(c);else if("concat"in c)a.push(Qn(c));else if("height"in c||"width"in c||"config"in c)i=Object.assign(Object.assign({},i),qn(c));else if(Un.some((e=>e in c))){const[e,t,n]=Hn(c);if(e in t)throw new Error(`Can't redefine channel ${e}!`);if(void 0!==n)throw new Error(`Explicit value for '${e}' allowed only inside of a layer`);r=Object.assign(Object.assign({},r),{[e]:t})}else{if(!("vega"in c))throw new Error(`unknown plot part ${JSON.stringify(c)}`);n=c.vega}if(t.length>1)throw new Error(`Multiple marks found ${t.join(", ")}`);const c=Object.assign(Object.assign(Object.assign({},s.length>0?{transform:s}:{}),i),n||{});function u(){return Object.assign(Object.assign(Object.assign({},t.length>0?{mark:t[0]}:{}),Object.keys(r).length>0?{encoding:r}:{}),o.length>0?{layer:o}:{})}if(l.length>0){if(a.length>0)throw new Error("concat can't be used with facet");return function(e,t,n){let r;for(const t of e)"facet"in t&&(r=t);if(r){if(e.length>1)throw new Error("Can't other facets with 'facet' keyword");return Object.assign(Object.assign(Object.assign({facet:{field:r.facet,type:r.type||"ordinal",header:{title:null}}},void 0!==r.columns?{columns:r.columns}:{}),{spec:t}),n)}{if(e.filter((e=>"row"in e)).length>1)throw new Error("Facet can't have more than one row");if(e.filter((e=>"column"in e)).length>1)throw new Error("Facet can't have more than one column");let r,s;for(const t of e)"row"in t&&(r=t),"column"in t&&(s=t);return Object.assign({facet:Object.assign(Object.assign({},r?{row:{field:r.row,type:r.type||"ordinal",header:{title:null}}}:{}),s?{column:{field:s.column,type:s.type||"ordinal",header:{title:null}}}:{}),spec:t},n)}}(l,u(),c)}if(a.length>0){if(a.length>1)throw new Error("there could be only one concat");if(l.length>0)throw new Error("concat can't be used with facet");if(t.length>0)throw new Error("top level mark can't be used with concat");if(Object.keys(r).length>0)throw new Error("top level encoding can't be used with concat");if(0==o.length)throw new Error("concat requires at least one layer");return Object.assign({["vertical"==a[0].concat?"vconcat":"hconcat"]:o},c)}return Object.assign(Object.assign({},u()),c)}function er(e){const t=[],n=[];let r,s,o={},i={};for(const l of e)if("string"==typeof l)t.push(Rn(l));else if("mark"in l)t.push(Nn(l));else if("calculate"in l)n.push(Dn(l));else if("filter"in l)n.push(Vn(l));else if("height"in l||"width"in l)i=Object.assign(Object.assign({},i),qn(l));else if(Un.some((e=>e in l))){const[e,t,n]=Hn(l);if(e in t)throw new Error(`Can't redefine channel ${e}!`);s=n,o=Object.assign(Object.assign({},o),{[e]:t})}else{if(!("vega"in l))throw new Error(`unknown plot layer part ${JSON.stringify(l)}`);r=l.vega}if(t.length>1)throw new Error(`Multiple marks found ${t.join(", ")}`);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n.length>0?{transform:n}:{}),t.length>0?{mark:t[0]}:{}),Object.keys(o).length>0?{encoding:o}:{}),i),s?{data:{values:s}}:{}),r||{})}function tr(e,t){if(e instanceof Array)return 0==e.length?[]:Array.isArray(e[0])?function(e,t){return e.map((e=>{const n={};for(let r=0;r<e.length;r++){if(!(r<t.length))throw new Error("there are more values in row than columns");n[t[r]]=e[r]}return n}))}(e,t||nr).map(rr):e.map(rr);{if(!(e instanceof Object))throw new Error("Arrays data expected to be an Object");const t=Object.keys(e);if(0==t.length)throw new Error("Empty arrays data!");const n=t[0],r=e[n].length;for(const s of t)if(e[s].length!=r)throw new Error(`Arrays data has arrays of different length ${s} - ${e[s].length} and ${n} - ${r}`);const s=[];for(let n=0;n<r;n++){const r={};for(const s of t){const t=e[s][n];null!=t&&(r[s]=t)}s.push(r)}return s}}const nr="abcdefghijklmnopqrstuvwxyz".split("");function rr(e){const t={};for(let n in e){const r=e[n];null!=r&&(t[n]=r)}return t}function sr(e,t,n){if(n.indexOf(typeof t)<0)throw new Error(`invalid type for '${e}' allowed types ${n.join(", ")}`)}function or(e){e.finalize()}async function ir({chart:e,data:t,vega_options:n,is_narrow:r,suggested_width_px:s,vega_view:o,container_el:i}){if(await et(["/vendor/vega/vega-5.9.1.js","/vendor/vega/vega-lite-4.0.2.js","/vendor/vega/vega-embed-6.2.1.js"],"serial"),o&&or(o),!i)return;function l(e){return void 0!==s&&r?function(e,t,n){return e.width&&e.width<t||(e=Object.assign(Object.assign({},e),{width:t})),e.height&&e.height<n||(e=Object.assign(Object.assign({},e),{height:n})),e}(e,s,N.height_in_narrow_width_mode):e}let a=l("vega_spec"in e?e.vega_spec:Yn(e));t&&(a=Object.assign(Object.assign({},a),{data:{values:tr(t)}})),n=n||{};return(await window.vegaEmbed(i,Object.assign(Object.assign({},function({suggested_width_px:e}){return{autosize:{type:"fit",contains:"padding"},width:e}}({suggested_width_px:s})),a),Object.assign(Object.assign({},{}),n))).view}function lr(e){let t,n;return t=new De({props:{error:e[2].error}}),{c(){Ne(t.$$.fragment)},m(e,r){Te(t,e,r),n=!0},p(e,n){const r={};4&n&&(r.error=e[2].error),t.$set(r)},i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Ae(t.$$.fragment,e),n=!1},d(e){Pe(t,e)}}}function ar(e){let t,n;return t=new mn({}),{c(){Ne(t.$$.fragment)},m(e,r){Te(t,e,r),n=!0},p:P,i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Ae(t.$$.fragment,e),n=!1},d(e){Pe(t,e)}}}function cr(e){let t,n,r,s,o,i,l,a,c,u,f;const d=[ar,lr],h=[];function p(e,t){return"empty"==e[2].state?0:"error"==e[2].state?1:-1}return~(n=p(e))&&(r=h[n]=d[n](e)),{c(){t=K("div"),r&&r.c(),s=G(),o=K("div"),i=K("div"),a=G(),c=K("div"),se(i,"padding-right","0"),te(i,"class",l="success"==e[2].state?"":"invisible"),se(c,"height","0"),se(c,"width","100%"),we((()=>e[9].call(c))),te(t,"class","VegaChart")},m(r,l){W(r,t,l),~n&&h[n].m(t,null),D(t,s),D(t,o),D(o,i),e[8](i),D(t,a),D(t,c),u=function(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");const n=K("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=ae();let s;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=Y(window,"message",(e=>{e.source===n.contentWindow&&t()}))):(n.src="about:blank",n.onload=()=>{s=Y(n.contentWindow,"resize",t)}),D(e,n),()=>{(r||s&&n.contentWindow)&&s(),V(n)}}(c,e[9].bind(c)),f=!0},p(e,[o]){let a=n;n=p(e),n===a?~n&&h[n].p(e,o):(r&&(Oe(),Ae(h[a],1,1,(()=>{h[a]=null})),Ee()),~n?(r=h[n],r?r.p(e,o):(r=h[n]=d[n](e),r.c()),Se(r,1),r.m(t,s)):r=null),(!f||4&o&&l!==(l="success"==e[2].state?"":"invisible"))&&te(i,"class",l)},i(e){f||(Se(r),f=!0)},o(e){Ae(r),f=!1},d(r){r&&V(t),~n&&h[n].d(),e[8](null),u()}}}function ur(e,t,n){let{chart:r}=t,{data:s}=t,{vega_options:o}=t,{is_narrow:i=!1}=t,l={state:"empty"};const a=new Ge(void 0);let c,u,f;const d=R((e=>{e!=f&&n(7,f=e)}),100,!0);return function(e){fe().$$.on_destroy.push(e)}((()=>{a.get()&&or(a.get())})),e.$$set=e=>{"chart"in e&&n(3,r=e.chart),"data"in e&&n(4,s=e.data),"vega_options"in e&&n(5,o=e.vega_options),"is_narrow"in e&&n(6,i=e.is_narrow)},e.$$.update=()=>{2&e.$$.dirty&&d(u),249&e.$$.dirty&&null!=f&&null!=c&&ir({chart:r,data:s,vega_options:o,is_narrow:i,suggested_width_px:f,vega_view:a.get(),container_el:c}).then((e=>{a.set(e),n(2,l={state:"success"})})).catch((e=>{const t=L(e,"Unknown error while processing vega lite").message;n(2,l={state:"error",error:t})}))},[c,u,l,r,s,o,i,f,function(e){he[e?"unshift":"push"]((()=>{c=e,n(0,c)}))},function(){u=this.clientWidth,n(1,u)}]}class fr extends Fe{constructor(e){super(),Ue(this,e,ur,cr,B,{chart:3,data:4,vega_options:5,is_narrow:6})}}function dr(e){let t,n;return t=new De({props:{error:e[4]}}),{c(){Ne(t.$$.fragment)},m(e,r){Te(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.error=e[4]),t.$set(r)},i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Ae(t.$$.fragment,e),n=!1},d(e){Pe(t,e)}}}function hr(e){let t,n;return t=new fr({props:{chart:e[1].chart,data:e[3],vega_options:e[1].vega_options,is_narrow:e[0].is_narrow}}),{c(){Ne(t.$$.fragment)},m(e,r){Te(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.chart=e[1].chart),2&n&&(r.data=e[3]),2&n&&(r.vega_options=e[1].vega_options),1&n&&(r.is_narrow=e[0].is_narrow),t.$set(r)},i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Ae(t.$$.fragment,e),n=!1},d(e){Pe(t,e)}}}function pr(e){let t,n;return t=new mn({}),{c(){Ne(t.$$.fragment)},m(e,r){Te(t,e,r),n=!0},p:P,i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Ae(t.$$.fragment,e),n=!1},d(e){Pe(t,e)}}}function gr(e){let t,n,r,s={ctx:e,current:null,token:null,hasCatch:!0,pending:pr,then:hr,catch:dr,value:3,error:4,blocks:[,,,]};return ze(n=st(e[1].data),s),{c(){t=K("div"),s.block.c(),te(t,"class","ChartBlockContent")},m(e,n){W(e,t,n),s.block.m(t,s.anchor=null),s.mount=()=>t,s.anchor=null,r=!0},p(t,[r]){e=t,s.ctx=e,2&r&&n!==(n=st(e[1].data))&&ze(n,s)||qe(s,e,r)},i(e){r||(Se(s.block),r=!0)},o(e){for(let e=0;e<3;e+=1){Ae(s.blocks[e])}r=!1},d(e){e&&V(t),s.block.d(),s.token=null,s=null}}}function mr(e,t,n){let{block:r}=t,{state:s}=t,o=r;return e.$$set=e=>{"block"in e&&n(2,r=e.block),"state"in e&&n(0,s=e.state)},e.$$.update=()=>{6&e.$$.dirty&&o.hash!=r.hash&&n(1,o=r)},[s,o,r]}var br=Object.freeze({__proto__:null,default:class extends Fe{constructor(e){super(),Ue(this,e,mr,gr,B,{block:2,state:0})}},definition:{match:e=>"object"==typeof e&&"data"in e&&"chart"in e}});function wr(e){switch(e){case"left":return"text-left";case"center":return"text-center";case"right":return"text-right"}}function $r(e){let t,n;return{c(){t=K("div"),n=X(e[0]),te(t,"class",e[1])},m(e,r){W(e,t,r),D(t,n)},p(e,[t]){1&t&&ne(n,e[0])},i:P,o:P,d(e){e&&V(t)}}}function yr(e,t,n){let r,{options:s}=t,{value:o}=t;const i=wr(s.align||"left")+(s.small?" text-xs":"");return e.$$set=e=>{"options"in e&&n(2,s=e.options),"value"in e&&n(3,o=e.value)},e.$$.update=()=>{8&e.$$.dirty&&n(0,r=null==o?"":o)},[r,i,s,o]}var vr=Object.freeze({__proto__:null,default:class extends Fe{constructor(e){super(),Ue(this,e,yr,$r,B,{options:2,value:3})}},compatibleTypes:["number","boolean","string"],align:function(e,t){return e.align||"left"}});function kr(e){let t,n,r=(e[0]?e[2]:e[3])+"";return{c(){t=K("div"),n=X(r),te(t,"class",e[1])},m(e,r){W(e,t,r),D(t,n)},p(e,[t]){1&t&&r!==(r=(e[0]?e[2]:e[3])+"")&&ne(n,r)},i:P,o:P,d(e){e&&V(t)}}}function xr(e,t,n){let{options:r}=t,{value:s}=t;const o=wr(r.align||"center"),i=r.true||"✓",l=r.false||"";return e.$$set=e=>{"options"in e&&n(4,r=e.options),"value"in e&&n(0,s=e.value)},[s,o,i,l,r]}var _r=Object.freeze({__proto__:null,default:class extends Fe{constructor(e){super(),Ue(this,e,xr,kr,B,{options:4,value:0})}},compatibleTypes:["boolean"],align:function(e,t){return e.align||"center"}});function jr(e){let t,n;return{c(){t=K("div"),n=X(e[0]),te(t,"class",e[1])},m(e,r){W(e,t,r),D(t,n)},p(e,[t]){1&t&&ne(n,e[0])},i:P,o:P,d(e){e&&V(t)}}}function Or(e,t,n){let r,{options:s}=t,{value:o}=t;const i="round"in s?s.round:2,l=wr(s.align||"right")+(s.small?" text-xs":"");return e.$$set=e=>{"options"in e&&n(2,s=e.options),"value"in e&&n(3,o=e.value)},e.$$.update=()=>{8&e.$$.dirty&&n(0,r=void 0===o?"":""+(void 0!==i?o.toFixed(i):o))},[r,l,s,o]}var Er=Object.freeze({__proto__:null,default:class extends Fe{constructor(e){super(),Ue(this,e,Or,jr,B,{options:2,value:3})}},compatibleTypes:["number"],align:function(e,t){return e.align||"right"}});function Sr(e,t,n){const r=e.slice();return r[7]=t[n],r}function Ar(e,t,n){const r=e.slice();return r[7]=t[n],r}function zr(e,t,n){const r=e.slice();return r[7]=t[n],r}function qr(e){let t,n,r;return{c(){t=H("svg"),n=H("title"),r=X(e[4]),te(t,"class","plot-line-format text-center")},m(e,s){W(e,t,s),D(t,n),D(n,r)},p(e,t){16&t&&ne(r,e[4])},d(e){e&&V(t)}}}function Cr(e){let t;function n(e,t){return e[3]<=0?Lr:e[2]>=0?Rr:Mr}let r=n(e),s=r(e);return{c(){s.c(),t=Q()},m(e,n){s.m(e,n),W(e,t,n)},p(e,o){r===(r=n(e))&&s?s.p(e,o):(s.d(1),s=r(e),s&&(s.c(),s.m(t.parentNode,t)))},d(e){s.d(e),e&&V(t)}}}function Mr(e){let t,n,r,s,o=[],i=new Map,l=e[1].nticks;const a=e=>e[7];for(let t=0;t<l.length;t+=1){let n=Sr(e,l,t),r=a(n);i.set(r,o[t]=Pr(r,n))}function c(e,t){return e[0]>0?Ur:Zr}let u=c(e),f=u(e);return{c(){t=H("svg"),n=H("title"),r=X(e[4]);for(let e=0;e<o.length;e+=1)o[e].c();s=H("line"),f.c(),te(s,"x1","50%"),te(s,"y1","5%"),te(s,"x2","50%"),te(s,"y2","95%"),te(s,"stroke",Wr),te(s,"stroke-width","1"),te(t,"class","plot-line-format text-center")},m(e,i){W(e,t,i),D(t,n),D(n,r);for(let e=0;e<o.length;e+=1)o[e].m(t,null);D(t,s),f.m(t,null)},p(e,n){16&n&&ne(r,e[4]),2&n&&(l=e[1].nticks,o=Re(o,n,a,1,e,l,i,t,Ce,Pr,s,Sr)),u===(u=c(e))&&f?f.p(e,n):(f.d(1),f=u(e),f&&(f.c(),f.m(t,null)))},d(e){e&&V(t);for(let e=0;e<o.length;e+=1)o[e].d();f.d()}}}function Rr(e){let t,n,r,s,o,i=[],l=new Map,a=e[1].nticks;const c=e=>e[7];for(let t=0;t<a.length;t+=1){let n=Ar(e,a,t),r=c(n);l.set(r,i[t]=Fr(r,n))}return{c(){t=H("svg"),n=H("title"),r=X(e[4]);for(let e=0;e<i.length;e+=1)i[e].c();s=H("rect"),te(s,"x","0%"),te(s,"y","25%"),te(s,"width",o=100*e[0]+"%"),te(s,"height","50%"),te(s,"fill",Dr),te(t,"class","plot-line-format text-center")},m(e,o){W(e,t,o),D(t,n),D(n,r);for(let e=0;e<i.length;e+=1)i[e].m(t,null);D(t,s)},p(e,n){16&n&&ne(r,e[4]),2&n&&(a=e[1].nticks,i=Re(i,n,c,1,e,a,l,t,Ce,Fr,s,Ar)),1&n&&o!==(o=100*e[0]+"%")&&te(s,"width",o)},d(e){e&&V(t);for(let e=0;e<i.length;e+=1)i[e].d()}}}function Lr(e){let t,n,r,s,o,i,l=[],a=new Map,c=e[1].nticks;const u=e=>e[7];for(let t=0;t<c.length;t+=1){let n=zr(e,c,t),r=u(n);a.set(r,l[t]=Ir(r,n))}return{c(){t=H("svg"),n=H("title"),r=X(e[4]);for(let e=0;e<l.length;e+=1)l[e].c();s=H("rect"),te(s,"x",o=100- -100*e[0]+"%"),te(s,"y","25%"),te(s,"width",i=-100*e[0]+"%"),te(s,"height","50%"),te(s,"fill",Dr),te(t,"class","plot-line-format text-center")},m(e,o){W(e,t,o),D(t,n),D(n,r);for(let e=0;e<l.length;e+=1)l[e].m(t,null);D(t,s)},p(e,n){16&n&&ne(r,e[4]),2&n&&(c=e[1].nticks,l=Re(l,n,u,1,e,c,a,t,Ce,Ir,s,zr)),1&n&&o!==(o=100- -100*e[0]+"%")&&te(s,"x",o),1&n&&i!==(i=-100*e[0]+"%")&&te(s,"width",i)},d(e){e&&V(t);for(let e=0;e<l.length;e+=1)l[e].d()}}}function Nr(e){let t,n,r;return{c(){t=H("line"),te(t,"x1",n=50- -50*e[7]+"%"),te(t,"y1","5%"),te(t,"x2",r=50- -50*e[7]+"%"),te(t,"y2","25%"),te(t,"stroke",Wr),te(t,"stroke-width","1")},m(e,n){W(e,t,n)},p(e,s){2&s&&n!==(n=50- -50*e[7]+"%")&&te(t,"x1",n),2&s&&r!==(r=50- -50*e[7]+"%")&&te(t,"x2",r)},d(e){e&&V(t)}}}function Tr(e){let t,n,r;return{c(){t=H("line"),te(t,"x1",n=50+50*e[7]+"%"),te(t,"y1","5%"),te(t,"x2",r=50+50*e[7]+"%"),te(t,"y2","25%"),te(t,"stroke",Wr),te(t,"stroke-width","1")},m(e,n){W(e,t,n)},p(e,s){2&s&&n!==(n=50+50*e[7]+"%")&&te(t,"x1",n),2&s&&r!==(r=50+50*e[7]+"%")&&te(t,"x2",r)},d(e){e&&V(t)}}}function Pr(e,t){let n,r;function s(e,t){return e[7]>0?Tr:Nr}let o=s(t),i=o(t);return{key:e,first:null,c(){n=Q(),i.c(),r=Q(),this.first=n},m(e,t){W(e,n,t),i.m(e,t),W(e,r,t)},p(e,n){o===(o=s(t=e))&&i?i.p(t,n):(i.d(1),i=o(t),i&&(i.c(),i.m(r.parentNode,r)))},d(e){e&&V(n),i.d(e),e&&V(r)}}}function Zr(e){let t,n,r;return{c(){t=H("rect"),te(t,"x",n=50- -50*e[0]+"%"),te(t,"y","25%"),te(t,"width",r=-50*e[0]+"%"),te(t,"height","50%"),te(t,"fill",Dr)},m(e,n){W(e,t,n)},p(e,s){1&s&&n!==(n=50- -50*e[0]+"%")&&te(t,"x",n),1&s&&r!==(r=-50*e[0]+"%")&&te(t,"width",r)},d(e){e&&V(t)}}}function Ur(e){let t,n;return{c(){t=H("rect"),te(t,"x","50%"),te(t,"y","25%"),te(t,"width",n=50*e[0]+"%"),te(t,"height","50%"),te(t,"fill",Dr)},m(e,n){W(e,t,n)},p(e,r){1&r&&n!==(n=50*e[0]+"%")&&te(t,"width",n)},d(e){e&&V(t)}}}function Fr(e,t){let n,r,s;return{key:e,first:null,c(){n=H("line"),te(n,"x1",r=100*t[7]+"%"),te(n,"y1","5%"),te(n,"x2",s=100*t[7]+"%"),te(n,"y2","25%"),te(n,"stroke",Wr),te(n,"stroke-width","1"),this.first=n},m(e,t){W(e,n,t)},p(e,o){t=e,2&o&&r!==(r=100*t[7]+"%")&&te(n,"x1",r),2&o&&s!==(s=100*t[7]+"%")&&te(n,"x2",s)},d(e){e&&V(n)}}}function Ir(e,t){let n,r,s;return{key:e,first:null,c(){n=H("line"),te(n,"x1",r=100- -100*t[7]+"%"),te(n,"y1","5%"),te(n,"x2",s=100- -100*t[7]+"%"),te(n,"y2","25%"),te(n,"stroke",Wr),te(n,"stroke-width","1"),this.first=n},m(e,t){W(e,n,t)},p(e,o){t=e,2&o&&r!==(r=100- -100*t[7]+"%")&&te(n,"x1",r),2&o&&s!==(s=100- -100*t[7]+"%")&&te(n,"x2",s)},d(e){e&&V(n)}}}function Br(e){let t;function n(e,t){return e[1]&&null!=e[0]?Cr:qr}let r=n(e),s=r(e);return{c(){s.c(),t=Q()},m(e,n){s.m(e,n),W(e,t,n)},p(e,[o]){r===(r=n(e))&&s?s.p(e,o):(s.d(1),s=r(e),s&&(s.c(),s.m(t.parentNode,t)))},i:P,o:P,d(e){s.d(e),e&&V(t)}}}const Jr=(e,t,n,r)=>{const s=[],o=r.scale||"linear";if(r.log_unit){function i(e){return e>=0&&e<1?1:e}"log"!=r.scale&&s.push(`column ${e} 'line.log_unit' could be used with log scale only`),n=n.map((e=>void 0===e?void 0:i(e))),t=[i(t[0]),i(t[1])]}let l,a,c=[];if("log"==o){if(t[0]<=0)return s.push(`column ${e}, 'line.domain' can't be negative for log scale`),{column:n.map((e=>{})),warnings:s,stats:void 0};let o=Math.max(...t.map((e=>Math.log(Math.abs(e)))));c=n.map((t=>void 0===t?void 0:t>0?Math.log(t)/o:void s.push(`column ${e}, values can't be negative for log scale`))),l=S(r.ticks||[],(t=>t>0?Math.log(t)/o:(s.push(`column ${e}, ticks can't be negative for log scale`),!1))),a=[Math.log(t[0])/o,Math.log(t[1])/o]}else{if("linear"!=o)throw new Error(`unknown scale ${o}`);{let e=Math.max(...t.map((e=>Math.abs(e))));0==e&&(e=1),c=n.map((t=>void 0===t?void 0:t/e)),l=(r.ticks||[]).map((t=>t/e)),a=[t[0]/e,t[1]/e]}}return{column:c,warnings:s,stats:{domain:t,ndomain:a,nticks:l}}},Dr="#111827",Wr="#111827";function Vr(e,t,n){let r,s,o,{options:i}=t,{value:l}=t,{converted:a}=t,{stats:c}=t;return e.$$set=e=>{"options"in e&&n(5,i=e.options),"value"in e&&n(6,l=e.value),"converted"in e&&n(0,a=e.converted),"stats"in e&&n(1,c=e.stats)},e.$$.update=()=>{2&e.$$.dirty&&n(2,[r,s]=c?c.ndomain:[0,0],r,(n(3,s),n(1,c))),99&e.$$.dirty&&n(4,o=[void 0!==a?`value: ${l}`:"missing",((null==c?void 0:c.nticks)||[]).length>0?`, ticks: [${(i.ticks||[]).join(", ")}]`:"",c?`domain: [${c.domain[0]}, ${c.domain[1]}]`:"",`scale: ${i.scale||"linear"}`].join(", "))},[a,c,r,s,o,i,l]}var Kr=Object.freeze({__proto__:null,default:class extends Fe{constructor(e){super(),Ue(this,e,Vr,Br,B,{options:5,value:6,converted:0,stats:1})}},compatibleTypes:["number"],extraValues:({ticks:e})=>e||[],align:function(e,t){if(e.align)return e.align;if(t){const[e,n]=t.ndomain;return n<=0?"right":e>=0?"left":"center"}return"center"},convertColumn:Jr});function Hr(e){let t,n;return{c(){t=K("div"),n=X(e[0]),te(t,"class",e[1])},m(e,r){W(e,t,r),D(t,n)},p(e,[t]){1&t&&ne(n,e[0])},i:P,o:P,d(e){e&&V(t)}}}function Xr(e,t,n){let r,{options:s}=t,{value:o}=t;const i=wr(s.align||"left")+(s.small?" text-xs":"");return e.$$set=e=>{"options"in e&&n(2,s=e.options),"value"in e&&n(3,o=e.value)},e.$$.update=()=>{8&e.$$.dirty&&n(0,r=null==o?"":""+o)},[r,i,s,o]}const Gr={string:vr,boolean:_r,number:Er,unknown:Object.freeze({__proto__:null,default:class extends Fe{constructor(e){super(),Ue(this,e,Xr,Hr,B,{options:2,value:3})}},compatibleTypes:[],align:function(e,t){return e.align||"left"}}),line:Kr};function Qr(e){return e in Gr?{is_error:!1,value:Gr[e]}:{is_error:!0,message:`no '${e}' format`}}const Yr={string:function(e,t){return e.localeCompare(t)},number:function(e,t){return e-t},boolean:function(e,t){return e==t?0:e?1:-1},unknown:function(e,t){return(""+e).localeCompare(""+t)}};function es(e,[t,n]){const r="desc"==n,s=A(y(e,(({id:e})=>e==t))).type;if(!(s in Yr))throw new Error(`no comparator for '${s}' type, please register one`);const o=Yr[s];return r?function(e,n){const r=n[t],s=e[t];return void 0===r?void 0===s?0:-1:void 0===s?1:o(r,s)}:function(e,n){const r=e[t],s=n[t];return void 0===r?void 0===s?0:-1:void 0===s?1:o(r,s)}}function ts(e,t,n){if(n.length>3)throw new Error("sort not supported for more than 3 columns");const[r,s,o]=n;if(null==r&&d(null==s),null==s&&d(null==o),0==t.length||null==r)return t;let i,l=es(e,r),a=s?es(e,s):void 0,c=o?es(e,o):void 0;i=c?function(e,t){let n=l(e,t);return 0!=n?n:(n=a(e,t),0!=n?n:c(e,t))}:a?function(e,t){let n=l(e,t);return 0!=n?n:a(e,t)}:l;const u=[...t];return u.sort(i),u}function ns(e,t,n){const r=[...t];for(const e of r)e._weights={},e._nweights={};for(const t in n){const{type:n,min_max:s}=A(y(e,(({id:e})=>e==t)));let[o,i]=O(r,(e=>void 0!==e[t]));if(0==o.length){for(const e of r)e._weights[t]=0,e._nweights[t]=0;continue}if("number"==n){const e=typeof r[0][t];if("number"!=e)throw new Error(`wrong type for '${t}' column, wsort expects number but found '${e}'`);for(const e of o)e._weights[t]=e[t]}else{if(!(n in Yr))throw new Error(`no comparator for '${n}' type, please register one`);const e=Yr[n];o.sort(((n,r)=>e(n[t],r[t])));let r,s=0;for(let e=0;e<o.length;e++){const n=o[e];n[t]==r?s+=1:r=n[t],n._weights[t]=e-s}}{let e,r;if(s){if("number"!=n)throw new Error("can't use min_max for non number type");e=s[0],r=s[1]}else{const n=o.map((e=>e._weights[t]));e=Math.min(...n),r=Math.max(...n)}const i=(r+e)/2;let l=(r-e)/2;d(l>=0),l=0==l?1:l;for(const e of o){let n=(e._weights[t]-i)/l;e._nweights[t]=n}}let l=x(o.map((e=>e._nweights[t])));for(const e of i)e._nweights[t]=l}for(const e of r){let t=0;for(const r in n)t+=n[r]*e._nweights[r];e._w=t}return r.sort(((e,t)=>e._w-t._w)).reverse(),r}function rs(e){return E(function(e,t){const n=new Set,r=t||(e=>e);return e.filter((e=>{const t=r(e);return!n.has(t)&&(n.add(t),!0)}))}(e.map((e=>"string"==typeof e?{type:"warn",message:e}:e)),(({message:e})=>e)),(({type:e,message:t})=>`${e} ${t}`))}function ss(e,t){if(!t)return;const n={};for(const r of e){const e=t[r.id];if(!e)continue;const s=ls(r,""+e[1]);void 0!==s&&(n[r.id]=[is(e[0]),s])}return n}f("sortTable",(()=>{const e=[{id:"name",type:"string"},{id:"age",type:"number"}],t=[{name:"Artanis",age:200},{name:"Sarah",age:30},{name:"Jim",age:30},{name:"Amon",age:void 0}];let n=n=>ts(e,t,n).map((({name:e})=>e));d.equal(n([["name","asc"]]),["Amon","Artanis","Jim","Sarah"]),d.equal(n([["age","asc"]])[0],"Amon"),d.equal(n([["age","asc"],["name","asc"]]),["Amon","Jim","Sarah","Artanis"])})),f("wsortTable",(()=>{const e=(e,t,n)=>ns(e,t,n).map((({id:e})=>e));d.equal(e([{id:"a",type:"number"},{id:"b",type:"number"}],[{id:"a",a:0,b:3},{id:"b",a:1,b:3},{id:"c",a:2,b:void 0},{id:"d",a:-2,b:200}],{a:1,b:-1}),["c","b","a","d"]);d.equal(e([{id:"a",type:"number"}],[{id:"a",a:0},{id:"b",a:1},{id:"c",a:void 0}],{a:1}),["b","c","a"]);{const e=ns([{id:"a",type:"string"}],[{id:"a",a:"a"},{id:"b",a:"a"},{id:"c",a:"b"}],{a:1});d.equal(e[0].id,"c"),d.equal(e.map((e=>e._weights.a)),[1,0,0])}}));const os=["<=","<","=","!=",">",">=","~"];function is(e){return os.includes(e)?e:"="}function ls({type:e},t){switch(e){case"string":return t;case"boolean":try{return["true","t","1"].includes(t.toLowerCase())}catch(e){return}case"number":try{let e=parseFloat(t);return Number.isFinite(e)?e:void 0}catch(e){return}default:return t}}const as=["string","number","boolean","unknown"];function cs(e,t){const n=[],r=function(e,t,n){let r=[];try{r=tr(t,null==e?void 0:e.map((({id:e})=>e)))}catch(e){return n.push("row size is larger than columns available"),[]}return r.forEach(((e,t)=>{e._i=t,e._converted={}})),r}(e.columns,t,n);if(0==r.length)return n.push("table is empty"),{columns:[],rows:[],messages:rs(n)};let s=function(e,t,n){if(e)return e;const r=new Map,s=new Set;for(let e=0;e<t.length;e++){const o=t[e];for(const e in o){if("_i"==e||"_converted"==e)continue;let t=o[e];if(void 0===t)s.add(e);else{let s=typeof t;"object"==s?(n.push(`unknown type for column '${e}' - '${s}'`),r.set(e,"unknown")):r.has(e)?r.get(e)!=s&&(n.push(`unstable types for column '${e}', ${[r.get(e),s].sort().join(", ")}`),r.set(e,"unknown")):r.set(e,s)}}}for(const e of s)r.has(e)||r.set(e,"unknown");return E(Array.from(r,(([e,t])=>({id:e,type:t}))),(({id:e})=>e))}(e.columns,r,n);if(e.alter_columns){const t=e.alter_columns.map((({id:e})=>e));s=[...e.alter_columns,...s.filter((({id:e})=>!t.includes(e)))]}const o=s.length;s.length!=o&&n.push("not unique column ids"),s=function(e,t,n){e=[...e];for(let r=0;r<t.length;r++){const s=t[r];for(const t of e){const{id:e,type:r}=t;if("_i"==e)continue;let o=s[e];void 0!==o&&(typeof o!=r&&"unknown"!=r&&as.includes(r)&&(n.push(`wrong type for column '${e}', specified as '${r}' but '${typeof o}' found`),t.type="unknown"))}}return e}(s,r,n);let i=function(e,t){const n=Qr("unknown");if(n.is_error)throw"can't get 'unknown' formatter";let r=[];for(const s of e){const e=s.format||{type:s.type},o=Qr(e.type);o.is_error?(t.push(o.message),r.push([n.value,e])):o.value.compatibleTypes.includes(s.type)?r.push([o.value,e]):(t.push(`column ${s.id} has wrong format, format ${s.format} is not compatible with '${s.type}' type`),r.push([n.value,e]))}return r}(s,n);const l=function(e,t,n,r){const s={};for(let o=0;o<e.length;o++){const{id:i,type:l,domain:a}=e[o],[c,u]=t[o];if("number"!=l){a&&r.push(`non number column '${i}' can't have domain`);continue}const f=S(c.extraValues?c.extraValues(u):[],(e=>void 0!==e&&e)),d=S(n,(e=>{const t=e[i];return void 0!==t&&t}));if(d.push(...f),0==d.length){a&&(s[i]=a);continue}let h=d[0],p=d[0];for(const e of d)e>p?p=e:e<h&&(h=e);const g=a||[h,p];h<g[0]&&(r.push(`column ${i} 'domain' min value is greather than actual min ${h}`),g[0]=h),p>g[1]&&(r.push(`column ${i} 'line.domain' max value is smaller than actual max ${p}`),g[1]=p),s[i]=g}return s}(s,i,r,n);i=function(e,t,n,r){return n.map(((n,s)=>{const{id:o,type:i}=e[s],[l,a]=n;if("number"==a.type&&void 0===a.round)if("number"==i){if(t.every((e=>{const t=e[o];return void 0===t||Number.isInteger(t)})))return[l,Object.assign(Object.assign({},a),{round:0})]}else r.push(`column ${o} is non number and can't use number formatter`);return n}))}(s,r,i,n);const a=us(s,r),c=function(e,t,n,r,s){const o={};for(let i=0;i<e.length;i++){const[{id:l},[a,c]]=[e[i],n[i]];if(a.convertColumn){const e=r.map((e=>e[l])),n=t[l];if(n){const{column:t,warnings:i,stats:u}=a.convertColumn(l,n,e,c);o[l]=u,i.forEach((e=>s.push(e)));for(let e=0;e<r.length;e++)r[e]._converted[l]=t[e]}}}return o}(s,l,i,r,n);return{columns:s.map(((e,t)=>({id:e.id,type:e.type,title:e.title,format:i[t][1],formatStats:c[e.id],formatter:i[t][0],widthP:a[t],domain:l[e.id]}))),rows:r,messages:rs(n)}}function us(e,t){let n;if(e.some((({width:e})=>null!=e)))n=e.map((({width:e})=>e||1));else{const r=new Map;for(const n of t)for(const{id:t,type:s}of e){let e;if(void 0===n[t])continue;if("string"==s)e=n[t].length;else if("number"==s)e=(""+n[t]).length;else{if("boolean"!=s)continue;e=1}let o=r.get(t);null==o&&(o=[],r.set(t,o)),o.push(e)}const s=C(r,(e=>_(e,.7))),o=x(z(s,[],((e,t)=>(e.push(t),e)))),i=1.618,l=C(s,(e=>e>o*i?i:e<o/i?1/i:1)),a=1;n=e.map((({id:e})=>l.get(e)||a))}return fs(n)}function fs(e){if(0==e.length)return[];const t=100/q(e);let n=e.map((e=>M(e*t)));for(;;){const e=q(n);if(e>100)n[k(n)]-=1;else{if(!(e<100))break;n[v(n)]+=1}}return n}function ds(e,t,n){return t=function(e,t,n){if(!n)return t;for(const{id:r,type:s}of e){const e=n[r];if(!e)continue;const[o,i]=e;if(void 0===i||""===i)continue;const l=hs(s,[o,i]);t=t.filter((e=>l(e[r])))}return t}(e,t=function(e,t,n){if(!(n=function(e){return e.replace(/^[\t\s\n]+|[\t\s\n]+$/g,"")}(n)))return t;const r=n.toLowerCase();return t.filter((t=>{for(const{id:n}of e)if((""+t[n]).toLowerCase().includes(r))return!0;return!1}))}(e,t,n.filter),n.filters)}function hs(e,[t,n]){switch(e){case"string":if("string"!=typeof n)throw new Error("string filter value expected");const e=n,r=n.toLowerCase();switch(t){case"<=":return t=>void 0!==t&&t<=e;case"<":return t=>void 0!==t&&t<e;case"=":return t=>void 0!==t&&t==e;case"!=":return t=>void 0!==t&&t!=e;case">":return t=>void 0!==t&&t>e;case">=":return t=>void 0!==t&&t>=e;case"~":return e=>void 0!==e&&e.toLowerCase().includes(r)}case"boolean":if("boolean"!=typeof n)throw new Error("boolean filter value expected");const s=n;switch(t){case"<=":return e=>void 0!==e&&e<=s;case"<":return e=>void 0!==e&&e<s;case"=":return e=>void 0!==e&&e==s;case"!=":return e=>void 0!==e&&e!=s;case">":return e=>void 0!==e&&e>s;case">=":return e=>void 0!==e&&e>=s;case"~":return e=>void 0!==e&&e==s}case"number":if("number"!=typeof n)throw new Error("number filter value expected");const o=n;switch(t){case"<=":return e=>void 0!==e&&e<=o;case"<":return e=>void 0!==e&&e<o;case"=":return e=>void 0!==e&&e==o;case"!=":return e=>void 0!==e&&e!=o;case">":return e=>void 0!==e&&e>o;case">=":return e=>void 0!==e&&e>=o;case"~":return e=>void 0!==e&&e==o}default:const i=""+n;switch(t){case"<=":return e=>void 0!==e&&""+e<=i;case"<":return e=>void 0!==e&&""+e<i;case"=":return e=>void 0!==e&&""+e==i;case"!=":return e=>void 0!==e&&""+e!=i;case">":return e=>void 0!==e&&""+e>i;case">=":return e=>void 0!==e&&""+e>=i;case"~":return e=>void 0!==e&&""+e==i}}throw new Error(`unknown filter ${e} ${t}`)}function ps(e){return e.map((e=>{let t=Object.assign({},e);return delete t._i,delete t._converted,t}))}function gs(e){let t,n,r,s,o,i,l,a,c,u;return{c(){t=K("div"),n=K("span"),r=K("span"),r.textContent="w =",s=G(),o=K("input"),te(r,"class","w-5 inline-block"),te(o,"class","w-10 outline-none pl-1 text-xs border border-gray-200 focus:text-gray-900  svelte-1brt80c"),te(o,"type","number"),te(o,"step","0.1"),o.value=i=e[2].toFixed(1),te(n,"class",l=e[3]?"text-gray-900":"text-gray-200"),te(t,"class",a=e[1]+" my-1 text-xs "+(!e[4]&&"invisible"))},m(i,l){W(i,t,l),D(t,n),D(n,r),D(n,s),D(n,o),c||(u=Y(o,"change",e[5]),c=!0)},p(e,r){4&r&&i!==(i=e[2].toFixed(1))&&(o.value=i),8&r&&l!==(l=e[3]?"text-gray-900":"text-gray-200")&&te(n,"class",l),18&r&&a!==(a=e[1]+" my-1 text-xs "+(!e[4]&&"invisible"))&&te(t,"class",a)},d(e){e&&V(t),c=!1,u()}}}function ms(e){let t,n=e[0].wsort&&gs(e);return{c(){n&&n.c(),t=Q()},m(e,r){n&&n.m(e,r),W(e,t,r)},p(e,[r]){e[0].wsort?n?n.p(e,r):(n=gs(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:P,o:P,d(e){n&&n.d(e),e&&V(t)}}}function bs(e,t,n){let r,s,o,{column_id:i}=t,{align:l}=t,{state:a}=t;const c=R((e=>{a.wsort&&n(0,a=Object.assign(Object.assign({},a),{wsort:Object.assign(Object.assign({},a.wsort),{[i]:e})}))}),200);return e.$$set=e=>{"column_id"in e&&n(6,i=e.column_id),"align"in e&&n(1,l=e.align),"state"in e&&n(0,a=e.state)},e.$$.update=()=>{65&e.$$.dirty&&n(2,r=(a.wsort||{})[i]||0),4&e.$$.dirty&&n(3,s=0!=r),9&e.$$.dirty&&n(4,o=a.show_controls||s)},[a,l,r,s,o,({target:{value:e}})=>{n(2,r=parseFloat(e)),c(r)},i]}f("normalizeInputsSlow",(()=>{const e=e=>e.map((({id:e,type:t})=>({id:e,type:t})));{const{columns:t,rows:n}=cs({},[["v",null]]);d.equal(e(t),[{id:"a",type:"string"},{id:"b",type:"unknown"}]),d.equal(ps(n),[{a:"v"}])}{const{columns:t,rows:n}=cs({},[{k:"v",k2:null}]);d.equal(e(t),[{id:"k",type:"string"},{id:"k2",type:"unknown"}]),d.equal(ps(n),[{k:"v"}])}{const{columns:t,rows:n}=cs({},[{k:"v"},{k:0}]);d.equal(e(t),[{id:"k",type:"unknown"}]),d.equal(ps(n),[{k:"v"},{k:0}])}{const{columns:e}=cs({},[{v:1}]);d.equal(e[0].format,{type:"number",round:0})}})),f("calculateColumnWidths",(()=>{d.equal(us([{id:"name",type:"string"},{id:"age",type:"number"}],[{name:"Jim Raynor",age:30},{name:"Kate",age:25}]),[62,38])})),f("weightsToPercents",(()=>{d.equal(fs([2,2]),[50,50]),d.equal(fs([3,3,3]).sort(),[33,33,34])}));class ws extends Fe{constructor(e){super(),Ue(this,e,bs,ms,B,{column_id:6,align:1,state:0})}}function $s(e,t,n){const r=e.slice();return r[9]=t[n],r}function ys(e){let t,n,r,s,o,i,l,a,c,u,f,d=[],h=new Map,p=os;const g=e=>e[9];for(let t=0;t<p.length;t+=1){let n=$s(e,p,t),r=g(n);h.set(r,d[t]=vs(r,n))}return{c(){t=K("div"),n=K("span"),r=K("select");for(let e=0;e<d.length;e+=1)d[e].c();o=G(),i=K("input"),te(r,"class","outline-none w-5 inline-block svelte-126ibbo"),te(i,"class","w-10 outline-none pl-1 text-xs border border-gray-200 focus:text-gray-900"),te(i,"type","text"),i.value=l=void 0===e[2][1]?"":""+e[2][1],te(n,"class",a=e[3]?"text-gray-900":"text-gray-200"),te(t,"class",c=e[1]+" my-1 text-xs "+(!e[4]&&"invisible"))},m(s,l){W(s,t,l),D(t,n),D(n,r);for(let e=0;e<d.length;e+=1)d[e].m(r,null);oe(r,e[2][0]),D(n,o),D(n,i),u||(f=[Y(r,"change",e[5]),Y(i,"keyup",e[6])],u=!0)},p(e,o){0&o&&(p=os,d=Re(d,o,g,1,e,p,h,r,Ce,vs,null,$s)),4&o&&s!==(s=e[2][0])&&oe(r,e[2][0]),4&o&&l!==(l=void 0===e[2][1]?"":""+e[2][1])&&i.value!==l&&(i.value=l),8&o&&a!==(a=e[3]?"text-gray-900":"text-gray-200")&&te(n,"class",a),18&o&&c!==(c=e[1]+" my-1 text-xs "+(!e[4]&&"invisible"))&&te(t,"class",c)},d(e){e&&V(t);for(let e=0;e<d.length;e+=1)d[e].d();u=!1,F(f)}}}function vs(e,t){let n,r,s=t[9]+"";return{key:e,first:null,c(){n=K("option"),r=X(s),n.__value=t[9],n.value=n.__value,this.first=n},m(e,t){W(e,n,t),D(n,r)},p(e,n){t=e},d(e){e&&V(n)}}}function ks(e){let t,n=e[0].filters&&ys(e);return{c(){n&&n.c(),t=Q()},m(e,r){n&&n.m(e,r),W(e,t,r)},p(e,[r]){e[0].filters?n?n.p(e,r):(n=ys(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:P,o:P,d(e){n&&n.d(e),e&&V(t)}}}function xs(e,t,n){let r,s,o,{column:i}=t,{align:l}=t,{state:a}=t;const c=R((e=>{a.filters&&n(0,a=Object.assign(Object.assign({},a),{filters:Object.assign(Object.assign({},a.filters),{[i.id]:e})}))}),200);return e.$$set=e=>{"column"in e&&n(7,i=e.column),"align"in e&&n(1,l=e.align),"state"in e&&n(0,a=e.state)},e.$$.update=()=>{129&e.$$.dirty&&n(2,o=a.filters&&i.id in a.filters?a.filters[i.id]:["=",void 0]),4&e.$$.dirty&&n(3,r=null!=o[1]&&""!==o[1]),9&e.$$.dirty&&n(4,s=r||a.show_controls)},[a,l,o,r,s,({target:{value:e}})=>{n(2,o=[is(e),o[1]]),c(o)},({target:{value:e}})=>{n(2,o=[o[0],ls(i,e)]),c(o)},i]}class _s extends Fe{constructor(e){super(),Ue(this,e,xs,ks,B,{column:7,align:1,state:0})}}function js(e){let t,n,r,s,o,i,l,a,c,u,f,d,h,p,g,m,b,w=e[3].symbol+"";function $(t){e[12](t)}let y={column_id:e[4],align:"text-right"};function v(t){e[13](t)}void 0!==e[0]&&(y.state=e[0]),u=new ws({props:y}),he.push((()=>Le(u,"state",$)));let k={column:e[1],align:"text-right"};return void 0!==e[0]&&(k.state=e[0]),h=new _s({props:k}),he.push((()=>Le(h,"state",v))),{c(){t=K("th"),n=K("a"),r=K("span"),s=X(w),i=G(),l=K("span"),a=X(e[2]),c=G(),Ne(u.$$.fragment),d=G(),Ne(h.$$.fragment),te(r,"class",o=e[3].klass+" mr-0.5"),te(n,"class","flex justify-between"),te(n,"href","#"),se(t,"width",e[1].widthP+"%"),te(t,"class","text-right")},m(o,f){W(o,t,f),D(t,n),D(n,r),D(r,s),D(n,i),D(n,l),D(l,a),D(t,c),Te(u,t,null),D(t,d),Te(h,t,null),g=!0,m||(b=Y(n,"click",ee(e[6])),m=!0)},p(e,n){(!g||8&n)&&w!==(w=e[3].symbol+"")&&ne(s,w),(!g||8&n&&o!==(o=e[3].klass+" mr-0.5"))&&te(r,"class",o),(!g||4&n)&&ne(a,e[2]);const i={};!f&&1&n&&(f=!0,i.state=e[0],$e((()=>f=!1))),u.$set(i);const l={};2&n&&(l.column=e[1]),!p&&1&n&&(p=!0,l.state=e[0],$e((()=>p=!1))),h.$set(l),(!g||2&n)&&se(t,"width",e[1].widthP+"%")},i(e){g||(Se(u.$$.fragment,e),Se(h.$$.fragment,e),g=!0)},o(e){Ae(u.$$.fragment,e),Ae(h.$$.fragment,e),g=!1},d(e){e&&V(t),Pe(u),Pe(h),m=!1,b()}}}function Os(e){let t,n,r,s,o,i,l,a,c,u,f,d,h,p,g,m,b,w,$,y,v,k=e[3].symbol+"",x=e[3].symbol+"";function _(t){e[10](t)}let j={column_id:e[4],align:"text-center"};function O(t){e[11](t)}void 0!==e[0]&&(j.state=e[0]),p=new ws({props:j}),he.push((()=>Le(p,"state",_)));let E={column:e[1],align:"text-center"};return void 0!==e[0]&&(E.state=e[0]),b=new _s({props:E}),he.push((()=>Le(b,"state",O))),{c(){t=K("th"),n=K("a"),r=K("span"),s=X(k),o=G(),i=K("span"),l=X(e[2]),a=G(),c=K("span"),u=X(x),h=G(),Ne(p.$$.fragment),m=G(),Ne(b.$$.fragment),te(r,"class","invisible mr-0.5"),te(c,"class",f=e[3].klass+" ml-0.5"),te(c,"title",d=e[3].title),te(n,"class","flex justify-between"),te(n,"href","#"),se(t,"width",e[1].widthP+"%")},m(f,d){W(f,t,d),D(t,n),D(n,r),D(r,s),D(n,o),D(n,i),D(i,l),D(n,a),D(n,c),D(c,u),D(t,h),Te(p,t,null),D(t,m),Te(b,t,null),$=!0,y||(v=Y(n,"click",ee(e[6])),y=!0)},p(e,n){(!$||8&n)&&k!==(k=e[3].symbol+"")&&ne(s,k),(!$||4&n)&&ne(l,e[2]),(!$||8&n)&&x!==(x=e[3].symbol+"")&&ne(u,x),(!$||8&n&&f!==(f=e[3].klass+" ml-0.5"))&&te(c,"class",f),(!$||8&n&&d!==(d=e[3].title))&&te(c,"title",d);const r={};!g&&1&n&&(g=!0,r.state=e[0],$e((()=>g=!1))),p.$set(r);const o={};2&n&&(o.column=e[1]),!w&&1&n&&(w=!0,o.state=e[0],$e((()=>w=!1))),b.$set(o),(!$||2&n)&&se(t,"width",e[1].widthP+"%")},i(e){$||(Se(p.$$.fragment,e),Se(b.$$.fragment,e),$=!0)},o(e){Ae(p.$$.fragment,e),Ae(b.$$.fragment,e),$=!1},d(e){e&&V(t),Pe(p),Pe(b),y=!1,v()}}}function Es(e){let t,n,r,s,o,i,l,a,c,u,f,d,h,p,g,m,b,w,$=e[3].symbol+"";function y(t){e[8](t)}let v={column_id:e[4],align:"text-left"};function k(t){e[9](t)}void 0!==e[0]&&(v.state=e[0]),f=new ws({props:v}),he.push((()=>Le(f,"state",y)));let x={column:e[1],align:"text-left"};return void 0!==e[0]&&(x.state=e[0]),p=new _s({props:x}),he.push((()=>Le(p,"state",k))),{c(){t=K("th"),n=K("a"),r=K("span"),s=X(e[2]),o=G(),i=K("span"),l=X($),u=G(),Ne(f.$$.fragment),h=G(),Ne(p.$$.fragment),te(i,"class",a=e[3].klass+" ml-0.5"),te(i,"title",c=e[3].title),te(n,"class","flex justify-between"),te(n,"href","#"),se(t,"width",e[1].widthP+"%")},m(a,c){W(a,t,c),D(t,n),D(n,r),D(r,s),D(n,o),D(n,i),D(i,l),D(t,u),Te(f,t,null),D(t,h),Te(p,t,null),m=!0,b||(w=Y(n,"click",ee(e[6])),b=!0)},p(e,n){(!m||4&n)&&ne(s,e[2]),(!m||8&n)&&$!==($=e[3].symbol+"")&&ne(l,$),(!m||8&n&&a!==(a=e[3].klass+" ml-0.5"))&&te(i,"class",a),(!m||8&n&&c!==(c=e[3].title))&&te(i,"title",c);const r={};!d&&1&n&&(d=!0,r.state=e[0],$e((()=>d=!1))),f.$set(r);const o={};2&n&&(o.column=e[1]),!g&&1&n&&(g=!0,o.state=e[0],$e((()=>g=!1))),p.$set(o),(!m||2&n)&&se(t,"width",e[1].widthP+"%")},i(e){m||(Se(f.$$.fragment,e),Se(p.$$.fragment,e),m=!0)},o(e){Ae(f.$$.fragment,e),Ae(p.$$.fragment,e),m=!1},d(e){e&&V(t),Pe(f),Pe(p),b=!1,w()}}}function Ss(e){let t,n,r,s;const o=[Es,Os,js],i=[];return t=function(e,t){return"left"==e[5]?0:"center"==e[5]?1:2}(e),n=i[t]=o[t](e),{c(){n.c(),r=Q()},m(e,n){i[t].m(e,n),W(e,r,n),s=!0},p(e,[t]){n.p(e,t)},i(e){s||(Se(n),s=!0)},o(e){Ae(n),s=!1},d(e){i[t].d(e),e&&V(r)}}}function As(e,t,n){let r,s,{column:o}=t,{state:i}=t,{sortable:l}=t,a=o.id;const c=o.formatter.align(o.format,o.formatStats);function u(e,t){const n={symbol:"↓",klass:"invisible",title:""};if(t.wsort){const r=t.wsort[e.id],s="wsort: "+function(e){return e instanceof Map?Array.from(e):Object.entries(e)}(t.wsort).map((([e,t])=>`${e}: ${t}`)).join(", ");return void 0===r||0==r?n:r>=0?{symbol:"↑",klass:"text-gray-900",title:s}:{symbol:"↓",klass:"text-gray-900",title:s}}if(t.sort){let e;for(let n=0;n<t.sort.length;n++){const[r,s]=t.sort[n];r==a&&(e=[s,n])}if(!e)return n;const r="sort: "+t.sort.map((([e,t])=>`${e}: ${t}`)).join(", "),[s,o]=e,i="asc"==s?"↓":"↑";let l;if(0==o)l="text-gray-900";else if(1==o)l="text-gray-400";else{if(2!=o)throw new Error("color for more than 3 sort oders isn't supported");l="text-gray-300"}return{symbol:i,klass:l,title:r}}return n}return e.$$set=e=>{"column"in e&&n(1,o=e.column),"state"in e&&n(0,i=e.state),"sortable"in e&&n(7,l=e.sortable)},e.$$.update=()=>{2&e.$$.dirty&&n(2,r=o.title||o.id),3&e.$$.dirty&&n(3,s=u(o,i))},[i,o,r,s,a,c,function(e){if(l)if(i.wsort){let t=i.wsort;e.metaKey?o.id in t?t[o.id]=-1*t[o.id]:t[o.id]=1:b(t)>1?t={[a]:1}:o.id in t?t[o.id]=-1*t[o.id]:t={[a]:1},n(0,i=Object.assign(Object.assign({},i),{wsort:t}))}else{let t=i.sort||[];const r=function(e,t){const n=t instanceof Function?t:e=>e==t;for(let t=0;t<e.length;t++)if(n(e[t],t))return t;return-1}(t,(([e,t])=>e==o.id));e.metaKey?r>=0?t[r][1]="asc"==t[r][1]?"desc":"asc":t.push([a,"asc"]):t.length>1?t=[[a,"asc"]]:r>=0?(d(1==t.length),t[r][1]="asc"==t[r][1]?"desc":"asc"):t=[[a,"asc"]],n(0,i=Object.assign(Object.assign({},i),{sort:t}))}},l,function(e){i=e,n(0,i)},function(e){i=e,n(0,i)},function(e){i=e,n(0,i)},function(e){i=e,n(0,i)},function(e){i=e,n(0,i)},function(e){i=e,n(0,i)}]}class zs extends Fe{constructor(e){super(),Ue(this,e,As,Ss,B,{column:1,state:0,sortable:7})}}function qs(e,t,n){const r=e.slice();return r[4]=t[n],r}function Cs(e,t){let n,r,s,o;function i(e){t[3](e)}let l={column:t[4],sortable:t[2]};return void 0!==t[0]&&(l.state=t[0]),r=new zs({props:l}),he.push((()=>Le(r,"state",i))),{key:e,first:null,c(){n=Q(),Ne(r.$$.fragment),this.first=n},m(e,t){W(e,n,t),Te(r,e,t),o=!0},p(e,n){t=e;const o={};2&n&&(o.column=t[4]),4&n&&(o.sortable=t[2]),!s&&1&n&&(s=!0,o.state=t[0],$e((()=>s=!1))),r.$set(o)},i(e){o||(Se(r.$$.fragment,e),o=!0)},o(e){Ae(r.$$.fragment,e),o=!1},d(e){e&&V(n),Pe(r,e)}}}function Ms(e){let t,n,r=[],s=new Map,o=e[1];const i=e=>e[4].id;for(let t=0;t<o.length;t+=1){let n=qs(e,o,t),l=i(n);s.set(l,r[t]=Cs(l,n))}return{c(){t=K("tr");for(let e=0;e<r.length;e+=1)r[e].c()},m(e,s){W(e,t,s);for(let e=0;e<r.length;e+=1)r[e].m(t,null);n=!0},p(e,[n]){7&n&&(o=e[1],Oe(),r=Re(r,n,i,1,e,o,s,t,Me,Cs,null,qs),Ee())},i(e){if(!n){for(let e=0;e<o.length;e+=1)Se(r[e]);n=!0}},o(e){for(let e=0;e<r.length;e+=1)Ae(r[e]);n=!1},d(e){e&&V(t);for(let e=0;e<r.length;e+=1)r[e].d()}}}function Rs(e,t,n){let{columns:r}=t,{state:s}=t,{sortable:o}=t;return e.$$set=e=>{"columns"in e&&n(1,r=e.columns),"state"in e&&n(0,s=e.state),"sortable"in e&&n(2,o=e.sortable)},[s,r,o,function(e){s=e,n(0,s)}]}class Ls extends Fe{constructor(e){super(),Ue(this,e,Rs,Ms,B,{columns:1,state:0,sortable:2})}}function Ns(e,t,n){const r=e.slice();return r[4]=t[n],r[6]=n,r}function Ts(e){let t,n,r;var s=e[4].formatter.default;function o(e){return{props:{options:e[4].format,value:e[1][e[4].id]}}}return s&&(t=new s(o(e))),{c(){t&&Ne(t.$$.fragment),n=Q()},m(e,s){t&&Te(t,e,s),W(e,n,s),r=!0},p(e,r){const i={};if(1&r&&(i.options=e[4].format),3&r&&(i.value=e[1][e[4].id]),s!==(s=e[4].formatter.default)){if(t){Oe();const e=t;Ae(e.$$.fragment,1,0,(()=>{Pe(e,1)})),Ee()}s?(t=new s(o(e)),Ne(t.$$.fragment),Se(t.$$.fragment,1),Te(t,n.parentNode,n)):t=null}else s&&t.$set(i)},i(e){r||(t&&Se(t.$$.fragment,e),r=!0)},o(e){t&&Ae(t.$$.fragment,e),r=!1},d(e){e&&V(n),t&&Pe(t,e)}}}function Ps(e){let t,n,r;var s=e[4].formatter.default;function o(e){return{props:{options:e[4].format,value:e[1][e[4].id],converted:e[1]._converted[e[4].id],stats:e[4].formatStats}}}return s&&(t=new s(o(e))),{c(){t&&Ne(t.$$.fragment),n=Q()},m(e,s){t&&Te(t,e,s),W(e,n,s),r=!0},p(e,r){const i={};if(1&r&&(i.options=e[4].format),3&r&&(i.value=e[1][e[4].id]),3&r&&(i.converted=e[1]._converted[e[4].id]),1&r&&(i.stats=e[4].formatStats),s!==(s=e[4].formatter.default)){if(t){Oe();const e=t;Ae(e.$$.fragment,1,0,(()=>{Pe(e,1)})),Ee()}s?(t=new s(o(e)),Ne(t.$$.fragment),Se(t.$$.fragment,1),Te(t,n.parentNode,n)):t=null}else s&&t.$set(i)},i(e){r||(t&&Se(t.$$.fragment,e),r=!0)},o(e){t&&Ae(t.$$.fragment,e),r=!1},d(e){e&&V(n),t&&Pe(t,e)}}}function Zs(e,t){let n,r,s,o,i;const l=[Ps,Ts],a=[];function c(e,t){return"_converted"in e[1]&&e[4].id in e[1]._converted?0:1}return r=c(t),s=a[r]=l[r](t),{key:e,first:null,c(){n=K("td"),s.c(),o=G(),this.first=n},m(e,t){W(e,n,t),a[r].m(n,null),D(n,o),i=!0},p(e,i){let u=r;r=c(t=e),r===u?a[r].p(t,i):(Oe(),Ae(a[u],1,1,(()=>{a[u]=null})),Ee(),s=a[r],s?s.p(t,i):(s=a[r]=l[r](t),s.c()),Se(s,1),s.m(n,o))},i(e){i||(Se(s),i=!0)},o(e){Ae(s),i=!1},d(e){e&&V(n),a[r].d()}}}function Us(e){let t,n,r,s,o,i=[],l=new Map,a=e[0];const c=e=>e[4].id;for(let t=0;t<a.length;t+=1){let n=Ns(e,a,t),r=c(n);l.set(r,i[t]=Zs(r,n))}return{c(){t=K("tr");for(let e=0;e<i.length;e+=1)i[e].c();te(t,"class",n=e[2]?"bg-gray-200":"")},m(n,l){W(n,t,l);for(let e=0;e<i.length;e+=1)i[e].m(t,null);r=!0,s||(o=Y(t,"click",(function(){I(e[3])&&e[3].apply(this,arguments)})),s=!0)},p(s,[o]){e=s,3&o&&(a=e[0],Oe(),i=Re(i,o,c,1,e,a,l,t,Me,Zs,null,Ns),Ee()),(!r||4&o&&n!==(n=e[2]?"bg-gray-200":""))&&te(t,"class",n)},i(e){if(!r){for(let e=0;e<a.length;e+=1)Se(i[e]);r=!0}},o(e){for(let e=0;e<i.length;e+=1)Ae(i[e]);r=!1},d(e){e&&V(t);for(let e=0;e<i.length;e+=1)i[e].d();s=!1,o()}}}function Fs(e,t,n){let{columns:r}=t,{row:s}=t,{selected:o}=t,{onSelect:i}=t;return e.$$set=e=>{"columns"in e&&n(0,r=e.columns),"row"in e&&n(1,s=e.row),"selected"in e&&n(2,o=e.selected),"onSelect"in e&&n(3,i=e.onSelect)},[r,s,o,i]}class Is extends Fe{constructor(e){super(),Ue(this,e,Fs,Us,B,{columns:0,row:1,selected:2,onSelect:3})}}const Bs=e=>`<svg class="${e}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg>`;function Js(e){let t,n,r,s,o,i,l,a,c,u,f,d,h,p=Bs(Ds(!!e[0].filters))+"";return{c(){t=K("div"),n=K("div"),r=G(),s=K("div"),o=K("input"),i=G(),l=K("button"),a=X("W"),u=G(),f=K("button"),te(n,"class","flex items-center"),te(o,"class","rounded border border-gray-300 text-sm outline-none py-1 px-1 leading-4"),te(o,"type","text"),te(o,"placeholder","Filter"),te(l,"class",c=J(Ws(!!e[0].wsort))+" svelte-1y842rg"),te(l,"title",e[4]),te(f,"class","focus:outline-none"),te(s,"class","flex items-center space-x-2"),te(t,"class","flex items-center justify-between my-1")},m(c,g){W(c,t,g),D(t,n),D(t,r),D(t,s),D(s,o),re(o,e[1]),D(s,i),D(s,l),D(l,a),D(s,u),D(s,f),f.innerHTML=p,d||(h=[Y(o,"input",e[5]),Y(o,"keyup",e[2]),Y(l,"click",e[3]),Y(f,"click",e[6])],d=!0)},p(e,[t]){2&t&&o.value!==e[1]&&re(o,e[1]),1&t&&c!==(c=J(Ws(!!e[0].wsort))+" svelte-1y842rg")&&te(l,"class",c),1&t&&p!==(p=Bs(Ds(!!e[0].filters))+"")&&(f.innerHTML=p)},i:P,o:P,d(e){e&&V(t),d=!1,F(h)}}}function Ds(e){return"h-5 w-5 p-0.5 border rounded text-gray-900 "+(e?"border-gray-300":"border-white")}function Ws(e){return"letter_button focus:outline-none border rounded "+(e?"border-gray-300":"border-white")}function Vs(e,t,n){let{state:r}=t,s=r.filter;const o=R((()=>{n(0,r=Object.assign(Object.assign({},r),{filter:s}))}),200);const i=['Weighted sorting. "Smart", weighted, ranked sorting, instead of normal sorting.',"It works similar to how humans compare products with many attributes, to find the best one.","Example: find countries with highest salaries, lowest taxes and lowest real estate prices - ordinary sorting would be useless, while weighted sorting would sort the countries in a 'smart' way, similar to how human would do.","Missing values threated as average, like if we don't have tax rate for country, we guess that it probably should be somewhat average. For non number comparable elements sort rank used as weight. ifferent range of values for different columns normalised into [-1..1] range as 'nw = (w - median(w)) / 0.9-quantile(variance(w))*1.11' and limiting min/max outliers by [-1..1].",'- Undefined values threated as average\n- Rank for same values should be the same, like ["a", "a", "b"] should be [0, 0, 1], not [0, 1, 2]\n- Different range of values for different columns normalised into [-1..1] range as\n      nw = (w - median(w)) / 0.9-quantile(variance(w))*1.11 and limiting min/max outliers by [-1..1].'].join("\n\n");return e.$$set=e=>{"state"in e&&n(0,r=e.state)},[r,s,o,function(){n(0,r=r.wsort?Object.assign(Object.assign({},r),{wsort:void 0,sort:void 0}):Object.assign(Object.assign({},r),{wsort:{},sort:void 0}))},i,function(){s=this.value,n(1,s)},()=>n(0,r={...r,filters:r.filters?void 0:{}})]}class Ks extends Fe{constructor(e){super(),Ue(this,e,Vs,Js,B,{state:0})}}function Hs(e,t,n){const r=e.slice();return r[1]=t[n],r}function Xs(e){let t,n=e[0],r=[];for(let t=0;t<n.length;t+=1)r[t]=eo(Hs(e,n,t));return{c(){t=K("div");for(let e=0;e<r.length;e+=1)r[e].c();te(t,"class","text-sm mt-1 mx-1")},m(e,n){W(e,t,n);for(let e=0;e<r.length;e+=1)r[e].m(t,null)},p(e,s){if(1&s){let o;for(n=e[0],o=0;o<n.length;o+=1){const i=Hs(e,n,o);r[o]?r[o].p(i,s):(r[o]=eo(i),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(e){e&&V(t),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(r,e)}}}function Gs(e){let t;return{c(){t=K("div"),t.textContent="unknown message type"},m(e,n){W(e,t,n)},p:P,d(e){e&&V(t)}}}function Qs(e){let t,n,r,s,o=e[1].message+"";return{c(){t=K("div"),n=K("span"),n.textContent="error",r=G(),s=X(o),te(n,"class","bg-red-400 px-2 rounded")},m(e,o){W(e,t,o),D(t,n),D(t,r),D(t,s)},p(e,t){1&t&&o!==(o=e[1].message+"")&&ne(s,o)},d(e){e&&V(t)}}}function Ys(e){let t,n,r,s,o=e[1].message+"";return{c(){t=K("div"),n=K("span"),n.textContent="warn",r=G(),s=X(o),te(n,"class","bg-yellow-400 px-2 rounded")},m(e,o){W(e,t,o),D(t,n),D(t,r),D(t,s)},p(e,t){1&t&&o!==(o=e[1].message+"")&&ne(s,o)},d(e){e&&V(t)}}}function eo(e){let t;function n(e,t){return"warn"==e[1].type?Ys:"error"==e[1].type?Qs:Gs}let r=n(e),s=r(e);return{c(){s.c(),t=Q()},m(e,n){s.m(e,n),W(e,t,n)},p(e,o){r===(r=n(e))&&s?s.p(e,o):(s.d(1),s=r(e),s&&(s.c(),s.m(t.parentNode,t)))},d(e){s.d(e),e&&V(t)}}}function to(e){let t,n=e[0].length>0&&Xs(e);return{c(){n&&n.c(),t=Q()},m(e,r){n&&n.m(e,r),W(e,t,r)},p(e,[r]){e[0].length>0?n?n.p(e,r):(n=Xs(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:P,o:P,d(e){n&&n.d(e),e&&V(t)}}}function no(e,t,n){let{messages:r}=t;return e.$$set=e=>{"messages"in e&&n(0,r=e.messages)},[r]}class ro extends Fe{constructor(e){super(),Ue(this,e,no,to,B,{messages:0})}}function so(e,t,n){const r=e.slice();return r[15]=t[n],r}function oo(e){let t,n,r=e[0].description+"";return{c(){t=K("div"),n=X(r)},m(e,r){W(e,t,r),D(t,n)},p(e,t){1&t&&r!==(r=e[0].description+"")&&ne(n,r)},d(e){e&&V(t)}}}function io(e,t){let n,r,s;function o(...e){return t[12](t[15],...e)}return r=new Is({props:{columns:t[4],row:t[15],selected:t[2].has(t[15]._i),onSelect:o}}),{key:e,first:null,c(){n=Q(),Ne(r.$$.fragment),this.first=n},m(e,t){W(e,n,t),Te(r,e,t),s=!0},p(e,n){t=e;const s={};8&n&&(s.row=t[15]),12&n&&(s.selected=t[2].has(t[15]._i)),8&n&&(s.onSelect=o),r.$set(s)},i(e){s||(Se(r.$$.fragment,e),s=!0)},o(e){Ae(r.$$.fragment,e),s=!1},d(e){e&&V(n),Pe(r,e)}}}function lo(e){let t,n,r,s,o,i;return{c(){t=K("div"),t.textContent="Debug:",n=G(),r=K("textarea"),o=G(),i=K("textarea"),te(t,"class","mt-3"),te(r,"class","block focus:outline-none rounded border border-gray-200 text-xs overflow-scroll mt-4"),r.readOnly=!0,se(r,"resize","none"),se(r,"width","30rem"),se(r,"height","5rem"),r.value=s=it({...e[1],selected:e[2]}),te(i,"class","block focus:outline-none rounded border border-gray-200 text-xs overflow-scroll mt-4"),i.readOnly=!0,se(i,"resize","none"),se(i,"width","30rem"),se(i,"height","10rem"),i.value=it(e[4])},m(e,s){W(e,t,s),W(e,n,s),W(e,r,s),W(e,o,s),W(e,i,s)},p(e,t){6&t&&s!==(s=it({...e[1],selected:e[2]}))&&(r.value=s)},d(e){e&&V(t),e&&V(n),e&&V(r),e&&V(o),e&&V(i)}}}function ao(e){let t,n,r,s,o,i,l,a,c,u,f,d,h,p,g,m,b,w,$=[],y=new Map,v=e[0].description&&oo(e);function k(t){e[10](t)}let x={};function _(t){e[11](t)}void 0!==e[1]&&(x.state=e[1]),o=new Ks({props:x}),he.push((()=>Le(o,"state",k)));let j={columns:e[4],sortable:e[6]};void 0!==e[1]&&(j.state=e[1]),c=new Ls({props:j}),he.push((()=>Le(c,"state",_)));let O=e[3];const E=e=>e[15]._i;for(let t=0;t<O.length;t+=1){let n=so(e,O,t),r=E(n);y.set(r,$[t]=io(r,n))}h=new ro({props:{messages:e[5]}});let S=e[0].debug&&lo(e);return{c(){v&&v.c(),t=G(),n=K("table"),r=K("tr"),s=K("td"),Ne(o.$$.fragment),a=G(),Ne(c.$$.fragment),f=G();for(let e=0;e<$.length;e+=1)$[e].c();d=G(),Ne(h.$$.fragment),p=G(),S&&S.c(),g=Q(),te(s,"colspan",e[4].length),te(r,"class",l="plot-table-toolbar "+(!e[1].show_controls&&"invisible")),te(n,"class","plot-table font-mono")},m(i,l){v&&v.m(i,l),W(i,t,l),W(i,n,l),D(n,r),D(r,s),Te(o,s,null),D(n,a),Te(c,n,null),D(n,f);for(let e=0;e<$.length;e+=1)$[e].m(n,null);W(i,d,l),Te(h,i,l),W(i,p,l),S&&S.m(i,l),W(i,g,l),m=!0,b||(w=Y(n,"click",e[13]),b=!0)},p(e,[s]){e[0].description?v?v.p(e,s):(v=oo(e),v.c(),v.m(t.parentNode,t)):v&&(v.d(1),v=null);const a={};!i&&2&s&&(i=!0,a.state=e[1],$e((()=>i=!1))),o.$set(a),(!m||2&s&&l!==(l="plot-table-toolbar "+(!e[1].show_controls&&"invisible")))&&te(r,"class",l);const f={};!u&&2&s&&(u=!0,f.state=e[1],$e((()=>u=!1))),c.$set(f),156&s&&(O=e[3],Oe(),$=Re($,s,E,1,e,O,y,n,Me,io,null,so),Ee()),e[0].debug?S?S.p(e,s):(S=lo(e),S.c(),S.m(g.parentNode,g)):S&&(S.d(1),S=null)},i(e){if(!m){Se(o.$$.fragment,e),Se(c.$$.fragment,e);for(let e=0;e<O.length;e+=1)Se($[e]);Se(h.$$.fragment,e),m=!0}},o(e){Ae(o.$$.fragment,e),Ae(c.$$.fragment,e);for(let e=0;e<$.length;e+=1)Ae($[e]);Ae(h.$$.fragment,e),m=!1},d(e){v&&v.d(e),e&&V(t),e&&V(n),Pe(o),Pe(c);for(let e=0;e<$.length;e+=1)$[e].d();e&&V(d),Pe(h,e),e&&V(p),S&&S.d(e),e&&V(g),b=!1,w()}}}function co(e,t,n){let r,s,{options:o}=t,{data:i}=t,{columns:l,rows:a,messages:c}=cs(o,i),u={filter:o.filter||"",filters:ss(l,o.filters),sort:o.sort,wsort:o.wsort,show_controls:!!o.show_controls},f=0!=o.sortable,d=new Set(o.selected||[]);function h(e,t){!function(e,t,n,r){const s=new Set(n);if(e.metaKey)s.has(t)?s.delete(t):s.add(t);else{const e=s.has(t)&&1==s.size;s.clear(),e||s.add(t)}r(s)}(e,t,d,(e=>n(2,d=e)))}return e.$$set=e=>{"options"in e&&n(0,o=e.options),"data"in e&&n(8,i=e.data)},e.$$.update=()=>{2&e.$$.dirty&&n(9,r=ds(l,a,u)),514&e.$$.dirty&&n(3,s=function(e,t,{sort:n,wsort:r}){return n&&n.length>0?ts(e,t,n):r&&b(r)>0?ns(e,t,r):t}(l,r,u))},[o,u,d,s,l,c,f,h,i,r,function(e){u=e,n(1,u)},function(e){u=e,n(1,u)},(e,t)=>h(t,e._i),()=>n(1,u={...u,show_controls:!0})]}class uo extends Fe{constructor(e){super(),Ue(this,e,co,ao,B,{options:0,data:8})}}function fo(e){let t,n;return t=new De({props:{error:e[3]}}),{c(){Ne(t.$$.fragment)},m(e,r){Te(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.error=e[3]),t.$set(r)},i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Ae(t.$$.fragment,e),n=!1},d(e){Pe(t,e)}}}function ho(e){let t,n;return t=new uo({props:{options:e[0].table||{},data:e[2]}}),{c(){Ne(t.$$.fragment)},m(e,r){Te(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.options=e[0].table||{}),1&n&&(r.data=e[2]),t.$set(r)},i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Ae(t.$$.fragment,e),n=!1},d(e){Pe(t,e)}}}function po(e){let t,n;return t=new mn({}),{c(){Ne(t.$$.fragment)},m(e,r){Te(t,e,r),n=!0},p:P,i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Ae(t.$$.fragment,e),n=!1},d(e){Pe(t,e)}}}function go(e){let t,n,r,s={ctx:e,current:null,token:null,hasCatch:!0,pending:po,then:ho,catch:fo,value:2,error:3,blocks:[,,,]};return ze(n=st(e[0].data),s),{c(){t=K("div"),s.block.c(),te(t,"class","TableBlockContent")},m(e,n){W(e,t,n),s.block.m(t,s.anchor=null),s.mount=()=>t,s.anchor=null,r=!0},p(t,[r]){e=t,s.ctx=e,1&r&&n!==(n=st(e[0].data))&&ze(n,s)||qe(s,e,r)},i(e){r||(Se(s.block),r=!0)},o(e){for(let e=0;e<3;e+=1){Ae(s.blocks[e])}r=!1},d(e){e&&V(t),s.block.d(),s.token=null,s=null}}}const mo={match:e=>"object"==typeof e&&"table"in e||Array.isArray(e)||at(e),normalize:e=>{if(Array.isArray(e))return{data:e,table:{}};if(at(e))return function(e){const t=[];for(const n of e.columns){let r="unknown";for(const t of e.rows){const e=t[n];if(null!=e){r=typeof e;break}}t.push(r)}const n=e.columns.map(((e,n)=>({id:e,type:t[n]})));return{data:e.rows,table:{columns:n}}}(e);if("object"==typeof e)return e;throw new Error("unsupported data type")}};function bo(e,t,n){let{block:r}=t,{state:o}=t;return s(r),e.$$set=e=>{"block"in e&&n(0,r=e.block),"state"in e&&n(1,o=e.state)},[r,o]}var wo=Object.freeze({__proto__:null,default:class extends Fe{constructor(e){super(),Ue(this,e,bo,go,B,{block:0,state:1})}},definition:mo});function $o(e){let t,n;return t=new kn({props:{markdown:e[0].description}}),{c(){Ne(t.$$.fragment)},m(e,r){Te(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.markdown=e[0].description),t.$set(r)},i(e){n||(Se(t.$$.fragment,e),n=!0)},o(e){Ae(t.$$.fragment,e),n=!1},d(e){Pe(t,e)}}}function yo(e){let t,n,r,s,o,i,l,a,c,u,f=(e[0].title||"")+"",d=e[0].description&&$o(e);var h=e[1];function p(e){return{props:{block:e[0],state:e[3]}}}return h&&(a=new h(p(e))),{c(){t=K("div"),n=K("div"),r=X(f),o=G(),d&&d.c(),i=G(),l=K("div"),a&&Ne(a.$$.fragment),te(n,"class",s="title "+(!e[0].title&&"invisible")),te(l,"class","content"),te(t,"class",c="SingleBlock _block_"+e[2])},m(e,s){W(e,t,s),D(t,n),D(n,r),D(t,o),d&&d.m(t,null),D(t,i),D(t,l),a&&Te(a,l,null),u=!0},p(e,[o]){(!u||1&o)&&f!==(f=(e[0].title||"")+"")&&ne(r,f),(!u||1&o&&s!==(s="title "+(!e[0].title&&"invisible")))&&te(n,"class",s),e[0].description?d?(d.p(e,o),1&o&&Se(d,1)):(d=$o(e),d.c(),Se(d,1),d.m(t,i)):d&&(Oe(),Ae(d,1,1,(()=>{d=null})),Ee());const g={};if(1&o&&(g.block=e[0]),h!==(h=e[1])){if(a){Oe();const e=a;Ae(e.$$.fragment,1,0,(()=>{Pe(e,1)})),Ee()}h?(a=new h(p(e)),Ne(a.$$.fragment),Se(a.$$.fragment,1),Te(a,l,null)):a=null}else h&&a.$set(g);(!u||4&o&&c!==(c="SingleBlock _block_"+e[2]))&&te(t,"class",c)},i(e){u||(Se(d),a&&Se(a.$$.fragment,e),u=!0)},o(e){Ae(d),a&&Ae(a.$$.fragment,e),u=!1},d(e){e&&V(t),d&&d.d(),a&&Pe(a)}}}function vo(e,t,n){let r,{data:s}=t,{block_impl:o}=t;return e.$$set=e=>{"data"in e&&n(0,s=e.data),"block_impl"in e&&n(1,o=e.block_impl)},e.$$.update=()=>{1&e.$$.dirty&&n(2,r=s.style||"normal")},[s,o,r,{is_narrow:!1,collapsed:!1}]}N.blocks.image=Xe,N.blocks.text=An,N.blocks.chart=br,N.blocks.table=wo;class ko extends Fe{constructor(e){super(),Ue(this,e,vo,yo,B,{data:0,block_impl:1})}}T.run=async function({data:e}={}){try{let t;if(!e){const n=function(){const e=new URLSearchParams(window.location.search).get("data_url");if(e)return e;{let e=window.location.pathname;e.startsWith("/")||(e+="/");const t=/:([^:]+)$/i;return e.replace(t,"")}}();t=Qe(n),e=await rt(n)}e.css_url&&et([e.css_url],"parallel");const n=function(e,t){const n=N.blocks;if(null==e)throw new Error("block not defined");if("object"==typeof e){const t=e;if(t.block){if(!Array.isArray(t.block)||2!=t.block.length)throw new Error("invalid block, it should be `block: [block_name, 0.1]`");return t.block[0]}for(const e in n){const{definition:r}=n[e];if(r.match(t))return e}}if(t){const e=N.blocks_for_file_extensions[t];if(e)return e}if(Array.isArray(e)||"object"==typeof e)return"table";if("string"==typeof e)return"text"}(e,t);if(n){const{definition:t,default:r}=N.blocks[n],s=t.normalize?t.normalize(e):e;new ko({target:document.body,props:{data:s,block_impl:r}})}else{const t=function(e,t){throw new Error("not implemented")}();if(!t)throw new Error("can't find block or app");const{definition:n,default:r}=N.apps[t],s={data:n.normalize?n.normalize(e):e};new r({target:document.body,props:s})}}catch(e){console.error(e),new De({target:document.body,props:{error:e}})}}}();
