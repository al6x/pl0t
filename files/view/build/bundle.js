!function(){"use strict";function t(t,e){var n;const r=null===(n=window)||void 0===n?void 0:n.env[t];return null!=r?r:null!=e?e:void 0}let e="Deno"in window?window.Deno:void 0;function n(t){return t&&t.toJSON?t.toJSON():t}const r=[];let o,i=0,s=!1;function a(){s||(s=!0,setTimeout((async()=>{for(;i<r.length;){let{name:t,test:n}=r[i];i+=1;try{console.log(`  test | ${t}`);let e=n();e&&await e}catch(n){if(console.error(`  test | ${t} failed`),console.error(n),null!=e)throw n}}s=!1}),0))}window.runTests=a;try{o=(t("test")||"").toLowerCase()}catch(t){o="false"}let l="all"==o||"true"==o;function c(t,e){r.push({name:t,test:e}),(l||t.toLowerCase()==o)&&a()}const u=function(t,e){const n=e?e instanceof Function?e():e:"Assertion error!";if(!t)throw new Error(n)};function f(t){return null===t||"object"!=typeof t?t:Array.isArray(t)?t.map(f):"toJSON"in t?f(t.toJSON()):Object.assign({},...Object.entries(t).sort((([t],[e])=>t.localeCompare(e))).map((([t,e])=>({[t]:f(e)}))))}function d(t,e=!0){return e?JSON.stringify(f(t),null,2):JSON.stringify(f(t))}function m(t,e){return null===(t=e(t))||"object"!=typeof t?t:"map"in t?t.map((t=>m(t,e))):Object.assign({},...Object.entries(t).map((([t,n])=>({[t]:m(n,e)}))))}function p(t,e){const n=e.match(t);return n?1==n.length?[]:n.slice(1,n.length):[]}function g(t){if(t instanceof Array)return t.length;if(t instanceof String||"string"==typeof t)return t.length;{let e=0;for(const n in t)t.hasOwnProperty(n)&&e++;return e}}function h(t){const e=p(/^(\s+)/,t=t.replace(/^\s*\n|[\n\s]+$/,""));return 0==e.length?t:t.split("\n").map((t=>t.startsWith(e[0])?t.replace(e[0],""):t)).join("\n")}function w(t,e){if(t instanceof Array)for(let n=0;n<t.length;n++)e(t[n],n);else if(t instanceof Map)for(const[n,r]of t)e(r,n);else for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function $(t,e){const n=e instanceof Function?e:t=>t==e;if(t instanceof Array)for(let e=0;e<t.length;e++){if(n(t[e],e))return t[e];for(const e in t)if(t.hasOwnProperty(e)&&n(t[e],e))return t[e]}}function b(t,e){if(e=e||(t=>t),0==t.length)return-1;let n=e(t[0]),r=0;for(let o=1;o<t.length;o++){let i=e(t[o]);i<n&&(n=i,r=o)}return r}function v(t,e){if(e=e||(t=>t),0==t.length)return-1;let n=e(t[0]),r=0;for(let o=1;o<t.length;o++){let i=e(t[o]);i>n&&(n=i,r=o)}return r}function y(t,e=!1){return k(t,.5,e)}function k(t,e,n=!1){const r=n?t:[...t].sort(((t,e)=>t-e)),o=(r.length-1)*e,i=Math.floor(o),s=o-i;return void 0!==r[i+1]?r[i]+s*(r[i+1]-r[i]):r[i]}function x(t,e){const n=[];let r=0;for(;;){const o=[];r<t.length&&n.push(o);for(let i=0;i<e;i++){if(!(r+i<t.length))return n;o.push(t[r+i])}r+=e}}function _(t,e){if(t instanceof Array){const n=new Array,r=new Array,o=e instanceof Function?e:(t,n)=>e.includes(n);return w(t,((t,e)=>o(t,e)?n.push(t):r.push(t))),[n,r]}{const n={},r={},o=e instanceof Function?e:(t,n)=>e.includes(n);return w(t,((t,e)=>o(t,e)?n[e]=t:r[e]=t)),[n,r]}}function j(t,e,n=!1){if(0==t.length)return t;{const r=typeof e(t[0]);let o,i;if("number"==r)o=function(t,n){return e(t)-e(n)};else if("boolean"==r)o=function(t,n){return(e(t)?1:0)-(e(n)?1:0)};else{if("string"!=r)throw new Error(`invalid return type for 'by' '${r}'`);o=function(t,n){return e(t).localeCompare(e(n))}}return i=[...t],i.sort(o),n&&i.reverse(),i}}function O(t,e){if(t instanceof Array){const n=[];return w(t,((t,r)=>{const o=e(t,r);!1!==o&&n.push(o)})),n}if(t instanceof Map){const n=new Map;return w(t,((t,r)=>{const o=e(t,r);!1!==o&&n.set(r,o)})),n}{const n={};return w(t,((t,r)=>{const o=e(t,r);!1!==o&&(n[r]=o)})),n}}function E(t,e){if("object"==typeof t&&"found"in t){if(t.found)return t.value;throw new Error(t.message||`value${e?" "+e:""} not found`)}if("string"==typeof t){if(""==t)throw new Error(`string value${e?" "+e:""} not found`);return t}if(void 0===t)throw new Error(`value${e?" "+e:""} not defined`);return t}function q(t,e,n){return w(t,((t,r)=>e=n(e,t,r))),e}function M(t){return q(t,0,((t,e)=>t+e))}function C(t,e){if(t instanceof Array)return t.map(e);if(t instanceof Map){const n=new Map;return w(t,((t,r)=>n.set(r,e(t,r)))),n}{const n={};return w(t,((t,r)=>n[r]=e(t,r))),n}}function S(t,e=0){return 0==e?Math.round(t):Math.round((t+Number.EPSILON)*Math.pow(10,e))/Math.pow(10,e)}function A(t,e,n=!1){let r;return(...o)=>{n?(n=!1,t(...o)):(r&&clearTimeout(r),r=setTimeout((()=>t(...o)),e))}}function N(t,e="Unknown error"){return t&&"object"==typeof t&&t instanceof Error?(t.message||(t.message=e),t):new Error(""+(t||e))}function z(t){return{is_error:!1,value:t}}function P(t){return{is_error:!0,message:t}}u.equal=(t,e,n)=>{if(!function(t,e){return d(t)===d(e)}(t,e)){const r=n?n instanceof Function?n():n:`Assertion error: ${d(t,!0)} != ${d(e,!0)}`;throw new Error(r)}},u.fail=(t,e)=>{let n=!1;try{t()}catch(t){n=!0}if(!n){const t=e?e instanceof Function?e():e:"Assertion error: expected to fail but didn't";throw new Error(t)}},u.approxEqual=(t,e,n,r)=>{r=r||.001;const o=(Math.abs(t)+Math.abs(e))/2*r;if(Math.abs(t-e)>o){const r=n?n instanceof Function?n():n:`Assertion error: ${d(t,!0)} != ${d(e,!0)}`;throw new Error(r)}},c("deepMap",(()=>{class t{constructor(t){this.v=t}toJSON(){return this.v}}const e=new t([1,2]);u.equal(m(e,n),[1,2]);const r=new t([e,3]);u.equal(m(r,n),[[1,2],3])})),Promise.prototype.toJSON=function(){return"Promise"},Object.defineProperty(Promise.prototype,"cmap",{configurable:!1,enumerable:!1}),c("parse",(()=>{u.equal(p(/.+ (\d+) (\d+)/,"a 22 45"),["22","45"]),u.equal(p(/[^;]+;/,"drop table; create table;"),[])})),c("parseNamed",(()=>{u.equal(function(t,e){const n=e.match(t);return(null==n?void 0:n.groups)||{}}(/.+ (?<a>\d+) (?<b>\d+)/,"a 22 45"),{a:"22",b:"45"})})),c("dedent",(()=>{u.equal(h("\n  a\n  b\n    c"),"a\nb\n  c")})),c("groupByN",(()=>{u.equal(x([1,2,3],2),[[1,2],[3]]),u.equal(x([1,2],2),[[1,2]]),u.equal(x([1],2),[[1]]),u.equal(x([],2),[])})),c("sortBy",(()=>{u.equal(j([{v:!0},{v:!1}],(({v:t})=>t)),[{v:!1},{v:!0}]),u.equal(j([{v:"b"},{v:""},{v:"c"}],(({v:t})=>t)),[{v:""},{v:"b"},{v:"c"}])})),c("pick",(()=>{var t;u.equal((t=["a"],_({a:1,b:2},((e,n)=>t.includes(n)))[0]),{a:1})})),c("round",(()=>{u.equal(S(.05860103881518906,2),.06)})),Error.prototype.toJSON=function(){return{message:this.message,stack:this.stack}},Map.prototype.toJSON=function(){return q(this,{},((t,e,n)=>(t[n]=e,t)))};class T{constructor(t){this.v=t}get(){return this.v}set(t){this.v=t}}function F(e){return/\//.test(e)?function(){const e=t("base_url");if(void 0===e)throw new Error("base_url not specified");return e}()+e:e}async function J(t,e){if("parallel"==e){const e=t.map(U);for(const t of e)await t}else for(const e of t)await U(e)}const L={};async function U(t){if(!(t in L)){const e=F(t);if(t.endsWith(".js"))L[t]=function(t){return new Promise(((e,n)=>{let r=F(t);const o=document.createElement("script");o.src=r,o.onerror=()=>{o.remove(),n(new Error(`Cannot load ${r}`))},o.onload=()=>{o.remove(),e()},document.body.append(o)}))}(e);else{if(!t.endsWith(".css"))throw new Error(`should be script or style url '${t}'`);L[t]=function(t){return new Promise(((e,n)=>{const r=document.createElement("link");r.rel="stylesheet",r.onerror=()=>{r.remove(),n(new Error(`Cannot load ${t}`))},r.onload=()=>{e()},r.href=t,document.head.appendChild(r)}))}(e)}}return L[t]}async function W(t){let e=await fetch(function(t,e={}){const n=[];for(const t in e){const r=e[t];null!=t&&null!=r&&n.push(`${encodeURIComponent(t)}=${encodeURIComponent(""+e[t])}`)}return n.length>0?`${t}${t.includes("?")?"&":"?"}${n.join("&")}`:t}(t,{clearcache:Math.random()}));return async function(t,e="some.json"){if(e.endsWith(".json"))return JSON.parse(t);if(e.endsWith(".yaml")||e.endsWith(".yml"))return async function(t){return(await R()).load(t)}(t);throw new Error(`unknown data format '${e}'`)}(await e.text(),t)}async function B(t){if(void 0===t)throw new Error("nether data or data url provided");return"object"==typeof t&&"url"in t?await W(t.url):t}async function I(t){return(await R()).dump(t,{skipInvalid:!0,noRefs:!0})}async function R(){await J(["/vendor/js-yaml-4.1.0/js-yaml.min.js"],"serial");const t=window.jsyaml;if(!t)throw new Error("can't load 'js-yaml' library");return t}const D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function V(){}function H(t){return t()}function K(){return Object.create(null)}function G(t){t.forEach(H)}function Q(t){return"function"==typeof t}function X(t,e){return t!=t?e==e:t!==e}function Y(t){return null==t?"":t}function Z(t,e){t.appendChild(e)}function tt(t,e,n){t.insertBefore(e,n||null)}function et(t){t.parentNode.removeChild(t)}function nt(t){return document.createElement(t)}function rt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ot(t){return document.createTextNode(t)}function it(){return ot(" ")}function st(){return ot("")}function at(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function lt(t){return function(e){return e.preventDefault(),t.call(this,e)}}function ct(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ut(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function ft(t,e){t.value=null==e?"":e}function dt(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function mt(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}}let pt,gt;function ht(){if(void 0===pt){pt=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){pt=!0}}return pt}c("escapeHtml",(()=>{var t;u.equal(null==(t="<div>")?"":(""+t).replace(/[&<>'"]/g,(function(t){return D[t]})),"&lt;div&gt;")}));class wt{constructor(t=null){this.a=t,this.e=this.n=null}m(t,e,n=null){this.e||(this.e=nt(e.nodeName),this.t=e,this.h(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)tt(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(et)}}function $t(t){gt=t}function bt(){if(!gt)throw new Error("Function called outside component initialization");return gt}const vt=[],yt=[],kt=[],xt=[],_t=Promise.resolve();let jt=!1;function Ot(t){kt.push(t)}function Et(t){xt.push(t)}let qt=!1;const Mt=new Set;function Ct(){if(!qt){qt=!0;do{for(let t=0;t<vt.length;t+=1){const e=vt[t];$t(e),St(e.$$)}for($t(null),vt.length=0;yt.length;)yt.pop()();for(let t=0;t<kt.length;t+=1){const e=kt[t];Mt.has(e)||(Mt.add(e),e())}kt.length=0}while(vt.length);for(;xt.length;)xt.pop()();jt=!1,qt=!1,Mt.clear()}}function St(t){if(null!==t.fragment){t.update(),G(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ot)}}const At=new Set;let Nt;function zt(){Nt={r:0,c:[],p:Nt}}function Pt(){Nt.r||G(Nt.c),Nt=Nt.p}function Tt(t,e){t&&t.i&&(At.delete(t),t.i(e))}function Ft(t,e,n,r){if(t&&t.o){if(At.has(t))return;At.add(t),Nt.c.push((()=>{At.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function Jt(t,e){const n=e.token={};function r(t,r,o,i){if(e.token!==n)return;e.resolved=i;let s=e.ctx;void 0!==o&&(s=s.slice(),s[o]=i);const a=t&&(e.current=t)(s);let l=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&(zt(),Ft(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),Pt())})):e.block.d(1),a.c(),Tt(a,1),a.m(e.mount(),e.anchor),l=!0),e.block=a,e.blocks&&(e.blocks[r]=a),l&&Ct()}if((o=t)&&"object"==typeof o&&"function"==typeof o.then){const n=bt();if(t.then((t=>{$t(n),r(e.then,1,e.value,t),$t(null)}),(t=>{if($t(n),r(e.catch,2,e.error,t),$t(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var o}function Lt(t,e,n){const r=e.slice(),{resolved:o}=t;t.current===t.then&&(r[t.value]=o),t.current===t.catch&&(r[t.error]=o),t.block.p(r,n)}function Ut(t,e){t.d(1),e.delete(t.key)}function Wt(t,e){Ft(t,1,1,(()=>{e.delete(t.key)}))}function Bt(t,e,n,r,o,i,s,a,l,c,u,f){let d=t.length,m=i.length,p=d;const g={};for(;p--;)g[t[p].key]=p;const h=[],w=new Map,$=new Map;for(p=m;p--;){const t=f(o,i,p),a=n(t);let l=s.get(a);l?r&&l.p(t,e):(l=c(a,t),l.c()),w.set(a,h[p]=l),a in g&&$.set(a,Math.abs(p-g[a]))}const b=new Set,v=new Set;function y(t){Tt(t,1),t.m(a,u),s.set(t.key,t),u=t.first,m--}for(;d&&m;){const e=h[m-1],n=t[d-1],r=e.key,o=n.key;e===n?(u=e.first,d--,m--):w.has(o)?!s.has(r)||b.has(r)?y(e):v.has(o)?d--:$.get(r)>$.get(o)?(v.add(r),y(e)):(b.add(o),d--):(l(n,s),d--)}for(;d--;){const e=t[d];w.has(e.key)||l(e,s)}for(;m;)y(h[m-1]);return h}function It(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function Rt(t){t&&t.c()}function Dt(t,e,n,r){const{fragment:o,on_mount:i,on_destroy:s,after_update:a}=t.$$;o&&o.m(e,n),r||Ot((()=>{const e=i.map(H).filter(Q);s?s.push(...e):G(e),t.$$.on_mount=[]})),a.forEach(Ot)}function Vt(t,e){const n=t.$$;null!==n.fragment&&(G(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ht(t,e){-1===t.$$.dirty[0]&&(vt.push(t),jt||(jt=!0,_t.then(Ct)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Kt(t,e,n,r,o,i,s=[-1]){const a=gt;$t(t);const l=t.$$={fragment:null,ctx:null,props:i,update:V,not_equal:o,bound:K(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:e.context||[]),callbacks:K(),dirty:s,skip_bound:!1};let c=!1;if(l.ctx=n?n(t,e.props||{},((e,n,...r)=>{const i=r.length?r[0]:n;return l.ctx&&o(l.ctx[e],l.ctx[e]=i)&&(!l.skip_bound&&l.bound[e]&&l.bound[e](i),c&&Ht(t,e)),n})):[],l.update(),c=!0,G(l.before_update),l.fragment=!!r&&r(l.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);l.fragment&&l.fragment.l(t),t.forEach(et)}else l.fragment&&l.fragment.c();e.intro&&Tt(t.$$.fragment),Dt(t,e.target,e.anchor,e.customElement),Ct()}$t(a)}class Gt{$destroy(){Vt(this,1),this.$destroy=V}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Qt(t){let e,n,r,o,i=N(t[0]).message+"";return{c(){e=nt("div"),n=nt("span"),n.textContent="Error",r=ot(" -\n  "),o=ot(i),ct(n,"class","text-red-600 font-bold")},m(t,i){tt(t,e,i),Z(e,n),Z(e,r),Z(e,o)},p(t,[e]){1&e&&i!==(i=N(t[0]).message+"")&&ut(o,i)},i:V,o:V,d(t){t&&et(e)}}}function Xt(t,e,n){let{error:r}=e;return t.$$set=t=>{"error"in t&&n(0,r=t.error)},[r]}class Yt extends Gt{constructor(t){super(),Kt(this,t,Xt,Qt,X,{error:0})}}function Zt(t){let e,n;return e=new Yt({props:{error:"Data images not supported yet"}}),{c(){Rt(e.$$.fragment)},m(t,r){Dt(e,t,r),n=!0},p:V,i(t){n||(Tt(e.$$.fragment,t),n=!0)},o(t){Ft(e.$$.fragment,t),n=!1},d(t){Vt(e,t)}}}function te(t){let e,n,r;return{c(){e=nt("img"),e.src!==(n=t[1].url)&&ct(e,"src",n),ct(e,"alt",r=t[0].id)},m(t,n){tt(t,e,n)},p(t,o){2&o&&e.src!==(n=t[1].url)&&ct(e,"src",n),1&o&&r!==(r=t[0].id)&&ct(e,"alt",r)},i:V,o:V,d(t){t&&et(e)}}}function ee(t){let e,n,r,o;const i=[te,Zt],s=[];function a(t,e){return"object"==typeof t[1]&&"url"in t[1]?0:1}return n=a(t),r=s[n]=i[n](t),{c(){e=nt("div"),r.c(),ct(e,"class","ImageBlockContent")},m(t,r){tt(t,e,r),s[n].m(e,null),o=!0},p(t,[o]){let l=n;n=a(t),n===l?s[n].p(t,o):(zt(),Ft(s[l],1,1,(()=>{s[l]=null})),Pt(),r=s[n],r?r.p(t,o):(r=s[n]=i[n](t),r.c()),Tt(r,1),r.m(e,null))},i(t){o||(Tt(r),o=!0)},o(t){Ft(r),o=!1},d(t){t&&et(e),s[n].d()}}}function ne(t,e,n){let r,{block:o}=e,{state:i}=e;return t.$$set=t=>{"block"in t&&n(0,o=t.block),"state"in t&&n(2,i=t.state)},t.$$.update=()=>{1&t.$$.dirty&&n(1,r=o.image)},[o,r,i]}let re=!1;async function oe(t){await async function(t){return new Promise((e=>setTimeout(e,t)))}(0),await J(["/vendor/marked-0.8.2/marked.min.js"],"serial");const e=window.marked;if(!e)throw new Error("can't load 'marked' library for markdown");const n=new e.Renderer;let r=0;const o=()=>`__special_katext_id_${r++}__`,i={};function s(t){return t.replace("&gt;",">").replace("&lt;",">").replace("&quot;","'")}function a(t){return t=(t=t.replace(/\$\$([\s\S]+?)\$\$/g,((t,e)=>{const n=o();return i[n]={type:"block",expression:s(e)},n}))).replace(/\$([^\n\s]+?)\$/g,((t,e)=>{const n=o();return i[n]={type:"inline",expression:s(e)},n}))}const l=n.listitem;n.listitem=function(t,e,n){return l(a(t),e,n)};const c=n.paragraph;n.paragraph=function(t){return c(a(t))};const u=n.tablecell;function f(t){e.setOptions({renderer:n,highlight:t,pedantic:!1,gfm:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!0})}let d;if(n.tablecell=function(t,e){return u(a(t),e)},re){const n=window.hljs;if(!n)throw new Error("can't load 'highlightjs' library for markdown");f((t=>n.highlightAuto(t).value)),d=e(h(t))}else{let n=!1;if(f((t=>(n=!0,""))),d=e(h(t)),n)return await J(["/vendor/highlight.js-11.0.1/default.min.css","/vendor/highlight.js-11.0.1/highlight.min.js"],"parallel"),re=!0,oe(t)}return d.includes("__special_katext_id_")&&(await J(["/vendor/katex-0.11.1/katex.css","/vendor/katex-0.11.1/katex.min.js"],"parallel"),d=d.replace(/(__special_katext_id_\d+__)/g,((t,e)=>{let{type:n,expression:r}=i[e];return r=r.replace(/<br\/>/g,"\\\\"),window.katex.renderToString(r,{output:"html",displayMode:"block"==n,throwOnError:!1})}))),d}function ie(t){let e,n;return{c(){e=nt("div"),n=ot(t[0])},m(t,r){tt(t,e,r),Z(e,n)},p(t,[e]){1&e&&ut(n,t[0])},i:V,o:V,d(t){t&&et(e)}}}function se(t,e,n){let{text:r="Processing..."}=e;return t.$$set=t=>{"text"in t&&n(0,r=t.text)},[r]}class ae extends Gt{constructor(t){super(),Kt(this,t,se,ie,X,{text:0})}}function le(t){let e,n,r=t[0].html+"";return{c(){n=st(),e=new wt(n)},m(t,o){e.m(r,t,o),tt(t,n,o)},p(t,n){1&n&&r!==(r=t[0].html+"")&&e.p(r)},i:V,o:V,d(t){t&&et(n),t&&e.d()}}}function ce(t){let e,n;return e=new Yt({props:{error:t[0].error}}),{c(){Rt(e.$$.fragment)},m(t,r){Dt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.error=t[0].error),e.$set(r)},i(t){n||(Tt(e.$$.fragment,t),n=!0)},o(t){Ft(e.$$.fragment,t),n=!1},d(t){Vt(e,t)}}}function ue(t){let e,n;return e=new ae({}),{c(){Rt(e.$$.fragment)},m(t,r){Dt(e,t,r),n=!0},p:V,i(t){n||(Tt(e.$$.fragment,t),n=!0)},o(t){Ft(e.$$.fragment,t),n=!1},d(t){Vt(e,t)}}}function fe(t){let e,n,r,o;const i=[ue,ce,le],s=[];function a(t,e){return"empty"==t[0].state?0:"error"==t[0].state?1:2}return n=a(t),r=s[n]=i[n](t),{c(){e=nt("div"),r.c(),ct(e,"class","markdown")},m(t,r){tt(t,e,r),s[n].m(e,null),o=!0},p(t,[o]){let l=n;n=a(t),n===l?s[n].p(t,o):(zt(),Ft(s[l],1,1,(()=>{s[l]=null})),Pt(),r=s[n],r?r.p(t,o):(r=s[n]=i[n](t),r.c()),Tt(r,1),r.m(e,null))},i(t){o||(Tt(r),o=!0)},o(t){Ft(r),o=!1},d(t){t&&et(e),s[n].d()}}}function de(t,e,n){let{markdown:r}=e,o={state:"empty"};return t.$$set=t=>{"markdown"in t&&n(1,r=t.markdown)},t.$$.update=()=>{if(3&t.$$.dirty&&("empty"==o.state||o.markdown!=r)){const t=r;oe(r).then((e=>{n(0,o={state:"success",markdown:t,html:e})})).catch((e=>{const r=N(e,"Unknown error while processing markdown").message;n(0,o={state:"error",markdown:t,error:r})}))}},[o,r]}class me extends Gt{constructor(t){super(),Kt(this,t,de,fe,X,{markdown:1})}}function pe(t){let e,n;return e=new Yt({props:{error:t[3]}}),{c(){Rt(e.$$.fragment)},m(t,r){Dt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.error=t[3]),e.$set(r)},i(t){n||(Tt(e.$$.fragment,t),n=!0)},o(t){Ft(e.$$.fragment,t),n=!1},d(t){Vt(e,t)}}}function ge(t){let e,n;return e=new me({props:{markdown:t[2]}}),{c(){Rt(e.$$.fragment)},m(t,r){Dt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.markdown=t[2]),e.$set(r)},i(t){n||(Tt(e.$$.fragment,t),n=!0)},o(t){Ft(e.$$.fragment,t),n=!1},d(t){Vt(e,t)}}}function he(t){let e,n;return e=new ae({}),{c(){Rt(e.$$.fragment)},m(t,r){Dt(e,t,r),n=!0},p:V,i(t){n||(Tt(e.$$.fragment,t),n=!0)},o(t){Ft(e.$$.fragment,t),n=!1},d(t){Vt(e,t)}}}function we(t){let e,n,r,o={ctx:t,current:null,token:null,hasCatch:!0,pending:he,then:ge,catch:pe,value:2,error:3,blocks:[,,,]};return Jt(n=B(t[0].text),o),{c(){e=nt("div"),o.block.c(),ct(e,"class","TextBlockContent")},m(t,n){tt(t,e,n),o.block.m(e,o.anchor=null),o.mount=()=>e,o.anchor=null,r=!0},p(e,[r]){t=e,o.ctx=t,1&r&&n!==(n=B(t[0].text))&&Jt(n,o)||Lt(o,t,r)},i(t){r||(Tt(o.block),r=!0)},o(t){for(let t=0;t<3;t+=1){Ft(o.blocks[t])}r=!1},d(t){t&&et(e),o.block.d(),o.token=null,o=null}}}function $e(t,e,n){let{block:r}=e,{state:o}=e;return t.$$set=t=>{"block"in t&&n(0,r=t.block),"state"in t&&n(1,o=t.state)},[r,o]}const be=["width","height","config"];function ve(t){for(const e in t)if(be.indexOf(e)<0)throw new Error(`invalid property '${e}'`);return He("width",t.width,["number","undefined"]),He("height",t.height,["number","undefined"]),t}const ye=["linear","linear-closed","step","step-before","step-after","basis","basis-open","basis-closed","cardinal","cardinal-open","cardinal-closed","bundle","monotone"];const ke=["point","circle","line","area","bar","rect","rule","square","text","tick","trail"];function xe(t){if(ke.indexOf(t)<0)throw new Error(`invalid mark '${t}', available are ${ke.join(", ")}`);return t}const _e=["mark","color","size","point","interpolate","opacity","thickness","vega"];function je(t){for(const e in t)if(_e.indexOf(e)<0)throw new Error(`unknown mark property '${e}', available are ${_e.join(", ")}`);const{mark:e,color:n,size:r,point:o,interpolate:i,opacity:s,thickness:a,vega:l}=t;return He("color",n,["string","undefined"]),He("size",r,["number","undefined"]),He("point",o,["boolean","undefined"]),i&&function(t){if(ye.indexOf(t)<0)throw new Error(`invalid interpolate '${t}', available are ${ye.join(", ")}`)}(i),He("opacity",s,["number","undefined"]),He("thickness",a,["number","undefined"]),He("vega",l,["object","undefined"]),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({type:xe(e)},void 0!==n?{color:n}:{}),void 0!==r?{size:r}:{}),void 0!==o?{point:o}:{}),void 0!==i?{interpolate:i}:{}),void 0!==s?{opacity:s}:{}),void 0!==a?{thickness:a}:{}),void 0!==l?l:{})}const Oe=["nominal","ordinal","quantitative","temporal"];const Ee=["linear","pow","sqrt","symlog","log","time","utc","ordinal","band","point","bin-ordinal","quantile","quantize","threshold"];const qe=["count","valid","missing","distinct","sum","mean","average","variance","variancep","stdev","stdevp","stderr","median","q1","q3","ci0","ci1","min","max","argmin","argmax","product"];const Me=["x","y","x2","y2","xError","yError","xError2","yError2","longitude","latitude","longitude2","latitude2","color","opacity","fillOpacity","strokeOpacity","shape","size","strokeWidth","text","tooltip","href","detail","key","order"];const Ce=["year","yearquarter","yearquartermonth","yearmonth","yearmonthdate","yearmonthdatehours","yearmonthdatehoursminutes","yearmonthdatehoursminutesseconds","quarter","quartermonth","month","monthdate","date","day","hours","hoursminutes","hoursminutesseconds","minutes","minutesseconds","seconds","secondsmilliseconds","milliseconds"];function Se(t){if(Ce.indexOf(t)<0)throw new Error(`invalid time unit '${t}', available are ${Ce.join(", ")}`);return t}function Ae(t){if(He("bin",t,["string","number","boolean","undefined"]),"string"==typeof t&&"binned"!=t)throw new Error("bin should have type of \"boolean | number | 'binned'\"");return"boolean"==typeof t||"string"==typeof t?t:{base:t,maxbins:t}}const Ne=["calculate","as"];function ze(t){for(const e in t)if(Ne.indexOf(e)<0)throw new Error(`unknown calculate property '${e}', available are ${Ne.join(", ")}`);return t}const Pe=["filter"];function Te(t){for(const e in t)if(Pe.indexOf(e)<0)throw new Error(`unknown filter property '${e}', available are ${Pe.join(", ")}`);return t}const Fe=["type","aggregate","legend","title","labels","time_unit","timeUnit","bin","zero","domain","range","scale","value","override_value","scheme","reverse","vega"];function Je(t){const e=[];for(const n in t)if(Fe.indexOf(n)<0){if(Me.indexOf(n)<0)throw new Error(`unknown encoding property '${n}', available are ${Me.join(", ")}, ${Fe.join(", ")}`);e.push(n)}if(0==e.length)throw new Error(`encoding channel not specified, please specify one of ${Me.join(", ")}`);if(e.length>1)throw new Error(`only one channel allowed in the same encoding, leave only one of ${e.join(", ")}`);t.type&&function(t){if(Oe.indexOf(t)<0)throw new Error(`invalid field type '${t}', available are ${Oe.join(", ")}`)}(t.type),t.aggregate&&function(t){if(qe.indexOf(t)<0)throw new Error(`invalid aggregate '${t}', available are ${qe.join(", ")}`)}(t.aggregate),He("legend",t.legend,["string","boolean","undefined"]),He("title",t.title,["string","boolean","undefined"]),He("labels",t.labels,["boolean","undefined"]),t.time_unit&&Se(t.time_unit),t.timeUnit&&Se(t.timeUnit),t.bin&&Ae(t.bin),He("zero",t.zero,["boolean","undefined"]),t.scale&&function(t){if(Ee.indexOf(t)<0)throw new Error(`invalid scale type '${t}', available are ${Ee.join(", ")}`)}(t.scale),t.domain&&function(t){t.map((t=>(He("scale domain",t,["number","string","boolean"]),t)))}(t.domain),t.range&&function(t){"string"==typeof t?He("scale range",t,["string"]):t.map((t=>(He("scale domain",t,["number","string"]),t)))}(t.range),He("scheme",t.scheme,["string","undefined"]),He("reverse",t.reverse,["boolean","undefined"]),He("vega",t.vega,["object","undefined"]);const{type:n,title:r,labels:o,aggregate:i,legend:s,timeUnit:a,time_unit:l,bin:c,zero:u,domain:f,range:d,scale:m,value:p,scheme:g,reverse:h,vega:w,override_value:$}=t,b=Me.find((e=>e in t));if(!b)throw new Error(`Channel not found in ${JSON.stringify(t)}!`);const v=t[b],y=Object.assign(Object.assign(Object.assign({},void 0!==w&&"axis"in w?w.axis:{}),r&&"string"==typeof r?{title:r}:r?{}:{title:null}),void 0!==o?{labels:o}:{}),k=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},void 0!==w&&"scale"in w?w.scale:{}),void 0!==m?{type:m}:{}),void 0!==f?{nice:!1}:{}),void 0!==u?{zero:u}:{}),void 0!==f?{domain:f}:{}),void 0!==d?{range:d}:{}),void 0!==g?{scheme:g}:{}),void 0!==h?{reverse:h}:{});let x,_=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},void 0!==w?w:{}),""!==v?{field:v}:{}),{type:n||"quantitative"}),void 0!==i?{aggregate:i}:{}),void 0!==s?{legend:s}:{legend:!1}),void 0!==a?{timeUnit:a}:{}),void 0!==l?{timeUnit:l}:{}),Object.keys(y).length>0?{axis:y}:{}),Object.keys(k).length>0?{scale:k}:{}),void 0!==c?{bin:Ae(c)}:{});if(p){const t=function(t,e,n){const r=t=>{if(void 0===t)throw new Error("encoding value shouldn't be undefined");return He("encoding value",t,["number","string","boolean"]),t};if(Array.isArray(t)){if("condition"in n)throw new Error("Conditional value can't be used with condition!");if(2==t.length){const[e,o]=t;return[Object.assign(Object.assign({},n),{condition:{test:e,value:r(o)}}),void 0]}if(3==t.length){const[e,o,i]=t;return[Object.assign(Object.assign({},n),{value:r(i),condition:{test:e,value:r(o)}}),void 0]}throw new Error("encoding value should be a simple value or array with 2 ['datum.value > 0', 'green'] or 3 elements ['datum.value > 0', 1, -1]")}if(Le.indexOf(e)>=0){if(""!=n.field&&void 0!==n.field&&null!==n.field)throw new Error(`value on ${Le.join(", ")} channels cannot be used with 'field'`);const e=[{explicit_value:r(t)}];return[Object.assign(Object.assign({},n),{field:"explicit_value"}),e]}return[Object.assign(Object.assign({},n),{value:r(t)}),void 0]}(p,b,_);_=t[0],x=t[1]}return[b,_,x]}const Le=["x","y"];const Ue=["concat"];function We(t){for(const e in t)if(Ue.indexOf(e)<0)throw new Error(`unknown concat property '${e}', available are ${Ue.join(", ")}`);return t}function Be(t){const e=[];let n,r={},o=[],i=[],s={};const a=[],l=[];for(const c of t)if("string"==typeof c)e.push(xe(c));else if("mark"in c)e.push(je(c));else if(Array.isArray(c))i=[...i,Ie(c)];else if("calculate"in c)o.push(ze(c));else if("filter"in c)o.push(Te(c));else if("facet"in c||"row"in c||"column"in c)a.push(c);else if("concat"in c)l.push(We(c));else if("height"in c||"width"in c||"config"in c)s=Object.assign(Object.assign({},s),ve(c));else if(Me.some((t=>t in c))){const[t,e,n]=Je(c);if(t in e)throw new Error(`Can't redefine channel ${t}!`);if(void 0!==n)throw new Error(`Explicit value for '${t}' allowed only inside of a layer`);r=Object.assign(Object.assign({},r),{[t]:e})}else{if(!("vega"in c))throw new Error(`unknown plot part ${JSON.stringify(c)}`);n=c.vega}if(e.length>1)throw new Error(`Multiple marks found ${e.join(", ")}`);const c=Object.assign(Object.assign(Object.assign({},o.length>0?{transform:o}:{}),s),n||{});function u(){return Object.assign(Object.assign(Object.assign({},e.length>0?{mark:e[0]}:{}),Object.keys(r).length>0?{encoding:r}:{}),i.length>0?{layer:i}:{})}if(a.length>0){if(l.length>0)throw new Error("concat can't be used with facet");return function(t,e,n){let r;for(const e of t)"facet"in e&&(r=e);if(r){if(t.length>1)throw new Error("Can't other facets with 'facet' keyword");return Object.assign(Object.assign(Object.assign({facet:{field:r.facet,type:r.type||"ordinal",header:{title:null}}},void 0!==r.columns?{columns:r.columns}:{}),{spec:e}),n)}{if(t.filter((t=>"row"in t)).length>1)throw new Error("Facet can't have more than one row");if(t.filter((t=>"column"in t)).length>1)throw new Error("Facet can't have more than one column");let r,o;for(const e of t)"row"in e&&(r=e),"column"in e&&(o=e);return Object.assign({facet:Object.assign(Object.assign({},r?{row:{field:r.row,type:r.type||"ordinal",header:{title:null}}}:{}),o?{column:{field:o.column,type:o.type||"ordinal",header:{title:null}}}:{}),spec:e},n)}}(a,u(),c)}if(l.length>0){if(l.length>1)throw new Error("there could be only one concat");if(a.length>0)throw new Error("concat can't be used with facet");if(e.length>0)throw new Error("top level mark can't be used with concat");if(Object.keys(r).length>0)throw new Error("top level encoding can't be used with concat");if(0==i.length)throw new Error("concat requires at least one layer");return Object.assign({["vertical"==l[0].concat?"vconcat":"hconcat"]:i},c)}return Object.assign(Object.assign({},u()),c)}function Ie(t){const e=[],n=[];let r,o,i={},s={};for(const a of t)if("string"==typeof a)e.push(xe(a));else if("mark"in a)e.push(je(a));else if("calculate"in a)n.push(ze(a));else if("filter"in a)n.push(Te(a));else if("height"in a||"width"in a)s=Object.assign(Object.assign({},s),ve(a));else if(Me.some((t=>t in a))){const[t,e,n]=Je(a);if(t in e)throw new Error(`Can't redefine channel ${t}!`);o=n,i=Object.assign(Object.assign({},i),{[t]:e})}else{if(!("vega"in a))throw new Error(`unknown plot layer part ${JSON.stringify(a)}`);r=a.vega}if(e.length>1)throw new Error(`Multiple marks found ${e.join(", ")}`);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n.length>0?{transform:n}:{}),e.length>0?{mark:e[0]}:{}),Object.keys(i).length>0?{encoding:i}:{}),s),o?{data:{values:o}}:{}),r||{})}function Re(t,e){if(t instanceof Array)return 0==t.length?[]:Array.isArray(t[0])?function(t,e){return t.map((t=>{const n={};for(let r=0;r<t.length;r++){if(!(r<e.length))throw new Error("there are more values in row than columns");n[e[r]]=t[r]}return n}))}(t,e||De).map(Ve):t.map(Ve);{if(!(t instanceof Object))throw new Error("Arrays data expected to be an Object");const e=Object.keys(t);if(0==e.length)throw new Error("Empty arrays data!");const n=e[0],r=t[n].length;for(const o of e)if(t[o].length!=r)throw new Error(`Arrays data has arrays of different length ${o} - ${t[o].length} and ${n} - ${r}`);const o=[];for(let n=0;n<r;n++){const r={};for(const o of e){const e=t[o][n];null!=e&&(r[o]=e)}o.push(r)}return o}}const De="abcdefghijklmnopqrstuvwxyz".split("");function Ve(t){const e={};for(let n in t){const r=t[n];null!=r&&(e[n]=r)}return e}function He(t,e,n){if(n.indexOf(typeof e)<0)throw new Error(`invalid type for '${t}' allowed types ${n.join(", ")}`)}function Ke(t){t.finalize()}async function Ge({chart:t,data:e,vega_options:n,is_narrow:r,suggested_width_px:o,vega_view:i,container_el:s}){if(await J(["/vendor/vega/vega-5.9.1.js","/vendor/vega/vega-lite-4.0.2.js","/vendor/vega/vega-embed-6.2.1.js"],"serial"),i&&Ke(i),!s)return;function a(t){return void 0!==o&&r?function(t,e,n){return t.width&&t.width<e||(t=Object.assign(Object.assign({},t),{width:e})),t.height&&t.height<n||(t=Object.assign(Object.assign({},t),{height:n})),t}(t,o,200):t}let l=a("vega_spec"in t?t.vega_spec:Be(t));e&&(l=Object.assign(Object.assign({},l),{data:{values:Re(e)}})),n=n||{};return(await window.vegaEmbed(s,Object.assign(Object.assign({},function({suggested_width_px:t}){return{autosize:{type:"fit",contains:"padding"},width:t}}({suggested_width_px:o})),l),Object.assign(Object.assign({},{}),n))).view}function Qe(t){let e,n;return e=new Yt({props:{error:t[2].error}}),{c(){Rt(e.$$.fragment)},m(t,r){Dt(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.error=t[2].error),e.$set(r)},i(t){n||(Tt(e.$$.fragment,t),n=!0)},o(t){Ft(e.$$.fragment,t),n=!1},d(t){Vt(e,t)}}}function Xe(t){let e,n;return e=new ae({}),{c(){Rt(e.$$.fragment)},m(t,r){Dt(e,t,r),n=!0},p:V,i(t){n||(Tt(e.$$.fragment,t),n=!0)},o(t){Ft(e.$$.fragment,t),n=!1},d(t){Vt(e,t)}}}function Ye(t){let e,n,r,o,i,s,a,l,c,u,f;const d=[Xe,Qe],m=[];function p(t,e){return"empty"==t[2].state?0:"error"==t[2].state?1:-1}return~(n=p(t))&&(r=m[n]=d[n](t)),{c(){e=nt("div"),r&&r.c(),o=it(),i=nt("div"),s=nt("div"),l=it(),c=nt("div"),dt(s,"padding-right","0"),ct(s,"class",a="success"==t[2].state?"":"invisible"),dt(c,"height","0"),dt(c,"width","100%"),Ot((()=>t[9].call(c))),ct(e,"class","VegaChart")},m(r,a){tt(r,e,a),~n&&m[n].m(e,null),Z(e,o),Z(e,i),Z(i,s),t[8](s),Z(e,l),Z(e,c),u=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=nt("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=ht();let o;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=at(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{o=at(n.contentWindow,"resize",e)}),Z(t,n),()=>{(r||o&&n.contentWindow)&&o(),et(n)}}(c,t[9].bind(c)),f=!0},p(t,[i]){let l=n;n=p(t),n===l?~n&&m[n].p(t,i):(r&&(zt(),Ft(m[l],1,1,(()=>{m[l]=null})),Pt()),~n?(r=m[n],r?r.p(t,i):(r=m[n]=d[n](t),r.c()),Tt(r,1),r.m(e,o)):r=null),(!f||4&i&&a!==(a="success"==t[2].state?"":"invisible"))&&ct(s,"class",a)},i(t){f||(Tt(r),f=!0)},o(t){Ft(r),f=!1},d(r){r&&et(e),~n&&m[n].d(),t[8](null),u()}}}function Ze(t,e,n){let{chart:r}=e,{data:o}=e,{vega_options:i}=e,{is_narrow:s=!1}=e,a={state:"empty"};const l=new T(void 0);let c,u,f;const d=A((t=>{t!=f&&n(7,f=t)}),100,!0);var m;return m=()=>{l.get()&&Ke(l.get())},bt().$$.on_destroy.push(m),t.$$set=t=>{"chart"in t&&n(3,r=t.chart),"data"in t&&n(4,o=t.data),"vega_options"in t&&n(5,i=t.vega_options),"is_narrow"in t&&n(6,s=t.is_narrow)},t.$$.update=()=>{2&t.$$.dirty&&d(u),249&t.$$.dirty&&null!=f&&null!=c&&Ge({chart:r,data:o,vega_options:i,is_narrow:s,suggested_width_px:f,vega_view:l.get(),container_el:c}).then((t=>{l.set(t),n(2,a={state:"success"})})).catch((t=>{const e=N(t,"Unknown error while processing vega lite").message;n(2,a={state:"error",error:e})}))},[c,u,a,r,o,i,s,f,function(t){yt[t?"unshift":"push"]((()=>{c=t,n(0,c)}))},function(){u=this.clientWidth,n(1,u)}]}class tn extends Gt{constructor(t){super(),Kt(this,t,Ze,Ye,X,{chart:3,data:4,vega_options:5,is_narrow:6})}}function en(t){let e,n;return e=new Yt({props:{error:t[4]}}),{c(){Rt(e.$$.fragment)},m(t,r){Dt(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.error=t[4]),e.$set(r)},i(t){n||(Tt(e.$$.fragment,t),n=!0)},o(t){Ft(e.$$.fragment,t),n=!1},d(t){Vt(e,t)}}}function nn(t){let e,n;return e=new tn({props:{chart:t[1].chart,data:t[3],vega_options:t[1].vega_options,is_narrow:t[0].is_narrow}}),{c(){Rt(e.$$.fragment)},m(t,r){Dt(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.chart=t[1].chart),2&n&&(r.data=t[3]),2&n&&(r.vega_options=t[1].vega_options),1&n&&(r.is_narrow=t[0].is_narrow),e.$set(r)},i(t){n||(Tt(e.$$.fragment,t),n=!0)},o(t){Ft(e.$$.fragment,t),n=!1},d(t){Vt(e,t)}}}function rn(t){let e,n;return e=new ae({}),{c(){Rt(e.$$.fragment)},m(t,r){Dt(e,t,r),n=!0},p:V,i(t){n||(Tt(e.$$.fragment,t),n=!0)},o(t){Ft(e.$$.fragment,t),n=!1},d(t){Vt(e,t)}}}function on(t){let e,n,r,o={ctx:t,current:null,token:null,hasCatch:!0,pending:rn,then:nn,catch:en,value:3,error:4,blocks:[,,,]};return Jt(n=B(t[1].data),o),{c(){e=nt("div"),o.block.c(),ct(e,"class","ChartBlockContent")},m(t,n){tt(t,e,n),o.block.m(e,o.anchor=null),o.mount=()=>e,o.anchor=null,r=!0},p(e,[r]){t=e,o.ctx=t,2&r&&n!==(n=B(t[1].data))&&Jt(n,o)||Lt(o,t,r)},i(t){r||(Tt(o.block),r=!0)},o(t){for(let t=0;t<3;t+=1){Ft(o.blocks[t])}r=!1},d(t){t&&et(e),o.block.d(),o.token=null,o=null}}}function sn(t,e,n){let{block:r}=e,{state:o}=e,i=r;return t.$$set=t=>{"block"in t&&n(2,r=t.block),"state"in t&&n(0,o=t.state)},t.$$.update=()=>{6&t.$$.dirty&&i.hash!=r.hash&&n(1,i=r)},[o,i,r]}function an(t){switch(t){case"left":return"text-left";case"center":return"text-center";case"right":return"text-right"}}function ln(t){let e,n;return{c(){e=nt("div"),n=ot(t[0]),ct(e,"class",t[1])},m(t,r){tt(t,e,r),Z(e,n)},p(t,[e]){1&e&&ut(n,t[0])},i:V,o:V,d(t){t&&et(e)}}}function cn(t,e,n){let r,{options:o}=e,{value:i}=e;const s=an(o.align||"left")+(o.small?" text-xs":"");return t.$$set=t=>{"options"in t&&n(2,o=t.options),"value"in t&&n(3,i=t.value)},t.$$.update=()=>{8&t.$$.dirty&&n(0,r=null==i?"":i)},[r,s,o,i]}var un=Object.freeze({__proto__:null,default:class extends Gt{constructor(t){super(),Kt(this,t,cn,ln,X,{options:2,value:3})}},compatibleTypes:["number","boolean","string"],align:function(t,e){return t.align||"left"}});function fn(t){let e,n,r=(t[0]?t[2]:t[3])+"";return{c(){e=nt("div"),n=ot(r),ct(e,"class",t[1])},m(t,r){tt(t,e,r),Z(e,n)},p(t,[e]){1&e&&r!==(r=(t[0]?t[2]:t[3])+"")&&ut(n,r)},i:V,o:V,d(t){t&&et(e)}}}function dn(t,e,n){let{options:r}=e,{value:o}=e;const i=an(r.align||"center"),s=r.true||"✓",a=r.false||"";return t.$$set=t=>{"options"in t&&n(4,r=t.options),"value"in t&&n(0,o=t.value)},[o,i,s,a,r]}var mn=Object.freeze({__proto__:null,default:class extends Gt{constructor(t){super(),Kt(this,t,dn,fn,X,{options:4,value:0})}},compatibleTypes:["boolean"],align:function(t,e){return t.align||"center"}});function pn(t){let e,n;return{c(){e=nt("div"),n=ot(t[0]),ct(e,"class",t[1])},m(t,r){tt(t,e,r),Z(e,n)},p(t,[e]){1&e&&ut(n,t[0])},i:V,o:V,d(t){t&&et(e)}}}function gn(t,e,n){let r,{options:o}=e,{value:i}=e;const s="round"in o?o.round:2,a=an(o.align||"right")+(o.small?" text-xs":"");return t.$$set=t=>{"options"in t&&n(2,o=t.options),"value"in t&&n(3,i=t.value)},t.$$.update=()=>{8&t.$$.dirty&&n(0,r=void 0===i?"":""+(void 0!==s?i.toFixed(s):i))},[r,a,o,i]}var hn=Object.freeze({__proto__:null,default:class extends Gt{constructor(t){super(),Kt(this,t,gn,pn,X,{options:2,value:3})}},compatibleTypes:["number"],align:function(t,e){return t.align||"right"}});function wn(t,e,n){const r=t.slice();return r[7]=e[n],r}function $n(t,e,n){const r=t.slice();return r[7]=e[n],r}function bn(t,e,n){const r=t.slice();return r[7]=e[n],r}function vn(t){let e,n,r;return{c(){e=rt("svg"),n=rt("title"),r=ot(t[4]),ct(e,"class","plot-line-format text-center")},m(t,o){tt(t,e,o),Z(e,n),Z(n,r)},p(t,e){16&e&&ut(r,t[4])},d(t){t&&et(e)}}}function yn(t){let e;function n(t,e){return t[3]<=0?_n:t[2]>=0?xn:kn}let r=n(t),o=r(t);return{c(){o.c(),e=st()},m(t,n){o.m(t,n),tt(t,e,n)},p(t,i){r===(r=n(t))&&o?o.p(t,i):(o.d(1),o=r(t),o&&(o.c(),o.m(e.parentNode,e)))},d(t){o.d(t),t&&et(e)}}}function kn(t){let e,n,r,o,i=[],s=new Map,a=t[1].nticks;const l=t=>t[7];for(let e=0;e<a.length;e+=1){let n=wn(t,a,e),r=l(n);s.set(r,i[e]=En(r,n))}function c(t,e){return t[0]>0?Mn:qn}let u=c(t),f=u(t);return{c(){e=rt("svg"),n=rt("title"),r=ot(t[4]);for(let t=0;t<i.length;t+=1)i[t].c();o=rt("line"),f.c(),ct(o,"x1","50%"),ct(o,"y1","5%"),ct(o,"x2","50%"),ct(o,"y2","95%"),ct(o,"stroke",Pn),ct(o,"stroke-width","1"),ct(e,"class","plot-line-format text-center")},m(t,s){tt(t,e,s),Z(e,n),Z(n,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);Z(e,o),f.m(e,null)},p(t,n){16&n&&ut(r,t[4]),2&n&&(a=t[1].nticks,i=Bt(i,n,l,1,t,a,s,e,Ut,En,o,wn)),u===(u=c(t))&&f?f.p(t,n):(f.d(1),f=u(t),f&&(f.c(),f.m(e,null)))},d(t){t&&et(e);for(let t=0;t<i.length;t+=1)i[t].d();f.d()}}}function xn(t){let e,n,r,o,i,s=[],a=new Map,l=t[1].nticks;const c=t=>t[7];for(let e=0;e<l.length;e+=1){let n=$n(t,l,e),r=c(n);a.set(r,s[e]=Cn(r,n))}return{c(){e=rt("svg"),n=rt("title"),r=ot(t[4]);for(let t=0;t<s.length;t+=1)s[t].c();o=rt("rect"),ct(o,"x","0%"),ct(o,"y","25%"),ct(o,"width",i=100*t[0]+"%"),ct(o,"height","50%"),ct(o,"fill",zn),ct(e,"class","plot-line-format text-center")},m(t,i){tt(t,e,i),Z(e,n),Z(n,r);for(let t=0;t<s.length;t+=1)s[t].m(e,null);Z(e,o)},p(t,n){16&n&&ut(r,t[4]),2&n&&(l=t[1].nticks,s=Bt(s,n,c,1,t,l,a,e,Ut,Cn,o,$n)),1&n&&i!==(i=100*t[0]+"%")&&ct(o,"width",i)},d(t){t&&et(e);for(let t=0;t<s.length;t+=1)s[t].d()}}}function _n(t){let e,n,r,o,i,s,a=[],l=new Map,c=t[1].nticks;const u=t=>t[7];for(let e=0;e<c.length;e+=1){let n=bn(t,c,e),r=u(n);l.set(r,a[e]=Sn(r,n))}return{c(){e=rt("svg"),n=rt("title"),r=ot(t[4]);for(let t=0;t<a.length;t+=1)a[t].c();o=rt("rect"),ct(o,"x",i=100- -100*t[0]+"%"),ct(o,"y","25%"),ct(o,"width",s=-100*t[0]+"%"),ct(o,"height","50%"),ct(o,"fill",zn),ct(e,"class","plot-line-format text-center")},m(t,i){tt(t,e,i),Z(e,n),Z(n,r);for(let t=0;t<a.length;t+=1)a[t].m(e,null);Z(e,o)},p(t,n){16&n&&ut(r,t[4]),2&n&&(c=t[1].nticks,a=Bt(a,n,u,1,t,c,l,e,Ut,Sn,o,bn)),1&n&&i!==(i=100- -100*t[0]+"%")&&ct(o,"x",i),1&n&&s!==(s=-100*t[0]+"%")&&ct(o,"width",s)},d(t){t&&et(e);for(let t=0;t<a.length;t+=1)a[t].d()}}}function jn(t){let e,n,r;return{c(){e=rt("line"),ct(e,"x1",n=50- -50*t[7]+"%"),ct(e,"y1","5%"),ct(e,"x2",r=50- -50*t[7]+"%"),ct(e,"y2","25%"),ct(e,"stroke",Pn),ct(e,"stroke-width","1")},m(t,n){tt(t,e,n)},p(t,o){2&o&&n!==(n=50- -50*t[7]+"%")&&ct(e,"x1",n),2&o&&r!==(r=50- -50*t[7]+"%")&&ct(e,"x2",r)},d(t){t&&et(e)}}}function On(t){let e,n,r;return{c(){e=rt("line"),ct(e,"x1",n=50+50*t[7]+"%"),ct(e,"y1","5%"),ct(e,"x2",r=50+50*t[7]+"%"),ct(e,"y2","25%"),ct(e,"stroke",Pn),ct(e,"stroke-width","1")},m(t,n){tt(t,e,n)},p(t,o){2&o&&n!==(n=50+50*t[7]+"%")&&ct(e,"x1",n),2&o&&r!==(r=50+50*t[7]+"%")&&ct(e,"x2",r)},d(t){t&&et(e)}}}function En(t,e){let n,r;function o(t,e){return t[7]>0?On:jn}let i=o(e),s=i(e);return{key:t,first:null,c(){n=st(),s.c(),r=st(),this.first=n},m(t,e){tt(t,n,e),s.m(t,e),tt(t,r,e)},p(t,n){i===(i=o(e=t))&&s?s.p(e,n):(s.d(1),s=i(e),s&&(s.c(),s.m(r.parentNode,r)))},d(t){t&&et(n),s.d(t),t&&et(r)}}}function qn(t){let e,n,r;return{c(){e=rt("rect"),ct(e,"x",n=50- -50*t[0]+"%"),ct(e,"y","25%"),ct(e,"width",r=-50*t[0]+"%"),ct(e,"height","50%"),ct(e,"fill",zn)},m(t,n){tt(t,e,n)},p(t,o){1&o&&n!==(n=50- -50*t[0]+"%")&&ct(e,"x",n),1&o&&r!==(r=-50*t[0]+"%")&&ct(e,"width",r)},d(t){t&&et(e)}}}function Mn(t){let e,n;return{c(){e=rt("rect"),ct(e,"x","50%"),ct(e,"y","25%"),ct(e,"width",n=50*t[0]+"%"),ct(e,"height","50%"),ct(e,"fill",zn)},m(t,n){tt(t,e,n)},p(t,r){1&r&&n!==(n=50*t[0]+"%")&&ct(e,"width",n)},d(t){t&&et(e)}}}function Cn(t,e){let n,r,o;return{key:t,first:null,c(){n=rt("line"),ct(n,"x1",r=100*e[7]+"%"),ct(n,"y1","5%"),ct(n,"x2",o=100*e[7]+"%"),ct(n,"y2","25%"),ct(n,"stroke",Pn),ct(n,"stroke-width","1"),this.first=n},m(t,e){tt(t,n,e)},p(t,i){e=t,2&i&&r!==(r=100*e[7]+"%")&&ct(n,"x1",r),2&i&&o!==(o=100*e[7]+"%")&&ct(n,"x2",o)},d(t){t&&et(n)}}}function Sn(t,e){let n,r,o;return{key:t,first:null,c(){n=rt("line"),ct(n,"x1",r=100- -100*e[7]+"%"),ct(n,"y1","5%"),ct(n,"x2",o=100- -100*e[7]+"%"),ct(n,"y2","25%"),ct(n,"stroke",Pn),ct(n,"stroke-width","1"),this.first=n},m(t,e){tt(t,n,e)},p(t,i){e=t,2&i&&r!==(r=100- -100*e[7]+"%")&&ct(n,"x1",r),2&i&&o!==(o=100- -100*e[7]+"%")&&ct(n,"x2",o)},d(t){t&&et(n)}}}function An(t){let e;function n(t,e){return t[1]&&null!=t[0]?yn:vn}let r=n(t),o=r(t);return{c(){o.c(),e=st()},m(t,n){o.m(t,n),tt(t,e,n)},p(t,[i]){r===(r=n(t))&&o?o.p(t,i):(o.d(1),o=r(t),o&&(o.c(),o.m(e.parentNode,e)))},i:V,o:V,d(t){o.d(t),t&&et(e)}}}const Nn=(t,e,n,r)=>{const o=[],i=r.scale||"linear";if(r.log_unit){function s(t){return t>=0&&t<1?1:t}"log"!=r.scale&&o.push(`column ${t} 'line.log_unit' could be used with log scale only`),n=n.map((t=>void 0===t?void 0:s(t))),e=[s(e[0]),s(e[1])]}let a,l,c=[];if("log"==i){if(e[0]<=0)return o.push(`column ${t}, 'line.domain' can't be negative for log scale`),{column:n.map((t=>{})),warnings:o,stats:void 0};let i=Math.max(...e.map((t=>Math.log(Math.abs(t)))));c=n.map((e=>void 0===e?void 0:e>0?Math.log(e)/i:void o.push(`column ${t}, values can't be negative for log scale`))),a=O(r.ticks||[],(e=>e>0?Math.log(e)/i:(o.push(`column ${t}, ticks can't be negative for log scale`),!1))),l=[Math.log(e[0])/i,Math.log(e[1])/i]}else{if("linear"!=i)throw new Error(`unknown scale ${i}`);{let t=Math.max(...e.map((t=>Math.abs(t))));0==t&&(t=1),c=n.map((e=>void 0===e?void 0:e/t)),a=(r.ticks||[]).map((e=>e/t)),l=[e[0]/t,e[1]/t]}}return{column:c,warnings:o,stats:{domain:e,ndomain:l,nticks:a}}},zn="#111827",Pn="#111827";function Tn(t,e,n){let r,o,i,{options:s}=e,{value:a}=e,{converted:l}=e,{stats:c}=e;return t.$$set=t=>{"options"in t&&n(5,s=t.options),"value"in t&&n(6,a=t.value),"converted"in t&&n(0,l=t.converted),"stats"in t&&n(1,c=t.stats)},t.$$.update=()=>{2&t.$$.dirty&&n(2,[r,o]=c?c.ndomain:[0,0],r,(n(3,o),n(1,c))),99&t.$$.dirty&&n(4,i=[void 0!==l?`value: ${a}`:"missing",((null==c?void 0:c.nticks)||[]).length>0?`, ticks: [${(s.ticks||[]).join(", ")}]`:"",c?`domain: [${c.domain[0]}, ${c.domain[1]}]`:"",`scale: ${s.scale||"linear"}`].join(", "))},[l,c,r,o,i,s,a]}var Fn=Object.freeze({__proto__:null,default:class extends Gt{constructor(t){super(),Kt(this,t,Tn,An,X,{options:5,value:6,converted:0,stats:1})}},compatibleTypes:["number"],extraValues:({ticks:t})=>t||[],align:function(t,e){if(t.align)return t.align;if(e){const[t,n]=e.ndomain;return n<=0?"right":t>=0?"left":"center"}return"center"},convertColumn:Nn});function Jn(t){let e,n;return{c(){e=nt("div"),n=ot(t[0]),ct(e,"class",t[1])},m(t,r){tt(t,e,r),Z(e,n)},p(t,[e]){1&e&&ut(n,t[0])},i:V,o:V,d(t){t&&et(e)}}}function Ln(t,e,n){let r,{options:o}=e,{value:i}=e;const s=an(o.align||"left")+(o.small?" text-xs":"");return t.$$set=t=>{"options"in t&&n(2,o=t.options),"value"in t&&n(3,i=t.value)},t.$$.update=()=>{8&t.$$.dirty&&n(0,r=null==i?"":""+i)},[r,s,o,i]}const Un={string:un,boolean:mn,number:hn,unknown:Object.freeze({__proto__:null,default:class extends Gt{constructor(t){super(),Kt(this,t,Ln,Jn,X,{options:2,value:3})}},compatibleTypes:[],align:function(t,e){return t.align||"left"}}),line:Fn};function Wn(t){return t in Un?{is_error:!1,value:Un[t]}:{is_error:!0,message:`no '${t}' format`}}const Bn={string:function(t,e){return t.localeCompare(e)},number:function(t,e){return t-e},boolean:function(t,e){return t==e?0:t?1:-1},unknown:function(t,e){return(""+t).localeCompare(""+e)}};function In(t,[e,n]){const r="desc"==n,o=E($(t,(({id:t})=>t==e))).type;if(!(o in Bn))throw new Error(`no comparator for '${o}' type, please register one`);const i=Bn[o];return r?function(t,n){const r=n[e],o=t[e];return void 0===r?void 0===o?0:-1:void 0===o?1:i(r,o)}:function(t,n){const r=t[e],o=n[e];return void 0===r?void 0===o?0:-1:void 0===o?1:i(r,o)}}function Rn(t,e,n){if(n.length>3)throw new Error("sort not supported for more than 3 columns");const[r,o,i]=n;if(null==r&&u(null==o),null==o&&u(null==i),0==e.length||null==r)return e;let s,a=In(t,r),l=o?In(t,o):void 0,c=i?In(t,i):void 0;s=c?function(t,e){let n=a(t,e);return 0!=n?n:(n=l(t,e),0!=n?n:c(t,e))}:l?function(t,e){let n=a(t,e);return 0!=n?n:l(t,e)}:a;const f=[...e];return f.sort(s),f}function Dn(t,e,n){const r=[...e];for(const t of r)t._weights={},t._nweights={};for(const e in n){const{type:n,min_max:o}=E($(t,(({id:t})=>t==e)));let[i,s]=_(r,(t=>void 0!==t[e]));if(0==i.length){for(const t of r)t._weights[e]=0,t._nweights[e]=0;continue}if("number"==n){const t=typeof r[0][e];if("number"!=t)throw new Error(`wrong type for '${e}' column, wsort expects number but found '${t}'`);for(const t of i)t._weights[e]=t[e]}else{if(!(n in Bn))throw new Error(`no comparator for '${n}' type, please register one`);const t=Bn[n];i.sort(((n,r)=>t(n[e],r[e])));let r,o=0;for(let t=0;t<i.length;t++){const n=i[t];n[e]==r?o+=1:r=n[e],n._weights[e]=t-o}}{let t,r;if(o){if("number"!=n)throw new Error("can't use min_max for non number type");t=o[0],r=o[1]}else{const n=i.map((t=>t._weights[e]));t=Math.min(...n),r=Math.max(...n)}const s=(r+t)/2;let a=(r-t)/2;u(a>=0),a=0==a?1:a;for(const t of i){let n=(t._weights[e]-s)/a;t._nweights[e]=n}}let a=y(i.map((t=>t._nweights[e])));for(const t of s)t._nweights[e]=a}for(const t of r){let e=0;for(const r in n)e+=n[r]*t._nweights[r];t._w=e}return r.sort(((t,e)=>t._w-e._w)).reverse(),r}function Vn(t){return j(function(t,e){const n=new Set,r=e||(t=>t);return t.filter((t=>{const e=r(t);return!n.has(e)&&(n.add(e),!0)}))}(t.map((t=>"string"==typeof t?{type:"warn",message:t}:t)),(({message:t})=>t)),(({type:t,message:e})=>`${t} ${e}`))}function Hn(t,e){if(!e)return;const n={};for(const r of t){const t=e[r.id];if(!t)continue;const o=Qn(r,""+t[1]);void 0!==o&&(n[r.id]=[Gn(t[0]),o])}return n}c("sortTable",(()=>{const t=[{id:"name",type:"string"},{id:"age",type:"number"}],e=[{name:"Artanis",age:200},{name:"Sarah",age:30},{name:"Jim",age:30},{name:"Amon",age:void 0}];let n=n=>Rn(t,e,n).map((({name:t})=>t));u.equal(n([["name","asc"]]),["Amon","Artanis","Jim","Sarah"]),u.equal(n([["age","asc"]])[0],"Amon"),u.equal(n([["age","asc"],["name","asc"]]),["Amon","Jim","Sarah","Artanis"])})),c("wsortTable",(()=>{const t=(t,e,n)=>Dn(t,e,n).map((({id:t})=>t));u.equal(t([{id:"a",type:"number"},{id:"b",type:"number"}],[{id:"a",a:0,b:3},{id:"b",a:1,b:3},{id:"c",a:2,b:void 0},{id:"d",a:-2,b:200}],{a:1,b:-1}),["c","b","a","d"]);u.equal(t([{id:"a",type:"number"}],[{id:"a",a:0},{id:"b",a:1},{id:"c",a:void 0}],{a:1}),["b","c","a"]);{const t=Dn([{id:"a",type:"string"}],[{id:"a",a:"a"},{id:"b",a:"a"},{id:"c",a:"b"}],{a:1});u.equal(t[0].id,"c"),u.equal(t.map((t=>t._weights.a)),[1,0,0])}}));const Kn=["<=","<","=","!=",">",">=","~"];function Gn(t){return Kn.includes(t)?t:"="}function Qn({type:t},e){switch(t){case"string":return e;case"boolean":try{return["true","t","1"].includes(e.toLowerCase())}catch(t){return}case"number":try{let t=parseFloat(e);return Number.isFinite(t)?t:void 0}catch(t){return}default:return e}}const Xn=["string","number","boolean","unknown"];function Yn(t,e){const n=[],r=function(t,e,n){let r=[];try{r=Re(e,null==t?void 0:t.map((({id:t})=>t)))}catch(t){return n.push("row size is larger than columns available"),[]}return r.forEach(((t,e)=>{t._i=e,t._converted={}})),r}(t.columns,e,n);if(0==r.length)return n.push("table is empty"),{columns:[],rows:[],messages:Vn(n)};let o=function(t,e,n){if(t)return t;const r=new Map,o=new Set;for(let t=0;t<e.length;t++){const i=e[t];for(const t in i){if("_i"==t||"_converted"==t)continue;let e=i[t];if(void 0===e)o.add(t);else{let o=typeof e;"object"==o?(n.push(`unknown type for column '${t}' - '${o}'`),r.set(t,"unknown")):r.has(t)?r.get(t)!=o&&(n.push(`unstable types for column '${t}', ${[r.get(t),o].sort().join(", ")}`),r.set(t,"unknown")):r.set(t,o)}}}for(const t of o)r.has(t)||r.set(t,"unknown");return j(Array.from(r,(([t,e])=>({id:t,type:e}))),(({id:t})=>t))}(t.columns,r,n);if(t.alter_columns){const e=t.alter_columns.map((({id:t})=>t));o=[...t.alter_columns,...o.filter((({id:t})=>!e.includes(t)))]}const i=o.length;o.length!=i&&n.push("not unique column ids"),o=function(t,e,n){t=[...t];for(let r=0;r<e.length;r++){const o=e[r];for(const e of t){const{id:t,type:r}=e;if("_i"==t)continue;let i=o[t];void 0!==i&&(typeof i!=r&&"unknown"!=r&&Xn.includes(r)&&(n.push(`wrong type for column '${t}', specified as '${r}' but '${typeof i}' found`),e.type="unknown"))}}return t}(o,r,n);let s=function(t,e){const n=Wn("unknown");if(n.is_error)throw"can't get 'unknown' formatter";let r=[];for(const o of t){const t=o.format||{type:o.type},i=Wn(t.type);i.is_error?(e.push(i.message),r.push([n.value,t])):i.value.compatibleTypes.includes(o.type)?r.push([i.value,t]):(e.push(`column ${o.id} has wrong format, format ${o.format} is not compatible with '${o.type}' type`),r.push([n.value,t]))}return r}(o,n);const a=function(t,e,n,r){const o={};for(let i=0;i<t.length;i++){const{id:s,type:a,domain:l}=t[i],[c,u]=e[i];if("number"!=a){l&&r.push(`non number column '${s}' can't have domain`);continue}const f=O(c.extraValues?c.extraValues(u):[],(t=>void 0!==t&&t)),d=O(n,(t=>{const e=t[s];return void 0!==e&&e}));if(d.push(...f),0==d.length){l&&(o[s]=l);continue}let m=d[0],p=d[0];for(const t of d)t>p?p=t:t<m&&(m=t);const g=l||[m,p];m<g[0]&&(r.push(`column ${s} 'domain' min value is greather than actual min ${m}`),g[0]=m),p>g[1]&&(r.push(`column ${s} 'line.domain' max value is smaller than actual max ${p}`),g[1]=p),o[s]=g}return o}(o,s,r,n);s=function(t,e,n,r){return n.map(((n,o)=>{const{id:i,type:s}=t[o],[a,l]=n;if("number"==l.type&&void 0===l.round)if("number"==s){if(e.every((t=>{const e=t[i];return void 0===e||Number.isInteger(e)})))return[a,Object.assign(Object.assign({},l),{round:0})]}else r.push(`column ${i} is non number and can't use number formatter`);return n}))}(o,r,s,n);const l=Zn(o,r),c=function(t,e,n,r,o){const i={};for(let s=0;s<t.length;s++){const[{id:a},[l,c]]=[t[s],n[s]];if(l.convertColumn){const t=r.map((t=>t[a])),n=e[a];if(n){const{column:e,warnings:s,stats:u}=l.convertColumn(a,n,t,c);i[a]=u,s.forEach((t=>o.push(t)));for(let t=0;t<r.length;t++)r[t]._converted[a]=e[t]}}}return i}(o,a,s,r,n);return{columns:o.map(((t,e)=>({id:t.id,type:t.type,title:t.title,format:s[e][1],formatStats:c[t.id],formatter:s[e][0],widthP:l[e],domain:a[t.id]}))),rows:r,messages:Vn(n)}}function Zn(t,e){let n;if(t.some((({width:t})=>null!=t)))n=t.map((({width:t})=>t||1));else{const r=new Map;for(const n of e)for(const{id:e,type:o}of t){let t;if(void 0===n[e])continue;if("string"==o)t=n[e].length;else if("number"==o)t=(""+n[e]).length;else{if("boolean"!=o)continue;t=1}let i=r.get(e);null==i&&(i=[],r.set(e,i)),i.push(t)}const o=C(r,(t=>k(t,.7))),i=y(q(o,[],((t,e)=>(t.push(e),t)))),s=1.618,a=C(o,(t=>t>i*s?s:t<i/s?1/s:1)),l=1;n=t.map((({id:t})=>a.get(t)||l))}return tr(n)}function tr(t){if(0==t.length)return[];const e=100/M(t);let n=t.map((t=>S(t*e)));for(;;){const t=M(n);if(t>100)n[v(n)]-=1;else{if(!(t<100))break;n[b(n)]+=1}}return n}function er(t,e,n){return e=function(t,e,n){if(!n)return e;for(const{id:r,type:o}of t){const t=n[r];if(!t)continue;const[i,s]=t;if(void 0===s||""===s)continue;const a=nr(o,[i,s]);e=e.filter((t=>a(t[r])))}return e}(t,e=function(t,e,n){if(!(n=function(t){return t.replace(/^[\t\s\n]+|[\t\s\n]+$/g,"")}(n)))return e;const r=n.toLowerCase();return e.filter((e=>{for(const{id:n}of t)if((""+e[n]).toLowerCase().includes(r))return!0;return!1}))}(t,e,n.filter),n.filters)}function nr(t,[e,n]){switch(t){case"string":if("string"!=typeof n)throw new Error("string filter value expected");const t=n,r=n.toLowerCase();switch(e){case"<=":return e=>void 0!==e&&e<=t;case"<":return e=>void 0!==e&&e<t;case"=":return e=>void 0!==e&&e==t;case"!=":return e=>void 0!==e&&e!=t;case">":return e=>void 0!==e&&e>t;case">=":return e=>void 0!==e&&e>=t;case"~":return t=>void 0!==t&&t.toLowerCase().includes(r)}case"boolean":if("boolean"!=typeof n)throw new Error("boolean filter value expected");const o=n;switch(e){case"<=":return t=>void 0!==t&&t<=o;case"<":return t=>void 0!==t&&t<o;case"=":return t=>void 0!==t&&t==o;case"!=":return t=>void 0!==t&&t!=o;case">":return t=>void 0!==t&&t>o;case">=":return t=>void 0!==t&&t>=o;case"~":return t=>void 0!==t&&t==o}case"number":if("number"!=typeof n)throw new Error("number filter value expected");const i=n;switch(e){case"<=":return t=>void 0!==t&&t<=i;case"<":return t=>void 0!==t&&t<i;case"=":return t=>void 0!==t&&t==i;case"!=":return t=>void 0!==t&&t!=i;case">":return t=>void 0!==t&&t>i;case">=":return t=>void 0!==t&&t>=i;case"~":return t=>void 0!==t&&t==i}default:const s=""+n;switch(e){case"<=":return t=>void 0!==t&&""+t<=s;case"<":return t=>void 0!==t&&""+t<s;case"=":return t=>void 0!==t&&""+t==s;case"!=":return t=>void 0!==t&&""+t!=s;case">":return t=>void 0!==t&&""+t>s;case">=":return t=>void 0!==t&&""+t>=s;case"~":return t=>void 0!==t&&""+t==s}}throw new Error(`unknown filter ${t} ${e}`)}function rr(t){return t.map((t=>{let e=Object.assign({},t);return delete e._i,delete e._converted,e}))}function or(t){let e,n,r,o,i,s,a,l,c,u;return{c(){e=nt("div"),n=nt("span"),r=nt("span"),r.textContent="w =",o=it(),i=nt("input"),ct(r,"class","w-5 inline-block"),ct(i,"class","w-10 outline-none pl-1 text-xs border border-gray-200 focus:text-gray-900  svelte-1brt80c"),ct(i,"type","number"),ct(i,"step","0.1"),i.value=s=t[2].toFixed(1),ct(n,"class",a=t[3]?"text-gray-900":"text-gray-200"),ct(e,"class",l=t[1]+" my-1 text-xs "+(!t[4]&&"invisible"))},m(s,a){tt(s,e,a),Z(e,n),Z(n,r),Z(n,o),Z(n,i),c||(u=at(i,"change",t[5]),c=!0)},p(t,r){4&r&&s!==(s=t[2].toFixed(1))&&(i.value=s),8&r&&a!==(a=t[3]?"text-gray-900":"text-gray-200")&&ct(n,"class",a),18&r&&l!==(l=t[1]+" my-1 text-xs "+(!t[4]&&"invisible"))&&ct(e,"class",l)},d(t){t&&et(e),c=!1,u()}}}function ir(t){let e,n=t[0].wsort&&or(t);return{c(){n&&n.c(),e=st()},m(t,r){n&&n.m(t,r),tt(t,e,r)},p(t,[r]){t[0].wsort?n?n.p(t,r):(n=or(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:V,o:V,d(t){n&&n.d(t),t&&et(e)}}}function sr(t,e,n){let r,o,i,{column_id:s}=e,{align:a}=e,{state:l}=e;const c=A((t=>{l.wsort&&n(0,l=Object.assign(Object.assign({},l),{wsort:Object.assign(Object.assign({},l.wsort),{[s]:t})}))}),200);return t.$$set=t=>{"column_id"in t&&n(6,s=t.column_id),"align"in t&&n(1,a=t.align),"state"in t&&n(0,l=t.state)},t.$$.update=()=>{65&t.$$.dirty&&n(2,r=(l.wsort||{})[s]||0),4&t.$$.dirty&&n(3,o=0!=r),9&t.$$.dirty&&n(4,i=l.show_controls||o)},[l,a,r,o,i,({target:{value:t}})=>{n(2,r=parseFloat(t)),c(r)},s]}c("normalizeInputsSlow",(()=>{const t=t=>t.map((({id:t,type:e})=>({id:t,type:e})));{const{columns:e,rows:n}=Yn({},[["v",null]]);u.equal(t(e),[{id:"a",type:"string"},{id:"b",type:"unknown"}]),u.equal(rr(n),[{a:"v"}])}{const{columns:e,rows:n}=Yn({},[{k:"v",k2:null}]);u.equal(t(e),[{id:"k",type:"string"},{id:"k2",type:"unknown"}]),u.equal(rr(n),[{k:"v"}])}{const{columns:e,rows:n}=Yn({},[{k:"v"},{k:0}]);u.equal(t(e),[{id:"k",type:"unknown"}]),u.equal(rr(n),[{k:"v"},{k:0}])}{const{columns:t}=Yn({},[{v:1}]);u.equal(t[0].format,{type:"number",round:0})}})),c("calculateColumnWidths",(()=>{u.equal(Zn([{id:"name",type:"string"},{id:"age",type:"number"}],[{name:"Jim Raynor",age:30},{name:"Kate",age:25}]),[62,38])})),c("weightsToPercents",(()=>{u.equal(tr([2,2]),[50,50]),u.equal(tr([3,3,3]).sort(),[33,33,34])}));class ar extends Gt{constructor(t){super(),Kt(this,t,sr,ir,X,{column_id:6,align:1,state:0})}}function lr(t,e,n){const r=t.slice();return r[9]=e[n],r}function cr(t){let e,n,r,o,i,s,a,l,c,u,f,d=[],m=new Map,p=Kn;const g=t=>t[9];for(let e=0;e<p.length;e+=1){let n=lr(t,p,e),r=g(n);m.set(r,d[e]=ur(r,n))}return{c(){e=nt("div"),n=nt("span"),r=nt("select");for(let t=0;t<d.length;t+=1)d[t].c();i=it(),s=nt("input"),ct(r,"class","outline-none w-5 inline-block svelte-126ibbo"),ct(s,"class","w-10 outline-none pl-1 text-xs border border-gray-200 focus:text-gray-900"),ct(s,"type","text"),s.value=a=void 0===t[2][1]?"":""+t[2][1],ct(n,"class",l=t[3]?"text-gray-900":"text-gray-200"),ct(e,"class",c=t[1]+" my-1 text-xs "+(!t[4]&&"invisible"))},m(o,a){tt(o,e,a),Z(e,n),Z(n,r);for(let t=0;t<d.length;t+=1)d[t].m(r,null);mt(r,t[2][0]),Z(n,i),Z(n,s),u||(f=[at(r,"change",t[5]),at(s,"keyup",t[6])],u=!0)},p(t,i){0&i&&(p=Kn,d=Bt(d,i,g,1,t,p,m,r,Ut,ur,null,lr)),4&i&&o!==(o=t[2][0])&&mt(r,t[2][0]),4&i&&a!==(a=void 0===t[2][1]?"":""+t[2][1])&&s.value!==a&&(s.value=a),8&i&&l!==(l=t[3]?"text-gray-900":"text-gray-200")&&ct(n,"class",l),18&i&&c!==(c=t[1]+" my-1 text-xs "+(!t[4]&&"invisible"))&&ct(e,"class",c)},d(t){t&&et(e);for(let t=0;t<d.length;t+=1)d[t].d();u=!1,G(f)}}}function ur(t,e){let n,r,o=e[9]+"";return{key:t,first:null,c(){n=nt("option"),r=ot(o),n.__value=e[9],n.value=n.__value,this.first=n},m(t,e){tt(t,n,e),Z(n,r)},p(t,n){e=t},d(t){t&&et(n)}}}function fr(t){let e,n=t[0].filters&&cr(t);return{c(){n&&n.c(),e=st()},m(t,r){n&&n.m(t,r),tt(t,e,r)},p(t,[r]){t[0].filters?n?n.p(t,r):(n=cr(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:V,o:V,d(t){n&&n.d(t),t&&et(e)}}}function dr(t,e,n){let r,o,i,{column:s}=e,{align:a}=e,{state:l}=e;const c=A((t=>{l.filters&&n(0,l=Object.assign(Object.assign({},l),{filters:Object.assign(Object.assign({},l.filters),{[s.id]:t})}))}),200);return t.$$set=t=>{"column"in t&&n(7,s=t.column),"align"in t&&n(1,a=t.align),"state"in t&&n(0,l=t.state)},t.$$.update=()=>{129&t.$$.dirty&&n(2,i=l.filters&&s.id in l.filters?l.filters[s.id]:["=",void 0]),4&t.$$.dirty&&n(3,r=null!=i[1]&&""!==i[1]),9&t.$$.dirty&&n(4,o=r||l.show_controls)},[l,a,i,r,o,({target:{value:t}})=>{n(2,i=[Gn(t),i[1]]),c(i)},({target:{value:t}})=>{n(2,i=[i[0],Qn(s,t)]),c(i)},s]}class mr extends Gt{constructor(t){super(),Kt(this,t,dr,fr,X,{column:7,align:1,state:0})}}function pr(t){let e,n,r,o,i,s,a,l,c,u,f,d,m,p,g,h,w,$=t[3].symbol+"";function b(e){t[12](e)}let v={column_id:t[4],align:"text-right"};function y(e){t[13](e)}void 0!==t[0]&&(v.state=t[0]),u=new ar({props:v}),yt.push((()=>It(u,"state",b)));let k={column:t[1],align:"text-right"};return void 0!==t[0]&&(k.state=t[0]),m=new mr({props:k}),yt.push((()=>It(m,"state",y))),{c(){e=nt("th"),n=nt("a"),r=nt("span"),o=ot($),s=it(),a=nt("span"),l=ot(t[2]),c=it(),Rt(u.$$.fragment),d=it(),Rt(m.$$.fragment),ct(r,"class",i=t[3].klass+" mr-0.5"),ct(n,"class","flex justify-between"),ct(n,"href","#"),dt(e,"width",t[1].widthP+"%"),ct(e,"class","text-right")},m(i,f){tt(i,e,f),Z(e,n),Z(n,r),Z(r,o),Z(n,s),Z(n,a),Z(a,l),Z(e,c),Dt(u,e,null),Z(e,d),Dt(m,e,null),g=!0,h||(w=at(n,"click",lt(t[6])),h=!0)},p(t,n){(!g||8&n)&&$!==($=t[3].symbol+"")&&ut(o,$),(!g||8&n&&i!==(i=t[3].klass+" mr-0.5"))&&ct(r,"class",i),(!g||4&n)&&ut(l,t[2]);const s={};!f&&1&n&&(f=!0,s.state=t[0],Et((()=>f=!1))),u.$set(s);const a={};2&n&&(a.column=t[1]),!p&&1&n&&(p=!0,a.state=t[0],Et((()=>p=!1))),m.$set(a),(!g||2&n)&&dt(e,"width",t[1].widthP+"%")},i(t){g||(Tt(u.$$.fragment,t),Tt(m.$$.fragment,t),g=!0)},o(t){Ft(u.$$.fragment,t),Ft(m.$$.fragment,t),g=!1},d(t){t&&et(e),Vt(u),Vt(m),h=!1,w()}}}function gr(t){let e,n,r,o,i,s,a,l,c,u,f,d,m,p,g,h,w,$,b,v,y,k=t[3].symbol+"",x=t[3].symbol+"";function _(e){t[10](e)}let j={column_id:t[4],align:"text-center"};function O(e){t[11](e)}void 0!==t[0]&&(j.state=t[0]),p=new ar({props:j}),yt.push((()=>It(p,"state",_)));let E={column:t[1],align:"text-center"};return void 0!==t[0]&&(E.state=t[0]),w=new mr({props:E}),yt.push((()=>It(w,"state",O))),{c(){e=nt("th"),n=nt("a"),r=nt("span"),o=ot(k),i=it(),s=nt("span"),a=ot(t[2]),l=it(),c=nt("span"),u=ot(x),m=it(),Rt(p.$$.fragment),h=it(),Rt(w.$$.fragment),ct(r,"class","invisible mr-0.5"),ct(c,"class",f=t[3].klass+" ml-0.5"),ct(c,"title",d=t[3].title),ct(n,"class","flex justify-between"),ct(n,"href","#"),dt(e,"width",t[1].widthP+"%")},m(f,d){tt(f,e,d),Z(e,n),Z(n,r),Z(r,o),Z(n,i),Z(n,s),Z(s,a),Z(n,l),Z(n,c),Z(c,u),Z(e,m),Dt(p,e,null),Z(e,h),Dt(w,e,null),b=!0,v||(y=at(n,"click",lt(t[6])),v=!0)},p(t,n){(!b||8&n)&&k!==(k=t[3].symbol+"")&&ut(o,k),(!b||4&n)&&ut(a,t[2]),(!b||8&n)&&x!==(x=t[3].symbol+"")&&ut(u,x),(!b||8&n&&f!==(f=t[3].klass+" ml-0.5"))&&ct(c,"class",f),(!b||8&n&&d!==(d=t[3].title))&&ct(c,"title",d);const r={};!g&&1&n&&(g=!0,r.state=t[0],Et((()=>g=!1))),p.$set(r);const i={};2&n&&(i.column=t[1]),!$&&1&n&&($=!0,i.state=t[0],Et((()=>$=!1))),w.$set(i),(!b||2&n)&&dt(e,"width",t[1].widthP+"%")},i(t){b||(Tt(p.$$.fragment,t),Tt(w.$$.fragment,t),b=!0)},o(t){Ft(p.$$.fragment,t),Ft(w.$$.fragment,t),b=!1},d(t){t&&et(e),Vt(p),Vt(w),v=!1,y()}}}function hr(t){let e,n,r,o,i,s,a,l,c,u,f,d,m,p,g,h,w,$,b=t[3].symbol+"";function v(e){t[8](e)}let y={column_id:t[4],align:"text-left"};function k(e){t[9](e)}void 0!==t[0]&&(y.state=t[0]),f=new ar({props:y}),yt.push((()=>It(f,"state",v)));let x={column:t[1],align:"text-left"};return void 0!==t[0]&&(x.state=t[0]),p=new mr({props:x}),yt.push((()=>It(p,"state",k))),{c(){e=nt("th"),n=nt("a"),r=nt("span"),o=ot(t[2]),i=it(),s=nt("span"),a=ot(b),u=it(),Rt(f.$$.fragment),m=it(),Rt(p.$$.fragment),ct(s,"class",l=t[3].klass+" ml-0.5"),ct(s,"title",c=t[3].title),ct(n,"class","flex justify-between"),ct(n,"href","#"),dt(e,"width",t[1].widthP+"%")},m(l,c){tt(l,e,c),Z(e,n),Z(n,r),Z(r,o),Z(n,i),Z(n,s),Z(s,a),Z(e,u),Dt(f,e,null),Z(e,m),Dt(p,e,null),h=!0,w||($=at(n,"click",lt(t[6])),w=!0)},p(t,n){(!h||4&n)&&ut(o,t[2]),(!h||8&n)&&b!==(b=t[3].symbol+"")&&ut(a,b),(!h||8&n&&l!==(l=t[3].klass+" ml-0.5"))&&ct(s,"class",l),(!h||8&n&&c!==(c=t[3].title))&&ct(s,"title",c);const r={};!d&&1&n&&(d=!0,r.state=t[0],Et((()=>d=!1))),f.$set(r);const i={};2&n&&(i.column=t[1]),!g&&1&n&&(g=!0,i.state=t[0],Et((()=>g=!1))),p.$set(i),(!h||2&n)&&dt(e,"width",t[1].widthP+"%")},i(t){h||(Tt(f.$$.fragment,t),Tt(p.$$.fragment,t),h=!0)},o(t){Ft(f.$$.fragment,t),Ft(p.$$.fragment,t),h=!1},d(t){t&&et(e),Vt(f),Vt(p),w=!1,$()}}}function wr(t){let e,n,r,o;const i=[hr,gr,pr],s=[];return e=function(t,e){return"left"==t[5]?0:"center"==t[5]?1:2}(t),n=s[e]=i[e](t),{c(){n.c(),r=st()},m(t,n){s[e].m(t,n),tt(t,r,n),o=!0},p(t,[e]){n.p(t,e)},i(t){o||(Tt(n),o=!0)},o(t){Ft(n),o=!1},d(t){s[e].d(t),t&&et(r)}}}function $r(t,e,n){let r,o,{column:i}=e,{state:s}=e,{sortable:a}=e,l=i.id;const c=i.formatter.align(i.format,i.formatStats);function f(t,e){const n={symbol:"↓",klass:"invisible",title:""};if(e.wsort){const r=e.wsort[t.id],o="wsort: "+function(t){return t instanceof Map?Array.from(t):Object.entries(t)}(e.wsort).map((([t,e])=>`${t}: ${e}`)).join(", ");return void 0===r||0==r?n:r>=0?{symbol:"↑",klass:"text-gray-900",title:o}:{symbol:"↓",klass:"text-gray-900",title:o}}if(e.sort){let t;for(let n=0;n<e.sort.length;n++){const[r,o]=e.sort[n];r==l&&(t=[o,n])}if(!t)return n;const r="sort: "+e.sort.map((([t,e])=>`${t}: ${e}`)).join(", "),[o,i]=t,s="asc"==o?"↓":"↑";let a;if(0==i)a="text-gray-900";else if(1==i)a="text-gray-400";else{if(2!=i)throw new Error("color for more than 3 sort oders isn't supported");a="text-gray-300"}return{symbol:s,klass:a,title:r}}return n}return t.$$set=t=>{"column"in t&&n(1,i=t.column),"state"in t&&n(0,s=t.state),"sortable"in t&&n(7,a=t.sortable)},t.$$.update=()=>{2&t.$$.dirty&&n(2,r=i.title||i.id),3&t.$$.dirty&&n(3,o=f(i,s))},[s,i,r,o,l,c,function(t){if(a)if(s.wsort){let e=s.wsort;t.metaKey?i.id in e?e[i.id]=-1*e[i.id]:e[i.id]=1:g(e)>1?e={[l]:1}:i.id in e?e[i.id]=-1*e[i.id]:e={[l]:1},n(0,s=Object.assign(Object.assign({},s),{wsort:e}))}else{let e=s.sort||[];const r=function(t,e){const n=e instanceof Function?e:t=>t==e;for(let e=0;e<t.length;e++)if(n(t[e],e))return e;return-1}(e,(([t,e])=>t==i.id));t.metaKey?r>=0?e[r][1]="asc"==e[r][1]?"desc":"asc":e.push([l,"asc"]):e.length>1?e=[[l,"asc"]]:r>=0?(u(1==e.length),e[r][1]="asc"==e[r][1]?"desc":"asc"):e=[[l,"asc"]],n(0,s=Object.assign(Object.assign({},s),{sort:e}))}},a,function(t){s=t,n(0,s)},function(t){s=t,n(0,s)},function(t){s=t,n(0,s)},function(t){s=t,n(0,s)},function(t){s=t,n(0,s)},function(t){s=t,n(0,s)}]}class br extends Gt{constructor(t){super(),Kt(this,t,$r,wr,X,{column:1,state:0,sortable:7})}}function vr(t,e,n){const r=t.slice();return r[4]=e[n],r}function yr(t,e){let n,r,o,i;function s(t){e[3](t)}let a={column:e[4],sortable:e[2]};return void 0!==e[0]&&(a.state=e[0]),r=new br({props:a}),yt.push((()=>It(r,"state",s))),{key:t,first:null,c(){n=st(),Rt(r.$$.fragment),this.first=n},m(t,e){tt(t,n,e),Dt(r,t,e),i=!0},p(t,n){e=t;const i={};2&n&&(i.column=e[4]),4&n&&(i.sortable=e[2]),!o&&1&n&&(o=!0,i.state=e[0],Et((()=>o=!1))),r.$set(i)},i(t){i||(Tt(r.$$.fragment,t),i=!0)},o(t){Ft(r.$$.fragment,t),i=!1},d(t){t&&et(n),Vt(r,t)}}}function kr(t){let e,n,r=[],o=new Map,i=t[1];const s=t=>t[4].id;for(let e=0;e<i.length;e+=1){let n=vr(t,i,e),a=s(n);o.set(a,r[e]=yr(a,n))}return{c(){e=nt("tr");for(let t=0;t<r.length;t+=1)r[t].c()},m(t,o){tt(t,e,o);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,[n]){7&n&&(i=t[1],zt(),r=Bt(r,n,s,1,t,i,o,e,Wt,yr,null,vr),Pt())},i(t){if(!n){for(let t=0;t<i.length;t+=1)Tt(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)Ft(r[t]);n=!1},d(t){t&&et(e);for(let t=0;t<r.length;t+=1)r[t].d()}}}function xr(t,e,n){let{columns:r}=e,{state:o}=e,{sortable:i}=e;return t.$$set=t=>{"columns"in t&&n(1,r=t.columns),"state"in t&&n(0,o=t.state),"sortable"in t&&n(2,i=t.sortable)},[o,r,i,function(t){o=t,n(0,o)}]}class _r extends Gt{constructor(t){super(),Kt(this,t,xr,kr,X,{columns:1,state:0,sortable:2})}}function jr(t,e,n){const r=t.slice();return r[4]=e[n],r[6]=n,r}function Or(t){let e,n,r;var o=t[4].formatter.default;function i(t){return{props:{options:t[4].format,value:t[1][t[4].id]}}}return o&&(e=new o(i(t))),{c(){e&&Rt(e.$$.fragment),n=st()},m(t,o){e&&Dt(e,t,o),tt(t,n,o),r=!0},p(t,r){const s={};if(1&r&&(s.options=t[4].format),3&r&&(s.value=t[1][t[4].id]),o!==(o=t[4].formatter.default)){if(e){zt();const t=e;Ft(t.$$.fragment,1,0,(()=>{Vt(t,1)})),Pt()}o?(e=new o(i(t)),Rt(e.$$.fragment),Tt(e.$$.fragment,1),Dt(e,n.parentNode,n)):e=null}else o&&e.$set(s)},i(t){r||(e&&Tt(e.$$.fragment,t),r=!0)},o(t){e&&Ft(e.$$.fragment,t),r=!1},d(t){t&&et(n),e&&Vt(e,t)}}}function Er(t){let e,n,r;var o=t[4].formatter.default;function i(t){return{props:{options:t[4].format,value:t[1][t[4].id],converted:t[1]._converted[t[4].id],stats:t[4].formatStats}}}return o&&(e=new o(i(t))),{c(){e&&Rt(e.$$.fragment),n=st()},m(t,o){e&&Dt(e,t,o),tt(t,n,o),r=!0},p(t,r){const s={};if(1&r&&(s.options=t[4].format),3&r&&(s.value=t[1][t[4].id]),3&r&&(s.converted=t[1]._converted[t[4].id]),1&r&&(s.stats=t[4].formatStats),o!==(o=t[4].formatter.default)){if(e){zt();const t=e;Ft(t.$$.fragment,1,0,(()=>{Vt(t,1)})),Pt()}o?(e=new o(i(t)),Rt(e.$$.fragment),Tt(e.$$.fragment,1),Dt(e,n.parentNode,n)):e=null}else o&&e.$set(s)},i(t){r||(e&&Tt(e.$$.fragment,t),r=!0)},o(t){e&&Ft(e.$$.fragment,t),r=!1},d(t){t&&et(n),e&&Vt(e,t)}}}function qr(t,e){let n,r,o,i,s;const a=[Er,Or],l=[];function c(t,e){return"_converted"in t[1]&&t[4].id in t[1]._converted?0:1}return r=c(e),o=l[r]=a[r](e),{key:t,first:null,c(){n=nt("td"),o.c(),i=it(),this.first=n},m(t,e){tt(t,n,e),l[r].m(n,null),Z(n,i),s=!0},p(t,s){let u=r;r=c(e=t),r===u?l[r].p(e,s):(zt(),Ft(l[u],1,1,(()=>{l[u]=null})),Pt(),o=l[r],o?o.p(e,s):(o=l[r]=a[r](e),o.c()),Tt(o,1),o.m(n,i))},i(t){s||(Tt(o),s=!0)},o(t){Ft(o),s=!1},d(t){t&&et(n),l[r].d()}}}function Mr(t){let e,n,r,o,i,s=[],a=new Map,l=t[0];const c=t=>t[4].id;for(let e=0;e<l.length;e+=1){let n=jr(t,l,e),r=c(n);a.set(r,s[e]=qr(r,n))}return{c(){e=nt("tr");for(let t=0;t<s.length;t+=1)s[t].c();ct(e,"class",n=t[2]?"bg-gray-200":"")},m(n,a){tt(n,e,a);for(let t=0;t<s.length;t+=1)s[t].m(e,null);r=!0,o||(i=at(e,"click",(function(){Q(t[3])&&t[3].apply(this,arguments)})),o=!0)},p(o,[i]){t=o,3&i&&(l=t[0],zt(),s=Bt(s,i,c,1,t,l,a,e,Wt,qr,null,jr),Pt()),(!r||4&i&&n!==(n=t[2]?"bg-gray-200":""))&&ct(e,"class",n)},i(t){if(!r){for(let t=0;t<l.length;t+=1)Tt(s[t]);r=!0}},o(t){for(let t=0;t<s.length;t+=1)Ft(s[t]);r=!1},d(t){t&&et(e);for(let t=0;t<s.length;t+=1)s[t].d();o=!1,i()}}}function Cr(t,e,n){let{columns:r}=e,{row:o}=e,{selected:i}=e,{onSelect:s}=e;return t.$$set=t=>{"columns"in t&&n(0,r=t.columns),"row"in t&&n(1,o=t.row),"selected"in t&&n(2,i=t.selected),"onSelect"in t&&n(3,s=t.onSelect)},[r,o,i,s]}class Sr extends Gt{constructor(t){super(),Kt(this,t,Cr,Mr,X,{columns:0,row:1,selected:2,onSelect:3})}}const Ar=t=>`<svg class="${t}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg>`;function Nr(t){let e,n,r,o,i,s,a,l,c,u,f,d,m,p=Ar(zr(!!t[0].filters))+"";return{c(){e=nt("div"),n=nt("div"),r=it(),o=nt("div"),i=nt("input"),s=it(),a=nt("button"),l=ot("W"),u=it(),f=nt("button"),ct(n,"class","flex items-center"),ct(i,"class","rounded border border-gray-300 text-sm outline-none py-1 px-1 leading-4"),ct(i,"type","text"),ct(i,"placeholder","Filter"),ct(a,"class",c=Y(Pr(!!t[0].wsort))+" svelte-1y842rg"),ct(a,"title",t[4]),ct(f,"class","focus:outline-none"),ct(o,"class","flex items-center space-x-2"),ct(e,"class","flex items-center justify-between my-1")},m(c,g){tt(c,e,g),Z(e,n),Z(e,r),Z(e,o),Z(o,i),ft(i,t[1]),Z(o,s),Z(o,a),Z(a,l),Z(o,u),Z(o,f),f.innerHTML=p,d||(m=[at(i,"input",t[5]),at(i,"keyup",t[2]),at(a,"click",t[3]),at(f,"click",t[6])],d=!0)},p(t,[e]){2&e&&i.value!==t[1]&&ft(i,t[1]),1&e&&c!==(c=Y(Pr(!!t[0].wsort))+" svelte-1y842rg")&&ct(a,"class",c),1&e&&p!==(p=Ar(zr(!!t[0].filters))+"")&&(f.innerHTML=p)},i:V,o:V,d(t){t&&et(e),d=!1,G(m)}}}function zr(t){return"h-5 w-5 p-0.5 border rounded text-gray-900 "+(t?"border-gray-300":"border-white")}function Pr(t){return"letter_button focus:outline-none border rounded "+(t?"border-gray-300":"border-white")}function Tr(t,e,n){let{state:r}=e,o=r.filter;const i=A((()=>{n(0,r=Object.assign(Object.assign({},r),{filter:o}))}),200);const s=['Weighted sorting. "Smart", weighted, ranked sorting, instead of normal sorting.',"It works similar to how humans compare products with many attributes, to find the best one.","Example: find countries with highest salaries, lowest taxes and lowest real estate prices - ordinary sorting would be useless, while weighted sorting would sort the countries in a 'smart' way, similar to how human would do.","Missing values threated as average, like if we don't have tax rate for country, we guess that it probably should be somewhat average. For non number comparable elements sort rank used as weight. ifferent range of values for different columns normalised into [-1..1] range as 'nw = (w - median(w)) / 0.9-quantile(variance(w))*1.11' and limiting min/max outliers by [-1..1].",'- Undefined values threated as average\n- Rank for same values should be the same, like ["a", "a", "b"] should be [0, 0, 1], not [0, 1, 2]\n- Different range of values for different columns normalised into [-1..1] range as\n      nw = (w - median(w)) / 0.9-quantile(variance(w))*1.11 and limiting min/max outliers by [-1..1].'].join("\n\n");return t.$$set=t=>{"state"in t&&n(0,r=t.state)},[r,o,i,function(){n(0,r=r.wsort?Object.assign(Object.assign({},r),{wsort:void 0,sort:void 0}):Object.assign(Object.assign({},r),{wsort:{},sort:void 0}))},s,function(){o=this.value,n(1,o)},()=>n(0,r={...r,filters:r.filters?void 0:{}})]}class Fr extends Gt{constructor(t){super(),Kt(this,t,Tr,Nr,X,{state:0})}}function Jr(t,e,n){const r=t.slice();return r[1]=e[n],r}function Lr(t){let e,n=t[0],r=[];for(let e=0;e<n.length;e+=1)r[e]=Ir(Jr(t,n,e));return{c(){e=nt("div");for(let t=0;t<r.length;t+=1)r[t].c();ct(e,"class","text-sm mt-1 mx-1")},m(t,n){tt(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,o){if(1&o){let i;for(n=t[0],i=0;i<n.length;i+=1){const s=Jr(t,n,i);r[i]?r[i].p(s,o):(r[i]=Ir(s),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(t){t&&et(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(r,t)}}}function Ur(t){let e;return{c(){e=nt("div"),e.textContent="unknown message type"},m(t,n){tt(t,e,n)},p:V,d(t){t&&et(e)}}}function Wr(t){let e,n,r,o,i=t[1].message+"";return{c(){e=nt("div"),n=nt("span"),n.textContent="error",r=it(),o=ot(i),ct(n,"class","bg-red-400 px-2 rounded")},m(t,i){tt(t,e,i),Z(e,n),Z(e,r),Z(e,o)},p(t,e){1&e&&i!==(i=t[1].message+"")&&ut(o,i)},d(t){t&&et(e)}}}function Br(t){let e,n,r,o,i=t[1].message+"";return{c(){e=nt("div"),n=nt("span"),n.textContent="warn",r=it(),o=ot(i),ct(n,"class","bg-yellow-400 px-2 rounded")},m(t,i){tt(t,e,i),Z(e,n),Z(e,r),Z(e,o)},p(t,e){1&e&&i!==(i=t[1].message+"")&&ut(o,i)},d(t){t&&et(e)}}}function Ir(t){let e;function n(t,e){return"warn"==t[1].type?Br:"error"==t[1].type?Wr:Ur}let r=n(t),o=r(t);return{c(){o.c(),e=st()},m(t,n){o.m(t,n),tt(t,e,n)},p(t,i){r===(r=n(t))&&o?o.p(t,i):(o.d(1),o=r(t),o&&(o.c(),o.m(e.parentNode,e)))},d(t){o.d(t),t&&et(e)}}}function Rr(t){let e,n=t[0].length>0&&Lr(t);return{c(){n&&n.c(),e=st()},m(t,r){n&&n.m(t,r),tt(t,e,r)},p(t,[r]){t[0].length>0?n?n.p(t,r):(n=Lr(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:V,o:V,d(t){n&&n.d(t),t&&et(e)}}}function Dr(t,e,n){let{messages:r}=e;return t.$$set=t=>{"messages"in t&&n(0,r=t.messages)},[r]}class Vr extends Gt{constructor(t){super(),Kt(this,t,Dr,Rr,X,{messages:0})}}function Hr(t,e,n){const r=t.slice();return r[15]=e[n],r}function Kr(t){let e,n,r=t[0].description+"";return{c(){e=nt("div"),n=ot(r)},m(t,r){tt(t,e,r),Z(e,n)},p(t,e){1&e&&r!==(r=t[0].description+"")&&ut(n,r)},d(t){t&&et(e)}}}function Gr(t,e){let n,r,o;function i(...t){return e[12](e[15],...t)}return r=new Sr({props:{columns:e[4],row:e[15],selected:e[2].has(e[15]._i),onSelect:i}}),{key:t,first:null,c(){n=st(),Rt(r.$$.fragment),this.first=n},m(t,e){tt(t,n,e),Dt(r,t,e),o=!0},p(t,n){e=t;const o={};8&n&&(o.row=e[15]),12&n&&(o.selected=e[2].has(e[15]._i)),8&n&&(o.onSelect=i),r.$set(o)},i(t){o||(Tt(r.$$.fragment,t),o=!0)},o(t){Ft(r.$$.fragment,t),o=!1},d(t){t&&et(n),Vt(r,t)}}}function Qr(t){let e,n,r,o,i,s;return{c(){e=nt("div"),e.textContent="Debug:",n=it(),r=nt("textarea"),i=it(),s=nt("textarea"),ct(e,"class","mt-3"),ct(r,"class","block focus:outline-none rounded border border-gray-200 text-xs overflow-scroll mt-4"),r.readOnly=!0,dt(r,"resize","none"),dt(r,"width","30rem"),dt(r,"height","5rem"),r.value=o=I({...t[1],selected:t[2]}),ct(s,"class","block focus:outline-none rounded border border-gray-200 text-xs overflow-scroll mt-4"),s.readOnly=!0,dt(s,"resize","none"),dt(s,"width","30rem"),dt(s,"height","10rem"),s.value=I(t[4])},m(t,o){tt(t,e,o),tt(t,n,o),tt(t,r,o),tt(t,i,o),tt(t,s,o)},p(t,e){6&e&&o!==(o=I({...t[1],selected:t[2]}))&&(r.value=o)},d(t){t&&et(e),t&&et(n),t&&et(r),t&&et(i),t&&et(s)}}}function Xr(t){let e,n,r,o,i,s,a,l,c,u,f,d,m,p,g,h,w,$,b=[],v=new Map,y=t[0].description&&Kr(t);function k(e){t[10](e)}let x={};function _(e){t[11](e)}void 0!==t[1]&&(x.state=t[1]),i=new Fr({props:x}),yt.push((()=>It(i,"state",k)));let j={columns:t[4],sortable:t[6]};void 0!==t[1]&&(j.state=t[1]),c=new _r({props:j}),yt.push((()=>It(c,"state",_)));let O=t[3];const E=t=>t[15]._i;for(let e=0;e<O.length;e+=1){let n=Hr(t,O,e),r=E(n);v.set(r,b[e]=Gr(r,n))}m=new Vr({props:{messages:t[5]}});let q=t[0].debug&&Qr(t);return{c(){y&&y.c(),e=it(),n=nt("table"),r=nt("tr"),o=nt("td"),Rt(i.$$.fragment),l=it(),Rt(c.$$.fragment),f=it();for(let t=0;t<b.length;t+=1)b[t].c();d=it(),Rt(m.$$.fragment),p=it(),q&&q.c(),g=st(),ct(o,"colspan",t[4].length),ct(r,"class",a="plot-table-toolbar "+(!t[1].show_controls&&"invisible")),ct(n,"class","plot-table font-mono")},m(s,a){y&&y.m(s,a),tt(s,e,a),tt(s,n,a),Z(n,r),Z(r,o),Dt(i,o,null),Z(n,l),Dt(c,n,null),Z(n,f);for(let t=0;t<b.length;t+=1)b[t].m(n,null);tt(s,d,a),Dt(m,s,a),tt(s,p,a),q&&q.m(s,a),tt(s,g,a),h=!0,w||($=at(n,"click",t[13]),w=!0)},p(t,[o]){t[0].description?y?y.p(t,o):(y=Kr(t),y.c(),y.m(e.parentNode,e)):y&&(y.d(1),y=null);const l={};!s&&2&o&&(s=!0,l.state=t[1],Et((()=>s=!1))),i.$set(l),(!h||2&o&&a!==(a="plot-table-toolbar "+(!t[1].show_controls&&"invisible")))&&ct(r,"class",a);const f={};!u&&2&o&&(u=!0,f.state=t[1],Et((()=>u=!1))),c.$set(f),156&o&&(O=t[3],zt(),b=Bt(b,o,E,1,t,O,v,n,Wt,Gr,null,Hr),Pt()),t[0].debug?q?q.p(t,o):(q=Qr(t),q.c(),q.m(g.parentNode,g)):q&&(q.d(1),q=null)},i(t){if(!h){Tt(i.$$.fragment,t),Tt(c.$$.fragment,t);for(let t=0;t<O.length;t+=1)Tt(b[t]);Tt(m.$$.fragment,t),h=!0}},o(t){Ft(i.$$.fragment,t),Ft(c.$$.fragment,t);for(let t=0;t<b.length;t+=1)Ft(b[t]);Ft(m.$$.fragment,t),h=!1},d(t){y&&y.d(t),t&&et(e),t&&et(n),Vt(i),Vt(c);for(let t=0;t<b.length;t+=1)b[t].d();t&&et(d),Vt(m,t),t&&et(p),q&&q.d(t),t&&et(g),w=!1,$()}}}function Yr(t,e,n){let r,o,{options:i}=e,{data:s}=e,{columns:a,rows:l,messages:c}=Yn(i,s),u={filter:i.filter||"",filters:Hn(a,i.filters),sort:i.sort,wsort:i.wsort,show_controls:!!i.show_controls},f=0!=i.sortable,d=new Set(i.selected||[]);function m(t,e){!function(t,e,n,r){const o=new Set(n);if(t.metaKey)o.has(e)?o.delete(e):o.add(e);else{const t=o.has(e)&&1==o.size;o.clear(),t||o.add(e)}r(o)}(t,e,d,(t=>n(2,d=t)))}return t.$$set=t=>{"options"in t&&n(0,i=t.options),"data"in t&&n(8,s=t.data)},t.$$.update=()=>{2&t.$$.dirty&&n(9,r=er(a,l,u)),514&t.$$.dirty&&n(3,o=function(t,e,{sort:n,wsort:r}){return n&&n.length>0?Rn(t,e,n):r&&g(r)>0?Dn(t,e,r):e}(a,r,u))},[i,u,d,o,a,c,f,m,s,r,function(t){u=t,n(1,u)},function(t){u=t,n(1,u)},(t,e)=>m(e,t._i),()=>n(1,u={...u,show_controls:!0})]}class Zr extends Gt{constructor(t){super(),Kt(this,t,Yr,Xr,X,{options:0,data:8})}}function to(t){let e,n;return e=new Yt({props:{error:t[3]}}),{c(){Rt(e.$$.fragment)},m(t,r){Dt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.error=t[3]),e.$set(r)},i(t){n||(Tt(e.$$.fragment,t),n=!0)},o(t){Ft(e.$$.fragment,t),n=!1},d(t){Vt(e,t)}}}function eo(t){let e,n;return e=new Zr({props:{options:t[0].table,data:t[2]}}),{c(){Rt(e.$$.fragment)},m(t,r){Dt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.options=t[0].table),1&n&&(r.data=t[2]),e.$set(r)},i(t){n||(Tt(e.$$.fragment,t),n=!0)},o(t){Ft(e.$$.fragment,t),n=!1},d(t){Vt(e,t)}}}function no(t){let e,n;return e=new ae({}),{c(){Rt(e.$$.fragment)},m(t,r){Dt(e,t,r),n=!0},p:V,i(t){n||(Tt(e.$$.fragment,t),n=!0)},o(t){Ft(e.$$.fragment,t),n=!1},d(t){Vt(e,t)}}}function ro(t){let e,n,r,o={ctx:t,current:null,token:null,hasCatch:!0,pending:no,then:eo,catch:to,value:2,error:3,blocks:[,,,]};return Jt(n=B(t[0].data),o),{c(){e=nt("div"),o.block.c(),ct(e,"class","TableBlockContent")},m(t,n){tt(t,e,n),o.block.m(e,o.anchor=null),o.mount=()=>e,o.anchor=null,r=!0},p(e,[r]){t=e,o.ctx=t,1&r&&n!==(n=B(t[0].data))&&Jt(n,o)||Lt(o,t,r)},i(t){r||(Tt(o.block),r=!0)},o(t){for(let t=0;t<3;t+=1){Ft(o.blocks[t])}r=!1},d(t){t&&et(e),o.block.d(),o.token=null,o=null}}}function oo(t,e,n){let{block:r}=e,{state:o}=e;return t.$$set=t=>{"block"in t&&n(0,r=t.block),"state"in t&&n(1,o=t.state)},[r,o]}const io={image:class extends Gt{constructor(t){super(),Kt(this,t,ne,ee,X,{block:0,state:2})}},text:class extends Gt{constructor(t){super(),Kt(this,t,$e,we,X,{block:0,state:1})}},chart:class extends Gt{constructor(t){super(),Kt(this,t,sn,on,X,{block:2,state:0})}},table:class extends Gt{constructor(t){super(),Kt(this,t,oo,ro,X,{block:0,state:1})}}};function so(t){let e,n,r,o,i,s=t[0].title&&lo(t),a=t[0].description&&co(t);var l=t[3].value;function c(t){return{props:{block:t[0],state:t[4]}}}return l&&(o=new l(c(t))),{c(){s&&s.c(),e=it(),a&&a.c(),n=it(),r=nt("div"),o&&Rt(o.$$.fragment),ct(r,"class","content")},m(t,l){s&&s.m(t,l),tt(t,e,l),a&&a.m(t,l),tt(t,n,l),tt(t,r,l),o&&Dt(o,r,null),i=!0},p(t,i){t[0].title?s?s.p(t,i):(s=lo(t),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),t[0].description?a?(a.p(t,i),1&i&&Tt(a,1)):(a=co(t),a.c(),Tt(a,1),a.m(n.parentNode,n)):a&&(zt(),Ft(a,1,1,(()=>{a=null})),Pt());const u={};if(1&i&&(u.block=t[0]),l!==(l=t[3].value)){if(o){zt();const t=o;Ft(t.$$.fragment,1,0,(()=>{Vt(t,1)})),Pt()}l?(o=new l(c(t)),Rt(o.$$.fragment),Tt(o.$$.fragment,1),Dt(o,r,null)):o=null}else l&&o.$set(u)},i(t){i||(Tt(a),o&&Tt(o.$$.fragment,t),i=!0)},o(t){Ft(a),o&&Ft(o.$$.fragment,t),i=!1},d(t){s&&s.d(t),t&&et(e),a&&a.d(t),t&&et(n),t&&et(r),o&&Vt(o)}}}function ao(t){let e,n;return e=new Yt({props:{error:t[3].message}}),{c(){Rt(e.$$.fragment)},m(t,r){Dt(e,t,r),n=!0},p(t,n){const r={};8&n&&(r.error=t[3].message),e.$set(r)},i(t){n||(Tt(e.$$.fragment,t),n=!0)},o(t){Ft(e.$$.fragment,t),n=!1},d(t){Vt(e,t)}}}function lo(t){let e,n,r=t[0].title+"";return{c(){e=nt("div"),n=ot(r),ct(e,"class","title")},m(t,r){tt(t,e,r),Z(e,n)},p(t,e){1&e&&r!==(r=t[0].title+"")&&ut(n,r)},d(t){t&&et(e)}}}function co(t){let e,n;return e=new me({props:{markdown:t[0].description}}),{c(){Rt(e.$$.fragment)},m(t,r){Dt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.markdown=t[0].description),e.$set(r)},i(t){n||(Tt(e.$$.fragment,t),n=!0)},o(t){Ft(e.$$.fragment,t),n=!1},d(t){Vt(e,t)}}}function uo(t){let e,n,r,o,i,s;const a=[ao,so],l=[];function c(t,e){return t[3].is_error?0:1}return n=c(t),r=l[n]=a[n](t),{c(){e=nt("div"),r.c(),ct(e,"id",o="block_"+t[1]),ct(e,"class",i="Block _block_"+t[2])},m(t,r){tt(t,e,r),l[n].m(e,null),s=!0},p(t,[u]){let f=n;n=c(t),n===f?l[n].p(t,u):(zt(),Ft(l[f],1,1,(()=>{l[f]=null})),Pt(),r=l[n],r?r.p(t,u):(r=l[n]=a[n](t),r.c()),Tt(r,1),r.m(e,null)),(!s||2&u&&o!==(o="block_"+t[1]))&&ct(e,"id",o),(!s||4&u&&i!==(i="Block _block_"+t[2]))&&ct(e,"class",i)},i(t){s||(Tt(r),s=!0)},o(t){Ft(r),s=!1},d(t){t&&et(e),l[n].d()}}}function fo(t,e,n){let r,o,i,{data_url:s}=e,{data:a}=e;return t.$$set=t=>{"data_url"in t&&n(5,s=t.data_url),"data"in t&&n(0,a=t.data)},t.$$.update=()=>{33&t.$$.dirty&&n(1,r=a.id||function(t,e){if(void 0===e){if(t.length<1)throw new Error("can't get last elements from empty list");return t[t.length-1]}if(t.length<e)throw new Error(`can't get last ${e} elements from list of length ${t.length}`);return t.slice(t.length-e,t.length)}(s.split("/")).replace(/\.[^\.]+$/,"")),1&t.$$.dirty&&n(2,o=a.style||"normal"),1&t.$$.dirty&&n(3,i=function(t){for(const e in io)if(e in t)return z(io[e]);return P(`Unknown block '${Object.keys(t).join(", ")}'. There's either mistake in the block name or it's an block from the plugin that's not loaded. Either fix the block name or load the plugin.`)}(a))},[a,r,o,i,{is_narrow:!1,collapsed:!1},s]}const mo=.1,po={block:class extends Gt{constructor(t){super(),Kt(this,t,fo,uo,X,{data_url:5,data:0})}}};!async function(){try{const t=function(){const t=new URLSearchParams(window.location.search).get("data_url");if(t)return t;{let t=window.location.pathname;t.startsWith("/")||(t+="/");const e=/\.[^\/]+$/,n=/:([^:]+)$/i;return t=t.replace(n,""),e.test(t)||(t+=".yml"),t}}(),e=await W(t);e.css_url&&J([e.css_url],"parallel");const n=function(t){if(!t.app)return P("app not specified");if(!Array.isArray(t.app)||2!=t.app.length)return P("invalid app, it should be `app: [app_name, 0.1]`");const[e,n]=t.app;if(!n)throw new Error("version is missing, please specify version as 0.1");if(n!=mo)throw new Error(`version ${n} is wrong, the current view has 0.1 version, update version or use view of different version`);const r=po[e];return r?z(r):P(`Unknown app '${e}'.`)}(e);if(n.is_error)throw new Error(n.message);const r=n.value,o={data_url:t,data:e};new r({target:document.body,props:o})}catch(t){new Yt({target:document.body,props:{error:t}})}}()}();
