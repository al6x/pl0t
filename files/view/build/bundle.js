!function(){"use strict";function t(t,e){var n;const r=null===(n=window)||void 0===n?void 0:n.env[t];return null!=r?r:null!=e?e:void 0}let e="Deno"in window?window.Deno:void 0;function n(t){return t&&t.toJSON?t.toJSON():t}const r=[];let o,i=0,s=!1;function a(){s||(s=!0,setTimeout((async()=>{for(;i<r.length;){let{name:t,test:n}=r[i];i+=1;try{console.log(`  test | ${t}`);let e=n();e&&await e}catch(n){if(console.error(`  test | ${t} failed`),console.error(n),null!=e)throw n}}s=!1}),0))}window.runTests=a;try{o=(t("test")||"").toLowerCase()}catch(t){o="false"}let l="all"==o||"true"==o;function c(t,e){r.push({name:t,test:e}),(l||t.toLowerCase()==o)&&a()}const u=function(t,e){const n=e?e instanceof Function?e():e:"Assertion error!";if(!t)throw new Error(n)};function f(t){return null===t||"object"!=typeof t?t:Array.isArray(t)?t.map(f):"toJSON"in t?f(t.toJSON()):Object.assign({},...Object.entries(t).sort((([t],[e])=>t.localeCompare(e))).map((([t,e])=>({[t]:f(e)}))))}function d(t,e=!0){return e?JSON.stringify(f(t),null,2):JSON.stringify(f(t))}function p(t,e){return null===(t=e(t))||"object"!=typeof t?t:"map"in t?t.map((t=>p(t,e))):Object.assign({},...Object.entries(t).map((([t,n])=>({[t]:p(n,e)}))))}function m(t,e){const n=e.match(t);return n?1==n.length?[]:n.slice(1,n.length):[]}function g(t){if(t instanceof Array)return t.length;if(t instanceof String||"string"==typeof t)return t.length;{let e=0;for(const n in t)t.hasOwnProperty(n)&&e++;return e}}function h(t){const e=m(/^(\s+)/,t=t.replace(/^\s*\n|[\n\s]+$/,""));return 0==e.length?t:t.split("\n").map((t=>t.startsWith(e[0])?t.replace(e[0],""):t)).join("\n")}function w(t,e){if(t instanceof Array)for(let n=0;n<t.length;n++)e(t[n],n);else if(t instanceof Map)for(const[n,r]of t)e(r,n);else for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function b(t,e){const n=e instanceof Function?e:t=>t==e;if(t instanceof Array)for(let e=0;e<t.length;e++){if(n(t[e],e))return t[e];for(const e in t)if(t.hasOwnProperty(e)&&n(t[e],e))return t[e]}}function $(t,e){if(e=e||(t=>t),0==t.length)return-1;let n=e(t[0]),r=0;for(let o=1;o<t.length;o++){let i=e(t[o]);i<n&&(n=i,r=o)}return r}function v(t,e){if(e=e||(t=>t),0==t.length)return-1;let n=e(t[0]),r=0;for(let o=1;o<t.length;o++){let i=e(t[o]);i>n&&(n=i,r=o)}return r}function y(t,e=!1){return k(t,.5,e)}function k(t,e,n=!1){const r=n?t:[...t].sort(((t,e)=>t-e)),o=(r.length-1)*e,i=Math.floor(o),s=o-i;return void 0!==r[i+1]?r[i]+s*(r[i+1]-r[i]):r[i]}function x(t,e){const n=[];let r=0;for(;;){const o=[];r<t.length&&n.push(o);for(let i=0;i<e;i++){if(!(r+i<t.length))return n;o.push(t[r+i])}r+=e}}function _(t,e){if(t instanceof Array){const n=new Array,r=new Array,o=e instanceof Function?e:(t,n)=>e.includes(n);return w(t,((t,e)=>o(t,e)?n.push(t):r.push(t))),[n,r]}{const n={},r={},o=e instanceof Function?e:(t,n)=>e.includes(n);return w(t,((t,e)=>o(t,e)?n[e]=t:r[e]=t)),[n,r]}}function j(t,e,n=!1){if(0==t.length)return t;{const r=typeof e(t[0]);let o,i;if("number"==r)o=function(t,n){return e(t)-e(n)};else if("boolean"==r)o=function(t,n){return(e(t)?1:0)-(e(n)?1:0)};else{if("string"!=r)throw new Error(`invalid return type for 'by' '${r}'`);o=function(t,n){return e(t).localeCompare(e(n))}}return i=[...t],i.sort(o),n&&i.reverse(),i}}function O(t,e){if(t instanceof Array){const n=[];return w(t,((t,r)=>{const o=e(t,r);!1!==o&&n.push(o)})),n}if(t instanceof Map){const n=new Map;return w(t,((t,r)=>{const o=e(t,r);!1!==o&&n.set(r,o)})),n}{const n={};return w(t,((t,r)=>{const o=e(t,r);!1!==o&&(n[r]=o)})),n}}function E(t,e){if("object"==typeof t&&"found"in t){if(t.found)return t.value;throw new Error(t.message||`value${e?" "+e:""} not found`)}if("string"==typeof t){if(""==t)throw new Error(`string value${e?" "+e:""} not found`);return t}if(void 0===t)throw new Error(`value${e?" "+e:""} not defined`);return t}function q(t,e,n){return w(t,((t,r)=>e=n(e,t,r))),e}function M(t){return q(t,0,((t,e)=>t+e))}function A(t,e){if(t instanceof Array)return t.map(e);if(t instanceof Map){const n=new Map;return w(t,((t,r)=>n.set(r,e(t,r)))),n}{const n={};return w(t,((t,r)=>n[r]=e(t,r))),n}}function S(t,e=0){return 0==e?Math.round(t):Math.round((t+Number.EPSILON)*Math.pow(10,e))/Math.pow(10,e)}function C(t,e,n=!1){let r;return(...o)=>{n?(n=!1,t(...o)):(r&&clearTimeout(r),r=setTimeout((()=>t(...o)),e))}}function z(t,e="Unknown error"){return t&&"object"==typeof t&&t instanceof Error?(t.message||(t.message=e),t):new Error(""+(t||e))}u.equal=(t,e,n)=>{if(!function(t,e){return d(t)===d(e)}(t,e)){const r=n?n instanceof Function?n():n:`Assertion error: ${d(t,!0)} != ${d(e,!0)}`;throw new Error(r)}},u.fail=(t,e)=>{let n=!1;try{t()}catch(t){n=!0}if(!n){const t=e?e instanceof Function?e():e:"Assertion error: expected to fail but didn't";throw new Error(t)}},u.approxEqual=(t,e,n,r)=>{r=r||.001;const o=(Math.abs(t)+Math.abs(e))/2*r;if(Math.abs(t-e)>o){const r=n?n instanceof Function?n():n:`Assertion error: ${d(t,!0)} != ${d(e,!0)}`;throw new Error(r)}},c("deepMap",(()=>{class t{constructor(t){this.v=t}toJSON(){return this.v}}const e=new t([1,2]);u.equal(p(e,n),[1,2]);const r=new t([e,3]);u.equal(p(r,n),[[1,2],3])})),Promise.prototype.toJSON=function(){return"Promise"},Object.defineProperty(Promise.prototype,"cmap",{configurable:!1,enumerable:!1}),c("parse",(()=>{u.equal(m(/.+ (\d+) (\d+)/,"a 22 45"),["22","45"]),u.equal(m(/[^;]+;/,"drop table; create table;"),[])})),c("parseNamed",(()=>{u.equal(function(t,e){const n=e.match(t);return(null==n?void 0:n.groups)||{}}(/.+ (?<a>\d+) (?<b>\d+)/,"a 22 45"),{a:"22",b:"45"})})),c("dedent",(()=>{u.equal(h("\n  a\n  b\n    c"),"a\nb\n  c")})),c("groupByN",(()=>{u.equal(x([1,2,3],2),[[1,2],[3]]),u.equal(x([1,2],2),[[1,2]]),u.equal(x([1],2),[[1]]),u.equal(x([],2),[])})),c("sortBy",(()=>{u.equal(j([{v:!0},{v:!1}],(({v:t})=>t)),[{v:!1},{v:!0}]),u.equal(j([{v:"b"},{v:""},{v:"c"}],(({v:t})=>t)),[{v:""},{v:"b"},{v:"c"}])})),c("pick",(()=>{var t;u.equal((t=["a"],_({a:1,b:2},((e,n)=>t.includes(n)))[0]),{a:1})})),c("round",(()=>{u.equal(S(.05860103881518906,2),.06)})),Error.prototype.toJSON=function(){return{message:this.message,stack:this.stack}},Map.prototype.toJSON=function(){return q(this,{},((t,e,n)=>(t[n]=e,t)))};const N={blocks_limit:100,narrow_width:480,height_in_narrow_width_mode:200,parsers:{},blocks_for_file_extensions:{md:"text",text:"text"},blocks:{},apps:{}};window.plot_config=N;const P={version:.1};function T(){}function F(t){return t()}function J(){return Object.create(null)}function L(t){t.forEach(F)}function U(t){return"function"==typeof t}function W(t,e){return t!=t?e==e:t!==e}function B(t){return null==t?"":t}function I(t,e){t.appendChild(e)}function R(t,e,n){t.insertBefore(e,n||null)}function D(t){t.parentNode.removeChild(t)}function V(t){return document.createElement(t)}function K(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function H(t){return document.createTextNode(t)}function X(){return H(" ")}function G(){return H("")}function Q(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function Y(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Z(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function tt(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function et(t,e){t.value=null==e?"":e}function nt(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function rt(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}}let ot,it;function st(){if(void 0===ot){ot=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){ot=!0}}return ot}window.plot_api=P;class at{constructor(t=null){this.a=t,this.e=this.n=null}m(t,e,n=null){this.e||(this.e=V(e.nodeName),this.t=e,this.h(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)R(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(D)}}function lt(t){it=t}function ct(){if(!it)throw new Error("Function called outside component initialization");return it}const ut=[],ft=[],dt=[],pt=[],mt=Promise.resolve();let gt=!1;function ht(t){dt.push(t)}function wt(t){pt.push(t)}let bt=!1;const $t=new Set;function vt(){if(!bt){bt=!0;do{for(let t=0;t<ut.length;t+=1){const e=ut[t];lt(e),yt(e.$$)}for(lt(null),ut.length=0;ft.length;)ft.pop()();for(let t=0;t<dt.length;t+=1){const e=dt[t];$t.has(e)||($t.add(e),e())}dt.length=0}while(ut.length);for(;pt.length;)pt.pop()();gt=!1,bt=!1,$t.clear()}}function yt(t){if(null!==t.fragment){t.update(),L(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ht)}}const kt=new Set;let xt;function _t(){xt={r:0,c:[],p:xt}}function jt(){xt.r||L(xt.c),xt=xt.p}function Ot(t,e){t&&t.i&&(kt.delete(t),t.i(e))}function Et(t,e,n,r){if(t&&t.o){if(kt.has(t))return;kt.add(t),xt.c.push((()=>{kt.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function qt(t,e){const n=e.token={};function r(t,r,o,i){if(e.token!==n)return;e.resolved=i;let s=e.ctx;void 0!==o&&(s=s.slice(),s[o]=i);const a=t&&(e.current=t)(s);let l=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&(_t(),Et(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),jt())})):e.block.d(1),a.c(),Ot(a,1),a.m(e.mount(),e.anchor),l=!0),e.block=a,e.blocks&&(e.blocks[r]=a),l&&vt()}if((o=t)&&"object"==typeof o&&"function"==typeof o.then){const n=ct();if(t.then((t=>{lt(n),r(e.then,1,e.value,t),lt(null)}),(t=>{if(lt(n),r(e.catch,2,e.error,t),lt(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var o}function Mt(t,e,n){const r=e.slice(),{resolved:o}=t;t.current===t.then&&(r[t.value]=o),t.current===t.catch&&(r[t.error]=o),t.block.p(r,n)}function At(t,e){t.d(1),e.delete(t.key)}function St(t,e){Et(t,1,1,(()=>{e.delete(t.key)}))}function Ct(t,e,n,r,o,i,s,a,l,c,u,f){let d=t.length,p=i.length,m=d;const g={};for(;m--;)g[t[m].key]=m;const h=[],w=new Map,b=new Map;for(m=p;m--;){const t=f(o,i,m),a=n(t);let l=s.get(a);l?r&&l.p(t,e):(l=c(a,t),l.c()),w.set(a,h[m]=l),a in g&&b.set(a,Math.abs(m-g[a]))}const $=new Set,v=new Set;function y(t){Ot(t,1),t.m(a,u),s.set(t.key,t),u=t.first,p--}for(;d&&p;){const e=h[p-1],n=t[d-1],r=e.key,o=n.key;e===n?(u=e.first,d--,p--):w.has(o)?!s.has(r)||$.has(r)?y(e):v.has(o)?d--:b.get(r)>b.get(o)?(v.add(r),y(e)):($.add(o),d--):(l(n,s),d--)}for(;d--;){const e=t[d];w.has(e.key)||l(e,s)}for(;p;)y(h[p-1]);return h}function zt(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function Nt(t){t&&t.c()}function Pt(t,e,n,r){const{fragment:o,on_mount:i,on_destroy:s,after_update:a}=t.$$;o&&o.m(e,n),r||ht((()=>{const e=i.map(F).filter(U);s?s.push(...e):L(e),t.$$.on_mount=[]})),a.forEach(ht)}function Tt(t,e){const n=t.$$;null!==n.fragment&&(L(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ft(t,e){-1===t.$$.dirty[0]&&(ut.push(t),gt||(gt=!0,mt.then(vt)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Jt(t,e,n,r,o,i,s=[-1]){const a=it;lt(t);const l=t.$$={fragment:null,ctx:null,props:i,update:T,not_equal:o,bound:J(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:e.context||[]),callbacks:J(),dirty:s,skip_bound:!1};let c=!1;if(l.ctx=n?n(t,e.props||{},((e,n,...r)=>{const i=r.length?r[0]:n;return l.ctx&&o(l.ctx[e],l.ctx[e]=i)&&(!l.skip_bound&&l.bound[e]&&l.bound[e](i),c&&Ft(t,e)),n})):[],l.update(),c=!0,L(l.before_update),l.fragment=!!r&&r(l.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);l.fragment&&l.fragment.l(t),t.forEach(D)}else l.fragment&&l.fragment.c();e.intro&&Ot(t.$$.fragment),Pt(t,e.target,e.anchor,e.customElement),vt()}lt(a)}class Lt{$destroy(){Tt(this,1),this.$destroy=T}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Ut(t){let e,n;return{c(){e=V("pre"),n=H(t[1]),Z(e,"class","text-xs text-gray-600 mt-4")},m(t,r){R(t,e,r),I(e,n)},p(t,e){2&e&&tt(n,t[1])},d(t){t&&D(e)}}}function Wt(t){let e,n,r,o,i,s=z(t[0]).message+"",a=t[1].length>0&&Ut(t);return{c(){e=V("div"),n=V("span"),n.textContent="Error",r=H(" -\n  "),o=H(s),i=X(),a&&a.c(),Z(n,"class","text-red-600 font-bold")},m(t,s){R(t,e,s),I(e,n),I(e,r),I(e,o),I(e,i),a&&a.m(e,null)},p(t,[n]){1&n&&s!==(s=z(t[0]).message+"")&&tt(o,s),t[1].length>0?a?a.p(t,n):(a=Ut(t),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i:T,o:T,d(t){t&&D(e),a&&a.d()}}}function Bt(t,e,n){let r,{error:o}=e;return t.$$set=t=>{"error"in t&&n(0,o=t.error)},t.$$.update=()=>{1&t.$$.dirty&&n(1,r=(o&&o instanceof Error?o.stack:"")||"")},[o,r]}class It extends Lt{constructor(t){super(),Jt(this,t,Bt,Wt,W,{error:0})}}function Rt(t){let e,n;return e=new It({props:{error:"Data images not supported yet"}}),{c(){Nt(e.$$.fragment)},m(t,r){Pt(e,t,r),n=!0},p:T,i(t){n||(Ot(e.$$.fragment,t),n=!0)},o(t){Et(e.$$.fragment,t),n=!1},d(t){Tt(e,t)}}}function Dt(t){let e,n,r;return{c(){e=V("img"),e.src!==(n=t[1].url)&&Z(e,"src",n),Z(e,"alt",r=t[0].id)},m(t,n){R(t,e,n)},p(t,o){2&o&&e.src!==(n=t[1].url)&&Z(e,"src",n),1&o&&r!==(r=t[0].id)&&Z(e,"alt",r)},i:T,o:T,d(t){t&&D(e)}}}function Vt(t){let e,n,r,o;const i=[Dt,Rt],s=[];function a(t,e){return"object"==typeof t[1]&&"url"in t[1]?0:1}return n=a(t),r=s[n]=i[n](t),{c(){e=V("div"),r.c(),Z(e,"class","ImageBlockContent")},m(t,r){R(t,e,r),s[n].m(e,null),o=!0},p(t,[o]){let l=n;n=a(t),n===l?s[n].p(t,o):(_t(),Et(s[l],1,1,(()=>{s[l]=null})),jt(),r=s[n],r?r.p(t,o):(r=s[n]=i[n](t),r.c()),Ot(r,1),r.m(e,null))},i(t){o||(Ot(r),o=!0)},o(t){Et(r),o=!1},d(t){t&&D(e),s[n].d()}}}function Kt(t,e,n){let r,{block:o}=e,{state:i}=e;return t.$$set=t=>{"block"in t&&n(0,o=t.block),"state"in t&&n(2,i=t.state)},t.$$.update=()=>{1&t.$$.dirty&&n(1,r=o.image)},[o,r,i]}var Ht=Object.freeze({__proto__:null,default:class extends Lt{constructor(t){super(),Jt(this,t,Kt,Vt,W,{block:0,state:2})}},definition:{match:t=>"object"==typeof t&&"image"in t}});class Xt{constructor(t){this.v=t}get(){return this.v}set(t){this.v=t}}function Gt(t){const e=m(/\.([a-z0-9]+)$/i,t);return e.length>0?e[0]:void 0}function Qt(e){return/\//.test(e)?function(){const e=t("base_url");if(void 0===e)throw new Error("base_url not specified");return e}()+e:e}async function Yt(t,e){if("parallel"==e){const e=t.map(te);for(const t of e)await t}else for(const e of t)await te(e)}const Zt={};async function te(t){if(!(t in Zt)){const e=Qt(t);if(t.endsWith(".js"))Zt[t]=function(t){return new Promise(((e,n)=>{const r=document.createElement("script");r.src=t,r.onerror=()=>{r.remove(),n(new Error(`Cannot load ${t}`))},r.onload=()=>{r.remove(),e()},document.body.append(r)}))}(e);else{if(!t.endsWith(".css"))throw new Error(`should be script or style url '${t}'`);Zt[t]=function(t){return new Promise(((e,n)=>{const r=document.createElement("link");r.rel="stylesheet",r.onerror=()=>{r.remove(),n(new Error(`Cannot load ${t}`))},r.onload=()=>{e()},r.href=t,document.head.appendChild(r)}))}(e)}}return Zt[t]}async function ee(t){let e=await fetch(function(t,e={}){const n=[];for(const t in e){const r=e[t];null!=t&&null!=r&&n.push(`${encodeURIComponent(t)}=${encodeURIComponent(""+e[t])}`)}return n.length>0?`${t}${t.includes("?")?"&":"?"}${n.join("&")}`:t}(t,{clearcache:Math.random()}));return async function(t,e,n){if(e){const r=N.parsers[e];if(r)try{return await r(t)}catch(t){throw new Error(`can't parse '${n||e}', ${z(t).message}`)}}return t}(await e.text(),Gt(t),t)}async function ne(t){if(void 0===t)throw new Error("nether data nor data url provided");return"object"==typeof t&&"url"in t?await ee(t.url):t}async function re(t){return(await ie()).load(t)}async function oe(t){return(await ie()).dump(t,{skipInvalid:!0,noRefs:!0})}async function ie(){await Yt(["/vendor/js-yaml-4.1.0/js-yaml.min.js"],"serial");const t=window.jsyaml;if(!t)throw new Error("can't load 'js-yaml' library");return t}function se(t){return t&&"object"==typeof t&&"csv_table"==t.type}N.parsers.yml=re,N.parsers.yaml=re,N.parsers.json=async t=>JSON.parse(t),N.parsers.csv=async function(t){const{errors:e,data:n,meta:{fields:r}}=(await async function(){await Yt(["/vendor/papaparse-5.0.2/papaparse.min.js"],"serial");const t=window.Papa;if(!t)throw new Error("can't load 'papaparse' library");return t}()).parse(t,{header:!0,dynamicTyping:!0});if(e.lenght>0)throw new Error(z(e[0]).message);return{type:"csv_table",columns:r,rows:n}};const ae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};c("escapeHtml",(()=>{var t;u.equal(null==(t="<div>")?"":(""+t).replace(/[&<>'"]/g,(function(t){return ae[t]})),"&lt;div&gt;")}));let le=!1;async function ce(t){await async function(t){return new Promise((e=>setTimeout(e,t)))}(0),await async function(){return Yt(["/vendor/marked-0.8.2/marked.min.js"],"serial")}();const e=window.marked;if(!e)throw new Error("can't load 'marked' library for markdown");const n=new e.Renderer;let r=0;const o=()=>`__special_katext_id_${r++}__`,i={};function s(t){return t.replace("&gt;",">").replace("&lt;",">").replace("&quot;","'")}function a(t){return t=(t=t.replace(/\$\$([\s\S]+?)\$\$/g,((t,e)=>{const n=o();return i[n]={type:"block",expression:s(e)},n}))).replace(/\$([^\n\s]+?)\$/g,((t,e)=>{const n=o();return i[n]={type:"inline",expression:s(e)},n}))}const l=n.listitem;n.listitem=function(t,e,n){return l(a(t),e,n)};const c=n.paragraph;n.paragraph=function(t){return c(a(t))};const u=n.tablecell;function f(t){e.setOptions({renderer:n,highlight:t,pedantic:!1,gfm:!0,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!0})}let d;if(n.tablecell=function(t,e){return u(a(t),e)},le){const n=window.hljs;if(!n)throw new Error("can't load 'highlightjs' library for markdown");f(((t,e)=>{try{return e?n.highlight(t,{language:e}).value:t}catch(e){return t}})),d=e(h(t))}else{let n=!1;if(f(((t,e)=>(n=!0,""))),d=e(h(t)),n)return await Yt(["/vendor/highlight.js-11.0.1/default.min.css","/vendor/highlight.js-11.0.1/highlight.min.js"],"parallel"),le=!0,ce(t)}return d.includes("__special_katext_id_")&&(await Yt(["/vendor/katex-0.11.1/katex.min.js"],"parallel"),Yt(["/vendor/katex-0.11.1/katex.css"],"parallel").then((t=>console.warn(`can't load styles for KaTeX, ${z(t).message}`))),d=d.replace(/(__special_katext_id_\d+__)/g,((t,e)=>{let{type:n,expression:r}=i[e];return r=r.replace(/<br\/>/g,"\\\\"),window.katex.renderToString(r,{output:"html",displayMode:"block"==n,throwOnError:!1})}))),d}function ue(t){let e,n;return{c(){e=V("div"),n=H(t[0])},m(t,r){R(t,e,r),I(e,n)},p(t,[e]){1&e&&tt(n,t[0])},i:T,o:T,d(t){t&&D(e)}}}function fe(t,e,n){let{text:r="Processing..."}=e;return t.$$set=t=>{"text"in t&&n(0,r=t.text)},[r]}class de extends Lt{constructor(t){super(),Jt(this,t,fe,ue,W,{text:0})}}function pe(t){let e,n,r=t[0].html+"";return{c(){n=G(),e=new at(n)},m(t,o){e.m(r,t,o),R(t,n,o)},p(t,n){1&n&&r!==(r=t[0].html+"")&&e.p(r)},i:T,o:T,d(t){t&&D(n),t&&e.d()}}}function me(t){let e,n;return e=new It({props:{error:t[0].error}}),{c(){Nt(e.$$.fragment)},m(t,r){Pt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.error=t[0].error),e.$set(r)},i(t){n||(Ot(e.$$.fragment,t),n=!0)},o(t){Et(e.$$.fragment,t),n=!1},d(t){Tt(e,t)}}}function ge(t){let e,n;return e=new de({}),{c(){Nt(e.$$.fragment)},m(t,r){Pt(e,t,r),n=!0},p:T,i(t){n||(Ot(e.$$.fragment,t),n=!0)},o(t){Et(e.$$.fragment,t),n=!1},d(t){Tt(e,t)}}}function he(t){let e,n,r,o;const i=[ge,me,pe],s=[];function a(t,e){return"empty"==t[0].state?0:"error"==t[0].state?1:2}return n=a(t),r=s[n]=i[n](t),{c(){e=V("div"),r.c(),Z(e,"class","markdown")},m(t,r){R(t,e,r),s[n].m(e,null),o=!0},p(t,[o]){let l=n;n=a(t),n===l?s[n].p(t,o):(_t(),Et(s[l],1,1,(()=>{s[l]=null})),jt(),r=s[n],r?r.p(t,o):(r=s[n]=i[n](t),r.c()),Ot(r,1),r.m(e,null))},i(t){o||(Ot(r),o=!0)},o(t){Et(r),o=!1},d(t){t&&D(e),s[n].d()}}}function we(t,e,n){let{markdown:r}=e,o={state:"empty"};return t.$$set=t=>{"markdown"in t&&n(1,r=t.markdown)},t.$$.update=()=>{if(3&t.$$.dirty&&("empty"==o.state||o.markdown!=r)){const t=r;ce(r).then((e=>{n(0,o={state:"success",markdown:t,html:e})})).catch((e=>{const r=z(e,"Unknown error while processing markdown").message;n(0,o={state:"error",markdown:t,error:r})}))}},[o,r]}class be extends Lt{constructor(t){super(),Jt(this,t,we,he,W,{markdown:1})}}function $e(t){let e,n;return e=new It({props:{error:t[3]}}),{c(){Nt(e.$$.fragment)},m(t,r){Pt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.error=t[3]),e.$set(r)},i(t){n||(Ot(e.$$.fragment,t),n=!0)},o(t){Et(e.$$.fragment,t),n=!1},d(t){Tt(e,t)}}}function ve(t){let e,n;return e=new be({props:{markdown:t[2]}}),{c(){Nt(e.$$.fragment)},m(t,r){Pt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.markdown=t[2]),e.$set(r)},i(t){n||(Ot(e.$$.fragment,t),n=!0)},o(t){Et(e.$$.fragment,t),n=!1},d(t){Tt(e,t)}}}function ye(t){let e,n;return e=new de({}),{c(){Nt(e.$$.fragment)},m(t,r){Pt(e,t,r),n=!0},p:T,i(t){n||(Ot(e.$$.fragment,t),n=!0)},o(t){Et(e.$$.fragment,t),n=!1},d(t){Tt(e,t)}}}function ke(t){let e,n,r,o={ctx:t,current:null,token:null,hasCatch:!0,pending:ye,then:ve,catch:$e,value:2,error:3,blocks:[,,,]};return qt(n=ne(t[0].text),o),{c(){e=V("div"),o.block.c(),Z(e,"class","TextBlockContent")},m(t,n){R(t,e,n),o.block.m(e,o.anchor=null),o.mount=()=>e,o.anchor=null,r=!0},p(e,[r]){t=e,o.ctx=t,1&r&&n!==(n=ne(t[0].text))&&qt(n,o)||Mt(o,t,r)},i(t){r||(Ot(o.block),r=!0)},o(t){for(let t=0;t<3;t+=1){Et(o.blocks[t])}r=!1},d(t){t&&D(e),o.block.d(),o.token=null,o=null}}}const xe={match:t=>"object"==typeof t&&"text"in t||"string"==typeof t,normalize:t=>{if("string"==typeof t)return{text:t};if("object"==typeof t)return t;throw new Error("unsupported data type")}};function _e(t,e,n){let{block:r}=e,{state:o}=e;return t.$$set=t=>{"block"in t&&n(0,r=t.block),"state"in t&&n(1,o=t.state)},[r,o]}var je=Object.freeze({__proto__:null,default:class extends Lt{constructor(t){super(),Jt(this,t,_e,ke,W,{block:0,state:1})}},definition:xe});const Oe=["width","height","config"];function Ee(t){for(const e in t)if(Oe.indexOf(e)<0)throw new Error(`invalid property '${e}'`);return tn("width",t.width,["number","undefined"]),tn("height",t.height,["number","undefined"]),t}const qe=["linear","linear-closed","step","step-before","step-after","basis","basis-open","basis-closed","cardinal","cardinal-open","cardinal-closed","bundle","monotone"];const Me=["point","circle","line","area","bar","rect","rule","square","text","tick","trail"];function Ae(t){if(Me.indexOf(t)<0)throw new Error(`invalid mark '${t}', available are ${Me.join(", ")}`);return t}const Se=["mark","color","size","point","interpolate","opacity","thickness","vega"];function Ce(t){for(const e in t)if(Se.indexOf(e)<0)throw new Error(`unknown mark property '${e}', available are ${Se.join(", ")}`);const{mark:e,color:n,size:r,point:o,interpolate:i,opacity:s,thickness:a,vega:l}=t;return tn("color",n,["string","undefined"]),tn("size",r,["number","undefined"]),tn("point",o,["boolean","undefined"]),i&&function(t){if(qe.indexOf(t)<0)throw new Error(`invalid interpolate '${t}', available are ${qe.join(", ")}`)}(i),tn("opacity",s,["number","undefined"]),tn("thickness",a,["number","undefined"]),tn("vega",l,["object","undefined"]),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({type:Ae(e)},void 0!==n?{color:n}:{}),void 0!==r?{size:r}:{}),void 0!==o?{point:o}:{}),void 0!==i?{interpolate:i}:{}),void 0!==s?{opacity:s}:{}),void 0!==a?{thickness:a}:{}),void 0!==l?l:{})}const ze=["nominal","ordinal","quantitative","temporal"];const Ne=["linear","pow","sqrt","symlog","log","time","utc","ordinal","band","point","bin-ordinal","quantile","quantize","threshold"];const Pe=["count","valid","missing","distinct","sum","mean","average","variance","variancep","stdev","stdevp","stderr","median","q1","q3","ci0","ci1","min","max","argmin","argmax","product"];const Te=["x","y","x2","y2","xError","yError","xError2","yError2","longitude","latitude","longitude2","latitude2","color","opacity","fillOpacity","strokeOpacity","shape","size","strokeWidth","text","tooltip","href","detail","key","order"];const Fe=["year","yearquarter","yearquartermonth","yearmonth","yearmonthdate","yearmonthdatehours","yearmonthdatehoursminutes","yearmonthdatehoursminutesseconds","quarter","quartermonth","month","monthdate","date","day","hours","hoursminutes","hoursminutesseconds","minutes","minutesseconds","seconds","secondsmilliseconds","milliseconds"];function Je(t){if(Fe.indexOf(t)<0)throw new Error(`invalid time unit '${t}', available are ${Fe.join(", ")}`);return t}function Le(t){if(tn("bin",t,["string","number","boolean","undefined"]),"string"==typeof t&&"binned"!=t)throw new Error("bin should have type of \"boolean | number | 'binned'\"");return"boolean"==typeof t||"string"==typeof t?t:{base:t,maxbins:t}}const Ue=["calculate","as"];function We(t){for(const e in t)if(Ue.indexOf(e)<0)throw new Error(`unknown calculate property '${e}', available are ${Ue.join(", ")}`);return t}const Be=["filter"];function Ie(t){for(const e in t)if(Be.indexOf(e)<0)throw new Error(`unknown filter property '${e}', available are ${Be.join(", ")}`);return t}const Re=["type","aggregate","legend","title","labels","time_unit","timeUnit","bin","zero","domain","range","scale","value","override_value","scheme","reverse","vega"];function De(t){const e=[];for(const n in t)if(Re.indexOf(n)<0){if(Te.indexOf(n)<0)throw new Error(`unknown encoding property '${n}', available are ${Te.join(", ")}, ${Re.join(", ")}`);e.push(n)}if(0==e.length)throw new Error(`encoding channel not specified, please specify one of ${Te.join(", ")}`);if(e.length>1)throw new Error(`only one channel allowed in the same encoding, leave only one of ${e.join(", ")}`);t.type&&function(t){if(ze.indexOf(t)<0)throw new Error(`invalid field type '${t}', available are ${ze.join(", ")}`)}(t.type),t.aggregate&&function(t){if(Pe.indexOf(t)<0)throw new Error(`invalid aggregate '${t}', available are ${Pe.join(", ")}`)}(t.aggregate),tn("legend",t.legend,["string","boolean","undefined"]),tn("title",t.title,["string","boolean","undefined"]),tn("labels",t.labels,["boolean","undefined"]),t.time_unit&&Je(t.time_unit),t.timeUnit&&Je(t.timeUnit),t.bin&&Le(t.bin),tn("zero",t.zero,["boolean","undefined"]),t.scale&&function(t){if(Ne.indexOf(t)<0)throw new Error(`invalid scale type '${t}', available are ${Ne.join(", ")}`)}(t.scale),t.domain&&function(t){t.map((t=>(tn("scale domain",t,["number","string","boolean"]),t)))}(t.domain),t.range&&function(t){"string"==typeof t?tn("scale range",t,["string"]):t.map((t=>(tn("scale domain",t,["number","string"]),t)))}(t.range),tn("scheme",t.scheme,["string","undefined"]),tn("reverse",t.reverse,["boolean","undefined"]),tn("vega",t.vega,["object","undefined"]);const{type:n,title:r,labels:o,aggregate:i,legend:s,timeUnit:a,time_unit:l,bin:c,zero:u,domain:f,range:d,scale:p,value:m,scheme:g,reverse:h,vega:w,override_value:b}=t,$=Te.find((e=>e in t));if(!$)throw new Error(`Channel not found in ${JSON.stringify(t)}!`);const v=t[$],y=Object.assign(Object.assign(Object.assign({},void 0!==w&&"axis"in w?w.axis:{}),r&&"string"==typeof r?{title:r}:r?{}:{title:null}),void 0!==o?{labels:o}:{}),k=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},void 0!==w&&"scale"in w?w.scale:{}),void 0!==p?{type:p}:{}),void 0!==f?{nice:!1}:{}),void 0!==u?{zero:u}:{}),void 0!==f?{domain:f}:{}),void 0!==d?{range:d}:{}),void 0!==g?{scheme:g}:{}),void 0!==h?{reverse:h}:{});let x,_=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},void 0!==w?w:{}),""!==v?{field:v}:{}),{type:n||"quantitative"}),void 0!==i?{aggregate:i}:{}),void 0!==s?{legend:s}:{legend:!1}),void 0!==a?{timeUnit:a}:{}),void 0!==l?{timeUnit:l}:{}),Object.keys(y).length>0?{axis:y}:{}),Object.keys(k).length>0?{scale:k}:{}),void 0!==c?{bin:Le(c)}:{});if(m){const t=function(t,e,n){const r=t=>{if(void 0===t)throw new Error("encoding value shouldn't be undefined");return tn("encoding value",t,["number","string","boolean"]),t};if(Array.isArray(t)){if("condition"in n)throw new Error("Conditional value can't be used with condition!");if(2==t.length){const[e,o]=t;return[Object.assign(Object.assign({},n),{condition:{test:e,value:r(o)}}),void 0]}if(3==t.length){const[e,o,i]=t;return[Object.assign(Object.assign({},n),{value:r(i),condition:{test:e,value:r(o)}}),void 0]}throw new Error("encoding value should be a simple value or array with 2 ['datum.value > 0', 'green'] or 3 elements ['datum.value > 0', 1, -1]")}if(Ve.indexOf(e)>=0){if(""!=n.field&&void 0!==n.field&&null!==n.field)throw new Error(`value on ${Ve.join(", ")} channels cannot be used with 'field'`);const e=[{explicit_value:r(t)}];return[Object.assign(Object.assign({},n),{field:"explicit_value"}),e]}return[Object.assign(Object.assign({},n),{value:r(t)}),void 0]}(m,$,_);_=t[0],x=t[1]}return[$,_,x]}const Ve=["x","y"];const Ke=["concat"];function He(t){for(const e in t)if(Ke.indexOf(e)<0)throw new Error(`unknown concat property '${e}', available are ${Ke.join(", ")}`);return t}function Xe(t){const e=[];let n,r={},o=[],i=[],s={};const a=[],l=[];for(const c of t)if("string"==typeof c)e.push(Ae(c));else if("mark"in c)e.push(Ce(c));else if(Array.isArray(c))i=[...i,Ge(c)];else if("calculate"in c)o.push(We(c));else if("filter"in c)o.push(Ie(c));else if("facet"in c||"row"in c||"column"in c)a.push(c);else if("concat"in c)l.push(He(c));else if("height"in c||"width"in c||"config"in c)s=Object.assign(Object.assign({},s),Ee(c));else if(Te.some((t=>t in c))){const[t,e,n]=De(c);if(t in e)throw new Error(`Can't redefine channel ${t}!`);if(void 0!==n)throw new Error(`Explicit value for '${t}' allowed only inside of a layer`);r=Object.assign(Object.assign({},r),{[t]:e})}else{if(!("vega"in c))throw new Error(`unknown plot part ${JSON.stringify(c)}`);n=c.vega}if(e.length>1)throw new Error(`Multiple marks found ${e.join(", ")}`);const c=Object.assign(Object.assign(Object.assign({},o.length>0?{transform:o}:{}),s),n||{});function u(){return Object.assign(Object.assign(Object.assign({},e.length>0?{mark:e[0]}:{}),Object.keys(r).length>0?{encoding:r}:{}),i.length>0?{layer:i}:{})}if(a.length>0){if(l.length>0)throw new Error("concat can't be used with facet");return function(t,e,n){let r;for(const e of t)"facet"in e&&(r=e);if(r){if(t.length>1)throw new Error("Can't other facets with 'facet' keyword");return Object.assign(Object.assign(Object.assign({facet:{field:r.facet,type:r.type||"ordinal",header:{title:null}}},void 0!==r.columns?{columns:r.columns}:{}),{spec:e}),n)}{if(t.filter((t=>"row"in t)).length>1)throw new Error("Facet can't have more than one row");if(t.filter((t=>"column"in t)).length>1)throw new Error("Facet can't have more than one column");let r,o;for(const e of t)"row"in e&&(r=e),"column"in e&&(o=e);return Object.assign({facet:Object.assign(Object.assign({},r?{row:{field:r.row,type:r.type||"ordinal",header:{title:null}}}:{}),o?{column:{field:o.column,type:o.type||"ordinal",header:{title:null}}}:{}),spec:e},n)}}(a,u(),c)}if(l.length>0){if(l.length>1)throw new Error("there could be only one concat");if(a.length>0)throw new Error("concat can't be used with facet");if(e.length>0)throw new Error("top level mark can't be used with concat");if(Object.keys(r).length>0)throw new Error("top level encoding can't be used with concat");if(0==i.length)throw new Error("concat requires at least one layer");return Object.assign({["vertical"==l[0].concat?"vconcat":"hconcat"]:i},c)}return Object.assign(Object.assign({},u()),c)}function Ge(t){const e=[],n=[];let r,o,i={},s={};for(const a of t)if("string"==typeof a)e.push(Ae(a));else if("mark"in a)e.push(Ce(a));else if("calculate"in a)n.push(We(a));else if("filter"in a)n.push(Ie(a));else if("height"in a||"width"in a)s=Object.assign(Object.assign({},s),Ee(a));else if(Te.some((t=>t in a))){const[t,e,n]=De(a);if(t in e)throw new Error(`Can't redefine channel ${t}!`);o=n,i=Object.assign(Object.assign({},i),{[t]:e})}else{if(!("vega"in a))throw new Error(`unknown plot layer part ${JSON.stringify(a)}`);r=a.vega}if(e.length>1)throw new Error(`Multiple marks found ${e.join(", ")}`);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n.length>0?{transform:n}:{}),e.length>0?{mark:e[0]}:{}),Object.keys(i).length>0?{encoding:i}:{}),s),o?{data:{values:o}}:{}),r||{})}function Qe(t,e){if(t instanceof Array)return 0==t.length?[]:Array.isArray(t[0])?function(t,e){return t.map((t=>{const n={};for(let r=0;r<t.length;r++){if(!(r<e.length))throw new Error("there are more values in row than columns");n[e[r]]=t[r]}return n}))}(t,e||Ye).map(Ze):t.map(Ze);{if(!(t instanceof Object))throw new Error("Arrays data expected to be an Object");const e=Object.keys(t);if(0==e.length)throw new Error("Empty arrays data!");const n=e[0],r=t[n].length;for(const o of e)if(t[o].length!=r)throw new Error(`Arrays data has arrays of different length ${o} - ${t[o].length} and ${n} - ${r}`);const o=[];for(let n=0;n<r;n++){const r={};for(const o of e){const e=t[o][n];null!=e&&(r[o]=e)}o.push(r)}return o}}const Ye="abcdefghijklmnopqrstuvwxyz".split("");function Ze(t){const e={};for(let n in t){const r=t[n];null!=r&&(e[n]=r)}return e}function tn(t,e,n){if(n.indexOf(typeof e)<0)throw new Error(`invalid type for '${t}' allowed types ${n.join(", ")}`)}function en(t){t.finalize()}async function nn({chart:t,data:e,vega_options:n,is_narrow:r,suggested_width_px:o,vega_view:i,container_el:s}){if(await Yt(["/vendor/vega/vega-5.9.1.js","/vendor/vega/vega-lite-4.0.2.js","/vendor/vega/vega-embed-6.2.1.js"],"serial"),i&&en(i),!s)return;function a(t){return void 0!==o&&r?function(t,e,n){return t.width&&t.width<e||(t=Object.assign(Object.assign({},t),{width:e})),t.height&&t.height<n||(t=Object.assign(Object.assign({},t),{height:n})),t}(t,o,N.height_in_narrow_width_mode):t}let l=a("vega_spec"in t?t.vega_spec:Xe(t));e&&(l=Object.assign(Object.assign({},l),{data:{values:Qe(e)}})),n=n||{};return(await window.vegaEmbed(s,Object.assign(Object.assign({},function({suggested_width_px:t}){return{autosize:{type:"fit",contains:"padding"},width:t}}({suggested_width_px:o})),l),Object.assign(Object.assign({},{}),n))).view}function rn(t){let e,n;return e=new It({props:{error:t[2].error}}),{c(){Nt(e.$$.fragment)},m(t,r){Pt(e,t,r),n=!0},p(t,n){const r={};4&n&&(r.error=t[2].error),e.$set(r)},i(t){n||(Ot(e.$$.fragment,t),n=!0)},o(t){Et(e.$$.fragment,t),n=!1},d(t){Tt(e,t)}}}function on(t){let e,n;return e=new de({}),{c(){Nt(e.$$.fragment)},m(t,r){Pt(e,t,r),n=!0},p:T,i(t){n||(Ot(e.$$.fragment,t),n=!0)},o(t){Et(e.$$.fragment,t),n=!1},d(t){Tt(e,t)}}}function sn(t){let e,n,r,o,i,s,a,l,c,u,f;const d=[on,rn],p=[];function m(t,e){return"empty"==t[2].state?0:"error"==t[2].state?1:-1}return~(n=m(t))&&(r=p[n]=d[n](t)),{c(){e=V("div"),r&&r.c(),o=X(),i=V("div"),s=V("div"),l=X(),c=V("div"),nt(s,"padding-right","0"),Z(s,"class",a="success"==t[2].state?"":"invisible"),nt(c,"height","0"),nt(c,"width","100%"),ht((()=>t[9].call(c))),Z(e,"class","VegaChart")},m(r,a){R(r,e,a),~n&&p[n].m(e,null),I(e,o),I(e,i),I(i,s),t[8](s),I(e,l),I(e,c),u=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=V("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=st();let o;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=Q(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{o=Q(n.contentWindow,"resize",e)}),I(t,n),()=>{(r||o&&n.contentWindow)&&o(),D(n)}}(c,t[9].bind(c)),f=!0},p(t,[i]){let l=n;n=m(t),n===l?~n&&p[n].p(t,i):(r&&(_t(),Et(p[l],1,1,(()=>{p[l]=null})),jt()),~n?(r=p[n],r?r.p(t,i):(r=p[n]=d[n](t),r.c()),Ot(r,1),r.m(e,o)):r=null),(!f||4&i&&a!==(a="success"==t[2].state?"":"invisible"))&&Z(s,"class",a)},i(t){f||(Ot(r),f=!0)},o(t){Et(r),f=!1},d(r){r&&D(e),~n&&p[n].d(),t[8](null),u()}}}function an(t,e,n){let{chart:r}=e,{data:o}=e,{vega_options:i}=e,{is_narrow:s=!1}=e,a={state:"empty"};const l=new Xt(void 0);let c,u,f;const d=C((t=>{t!=f&&n(7,f=t)}),100,!0);var p;return p=()=>{l.get()&&en(l.get())},ct().$$.on_destroy.push(p),t.$$set=t=>{"chart"in t&&n(3,r=t.chart),"data"in t&&n(4,o=t.data),"vega_options"in t&&n(5,i=t.vega_options),"is_narrow"in t&&n(6,s=t.is_narrow)},t.$$.update=()=>{2&t.$$.dirty&&d(u),249&t.$$.dirty&&null!=f&&null!=c&&nn({chart:r,data:o,vega_options:i,is_narrow:s,suggested_width_px:f,vega_view:l.get(),container_el:c}).then((t=>{l.set(t),n(2,a={state:"success"})})).catch((t=>{const e=z(t,"Unknown error while processing vega lite").message;n(2,a={state:"error",error:e})}))},[c,u,a,r,o,i,s,f,function(t){ft[t?"unshift":"push"]((()=>{c=t,n(0,c)}))},function(){u=this.clientWidth,n(1,u)}]}class ln extends Lt{constructor(t){super(),Jt(this,t,an,sn,W,{chart:3,data:4,vega_options:5,is_narrow:6})}}function cn(t){let e,n;return e=new It({props:{error:t[4]}}),{c(){Nt(e.$$.fragment)},m(t,r){Pt(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.error=t[4]),e.$set(r)},i(t){n||(Ot(e.$$.fragment,t),n=!0)},o(t){Et(e.$$.fragment,t),n=!1},d(t){Tt(e,t)}}}function un(t){let e,n;return e=new ln({props:{chart:t[1].chart,data:t[3],vega_options:t[1].vega_options,is_narrow:t[0].is_narrow}}),{c(){Nt(e.$$.fragment)},m(t,r){Pt(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.chart=t[1].chart),2&n&&(r.data=t[3]),2&n&&(r.vega_options=t[1].vega_options),1&n&&(r.is_narrow=t[0].is_narrow),e.$set(r)},i(t){n||(Ot(e.$$.fragment,t),n=!0)},o(t){Et(e.$$.fragment,t),n=!1},d(t){Tt(e,t)}}}function fn(t){let e,n;return e=new de({}),{c(){Nt(e.$$.fragment)},m(t,r){Pt(e,t,r),n=!0},p:T,i(t){n||(Ot(e.$$.fragment,t),n=!0)},o(t){Et(e.$$.fragment,t),n=!1},d(t){Tt(e,t)}}}function dn(t){let e,n,r,o={ctx:t,current:null,token:null,hasCatch:!0,pending:fn,then:un,catch:cn,value:3,error:4,blocks:[,,,]};return qt(n=ne(t[1].data),o),{c(){e=V("div"),o.block.c(),Z(e,"class","ChartBlockContent")},m(t,n){R(t,e,n),o.block.m(e,o.anchor=null),o.mount=()=>e,o.anchor=null,r=!0},p(e,[r]){t=e,o.ctx=t,2&r&&n!==(n=ne(t[1].data))&&qt(n,o)||Mt(o,t,r)},i(t){r||(Ot(o.block),r=!0)},o(t){for(let t=0;t<3;t+=1){Et(o.blocks[t])}r=!1},d(t){t&&D(e),o.block.d(),o.token=null,o=null}}}function pn(t,e,n){let{block:r}=e,{state:o}=e,i=r;return t.$$set=t=>{"block"in t&&n(2,r=t.block),"state"in t&&n(0,o=t.state)},t.$$.update=()=>{6&t.$$.dirty&&i.hash!=r.hash&&n(1,i=r)},[o,i,r]}var mn=Object.freeze({__proto__:null,default:class extends Lt{constructor(t){super(),Jt(this,t,pn,dn,W,{block:2,state:0})}},definition:{match:t=>"object"==typeof t&&"data"in t&&"chart"in t}});function gn(t){switch(t){case"left":return"text-left";case"center":return"text-center";case"right":return"text-right"}}function hn(t){let e,n;return{c(){e=V("div"),n=H(t[0]),Z(e,"class",t[1])},m(t,r){R(t,e,r),I(e,n)},p(t,[e]){1&e&&tt(n,t[0])},i:T,o:T,d(t){t&&D(e)}}}function wn(t,e,n){let r,{options:o}=e,{value:i}=e;const s=gn(o.align||"left")+(o.small?" text-xs":"");return t.$$set=t=>{"options"in t&&n(2,o=t.options),"value"in t&&n(3,i=t.value)},t.$$.update=()=>{8&t.$$.dirty&&n(0,r=null==i?"":i)},[r,s,o,i]}var bn=Object.freeze({__proto__:null,default:class extends Lt{constructor(t){super(),Jt(this,t,wn,hn,W,{options:2,value:3})}},compatibleTypes:["number","boolean","string"],align:function(t,e){return t.align||"left"}});function $n(t){let e,n,r=(t[0]?t[2]:t[3])+"";return{c(){e=V("div"),n=H(r),Z(e,"class",t[1])},m(t,r){R(t,e,r),I(e,n)},p(t,[e]){1&e&&r!==(r=(t[0]?t[2]:t[3])+"")&&tt(n,r)},i:T,o:T,d(t){t&&D(e)}}}function vn(t,e,n){let{options:r}=e,{value:o}=e;const i=gn(r.align||"center"),s=r.true||"✓",a=r.false||"";return t.$$set=t=>{"options"in t&&n(4,r=t.options),"value"in t&&n(0,o=t.value)},[o,i,s,a,r]}var yn=Object.freeze({__proto__:null,default:class extends Lt{constructor(t){super(),Jt(this,t,vn,$n,W,{options:4,value:0})}},compatibleTypes:["boolean"],align:function(t,e){return t.align||"center"}});function kn(t){let e,n;return{c(){e=V("div"),n=H(t[0]),Z(e,"class",t[1])},m(t,r){R(t,e,r),I(e,n)},p(t,[e]){1&e&&tt(n,t[0])},i:T,o:T,d(t){t&&D(e)}}}function xn(t,e,n){let r,{options:o}=e,{value:i}=e;const s="round"in o?o.round:2,a=gn(o.align||"right")+(o.small?" text-xs":"");return t.$$set=t=>{"options"in t&&n(2,o=t.options),"value"in t&&n(3,i=t.value)},t.$$.update=()=>{8&t.$$.dirty&&n(0,r=void 0===i?"":""+(void 0!==s?i.toFixed(s):i))},[r,a,o,i]}var _n=Object.freeze({__proto__:null,default:class extends Lt{constructor(t){super(),Jt(this,t,xn,kn,W,{options:2,value:3})}},compatibleTypes:["number"],align:function(t,e){return t.align||"right"}});function jn(t,e,n){const r=t.slice();return r[7]=e[n],r}function On(t,e,n){const r=t.slice();return r[7]=e[n],r}function En(t,e,n){const r=t.slice();return r[7]=e[n],r}function qn(t){let e,n,r;return{c(){e=K("svg"),n=K("title"),r=H(t[4]),Z(e,"class","plot-line-format text-center")},m(t,o){R(t,e,o),I(e,n),I(n,r)},p(t,e){16&e&&tt(r,t[4])},d(t){t&&D(e)}}}function Mn(t){let e;function n(t,e){return t[3]<=0?Cn:t[2]>=0?Sn:An}let r=n(t),o=r(t);return{c(){o.c(),e=G()},m(t,n){o.m(t,n),R(t,e,n)},p(t,i){r===(r=n(t))&&o?o.p(t,i):(o.d(1),o=r(t),o&&(o.c(),o.m(e.parentNode,e)))},d(t){o.d(t),t&&D(e)}}}function An(t){let e,n,r,o,i=[],s=new Map,a=t[1].nticks;const l=t=>t[7];for(let e=0;e<a.length;e+=1){let n=jn(t,a,e),r=l(n);s.set(r,i[e]=Pn(r,n))}function c(t,e){return t[0]>0?Fn:Tn}let u=c(t),f=u(t);return{c(){e=K("svg"),n=K("title"),r=H(t[4]);for(let t=0;t<i.length;t+=1)i[t].c();o=K("line"),f.c(),Z(o,"x1","50%"),Z(o,"y1","5%"),Z(o,"x2","50%"),Z(o,"y2","95%"),Z(o,"stroke",In),Z(o,"stroke-width","1"),Z(e,"class","plot-line-format text-center")},m(t,s){R(t,e,s),I(e,n),I(n,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);I(e,o),f.m(e,null)},p(t,n){16&n&&tt(r,t[4]),2&n&&(a=t[1].nticks,i=Ct(i,n,l,1,t,a,s,e,At,Pn,o,jn)),u===(u=c(t))&&f?f.p(t,n):(f.d(1),f=u(t),f&&(f.c(),f.m(e,null)))},d(t){t&&D(e);for(let t=0;t<i.length;t+=1)i[t].d();f.d()}}}function Sn(t){let e,n,r,o,i,s=[],a=new Map,l=t[1].nticks;const c=t=>t[7];for(let e=0;e<l.length;e+=1){let n=On(t,l,e),r=c(n);a.set(r,s[e]=Jn(r,n))}return{c(){e=K("svg"),n=K("title"),r=H(t[4]);for(let t=0;t<s.length;t+=1)s[t].c();o=K("rect"),Z(o,"x","0%"),Z(o,"y","25%"),Z(o,"width",i=100*t[0]+"%"),Z(o,"height","50%"),Z(o,"fill",Bn),Z(e,"class","plot-line-format text-center")},m(t,i){R(t,e,i),I(e,n),I(n,r);for(let t=0;t<s.length;t+=1)s[t].m(e,null);I(e,o)},p(t,n){16&n&&tt(r,t[4]),2&n&&(l=t[1].nticks,s=Ct(s,n,c,1,t,l,a,e,At,Jn,o,On)),1&n&&i!==(i=100*t[0]+"%")&&Z(o,"width",i)},d(t){t&&D(e);for(let t=0;t<s.length;t+=1)s[t].d()}}}function Cn(t){let e,n,r,o,i,s,a=[],l=new Map,c=t[1].nticks;const u=t=>t[7];for(let e=0;e<c.length;e+=1){let n=En(t,c,e),r=u(n);l.set(r,a[e]=Ln(r,n))}return{c(){e=K("svg"),n=K("title"),r=H(t[4]);for(let t=0;t<a.length;t+=1)a[t].c();o=K("rect"),Z(o,"x",i=100- -100*t[0]+"%"),Z(o,"y","25%"),Z(o,"width",s=-100*t[0]+"%"),Z(o,"height","50%"),Z(o,"fill",Bn),Z(e,"class","plot-line-format text-center")},m(t,i){R(t,e,i),I(e,n),I(n,r);for(let t=0;t<a.length;t+=1)a[t].m(e,null);I(e,o)},p(t,n){16&n&&tt(r,t[4]),2&n&&(c=t[1].nticks,a=Ct(a,n,u,1,t,c,l,e,At,Ln,o,En)),1&n&&i!==(i=100- -100*t[0]+"%")&&Z(o,"x",i),1&n&&s!==(s=-100*t[0]+"%")&&Z(o,"width",s)},d(t){t&&D(e);for(let t=0;t<a.length;t+=1)a[t].d()}}}function zn(t){let e,n,r;return{c(){e=K("line"),Z(e,"x1",n=50- -50*t[7]+"%"),Z(e,"y1","5%"),Z(e,"x2",r=50- -50*t[7]+"%"),Z(e,"y2","25%"),Z(e,"stroke",In),Z(e,"stroke-width","1")},m(t,n){R(t,e,n)},p(t,o){2&o&&n!==(n=50- -50*t[7]+"%")&&Z(e,"x1",n),2&o&&r!==(r=50- -50*t[7]+"%")&&Z(e,"x2",r)},d(t){t&&D(e)}}}function Nn(t){let e,n,r;return{c(){e=K("line"),Z(e,"x1",n=50+50*t[7]+"%"),Z(e,"y1","5%"),Z(e,"x2",r=50+50*t[7]+"%"),Z(e,"y2","25%"),Z(e,"stroke",In),Z(e,"stroke-width","1")},m(t,n){R(t,e,n)},p(t,o){2&o&&n!==(n=50+50*t[7]+"%")&&Z(e,"x1",n),2&o&&r!==(r=50+50*t[7]+"%")&&Z(e,"x2",r)},d(t){t&&D(e)}}}function Pn(t,e){let n,r;function o(t,e){return t[7]>0?Nn:zn}let i=o(e),s=i(e);return{key:t,first:null,c(){n=G(),s.c(),r=G(),this.first=n},m(t,e){R(t,n,e),s.m(t,e),R(t,r,e)},p(t,n){i===(i=o(e=t))&&s?s.p(e,n):(s.d(1),s=i(e),s&&(s.c(),s.m(r.parentNode,r)))},d(t){t&&D(n),s.d(t),t&&D(r)}}}function Tn(t){let e,n,r;return{c(){e=K("rect"),Z(e,"x",n=50- -50*t[0]+"%"),Z(e,"y","25%"),Z(e,"width",r=-50*t[0]+"%"),Z(e,"height","50%"),Z(e,"fill",Bn)},m(t,n){R(t,e,n)},p(t,o){1&o&&n!==(n=50- -50*t[0]+"%")&&Z(e,"x",n),1&o&&r!==(r=-50*t[0]+"%")&&Z(e,"width",r)},d(t){t&&D(e)}}}function Fn(t){let e,n;return{c(){e=K("rect"),Z(e,"x","50%"),Z(e,"y","25%"),Z(e,"width",n=50*t[0]+"%"),Z(e,"height","50%"),Z(e,"fill",Bn)},m(t,n){R(t,e,n)},p(t,r){1&r&&n!==(n=50*t[0]+"%")&&Z(e,"width",n)},d(t){t&&D(e)}}}function Jn(t,e){let n,r,o;return{key:t,first:null,c(){n=K("line"),Z(n,"x1",r=100*e[7]+"%"),Z(n,"y1","5%"),Z(n,"x2",o=100*e[7]+"%"),Z(n,"y2","25%"),Z(n,"stroke",In),Z(n,"stroke-width","1"),this.first=n},m(t,e){R(t,n,e)},p(t,i){e=t,2&i&&r!==(r=100*e[7]+"%")&&Z(n,"x1",r),2&i&&o!==(o=100*e[7]+"%")&&Z(n,"x2",o)},d(t){t&&D(n)}}}function Ln(t,e){let n,r,o;return{key:t,first:null,c(){n=K("line"),Z(n,"x1",r=100- -100*e[7]+"%"),Z(n,"y1","5%"),Z(n,"x2",o=100- -100*e[7]+"%"),Z(n,"y2","25%"),Z(n,"stroke",In),Z(n,"stroke-width","1"),this.first=n},m(t,e){R(t,n,e)},p(t,i){e=t,2&i&&r!==(r=100- -100*e[7]+"%")&&Z(n,"x1",r),2&i&&o!==(o=100- -100*e[7]+"%")&&Z(n,"x2",o)},d(t){t&&D(n)}}}function Un(t){let e;function n(t,e){return t[1]&&null!=t[0]?Mn:qn}let r=n(t),o=r(t);return{c(){o.c(),e=G()},m(t,n){o.m(t,n),R(t,e,n)},p(t,[i]){r===(r=n(t))&&o?o.p(t,i):(o.d(1),o=r(t),o&&(o.c(),o.m(e.parentNode,e)))},i:T,o:T,d(t){o.d(t),t&&D(e)}}}const Wn=(t,e,n,r)=>{const o=[],i=r.scale||"linear";if(r.log_unit){function s(t){return t>=0&&t<1?1:t}"log"!=r.scale&&o.push(`column ${t} 'line.log_unit' could be used with log scale only`),n=n.map((t=>void 0===t?void 0:s(t))),e=[s(e[0]),s(e[1])]}let a,l,c=[];if("log"==i){if(e[0]<=0)return o.push(`column ${t}, 'line.domain' can't be negative for log scale`),{column:n.map((t=>{})),warnings:o,stats:void 0};let i=Math.max(...e.map((t=>Math.log(Math.abs(t)))));c=n.map((e=>void 0===e?void 0:e>0?Math.log(e)/i:void o.push(`column ${t}, values can't be negative for log scale`))),a=O(r.ticks||[],(e=>e>0?Math.log(e)/i:(o.push(`column ${t}, ticks can't be negative for log scale`),!1))),l=[Math.log(e[0])/i,Math.log(e[1])/i]}else{if("linear"!=i)throw new Error(`unknown scale ${i}`);{let t=Math.max(...e.map((t=>Math.abs(t))));0==t&&(t=1),c=n.map((e=>void 0===e?void 0:e/t)),a=(r.ticks||[]).map((e=>e/t)),l=[e[0]/t,e[1]/t]}}return{column:c,warnings:o,stats:{domain:e,ndomain:l,nticks:a}}},Bn="#111827",In="#111827";function Rn(t,e,n){let r,o,i,{options:s}=e,{value:a}=e,{converted:l}=e,{stats:c}=e;return t.$$set=t=>{"options"in t&&n(5,s=t.options),"value"in t&&n(6,a=t.value),"converted"in t&&n(0,l=t.converted),"stats"in t&&n(1,c=t.stats)},t.$$.update=()=>{2&t.$$.dirty&&n(2,[r,o]=c?c.ndomain:[0,0],r,(n(3,o),n(1,c))),99&t.$$.dirty&&n(4,i=[void 0!==l?`value: ${a}`:"missing",((null==c?void 0:c.nticks)||[]).length>0?`, ticks: [${(s.ticks||[]).join(", ")}]`:"",c?`domain: [${c.domain[0]}, ${c.domain[1]}]`:"",`scale: ${s.scale||"linear"}`].join(", "))},[l,c,r,o,i,s,a]}var Dn=Object.freeze({__proto__:null,default:class extends Lt{constructor(t){super(),Jt(this,t,Rn,Un,W,{options:5,value:6,converted:0,stats:1})}},compatibleTypes:["number"],extraValues:({ticks:t})=>t||[],align:function(t,e){if(t.align)return t.align;if(e){const[t,n]=e.ndomain;return n<=0?"right":t>=0?"left":"center"}return"center"},convertColumn:Wn});function Vn(t){let e,n;return{c(){e=V("div"),n=H(t[0]),Z(e,"class",t[1])},m(t,r){R(t,e,r),I(e,n)},p(t,[e]){1&e&&tt(n,t[0])},i:T,o:T,d(t){t&&D(e)}}}function Kn(t,e,n){let r,{options:o}=e,{value:i}=e;const s=gn(o.align||"left")+(o.small?" text-xs":"");return t.$$set=t=>{"options"in t&&n(2,o=t.options),"value"in t&&n(3,i=t.value)},t.$$.update=()=>{8&t.$$.dirty&&n(0,r=null==i?"":""+i)},[r,s,o,i]}const Hn={string:bn,boolean:yn,number:_n,unknown:Object.freeze({__proto__:null,default:class extends Lt{constructor(t){super(),Jt(this,t,Kn,Vn,W,{options:2,value:3})}},compatibleTypes:[],align:function(t,e){return t.align||"left"}}),line:Dn};function Xn(t){return t in Hn?{is_error:!1,value:Hn[t]}:{is_error:!0,message:`no '${t}' format`}}const Gn={string:function(t,e){return t.localeCompare(e)},number:function(t,e){return t-e},boolean:function(t,e){return t==e?0:t?1:-1},unknown:function(t,e){return(""+t).localeCompare(""+e)}};function Qn(t,[e,n]){const r="desc"==n,o=E(b(t,(({id:t})=>t==e))).type;if(!(o in Gn))throw new Error(`no comparator for '${o}' type, please register one`);const i=Gn[o];return r?function(t,n){const r=n[e],o=t[e];return void 0===r?void 0===o?0:-1:void 0===o?1:i(r,o)}:function(t,n){const r=t[e],o=n[e];return void 0===r?void 0===o?0:-1:void 0===o?1:i(r,o)}}function Yn(t,e,n){if(n.length>3)throw new Error("sort not supported for more than 3 columns");const[r,o,i]=n;if(null==r&&u(null==o),null==o&&u(null==i),0==e.length||null==r)return e;let s,a=Qn(t,r),l=o?Qn(t,o):void 0,c=i?Qn(t,i):void 0;s=c?function(t,e){let n=a(t,e);return 0!=n?n:(n=l(t,e),0!=n?n:c(t,e))}:l?function(t,e){let n=a(t,e);return 0!=n?n:l(t,e)}:a;const f=[...e];return f.sort(s),f}function Zn(t,e,n){const r=[...e];for(const t of r)t._weights={},t._nweights={};for(const e in n){const{type:n,min_max:o}=E(b(t,(({id:t})=>t==e)));let[i,s]=_(r,(t=>void 0!==t[e]));if(0==i.length){for(const t of r)t._weights[e]=0,t._nweights[e]=0;continue}if("number"==n){const t=typeof r[0][e];if("number"!=t)throw new Error(`wrong type for '${e}' column, wsort expects number but found '${t}'`);for(const t of i)t._weights[e]=t[e]}else{if(!(n in Gn))throw new Error(`no comparator for '${n}' type, please register one`);const t=Gn[n];i.sort(((n,r)=>t(n[e],r[e])));let r,o=0;for(let t=0;t<i.length;t++){const n=i[t];n[e]==r?o+=1:r=n[e],n._weights[e]=t-o}}{let t,r;if(o){if("number"!=n)throw new Error("can't use min_max for non number type");t=o[0],r=o[1]}else{const n=i.map((t=>t._weights[e]));t=Math.min(...n),r=Math.max(...n)}const s=(r+t)/2;let a=(r-t)/2;u(a>=0),a=0==a?1:a;for(const t of i){let n=(t._weights[e]-s)/a;t._nweights[e]=n}}let a=y(i.map((t=>t._nweights[e])));for(const t of s)t._nweights[e]=a}for(const t of r){let e=0;for(const r in n)e+=n[r]*t._nweights[r];t._w=e}return r.sort(((t,e)=>t._w-e._w)).reverse(),r}function tr(t){return j(function(t,e){const n=new Set,r=e||(t=>t);return t.filter((t=>{const e=r(t);return!n.has(e)&&(n.add(e),!0)}))}(t.map((t=>"string"==typeof t?{type:"warn",message:t}:t)),(({message:t})=>t)),(({type:t,message:e})=>`${t} ${e}`))}function er(t,e){if(!e)return;const n={};for(const r of t){const t=e[r.id];if(!t)continue;const o=or(r,""+t[1]);void 0!==o&&(n[r.id]=[rr(t[0]),o])}return n}c("sortTable",(()=>{const t=[{id:"name",type:"string"},{id:"age",type:"number"}],e=[{name:"Artanis",age:200},{name:"Sarah",age:30},{name:"Jim",age:30},{name:"Amon",age:void 0}];let n=n=>Yn(t,e,n).map((({name:t})=>t));u.equal(n([["name","asc"]]),["Amon","Artanis","Jim","Sarah"]),u.equal(n([["age","asc"]])[0],"Amon"),u.equal(n([["age","asc"],["name","asc"]]),["Amon","Jim","Sarah","Artanis"])})),c("wsortTable",(()=>{const t=(t,e,n)=>Zn(t,e,n).map((({id:t})=>t));u.equal(t([{id:"a",type:"number"},{id:"b",type:"number"}],[{id:"a",a:0,b:3},{id:"b",a:1,b:3},{id:"c",a:2,b:void 0},{id:"d",a:-2,b:200}],{a:1,b:-1}),["c","b","a","d"]);u.equal(t([{id:"a",type:"number"}],[{id:"a",a:0},{id:"b",a:1},{id:"c",a:void 0}],{a:1}),["b","c","a"]);{const t=Zn([{id:"a",type:"string"}],[{id:"a",a:"a"},{id:"b",a:"a"},{id:"c",a:"b"}],{a:1});u.equal(t[0].id,"c"),u.equal(t.map((t=>t._weights.a)),[1,0,0])}}));const nr=["<=","<","=","!=",">",">=","~"];function rr(t){return nr.includes(t)?t:"="}function or({type:t},e){switch(t){case"string":return e;case"boolean":try{return["true","t","1"].includes(e.toLowerCase())}catch(t){return}case"number":try{let t=parseFloat(e);return Number.isFinite(t)?t:void 0}catch(t){return}default:return e}}const ir=["string","number","boolean","unknown"];function sr(t,e){const n=[],r=function(t,e,n){let r=[];try{r=Qe(e,null==t?void 0:t.map((({id:t})=>t)))}catch(t){return n.push("row size is larger than columns available"),[]}return r.forEach(((t,e)=>{t._i=e,t._converted={}})),r}(t.columns,e,n);if(0==r.length)return n.push("table is empty"),{columns:[],rows:[],messages:tr(n)};let o=function(t,e,n){if(t)return t;const r=new Map,o=new Set;for(let t=0;t<e.length;t++){const i=e[t];for(const t in i){if("_i"==t||"_converted"==t)continue;let e=i[t];if(void 0===e)o.add(t);else{let o=typeof e;"object"==o?(n.push(`unknown type for column '${t}' - '${o}'`),r.set(t,"unknown")):r.has(t)?r.get(t)!=o&&(n.push(`unstable types for column '${t}', ${[r.get(t),o].sort().join(", ")}`),r.set(t,"unknown")):r.set(t,o)}}}for(const t of o)r.has(t)||r.set(t,"unknown");return j(Array.from(r,(([t,e])=>({id:t,type:e}))),(({id:t})=>t))}(t.columns,r,n);if(t.alter_columns){const e=t.alter_columns.map((({id:t})=>t));o=[...t.alter_columns,...o.filter((({id:t})=>!e.includes(t)))]}const i=o.length;o.length!=i&&n.push("not unique column ids"),o=function(t,e,n){t=[...t];for(let r=0;r<e.length;r++){const o=e[r];for(const e of t){const{id:t,type:r}=e;if("_i"==t)continue;let i=o[t];void 0!==i&&(typeof i!=r&&"unknown"!=r&&ir.includes(r)&&(n.push(`wrong type for column '${t}', specified as '${r}' but '${typeof i}' found`),e.type="unknown"))}}return t}(o,r,n);let s=function(t,e){const n=Xn("unknown");if(n.is_error)throw"can't get 'unknown' formatter";let r=[];for(const o of t){const t=o.format||{type:o.type},i=Xn(t.type);i.is_error?(e.push(i.message),r.push([n.value,t])):i.value.compatibleTypes.includes(o.type)?r.push([i.value,t]):(e.push(`column ${o.id} has wrong format, format ${o.format} is not compatible with '${o.type}' type`),r.push([n.value,t]))}return r}(o,n);const a=function(t,e,n,r){const o={};for(let i=0;i<t.length;i++){const{id:s,type:a,domain:l}=t[i],[c,u]=e[i];if("number"!=a){l&&r.push(`non number column '${s}' can't have domain`);continue}const f=O(c.extraValues?c.extraValues(u):[],(t=>void 0!==t&&t)),d=O(n,(t=>{const e=t[s];return void 0!==e&&e}));if(d.push(...f),0==d.length){l&&(o[s]=l);continue}let p=d[0],m=d[0];for(const t of d)t>m?m=t:t<p&&(p=t);const g=l||[p,m];p<g[0]&&(r.push(`column ${s} 'domain' min value is greather than actual min ${p}`),g[0]=p),m>g[1]&&(r.push(`column ${s} 'line.domain' max value is smaller than actual max ${m}`),g[1]=m),o[s]=g}return o}(o,s,r,n);s=function(t,e,n,r){return n.map(((n,o)=>{const{id:i,type:s}=t[o],[a,l]=n;if("number"==l.type&&void 0===l.round)if("number"==s){if(e.every((t=>{const e=t[i];return void 0===e||Number.isInteger(e)})))return[a,Object.assign(Object.assign({},l),{round:0})]}else r.push(`column ${i} is non number and can't use number formatter`);return n}))}(o,r,s,n);const l=ar(o,r),c=function(t,e,n,r,o){const i={};for(let s=0;s<t.length;s++){const[{id:a},[l,c]]=[t[s],n[s]];if(l.convertColumn){const t=r.map((t=>t[a])),n=e[a];if(n){const{column:e,warnings:s,stats:u}=l.convertColumn(a,n,t,c);i[a]=u,s.forEach((t=>o.push(t)));for(let t=0;t<r.length;t++)r[t]._converted[a]=e[t]}}}return i}(o,a,s,r,n);return{columns:o.map(((t,e)=>({id:t.id,type:t.type,title:t.title,format:s[e][1],formatStats:c[t.id],formatter:s[e][0],widthP:l[e],domain:a[t.id]}))),rows:r,messages:tr(n)}}function ar(t,e){let n;if(t.some((({width:t})=>null!=t)))n=t.map((({width:t})=>t||1));else{const r=new Map;for(const n of e)for(const{id:e,type:o}of t){let t;if(void 0===n[e])continue;if("string"==o)t=n[e].length;else if("number"==o)t=(""+n[e]).length;else{if("boolean"!=o)continue;t=1}let i=r.get(e);null==i&&(i=[],r.set(e,i)),i.push(t)}const o=A(r,(t=>k(t,.7))),i=y(q(o,[],((t,e)=>(t.push(e),t)))),s=1.618,a=A(o,(t=>t>i*s?s:t<i/s?1/s:1)),l=1;n=t.map((({id:t})=>a.get(t)||l))}return lr(n)}function lr(t){if(0==t.length)return[];const e=100/M(t);let n=t.map((t=>S(t*e)));for(;;){const t=M(n);if(t>100)n[v(n)]-=1;else{if(!(t<100))break;n[$(n)]+=1}}return n}function cr(t,e,n){return e=function(t,e,n){if(!n)return e;for(const{id:r,type:o}of t){const t=n[r];if(!t)continue;const[i,s]=t;if(void 0===s||""===s)continue;const a=ur(o,[i,s]);e=e.filter((t=>a(t[r])))}return e}(t,e=function(t,e,n){if(!(n=function(t){return t.replace(/^[\t\s\n]+|[\t\s\n]+$/g,"")}(n)))return e;const r=n.toLowerCase();return e.filter((e=>{for(const{id:n}of t)if((""+e[n]).toLowerCase().includes(r))return!0;return!1}))}(t,e,n.filter),n.filters)}function ur(t,[e,n]){switch(t){case"string":if("string"!=typeof n)throw new Error("string filter value expected");const t=n,r=n.toLowerCase();switch(e){case"<=":return e=>void 0!==e&&e<=t;case"<":return e=>void 0!==e&&e<t;case"=":return e=>void 0!==e&&e==t;case"!=":return e=>void 0!==e&&e!=t;case">":return e=>void 0!==e&&e>t;case">=":return e=>void 0!==e&&e>=t;case"~":return t=>void 0!==t&&t.toLowerCase().includes(r)}case"boolean":if("boolean"!=typeof n)throw new Error("boolean filter value expected");const o=n;switch(e){case"<=":return t=>void 0!==t&&t<=o;case"<":return t=>void 0!==t&&t<o;case"=":return t=>void 0!==t&&t==o;case"!=":return t=>void 0!==t&&t!=o;case">":return t=>void 0!==t&&t>o;case">=":return t=>void 0!==t&&t>=o;case"~":return t=>void 0!==t&&t==o}case"number":if("number"!=typeof n)throw new Error("number filter value expected");const i=n;switch(e){case"<=":return t=>void 0!==t&&t<=i;case"<":return t=>void 0!==t&&t<i;case"=":return t=>void 0!==t&&t==i;case"!=":return t=>void 0!==t&&t!=i;case">":return t=>void 0!==t&&t>i;case">=":return t=>void 0!==t&&t>=i;case"~":return t=>void 0!==t&&t==i}default:const s=""+n;switch(e){case"<=":return t=>void 0!==t&&""+t<=s;case"<":return t=>void 0!==t&&""+t<s;case"=":return t=>void 0!==t&&""+t==s;case"!=":return t=>void 0!==t&&""+t!=s;case">":return t=>void 0!==t&&""+t>s;case">=":return t=>void 0!==t&&""+t>=s;case"~":return t=>void 0!==t&&""+t==s}}throw new Error(`unknown filter ${t} ${e}`)}function fr(t){return t.map((t=>{let e=Object.assign({},t);return delete e._i,delete e._converted,e}))}function dr(t){let e,n,r,o,i,s,a,l,c,u;return{c(){e=V("div"),n=V("span"),r=V("span"),r.textContent="w =",o=X(),i=V("input"),Z(r,"class","w-5 inline-block"),Z(i,"class","w-10 outline-none pl-1 text-xs border border-gray-200 focus:text-gray-900  svelte-1brt80c"),Z(i,"type","number"),Z(i,"step","0.1"),i.value=s=t[2].toFixed(1),Z(n,"class",a=t[3]?"text-gray-900":"text-gray-200"),Z(e,"class",l=t[1]+" my-1 text-xs "+(!t[4]&&"invisible"))},m(s,a){R(s,e,a),I(e,n),I(n,r),I(n,o),I(n,i),c||(u=Q(i,"change",t[5]),c=!0)},p(t,r){4&r&&s!==(s=t[2].toFixed(1))&&(i.value=s),8&r&&a!==(a=t[3]?"text-gray-900":"text-gray-200")&&Z(n,"class",a),18&r&&l!==(l=t[1]+" my-1 text-xs "+(!t[4]&&"invisible"))&&Z(e,"class",l)},d(t){t&&D(e),c=!1,u()}}}function pr(t){let e,n=t[0].wsort&&dr(t);return{c(){n&&n.c(),e=G()},m(t,r){n&&n.m(t,r),R(t,e,r)},p(t,[r]){t[0].wsort?n?n.p(t,r):(n=dr(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:T,o:T,d(t){n&&n.d(t),t&&D(e)}}}function mr(t,e,n){let r,o,i,{column_id:s}=e,{align:a}=e,{state:l}=e;const c=C((t=>{l.wsort&&n(0,l=Object.assign(Object.assign({},l),{wsort:Object.assign(Object.assign({},l.wsort),{[s]:t})}))}),200);return t.$$set=t=>{"column_id"in t&&n(6,s=t.column_id),"align"in t&&n(1,a=t.align),"state"in t&&n(0,l=t.state)},t.$$.update=()=>{65&t.$$.dirty&&n(2,r=(l.wsort||{})[s]||0),4&t.$$.dirty&&n(3,o=0!=r),9&t.$$.dirty&&n(4,i=l.show_controls||o)},[l,a,r,o,i,({target:{value:t}})=>{n(2,r=parseFloat(t)),c(r)},s]}c("normalizeInputsSlow",(()=>{const t=t=>t.map((({id:t,type:e})=>({id:t,type:e})));{const{columns:e,rows:n}=sr({},[["v",null]]);u.equal(t(e),[{id:"a",type:"string"},{id:"b",type:"unknown"}]),u.equal(fr(n),[{a:"v"}])}{const{columns:e,rows:n}=sr({},[{k:"v",k2:null}]);u.equal(t(e),[{id:"k",type:"string"},{id:"k2",type:"unknown"}]),u.equal(fr(n),[{k:"v"}])}{const{columns:e,rows:n}=sr({},[{k:"v"},{k:0}]);u.equal(t(e),[{id:"k",type:"unknown"}]),u.equal(fr(n),[{k:"v"},{k:0}])}{const{columns:t}=sr({},[{v:1}]);u.equal(t[0].format,{type:"number",round:0})}})),c("calculateColumnWidths",(()=>{u.equal(ar([{id:"name",type:"string"},{id:"age",type:"number"}],[{name:"Jim Raynor",age:30},{name:"Kate",age:25}]),[62,38])})),c("weightsToPercents",(()=>{u.equal(lr([2,2]),[50,50]),u.equal(lr([3,3,3]).sort(),[33,33,34])}));class gr extends Lt{constructor(t){super(),Jt(this,t,mr,pr,W,{column_id:6,align:1,state:0})}}function hr(t,e,n){const r=t.slice();return r[9]=e[n],r}function wr(t){let e,n,r,o,i,s,a,l,c,u,f,d=[],p=new Map,m=nr;const g=t=>t[9];for(let e=0;e<m.length;e+=1){let n=hr(t,m,e),r=g(n);p.set(r,d[e]=br(r,n))}return{c(){e=V("div"),n=V("span"),r=V("select");for(let t=0;t<d.length;t+=1)d[t].c();i=X(),s=V("input"),Z(r,"class","outline-none w-5 inline-block svelte-126ibbo"),Z(s,"class","w-10 outline-none pl-1 text-xs border border-gray-200 focus:text-gray-900"),Z(s,"type","text"),s.value=a=void 0===t[2][1]?"":""+t[2][1],Z(n,"class",l=t[3]?"text-gray-900":"text-gray-200"),Z(e,"class",c=t[1]+" my-1 text-xs "+(!t[4]&&"invisible"))},m(o,a){R(o,e,a),I(e,n),I(n,r);for(let t=0;t<d.length;t+=1)d[t].m(r,null);rt(r,t[2][0]),I(n,i),I(n,s),u||(f=[Q(r,"change",t[5]),Q(s,"keyup",t[6])],u=!0)},p(t,i){0&i&&(m=nr,d=Ct(d,i,g,1,t,m,p,r,At,br,null,hr)),4&i&&o!==(o=t[2][0])&&rt(r,t[2][0]),4&i&&a!==(a=void 0===t[2][1]?"":""+t[2][1])&&s.value!==a&&(s.value=a),8&i&&l!==(l=t[3]?"text-gray-900":"text-gray-200")&&Z(n,"class",l),18&i&&c!==(c=t[1]+" my-1 text-xs "+(!t[4]&&"invisible"))&&Z(e,"class",c)},d(t){t&&D(e);for(let t=0;t<d.length;t+=1)d[t].d();u=!1,L(f)}}}function br(t,e){let n,r,o=e[9]+"";return{key:t,first:null,c(){n=V("option"),r=H(o),n.__value=e[9],n.value=n.__value,this.first=n},m(t,e){R(t,n,e),I(n,r)},p(t,n){e=t},d(t){t&&D(n)}}}function $r(t){let e,n=t[0].filters&&wr(t);return{c(){n&&n.c(),e=G()},m(t,r){n&&n.m(t,r),R(t,e,r)},p(t,[r]){t[0].filters?n?n.p(t,r):(n=wr(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:T,o:T,d(t){n&&n.d(t),t&&D(e)}}}function vr(t,e,n){let r,o,i,{column:s}=e,{align:a}=e,{state:l}=e;const c=C((t=>{l.filters&&n(0,l=Object.assign(Object.assign({},l),{filters:Object.assign(Object.assign({},l.filters),{[s.id]:t})}))}),200);return t.$$set=t=>{"column"in t&&n(7,s=t.column),"align"in t&&n(1,a=t.align),"state"in t&&n(0,l=t.state)},t.$$.update=()=>{129&t.$$.dirty&&n(2,i=l.filters&&s.id in l.filters?l.filters[s.id]:["=",void 0]),4&t.$$.dirty&&n(3,r=null!=i[1]&&""!==i[1]),9&t.$$.dirty&&n(4,o=r||l.show_controls)},[l,a,i,r,o,({target:{value:t}})=>{n(2,i=[rr(t),i[1]]),c(i)},({target:{value:t}})=>{n(2,i=[i[0],or(s,t)]),c(i)},s]}class yr extends Lt{constructor(t){super(),Jt(this,t,vr,$r,W,{column:7,align:1,state:0})}}function kr(t){let e,n,r,o,i,s,a,l,c,u,f,d,p,m,g,h,w,b=t[3].symbol+"";function $(e){t[12](e)}let v={column_id:t[4],align:"text-right"};function y(e){t[13](e)}void 0!==t[0]&&(v.state=t[0]),u=new gr({props:v}),ft.push((()=>zt(u,"state",$)));let k={column:t[1],align:"text-right"};return void 0!==t[0]&&(k.state=t[0]),p=new yr({props:k}),ft.push((()=>zt(p,"state",y))),{c(){e=V("th"),n=V("a"),r=V("span"),o=H(b),s=X(),a=V("span"),l=H(t[2]),c=X(),Nt(u.$$.fragment),d=X(),Nt(p.$$.fragment),Z(r,"class",i=t[3].klass+" mr-0.5"),Z(n,"class","flex justify-between"),Z(n,"href","#"),nt(e,"width",t[1].widthP+"%"),Z(e,"class","text-right")},m(i,f){R(i,e,f),I(e,n),I(n,r),I(r,o),I(n,s),I(n,a),I(a,l),I(e,c),Pt(u,e,null),I(e,d),Pt(p,e,null),g=!0,h||(w=Q(n,"click",Y(t[6])),h=!0)},p(t,n){(!g||8&n)&&b!==(b=t[3].symbol+"")&&tt(o,b),(!g||8&n&&i!==(i=t[3].klass+" mr-0.5"))&&Z(r,"class",i),(!g||4&n)&&tt(l,t[2]);const s={};!f&&1&n&&(f=!0,s.state=t[0],wt((()=>f=!1))),u.$set(s);const a={};2&n&&(a.column=t[1]),!m&&1&n&&(m=!0,a.state=t[0],wt((()=>m=!1))),p.$set(a),(!g||2&n)&&nt(e,"width",t[1].widthP+"%")},i(t){g||(Ot(u.$$.fragment,t),Ot(p.$$.fragment,t),g=!0)},o(t){Et(u.$$.fragment,t),Et(p.$$.fragment,t),g=!1},d(t){t&&D(e),Tt(u),Tt(p),h=!1,w()}}}function xr(t){let e,n,r,o,i,s,a,l,c,u,f,d,p,m,g,h,w,b,$,v,y,k=t[3].symbol+"",x=t[3].symbol+"";function _(e){t[10](e)}let j={column_id:t[4],align:"text-center"};function O(e){t[11](e)}void 0!==t[0]&&(j.state=t[0]),m=new gr({props:j}),ft.push((()=>zt(m,"state",_)));let E={column:t[1],align:"text-center"};return void 0!==t[0]&&(E.state=t[0]),w=new yr({props:E}),ft.push((()=>zt(w,"state",O))),{c(){e=V("th"),n=V("a"),r=V("span"),o=H(k),i=X(),s=V("span"),a=H(t[2]),l=X(),c=V("span"),u=H(x),p=X(),Nt(m.$$.fragment),h=X(),Nt(w.$$.fragment),Z(r,"class","invisible mr-0.5"),Z(c,"class",f=t[3].klass+" ml-0.5"),Z(c,"title",d=t[3].title),Z(n,"class","flex justify-between"),Z(n,"href","#"),nt(e,"width",t[1].widthP+"%")},m(f,d){R(f,e,d),I(e,n),I(n,r),I(r,o),I(n,i),I(n,s),I(s,a),I(n,l),I(n,c),I(c,u),I(e,p),Pt(m,e,null),I(e,h),Pt(w,e,null),$=!0,v||(y=Q(n,"click",Y(t[6])),v=!0)},p(t,n){(!$||8&n)&&k!==(k=t[3].symbol+"")&&tt(o,k),(!$||4&n)&&tt(a,t[2]),(!$||8&n)&&x!==(x=t[3].symbol+"")&&tt(u,x),(!$||8&n&&f!==(f=t[3].klass+" ml-0.5"))&&Z(c,"class",f),(!$||8&n&&d!==(d=t[3].title))&&Z(c,"title",d);const r={};!g&&1&n&&(g=!0,r.state=t[0],wt((()=>g=!1))),m.$set(r);const i={};2&n&&(i.column=t[1]),!b&&1&n&&(b=!0,i.state=t[0],wt((()=>b=!1))),w.$set(i),(!$||2&n)&&nt(e,"width",t[1].widthP+"%")},i(t){$||(Ot(m.$$.fragment,t),Ot(w.$$.fragment,t),$=!0)},o(t){Et(m.$$.fragment,t),Et(w.$$.fragment,t),$=!1},d(t){t&&D(e),Tt(m),Tt(w),v=!1,y()}}}function _r(t){let e,n,r,o,i,s,a,l,c,u,f,d,p,m,g,h,w,b,$=t[3].symbol+"";function v(e){t[8](e)}let y={column_id:t[4],align:"text-left"};function k(e){t[9](e)}void 0!==t[0]&&(y.state=t[0]),f=new gr({props:y}),ft.push((()=>zt(f,"state",v)));let x={column:t[1],align:"text-left"};return void 0!==t[0]&&(x.state=t[0]),m=new yr({props:x}),ft.push((()=>zt(m,"state",k))),{c(){e=V("th"),n=V("a"),r=V("span"),o=H(t[2]),i=X(),s=V("span"),a=H($),u=X(),Nt(f.$$.fragment),p=X(),Nt(m.$$.fragment),Z(s,"class",l=t[3].klass+" ml-0.5"),Z(s,"title",c=t[3].title),Z(n,"class","flex justify-between"),Z(n,"href","#"),nt(e,"width",t[1].widthP+"%")},m(l,c){R(l,e,c),I(e,n),I(n,r),I(r,o),I(n,i),I(n,s),I(s,a),I(e,u),Pt(f,e,null),I(e,p),Pt(m,e,null),h=!0,w||(b=Q(n,"click",Y(t[6])),w=!0)},p(t,n){(!h||4&n)&&tt(o,t[2]),(!h||8&n)&&$!==($=t[3].symbol+"")&&tt(a,$),(!h||8&n&&l!==(l=t[3].klass+" ml-0.5"))&&Z(s,"class",l),(!h||8&n&&c!==(c=t[3].title))&&Z(s,"title",c);const r={};!d&&1&n&&(d=!0,r.state=t[0],wt((()=>d=!1))),f.$set(r);const i={};2&n&&(i.column=t[1]),!g&&1&n&&(g=!0,i.state=t[0],wt((()=>g=!1))),m.$set(i),(!h||2&n)&&nt(e,"width",t[1].widthP+"%")},i(t){h||(Ot(f.$$.fragment,t),Ot(m.$$.fragment,t),h=!0)},o(t){Et(f.$$.fragment,t),Et(m.$$.fragment,t),h=!1},d(t){t&&D(e),Tt(f),Tt(m),w=!1,b()}}}function jr(t){let e,n,r,o;const i=[_r,xr,kr],s=[];return e=function(t,e){return"left"==t[5]?0:"center"==t[5]?1:2}(t),n=s[e]=i[e](t),{c(){n.c(),r=G()},m(t,n){s[e].m(t,n),R(t,r,n),o=!0},p(t,[e]){n.p(t,e)},i(t){o||(Ot(n),o=!0)},o(t){Et(n),o=!1},d(t){s[e].d(t),t&&D(r)}}}function Or(t,e,n){let r,o,{column:i}=e,{state:s}=e,{sortable:a}=e,l=i.id;const c=i.formatter.align(i.format,i.formatStats);function f(t,e){const n={symbol:"↓",klass:"invisible",title:""};if(e.wsort){const r=e.wsort[t.id],o="wsort: "+function(t){return t instanceof Map?Array.from(t):Object.entries(t)}(e.wsort).map((([t,e])=>`${t}: ${e}`)).join(", ");return void 0===r||0==r?n:r>=0?{symbol:"↑",klass:"text-gray-900",title:o}:{symbol:"↓",klass:"text-gray-900",title:o}}if(e.sort){let t;for(let n=0;n<e.sort.length;n++){const[r,o]=e.sort[n];r==l&&(t=[o,n])}if(!t)return n;const r="sort: "+e.sort.map((([t,e])=>`${t}: ${e}`)).join(", "),[o,i]=t,s="asc"==o?"↓":"↑";let a;if(0==i)a="text-gray-900";else if(1==i)a="text-gray-400";else{if(2!=i)throw new Error("color for more than 3 sort oders isn't supported");a="text-gray-300"}return{symbol:s,klass:a,title:r}}return n}return t.$$set=t=>{"column"in t&&n(1,i=t.column),"state"in t&&n(0,s=t.state),"sortable"in t&&n(7,a=t.sortable)},t.$$.update=()=>{2&t.$$.dirty&&n(2,r=i.title||i.id),3&t.$$.dirty&&n(3,o=f(i,s))},[s,i,r,o,l,c,function(t){if(a)if(s.wsort){let e=s.wsort;t.metaKey?i.id in e?e[i.id]=-1*e[i.id]:e[i.id]=1:g(e)>1?e={[l]:1}:i.id in e?e[i.id]=-1*e[i.id]:e={[l]:1},n(0,s=Object.assign(Object.assign({},s),{wsort:e}))}else{let e=s.sort||[];const r=function(t,e){const n=e instanceof Function?e:t=>t==e;for(let e=0;e<t.length;e++)if(n(t[e],e))return e;return-1}(e,(([t,e])=>t==i.id));t.metaKey?r>=0?e[r][1]="asc"==e[r][1]?"desc":"asc":e.push([l,"asc"]):e.length>1?e=[[l,"asc"]]:r>=0?(u(1==e.length),e[r][1]="asc"==e[r][1]?"desc":"asc"):e=[[l,"asc"]],n(0,s=Object.assign(Object.assign({},s),{sort:e}))}},a,function(t){s=t,n(0,s)},function(t){s=t,n(0,s)},function(t){s=t,n(0,s)},function(t){s=t,n(0,s)},function(t){s=t,n(0,s)},function(t){s=t,n(0,s)}]}class Er extends Lt{constructor(t){super(),Jt(this,t,Or,jr,W,{column:1,state:0,sortable:7})}}function qr(t,e,n){const r=t.slice();return r[4]=e[n],r}function Mr(t,e){let n,r,o,i;function s(t){e[3](t)}let a={column:e[4],sortable:e[2]};return void 0!==e[0]&&(a.state=e[0]),r=new Er({props:a}),ft.push((()=>zt(r,"state",s))),{key:t,first:null,c(){n=G(),Nt(r.$$.fragment),this.first=n},m(t,e){R(t,n,e),Pt(r,t,e),i=!0},p(t,n){e=t;const i={};2&n&&(i.column=e[4]),4&n&&(i.sortable=e[2]),!o&&1&n&&(o=!0,i.state=e[0],wt((()=>o=!1))),r.$set(i)},i(t){i||(Ot(r.$$.fragment,t),i=!0)},o(t){Et(r.$$.fragment,t),i=!1},d(t){t&&D(n),Tt(r,t)}}}function Ar(t){let e,n,r=[],o=new Map,i=t[1];const s=t=>t[4].id;for(let e=0;e<i.length;e+=1){let n=qr(t,i,e),a=s(n);o.set(a,r[e]=Mr(a,n))}return{c(){e=V("tr");for(let t=0;t<r.length;t+=1)r[t].c()},m(t,o){R(t,e,o);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,[n]){7&n&&(i=t[1],_t(),r=Ct(r,n,s,1,t,i,o,e,St,Mr,null,qr),jt())},i(t){if(!n){for(let t=0;t<i.length;t+=1)Ot(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)Et(r[t]);n=!1},d(t){t&&D(e);for(let t=0;t<r.length;t+=1)r[t].d()}}}function Sr(t,e,n){let{columns:r}=e,{state:o}=e,{sortable:i}=e;return t.$$set=t=>{"columns"in t&&n(1,r=t.columns),"state"in t&&n(0,o=t.state),"sortable"in t&&n(2,i=t.sortable)},[o,r,i,function(t){o=t,n(0,o)}]}class Cr extends Lt{constructor(t){super(),Jt(this,t,Sr,Ar,W,{columns:1,state:0,sortable:2})}}function zr(t,e,n){const r=t.slice();return r[4]=e[n],r[6]=n,r}function Nr(t){let e,n,r;var o=t[4].formatter.default;function i(t){return{props:{options:t[4].format,value:t[1][t[4].id]}}}return o&&(e=new o(i(t))),{c(){e&&Nt(e.$$.fragment),n=G()},m(t,o){e&&Pt(e,t,o),R(t,n,o),r=!0},p(t,r){const s={};if(1&r&&(s.options=t[4].format),3&r&&(s.value=t[1][t[4].id]),o!==(o=t[4].formatter.default)){if(e){_t();const t=e;Et(t.$$.fragment,1,0,(()=>{Tt(t,1)})),jt()}o?(e=new o(i(t)),Nt(e.$$.fragment),Ot(e.$$.fragment,1),Pt(e,n.parentNode,n)):e=null}else o&&e.$set(s)},i(t){r||(e&&Ot(e.$$.fragment,t),r=!0)},o(t){e&&Et(e.$$.fragment,t),r=!1},d(t){t&&D(n),e&&Tt(e,t)}}}function Pr(t){let e,n,r;var o=t[4].formatter.default;function i(t){return{props:{options:t[4].format,value:t[1][t[4].id],converted:t[1]._converted[t[4].id],stats:t[4].formatStats}}}return o&&(e=new o(i(t))),{c(){e&&Nt(e.$$.fragment),n=G()},m(t,o){e&&Pt(e,t,o),R(t,n,o),r=!0},p(t,r){const s={};if(1&r&&(s.options=t[4].format),3&r&&(s.value=t[1][t[4].id]),3&r&&(s.converted=t[1]._converted[t[4].id]),1&r&&(s.stats=t[4].formatStats),o!==(o=t[4].formatter.default)){if(e){_t();const t=e;Et(t.$$.fragment,1,0,(()=>{Tt(t,1)})),jt()}o?(e=new o(i(t)),Nt(e.$$.fragment),Ot(e.$$.fragment,1),Pt(e,n.parentNode,n)):e=null}else o&&e.$set(s)},i(t){r||(e&&Ot(e.$$.fragment,t),r=!0)},o(t){e&&Et(e.$$.fragment,t),r=!1},d(t){t&&D(n),e&&Tt(e,t)}}}function Tr(t,e){let n,r,o,i,s;const a=[Pr,Nr],l=[];function c(t,e){return"_converted"in t[1]&&t[4].id in t[1]._converted?0:1}return r=c(e),o=l[r]=a[r](e),{key:t,first:null,c(){n=V("td"),o.c(),i=X(),this.first=n},m(t,e){R(t,n,e),l[r].m(n,null),I(n,i),s=!0},p(t,s){let u=r;r=c(e=t),r===u?l[r].p(e,s):(_t(),Et(l[u],1,1,(()=>{l[u]=null})),jt(),o=l[r],o?o.p(e,s):(o=l[r]=a[r](e),o.c()),Ot(o,1),o.m(n,i))},i(t){s||(Ot(o),s=!0)},o(t){Et(o),s=!1},d(t){t&&D(n),l[r].d()}}}function Fr(t){let e,n,r,o,i,s=[],a=new Map,l=t[0];const c=t=>t[4].id;for(let e=0;e<l.length;e+=1){let n=zr(t,l,e),r=c(n);a.set(r,s[e]=Tr(r,n))}return{c(){e=V("tr");for(let t=0;t<s.length;t+=1)s[t].c();Z(e,"class",n=t[2]?"bg-gray-200":"")},m(n,a){R(n,e,a);for(let t=0;t<s.length;t+=1)s[t].m(e,null);r=!0,o||(i=Q(e,"click",(function(){U(t[3])&&t[3].apply(this,arguments)})),o=!0)},p(o,[i]){t=o,3&i&&(l=t[0],_t(),s=Ct(s,i,c,1,t,l,a,e,St,Tr,null,zr),jt()),(!r||4&i&&n!==(n=t[2]?"bg-gray-200":""))&&Z(e,"class",n)},i(t){if(!r){for(let t=0;t<l.length;t+=1)Ot(s[t]);r=!0}},o(t){for(let t=0;t<s.length;t+=1)Et(s[t]);r=!1},d(t){t&&D(e);for(let t=0;t<s.length;t+=1)s[t].d();o=!1,i()}}}function Jr(t,e,n){let{columns:r}=e,{row:o}=e,{selected:i}=e,{onSelect:s}=e;return t.$$set=t=>{"columns"in t&&n(0,r=t.columns),"row"in t&&n(1,o=t.row),"selected"in t&&n(2,i=t.selected),"onSelect"in t&&n(3,s=t.onSelect)},[r,o,i,s]}class Lr extends Lt{constructor(t){super(),Jt(this,t,Jr,Fr,W,{columns:0,row:1,selected:2,onSelect:3})}}const Ur=t=>`<svg class="${t}" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg>`;function Wr(t){let e,n,r,o,i,s,a,l,c,u,f,d,p,m=Ur(Br(!!t[0].filters))+"";return{c(){e=V("div"),n=V("div"),r=X(),o=V("div"),i=V("input"),s=X(),a=V("button"),l=H("W"),u=X(),f=V("button"),Z(n,"class","flex items-center"),Z(i,"class","rounded border border-gray-300 text-sm outline-none py-1 px-1 leading-4"),Z(i,"type","text"),Z(i,"placeholder","Filter"),Z(a,"class",c=B(Ir(!!t[0].wsort))+" svelte-1y842rg"),Z(a,"title",t[4]),Z(f,"class","focus:outline-none"),Z(o,"class","flex items-center space-x-2"),Z(e,"class","flex items-center justify-between my-1")},m(c,g){R(c,e,g),I(e,n),I(e,r),I(e,o),I(o,i),et(i,t[1]),I(o,s),I(o,a),I(a,l),I(o,u),I(o,f),f.innerHTML=m,d||(p=[Q(i,"input",t[5]),Q(i,"keyup",t[2]),Q(a,"click",t[3]),Q(f,"click",t[6])],d=!0)},p(t,[e]){2&e&&i.value!==t[1]&&et(i,t[1]),1&e&&c!==(c=B(Ir(!!t[0].wsort))+" svelte-1y842rg")&&Z(a,"class",c),1&e&&m!==(m=Ur(Br(!!t[0].filters))+"")&&(f.innerHTML=m)},i:T,o:T,d(t){t&&D(e),d=!1,L(p)}}}function Br(t){return"h-5 w-5 p-0.5 border rounded text-gray-900 "+(t?"border-gray-300":"border-white")}function Ir(t){return"letter_button focus:outline-none border rounded "+(t?"border-gray-300":"border-white")}function Rr(t,e,n){let{state:r}=e,o=r.filter;const i=C((()=>{n(0,r=Object.assign(Object.assign({},r),{filter:o}))}),200);const s=['Weighted sorting. "Smart", weighted, ranked sorting, instead of normal sorting.',"It works similar to how humans compare products with many attributes, to find the best one.","Example: find countries with highest salaries, lowest taxes and lowest real estate prices - ordinary sorting would be useless, while weighted sorting would sort the countries in a 'smart' way, similar to how human would do.","Missing values threated as average, like if we don't have tax rate for country, we guess that it probably should be somewhat average. For non number comparable elements sort rank used as weight. ifferent range of values for different columns normalised into [-1..1] range as 'nw = (w - median(w)) / 0.9-quantile(variance(w))*1.11' and limiting min/max outliers by [-1..1].",'- Undefined values threated as average\n- Rank for same values should be the same, like ["a", "a", "b"] should be [0, 0, 1], not [0, 1, 2]\n- Different range of values for different columns normalised into [-1..1] range as\n      nw = (w - median(w)) / 0.9-quantile(variance(w))*1.11 and limiting min/max outliers by [-1..1].'].join("\n\n");return t.$$set=t=>{"state"in t&&n(0,r=t.state)},[r,o,i,function(){n(0,r=r.wsort?Object.assign(Object.assign({},r),{wsort:void 0,sort:void 0}):Object.assign(Object.assign({},r),{wsort:{},sort:void 0}))},s,function(){o=this.value,n(1,o)},()=>n(0,r={...r,filters:r.filters?void 0:{}})]}class Dr extends Lt{constructor(t){super(),Jt(this,t,Rr,Wr,W,{state:0})}}function Vr(t,e,n){const r=t.slice();return r[1]=e[n],r}function Kr(t){let e,n=t[0],r=[];for(let e=0;e<n.length;e+=1)r[e]=Qr(Vr(t,n,e));return{c(){e=V("div");for(let t=0;t<r.length;t+=1)r[t].c();Z(e,"class","text-sm mt-1 mx-1")},m(t,n){R(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,o){if(1&o){let i;for(n=t[0],i=0;i<n.length;i+=1){const s=Vr(t,n,i);r[i]?r[i].p(s,o):(r[i]=Qr(s),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(t){t&&D(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(r,t)}}}function Hr(t){let e;return{c(){e=V("div"),e.textContent="unknown message type"},m(t,n){R(t,e,n)},p:T,d(t){t&&D(e)}}}function Xr(t){let e,n,r,o,i=t[1].message+"";return{c(){e=V("div"),n=V("span"),n.textContent="error",r=X(),o=H(i),Z(n,"class","bg-red-400 px-2 rounded")},m(t,i){R(t,e,i),I(e,n),I(e,r),I(e,o)},p(t,e){1&e&&i!==(i=t[1].message+"")&&tt(o,i)},d(t){t&&D(e)}}}function Gr(t){let e,n,r,o,i=t[1].message+"";return{c(){e=V("div"),n=V("span"),n.textContent="warn",r=X(),o=H(i),Z(n,"class","bg-yellow-400 px-2 rounded")},m(t,i){R(t,e,i),I(e,n),I(e,r),I(e,o)},p(t,e){1&e&&i!==(i=t[1].message+"")&&tt(o,i)},d(t){t&&D(e)}}}function Qr(t){let e;function n(t,e){return"warn"==t[1].type?Gr:"error"==t[1].type?Xr:Hr}let r=n(t),o=r(t);return{c(){o.c(),e=G()},m(t,n){o.m(t,n),R(t,e,n)},p(t,i){r===(r=n(t))&&o?o.p(t,i):(o.d(1),o=r(t),o&&(o.c(),o.m(e.parentNode,e)))},d(t){o.d(t),t&&D(e)}}}function Yr(t){let e,n=t[0].length>0&&Kr(t);return{c(){n&&n.c(),e=G()},m(t,r){n&&n.m(t,r),R(t,e,r)},p(t,[r]){t[0].length>0?n?n.p(t,r):(n=Kr(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:T,o:T,d(t){n&&n.d(t),t&&D(e)}}}function Zr(t,e,n){let{messages:r}=e;return t.$$set=t=>{"messages"in t&&n(0,r=t.messages)},[r]}class to extends Lt{constructor(t){super(),Jt(this,t,Zr,Yr,W,{messages:0})}}function eo(t,e,n){const r=t.slice();return r[15]=e[n],r}function no(t){let e,n,r=t[0].description+"";return{c(){e=V("div"),n=H(r)},m(t,r){R(t,e,r),I(e,n)},p(t,e){1&e&&r!==(r=t[0].description+"")&&tt(n,r)},d(t){t&&D(e)}}}function ro(t,e){let n,r,o;function i(...t){return e[12](e[15],...t)}return r=new Lr({props:{columns:e[4],row:e[15],selected:e[2].has(e[15]._i),onSelect:i}}),{key:t,first:null,c(){n=G(),Nt(r.$$.fragment),this.first=n},m(t,e){R(t,n,e),Pt(r,t,e),o=!0},p(t,n){e=t;const o={};8&n&&(o.row=e[15]),12&n&&(o.selected=e[2].has(e[15]._i)),8&n&&(o.onSelect=i),r.$set(o)},i(t){o||(Ot(r.$$.fragment,t),o=!0)},o(t){Et(r.$$.fragment,t),o=!1},d(t){t&&D(n),Tt(r,t)}}}function oo(t){let e,n,r,o,i,s;return{c(){e=V("div"),e.textContent="Debug:",n=X(),r=V("textarea"),i=X(),s=V("textarea"),Z(e,"class","mt-3"),Z(r,"class","block focus:outline-none rounded border border-gray-200 text-xs overflow-scroll mt-4"),r.readOnly=!0,nt(r,"resize","none"),nt(r,"width","30rem"),nt(r,"height","5rem"),r.value=o=oe({...t[1],selected:t[2]}),Z(s,"class","block focus:outline-none rounded border border-gray-200 text-xs overflow-scroll mt-4"),s.readOnly=!0,nt(s,"resize","none"),nt(s,"width","30rem"),nt(s,"height","10rem"),s.value=oe(t[4])},m(t,o){R(t,e,o),R(t,n,o),R(t,r,o),R(t,i,o),R(t,s,o)},p(t,e){6&e&&o!==(o=oe({...t[1],selected:t[2]}))&&(r.value=o)},d(t){t&&D(e),t&&D(n),t&&D(r),t&&D(i),t&&D(s)}}}function io(t){let e,n,r,o,i,s,a,l,c,u,f,d,p,m,g,h,w,b,$=[],v=new Map,y=t[0].description&&no(t);function k(e){t[10](e)}let x={};function _(e){t[11](e)}void 0!==t[1]&&(x.state=t[1]),i=new Dr({props:x}),ft.push((()=>zt(i,"state",k)));let j={columns:t[4],sortable:t[6]};void 0!==t[1]&&(j.state=t[1]),c=new Cr({props:j}),ft.push((()=>zt(c,"state",_)));let O=t[3];const E=t=>t[15]._i;for(let e=0;e<O.length;e+=1){let n=eo(t,O,e),r=E(n);v.set(r,$[e]=ro(r,n))}p=new to({props:{messages:t[5]}});let q=t[0].debug&&oo(t);return{c(){y&&y.c(),e=X(),n=V("table"),r=V("tr"),o=V("td"),Nt(i.$$.fragment),l=X(),Nt(c.$$.fragment),f=X();for(let t=0;t<$.length;t+=1)$[t].c();d=X(),Nt(p.$$.fragment),m=X(),q&&q.c(),g=G(),Z(o,"colspan",t[4].length),Z(r,"class",a="plot-table-toolbar "+(!t[1].show_controls&&"invisible")),Z(n,"class","plot-table font-mono")},m(s,a){y&&y.m(s,a),R(s,e,a),R(s,n,a),I(n,r),I(r,o),Pt(i,o,null),I(n,l),Pt(c,n,null),I(n,f);for(let t=0;t<$.length;t+=1)$[t].m(n,null);R(s,d,a),Pt(p,s,a),R(s,m,a),q&&q.m(s,a),R(s,g,a),h=!0,w||(b=Q(n,"click",t[13]),w=!0)},p(t,[o]){t[0].description?y?y.p(t,o):(y=no(t),y.c(),y.m(e.parentNode,e)):y&&(y.d(1),y=null);const l={};!s&&2&o&&(s=!0,l.state=t[1],wt((()=>s=!1))),i.$set(l),(!h||2&o&&a!==(a="plot-table-toolbar "+(!t[1].show_controls&&"invisible")))&&Z(r,"class",a);const f={};!u&&2&o&&(u=!0,f.state=t[1],wt((()=>u=!1))),c.$set(f),156&o&&(O=t[3],_t(),$=Ct($,o,E,1,t,O,v,n,St,ro,null,eo),jt()),t[0].debug?q?q.p(t,o):(q=oo(t),q.c(),q.m(g.parentNode,g)):q&&(q.d(1),q=null)},i(t){if(!h){Ot(i.$$.fragment,t),Ot(c.$$.fragment,t);for(let t=0;t<O.length;t+=1)Ot($[t]);Ot(p.$$.fragment,t),h=!0}},o(t){Et(i.$$.fragment,t),Et(c.$$.fragment,t);for(let t=0;t<$.length;t+=1)Et($[t]);Et(p.$$.fragment,t),h=!1},d(t){y&&y.d(t),t&&D(e),t&&D(n),Tt(i),Tt(c);for(let t=0;t<$.length;t+=1)$[t].d();t&&D(d),Tt(p,t),t&&D(m),q&&q.d(t),t&&D(g),w=!1,b()}}}function so(t,e,n){let r,o,{options:i}=e,{data:s}=e,{columns:a,rows:l,messages:c}=sr(i,s),u={filter:i.filter||"",filters:er(a,i.filters),sort:i.sort,wsort:i.wsort,show_controls:!!i.show_controls},f=0!=i.sortable,d=new Set(i.selected||[]);function p(t,e){!function(t,e,n,r){const o=new Set(n);if(t.metaKey)o.has(e)?o.delete(e):o.add(e);else{const t=o.has(e)&&1==o.size;o.clear(),t||o.add(e)}r(o)}(t,e,d,(t=>n(2,d=t)))}return t.$$set=t=>{"options"in t&&n(0,i=t.options),"data"in t&&n(8,s=t.data)},t.$$.update=()=>{2&t.$$.dirty&&n(9,r=cr(a,l,u)),514&t.$$.dirty&&n(3,o=function(t,e,{sort:n,wsort:r}){return n&&n.length>0?Yn(t,e,n):r&&g(r)>0?Zn(t,e,r):e}(a,r,u))},[i,u,d,o,a,c,f,p,s,r,function(t){u=t,n(1,u)},function(t){u=t,n(1,u)},(t,e)=>p(e,t._i),()=>n(1,u={...u,show_controls:!0})]}class ao extends Lt{constructor(t){super(),Jt(this,t,so,io,W,{options:0,data:8})}}function lo(t){let e,n;return e=new It({props:{error:t[3]}}),{c(){Nt(e.$$.fragment)},m(t,r){Pt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.error=t[3]),e.$set(r)},i(t){n||(Ot(e.$$.fragment,t),n=!0)},o(t){Et(e.$$.fragment,t),n=!1},d(t){Tt(e,t)}}}function co(t){let e,n;return e=new ao({props:{options:t[0].table||{},data:t[2]}}),{c(){Nt(e.$$.fragment)},m(t,r){Pt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.options=t[0].table||{}),1&n&&(r.data=t[2]),e.$set(r)},i(t){n||(Ot(e.$$.fragment,t),n=!0)},o(t){Et(e.$$.fragment,t),n=!1},d(t){Tt(e,t)}}}function uo(t){let e,n;return e=new de({}),{c(){Nt(e.$$.fragment)},m(t,r){Pt(e,t,r),n=!0},p:T,i(t){n||(Ot(e.$$.fragment,t),n=!0)},o(t){Et(e.$$.fragment,t),n=!1},d(t){Tt(e,t)}}}function fo(t){let e,n,r,o={ctx:t,current:null,token:null,hasCatch:!0,pending:uo,then:co,catch:lo,value:2,error:3,blocks:[,,,]};return qt(n=ne(t[0].data),o),{c(){e=V("div"),o.block.c(),Z(e,"class","TableBlockContent")},m(t,n){R(t,e,n),o.block.m(e,o.anchor=null),o.mount=()=>e,o.anchor=null,r=!0},p(e,[r]){t=e,o.ctx=t,1&r&&n!==(n=ne(t[0].data))&&qt(n,o)||Mt(o,t,r)},i(t){r||(Ot(o.block),r=!0)},o(t){for(let t=0;t<3;t+=1){Et(o.blocks[t])}r=!1},d(t){t&&D(e),o.block.d(),o.token=null,o=null}}}const po={match:t=>"object"==typeof t&&"table"in t||Array.isArray(t)||se(t),normalize:t=>{if(Array.isArray(t))return{data:t,table:{}};if(se(t))return function(t){const e=[];for(const n of t.columns){let r="unknown";for(const e of t.rows){const t=e[n];if(null!=t){r=typeof t;break}}e.push(r)}const n=t.columns.map(((t,n)=>({id:t,type:e[n]})));return{data:t.rows,table:{columns:n}}}(t);if("object"==typeof t)return t;throw new Error("unsupported data type")}};function mo(t,e,n){let{block:r}=e,{state:o}=e;return t.$$set=t=>{"block"in t&&n(0,r=t.block),"state"in t&&n(1,o=t.state)},[r,o]}var go=Object.freeze({__proto__:null,default:class extends Lt{constructor(t){super(),Jt(this,t,mo,fo,W,{block:0,state:1})}},definition:po});function ho(t){let e,n;return e=new be({props:{markdown:t[0].description}}),{c(){Nt(e.$$.fragment)},m(t,r){Pt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.markdown=t[0].description),e.$set(r)},i(t){n||(Ot(e.$$.fragment,t),n=!0)},o(t){Et(e.$$.fragment,t),n=!1},d(t){Tt(e,t)}}}function wo(t){let e,n,r,o,i,s,a,l,c,u,f=(t[0].title||"")+"",d=t[0].description&&ho(t);var p=t[1];function m(t){return{props:{block:t[0],state:t[3]}}}return p&&(l=new p(m(t))),{c(){e=V("div"),n=V("div"),r=H(f),i=X(),d&&d.c(),s=X(),a=V("div"),l&&Nt(l.$$.fragment),Z(n,"class",o="title "+(!t[0].title&&"invisible")),Z(a,"class","content"),Z(e,"class",c="SingleBlock _block_"+t[2])},m(t,o){R(t,e,o),I(e,n),I(n,r),I(e,i),d&&d.m(e,null),I(e,s),I(e,a),l&&Pt(l,a,null),u=!0},p(t,[i]){(!u||1&i)&&f!==(f=(t[0].title||"")+"")&&tt(r,f),(!u||1&i&&o!==(o="title "+(!t[0].title&&"invisible")))&&Z(n,"class",o),t[0].description?d?(d.p(t,i),1&i&&Ot(d,1)):(d=ho(t),d.c(),Ot(d,1),d.m(e,s)):d&&(_t(),Et(d,1,1,(()=>{d=null})),jt());const g={};if(1&i&&(g.block=t[0]),p!==(p=t[1])){if(l){_t();const t=l;Et(t.$$.fragment,1,0,(()=>{Tt(t,1)})),jt()}p?(l=new p(m(t)),Nt(l.$$.fragment),Ot(l.$$.fragment,1),Pt(l,a,null)):l=null}else p&&l.$set(g);(!u||4&i&&c!==(c="SingleBlock _block_"+t[2]))&&Z(e,"class",c)},i(t){u||(Ot(d),l&&Ot(l.$$.fragment,t),u=!0)},o(t){Et(d),l&&Et(l.$$.fragment,t),u=!1},d(t){t&&D(e),d&&d.d(),l&&Tt(l)}}}function bo(t,e,n){let r,{data:o}=e,{block_impl:i}=e;return t.$$set=t=>{"data"in t&&n(0,o=t.data),"block_impl"in t&&n(1,i=t.block_impl)},t.$$.update=()=>{1&t.$$.dirty&&n(2,r=o.style||"normal")},[o,i,r,{is_narrow:!1,collapsed:!1}]}N.blocks.image=Ht,N.blocks.text=je,N.blocks.chart=mn,N.blocks.table=go;class $o extends Lt{constructor(t){super(),Jt(this,t,bo,wo,W,{data:0,block_impl:1})}}P.run=async function({data:t}={}){try{let e;if(!t){const n=function(){const t=new URLSearchParams(window.location.search).get("data_url");if(t)return t;{let t=window.location.pathname;t.startsWith("/")||(t+="/");const e=/:([^:]+)$/i;return t.replace(e,"")}}();e=Gt(n),t=await ee(n)}t.css_url&&Yt([t.css_url],"parallel");const n=function(t,e){const n=N.blocks;if(null==t)throw new Error("block not defined");if("object"==typeof t){const e=t;if(e.block){if(!Array.isArray(e.block)||2!=e.block.length)throw new Error("invalid block, it should be `block: [block_name, 0.1]`");return e.block[0]}for(const t in n){const{definition:r}=n[t];if(r.match(e))return t}}if(e){const t=N.blocks_for_file_extensions[e];if(t)return t}if(Array.isArray(t)||"object"==typeof t)return"table";if("string"==typeof t)return"text"}(t,e);if(n){const{definition:e,default:r}=N.blocks[n],o=e.normalize?e.normalize(t):t;new $o({target:document.body,props:{data:o,block_impl:r}})}else{const e=function(t,e){throw new Error("not implemented")}();if(!e)throw new Error("can't find block or app");const{definition:n,default:r}=N.apps[e],o={data:n.normalize?n.normalize(t):t};new r({target:document.body,props:o})}}catch(t){console.error(t),new It({target:document.body,props:{error:t}})}}}();
