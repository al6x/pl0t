!function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function r(t){return"function"==typeof t}function s(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function i(t,n){t.appendChild(n)}function l(t,n,e){t.insertBefore(n,e||null)}function c(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function a(t){return document.createTextNode(t)}function f(){return a(" ")}function d(){return a("")}function p(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function m(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function h(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function g(t,n){t.value=null==n?"":n}function $(t,n,e,o){t.style.setProperty(n,e,o?"important":"")}let w;function v(t){w=t}function b(){if(!w)throw new Error("Function called outside component initialization");return w}const y=[],_=[],x=[],k=[],q=Promise.resolve();let E=!1;function j(t){x.push(t)}function M(t){k.push(t)}let S=!1;const O=new Set;function A(){if(!S){S=!0;do{for(let t=0;t<y.length;t+=1){const n=y[t];v(n),C(n.$$)}for(v(null),y.length=0;_.length;)_.pop()();for(let t=0;t<x.length;t+=1){const n=x[t];O.has(n)||(O.add(n),n())}x.length=0}while(y.length);for(;k.length;)k.pop()();E=!1,S=!1,O.clear()}}function C(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(j)}}const N=new Set;let T;function J(){T={r:0,c:[],p:T}}function z(){T.r||o(T.c),T=T.p}function L(t,n){t&&t.i&&(N.delete(t),t.i(n))}function P(t,n,e,o){if(t&&t.o){if(N.has(t))return;N.add(t),T.c.push((()=>{N.delete(t),o&&(e&&t.d(1),o())})),t.o(n)}}function F(t,n){const e=n.token={};function o(t,o,r,s){if(n.token!==e)return;n.resolved=s;let i=n.ctx;void 0!==r&&(i=i.slice(),i[r]=s);const l=t&&(n.current=t)(i);let c=!1;n.block&&(n.blocks?n.blocks.forEach(((t,e)=>{e!==o&&t&&(J(),P(t,1,1,(()=>{n.blocks[e]===t&&(n.blocks[e]=null)})),z())})):n.block.d(1),l.c(),L(l,1),l.m(n.mount(),n.anchor),c=!0),n.block=l,n.blocks&&(n.blocks[o]=l),c&&A()}if((r=t)&&"object"==typeof r&&"function"==typeof r.then){const e=b();if(t.then((t=>{v(e),o(n.then,1,n.value,t),v(null)}),(t=>{if(v(e),o(n.catch,2,n.error,t),v(null),!n.hasCatch)throw t})),n.current!==n.pending)return o(n.pending,0),!0}else{if(n.current!==n.then)return o(n.then,1,n.value,t),!0;n.resolved=t}var r}function B(t,n){P(t,1,1,(()=>{n.delete(t.key)}))}function D(t,n,e,o,r,s,i,l,c,u,a,f){let d=t.length,p=s.length,m=d;const h={};for(;m--;)h[t[m].key]=m;const g=[],$=new Map,w=new Map;for(m=p;m--;){const t=f(r,s,m),l=e(t);let c=i.get(l);c?o&&c.p(t,n):(c=u(l,t),c.c()),$.set(l,g[m]=c),l in h&&w.set(l,Math.abs(m-h[l]))}const v=new Set,b=new Set;function y(t){L(t,1),t.m(l,a),i.set(t.key,t),a=t.first,p--}for(;d&&p;){const n=g[p-1],e=t[d-1],o=n.key,r=e.key;n===e?(a=n.first,d--,p--):$.has(r)?!i.has(o)||v.has(o)?y(n):b.has(r)?d--:w.get(o)>w.get(r)?(b.add(o),y(n)):(v.add(r),d--):(c(e,i),d--)}for(;d--;){const n=t[d];$.has(n.key)||c(n,i)}for(;p;)y(g[p-1]);return g}function I(t,n,e){const o=t.$$.props[n];void 0!==o&&(t.$$.bound[o]=e,e(t.$$.ctx[o]))}function R(t){t&&t.c()}function K(t,e,s,i){const{fragment:l,on_mount:c,on_destroy:u,after_update:a}=t.$$;l&&l.m(e,s),i||j((()=>{const e=c.map(n).filter(r);u?u.push(...e):o(e),t.$$.on_mount=[]})),a.forEach(j)}function U(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function W(t,n){-1===t.$$.dirty[0]&&(y.push(t),E||(E=!0,q.then(A)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function H(n,r,s,i,l,u,a=[-1]){const f=w;v(n);const d=n.$$={fragment:null,ctx:null,props:u,update:t,not_equal:l,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:r.context||[]),callbacks:e(),dirty:a,skip_bound:!1};let p=!1;if(d.ctx=s?s(n,r.props||{},((t,e,...o)=>{const r=o.length?o[0]:e;return d.ctx&&l(d.ctx[t],d.ctx[t]=r)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](r),p&&W(n,t)),e})):[],d.update(),p=!0,o(d.before_update),d.fragment=!!i&&i(d.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);d.fragment&&d.fragment.l(t),t.forEach(c)}else d.fragment&&d.fragment.c();r.intro&&L(n.$$.fragment),K(n,r.target,r.anchor,r.customElement),A()}v(f)}class G{$destroy(){U(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Q=new Map;let V="Deno"in window?window.Deno:void 0;function X(t){return t&&t.toJSON?t.toJSON():t}const Y=[];let Z,tt=0,nt=!1;function et(){nt||(nt=!0,setTimeout((async()=>{for(;tt<Y.length;){let{name:t,test:n}=Y[tt];tt+=1;try{console.log(`  test | ${t}`);let e=n();e&&await e}catch(n){if(console.error(`  test | ${t} failed`),console.error(n),null!=V)throw n}}nt=!1}),0))}window.runTests=et;try{Z=(function(t,n){if(!Q.has(t))try{Q.set(t,Deno.env.get(t))}catch(n){Q.set(t,void 0)}const e=Q.get(t)||n;if(null==e)throw new Error(`env var '${t}' is not defined`);return e}("test")||"").toLowerCase()}catch(t){Z="false"}let ot="all"==Z||"true"==Z;function rt(t,n){Y.push({name:t,test:n}),(ot||t.toLowerCase()==Z)&&et()}const st=function(t,n){const e=n?n instanceof Function?n():n:"Assertion error!";if(!t)throw new Error(e)};function it(t){return null===t||"object"!=typeof t?t:Array.isArray(t)?t.map(it):"toJSON"in t?it(t.toJSON()):Object.assign({},...Object.entries(t).sort((([t],[n])=>t.localeCompare(n))).map((([t,n])=>({[t]:it(n)}))))}function lt(t,n=!0){return n?JSON.stringify(it(t),null,2):JSON.stringify(it(t))}function ct(t,n){return null===(t=n(t))||"object"!=typeof t?t:"map"in t?t.map((t=>ct(t,n))):Object.assign({},...Object.entries(t).map((([t,e])=>({[t]:ct(e,n)}))))}function ut(t,n){const e=n.match(t);return e?1==e.length?[]:e.slice(1,e.length):[]}function at(t,n){if(t instanceof Array)for(let e=0;e<t.length;e++)n(t[e],e);else if(t instanceof Map)for(const[e,o]of t)n(o,e);else for(const e in t)t.hasOwnProperty(e)&&n(t[e],e)}function ft(t,n){const e=n instanceof Function?n:t=>t==n;if(t instanceof Array)for(let n=0;n<t.length;n++){if(e(t[n],n))return t[n];for(const n in t)if(t.hasOwnProperty(n)&&e(t[n],n))return t[n]}}function dt(t,n){if(n=n||(t=>t),0==t.length)return-1;let e=n(t[0]),o=0;for(let r=1;r<t.length;r++){let s=n(t[r]);s<e&&(e=s,o=r)}return o}function pt(t,n){if(n=n||(t=>t),0==t.length)return-1;let e=n(t[0]),o=0;for(let r=1;r<t.length;r++){let s=n(t[r]);s>e&&(e=s,o=r)}return o}function mt(t,n=!1){return ht(t,.5,n)}function ht(t,n,e=!1){const o=e?t:[...t].sort(((t,n)=>t-n)),r=(o.length-1)*n,s=Math.floor(r),i=r-s;return void 0!==o[s+1]?o[s]+i*(o[s+1]-o[s]):o[s]}function gt(t,n){const e=[];let o=0;for(;;){const r=[];o<t.length&&e.push(r);for(let s=0;s<n;s++){if(!(o+s<t.length))return e;r.push(t[o+s])}o+=n}}function $t(t,n){if(t instanceof Array){const e=new Array,o=new Array,r=n instanceof Function?n:(t,e)=>n.includes(e);return at(t,((t,n)=>r(t,n)?e.push(t):o.push(t))),[e,o]}{const e={},o={},r=n instanceof Function?n:(t,e)=>n.includes(e);return at(t,((t,n)=>r(t,n)?e[n]=t:o[n]=t)),[e,o]}}function wt(t,n,e=!1){if(0==t.length)return t;{const o=typeof n(t[0]);let r,s;if("number"==o)r=function(t,e){return n(t)-n(e)};else if("boolean"==o)r=function(t,e){return(n(t)?1:0)-(n(e)?1:0)};else{if("string"!=o)throw new Error(`invalid return type for 'by' '${o}'`);r=function(t,e){return n(t).localeCompare(n(e))}}return s=[...t],s.sort(r),e&&s.reverse(),s}}function vt(t,n){if("object"==typeof t&&"found"in t){if(t.found)return t.value;throw new Error(t.message||`value${n?" "+n:""} not found`)}if("string"==typeof t){if(""==t)throw new Error(`string value${n?" "+n:""} not found`);return t}if(void 0===t)throw new Error(`value${n?" "+n:""} not defined`);return t}function bt(t,n,e){return at(t,((t,o)=>n=e(n,t,o))),n}function yt(t){return bt(t,0,((t,n)=>t+n))}function _t(t,n){if(t instanceof Array)return t.map(n);if(t instanceof Map){const e=new Map;return at(t,((t,o)=>e.set(o,n(t,o)))),e}{const e={};return at(t,((t,o)=>e[o]=n(t,o))),e}}function xt(t,n=0){return 0==n?Math.round(t):Math.round((t+Number.EPSILON)*Math.pow(10,n))/Math.pow(10,n)}function kt(t){switch(t){case"left":return"text-left";case"center":return"text-center";case"right":return"text-right"}}function qt(n){let e,o;return{c(){e=u("div"),o=a(n[0]),m(e,"class",n[1])},m(t,n){l(t,e,n),i(e,o)},p(t,[n]){1&n&&h(o,t[0])},i:t,o:t,d(t){t&&c(e)}}}st.equal=(t,n,e)=>{if(!function(t,n){return lt(t)===lt(n)}(t,n)){const o=e?e instanceof Function?e():e:`Assertion error: ${lt(t,!0)} != ${lt(n,!0)}`;throw new Error(o)}},st.fail=(t,n)=>{let e=!1;try{t()}catch(t){e=!0}if(!e){const t=n?n instanceof Function?n():n:"Assertion error: expected to fail but didn't";throw new Error(t)}},st.approxEqual=(t,n,e,o)=>{o=o||.001;const r=(Math.abs(t)+Math.abs(n))/2*o;if(Math.abs(t-n)>r){const o=e?e instanceof Function?e():e:`Assertion error: ${lt(t,!0)} != ${lt(n,!0)}`;throw new Error(o)}},rt("deepMap",(()=>{class t{constructor(t){this.v=t}toJSON(){return this.v}}const n=new t([1,2]);st.equal(ct(n,X),[1,2]);const e=new t([n,3]);st.equal(ct(e,X),[[1,2],3])})),Promise.prototype.toJSON=function(){return"Promise"},Object.defineProperty(Promise.prototype,"cmap",{configurable:!1,enumerable:!1}),rt("parse",(()=>{st.equal(ut(/.+ (\d+) (\d+)/,"a 22 45"),["22","45"]),st.equal(ut(/[^;]+;/,"drop table; create table;"),[])})),rt("parseNamed",(()=>{st.equal(function(t,n){const e=n.match(t);return(null==e?void 0:e.groups)||{}}(/.+ (?<a>\d+) (?<b>\d+)/,"a 22 45"),{a:"22",b:"45"})})),rt("dedent",(()=>{st.equal(function(t){const n=ut(/^(\s+)/,t=t.replace(/^\n*/,""));return 0==n.length?t:t.replace(new RegExp("^\\s{"+n[0].length+"}","gm"),"")}("\n  a\n  b\n    c"),"a\nb\n  c")})),rt("groupByN",(()=>{st.equal(gt([1,2,3],2),[[1,2],[3]]),st.equal(gt([1,2],2),[[1,2]]),st.equal(gt([1],2),[[1]]),st.equal(gt([],2),[])})),rt("sortBy",(()=>{st.equal(wt([{v:!0},{v:!1}],(({v:t})=>t)),[{v:!1},{v:!0}]),st.equal(wt([{v:"b"},{v:""},{v:"c"}],(({v:t})=>t)),[{v:""},{v:"b"},{v:"c"}])})),rt("pick",(()=>{var t;st.equal((t=["a"],$t({a:1,b:2},((n,e)=>t.includes(e)))[0]),{a:1})})),rt("round",(()=>{st.equal(xt(.05860103881518906,2),.06)})),Error.prototype.toJSON=function(){return{message:this.message,stack:this.stack}},Map.prototype.toJSON=function(){return bt(this,{},((t,n,e)=>(t[e]=n,t)))};function Et(t,n,e){let o,{options:r}=n,{value:s}=n;const i=kt(r.align||"left");return t.$$set=t=>{"options"in t&&e(2,r=t.options),"value"in t&&e(3,s=t.value)},t.$$.update=()=>{8&t.$$.dirty&&e(0,o=null==s?"":s)},[o,i,r,s]}var jt=Object.freeze({__proto__:null,default:class extends G{constructor(t){super(),H(this,t,Et,qt,s,{options:2,value:3})}},compatibleTypes:["number","boolean","string"]});function Mt(n){let e,o,r=(n[0]?n[2]:n[3])+"";return{c(){e=u("div"),o=a(r),m(e,"class",n[1])},m(t,n){l(t,e,n),i(e,o)},p(t,[n]){1&n&&r!==(r=(t[0]?t[2]:t[3])+"")&&h(o,r)},i:t,o:t,d(t){t&&c(e)}}}function St(t,n,e){let{options:o}=n,{value:r}=n;const s=kt(o.align||"center"),i=o.true||"✓",l=o.false||"";return t.$$set=t=>{"options"in t&&e(4,o=t.options),"value"in t&&e(0,r=t.value)},[r,s,i,l,o]}var Ot=Object.freeze({__proto__:null,default:class extends G{constructor(t){super(),H(this,t,St,Mt,s,{options:4,value:0})}},compatibleTypes:["boolean"]});function At(n){let e,o;return{c(){e=u("div"),o=a(n[0]),m(e,"class",n[1])},m(t,n){l(t,e,n),i(e,o)},p(t,[n]){1&n&&h(o,t[0])},i:t,o:t,d(t){t&&c(e)}}}function Ct(t,n,e){let o,{options:r}=n,{value:s}=n;const i=r.round||void 0,l=kt(r.align||"right");return t.$$set=t=>{"options"in t&&e(2,r=t.options),"value"in t&&e(3,s=t.value)},t.$$.update=()=>{8&t.$$.dirty&&e(0,o=void 0===s?"":""+(i?xt(s,i):s))},[o,l,r,s]}var Nt=Object.freeze({__proto__:null,default:class extends G{constructor(t){super(),H(this,t,Ct,At,s,{options:2,value:3})}},compatibleTypes:["number"]});function Tt(t){let n,e;return{c(){n=u("div"),m(n,"class",t[2]+" h-2"),$(n,"width",100*t[1]+"%"),$(n,"background-color",zt),$(n,"border-radius","2px"),m(n,"title",e=t[0]+" or "+xt(t[1],2))},m(t,e){l(t,n,e)},p(t,o){2&o&&$(n,"width",100*t[1]+"%"),3&o&&e!==(e=t[0]+" or "+xt(t[1],2))&&m(n,"title",e)},d(t){t&&c(n)}}}function Jt(n){let e,o=null!=n[0]&&Tt(n);return{c(){o&&o.c(),e=d()},m(t,n){o&&o.m(t,n),l(t,e,n)},p(t,[n]){null!=t[0]?o?o.p(t,n):(o=Tt(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},i:t,o:t,d(t){o&&o.d(t),t&&c(e)}}}const zt="#111827";function Lt(t,n,e){let{options:o}=n,{value:r}=n,{converted:s}=n;const i=kt(o.align||"left");return t.$$set=t=>{"options"in t&&e(3,o=t.options),"value"in t&&e(0,r=t.value),"converted"in t&&e(1,s=t.converted)},[r,s,i,o]}var Pt=Object.freeze({__proto__:null,default:class extends G{constructor(t){super(),H(this,t,Lt,Jt,s,{options:3,value:0,converted:1})}},compatibleTypes:["number"],convertColumn:function(t,n){const e=new Set;let o=0;for(const n of t)void 0!==n&&n>o&&(o=n);return n.max&&(n.max>=o?o=n.max:e.add(`max value for 'line' format ${n.max} is smaller than actual max ${o}`)),0==o&&(o=1),{column:t.map((t=>void 0===t?t:t<0?void e.add("negative values not supported for 'line' format"):t/o)),warnings:Array.from(e).sort()}}});function Ft(n){let e,o;return{c(){e=u("div"),o=a(n[0]),m(e,"class",n[1])},m(t,n){l(t,e,n),i(e,o)},p(t,[n]){1&n&&h(o,t[0])},i:t,o:t,d(t){t&&c(e)}}}function Bt(t,n,e){let o,{options:r}=n,{value:s}=n;const i=kt(r.align||"left");return t.$$set=t=>{"options"in t&&e(2,r=t.options),"value"in t&&e(3,s=t.value)},t.$$.update=()=>{8&t.$$.dirty&&e(0,o=null==s?"":""+s)},[o,i,r,s]}const Dt={string:jt,boolean:Ot,number:Nt,unknown:Object.freeze({__proto__:null,default:class extends G{constructor(t){super(),H(this,t,Bt,Ft,s,{options:2,value:3})}},compatibleTypes:[]}),line:Pt};function It(t){return t in Dt?{isError:!1,value:Dt[t]}:{isError:!0,message:`no '${t}' format`}}const Rt=["string","number","boolean","unknown"];function Kt(t,n,e){if(0==n.length)return{columns:[],rows:[],formats:[],messages:[]};const o=[];for(let e=0;e<n.length;e++){const r=n[e];if(Array.isArray(r)){const n={_i:e};if(t)for(let e=0;e<t.length&&e<r.length;e++)n[t[e].id]=r[e];else for(let t=0;t<Ut.length&&t<r.length;t++)n[Ut[t]]=r[t];o.push(n)}else o.push(Object.assign(Object.assign({},r),{_i:e}))}for(let t=0;t<o.length;t++){const n=o[t];for(const t in n)null===n[t]&&(n[t]=void 0)}const r=new Set;if(!t){const n=new Map,e=new Set;for(let t=0;t<o.length;t++){const s=o[t];for(const t in s){if("_i"==t)continue;let o=s[t];if(void 0===o)e.add(t);else{let e=typeof o;"object"==e?(r.add(`unknown type for column '${t}' - '${e}'`),n.set(t,"unknown")):n.has(t)?n.get(t)!=e&&(r.add(`unstable types for column '${t}', ${[n.get(t),e].sort().join(", ")}`),n.set(t,"unknown")):n.set(t,e)}}}for(const t of e)n.has(t)||n.set(t,"unknown");t=wt(Array.from(n,(([t,n])=>({id:t,type:n}))),(({id:t})=>t))}const s=new Map;for(const n of t){const{id:t}=n;s.has(t)&&(r.add(`not unique column id '${t}'`),n.id=t+s.get(t)),s.set(t,(s.get(t)||0)+1)}t=[...t];for(let n=0;n<o.length;n++){const e=o[n];for(const n of t){const{id:t,type:o}=n;if("_i"==t)continue;let s=e[t];if(void 0===s)continue;typeof s!=o&&"unknown"!=o&&Rt.includes(o)&&(r.add(`wrong type for column '${t}', specified as '${o}' but '${typeof s}' found`),n.type="unknown")}}for(const{id:n,min_max:e,type:s}of t){if(!e)continue;if("number"!=s){r.add(`wrong min_max on column '${n}' it can't be specified for non integer type '${s}'`);continue}const[t,i]=e;t>i&&r.add(`wrong min_max on column '${n}' min should not be greather than max`);for(const e of o){const o=e[n];null!=o&&(o<t&&r.add(`wrong min_max on column '${n}' column contains values lover than '${t}'`),o>i&&r.add(`wrong min_max on column '${n}' column contains values greater than '${t}'`))}}e&&t.unshift({id:"_i",type:"number"});const i=It("unknown");if(i.isError)throw"can't get 'unknown' formatter";const l=[];for(const n of t){const[t,e]=Qt(n),o=It(t);o.isError?(r.add(o.message),l.push([i.value,e])):o.value.compatibleTypes.includes(n.type)?l.push([o.value,e]):(r.add(`column ${n.id} has wrong format, format ${n.format} is not compatible with '${n.type}' type`),l.push([i.value,e]))}for(let n=0;n<t.length;n++){const[{id:e},[s,i]]=[t[n],l[n]];if(s.convertColumn){const t=o.map((t=>t[e])),{column:n,warnings:l}=s.convertColumn(t,i);l.forEach((t=>r.add(t)));for(let t=0;t<o.length;t++){const r=o[t];r._converted||(r._converted={}),r._converted[e]=n[t]}}}return{columns:t,rows:o,formats:l,messages:Array.from(r).sort().map((t=>({type:"warn",message:t})))}}const Ut="abcdefghijklmnopqrstuvwxyz".split("");function Wt(t,n){let e;if(t.some((({width:t})=>null!=t)))e=t.map((({width:t})=>t||1));else{const o=new Map;for(const e of n)for(const{id:n,type:r}of t){let t;if(void 0===e[n])continue;if("string"==r)t=e[n].length;else if("number"==r)t=(""+e[n]).length;else{if("boolean"!=r)continue;t=1}let s=o.get(n);null==s&&(s=[],o.set(n,s)),s.push(t)}const r=_t(o,(t=>ht(t,.7))),s=mt(bt(r,[],((t,n)=>(t.push(n),t)))),i=1.618,l=_t(r,(t=>t>s*i?i:t<s/i?1/i:1)),c=1;e=t.map((({id:t})=>l.get(t)||c))}return Ht(e)}function Ht(t){const n=100/yt(t);let e=t.map((t=>xt(t*n)));for(;;){const t=yt(e);if(t>100)e[pt(e)]-=1;else{if(!(t<100))break;e[dt(e)]+=1}}return e}function Gt(t,n,e){if(!(e=function(t){return t.replace(/^[\t\s\n]+|[\t\s\n]+$/g,"")}(e)))return n;const o=/^([^=\s]+)=(.+)$/i;if(o.test(e)){const[t,r]=function(t,n){const e=ut(t,n);if(2!=e.length)throw new Error(`expected 2 matches but found ${e.length}`);return[e[0],e[1]]}(o,e),s=r.toLowerCase();return n.filter((n=>(""+n[t]).toLowerCase().includes(s)))}{const o=e.toLowerCase();return n.filter((n=>{for(const{id:e}of t)if((""+n[e]).toLowerCase().includes(o))return!0;return!1}))}}function Qt({format:t,type:n}){return"string"==typeof(t=t||n)?[t,{}]:t}rt("normalizeInputsSlow",(()=>{{const{columns:t,rows:n}=Kt(void 0,[["v",null]],!1);st.equal(t,[{id:"a",type:"string"},{id:"b",type:"unknown"}]),st.equal(n,[{a:"v",b:void 0,_i:0}])}{const{columns:t,rows:n}=Kt(void 0,[{k:"v",k2:null}],!1);st.equal(t,[{id:"k",type:"string"},{id:"k2",type:"unknown"}]),st.equal(n,[{k:"v",k2:void 0,_i:0}])}{const{columns:t,rows:n}=Kt(void 0,[{k:"v"},{k:0}],!1);st.equal(t,[{id:"k",type:"unknown"}]),st.equal(n,[{k:"v",_i:0},{k:0,_i:1}])}})),rt("calculateColumnWidths",(()=>{st.equal(Wt([{id:"name",type:"string"},{id:"age",type:"number"}],[{name:"Jim Raynor",age:30},{name:"Kate",age:25}]),[62,38])})),rt("weightsToPercents",(()=>{st.equal(Ht([2,2]),[50,50]),st.equal(Ht([3,3,3]).sort(),[33,33,34])}));const Vt={string:function(t,n){return t.localeCompare(n)},number:function(t,n){return t-n},boolean:function(t,n){return t==n?0:t?1:-1},unknown:function(t,n){return(""+t).localeCompare(""+n)}};function Xt(t,[n,e]){const o="desc"==e,r=vt(ft(t,(({id:t})=>t==n))).type;if(!(r in Vt))throw new Error(`no comparator for '${r}' type, please register one`);const s=Vt[r];return o?function(t,e){const o=e[n],r=t[n];return void 0===o?void 0===r?0:-1:void 0===r?1:s(o,r)}:function(t,e){const o=t[n],r=e[n];return void 0===o?void 0===r?0:-1:void 0===r?1:s(o,r)}}function Yt(t,n,e){if(e.length>3)throw new Error("sort not supported for more than 3 columns");const[o,r,s]=e;if(null==o&&st(null==r),null==r&&st(null==s),0==n.length||null==o)return n;let i,l=Xt(t,o),c=r?Xt(t,r):void 0,u=s?Xt(t,s):void 0;i=u?function(t,n){let e=l(t,n);return 0!=e?e:(e=c(t,n),0!=e?e:u(t,n))}:c?function(t,n){let e=l(t,n);return 0!=e?e:c(t,n)}:l;const a=[...n];return a.sort(i),a}function Zt(t,n,e){n=[...n];for(const t of n)t._weights={},t._nweights={};for(const[o,r]of e){const{type:e,min_max:s}=vt(ft(t,(({id:t})=>t==o)));let[i,l]=$t(n,(t=>void 0!==t[o]));if(0==i.length){for(const t of n)t._weights[o]=0,t._nweights[o]=0;continue}if("number"==e){const t=typeof n[0][o];if("number"!=t)throw new Error(`wrong type for '${o}' column, wsort expects number but found '${t}'`);for(const t of i)t._weights[o]=t[o]}else{if(!(e in Vt))throw new Error(`no comparator for '${e}' type, please register one`);const t=Vt[e];i.sort(((n,e)=>t(n[o],e[o])));let n,r=0;for(let t=0;t<i.length;t++){const e=i[t];e[o]==n?r+=1:n=e[o],e._weights[o]=t-r}}{let t,n;if(s){if("number"!=e)throw new Error("can't use min_max for non number type");t=s[0],n=s[1]}else{const e=i.map((t=>t._weights[o]));t=Math.min(...e),n=Math.max(...e)}const r=(n+t)/2;let l=(n-t)/2;st(l>=0),l=0==l?1:l;for(const t of i){let n=(t._weights[o]-r)/l;t._nweights[o]=n}}let c=mt(i.map((t=>t._nweights[o])));for(const t of l)t._nweights[o]=c;if("desc"==r)for(const t of n)t._nweights[o]=-1*t._nweights[o]}for(const t of n){let n=0;for(const[o,r]of e)n+=t._nweights[o];t._w=n}return n.sort(((t,n)=>t._w-n._w)),n}function tn(t){let n,e,o,r=t[3]&&en(t);return{c(){n=u("div"),e=u("span"),o=a(t[2]),r&&r.c(),m(n,"class","flex justify-between")},m(t,s){l(t,n,s),i(n,e),i(e,o),r&&r.m(n,null)},p(t,e){4&e&&h(o,t[2]),t[3]?r?r.p(t,e):(r=en(t),r.c(),r.m(n,null)):r&&(r.d(1),r=null)},d(t){t&&c(n),r&&r.d()}}}function nn(t){let n,e,o,r,s,f=t[3]&&on(t);return{c(){n=u("a"),e=u("span"),o=a(t[2]),f&&f.c(),m(n,"class","flex justify-between"),m(n,"href","#")},m(c,u){var a;l(c,n,u),i(n,e),i(e,o),f&&f.m(n,null),r||(s=p(n,"click",(a=t[4],function(t){return t.preventDefault(),a.call(this,t)})),r=!0)},p(t,e){4&e&&h(o,t[2]),t[3]?f?f.p(t,e):(f=on(t),f.c(),f.m(n,null)):f&&(f.d(1),f=null)},d(t){t&&c(n),f&&f.d(),r=!1,s()}}}function en(t){let n,e,o,r=t[3].symbol+"";return{c(){n=u("span"),e=a(r),m(n,"class",o=t[3].klass)},m(t,o){l(t,n,o),i(n,e)},p(t,s){8&s&&r!==(r=t[3].symbol+"")&&h(e,r),8&s&&o!==(o=t[3].klass)&&m(n,"class",o)},d(t){t&&c(n)}}}function on(t){let n,e,o,r=t[3].symbol+"";return{c(){n=u("span"),e=a(r),m(n,"class",o=t[3].klass)},m(t,o){l(t,n,o),i(n,e)},p(t,s){8&s&&r!==(r=t[3].symbol+"")&&h(e,r),8&s&&o!==(o=t[3].klass)&&m(n,"class",o)},d(t){t&&c(n)}}}function rn(n){let e;function o(t,n){return t[0].sortable?nn:tn}let r=o(n),s=r(n);return{c(){e=u("th"),s.c(),$(e,"width",n[1]+"%")},m(t,n){l(t,e,n),s.m(e,null)},p(t,[n]){r===(r=o(t))&&s?s.p(t,n):(s.d(1),s=r(t),s&&(s.c(),s.m(e,null))),2&n&&$(e,"width",t[1]+"%")},i:t,o:t,d(t){t&&c(e),s.d()}}}function sn(t,n,e){let o,r,s,{column:i}=n,{width:l}=n,{state:c}=n,u=i.id;return t.$$set=t=>{"column"in t&&e(5,i=t.column),"width"in t&&e(1,l=t.width),"state"in t&&e(0,c=t.state)},t.$$.update=()=>{32&t.$$.dirty&&e(2,o=i.title||i.id),1&t.$$.dirty&&e(6,r=function(t){for(let n=0;n<t.length;n++){const[e,o]=t[n];if(e==u)return[o,n]}}(c.order)),65&t.$$.dirty&&e(3,s=function(t,n,e){if(n){if(!t)return{symbol:"↓",klass:"invisible"};const[n,e]=t;return{symbol:"asc"==n?"↓":"↑",klass:"text-gray-400"}}{if(!t)return;const[n,e]=t,o="asc"==n?"↓":"↑";let r;if(0==e)r="";else if(1==e)r="text-gray-400";else{if(2!=e)throw new Error("color for more than 3 sort oders isn't supported");r="text-gray-300"}return{symbol:o,klass:r}}}(r,c.wsort,c.order.length))},[c,l,o,s,function(t){if(t.metaKey)e(0,c.order=r?c.order.map((([t,n])=>[t,t==u?"asc"==n?"desc":"asc":n])):[...c.order,[u,"asc"]],c);else{let t;t=c.order.length>1?"asc":r&&"asc"==r[0]?"desc":"asc",e(0,c.order=[[u,t]],c)}},i,r]}rt("sortTable",(()=>{const t=[{id:"name",type:"string"},{id:"age",type:"number"}],n=[{name:"Artanis",age:200},{name:"Sarah",age:30},{name:"Jim",age:30},{name:"Amon",age:void 0}];let e=e=>Yt(t,n,e).map((({name:t})=>t));st.equal(e([["name","asc"]]),["Amon","Artanis","Jim","Sarah"]),st.equal(e([["age","asc"]])[0],"Amon"),st.equal(e([["age","asc"],["name","asc"]]),["Amon","Jim","Sarah","Artanis"])})),rt("wsortTable",(()=>{let t=(t,n,e)=>Zt(t,n,e).map((({id:t})=>t));st.equal(t([{id:"a",type:"number"},{id:"b",type:"number"}],[{id:"a",a:0,b:3},{id:"b",a:1,b:3},{id:"c",a:2,b:void 0},{id:"d",a:-2,b:200}],[["a","asc"],["b","desc"]]),["d","a","b","c"]);st.equal(t([{id:"a",type:"number"}],[{id:"a",a:0},{id:"b",a:1},{id:"c",a:void 0}],[["a","asc"]]),["a","c","b"]);{const t=Zt([{id:"a",type:"string"}],[{id:"a",a:"a"},{id:"b",a:"a"},{id:"c",a:"b"}],[["a","asc"]]);st.equal(t[2].id,"c"),st.equal(t.map((t=>t._weights.a)),[0,0,1])}}));class ln extends G{constructor(t){super(),H(this,t,sn,rn,s,{column:5,width:1,state:0})}}function cn(t,n,e){const o=t.slice();return o[4]=n[e],o[6]=e,o}function un(t){let n,e,o;function r(n){t[3](n)}let s={column:t[4],width:t[2][t[6]]};return void 0!==t[0]&&(s.state=t[0]),n=new ln({props:s}),_.push((()=>I(n,"state",r))),{c(){R(n.$$.fragment)},m(t,e){K(n,t,e),o=!0},p(t,o){const r={};2&o&&(r.column=t[4]),6&o&&(r.width=t[2][t[6]]),!e&&1&o&&(e=!0,r.state=t[0],M((()=>e=!1))),n.$set(r)},i(t){o||(L(n.$$.fragment,t),o=!0)},o(t){P(n.$$.fragment,t),o=!1},d(t){U(n,t)}}}function an(n){let e;return{c(){e=u("th"),$(e,"width",n[2][n[6]]+"%")},m(t,n){l(t,e,n)},p(t,n){6&n&&$(e,"width",t[2][t[6]]+"%")},i:t,o:t,d(t){t&&c(e)}}}function fn(t,n){let e,o,r,s,i;const u=[an,un],a=[];function f(t,n){return"_i"==t[4].id?0:1}return o=f(n),r=a[o]=u[o](n),{key:t,first:null,c(){e=d(),r.c(),s=d(),this.first=e},m(t,n){l(t,e,n),a[o].m(t,n),l(t,s,n),i=!0},p(t,e){let i=o;o=f(n=t),o===i?a[o].p(n,e):(J(),P(a[i],1,1,(()=>{a[i]=null})),z(),r=a[o],r?r.p(n,e):(r=a[o]=u[o](n),r.c()),L(r,1),r.m(s.parentNode,s))},i(t){i||(L(r),i=!0)},o(t){P(r),i=!1},d(t){t&&c(e),a[o].d(t),t&&c(s)}}}function dn(t){let n,e,o=[],r=new Map,s=t[1];const i=t=>t[4].id;for(let n=0;n<s.length;n+=1){let e=cn(t,s,n),l=i(e);r.set(l,o[n]=fn(l,e))}return{c(){n=u("tr");for(let t=0;t<o.length;t+=1)o[t].c()},m(t,r){l(t,n,r);for(let t=0;t<o.length;t+=1)o[t].m(n,null);e=!0},p(t,[e]){7&e&&(s=t[1],J(),o=D(o,e,i,1,t,s,r,n,B,fn,null,cn),z())},i(t){if(!e){for(let t=0;t<s.length;t+=1)L(o[t]);e=!0}},o(t){for(let t=0;t<o.length;t+=1)P(o[t]);e=!1},d(t){t&&c(n);for(let t=0;t<o.length;t+=1)o[t].d()}}}function pn(t,n,e){let{columns:o}=n,{widths:r}=n,{state:s}=n;return t.$$set=t=>{"columns"in t&&e(1,o=t.columns),"widths"in t&&e(2,r=t.widths),"state"in t&&e(0,s=t.state)},[s,o,r,function(t){s=t,e(0,s)}]}class mn extends G{constructor(t){super(),H(this,t,pn,dn,s,{columns:1,widths:2,state:0})}}function hn(t,n,e){const o=t.slice();return o[5]=n[e],o[7]=e,o}function gn(t){let n,e,o,r,s;const a=[vn,wn],d=[];function p(t,n){return"_converted"in t[2]&&t[5].id in t[2]._converted?0:1}return e=p(t),o=d[e]=a[e](t),{c(){n=u("td"),o.c(),r=f()},m(t,o){l(t,n,o),d[e].m(n,null),i(n,r),s=!0},p(t,s){let i=e;e=p(t),e===i?d[e].p(t,s):(J(),P(d[i],1,1,(()=>{d[i]=null})),z(),o=d[e],o?o.p(t,s):(o=d[e]=a[e](t),o.c()),L(o,1),o.m(n,r))},i(t){s||(L(o),s=!0)},o(t){P(o),s=!1},d(t){t&&c(n),d[e].d()}}}function $n(n){let e,o,r=n[2]._i+1+"";return{c(){e=u("td"),o=a(r),m(e,"class","text-right")},m(t,n){l(t,e,n),i(e,o)},p(t,n){4&n&&r!==(r=t[2]._i+1+"")&&h(o,r)},i:t,o:t,d(t){t&&c(e)}}}function wn(t){let n,e,o;var r=t[1][t[7]][0].default;function s(t){return{props:{options:t[1][t[7]][1],value:t[2][t[5].id]}}}return r&&(n=new r(s(t))),{c(){n&&R(n.$$.fragment),e=d()},m(t,r){n&&K(n,t,r),l(t,e,r),o=!0},p(t,o){const i={};if(3&o&&(i.options=t[1][t[7]][1]),5&o&&(i.value=t[2][t[5].id]),r!==(r=t[1][t[7]][0].default)){if(n){J();const t=n;P(t.$$.fragment,1,0,(()=>{U(t,1)})),z()}r?(n=new r(s(t)),R(n.$$.fragment),L(n.$$.fragment,1),K(n,e.parentNode,e)):n=null}else r&&n.$set(i)},i(t){o||(n&&L(n.$$.fragment,t),o=!0)},o(t){n&&P(n.$$.fragment,t),o=!1},d(t){t&&c(e),n&&U(n,t)}}}function vn(t){let n,e,o;var r=t[1][t[7]][0].default;function s(t){return{props:{options:t[1][t[7]][1],value:t[2][t[5].id],converted:t[2]._converted[t[5].id]}}}return r&&(n=new r(s(t))),{c(){n&&R(n.$$.fragment),e=d()},m(t,r){n&&K(n,t,r),l(t,e,r),o=!0},p(t,o){const i={};if(3&o&&(i.options=t[1][t[7]][1]),5&o&&(i.value=t[2][t[5].id]),5&o&&(i.converted=t[2]._converted[t[5].id]),r!==(r=t[1][t[7]][0].default)){if(n){J();const t=n;P(t.$$.fragment,1,0,(()=>{U(t,1)})),z()}r?(n=new r(s(t)),R(n.$$.fragment),L(n.$$.fragment,1),K(n,e.parentNode,e)):n=null}else r&&n.$set(i)},i(t){o||(n&&L(n.$$.fragment,t),o=!0)},o(t){n&&P(n.$$.fragment,t),o=!1},d(t){t&&c(e),n&&U(n,t)}}}function bn(t,n){let e,o,r,s,i;const u=[$n,gn],a=[];function f(t,n){return"_i"==t[5].id?0:1}return o=f(n),r=a[o]=u[o](n),{key:t,first:null,c(){e=d(),r.c(),s=d(),this.first=e},m(t,n){l(t,e,n),a[o].m(t,n),l(t,s,n),i=!0},p(t,e){let i=o;o=f(n=t),o===i?a[o].p(n,e):(J(),P(a[i],1,1,(()=>{a[i]=null})),z(),r=a[o],r?r.p(n,e):(r=a[o]=u[o](n),r.c()),L(r,1),r.m(s.parentNode,s))},i(t){i||(L(r),i=!0)},o(t){P(r),i=!1},d(t){t&&c(e),a[o].d(t),t&&c(s)}}}function yn(t){let n,e,o,s,i,a=[],f=new Map,d=t[0];const h=t=>t[5].id;for(let n=0;n<d.length;n+=1){let e=hn(t,d,n),o=h(e);f.set(o,a[n]=bn(o,e))}return{c(){n=u("tr");for(let t=0;t<a.length;t+=1)a[t].c();m(n,"class",e=t[3]?"bg-gray-100":"")},m(e,c){l(e,n,c);for(let t=0;t<a.length;t+=1)a[t].m(n,null);o=!0,s||(i=p(n,"click",(function(){r(t[4])&&t[4].apply(this,arguments)})),s=!0)},p(r,[s]){t=r,7&s&&(d=t[0],J(),a=D(a,s,h,1,t,d,f,n,B,bn,null,hn),z()),(!o||8&s&&e!==(e=t[3]?"bg-gray-100":""))&&m(n,"class",e)},i(t){if(!o){for(let t=0;t<d.length;t+=1)L(a[t]);o=!0}},o(t){for(let t=0;t<a.length;t+=1)P(a[t]);o=!1},d(t){t&&c(n);for(let t=0;t<a.length;t+=1)a[t].d();s=!1,i()}}}function _n(t,n,e){let{columns:o}=n,{formats:r}=n,{row:s}=n,{selected:i}=n,{onSelect:l}=n;return t.$$set=t=>{"columns"in t&&e(0,o=t.columns),"formats"in t&&e(1,r=t.formats),"row"in t&&e(2,s=t.row),"selected"in t&&e(3,i=t.selected),"onSelect"in t&&e(4,l=t.onSelect)},[o,r,s,i,l]}class xn extends G{constructor(t){super(),H(this,t,_n,yn,s,{columns:0,formats:1,row:2,selected:3,onSelect:4})}}function kn(n){let e,r,s,a,d,h,$,w,v=`<svg xmlns="http://www.w3.org/2000/svg" class="${"h-4 w-4 text-gray-900"}" viewBox="0 0 20 20" fill="currentColor">\n  <path fill-rule="evenodd" d="M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />\n</svg>`;let b,y;return{c(){e=u("div"),r=u("div"),s=f(),a=u("div"),d=u("input"),$=f(),w=u("button"),m(r,"class","flex items-center"),m(d,"class",h=n[2]+" rounded border border-gray-300 text-sm outline-none py-1 px-1 leading-4"),m(d,"type","text"),m(d,"placeholder","Filter"),m(w,"class","focus:outline-none"),m(a,"class","flex items-center space-x-1"),m(e,"class","flex items-center justify-between my-1 mx-1")},m(t,o){l(t,e,o),i(e,r),i(e,s),i(e,a),i(a,d),g(d,n[1]),i(a,$),i(a,w),w.innerHTML=v,b||(y=[p(d,"input",n[4]),p(d,"keyup",n[3]),p(w,"click",n[5])],b=!0)},p(t,[n]){4&n&&h!==(h=t[2]+" rounded border border-gray-300 text-sm outline-none py-1 px-1 leading-4")&&m(d,"class",h),2&n&&d.value!==t[1]&&g(d,t[1])},i:t,o:t,d(t){t&&c(e),b=!1,o(y)}}}function qn(t,n,e){let o,{state:r}=n,s=r.query;const i=function(t,n){let e;return(...o)=>{e&&clearTimeout(e),e=setTimeout((()=>t(...o)),n)}}((()=>{e(0,r.query=s,r)}),200);return t.$$set=t=>{"state"in t&&e(0,r=t.state)},t.$$.update=()=>{1&t.$$.dirty&&e(2,o=r.show_json?"invisible":"")},[r,s,o,i,function(){s=this.value,e(1,s)},()=>e(0,r.show_json=!r.show_json,r)]}class En extends G{constructor(t){super(),H(this,t,qn,kn,s,{state:0})}}function jn(t,n,e){const o=t.slice();return o[1]=n[e],o}function Mn(n){let e;return{c(){e=u("div"),e.textContent="unknown message type"},m(t,n){l(t,e,n)},p:t,d(t){t&&c(e)}}}function Sn(t){let n,e,o,r,s=t[1].message+"";return{c(){n=u("div"),e=u("span"),e.textContent="error",o=f(),r=a(s),m(e,"class","bg-red-400 px-2 rounded")},m(t,s){l(t,n,s),i(n,e),i(n,o),i(n,r)},p(t,n){1&n&&s!==(s=t[1].message+"")&&h(r,s)},d(t){t&&c(n)}}}function On(t){let n,e,o,r,s=t[1].message+"";return{c(){n=u("div"),e=u("span"),e.textContent="warn",o=f(),r=a(s),m(e,"class","bg-yellow-400 px-2 rounded")},m(t,s){l(t,n,s),i(n,e),i(n,o),i(n,r)},p(t,n){1&n&&s!==(s=t[1].message+"")&&h(r,s)},d(t){t&&c(n)}}}function An(t){let n;function e(t,n){return"warn"==t[1].type?On:"error"==t[1].type?Sn:Mn}let o=e(t),r=o(t);return{c(){r.c(),n=d()},m(t,e){r.m(t,e),l(t,n,e)},p(t,s){o===(o=e(t))&&r?r.p(t,s):(r.d(1),r=o(t),r&&(r.c(),r.m(n.parentNode,n)))},d(t){r.d(t),t&&c(n)}}}function Cn(n){let e,o=n[0],r=[];for(let t=0;t<o.length;t+=1)r[t]=An(jn(n,o,t));return{c(){e=u("div");for(let t=0;t<r.length;t+=1)r[t].c();m(e,"class","text-sm mt-1 mx-1")},m(t,n){l(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,[n]){if(1&n){let s;for(o=t[0],s=0;s<o.length;s+=1){const i=jn(t,o,s);r[s]?r[s].p(i,n):(r[s]=An(i),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=o.length}},i:t,o:t,d(t){t&&c(e),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(r,t)}}}function Nn(t,n,e){let{messages:o}=n;return t.$$set=t=>{"messages"in t&&e(0,o=t.messages)},[o]}class Tn extends G{constructor(t){super(),H(this,t,Nn,Cn,s,{messages:0})}}function Jn(t,n,e){const o=t.slice();return o[16]=n[e],o}function zn(t,n){let e,o,r;function s(...t){return n[13](n[16],...t)}return o=new xn({props:{columns:n[5],formats:n[7],row:n[16],selected:n[2].has(n[16]._i),onSelect:s}}),{key:t,first:null,c(){e=d(),R(o.$$.fragment),this.first=e},m(t,n){l(t,e,n),K(o,t,n),r=!0},p(t,e){n=t;const r={};16&e&&(r.row=n[16]),20&e&&(r.selected=n[2].has(n[16]._i)),16&e&&(r.onSelect=s),o.$set(r)},i(t){r||(L(o.$$.fragment,t),r=!0)},o(t){P(o.$$.fragment,t),r=!1},d(t){t&&c(e),U(o,t)}}}function Ln(t){let n,e,o;return{c(){n=u("div"),e=u("textarea"),m(e,"class","w-full h-full focus:outline-none"),e.readOnly=!0,$(e,"resize","none"),e.value=o=lt(t[0]),m(n,"class","plot-table-json rounded border border-gray-200 text-xs overflow-scroll")},m(t,o){l(t,n,o),i(n,e)},p(t,n){1&n&&o!==(o=lt(t[0]))&&(e.value=o)},d(t){t&&c(n)}}}function Pn(n){let e,o;return e=new Tn({props:{messages:n[6]}}),{c(){R(e.$$.fragment)},m(t,n){K(e,t,n),o=!0},p:t,i(t){o||(L(e.$$.fragment,t),o=!0)},o(t){P(e.$$.fragment,t),o=!1},d(t){U(e,t)}}}function Fn(t){let n,e,o,r,s,a,h,g,$,w,v,b,y,x,k,q,E=[],j=new Map;function S(n){t[11](n)}let O={};function A(n){t[12](n)}void 0!==t[1]&&(O.state=t[1]),r=new En({props:O}),_.push((()=>I(r,"state",S)));let C={columns:t[5],widths:t[8]};void 0!==t[1]&&(C.state=t[1]),g=new mn({props:C}),_.push((()=>I(g,"state",A)));let N=t[4];const T=t=>t[16]._i;for(let n=0;n<N.length;n+=1){let e=Jn(t,N,n),o=T(e);j.set(o,E[n]=zn(o,e))}let F=t[1].show_json&&Ln(t),W=0!=t[0].warnings&&Pn(t);return{c(){n=u("table"),e=u("tr"),o=u("td"),R(r.$$.fragment),h=f(),R(g.$$.fragment),w=f();for(let t=0;t<E.length;t+=1)E[t].c();v=f(),F&&F.c(),b=f(),W&&W.c(),y=d(),m(o,"colspan",t[5].length),m(e,"class",a="plot-table-toolbar "+(!t[3]&&"invisible")+" "),m(n,"class","plot-table")},m(s,c){l(s,n,c),i(n,e),i(e,o),K(r,o,null),i(n,h),K(g,n,null),i(n,w);for(let t=0;t<E.length;t+=1)E[t].m(n,null);i(n,v),F&&F.m(n,null),l(s,b,c),W&&W.m(s,c),l(s,y,c),x=!0,k||(q=p(n,"click",t[14]),k=!0)},p(t,[o]){const i={};!s&&2&o&&(s=!0,i.state=t[1],M((()=>s=!1))),r.$set(i),(!x||8&o&&a!==(a="plot-table-toolbar "+(!t[3]&&"invisible")+" "))&&m(e,"class",a);const l={};!$&&2&o&&($=!0,l.state=t[1],M((()=>$=!1))),g.$set(l),692&o&&(N=t[4],J(),E=D(E,o,T,1,t,N,j,n,B,zn,v,Jn),z()),t[1].show_json?F?F.p(t,o):(F=Ln(t),F.c(),F.m(n,null)):F&&(F.d(1),F=null),0!=t[0].warnings?W?(W.p(t,o),1&o&&L(W,1)):(W=Pn(t),W.c(),L(W,1),W.m(y.parentNode,y)):W&&(J(),P(W,1,1,(()=>{W=null})),z())},i(t){if(!x){L(r.$$.fragment,t),L(g.$$.fragment,t);for(let t=0;t<N.length;t+=1)L(E[t]);L(W),x=!0}},o(t){P(r.$$.fragment,t),P(g.$$.fragment,t);for(let t=0;t<E.length;t+=1)P(E[t]);P(W),x=!1},d(t){t&&c(n),U(r),U(g);for(let t=0;t<E.length;t+=1)E[t].d();F&&F.d(),t&&c(b),W&&W.d(t),t&&c(y),k=!1,q()}}}function Bn(t,n,e){let o,r,{options:s}=n,{columns:i,rows:l,messages:c,formats:u}=Kt(s.columns,s.rows,s._i||!1),a=Wt(i,l),f={query:s.query||"",wsort:0!=s.wsort,sortable:0!=s.sortable,order:s.order||[],show_json:!1},d=new Set;function p(t,n){!function(t,n,e,o){const r=new Set(e);if(t.metaKey)r.has(n)?r.delete(n):r.add(n);else{const t=r.has(n)&&1==r.size;r.clear(),t||r.add(n)}o(r)}(t,n,d,(t=>e(2,d=t)))}let m=!!s.toolbar;return t.$$set=t=>{"options"in t&&e(0,s=t.options)},t.$$.update=()=>{2&t.$$.dirty&&e(10,o=Gt(i,l,f.query)),1026&t.$$.dirty&&e(4,r=(f.wsort?Zt:Yt)(i,o,f.order))},[s,f,d,m,r,i,c,u,a,p,o,function(t){f=t,e(1,f)},function(t){f=t,e(1,f)},(t,n)=>p(n,t._i),()=>e(3,m=!0)]}class Dn extends G{constructor(t){super(),H(this,t,Bn,Fn,s,{options:0})}}function In(n){let e,o,r,s;return{c(){e=u("div"),o=u("span"),o.textContent="Error",r=a(" - can't load "),s=a(n[0]),m(o,"class","text-red-600 font-bold")},m(t,n){l(t,e,n),i(e,o),i(e,r),i(e,s)},p(t,n){1&n&&h(s,t[0])},i:t,o:t,d(t){t&&c(e)}}}function Rn(t){let n,e,o,r,s,d=t[2](t[0],t[3])+"";return r=new Dn({props:{options:t[3]}}),{c(){n=u("h1"),e=a(d),o=f(),R(r.$$.fragment),m(n,"class","text-2xl mb-4")},m(t,c){l(t,n,c),i(n,e),l(t,o,c),K(r,t,c),s=!0},p(t,n){(!s||3&n)&&d!==(d=t[2](t[0],t[3])+"")&&h(e,d);const o={};2&n&&(o.options=t[3]),r.$set(o)},i(t){s||(L(r.$$.fragment,t),s=!0)},o(t){P(r.$$.fragment,t),s=!1},d(t){t&&c(n),t&&c(o),U(r,t)}}}function Kn(n){let e;return{c(){e=u("div"),e.textContent="Loading..."},m(t,n){l(t,e,n)},p:t,i:t,o:t,d(t){t&&c(e)}}}function Un(t){let n,e,o,r={ctx:t,current:null,token:null,hasCatch:!0,pending:Kn,then:Rn,catch:In,value:3,error:4,blocks:[,,,]};return F(e=t[1],r),{c(){n=u("div"),r.block.c(),m(n,"class","mx-5 my-2")},m(t,e){l(t,n,e),r.block.m(n,r.anchor=null),r.mount=()=>n,r.anchor=null,o=!0},p(n,[o]){t=n,r.ctx=t,2&o&&e!==(e=t[1])&&F(e,r)||function(t,n,e){const o=n.slice(),{resolved:r}=t;t.current===t.then&&(o[t.value]=r),t.current===t.catch&&(o[t.error]=r),t.block.p(o,e)}(r,t,o)},i(t){o||(L(r.block),o=!0)},o(t){for(let t=0;t<3;t+=1){P(r.blocks[t])}o=!1},d(t){t&&c(n),r.block.d(),r.token=null,r=null}}}function Wn(t,n,e){let{path:o}=n,{datap:r}=n;function s(t,n){return n.title||n.id||function(t,n){if(void 0===n){if(t.length<1)throw new Error("can't get last elements from empty list");return t[t.length-1]}if(t.length<n)throw new Error(`can't get last ${n} elements from list of length ${t.length}`);return t.slice(t.length-n,t.length)}(t.split("/")).replace(/\.[^\.]+$/,"")}return t.$$set=t=>{"path"in t&&e(0,o=t.path),"datap"in t&&e(1,r=t.datap)},t.$$.update=()=>{3&t.$$.dirty&&r.then((t=>document.title=s(o,t)))},[o,r,s]}const Hn=function(){let t=window.location.pathname;return t.startsWith("/")||(t+="/"),t=t.replace(/:([^:]+)$/i,""),/\.[^\/]+$/.test(t)||(t+=".json"),t}();new class extends G{constructor(t){super(),H(this,t,Wn,Un,s,{path:0,datap:1})}}({target:document.body,props:{path:Hn,datap:async function(t){let n=await fetch(function(t,n={}){const e=[];for(const t in n){const o=n[t];null!=t&&null!=o&&e.push(`${encodeURIComponent(t)}=${encodeURIComponent(""+n[t])}`)}return e.length>0?`${t}${t.includes("?")?"&":"?"}${e.join("&")}`:t}(t,{clearcache:Math.random()}));return await n.json()}(Hn)}})}();
