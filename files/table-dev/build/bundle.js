!function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function r(t){return"function"==typeof t}function s(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function i(t,n){t.appendChild(n)}function l(t,n,e){t.insertBefore(n,e||null)}function c(t){t.parentNode.removeChild(t)}function a(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function f(){return u(" ")}function d(){return u("")}function p(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function m(t){return function(n){return n.preventDefault(),t.call(this,n)}}function h(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function g(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function $(t,n){t.value=null==n?"":n}function w(t,n,e,o){t.style.setProperty(n,e,o?"important":"")}let v;function b(t){v=t}function y(){if(!v)throw new Error("Function called outside component initialization");return v}const k=[],_=[],x=[],q=[],E=Promise.resolve();let j=!1;function M(t){x.push(t)}function S(t){q.push(t)}let O=!1;const A=new Set;function C(){if(!O){O=!0;do{for(let t=0;t<k.length;t+=1){const n=k[t];b(n),N(n.$$)}for(b(null),k.length=0;_.length;)_.pop()();for(let t=0;t<x.length;t+=1){const n=x[t];A.has(n)||(A.add(n),n())}x.length=0}while(k.length);for(;q.length;)q.pop()();j=!1,O=!1,A.clear()}}function N(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(M)}}const T=new Set;let J;function z(){J={r:0,c:[],p:J}}function L(){J.r||o(J.c),J=J.p}function P(t,n){t&&t.i&&(T.delete(t),t.i(n))}function F(t,n,e,o){if(t&&t.o){if(T.has(t))return;T.add(t),J.c.push((()=>{T.delete(t),o&&(e&&t.d(1),o())})),t.o(n)}}function B(t,n){const e=n.token={};function o(t,o,r,s){if(n.token!==e)return;n.resolved=s;let i=n.ctx;void 0!==r&&(i=i.slice(),i[r]=s);const l=t&&(n.current=t)(i);let c=!1;n.block&&(n.blocks?n.blocks.forEach(((t,e)=>{e!==o&&t&&(z(),F(t,1,1,(()=>{n.blocks[e]===t&&(n.blocks[e]=null)})),L())})):n.block.d(1),l.c(),P(l,1),l.m(n.mount(),n.anchor),c=!0),n.block=l,n.blocks&&(n.blocks[o]=l),c&&C()}if((r=t)&&"object"==typeof r&&"function"==typeof r.then){const e=y();if(t.then((t=>{b(e),o(n.then,1,n.value,t),b(null)}),(t=>{if(b(e),o(n.catch,2,n.error,t),b(null),!n.hasCatch)throw t})),n.current!==n.pending)return o(n.pending,0),!0}else{if(n.current!==n.then)return o(n.then,1,n.value,t),!0;n.resolved=t}var r}function D(t,n){t.d(1),n.delete(t.key)}function I(t,n){F(t,1,1,(()=>{n.delete(t.key)}))}function R(t,n,e,o,r,s,i,l,c,a,u,f){let d=t.length,p=s.length,m=d;const h={};for(;m--;)h[t[m].key]=m;const g=[],$=new Map,w=new Map;for(m=p;m--;){const t=f(r,s,m),l=e(t);let c=i.get(l);c?o&&c.p(t,n):(c=a(l,t),c.c()),$.set(l,g[m]=c),l in h&&w.set(l,Math.abs(m-h[l]))}const v=new Set,b=new Set;function y(t){P(t,1),t.m(l,u),i.set(t.key,t),u=t.first,p--}for(;d&&p;){const n=g[p-1],e=t[d-1],o=n.key,r=e.key;n===e?(u=n.first,d--,p--):$.has(r)?!i.has(o)||v.has(o)?y(n):b.has(r)?d--:w.get(o)>w.get(r)?(b.add(o),y(n)):(v.add(r),d--):(c(e,i),d--)}for(;d--;){const n=t[d];$.has(n.key)||c(n,i)}for(;p;)y(g[p-1]);return g}function K(t,n,e){const o=t.$$.props[n];void 0!==o&&(t.$$.bound[o]=e,e(t.$$.ctx[o]))}function U(t){t&&t.c()}function W(t,e,s,i){const{fragment:l,on_mount:c,on_destroy:a,after_update:u}=t.$$;l&&l.m(e,s),i||M((()=>{const e=c.map(n).filter(r);a?a.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(M)}function H(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function G(t,n){-1===t.$$.dirty[0]&&(k.push(t),j||(j=!0,E.then(C)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function Q(n,r,s,i,l,a,u=[-1]){const f=v;b(n);const d=n.$$={fragment:null,ctx:null,props:a,update:t,not_equal:l,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:r.context||[]),callbacks:e(),dirty:u,skip_bound:!1};let p=!1;if(d.ctx=s?s(n,r.props||{},((t,e,...o)=>{const r=o.length?o[0]:e;return d.ctx&&l(d.ctx[t],d.ctx[t]=r)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](r),p&&G(n,t)),e})):[],d.update(),p=!0,o(d.before_update),d.fragment=!!i&&i(d.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);d.fragment&&d.fragment.l(t),t.forEach(c)}else d.fragment&&d.fragment.c();r.intro&&P(n.$$.fragment),W(n,r.target,r.anchor,r.customElement),C()}b(f)}class V{$destroy(){H(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const X=new Map;let Y="Deno"in window?window.Deno:void 0;function Z(t){return t&&t.toJSON?t.toJSON():t}const tt=[];let nt,et=0,ot=!1;function rt(){ot||(ot=!0,setTimeout((async()=>{for(;et<tt.length;){let{name:t,test:n}=tt[et];et+=1;try{console.log(`  test | ${t}`);let e=n();e&&await e}catch(n){if(console.error(`  test | ${t} failed`),console.error(n),null!=Y)throw n}}ot=!1}),0))}window.runTests=rt;try{nt=(function(t,n){if(!X.has(t))try{X.set(t,Deno.env.get(t))}catch(n){X.set(t,void 0)}const e=X.get(t)||n;if(null==e)throw new Error(`env var '${t}' is not defined`);return e}("test")||"").toLowerCase()}catch(t){nt="false"}let st="all"==nt||"true"==nt;function it(t,n){tt.push({name:t,test:n}),(st||t.toLowerCase()==nt)&&rt()}const lt=function(t,n){const e=n?n instanceof Function?n():n:"Assertion error!";if(!t)throw new Error(e)};function ct(t){return null===t||"object"!=typeof t?t:Array.isArray(t)?t.map(ct):"toJSON"in t?ct(t.toJSON()):Object.assign({},...Object.entries(t).sort((([t],[n])=>t.localeCompare(n))).map((([t,n])=>({[t]:ct(n)}))))}function at(t,n=!0){return n?JSON.stringify(ct(t),null,2):JSON.stringify(ct(t))}function ut(t,n){return null===(t=n(t))||"object"!=typeof t?t:"map"in t?t.map((t=>ut(t,n))):Object.assign({},...Object.entries(t).map((([t,e])=>({[t]:ut(e,n)}))))}function ft(t,n){const e=n.match(t);return e?1==e.length?[]:e.slice(1,e.length):[]}function dt(t,n){if(t instanceof Array)for(let e=0;e<t.length;e++)n(t[e],e);else if(t instanceof Map)for(const[e,o]of t)n(o,e);else for(const e in t)t.hasOwnProperty(e)&&n(t[e],e)}function pt(t,n){const e=n instanceof Function?n:t=>t==n;if(t instanceof Array)for(let n=0;n<t.length;n++){if(e(t[n],n))return t[n];for(const n in t)if(t.hasOwnProperty(n)&&e(t[n],n))return t[n]}}function mt(t,n){if(n=n||(t=>t),0==t.length)return-1;let e=n(t[0]),o=0;for(let r=1;r<t.length;r++){let s=n(t[r]);s<e&&(e=s,o=r)}return o}function ht(t,n){if(n=n||(t=>t),0==t.length)return-1;let e=n(t[0]),o=0;for(let r=1;r<t.length;r++){let s=n(t[r]);s>e&&(e=s,o=r)}return o}function gt(t,n=!1){return $t(t,.5,n)}function $t(t,n,e=!1){const o=e?t:[...t].sort(((t,n)=>t-n)),r=(o.length-1)*n,s=Math.floor(r),i=r-s;return void 0!==o[s+1]?o[s]+i*(o[s+1]-o[s]):o[s]}function wt(t,n){const e=[];let o=0;for(;;){const r=[];o<t.length&&e.push(r);for(let s=0;s<n;s++){if(!(o+s<t.length))return e;r.push(t[o+s])}o+=n}}function vt(t,n){if(t instanceof Array){const e=new Array,o=new Array,r=n instanceof Function?n:(t,e)=>n.includes(e);return dt(t,((t,n)=>r(t,n)?e.push(t):o.push(t))),[e,o]}{const e={},o={},r=n instanceof Function?n:(t,e)=>n.includes(e);return dt(t,((t,n)=>r(t,n)?e[n]=t:o[n]=t)),[e,o]}}function bt(t,n,e=!1){if(0==t.length)return t;{const o=typeof n(t[0]);let r,s;if("number"==o)r=function(t,e){return n(t)-n(e)};else if("boolean"==o)r=function(t,e){return(n(t)?1:0)-(n(e)?1:0)};else{if("string"!=o)throw new Error(`invalid return type for 'by' '${o}'`);r=function(t,e){return n(t).localeCompare(n(e))}}return s=[...t],s.sort(r),e&&s.reverse(),s}}function yt(t,n){if("object"==typeof t&&"found"in t){if(t.found)return t.value;throw new Error(t.message||`value${n?" "+n:""} not found`)}if("string"==typeof t){if(""==t)throw new Error(`string value${n?" "+n:""} not found`);return t}if(void 0===t)throw new Error(`value${n?" "+n:""} not defined`);return t}function kt(t,n,e){return dt(t,((t,o)=>n=e(n,t,o))),n}function _t(t){return kt(t,0,((t,n)=>t+n))}function xt(t,n){if(t instanceof Array)return t.map(n);if(t instanceof Map){const e=new Map;return dt(t,((t,o)=>e.set(o,n(t,o)))),e}{const e={};return dt(t,((t,o)=>e[o]=n(t,o))),e}}function qt(t,n=0){return 0==n?Math.round(t):Math.round((t+Number.EPSILON)*Math.pow(10,n))/Math.pow(10,n)}function Et(t){switch(t){case"left":return"text-left";case"center":return"text-center";case"right":return"text-right"}}function jt(n){let e,o;return{c(){e=a("div"),o=u(n[0]),h(e,"class",n[1])},m(t,n){l(t,e,n),i(e,o)},p(t,[n]){1&n&&g(o,t[0])},i:t,o:t,d(t){t&&c(e)}}}lt.equal=(t,n,e)=>{if(!function(t,n){return at(t)===at(n)}(t,n)){const o=e?e instanceof Function?e():e:`Assertion error: ${at(t,!0)} != ${at(n,!0)}`;throw new Error(o)}},lt.fail=(t,n)=>{let e=!1;try{t()}catch(t){e=!0}if(!e){const t=n?n instanceof Function?n():n:"Assertion error: expected to fail but didn't";throw new Error(t)}},lt.approxEqual=(t,n,e,o)=>{o=o||.001;const r=(Math.abs(t)+Math.abs(n))/2*o;if(Math.abs(t-n)>r){const o=e?e instanceof Function?e():e:`Assertion error: ${at(t,!0)} != ${at(n,!0)}`;throw new Error(o)}},it("deepMap",(()=>{class t{constructor(t){this.v=t}toJSON(){return this.v}}const n=new t([1,2]);lt.equal(ut(n,Z),[1,2]);const e=new t([n,3]);lt.equal(ut(e,Z),[[1,2],3])})),Promise.prototype.toJSON=function(){return"Promise"},Object.defineProperty(Promise.prototype,"cmap",{configurable:!1,enumerable:!1}),it("parse",(()=>{lt.equal(ft(/.+ (\d+) (\d+)/,"a 22 45"),["22","45"]),lt.equal(ft(/[^;]+;/,"drop table; create table;"),[])})),it("parseNamed",(()=>{lt.equal(function(t,n){const e=n.match(t);return(null==e?void 0:e.groups)||{}}(/.+ (?<a>\d+) (?<b>\d+)/,"a 22 45"),{a:"22",b:"45"})})),it("dedent",(()=>{lt.equal(function(t){const n=ft(/^(\s+)/,t=t.replace(/^\n*/,""));return 0==n.length?t:t.replace(new RegExp("^\\s{"+n[0].length+"}","gm"),"")}("\n  a\n  b\n    c"),"a\nb\n  c")})),it("groupByN",(()=>{lt.equal(wt([1,2,3],2),[[1,2],[3]]),lt.equal(wt([1,2],2),[[1,2]]),lt.equal(wt([1],2),[[1]]),lt.equal(wt([],2),[])})),it("sortBy",(()=>{lt.equal(bt([{v:!0},{v:!1}],(({v:t})=>t)),[{v:!1},{v:!0}]),lt.equal(bt([{v:"b"},{v:""},{v:"c"}],(({v:t})=>t)),[{v:""},{v:"b"},{v:"c"}])})),it("pick",(()=>{var t;lt.equal((t=["a"],vt({a:1,b:2},((n,e)=>t.includes(e)))[0]),{a:1})})),it("round",(()=>{lt.equal(qt(.05860103881518906,2),.06)})),Error.prototype.toJSON=function(){return{message:this.message,stack:this.stack}},Map.prototype.toJSON=function(){return kt(this,{},((t,n,e)=>(t[e]=n,t)))};function Mt(t,n,e){let o,{options:r}=n,{value:s}=n;const i=Et(r.align||"left");return t.$$set=t=>{"options"in t&&e(2,r=t.options),"value"in t&&e(3,s=t.value)},t.$$.update=()=>{8&t.$$.dirty&&e(0,o=null==s?"":s)},[o,i,r,s]}var St=Object.freeze({__proto__:null,default:class extends V{constructor(t){super(),Q(this,t,Mt,jt,s,{options:2,value:3})}},compatibleTypes:["number","boolean","string"],align:function(t){return t.align||"left"}});function Ot(n){let e,o,r=(n[0]?n[2]:n[3])+"";return{c(){e=a("div"),o=u(r),h(e,"class",n[1])},m(t,n){l(t,e,n),i(e,o)},p(t,[n]){1&n&&r!==(r=(t[0]?t[2]:t[3])+"")&&g(o,r)},i:t,o:t,d(t){t&&c(e)}}}function At(t,n,e){let{options:o}=n,{value:r}=n;const s=Et(o.align||"center"),i=o.true||"✓",l=o.false||"";return t.$$set=t=>{"options"in t&&e(4,o=t.options),"value"in t&&e(0,r=t.value)},[r,s,i,l,o]}var Ct=Object.freeze({__proto__:null,default:class extends V{constructor(t){super(),Q(this,t,At,Ot,s,{options:4,value:0})}},compatibleTypes:["boolean"],align:function(t){return t.align||"center"}});function Nt(n){let e,o;return{c(){e=a("div"),o=u(n[0]),h(e,"class",n[1])},m(t,n){l(t,e,n),i(e,o)},p(t,[n]){1&n&&g(o,t[0])},i:t,o:t,d(t){t&&c(e)}}}function Tt(t,n,e){let o,{options:r}=n,{value:s}=n;const i=r.round||void 0,l=Et(r.align||"right");return t.$$set=t=>{"options"in t&&e(2,r=t.options),"value"in t&&e(3,s=t.value)},t.$$.update=()=>{8&t.$$.dirty&&e(0,o=void 0===s?"":""+(i?qt(s,i):s))},[o,l,r,s]}var Jt=Object.freeze({__proto__:null,default:class extends V{constructor(t){super(),Q(this,t,Tt,Nt,s,{options:2,value:3})}},compatibleTypes:["number"],align:function(t){return t.align||"right"}});function zt(t,n,e){const o=t.slice();return o[5]=n[e],o}function Lt(t){let n,e,o,r=[],s=new Map,u=t[0].ticks;const d=t=>t[5];for(let n=0;n<u.length;n+=1){let e=zt(t,u,n),o=d(e);s.set(o,r[n]=Pt(o,e))}return{c(){n=a("div"),e=a("div"),o=f();for(let t=0;t<r.length;t+=1)r[t].c();h(e,"class","absolute "+t[2]+" h-2"),w(e,"left","0"),w(e,"top","-0.25rem"),w(e,"width",100*t[0].value+"%"),w(e,"background-color",Bt),w(e,"border-radius","2px"),h(e,"title",t[1]),h(n,"class","relative")},m(t,s){l(t,n,s),i(n,e),i(n,o);for(let t=0;t<r.length;t+=1)r[t].m(n,null)},p(t,o){1&o&&w(e,"width",100*t[0].value+"%"),2&o&&h(e,"title",t[1]),7&o&&(u=t[0].ticks,r=R(r,o,d,1,t,u,s,n,D,Pt,null,zt))},d(t){t&&c(n);for(let t=0;t<r.length;t+=1)r[t].d()}}}function Pt(t,n){let e;return{key:t,first:null,c(){e=a("div"),h(e,"class","absolute "+n[2]+" h-4"),w(e,"left","0"),w(e,"top","-0.5rem"),w(e,"width",100*n[5]+"%"),w(e,"border-right","1px solid "+Bt),h(e,"title",n[1]),this.first=e},m(t,n){l(t,e,n)},p(t,o){n=t,1&o&&w(e,"width",100*n[5]+"%"),2&o&&h(e,"title",n[1])},d(t){t&&c(e)}}}function Ft(n){let e,o=null!=n[0]&&Lt(n);return{c(){o&&o.c(),e=d()},m(t,n){o&&o.m(t,n),l(t,e,n)},p(t,[n]){null!=t[0]?o?o.p(t,n):(o=Lt(t),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},i:t,o:t,d(t){o&&o.d(t),t&&c(e)}}}const Bt="#111827";function Dt(t,n,e){let o,{options:r}=n,{value:s}=n,{converted:i}=n;const l=Et(r.align||"left");return t.$$set=t=>{"options"in t&&e(3,r=t.options),"value"in t&&e(4,s=t.value),"converted"in t&&e(0,i=t.converted)},t.$$.update=()=>{25&t.$$.dirty&&e(1,o=i?`${s}`+(r.ticks&&r.ticks.length>0?` ticks: ${(r.ticks||[]).join(", ")}`:""):"")},[i,o,l,r,s]}var It=Object.freeze({__proto__:null,default:class extends V{constructor(t){super(),Q(this,t,Dt,Ft,s,{options:3,value:4,converted:0})}},compatibleTypes:["number"],align:function(t){return t.align||"center"},convertColumn:function(t,n){const e=new Set;let o=0;for(const n of t)void 0!==n&&n>o&&(o=n);for(const t of n.ticks||[])void 0!==t&&t>o&&(o=t);n.max&&(n.max>=o?o=n.max:e.add(`max value for 'line' format ${n.max} is smaller than actual max ${o}`)),0==o&&(o=1);const r=(n.ticks||[]).map((t=>t<0?(e.add("negative values not supported for 'ticks' for 'line' format"),0):t/o));return{column:t.map((t=>{if(void 0!==t){if(!(t<0))return{value:t/o,ticks:r};e.add("negative values not supported for 'line' format")}})),warnings:Array.from(e).sort()}}});function Rt(n){let e,o;return{c(){e=a("div"),o=u(n[0]),h(e,"class",n[1])},m(t,n){l(t,e,n),i(e,o)},p(t,[n]){1&n&&g(o,t[0])},i:t,o:t,d(t){t&&c(e)}}}function Kt(t,n,e){let o,{options:r}=n,{value:s}=n;const i=Et(r.align||"left");return t.$$set=t=>{"options"in t&&e(2,r=t.options),"value"in t&&e(3,s=t.value)},t.$$.update=()=>{8&t.$$.dirty&&e(0,o=null==s?"":""+s)},[o,i,r,s]}const Ut={string:St,boolean:Ct,number:Jt,unknown:Object.freeze({__proto__:null,default:class extends V{constructor(t){super(),Q(this,t,Kt,Rt,s,{options:2,value:3})}},compatibleTypes:[],align:function(t){return t.align||"left"}}),line:It};function Wt(t){return t in Ut?{isError:!1,value:Ut[t]}:{isError:!0,message:`no '${t}' format`}}const Ht=["string","number","boolean","unknown"];function Gt(t,n,e){if(0==n.length)return{columns:[],rows:[],formats:[],messages:[]};const o=[];for(let e=0;e<n.length;e++){const r=n[e];if(Array.isArray(r)){const n={_i:e};if(t)for(let e=0;e<t.length&&e<r.length;e++)n[t[e].id]=r[e];else for(let t=0;t<Qt.length&&t<r.length;t++)n[Qt[t]]=r[t];o.push(n)}else o.push(Object.assign(Object.assign({},r),{_i:e}))}for(let t=0;t<o.length;t++){const n=o[t];for(const t in n)null===n[t]&&(n[t]=void 0)}const r=new Set;if(!t){const n=new Map,e=new Set;for(let t=0;t<o.length;t++){const s=o[t];for(const t in s){if("_i"==t)continue;let o=s[t];if(void 0===o)e.add(t);else{let e=typeof o;"object"==e?(r.add(`unknown type for column '${t}' - '${e}'`),n.set(t,"unknown")):n.has(t)?n.get(t)!=e&&(r.add(`unstable types for column '${t}', ${[n.get(t),e].sort().join(", ")}`),n.set(t,"unknown")):n.set(t,e)}}}for(const t of e)n.has(t)||n.set(t,"unknown");t=bt(Array.from(n,(([t,n])=>({id:t,type:n}))),(({id:t})=>t))}const s=new Map;for(const n of t){const{id:t}=n;s.has(t)&&(r.add(`not unique column id '${t}'`),n.id=t+s.get(t)),s.set(t,(s.get(t)||0)+1)}t=[...t];for(let n=0;n<o.length;n++){const e=o[n];for(const n of t){const{id:t,type:o}=n;if("_i"==t)continue;let s=e[t];if(void 0===s)continue;typeof s!=o&&"unknown"!=o&&Ht.includes(o)&&(r.add(`wrong type for column '${t}', specified as '${o}' but '${typeof s}' found`),n.type="unknown")}}for(const{id:n,min_max:e,type:s}of t){if(!e)continue;if("number"!=s){r.add(`wrong min_max on column '${n}' it can't be specified for non integer type '${s}'`);continue}const[t,i]=e;t>i&&r.add(`wrong min_max on column '${n}' min should not be greather than max`);for(const e of o){const o=e[n];null!=o&&(o<t&&r.add(`wrong min_max on column '${n}' column contains values lover than '${t}'`),o>i&&r.add(`wrong min_max on column '${n}' column contains values greater than '${t}'`))}}e&&t.unshift({id:"_i",type:"number"});const i=Wt("unknown");if(i.isError)throw"can't get 'unknown' formatter";const l=[];for(const n of t){const t=n.format||{type:n.type},e=Wt(t.type);e.isError?(r.add(e.message),l.push([i.value,t])):e.value.compatibleTypes.includes(n.type)?l.push([e.value,t]):(r.add(`column ${n.id} has wrong format, format ${n.format} is not compatible with '${n.type}' type`),l.push([i.value,t]))}for(let n=0;n<t.length;n++){const[{id:e},[s,i]]=[t[n],l[n]];if(s.convertColumn){const t=o.map((t=>t[e])),{column:n,warnings:l}=s.convertColumn(t,i);l.forEach((t=>r.add(t)));for(let t=0;t<o.length;t++){const r=o[t];r._converted||(r._converted={}),r._converted[e]=n[t]}}}return{columns:t,rows:o,formats:l,messages:Array.from(r).sort().map((t=>({type:"warn",message:t})))}}const Qt="abcdefghijklmnopqrstuvwxyz".split("");function Vt(t,n){let e;if(t.some((({width:t})=>null!=t)))e=t.map((({width:t})=>t||1));else{const o=new Map;for(const e of n)for(const{id:n,type:r}of t){let t;if(void 0===e[n])continue;if("string"==r)t=e[n].length;else if("number"==r)t=(""+e[n]).length;else{if("boolean"!=r)continue;t=1}let s=o.get(n);null==s&&(s=[],o.set(n,s)),s.push(t)}const r=xt(o,(t=>$t(t,.7))),s=gt(kt(r,[],((t,n)=>(t.push(n),t)))),i=1.618,l=xt(r,(t=>t>s*i?i:t<s/i?1/i:1)),c=1;e=t.map((({id:t})=>l.get(t)||c))}return Xt(e)}function Xt(t){const n=100/_t(t);let e=t.map((t=>qt(t*n)));for(;;){const t=_t(e);if(t>100)e[ht(e)]-=1;else{if(!(t<100))break;e[mt(e)]+=1}}return e}function Yt(t,n,e){if(!(e=function(t){return t.replace(/^[\t\s\n]+|[\t\s\n]+$/g,"")}(e)))return n;const o=/^([^=\s]+)=(.+)$/i;if(o.test(e)){const[t,r]=function(t,n){const e=ft(t,n);if(2!=e.length)throw new Error(`expected 2 matches but found ${e.length}`);return[e[0],e[1]]}(o,e),s=r.toLowerCase();return n.filter((n=>(""+n[t]).toLowerCase().includes(s)))}{const o=e.toLowerCase();return n.filter((n=>{for(const{id:e}of t)if((""+n[e]).toLowerCase().includes(o))return!0;return!1}))}}it("normalizeInputsSlow",(()=>{{const{columns:t,rows:n}=Gt(void 0,[["v",null]],!1);lt.equal(t,[{id:"a",type:"string"},{id:"b",type:"unknown"}]),lt.equal(n,[{a:"v",b:void 0,_i:0}])}{const{columns:t,rows:n}=Gt(void 0,[{k:"v",k2:null}],!1);lt.equal(t,[{id:"k",type:"string"},{id:"k2",type:"unknown"}]),lt.equal(n,[{k:"v",k2:void 0,_i:0}])}{const{columns:t,rows:n}=Gt(void 0,[{k:"v"},{k:0}],!1);lt.equal(t,[{id:"k",type:"unknown"}]),lt.equal(n,[{k:"v",_i:0},{k:0,_i:1}])}})),it("calculateColumnWidths",(()=>{lt.equal(Vt([{id:"name",type:"string"},{id:"age",type:"number"}],[{name:"Jim Raynor",age:30},{name:"Kate",age:25}]),[62,38])})),it("weightsToPercents",(()=>{lt.equal(Xt([2,2]),[50,50]),lt.equal(Xt([3,3,3]).sort(),[33,33,34])}));const Zt={string:function(t,n){return t.localeCompare(n)},number:function(t,n){return t-n},boolean:function(t,n){return t==n?0:t?1:-1},unknown:function(t,n){return(""+t).localeCompare(""+n)}};function tn(t,[n,e]){const o="desc"==e,r=yt(pt(t,(({id:t})=>t==n))).type;if(!(r in Zt))throw new Error(`no comparator for '${r}' type, please register one`);const s=Zt[r];return o?function(t,e){const o=e[n],r=t[n];return void 0===o?void 0===r?0:-1:void 0===r?1:s(o,r)}:function(t,e){const o=t[n],r=e[n];return void 0===o?void 0===r?0:-1:void 0===r?1:s(o,r)}}function nn(t,n,e){if(e.length>3)throw new Error("sort not supported for more than 3 columns");const[o,r,s]=e;if(null==o&&lt(null==r),null==r&&lt(null==s),0==n.length||null==o)return n;let i,l=tn(t,o),c=r?tn(t,r):void 0,a=s?tn(t,s):void 0;i=a?function(t,n){let e=l(t,n);return 0!=e?e:(e=c(t,n),0!=e?e:a(t,n))}:c?function(t,n){let e=l(t,n);return 0!=e?e:c(t,n)}:l;const u=[...n];return u.sort(i),u}function en(t,n,e){n=[...n];for(const t of n)t._weights={},t._nweights={};for(const[o,r]of e){const{type:e,min_max:s}=yt(pt(t,(({id:t})=>t==o)));let[i,l]=vt(n,(t=>void 0!==t[o]));if(0==i.length){for(const t of n)t._weights[o]=0,t._nweights[o]=0;continue}if("number"==e){const t=typeof n[0][o];if("number"!=t)throw new Error(`wrong type for '${o}' column, wsort expects number but found '${t}'`);for(const t of i)t._weights[o]=t[o]}else{if(!(e in Zt))throw new Error(`no comparator for '${e}' type, please register one`);const t=Zt[e];i.sort(((n,e)=>t(n[o],e[o])));let n,r=0;for(let t=0;t<i.length;t++){const e=i[t];e[o]==n?r+=1:n=e[o],e._weights[o]=t-r}}{let t,n;if(s){if("number"!=e)throw new Error("can't use min_max for non number type");t=s[0],n=s[1]}else{const e=i.map((t=>t._weights[o]));t=Math.min(...e),n=Math.max(...e)}const r=(n+t)/2;let l=(n-t)/2;lt(l>=0),l=0==l?1:l;for(const t of i){let n=(t._weights[o]-r)/l;t._nweights[o]=n}}let c=gt(i.map((t=>t._nweights[o])));for(const t of l)t._nweights[o]=c;if("desc"==r)for(const t of n)t._nweights[o]=-1*t._nweights[o]}for(const t of n){let n=0;for(const[o,r]of e)n+=t._nweights[o];t._w=n}return n.sort(((t,n)=>t._w-n._w)),n}function on(t){let n,e,o,r,s,d,$,v,b,y,k=t[2].symbol+"";return{c(){n=a("th"),e=a("a"),o=a("span"),r=u(k),d=f(),$=a("span"),v=u(t[1]),h(o,"class",s=t[2].klass),h(e,"class","flex justify-between"),h(e,"href","#"),w(n,"width",t[0]+"%"),h(n,"class","text-right")},m(s,c){l(s,n,c),i(n,e),i(e,o),i(o,r),i(e,d),i(e,$),i($,v),b||(y=p(e,"click",m(t[4])),b=!0)},p(t,e){4&e&&k!==(k=t[2].symbol+"")&&g(r,k),4&e&&s!==(s=t[2].klass)&&h(o,"class",s),2&e&&g(v,t[1]),1&e&&w(n,"width",t[0]+"%")},d(t){t&&c(n),b=!1,y()}}}function rn(t){let n,e,o,r,s,d,$,v,b,y,k,_,x,q=t[2].symbol+"",E=t[2].symbol+"";return{c(){n=a("th"),e=a("a"),o=a("span"),r=u(q),s=f(),d=a("span"),$=u(t[1]),v=f(),b=a("span"),y=u(E),h(o,"class","invisible"),h(b,"class",k=t[2].klass),h(e,"class","flex justify-between"),h(e,"href","#"),w(n,"width",t[0]+"%")},m(c,a){l(c,n,a),i(n,e),i(e,o),i(o,r),i(e,s),i(e,d),i(d,$),i(e,v),i(e,b),i(b,y),_||(x=p(e,"click",m(t[4])),_=!0)},p(t,e){4&e&&q!==(q=t[2].symbol+"")&&g(r,q),2&e&&g($,t[1]),4&e&&E!==(E=t[2].symbol+"")&&g(y,E),4&e&&k!==(k=t[2].klass)&&h(b,"class",k),1&e&&w(n,"width",t[0]+"%")},d(t){t&&c(n),_=!1,x()}}}function sn(t){let n,e,o,r,s,d,$,v,b,y,k=t[2].symbol+"";return{c(){n=a("th"),e=a("a"),o=a("span"),r=u(t[1]),s=f(),d=a("span"),$=u(k),h(d,"class",v=t[2].klass),h(e,"class","flex justify-between"),h(e,"href","#"),w(n,"width",t[0]+"%")},m(c,a){l(c,n,a),i(n,e),i(e,o),i(o,r),i(e,s),i(e,d),i(d,$),b||(y=p(e,"click",m(t[4])),b=!0)},p(t,e){2&e&&g(r,t[1]),4&e&&k!==(k=t[2].symbol+"")&&g($,k),4&e&&v!==(v=t[2].klass)&&h(d,"class",v),1&e&&w(n,"width",t[0]+"%")},d(t){t&&c(n),b=!1,y()}}}function ln(n){let e;let o=function(t,n){return"left"==t[3]?sn:"center"==t[3]?rn:on}(n)(n);return{c(){o.c(),e=d()},m(t,n){o.m(t,n),l(t,e,n)},p(t,[n]){o.p(t,n)},i:t,o:t,d(t){o.d(t),t&&c(e)}}}function cn(t,n,e){let o,r,s,{column:i}=n,{format:l}=n,{width:c}=n,{state:a}=n,u=i.id;const f=l[0].align(l[1]);return t.$$set=t=>{"column"in t&&e(6,i=t.column),"format"in t&&e(7,l=t.format),"width"in t&&e(0,c=t.width),"state"in t&&e(5,a=t.state)},t.$$.update=()=>{64&t.$$.dirty&&e(1,o=i.title||i.id),32&t.$$.dirty&&e(8,r=function(t){for(let n=0;n<t.length;n++){const[e,o]=t[n];if(e==u)return[o,n]}}(a.order)),288&t.$$.dirty&&e(2,s=function(t,n,e){if(!t)return{symbol:"↓",klass:"invisible"};if(n){const[n,e]=t;return{symbol:"asc"==n?"↓":"↑",klass:"text-gray-400"}}{const[n,e]=t,o="asc"==n?"↓":"↑";let r;if(0==e)r="";else if(1==e)r="text-gray-400";else{if(2!=e)throw new Error("color for more than 3 sort oders isn't supported");r="text-gray-300"}return{symbol:o,klass:r}}}(r,a.wsort,a.order.length))},[c,o,s,f,function(t){if(a.sortable)if(t.metaKey)e(5,a.order=r?a.order.map((([t,n])=>[t,t==u?"asc"==n?"desc":"asc":n])):[...a.order,[u,"asc"]],a);else{let t;t=a.order.length>1?"asc":r&&"asc"==r[0]?"desc":"asc",e(5,a.order=[[u,t]],a)}},a,i,l,r]}it("sortTable",(()=>{const t=[{id:"name",type:"string"},{id:"age",type:"number"}],n=[{name:"Artanis",age:200},{name:"Sarah",age:30},{name:"Jim",age:30},{name:"Amon",age:void 0}];let e=e=>nn(t,n,e).map((({name:t})=>t));lt.equal(e([["name","asc"]]),["Amon","Artanis","Jim","Sarah"]),lt.equal(e([["age","asc"]])[0],"Amon"),lt.equal(e([["age","asc"],["name","asc"]]),["Amon","Jim","Sarah","Artanis"])})),it("wsortTable",(()=>{let t=(t,n,e)=>en(t,n,e).map((({id:t})=>t));lt.equal(t([{id:"a",type:"number"},{id:"b",type:"number"}],[{id:"a",a:0,b:3},{id:"b",a:1,b:3},{id:"c",a:2,b:void 0},{id:"d",a:-2,b:200}],[["a","asc"],["b","desc"]]),["d","a","b","c"]);lt.equal(t([{id:"a",type:"number"}],[{id:"a",a:0},{id:"b",a:1},{id:"c",a:void 0}],[["a","asc"]]),["a","c","b"]);{const t=en([{id:"a",type:"string"}],[{id:"a",a:"a"},{id:"b",a:"a"},{id:"c",a:"b"}],[["a","asc"]]);lt.equal(t[2].id,"c"),lt.equal(t.map((t=>t._weights.a)),[0,0,1])}}));class an extends V{constructor(t){super(),Q(this,t,cn,ln,s,{column:6,format:7,width:0,state:5})}}function un(t,n,e){const o=t.slice();return o[5]=n[e],o[7]=e,o}function fn(t){let n,e,o;function r(n){t[4](n)}let s={column:t[5],format:t[2][t[7]],width:t[3][t[7]]};return void 0!==t[0]&&(s.state=t[0]),n=new an({props:s}),_.push((()=>K(n,"state",r))),{c(){U(n.$$.fragment)},m(t,e){W(n,t,e),o=!0},p(t,o){const r={};2&o&&(r.column=t[5]),6&o&&(r.format=t[2][t[7]]),10&o&&(r.width=t[3][t[7]]),!e&&1&o&&(e=!0,r.state=t[0],S((()=>e=!1))),n.$set(r)},i(t){o||(P(n.$$.fragment,t),o=!0)},o(t){F(n.$$.fragment,t),o=!1},d(t){H(n,t)}}}function dn(n){let e;return{c(){e=a("th"),w(e,"width",n[3][n[7]]+"%")},m(t,n){l(t,e,n)},p(t,n){10&n&&w(e,"width",t[3][t[7]]+"%")},i:t,o:t,d(t){t&&c(e)}}}function pn(t,n){let e,o,r,s,i;const a=[dn,fn],u=[];function f(t,n){return"_i"==t[5].id?0:1}return o=f(n),r=u[o]=a[o](n),{key:t,first:null,c(){e=d(),r.c(),s=d(),this.first=e},m(t,n){l(t,e,n),u[o].m(t,n),l(t,s,n),i=!0},p(t,e){let i=o;o=f(n=t),o===i?u[o].p(n,e):(z(),F(u[i],1,1,(()=>{u[i]=null})),L(),r=u[o],r?r.p(n,e):(r=u[o]=a[o](n),r.c()),P(r,1),r.m(s.parentNode,s))},i(t){i||(P(r),i=!0)},o(t){F(r),i=!1},d(t){t&&c(e),u[o].d(t),t&&c(s)}}}function mn(t){let n,e,o=[],r=new Map,s=t[1];const i=t=>t[5].id;for(let n=0;n<s.length;n+=1){let e=un(t,s,n),l=i(e);r.set(l,o[n]=pn(l,e))}return{c(){n=a("tr");for(let t=0;t<o.length;t+=1)o[t].c()},m(t,r){l(t,n,r);for(let t=0;t<o.length;t+=1)o[t].m(n,null);e=!0},p(t,[e]){15&e&&(s=t[1],z(),o=R(o,e,i,1,t,s,r,n,I,pn,null,un),L())},i(t){if(!e){for(let t=0;t<s.length;t+=1)P(o[t]);e=!0}},o(t){for(let t=0;t<o.length;t+=1)F(o[t]);e=!1},d(t){t&&c(n);for(let t=0;t<o.length;t+=1)o[t].d()}}}function hn(t,n,e){let{columns:o}=n,{formats:r}=n,{widths:s}=n,{state:i}=n;return t.$$set=t=>{"columns"in t&&e(1,o=t.columns),"formats"in t&&e(2,r=t.formats),"widths"in t&&e(3,s=t.widths),"state"in t&&e(0,i=t.state)},[i,o,r,s,function(t){i=t,e(0,i)}]}class gn extends V{constructor(t){super(),Q(this,t,hn,mn,s,{columns:1,formats:2,widths:3,state:0})}}function $n(t,n,e){const o=t.slice();return o[5]=n[e],o[7]=e,o}function wn(t){let n,e,o,r,s;const u=[yn,bn],d=[];function p(t,n){return"_converted"in t[2]&&t[5].id in t[2]._converted?0:1}return e=p(t),o=d[e]=u[e](t),{c(){n=a("td"),o.c(),r=f()},m(t,o){l(t,n,o),d[e].m(n,null),i(n,r),s=!0},p(t,s){let i=e;e=p(t),e===i?d[e].p(t,s):(z(),F(d[i],1,1,(()=>{d[i]=null})),L(),o=d[e],o?o.p(t,s):(o=d[e]=u[e](t),o.c()),P(o,1),o.m(n,r))},i(t){s||(P(o),s=!0)},o(t){F(o),s=!1},d(t){t&&c(n),d[e].d()}}}function vn(n){let e,o,r=n[2]._i+1+"";return{c(){e=a("td"),o=u(r),h(e,"class","text-right")},m(t,n){l(t,e,n),i(e,o)},p(t,n){4&n&&r!==(r=t[2]._i+1+"")&&g(o,r)},i:t,o:t,d(t){t&&c(e)}}}function bn(t){let n,e,o;var r=t[1][t[7]][0].default;function s(t){return{props:{options:t[1][t[7]][1],value:t[2][t[5].id]}}}return r&&(n=new r(s(t))),{c(){n&&U(n.$$.fragment),e=d()},m(t,r){n&&W(n,t,r),l(t,e,r),o=!0},p(t,o){const i={};if(3&o&&(i.options=t[1][t[7]][1]),5&o&&(i.value=t[2][t[5].id]),r!==(r=t[1][t[7]][0].default)){if(n){z();const t=n;F(t.$$.fragment,1,0,(()=>{H(t,1)})),L()}r?(n=new r(s(t)),U(n.$$.fragment),P(n.$$.fragment,1),W(n,e.parentNode,e)):n=null}else r&&n.$set(i)},i(t){o||(n&&P(n.$$.fragment,t),o=!0)},o(t){n&&F(n.$$.fragment,t),o=!1},d(t){t&&c(e),n&&H(n,t)}}}function yn(t){let n,e,o;var r=t[1][t[7]][0].default;function s(t){return{props:{options:t[1][t[7]][1],value:t[2][t[5].id],converted:t[2]._converted[t[5].id]}}}return r&&(n=new r(s(t))),{c(){n&&U(n.$$.fragment),e=d()},m(t,r){n&&W(n,t,r),l(t,e,r),o=!0},p(t,o){const i={};if(3&o&&(i.options=t[1][t[7]][1]),5&o&&(i.value=t[2][t[5].id]),5&o&&(i.converted=t[2]._converted[t[5].id]),r!==(r=t[1][t[7]][0].default)){if(n){z();const t=n;F(t.$$.fragment,1,0,(()=>{H(t,1)})),L()}r?(n=new r(s(t)),U(n.$$.fragment),P(n.$$.fragment,1),W(n,e.parentNode,e)):n=null}else r&&n.$set(i)},i(t){o||(n&&P(n.$$.fragment,t),o=!0)},o(t){n&&F(n.$$.fragment,t),o=!1},d(t){t&&c(e),n&&H(n,t)}}}function kn(t,n){let e,o,r,s,i;const a=[vn,wn],u=[];function f(t,n){return"_i"==t[5].id?0:1}return o=f(n),r=u[o]=a[o](n),{key:t,first:null,c(){e=d(),r.c(),s=d(),this.first=e},m(t,n){l(t,e,n),u[o].m(t,n),l(t,s,n),i=!0},p(t,e){let i=o;o=f(n=t),o===i?u[o].p(n,e):(z(),F(u[i],1,1,(()=>{u[i]=null})),L(),r=u[o],r?r.p(n,e):(r=u[o]=a[o](n),r.c()),P(r,1),r.m(s.parentNode,s))},i(t){i||(P(r),i=!0)},o(t){F(r),i=!1},d(t){t&&c(e),u[o].d(t),t&&c(s)}}}function _n(t){let n,e,o,s,i,u=[],f=new Map,d=t[0];const m=t=>t[5].id;for(let n=0;n<d.length;n+=1){let e=$n(t,d,n),o=m(e);f.set(o,u[n]=kn(o,e))}return{c(){n=a("tr");for(let t=0;t<u.length;t+=1)u[t].c();h(n,"class",e=t[3]?"bg-gray-100":"")},m(e,c){l(e,n,c);for(let t=0;t<u.length;t+=1)u[t].m(n,null);o=!0,s||(i=p(n,"click",(function(){r(t[4])&&t[4].apply(this,arguments)})),s=!0)},p(r,[s]){t=r,7&s&&(d=t[0],z(),u=R(u,s,m,1,t,d,f,n,I,kn,null,$n),L()),(!o||8&s&&e!==(e=t[3]?"bg-gray-100":""))&&h(n,"class",e)},i(t){if(!o){for(let t=0;t<d.length;t+=1)P(u[t]);o=!0}},o(t){for(let t=0;t<u.length;t+=1)F(u[t]);o=!1},d(t){t&&c(n);for(let t=0;t<u.length;t+=1)u[t].d();s=!1,i()}}}function xn(t,n,e){let{columns:o}=n,{formats:r}=n,{row:s}=n,{selected:i}=n,{onSelect:l}=n;return t.$$set=t=>{"columns"in t&&e(0,o=t.columns),"formats"in t&&e(1,r=t.formats),"row"in t&&e(2,s=t.row),"selected"in t&&e(3,i=t.selected),"onSelect"in t&&e(4,l=t.onSelect)},[o,r,s,i,l]}class qn extends V{constructor(t){super(),Q(this,t,xn,_n,s,{columns:0,formats:1,row:2,selected:3,onSelect:4})}}function En(n){let e,r,s,u,d,m,g,w,v=`<svg xmlns="http://www.w3.org/2000/svg" class="${"h-4 w-4 text-gray-900"}" viewBox="0 0 20 20" fill="currentColor">\n  <path fill-rule="evenodd" d="M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />\n</svg>`;let b,y;return{c(){e=a("div"),r=a("div"),s=f(),u=a("div"),d=a("input"),g=f(),w=a("button"),h(r,"class","flex items-center"),h(d,"class",m=n[2]+" rounded border border-gray-300 text-sm outline-none py-1 px-1 leading-4"),h(d,"type","text"),h(d,"placeholder","Filter"),h(w,"class","focus:outline-none"),h(u,"class","flex items-center space-x-1"),h(e,"class","flex items-center justify-between my-1 mx-1")},m(t,o){l(t,e,o),i(e,r),i(e,s),i(e,u),i(u,d),$(d,n[1]),i(u,g),i(u,w),w.innerHTML=v,b||(y=[p(d,"input",n[4]),p(d,"keyup",n[3]),p(w,"click",n[5])],b=!0)},p(t,[n]){4&n&&m!==(m=t[2]+" rounded border border-gray-300 text-sm outline-none py-1 px-1 leading-4")&&h(d,"class",m),2&n&&d.value!==t[1]&&$(d,t[1])},i:t,o:t,d(t){t&&c(e),b=!1,o(y)}}}function jn(t,n,e){let o,{state:r}=n,s=r.query;const i=function(t,n){let e;return(...o)=>{e&&clearTimeout(e),e=setTimeout((()=>t(...o)),n)}}((()=>{e(0,r.query=s,r)}),200);return t.$$set=t=>{"state"in t&&e(0,r=t.state)},t.$$.update=()=>{1&t.$$.dirty&&e(2,o=r.show_json?"invisible":"")},[r,s,o,i,function(){s=this.value,e(1,s)},()=>e(0,r.show_json=!r.show_json,r)]}class Mn extends V{constructor(t){super(),Q(this,t,jn,En,s,{state:0})}}function Sn(t,n,e){const o=t.slice();return o[1]=n[e],o}function On(n){let e;return{c(){e=a("div"),e.textContent="unknown message type"},m(t,n){l(t,e,n)},p:t,d(t){t&&c(e)}}}function An(t){let n,e,o,r,s=t[1].message+"";return{c(){n=a("div"),e=a("span"),e.textContent="error",o=f(),r=u(s),h(e,"class","bg-red-400 px-2 rounded")},m(t,s){l(t,n,s),i(n,e),i(n,o),i(n,r)},p(t,n){1&n&&s!==(s=t[1].message+"")&&g(r,s)},d(t){t&&c(n)}}}function Cn(t){let n,e,o,r,s=t[1].message+"";return{c(){n=a("div"),e=a("span"),e.textContent="warn",o=f(),r=u(s),h(e,"class","bg-yellow-400 px-2 rounded")},m(t,s){l(t,n,s),i(n,e),i(n,o),i(n,r)},p(t,n){1&n&&s!==(s=t[1].message+"")&&g(r,s)},d(t){t&&c(n)}}}function Nn(t){let n;function e(t,n){return"warn"==t[1].type?Cn:"error"==t[1].type?An:On}let o=e(t),r=o(t);return{c(){r.c(),n=d()},m(t,e){r.m(t,e),l(t,n,e)},p(t,s){o===(o=e(t))&&r?r.p(t,s):(r.d(1),r=o(t),r&&(r.c(),r.m(n.parentNode,n)))},d(t){r.d(t),t&&c(n)}}}function Tn(n){let e,o=n[0],r=[];for(let t=0;t<o.length;t+=1)r[t]=Nn(Sn(n,o,t));return{c(){e=a("div");for(let t=0;t<r.length;t+=1)r[t].c();h(e,"class","text-sm mt-1 mx-1")},m(t,n){l(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,[n]){if(1&n){let s;for(o=t[0],s=0;s<o.length;s+=1){const i=Sn(t,o,s);r[s]?r[s].p(i,n):(r[s]=Nn(i),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=o.length}},i:t,o:t,d(t){t&&c(e),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(r,t)}}}function Jn(t,n,e){let{messages:o}=n;return t.$$set=t=>{"messages"in t&&e(0,o=t.messages)},[o]}class zn extends V{constructor(t){super(),Q(this,t,Jn,Tn,s,{messages:0})}}function Ln(t,n,e){const o=t.slice();return o[16]=n[e],o}function Pn(t,n){let e,o,r;function s(...t){return n[13](n[16],...t)}return o=new qn({props:{columns:n[5],formats:n[7],row:n[16],selected:n[2].has(n[16]._i),onSelect:s}}),{key:t,first:null,c(){e=d(),U(o.$$.fragment),this.first=e},m(t,n){l(t,e,n),W(o,t,n),r=!0},p(t,e){n=t;const r={};16&e&&(r.row=n[16]),20&e&&(r.selected=n[2].has(n[16]._i)),16&e&&(r.onSelect=s),o.$set(r)},i(t){r||(P(o.$$.fragment,t),r=!0)},o(t){F(o.$$.fragment,t),r=!1},d(t){t&&c(e),H(o,t)}}}function Fn(t){let n,e,o;return{c(){n=a("div"),e=a("textarea"),h(e,"class","w-full h-full focus:outline-none"),e.readOnly=!0,w(e,"resize","none"),e.value=o=at(t[0]),h(n,"class","plot-table-json rounded border border-gray-200 text-xs overflow-scroll")},m(t,o){l(t,n,o),i(n,e)},p(t,n){1&n&&o!==(o=at(t[0]))&&(e.value=o)},d(t){t&&c(n)}}}function Bn(n){let e,o;return e=new zn({props:{messages:n[6]}}),{c(){U(e.$$.fragment)},m(t,n){W(e,t,n),o=!0},p:t,i(t){o||(P(e.$$.fragment,t),o=!0)},o(t){F(e.$$.fragment,t),o=!1},d(t){H(e,t)}}}function Dn(t){let n,e,o,r,s,u,m,g,$,w,v,b,y,k,x,q,E=[],j=new Map;function M(n){t[11](n)}let O={};function A(n){t[12](n)}void 0!==t[1]&&(O.state=t[1]),r=new Mn({props:O}),_.push((()=>K(r,"state",M)));let C={columns:t[5],formats:t[7],widths:t[8]};void 0!==t[1]&&(C.state=t[1]),g=new gn({props:C}),_.push((()=>K(g,"state",A)));let N=t[4];const T=t=>t[16]._i;for(let n=0;n<N.length;n+=1){let e=Ln(t,N,n),o=T(e);j.set(o,E[n]=Pn(o,e))}let J=t[1].show_json&&Fn(t),B=0!=t[0].warnings&&Bn(t);return{c(){n=a("table"),e=a("tr"),o=a("td"),U(r.$$.fragment),m=f(),U(g.$$.fragment),w=f();for(let t=0;t<E.length;t+=1)E[t].c();v=f(),J&&J.c(),b=f(),B&&B.c(),y=d(),h(o,"colspan",t[5].length),h(e,"class",u="plot-table-toolbar "+(!t[3]&&"invisible")+" "),h(n,"class","plot-table")},m(s,c){l(s,n,c),i(n,e),i(e,o),W(r,o,null),i(n,m),W(g,n,null),i(n,w);for(let t=0;t<E.length;t+=1)E[t].m(n,null);i(n,v),J&&J.m(n,null),l(s,b,c),B&&B.m(s,c),l(s,y,c),k=!0,x||(q=p(n,"click",t[14]),x=!0)},p(t,[o]){const i={};!s&&2&o&&(s=!0,i.state=t[1],S((()=>s=!1))),r.$set(i),(!k||8&o&&u!==(u="plot-table-toolbar "+(!t[3]&&"invisible")+" "))&&h(e,"class",u);const l={};!$&&2&o&&($=!0,l.state=t[1],S((()=>$=!1))),g.$set(l),692&o&&(N=t[4],z(),E=R(E,o,T,1,t,N,j,n,I,Pn,v,Ln),L()),t[1].show_json?J?J.p(t,o):(J=Fn(t),J.c(),J.m(n,null)):J&&(J.d(1),J=null),0!=t[0].warnings?B?(B.p(t,o),1&o&&P(B,1)):(B=Bn(t),B.c(),P(B,1),B.m(y.parentNode,y)):B&&(z(),F(B,1,1,(()=>{B=null})),L())},i(t){if(!k){P(r.$$.fragment,t),P(g.$$.fragment,t);for(let t=0;t<N.length;t+=1)P(E[t]);P(B),k=!0}},o(t){F(r.$$.fragment,t),F(g.$$.fragment,t);for(let t=0;t<E.length;t+=1)F(E[t]);F(B),k=!1},d(t){t&&c(n),H(r),H(g);for(let t=0;t<E.length;t+=1)E[t].d();J&&J.d(),t&&c(b),B&&B.d(t),t&&c(y),x=!1,q()}}}function In(t,n,e){let o,r,{options:s}=n,{columns:i,rows:l,messages:c,formats:a}=Gt(s.columns,s.rows,s._i||!1),u=Vt(i,l),f={query:s.query||"",wsort:0!=s.wsort,sortable:0!=s.sortable,order:s.order||[],show_json:!1},d=new Set;function p(t,n){!function(t,n,e,o){const r=new Set(e);if(t.metaKey)r.has(n)?r.delete(n):r.add(n);else{const t=r.has(n)&&1==r.size;r.clear(),t||r.add(n)}o(r)}(t,n,d,(t=>e(2,d=t)))}let m=!!s.toolbar;return t.$$set=t=>{"options"in t&&e(0,s=t.options)},t.$$.update=()=>{2&t.$$.dirty&&e(10,o=Yt(i,l,f.query)),1026&t.$$.dirty&&e(4,r=(f.wsort?en:nn)(i,o,f.order))},[s,f,d,m,r,i,c,a,u,p,o,function(t){f=t,e(1,f)},function(t){f=t,e(1,f)},(t,n)=>p(n,t._i),()=>e(3,m=!0)]}class Rn extends V{constructor(t){super(),Q(this,t,In,Dn,s,{options:0})}}function Kn(n){let e,o,r,s;return{c(){e=a("div"),o=a("span"),o.textContent="Error",r=u(" - can't load "),s=u(n[0]),h(o,"class","text-red-600 font-bold")},m(t,n){l(t,e,n),i(e,o),i(e,r),i(e,s)},p(t,n){1&n&&g(s,t[0])},i:t,o:t,d(t){t&&c(e)}}}function Un(t){let n,e,o,r,s,d=t[2](t[0],t[3])+"";return r=new Rn({props:{options:t[3]}}),{c(){n=a("h1"),e=u(d),o=f(),U(r.$$.fragment),h(n,"class","text-2xl mb-4")},m(t,c){l(t,n,c),i(n,e),l(t,o,c),W(r,t,c),s=!0},p(t,n){(!s||3&n)&&d!==(d=t[2](t[0],t[3])+"")&&g(e,d);const o={};2&n&&(o.options=t[3]),r.$set(o)},i(t){s||(P(r.$$.fragment,t),s=!0)},o(t){F(r.$$.fragment,t),s=!1},d(t){t&&c(n),t&&c(o),H(r,t)}}}function Wn(n){let e;return{c(){e=a("div"),e.textContent="Loading..."},m(t,n){l(t,e,n)},p:t,i:t,o:t,d(t){t&&c(e)}}}function Hn(t){let n,e,o,r={ctx:t,current:null,token:null,hasCatch:!0,pending:Wn,then:Un,catch:Kn,value:3,error:4,blocks:[,,,]};return B(e=t[1],r),{c(){n=a("div"),r.block.c(),h(n,"class","mx-5 my-2")},m(t,e){l(t,n,e),r.block.m(n,r.anchor=null),r.mount=()=>n,r.anchor=null,o=!0},p(n,[o]){t=n,r.ctx=t,2&o&&e!==(e=t[1])&&B(e,r)||function(t,n,e){const o=n.slice(),{resolved:r}=t;t.current===t.then&&(o[t.value]=r),t.current===t.catch&&(o[t.error]=r),t.block.p(o,e)}(r,t,o)},i(t){o||(P(r.block),o=!0)},o(t){for(let t=0;t<3;t+=1){F(r.blocks[t])}o=!1},d(t){t&&c(n),r.block.d(),r.token=null,r=null}}}function Gn(t,n,e){let{path:o}=n,{datap:r}=n;function s(t,n){return n.title||n.id||function(t,n){if(void 0===n){if(t.length<1)throw new Error("can't get last elements from empty list");return t[t.length-1]}if(t.length<n)throw new Error(`can't get last ${n} elements from list of length ${t.length}`);return t.slice(t.length-n,t.length)}(t.split("/")).replace(/\.[^\.]+$/,"")}return t.$$set=t=>{"path"in t&&e(0,o=t.path),"datap"in t&&e(1,r=t.datap)},t.$$.update=()=>{3&t.$$.dirty&&r.then((t=>document.title=s(o,t)))},[o,r,s]}const Qn=function(){let t=window.location.pathname;return t.startsWith("/")||(t+="/"),t=t.replace(/:([^:]+)$/i,""),/\.[^\/]+$/.test(t)||(t+=".json"),t}();new class extends V{constructor(t){super(),Q(this,t,Gn,Hn,s,{path:0,datap:1})}}({target:document.body,props:{path:Qn,datap:async function(t){let n=await fetch(function(t,n={}){const e=[];for(const t in n){const o=n[t];null!=t&&null!=o&&e.push(`${encodeURIComponent(t)}=${encodeURIComponent(""+n[t])}`)}return e.length>0?`${t}${t.includes("?")?"&":"?"}${e.join("&")}`:t}(t,{clearcache:Math.random()}));return await n.json()}(Qn)}})}();
